!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TelerikBlazor=e():t.TelerikBlazor=e()}(self,(()=>(()=>{var __webpack_modules__={840:(t,e,i)=>{var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(r,s,o,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=s.createElement("div"),u=Math.round,p=Math.abs,d=Date.now;function f(t,e,i){return setTimeout(x(t,i),e)}function g(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function y(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var v=y((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),b=y((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function w(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function k(t,e){return t===a?e:t}function C(t,e,i){m(O(e),(function(e){t.addEventListener(e,i,!1)}))}function A(t,e,i){m(O(e),(function(e){t.removeEventListener(e,i,!1)}))}function _(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function E(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function P(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];E(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function I(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<c.length;){if((n=(i=c[s])?i+r:e)in t)return n;s++}return a}var F=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var R="ontouchstart"in r,L=I(r,"PointerEvent")!==a,N=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",j="mouse",z=24,U=["x","y"],$=["clientX","clientY"];function H(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&i.handler(e)},this.init()}function V(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=1&e&&n-r==0,o=12&e&&n-r==0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=q(e));r>1&&!i.firstMultiple?i.firstMultiple=q(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,l=o?o.center:s.center,c=e.center=W(n);e.timeStamp=d(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=Y(l,c),e.distance=K(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=G(e.deltaX,e.deltaY);var h=X(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=o?(u=o.pointers,f=n,K(f[0],f[1],$)/K(u[0],u[1],$)):1,e.rotation=o?function(t,e){return Y(e[1],e[0],$)+Y(t[1],t[0],$)}(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,s,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(l>25||o.velocity===a)){var c=e.deltaX-o.deltaX,h=e.deltaY-o.deltaY,u=X(l,c,h);n=u.x,r=u.y,i=p(u.x)>p(u.y)?u.x:u.y,s=G(c,h),t.lastInterval=e}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}(i,e);var u,f;var g=t.element;_(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function X(t,e,i){return{x:e/t||0,y:i/t||0}}function G(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function K(t,e,i){i||(i=U);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function Y(t,e,i){i||(i=U);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(D(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},Z="mousedown",Q="mousemove mouseup";function tt(){this.evEl=Z,this.evWin=Q,this.pressed=!1,H.apply(this,arguments)}w(tt,H,{handler:function(t){var e=J[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},it={2:B,3:"pen",4:j,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function st(){this.evEl=nt,this.evWin=rt,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),w(st,H,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=et[n],s=it[t.pointerType]||t.pointerType,o=s==B,a=E(e,t.pointerId,"pointerId");1&r&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=at,this.evWin=lt,this.started=!1,H.apply(this,arguments)}function ht(t,e){var i=M(t.touches),n=M(t.changedTouches);return 12&e&&(i=P(i.concat(n),"identifier",!0)),[i,n]}w(ct,H,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var i=ht.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},pt="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=pt,this.targetIds={},H.apply(this,arguments)}function ft(t,e){var i=M(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=M(t.changedTouches),a=[],l=this.target;if(s=i.filter((function(t){return _(t.target,l)})),1===e)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),12&e&&delete n[o[r].identifier],r++;return a.length?[P(s.concat(a),"identifier",!0),a]:void 0}w(dt,H,{handler:function(t){var e=ut[t.type],i=ft.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}});function gt(){H.apply(this,arguments);var t=x(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,yt.call(this,e)):12&t&&yt.call(this,e)}function yt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function vt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=25&&o<=25)return!0}return!1}w(gt,H,{handler:function(t,e,i){var n=i.pointerType==B,r=i.pointerType==j;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)mt.call(this,e,i);else if(r&&vt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var bt=I(h.style,"touchAction"),wt=bt!==a,xt="compute",St="auto",kt="manipulation",Ct="none",At="pan-x",_t="pan-y",Tt=function(){if(!wt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==xt&&(t=this.compute()),wt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,Ct))return Ct;var e=T(t,At),i=T(t,_t);if(e&&i)return Ct;if(e||i)return e?At:_t;if(T(t,kt))return kt;return St}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=T(n,Ct)&&!Tt.none,s=T(n,_t)&&!Tt["pan-y"],o=T(n,At)&&!Tt["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!o||!s)return r||s&&6&i||o&&i&z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Et=32;function Mt(t){this.options=l({},this.defaults,t||{}),this.id=F++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function It(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Ft(t,e){var i=e.manager;return i?i.get(t):t}function Dt(){Mt.apply(this,arguments)}function Rt(){Dt.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){Dt.apply(this,arguments)}function Nt(){Mt.apply(this,arguments),this._timer=null,this._input=null}function Bt(){Dt.apply(this,arguments)}function jt(){Dt.apply(this,arguments)}function zt(){Mt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ut(t,e){return(e=e||{}).recognizers=k(e.recognizers,Ut.defaults.preset),new $t(t,e)}Mt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ft(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=Ft(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=Ft(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Ft(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Pt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Pt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Et},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=Et);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(Dt,Mt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:Et}}),w(Rt,Dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(_t),t&z&&e.push(At),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(6&e.direction?(r=0===s?1:s<0?2:4,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?1:o<0?8:16,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Dt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=It(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Lt,Dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Nt,Mt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[St]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Et},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(Bt,Dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(jt,Dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=It(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(zt,Mt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||K(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Et},failTimeout:function(){return this._timer=f((function(){this.state=Et}),this.options.interval,this),Et},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ut.VERSION="2.0.7",Ut.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Bt,{enable:!1}],[Lt,{enable:!1},["rotate"]],[jt,{direction:6}],[Rt,{direction:6},["swipe"]],[zt],[zt,{event:"doubletap",taps:2},["tap"]],[Nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function $t(t,e){var i;this.options=l({},Ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(L?st:N?dt:R?gt:tt))(i,V),this.touchAction=new Ot(this,this.options.touchAction),Ht(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ht(t,e){var i,n=t.element;n.style&&(m(t.options.cssProps,(function(r,s){i=I(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}$t.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Mt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=E(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return m(O(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return m(O(t),(function(t){e?i[t]&&i[t].splice(E(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ut,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Et,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:$t,Input:H,TouchAction:Ot,TouchInput:dt,MouseInput:tt,PointerEventInput:st,TouchMouseInput:gt,SingleTouchInput:ct,Recognizer:Mt,AttrRecognizer:Dt,Tap:zt,Pan:Rt,Swipe:jt,Pinch:Lt,Rotate:Bt,Press:Nt,on:C,off:A,each:m,merge:b,extend:v,assign:l,inherit:w,bindFn:x,prefixed:I}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Ut,(n=function(){return Ut}.call(e,i,e,t))===a||(t.exports=n)}(window,document)},299:function(module,__unused_webpack_exports,__webpack_require__){
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var factory;factory=()=>(()=>{"use strict";var __webpack_modules__=[,(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=h,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let i=0;for(let n=0;n<e;n++)i+=h(t[n]);let n=0;const r=new Uint8Array(i);for(let i=0;i<e;i++){let e=t[i];e instanceof Uint8Array||(e="string"==typeof e?c(e):new Uint8Array(e));const s=e.byteLength;r.set(e,n),n+=s}return r},e.assert=function(t,e){t||o(e)},e.bytesToString=function(t){"object"==typeof t&&null!==t&&void 0!==t.length||o("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const n=[];for(let r=0;r<e;r+=i){const s=Math.min(r+i,e),o=t.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(i,n){t.resolve=function(t){e=!0,i(t)},t.reject=function(t){e=!0,n(t)}})),t},e.createValidAbsoluteUrl=function(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=f(t)}catch(t){}}const n=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return r},e.info=function(t){r>=n.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){const e=Object.create(null);for(const[i,n]of t)e[i]=n;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(r=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=c,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const i=new TextDecoder(e,{fatal:!0}),n=c(t);return i.decode(n)}catch(t){s(`stringToPDFString: "${t}".`)}}const e=[];for(let i=0,n=t.length;i<n;i++){const n=d[t.charCodeAt(i)];e.push(n?String.fromCharCode(n):t.charAt(i))}return e.join("")},e.stringToUTF16BEString=function(t){const e=["þÿ"];for(let i=0,n=t.length;i<n;i++){const n=t.charCodeAt(i);e.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return e.join("")},e.stringToUTF8String=f,e.unreachable=o,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=s,i(2),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=n,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function s(t){r>=n.WARNINGS&&console.log(`Warning: ${t}`)}function o(t){throw new Error(t)}function a(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const l=function(){function t(e,i){this.constructor===t&&o("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();function c(t){"string"!=typeof t&&o("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function h(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void o("Invalid argument for arrayByteLength")}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class p{static makeHexColor(t,e,i){return`#${u[t]}${u[e]}${u[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=p.applyTransform(t,e),n=p.applyTransform(t.slice(2,4),e),r=p.applyTransform([t[0],t[3]],e),s=p.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],r[0],s[0]),Math.min(i[1],n[1],r[1],s[1]),Math.max(i[0],n[0],r[0],s[0]),Math.max(i[1],n[1],r[1],s[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],o=(i+s)/2,a=Math.sqrt((i+s)**2-4*(i*s-r*n))/2,l=o+a||1,c=o-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[i,r,n,s]}static bezierBoundingBox(t,e,i,n,r,s,o,a){const l=[],c=[[],[]];let h,u,p,d,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*i+6*r,h=-3*t+9*i-9*r+3*o,p=3*i-3*t):(u=6*e-12*n+6*s,h=-3*e+9*n-9*s+3*a,p=3*n-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-p/u,0<d&&d<1&&l.push(d)}else m=u*u-4*p*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)d=l[b],v=1-d,c[0][b]=v*v*v*t+3*v*v*d*i+3*v*d*d*r+d*d*d*o,c[1][b]=v*v*v*e+3*v*v*d*n+3*v*d*d*s+d*d*d*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=o,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=p;const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(t){return decodeURIComponent(escape(t))}},(t,e,i)=>{i(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=i},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:i}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=i}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let i;if("string"==typeof t||t instanceof URL)i={url:t};else if((0,_util.isArrayBuffer)(t))i={data:t};else if(t instanceof PDFDataRangeTransport)i={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");i=t}const n=Object.create(null);let r=null,s=null;for(const t in i){const e=i[t];switch(t){case"url":if("undefined"!=typeof window)try{n[t]=new URL(e,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}else if("string"==typeof e||e instanceof URL){n[t]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":r=e;continue;case"worker":s=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)n[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)n[t]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[t]=new Uint8Array(e)}else n[t]=new Uint8Array(e)}continue}n[t]=e}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),"string"!=typeof n.cMapUrl&&(n.cMapUrl=null),"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null),"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),"object"==typeof n.ownerDocument&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!s){const t={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};s=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=s}const o=e.docId;return s.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(s,n,r,o),i=new Promise((function(t){let e;r?e=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},r):n.data||(e=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),t(e)}));return Promise.all([t,i]).then((function([t,i]){if(e.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(o,t,s.port),a=new WorkerTransport(r,e,i,n);e._transport=a,r.send("Ready",null)}))})).catch(e._capability.reject),e}async function _fetchDocument(t,e,i,n){if(t.destroyed)throw new Error("Worker was destroyed");i&&(e.length=i.length,e.initialData=i.initialData,e.progressiveDone=i.progressiveDone,e.contentDispositionFilename=i.contentDispositionFilename);const r=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.14.305",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(t.destroyed)throw new Error("Worker was destroyed");return r}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await(this._transport?.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,i,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._ownerDocument=n,this._transport=i,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);let i=this._annotationPromises.get(e.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,e.renderingIntent),this._annotationPromises.set(e.cacheKey,i),i=i.then((t=>{for(const e of t)void 0!==e.titleObj&&Object.defineProperty(e,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),e.titleObj.str)}),void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),e.contentsObj.str)});return t}))),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:r=null,imageLayer:s=null,canvasFactory:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const u=this._transport.getRenderingIntent(i,n);this.pendingCleanup=!1,l||(l=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u.cacheKey);p||(p=Object.create(null),this._intentStates.set(u.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const d=o||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=(0,_util.createPromiseCapability)(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(u));const g=t=>{p.renderTasks.delete(m),(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(m.capability.reject(t),this._abortOperatorList({intentState:p,reason:t instanceof Error?t:new Error(t)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},m=new InternalRenderTask({callback:g,params:{canvasContext:t,viewport:e,transform:r,imageLayer:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:d,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(m);const y=m.task;return Promise.all([p.displayReadyCapability.promise,l]).then((([t,e])=>{this.pendingCleanup?g():(this._stats&&this._stats.time("Rendering"),m.initializeGraphics({transparency:t,optionalContentConfig:e}),m.operatorListChanged())})).catch(g),y}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE}={}){const i=this._transport.getRenderingIntent(t,e,!0);let n,r=this._intentStates.get(i.cacheKey);return r||(r=Object.create(null),this._intentStates.set(i.cacheKey,r)),r.opListReadCapability||(n=Object.create(null),n.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(n))},r.opListReadCapability=(0,_util.createPromiseCapability)(),(r.renderTasks||=new Set).add(n),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(i)),r.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==t,includeMarkedContent:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const n=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){n.read().then((function({value:i,done:n}){n?t(r):(Object.assign(r.styles,i.styles),r.items.push(...i.items),e())}),i)}()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e}){const i=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:t&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),n=this._intentStates.get(e);n.streamReader=i;const r=()=>{i.read().then((({value:t,done:e})=>{e?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,n),r())}),(t=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(const t of n.renderTasks)t.operatorListChanged();this._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(t);else{if(!n.opListReadCapability)throw t;n.opListReadCapability.reject(t)}}}))};r()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(!i){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,e){const i={data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,i)}))}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const i=this._listeners.indexOf(e);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch(t){return!1}const n=new URL(e,i);return i.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#e=new WeakMap;constructor({name:t=null,port:e=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#e.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return PDFWorker.#e.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let t=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),i=new _message_handler.MessageHandler("main","worker",e),n=()=>{e.removeEventListener("error",r),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||n()};e.addEventListener("error",r),i.on("test",(t=>{e.removeEventListener("error",r),this.destroyed?n():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",r),this.destroyed)n();else try{s()}catch(t){this._setupFakeWorker()}}));const s=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void s()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const i="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(i+"_worker",i,e);t.setup(n,e);const r=new _message_handler.MessageHandler(i,i+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has(t.port)?this.#e.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#i=null;#n=new Map;#r=new Map;#s=null;constructor(t,e,i,n){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,n.useWorkerFetch||(this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked}),this.StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#i}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,i=!1){let n=_util.RenderingIntentFlag.DISPLAY,r="";switch(t){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,r=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(n+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:`${n}_${r}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#n.values())t.push(e._destroy());this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=(0,_util.createPromiseCapability)(),n=this._fullReader;return n.headersReady.then((()=>{n.isStreamingSupported&&n.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),n.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const i=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{e.onPassword(i,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#n.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,n])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(i){case"Font":const r=this._params;if("error"in n){const t=n.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}let s=null;r.pdfBug&&globalThis.FontInspector?.enabled&&(s={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const o=new _font_loader.FontFaceObject(n,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(o).catch((i=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!r.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(e,o)}));break;case"FontPath":case"Image":this.commonObjs.resolve(e,n);break;default:throw new Error(`Got unknown common object type ${i}`)}})),t.on("obj",(([t,e,i,n])=>{if(this.destroyed)return;const r=this.#n.get(e);if(!r.objs.has(t))switch(i){case"Image":r.objs.resolve(t,n);const e=8e6;if(n){let t;if(n.bitmap){const{bitmap:e,width:i,height:s}=n;t=i*s*4,r._bitmaps.add(e)}else t=n.data?.length||0;t>e&&(r.cleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${i}`)}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("DocStats",(t=>{this.destroyed||(this.#i=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#r.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);return this.#n.set(e,i),i}));return this.#r.set(e,n),n}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#s||=this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of this.#n.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}class PDFObjects{#o=Object.create(null);#a(t){const e=this.#o[t];return e||(this.#o[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,e=null){if(e){const i=this.#a(t);return i.capability.promise.then((()=>e(i.data))),null}const i=this.#o[t];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){return this.#o[t]?.capability.settled||!1}resolve(t,e=null){const i=this.#a(t);i.data=e,i.capability.resolve()}clear(){this.#o=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static#l=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:s,pageIndex:o,canvasFactory:a,useRequestAnimationFrame:l=!1,pdfBug:c=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=a,this._pdfBug=c,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#l.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#l.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:r,imageLayer:s,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,s,e,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#l.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#l.delete(this._canvas),this.callback())))}}const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getFilenameFromUrl=function(t){const e=t.indexOf("#"),i=t.indexOf("?"),n=Math.min(e>0?e:t.length,i>0?i:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)},e.getPdfFilenameFromUrl=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(d(t))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch(t){}return s||e},e.getXfaPageViewport=function(t,{scale:e=1,rotation:i=0}){const{width:n,height:r}=t.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new u({viewBox:s,scale:e,rotation:i})},e.isDataScheme=d,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=f,e.loadScript=function(t,e=!1){return new Promise(((i,n)=>{const r=document.createElement("script");r.src=t,r.onload=function(t){e&&r.remove(),i(t)},r.onerror=function(){n(new Error(`Cannot load script at: ${r.src}`))},(document.head||document.documentElement).appendChild(r)}))};var n=i(6),r=i(1);class s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=s;class o extends n.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function a(t,e=!1){if(f(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);return e?new Uint8Array(await i.arrayBuffer()):(0,r.stringToBytes)(await i.text())}return new Promise(((i,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),e&&(s.responseType="arraybuffer"),s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(200===s.status||0===s.status){let t;if(e&&s.response?t=new Uint8Array(s.response):!e&&s.responseText&&(t=(0,r.stringToBytes)(s.responseText)),t)return void i(t)}n(new Error(s.statusText))}},s.send(null)}))}e.DOMCanvasFactory=o;class l extends n.BaseCMapReaderFactory{_fetchData(t,e){return a(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=l;class c extends n.BaseStandardFontDataFactory{_fetchData(t){return a(t,!0)}}e.DOMStandardFontDataFactory=c;class h extends n.BaseSVGFactory{_createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=h;class u{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=r;const o=(t[2]+t[0])/2,a=(t[3]+t[1])/2;let l,c,h,u,p,d,f,g;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,h=0,u=1;break;case 90:l=0,c=1,h=1,u=0;break;case 270:l=0,c=-1,h=-1,u=0;break;case 0:l=1,c=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(h=-h,u=-u),0===l?(p=Math.abs(a-t[1])*e+n,d=Math.abs(o-t[0])*e+r,f=Math.abs(t[3]-t[1])*e,g=Math.abs(t[2]-t[0])*e):(p=Math.abs(o-t[0])*e+n,d=Math.abs(a-t[1])*e+r,f=Math.abs(t[2]-t[0])*e,g=Math.abs(t[3]-t[1])*e),this.transform=[l*e,c*e,h*e,u*e,p-l*e*o-h*e*a,d-c*e*o-u*e*a],this.width=f,this.height=g}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new u({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return r.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=r.Util.applyTransform([t[0],t[1]],this.transform),i=r.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return r.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=u;class p extends r.BaseException{constructor(t,e){super(t,"RenderingCancelledException"),this.type=e}}function d(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function f(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch(t){return!1}}let g;e.RenderingCancelledException=p,e.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,r.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,r.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const t of this.times){const i=t.name;i.length>e&&(e=i.length)}for(const i of this.times){const n=i.end-i.start;t.push(`${i.name.padEnd(e)} ${n}ms\n`)}return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||"string"!=typeof t)return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=g.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let a=parseInt(e[6],10);a=a>=0&&a<=59?a:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(s+=c,o+=h):"+"===l&&(s-=c,o-=h),new Date(Date.UTC(i,n,r,s,o,a))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=i(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class s{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(e,i).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class o{constructor({baseUrl:t=null}){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=o;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=i(1);class r{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:i=globalThis.document,styleElement:s=null}){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=e,this._document=i,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const i=e.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(t.attached||t.missingFile)return;if(t.attached=!0,this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent([e],[t],n)}))}}_queueLoadingCallback(t){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,n.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,i){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends r{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;return("undefined"==typeof navigator||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(t=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,i={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function(){for((0,n.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(i),i}get _loadTestFont(){return(0,n.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,i){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,i,n){return t.substring(0,e)+n+t.substring(e+i)}let o,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;const u=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,u.length,u);const d=1482184792;let f=r(p,16);for(o=0,a=u.length-3;o<a;o+=4)f=f-d+r(u,o)|0;o<u.length&&(f=f-d+r(u+"XXX",o)|0),p=s(p,16,4,(0,n.string32)(f));const g=`@font-face {font-family:"${u}";src:url(data:font/opentype;base64,${btoa(p)});}`;this.insertRule(g);const m=[];for(const t of e)m.push(t.loadedName);m.push(u);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const t of m){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,y.appendChild(e)}this._document.body.appendChild(y),function t(e,i){if(h++,h>30)return(0,n.warn)("Load test font never loaded."),void i();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(u,(()=>{y.remove(),i.complete()}))}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:i=!1,ignoreErrors:n=!1,onUnsupportedFeature:r,fontRegistry:s=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===i,this.ignoreErrors=!0===n,this._onUnsupportedFeature=r,this.fontRegistry=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,n.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const t=[];for(const e of i){const i=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",i,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const n of i)"scale"===n.cmd&&(n.args=[e,-e]),t[n.cmd].apply(t,n.args)}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var n=i(9),r=i(1);e.AnnotationStorage=class{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(t,e){const i=this._storage.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this._storage.get(t)}setValue(t,e){const i=this._storage.get(t);let n=!1;if(void 0!==i)for(const[t,r]of Object.entries(e))i[t]!==r&&(n=!0,i[t]=r);else n=!0,this._storage.set(t,e);n&&this._setModified()}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const t=new n.MurmurHash3_64;for(const[e,i]of this._storage)t.update(`${e}:${JSON.stringify(i)}`);return t.hexdigest()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,s=4294901760,o=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:r,this.h2=t?4294967295&t:r}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,r=t.length;n<r;n++){const r=t.charCodeAt(n);r<=255?e[i++]=r:(e[i++]=r>>>8,e[i++]=255&r)}}else{if(!(0,n.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),i=e.byteLength}const r=i>>2,a=i-4*r,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,u=this.h1,p=this.h2;const d=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<r;t++)1&t?(c=l[t],c=c*d&s|c*g&o,c=c<<15|c>>>17,c=c*f&s|c*m&o,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*d&s|h*g&o,h=h<<15|h>>>17,h=h*f&s|h*m&o,p^=h,p=p<<13|p>>>19,p=5*p+3864292196);switch(c=0,a){case 3:c^=e[4*r+2]<<16;case 2:c^=e[4*r+1]<<8;case 1:c^=e[4*r],c=c*d&s|c*g&o,c=c<<15|c>>>17,c=c*f&s|c*m&o,1&r?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1,t=3981806797*t&s|36045*t&o,e=4283543511*e&s|(2950163797*(e<<16|t>>>16)&s)>>>16,t^=e>>>1,t=444984403*t&s|60499*t&o,e=3301882366*e&s|(3120437893*(e<<16|t>>>16)&s)>>>16,t^=e>>>1;const i=(t>>>0).toString(16),n=(e>>>0).toString(16);return i.padStart(8,"0")+n.padStart(8,"0")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=i(1),r=i(11),s=i(12),o=i(3),a=i(5);const l=4096,c=16;function h(t){if(t._transformStack&&(t._transformStack=[]),!t.mozCurrentTransform){t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._originalResetTransform=t.resetTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[];try{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=e.set,t._getLineWidth=e.get,Object.defineProperty(t,"lineWidth",{set:function(t){this._setLineWidth(1.000001*t)},get:function(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){const[t,e,i,n,r,s]=this._transformMatrix,o=t*n-e*i,a=e*i-t*n;return[n/o,e/a,i/a,t/o,(n*r-i*s)/a,(e*r-t*s)/o]}}),t.save=function(){const t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){0===this._transformStack.length&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");const t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){const i=this._transformMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this._originalTranslate(t,e)},t.scale=function(t,e){const i=this._transformMatrix;i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this._originalScale(t,e)},t.transform=function(e,i,n,r,s,o){const a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*i,a[1]*e+a[3]*i,a[0]*n+a[2]*r,a[1]*n+a[3]*r,a[0]*s+a[2]*o+a[4],a[1]*s+a[3]*o+a[5]],t._originalTransform(e,i,n,r,s,o)},t.setTransform=function(e,i,n,r,s,o){this._transformMatrix=[e,i,n,r,s,o],t._originalSetTransform(e,i,n,r,s,o)},t.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],t._originalResetTransform()},t.rotate=function(t){const e=Math.cos(t),i=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*i,n[1]*e+n[3]*i,n[0]*-i+n[2]*e,n[1]*-i+n[3]*e,n[4],n[5]],this._originalRotate(t)}}}class u{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i,n){let r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,i),r.context.setTransform(1,0,0,1,0,0)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),n&&h(r.context),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function p(t,e,i,n,r,s,o,a,l,c){const[h,u,p,d,f,g]=t.mozCurrentTransform;if(0===u&&0===p){const m=o*h+f,y=Math.round(m),v=a*d+g,b=Math.round(v),w=(o+l)*h+f,x=Math.abs(Math.round(w)-y)||1,S=(a+c)*d+g,k=Math.abs(Math.round(S)-b)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(d),y,b),t.drawImage(e,i,n,r,s,0,0,x,k),t.setTransform(h,u,p,d,f,g),[x,k]}if(0===h&&0===d){const m=a*p+f,y=Math.round(m),v=o*u+g,b=Math.round(v),w=(a+c)*p+f,x=Math.abs(Math.round(w)-y)||1,S=(o+l)*u+g,k=Math.abs(Math.round(S)-b)||1;return t.setTransform(0,Math.sign(u),Math.sign(p),0,y,b),t.drawImage(e,i,n,r,s,0,0,k,x),t.setTransform(h,u,p,d,f,g),[k,x]}return t.drawImage(e,i,n,r,s,o,a,l,c),[Math.hypot(h,u)*l,Math.hypot(p,d)*c]}class d{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=n.Util.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=n.Util.applyTransform(e,t),r=n.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,i[0],r[0]),this.minY=Math.min(this.minY,i[1],r[1]),this.maxX=Math.max(this.maxX,i[0],r[0]),this.maxY=Math.max(this.maxY,i[1],r[1])}updateScalingPathMinMax(t,e){n.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,s,o,a,l,c,h){const u=n.Util.bezierBoundingBox(e,i,r,s,o,a,l,c);if(h)return h[0]=Math.min(h[0],u[0],u[2]),h[1]=Math.max(h[1],u[0],u[2]),h[2]=Math.min(h[2],u[1],u[3]),void(h[3]=Math.max(h[3],u[1],u[3]));this.updateRectMinMax(t,u)}getPathBoundingBox(t=r.PathType.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===r.PathType.STROKE){e||(0,n.unreachable)("Stroke bounding box must include transform.");const t=n.Util.singularValueDecompose2dScale(e),r=t[0]*this.lineWidth/2,s=t[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const t=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=r.PathType.FILL,e=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function f(t,e,i=null){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const r=e.height,s=e.width,o=r%c,a=(r-o)/c,l=0===o?a:a+1,h=t.createImageData(s,c);let u,p=0;const d=e.data,f=h.data;let g,m,y,v,b,w,x,S;if(i)switch(i.length){case 1:b=i[0],w=i[0],x=i[0],S=i[0];break;case 4:b=i[0],w=i[1],x=i[2],S=i[3]}if(e.kind===n.ImageKind.GRAYSCALE_1BPP){const e=d.byteLength,i=new Uint32Array(f.buffer,0,f.byteLength>>2),r=i.length,v=s+7>>3;let b=4294967295,w=n.FeatureTest.isLittleEndian?4278190080:255;for(S&&255===S[0]&&0===S[255]&&([b,w]=[w,b]),g=0;g<l;g++){for(y=g<a?c:o,u=0,m=0;m<y;m++){const t=e-p;let n=0;const r=t>v?s:8*t-7,o=-8&r;let a=0,l=0;for(;n<o;n+=8)l=d[p++],i[u++]=128&l?b:w,i[u++]=64&l?b:w,i[u++]=32&l?b:w,i[u++]=16&l?b:w,i[u++]=8&l?b:w,i[u++]=4&l?b:w,i[u++]=2&l?b:w,i[u++]=1&l?b:w;for(;n<r;n++)0===a&&(l=d[p++],a=128),i[u++]=l&a?b:w,a>>=1}for(;u<r;)i[u++]=0;t.putImageData(h,0,g*c)}}else if(e.kind===n.ImageKind.RGBA_32BPP){const e=!!(b||w||x);for(m=0,v=s*c*4,g=0;g<a;g++){if(f.set(d.subarray(p,p+v)),p+=v,e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,m),m+=c}if(g<l){if(v=s*o*4,f.set(d.subarray(p,p+v)),e)for(let t=0;t<v;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,m)}}else{if(e.kind!==n.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const e=!!(b||w||x);for(y=c,v=s*y,g=0;g<l;g++){for(g>=a&&(y=o,v=s*y),u=0,m=v;m--;)f[u++]=d[p++],f[u++]=d[p++],f[u++]=d[p++],f[u++]=255;if(e)for(let t=0;t<u;t+=4)b&&(f[t+0]=b[f[t+0]]),w&&(f[t+1]=w[f[t+1]]),x&&(f[t+2]=x[f[t+2]]);t.putImageData(h,0,g*c)}}}}function g(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,n=e.width,r=i%c,o=(i-r)/c,a=0===r?o:o+1,l=t.createImageData(n,c);let h=0;const u=e.data,p=l.data;for(let e=0;e<a;e++){const i=e<o?c:r;({srcPos:h}=(0,s.applyMaskImageData)({src:u,srcPos:h,dest:p,width:n,height:i})),t.putImageData(l,0,e*c)}}function m(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let n=0,r=i.length;n<r;n++){const r=i[n];void 0!==t[r]&&(e[r]=t[r])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function y(t,e){t.strokeStyle=t.fillStyle=e||"#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function v(t,e,i,n){const r=t.length;for(let s=3;s<r;s+=4){const r=t[s];if(0===r)t[s-3]=e,t[s-2]=i,t[s-1]=n;else if(r<255){const o=255-r;t[s-3]=t[s-3]*r+e*o>>8,t[s-2]=t[s-2]*r+i*o>>8,t[s-1]=t[s-1]*r+n*o>>8}}}function b(t,e,i){const n=t.length;for(let r=3;r<n;r+=4){const n=i?i[t[r]]:t[r];e[r]=e[r]*n*.00392156862745098|0}}function w(t,e,i){const n=t.length;for(let r=3;r<n;r+=4){const n=77*t[r-3]+152*t[r-2]+28*t[r-1];e[r]=i?e[r]*i[n>>8]>>8:e[r]*n>>16}}function x(t,e,i,n){const r=n[0],s=n[1],o=n[2]-r,a=n[3]-s;0!==o&&0!==a&&(function(t,e,i,n,r,s,o,a,l,c,h){const u=!!s,p=u?s[0]:0,d=u?s[1]:0,f=u?s[2]:0;let g;g="Luminosity"===r?w:b;const m=Math.min(n,Math.ceil(1048576/i));for(let r=0;r<n;r+=m){const s=Math.min(m,n-r),y=t.getImageData(a-c,r+(l-h),i,s),b=e.getImageData(a,r+l,i,s);u&&v(y.data,p,d,f),g(y.data,b.data,o),e.putImageData(b,a,r+l)}}(e.context,i,o,a,e.subtype,e.backdrop,e.transferMap,r,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}function S(t,e){const i=n.Util.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:i[0]<=r||i[1]<=r}const k=["butt","round","square"],C=["miter","round","bevel"],A={},_={};class T{constructor(t,e,i,n,r,s,o,a){this.ctx=t,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.imageLayer=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=s,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=a?.background||null,this.foregroundColor=a?.foreground||null,t&&h(t),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const r=this.ctx.canvas.width,s=this.ctx.canvas.height,o=n||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const t=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const e=this.backgroundColor=this.ctx.fillStyle;let i=!0,n=o;if(this.ctx.fillStyle=o,n=this.ctx.fillStyle,i="string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n),"#000000"===t&&"#ffffff"===e||t===e||!i)this.foregroundColor=this.backgroundColor=null;else{const i=parseInt(n.slice(1),16),r=(i&&16711680)>>16,s=(i&&65280)>>8,o=i&&255,a=t=>(t/=255)<=.03928?t/12.92:((t+.055)/1.055)**2.4,l=Math.round(.2126*a(r)+.7152*a(s)+.0722*a(o));this.selectColor=(i,n,r)=>{const s=.2126*a(i)+.7152*a(n)+.0722*a(r);return Math.round(s)===l?e:t}}}if(this.ctx.fillStyle=this.backgroundColor||o,this.ctx.fillRect(0,0,r,s),this.ctx.restore(),i){const t=this.cachedCanvases.getCanvas("transparent",r,s,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),y(this.ctx,this.foregroundColor),t&&(this.ctx.transform.apply(this.ctx,t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(t,e,i,r){const s=t.argsArray,o=t.fnArray;let a=e||0;const l=s.length;if(l===a)return a;const c=l-a>10&&"function"==typeof i,h=c?Date.now()+15:0;let u=0;const p=this.commonObjs,d=this.objs;let f;for(;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(f=o[a],f!==n.OPS.dependency)this[f].apply(this,s[a]);else for(const t of s[a]){const e=t.startsWith("g_")?p:d;if(!e.has(t))return e.get(t,i),a}if(a++,a===l)return a;if(c&&++u>10){if(Date.now()>h)return i(),a;u=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(t,e){const i=t.width,n=t.height;let r,s,o=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=n,h="prescale1";for(;o>2&&l>1||a>2&&c>1;){let e=l,i=c;o>2&&l>1&&(e=Math.ceil(l/2),o/=l/e),a>2&&c>1&&(i=Math.ceil(c/2),a/=c/i),r=this.cachedCanvases.getCanvas(h,e,i,!1),s=r.context,s.clearRect(0,0,e,i),s.drawImage(t,0,0,l,c,0,0,e,i),t=r.canvas,l=e,c=i,h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,l=e.mozCurrentTransform;let c,h,u,d;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer,i=l.slice(0,4);h=JSON.stringify(a?i:[i,o]),c=this._cachedBitmapsMap.get(e),c||(c=new Map,this._cachedBitmapsMap.set(e,c));const n=c.get(h);if(n&&!a)return{canvas:n,offsetX:Math.round(Math.min(l[0],l[2])+l[4]),offsetY:Math.round(Math.min(l[1],l[3])+l[5])};u=n}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s,!1),g(d.context,t));let f=n.Util.transform(l,[1/i,0,0,-1/s,0,0]);f=n.Util.transform(f,[1,0,0,1,0,-s]);const m=n.Util.applyTransform([0,0],f),y=n.Util.applyTransform([i,s],f),v=n.Util.normalizeRect([m[0],m[1],y[0],y[1]]),b=Math.round(v[2]-v[0])||1,w=Math.round(v[3]-v[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",b,w,!0),k=x.context,C=Math.min(m[0],y[0]),A=Math.min(m[1],y[1]);k.translate(-C,-A),k.transform.apply(k,f),u||(u=this._scaleImage(d.canvas,k.mozCurrentTransformInverse),u=u.img,c&&a&&c.set(h,u)),k.imageSmoothingEnabled=S(k.mozCurrentTransform,t.interpolate),p(k,u,0,0,u.width,u.height,0,0,i,s),k.globalCompositeOperation="source-in";const _=n.Util.transform(k.mozCurrentTransformInverse,[1,0,0,1,-C,-A]);return k.fillStyle=a?o.getPattern(e,this,_,r.PathType.FILL):o,k.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,x.canvas)),{canvas:x.canvas,offsetX:Math.round(C),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=k[t]}setLineJoin(t){this.ctx.lineJoin=C[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,i=t.length;e<i;e++){const i=t[e],n=i[0],r=i[1];switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1],this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=r}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e,!0);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform.apply(r,this.suspendedCtx.mozCurrentTransform),m(this.suspendedCtx,r),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,n,r,s,o){e.transform(t,i,n,r,s,o),this.__originalTransform(t,i,n,r,s,o)},t.setTransform=function(t,i,n,r,s,o){e.setTransform(t,i,n,r,s,o),this.__originalSetTransform(t,i,n,r,s,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,n,r,s,o){e.bezierCurveTo(t,i,n,r,s,o),this.__originalBezierCurveTo(t,i,n,r,s,o)},t.rect=function(t,i,n,r){e.rect(t,i,n,r),this.__originalRect(t,i,n,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask;x(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,r,s){this.ctx.transform(t,e,i,n,r,s),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,s=this.current;let o,a,l=s.x,c=s.y;const h=r.mozCurrentTransform,u=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],p=u?i.slice(0):null;for(let i=0,d=0,f=t.length;i<f;i++)switch(0|t[i]){case n.OPS.rectangle:l=e[d++],c=e[d++];const t=e[d++],i=e[d++],f=l+t,g=c+i;r.moveTo(l,c),0===t||0===i?r.lineTo(f,g):(r.lineTo(f,c),r.lineTo(f,g),r.lineTo(l,g)),u||s.updateRectMinMax(h,[l,c,f,g]),r.closePath();break;case n.OPS.moveTo:l=e[d++],c=e[d++],r.moveTo(l,c),u||s.updatePathMinMax(h,l,c);break;case n.OPS.lineTo:l=e[d++],c=e[d++],r.lineTo(l,c),u||s.updatePathMinMax(h,l,c);break;case n.OPS.curveTo:o=l,a=c,l=e[d+4],c=e[d+5],r.bezierCurveTo(e[d],e[d+1],e[d+2],e[d+3],l,c),s.updateCurvePathMinMax(h,o,a,e[d],e[d+1],e[d+2],e[d+3],l,c,p),d+=6;break;case n.OPS.curveTo2:o=l,a=c,r.bezierCurveTo(l,c,e[d],e[d+1],e[d+2],e[d+3]),s.updateCurvePathMinMax(h,o,a,l,c,e[d],e[d+1],e[d+2],e[d+3],p),l=e[d+2],c=e[d+3],d+=4;break;case n.OPS.curveTo3:o=l,a=c,l=e[d+2],c=e[d+3],r.bezierCurveTo(e[d],e[d+1],l,c,l,c),s.updateCurvePathMinMax(h,o,a,e[d],e[d+1],l,c,l,c,p),d+=4;break;case n.OPS.closePath:r.closePath()}u&&s.updateScalingPathMinMax(h,p),s.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t){t=void 0===t||t;const e=this.ctx,i=this.current.fillColor;let n=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.FILL),n=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=A}eoClip(){this.pendingClip=_}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(let i=0;i<t.length;i++){const n=t[i];e.setTransform.apply(e,n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||n.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif";let o="normal";i.black?o="900":i.bold&&(o="bold");const a=i.italic?"italic":"normal",l=`"${s}", ${i.fallbackName}`;let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font=`${a} ${o} ${c}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,r,s){this.current.textMatrix=[t,e,i,n,r,s],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r){const s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,h=l&n.TextRenderingMode.FILL_STROKE_MASK,u=!!(l&n.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let d;(a.disableFontFace||u||p)&&(d=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||p?(s.save(),s.translate(e,i),s.beginPath(),d(s,c),r&&s.setTransform.apply(s,r),h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||s.fill(),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||s.fillText(t,e,i),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||s.strokeText(t,e,i)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:s.mozCurrentTransform,x:e,y:i,fontSize:c,addToPath:d})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){i=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(0===s)return;const o=this.ctx,a=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,p=t.length,d=i.vertical,f=d?1:-1,g=i.defaultVMetrics,m=s*e.fontMatrix[0],y=e.textRenderingMode===n.TextRenderingMode.FILL&&!i.disableFontFace&&!e.patternFill;let v;if(o.save(),o.transform.apply(o,e.textMatrix),o.translate(e.x,e.y+e.textRise),h>0?o.scale(u,-1):o.scale(u,1),e.patternFill){o.save();const t=e.fillColor.getPattern(o,this,o.mozCurrentTransformInverse,r.PathType.FILL);v=o.mozCurrentTransform,o.restore(),o.fillStyle=t}let b=e.lineWidth;const w=e.textMatrixScale;if(0===w||0===b){const t=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;t!==n.TextRenderingMode.STROKE&&t!==n.TextRenderingMode.FILL_STROKE||(b=this.getSinglePixelWidth())}else b/=w;1!==a&&(o.scale(a,a),b/=a),o.lineWidth=b;let x,S=0;for(x=0;x<p;++x){const e=t[x];if("number"==typeof e){S+=f*e*s/1e3;continue}let n=!1;const r=(e.isSpace?c:0)+l,u=e.fontChar,p=e.accent;let b,w,k,C=e.width;if(d){const t=e.vmetric||g,i=-(e.vmetric?t[1]:.5*C)*m,n=t[2]*m;C=t?-t[0]:C,b=i/a,w=(S+n)/a}else b=S/a,w=0;if(i.remeasure&&C>0){const t=1e3*o.measureText(u).width/s*a;if(C<t&&this.isFontSubpixelAAEnabled){const e=C/t;n=!0,o.save(),o.scale(e,1),b/=e}else C!==t&&(b+=(C-t)/2e3*s/a)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(y&&!p)o.fillText(u,b,w);else if(this.paintChar(u,b,w,v),p){const t=b+s*p.offset.x/a,e=w-s*p.offset.y/a;this.paintChar(p.fontChar,t,e,v)}k=d?C*m-r*h:C*m+r*h,S+=k,n&&o.restore()}d?e.y-=S:e.x+=S*u,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,u=i.fontMatrix||n.FONT_IDENTITY_MATRIX,p=t.length;let d,f,g,m;if(i.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==s){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,i.textMatrix),e.translate(i.x,i.y),e.scale(h,o),d=0;d<p;++d){if(f=t[d],"number"==typeof f){m=a*f*s/1e3,this.ctx.translate(m,0),i.x+=m*h;continue}const o=(f.isSpace?c:0)+l,p=r.charProcOperatorList[f.operatorListId];p?(this.contentVisible&&(this.processingType3=f,this.save(),e.scale(s,s),e.transform.apply(e,u),this.executeOperatorList(p),this.restore()),g=n.Util.applyTransform([f.width,0],u)[0]*s+o,e.translate(g,0),i.x+=g*h):(0,n.warn)(`Type3 character "${f.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,r,s){this.ctx.rect(i,n,r-i,s-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),s={createCanvasGraphics:t=>new T(t,this.commonObjs,this.objs,this.canvasFactory)};e=new r.TilingPattern(t,i,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const r=this.selectColor?.(t,e,i)||n.Util.makeHexColor(t,e,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(t,e,i){const r=this.selectColor?.(t,e,i)||n.Util.makeHexColor(t,e,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=(0,r.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.SHADING);const s=e.mozCurrentTransformInverse;if(s){const t=e.canvas,i=t.width,r=t.height,o=n.Util.applyTransform([0,0],s),a=n.Util.applyTransform([0,r],s),l=n.Util.applyTransform([i,0],s),c=n.Util.applyTransform([i,r],s),h=Math.min(o[0],a[0],l[0],c[0]),u=Math.min(o[1],a[1],l[1],c[1]),p=Math.max(o[0],a[0],l[0],c[0]),d=Math.max(o[1],a[1],l[1],c[1]);this.ctx.fillRect(h,u,p-h,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||(0,n.info)("TODO: Support non-isolated groups."),t.knockout&&(0,n.warn)("Knockout groups not supported.");const i=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=n.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform);const s=[0,0,e.canvas.width,e.canvas.height];r=n.Util.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]);let c=Math.max(Math.ceil(r[2])-o,1),h=Math.max(Math.ceil(r[3])-a,1),u=1,p=1;c>l&&(u=c/l,c=l),h>l&&(p=h/l,h=l),this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,h,!0),g=f.context;g.scale(1/u,1/p),g.translate(-o,-a),g.transform.apply(g,i),t.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:o,offsetY:a,scaleX:u,scaleY:p,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.scale(u,p),e.save()),m(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,t);const i=n.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(t,e,i,r,s){if(this.save(),Array.isArray(e)&&4===e.length){const r=e[2]-e[0],o=e[3]-e[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=r,e[3]=o;const[s,l]=n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:c}=this,u=Math.ceil(r*this.outputScaleX*c),p=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,p);const{canvas:d,context:f}=this.annotationCanvas,g=`var(--zoom-factor) * ${a.PixelsPerInch.PDF_TO_CSS_UNITS}`;d.style.width=`calc(${r}px * ${g})`,d.style.height=`calc(${o}px * ${g})`,this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.setTransform(s,0,0,-l,0,o*l),h(this.ctx),y(this.ctx,this.foregroundColor)}else y(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],r,o),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,i),this.transform.apply(this,r)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let s,a,l,c=new Uint8Array(r*(i+1));const h=e+7&-8;let u=new Uint8Array(h*i),p=0;for(const e of t.data){let t=128;for(;t>0;)u[p++]=e&t?0:255,t>>=1}let d=0;for(p=0,0!==u[p]&&(c[0]=1,++d),a=1;a<e;a++)u[p]!==u[p+1]&&(c[a]=u[p]?2:1,++d),p++;for(0!==u[p]&&(c[a]=2,++d),s=1;s<i;s++){p=s*h,l=s*r,u[p-h]!==u[p]&&(c[l]=u[p]?1:8,++d);let t=(u[p]?4:0)+(u[p-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(u[p+1]?4:0)+(u[p-h+1]?8:0),n[t]&&(c[l+a]=n[t],++d),p++;if(u[p-h]!==u[p]&&(c[l+a]=u[p]?2:4,++d),d>1e3)return null}for(p=h*(i-1),l=s*r,0!==u[p]&&(c[l]=8,++d),a=1;a<e;a++)u[p]!==u[p+1]&&(c[l+a]=u[p]?4:8,++d),p++;if(0!==u[p]&&(c[l+a]=4,++d),d>1e3)return null;const f=new Int32Array([0,r,-1,0,-r,0,0,0,1]);let g,m,y;for(o.isNodeJS?m=[]:g=new Path2D,s=0;d&&s<=i;s++){let t=s*r;const i=t+e;for(;t<i&&!c[t];)t++;if(t===i)continue;g?g.moveTo(t%r,s):y=[t%r,s];const n=t;let o=c[t];do{const e=f[o];do{t+=e}while(!c[t]);const i=c[t];5!==i&&10!==i?(o=i,c[t]=0):(o=i&51*o>>4,c[t]&=o>>2|o<<2),g?g.lineTo(t%r,t/r|0):y.push(t%r,t/r|0),c[t]||--d}while(n!==t);g||m.push(y),--s}return u=null,c=null,function(t){if(t.save(),t.scale(1/e,-1/i),t.translate(0,-i),g)t.fill(g);else{t.beginPath();for(const e of m){t.moveTo(e[0],e[1]);for(let i=2,n=e.length;i<n;i+=2)t.lineTo(e[i],e[i+1])}t.fill()}t.beginPath(),t.restore()}}(t)),n.compiled))return void n.compiled(i);const r=this._createMaskCanvas(t),s=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,s,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=a.mozCurrentTransform;a.transform(e,i,r,s,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,0,0);for(let t=0,h=o.length;t<h;t+=2){const h=n.Util.transform(l,[e,i,r,s,o[t],o[t+1]]),[u,p]=n.Util.applyTransform([0,0],h);a.drawImage(c.canvas,u,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let s=0,o=t.length;s<o;s++){const o=t[s],a=o.width,l=o.height,c=this.cachedCanvases.getCanvas("maskCanvas",a,l,!1),h=c.context;h.save(),g(h,o),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,e.mozCurrentTransformInverse,r.PathType.FILL):i,h.fillRect(0,0,a,l),h.restore(),e.save(),e.transform.apply(e,o.transform),e.scale(1,-1),p(e,c.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,n.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const s=this.getObject(t);if(!s)return void(0,n.warn)("Dependent image isn't ready yet");const o=s.width,a=s.height,l=[];for(let t=0,n=r.length;t<n;t+=2)l.push({transform:[e,0,0,i,r[t],r[t+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;let r;if(this.save(),n.scale(1/e,-1/i),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,i,!1);f(n.context,t,this.current.transferMaps),r=n.canvas}const s=this._scaleImage(r,n.mozCurrentTransformInverse);n.imageSmoothingEnabled=S(n.mozCurrentTransform,t.interpolate);const[o,a]=p(n,s.img,0,0,s.paintWidth,s.paintHeight,0,-i,e,i);if(this.imageLayer){const e=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:o,height:a})}this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,n=t.width,r=t.height,s=this.cachedCanvases.getCanvas("inlineImage",n,r,!1);f(s.context,t,this.current.transferMaps);for(let o=0,a=e.length;o<a;o++){const a=e[o];if(i.save(),i.transform.apply(i,a.transform),i.scale(1,-1),p(i,s.canvas,a.x,a.y,a.w,a.h,0,-1,1,1),this.imageLayer){const e=this.getCanvasPosition(a.x,a.y);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:n,height:r})}i.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===_?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:t}=this.current,e=this.ctx.mozCurrentTransform;let i,n;if(0===e[1]&&0===e[2]){const r=Math.abs(e[0]),s=Math.abs(e[3]);if(0===t)i=1/r,n=1/s;else{const e=r*t,o=s*t;i=e<1?1/e:1,n=o<1?1/o:1}}else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[1]),o=Math.hypot(e[2],e[3]);if(0===t)i=o/r,n=s/r;else{const e=t*r;i=o>e?o/e:1,n=s>e?s/e:1}}this._cachedScaleForStroking=[i,n]}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=i||1,1===n&&1===r)return void e.stroke();let s,o,a;t&&(s=e.mozCurrentTransform.slice(),o=e.getLineDash().slice(),a=e.lineDashOffset),e.scale(n,r);const l=Math.max(n,r);e.setLineDash(e.getLineDash().map((t=>t/l))),e.lineDashOffset/=l,e.stroke(),t&&(e.setTransform(...s),e.setLineDash(o),e.lineDashOffset=a)}getCanvasPosition(t,e){const i=this.ctx.mozCurrentTransform;return[i[0]*t+i[2]*e+i[4],i[1]*t+i[3]*e+i[5]]}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}e.CanvasGraphics=T;for(const t in n.OPS)void 0!==T.prototype[t]&&(T.prototype[n.OPS[t]]=T.prototype[t])},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new l(t);case"Mesh":return new u(t);case"Dummy":return new p}throw new Error(`Unknown IR type: ${t[0]}`)};var n=i(1),r=i(3);const s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o(t,e){if(!e||r.isNodeJS)return;const i=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],i,n),t.clip(s)}e.PathType=s;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class l extends a{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,i,r){let a;if(r===s.STROKE||r===s.FILL){const s=e.current.getClippedPathBoundingBox(r,t.mozCurrentTransform)||[0,0,0,0],l=Math.ceil(s[2]-s[0])||1,c=Math.ceil(s[3]-s[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-s[0],-s[1]),i=n.Util.transform(i,[1,0,0,1,s[0],s[1]]),u.transform.apply(u,e.baseTransform),this.matrix&&u.transform.apply(u,this.matrix),o(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=t.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(i);try{a.setTransform(p)}catch(t){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${t?.message}".`)}}else o(t,this._bbox),a=this._createGradient(t);return a}}function c(t,e,i,n,r,s,o,a){const l=e.coords,c=e.colors,h=t.data,u=4*t.width;let p;l[i+1]>l[n+1]&&(p=i,i=n,n=p,p=s,s=o,o=p),l[n+1]>l[r+1]&&(p=n,n=r,r=p,p=o,o=a,a=p),l[i+1]>l[n+1]&&(p=i,i=n,n=p,p=s,s=o,o=p);const d=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(f>=v)return;const b=c[s],w=c[s+1],x=c[s+2],S=c[o],k=c[o+1],C=c[o+2],A=c[a],_=c[a+1],T=c[a+2],O=Math.round(f),E=Math.round(v);let M,P,I,F,D,R,L,N;for(let t=O;t<=E;t++){if(t<m){let e;e=t<f?0:(f-t)/(f-m),M=d-(d-g)*e,P=b-(b-S)*e,I=w-(w-k)*e,F=x-(x-C)*e}else{let e;e=t>v?1:m===v?0:(m-t)/(m-v),M=g-(g-y)*e,P=S-(S-A)*e,I=k-(k-_)*e,F=C-(C-T)*e}let e;e=t<f?0:t>v?1:(f-t)/(f-v),D=d-(d-y)*e,R=b-(b-A)*e,L=w-(w-_)*e,N=x-(x-T)*e;const i=Math.round(Math.min(M,D)),n=Math.round(Math.max(M,D));let r=u*t+4*i;for(let t=i;t<=n;t++)e=(M-t)/(M-D),e<0?e=0:e>1&&(e=1),h[r++]=P-(P-R)*e|0,h[r++]=I-(I-L)*e|0,h[r++]=F-(F-N)*e|0,h[r++]=255}}function h(t,e,i){const n=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(n.length/a)-1,h=a-1;for(s=0;s<l;s++){let e=s*a;for(let s=0;s<h;s++,e++)c(t,i,n[e],n[e+1],n[e+a],r[e],r[e+1],r[e+a]),c(t,i,n[e+a+1],n[e+1],n[e+a],r[e+a+1],r[e+1],r[e+a])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)c(t,i,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class u extends a{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-n,o=Math.ceil(this._bounds[3])-r,a=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*t[1]*1.1)),3e3),c=s/a,u=o/l,p={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/c,scaleY:1/u},d=a+4,f=l+4,g=i.getCanvas("mesh",d,f,!1),m=g.context,y=m.createImageData(a,l);if(e){const t=y.data;for(let i=0,n=t.length;i<n;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const t of this._figures)h(y,t,p);return m.putImageData(y,2,2),{canvas:g.canvas,offsetX:n-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}getPattern(t,e,i,r){let a;if(o(t,this._bbox),r===s.SHADING)a=n.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(a=n.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=n.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*t[0],a[1]*t[1]]}const l=this._createMeshCanvas(a,r===s.SHADING?null:this._background,e.cachedCanvases);return r!==s.SHADING&&(t.setTransform.apply(t,e.baseTransform),this.matrix&&t.transform.apply(t,this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class p extends a{getPattern(){return"hotpink"}}const d=1,f=2;class g{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,i,n,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,r=this.xstep,s=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+a);const h=i[0],u=i[1],p=i[2],d=i[3],f=n.Util.singularValueDecompose2dScale(this.matrix),g=n.Util.singularValueDecompose2dScale(this.baseTransform),m=[f[0]*g[0],f[1]*g[1]],y=this.getSizeAndScale(r,this.ctx.canvas.width,m[0]),v=this.getSizeAndScale(s,this.ctx.canvas.height,m[1]),b=t.cachedCanvases.getCanvas("pattern",y.size,v.size,!0),w=b.context,x=c.createCanvasGraphics(w);x.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(x,o,l);let S=h,k=u,C=p,A=d;return h<0&&(S=0,C+=Math.abs(h)),u<0&&(k=0,A+=Math.abs(u)),w.translate(-y.scale*S,-v.scale*k),x.transform(y.scale,0,0,v.scale,0,0),w.save(),this.clipBbox(x,S,k,C,A),x.baseTransform=x.ctx.mozCurrentTransform.slice(),x.executeOperatorList(e),x.endDrawing(),{canvas:b.canvas,scaleX:y.scale,scaleY:v.scale,offsetX:S,offsetY:k}}getSizeAndScale(t,e,i){t=Math.abs(t);const n=Math.max(g.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=n?r=n:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,n,r){const s=n-e,o=r-i;t.ctx.rect(e,i,s,o),t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[e,i,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,s=t.current;switch(e){case d:const t=this.ctx;r.fillStyle=t.fillStyle,r.strokeStyle=t.strokeStyle,s.fillColor=t.fillStyle,s.strokeColor=t.strokeStyle;break;case f:const o=n.Util.makeHexColor(i[0],i[1],i[2]);r.fillStyle=o,r.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new n.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let o=i;r!==s.SHADING&&(o=n.Util.transform(o,e.baseTransform),this.matrix&&(o=n.Util.transform(o,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");try{c.setTransform(l)}catch(t){(0,n.warn)(`TilingPattern.getPattern: "${t?.message}".`)}return c}}e.TilingPattern=g},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function({src:t,srcPos:e=0,dest:i,destPos:r=0,width:s,height:o,inverseDecode:a=!1}){const l=n.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[0,l]:[l,0],u=s>>3,p=7&s,d=t.length;i=new Uint32Array(i.buffer);for(let n=0;n<o;n++){for(const n=e+u;e<n;e++){const n=e<d?t[e]:255;i[r++]=128&n?h:c,i[r++]=64&n?h:c,i[r++]=32&n?h:c,i[r++]=16&n?h:c,i[r++]=8&n?h:c,i[r++]=4&n?h:c,i[r++]=2&n?h:c,i[r++]=1&n?h:c}if(0===p)continue;const n=e<d?t[e++]:255;for(let t=0;t<p;t++)i[r++]=n&1<<7-t?h:c}return{srcPos:e,destPos:r}};var n=i(1)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=void 0===i.workerPort?null:i.workerPort,i.workerSrc=void 0===i.workerSrc?"":i.workerSrc},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=i(1);const r=1,s=2,o=1,a=2,l=3,c=4,h=5,u=6,p=7,d=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new n.AbortException(t.message);case"MissingPDFException":return new n.MissingPDFException(t.message);case"PasswordException":return new n.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new n.UnknownErrorException(t.message,t.details);default:return new n.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===r)i.resolve(e.data);else{if(e.callback!==s)throw new Error("Unexpected callback case");i.reject(f(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,o=e.sourceName;new Promise((function(t){t(n(e.data))})).then((function(n){i.postMessage({sourceName:t,targetName:o,callback:r,callbackId:e.callbackId,data:n})}),(function(n){i.postMessage({sourceName:t,targetName:o,callback:s,callbackId:e.callbackId,reason:f(n)})}))}else e.streamId?this._createStreamSink(e):n(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,s=(0,n.createPromiseCapability)();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(t){s.reject(t)}return s.promise}sendWithStream(t,e,i,r){const s=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const o=(0,n.createPromiseCapability)();return this.streamControllers[s]={controller:i,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:s,data:e,desiredSize:i.desiredSize},r),o.promise},pull:t=>{const e=(0,n.createPromiseCapability)();return this.streamControllers[s].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,n.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,n.createPromiseCapability)();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:o,streamId:s,reason:f(t)}),e.promise}},i)}_createStreamSink(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,o=this,a=this.actionHandler[t.action],u={enqueue(t,o=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=o,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:l,streamId:e}),delete o.streamSinks[e])},error(t){(0,n.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:h,streamId:e,reason:f(t)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:d,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:d,streamId:e,reason:f(t)})}))}_processStreamMessage(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case d:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case p:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,reason:f(t)})}));break;case c:if((0,n.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,n.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,e);break;case h:(0,n.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this._deleteStreamController(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this._deleteStreamController(g,e);break;case o:if(!m)break;new Promise((function(e){e(m.onCancel&&m.onCancel(f(t.reason)))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:a,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=i(1);e.Metadata=class{#c;#h;constructor({parsedData:t,rawData:e}){this.#c=t,this.#h=e}getRaw(){return this.#h}get(t){return this.#c.get(t)??null}getAll(){return(0,n.objectFromMap)(this.#c)}has(t){return this.#c.has(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=i(1);class r{constructor(t,e){this.visible=!0,this.name=t,this.intent=e}}e.OptionalContentConfig=class{constructor(t){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;for(const e of t.groups)this._groups.set(e.id,new r(e.name,e.intent));if("OFF"===t.baseState)for(const t of this._groups)t.visible=!1;for(const e of t.on)this._groups.get(e).visible=!0;for(const e of t.off)this._groups.get(e).visible=!1}}_evaluateVisibilityExpression(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const e=t[r];let s;if(Array.isArray(e))s=this._evaluateVisibilityExpression(e);else{if(!this._groups.has(e))return(0,n.warn)(`Optional content group not found: ${e}`),!0;s=this._groups.get(e).visible}switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===i}isVisible(t){if(0===this._groups.size)return!0;if(!t)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return this._groups.has(t.id)?this._groups.get(t.id).visible:((0,n.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this._evaluateVisibilityExpression(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,n.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,n.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,n.warn)(`Optional content group not found: ${e}`),!0;if(!this._groups.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e))return(0,n.warn)(`Optional content group not found: ${e}`),!0;if(this._groups.get(e).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,n.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){this._groups.has(t)?this._groups.get(t).visible=!!e:(0,n.warn)(`Optional content group not found: ${t}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,n.objectFromMap)(this._groups):null}getGroup(t){return this._groups.get(t)||null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=i(1),r=i(5);e.PDFDataTransportStream=class{constructor(t,e){(0,n.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const i=t.initialData;if(i?.length>0){const t=new Uint8Array(i).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const i=this._rangeReaders.some((function(i){return i._begin===t.begin&&(i._enqueue(e),!0)}));(0,n.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new s(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new o(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class s{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=(0,r.isPdfFile)(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class i{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!i.shouldBuildText(s))return;n?.attributes?.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&e.push({str:r}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}e.XfaText=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=i(6);const r=function(t){return new Promise(((e,i)=>{__webpack_require__(172).readFile(t,((t,n)=>{!t&&n?e(new Uint8Array(n)):i(new Error(t))}))}))};class s extends n.BaseCanvasFactory{_createCanvas(t,e){return __webpack_require__(414).createCanvas(t,e)}}e.NodeCanvasFactory=s;class o extends n.BaseCMapReaderFactory{_fetchData(t,e){return r(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=o;class a extends n.BaseStandardFontDataFactory{_fetchData(t){return r(t)}}e.NodeStandardFontDataFactory=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=i(1),r=i(5),s=i(8),o=i(21),a=i(22);const l=1e3,c=new WeakSet;function h(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class u{static create(t){switch(t.data.annotationType){case n.AnnotationType.LINK:return new d(t);case n.AnnotationType.TEXT:return new f(t);case n.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new m(t);case"Btn":return t.data.radioButton?new v(t):t.data.checkBox?new y(t):new b(t);case"Ch":return new w(t)}return new g(t);case n.AnnotationType.POPUP:return new x(t);case n.AnnotationType.FREETEXT:return new k(t);case n.AnnotationType.LINE:return new C(t);case n.AnnotationType.SQUARE:return new A(t);case n.AnnotationType.CIRCLE:return new _(t);case n.AnnotationType.POLYLINE:return new T(t);case n.AnnotationType.CARET:return new E(t);case n.AnnotationType.INK:return new M(t);case n.AnnotationType.POLYGON:return new O(t);case n.AnnotationType.HIGHLIGHT:return new P(t);case n.AnnotationType.UNDERLINE:return new I(t);case n.AnnotationType.SQUIGGLY:return new F(t);case n.AnnotationType.STRIKEOUT:return new D(t);case n.AnnotationType.STAMP:return new R(t);case n.AnnotationType.FILEATTACHMENT:return new L(t);default:return new p(t)}}}class p{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,e&&(this.container=this._createContainer(i)),n&&(this.quadrilaterals=this._createQuadrilaterals(i))}_createContainer(t=!1){const e=this.data,i=this.page,r=this.viewport,s=document.createElement("section");let{width:o,height:a}=h(e.rect);s.setAttribute("data-annotation-id",e.id);const l=n.Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]);if(e.hasOwnCanvas){const t=r.transform.slice(),[e,i]=n.Util.singularValueDecompose2dScale(t);o=Math.ceil(o*e),a=Math.ceil(a*i),l[0]*=e,l[1]*=i;for(let e=0;e<4;e++)t[e]=Math.sign(t[e]);s.style.transform=`matrix(${t.join(",")})`}else s.style.transform=`matrix(${r.transform.join(",")})`;if(s.style.transformOrigin=`${-l[0]}px ${-l[1]}px`,!t&&e.borderStyle.width>0){s.style.borderWidth=`${e.borderStyle.width}px`,e.borderStyle.style!==n.AnnotationBorderStyleType.UNDERLINE&&(o-=2*e.borderStyle.width,a-=2*e.borderStyle.width);const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`${t}px / ${i}px`;s.style.borderRadius=e}switch(e.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}e.borderColor||e.color?s.style.borderColor=n.Util.makeHexColor(0|e.color[0],0|e.color[1],0|e.color[2]):s.style.borderWidth=0}return s.style.left=`${l[0]}px`,s.style.top=`${l[1]}px`,e.hasOwnCanvas?s.style.width=s.style.height="auto":(s.style.width=`${o}px`,s.style.height=`${a}px`),s}get _commonActions(){const t=(t,e,i)=>{const n=i.detail[t];i.target.style[e]=o.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2==1;t.target.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{t.target.style.visibility=t.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{t.detail.required?t.target.setAttribute("required",""):t.target.removeAttribute("required")},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||i[n];r&&r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,r]of Object.entries(e)){const s=i[n];s&&(s({detail:r,target:t}),delete e[n])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const e=[],i=this.data.rect;for(const i of this.data.quadPoints)this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],e.push(this._createContainer(t));return this.data.rect=i,e}_createPopup(t,e){let i=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,i=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=i.style.height,t.style.width=i.style.width,i.appendChild(t));const n=new S({container:i,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();n.style.left=i.style.width,i.appendChild(n)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:t,id:s,exportValues:o}of r){if(-1===t)continue;if(s===e)continue;const r="string"==typeof o?o:null,a=document.getElementById(s);!a||c.has(a)?i.push({id:s,exportValue:r,domElement:a}):(0,n.warn)(`_getElementsByName - element not allowed: ${s}`)}return i}for(const n of document.getElementsByName(t)){const{id:t,exportValue:r}=n;t!==e&&c.has(n)&&i.push({id:t,exportValue:r,domElement:n})}return i}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class d extends p{constructor(t,e=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:t,linkService:e}=this,i=document.createElement("a");if(t.url)e.addLinkAttributes(i,t.url,t.newWindow);else if(t.action)this._bindNamedAction(i,t.action);else if(t.dest)this._bindLink(i,t.dest);else{let e=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(e=!0,this._bindJSAction(i,t)),t.resetForm?this._bindResetFormAction(i,t.resetForm):e||this._bindLink(i,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((t,e)=>{const n=0===e?i:i.cloneNode();return t.appendChild(n),t})):(this.container.className="linkAnnotation",this.container.appendChild(i),this.container)}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=i.get(n);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{i&&i();const{fields:t,refs:n,include:r}=e,s=[];if(0!==t.length||0!==n.length){const e=new Set(n);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===r&&s.push(i)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,a=[];for(const t of s){const{id:e}=t;switch(a.push(e),t.type){case"text":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;o.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}default:continue}const i=document.getElementById(e);i&&c.has(i)&&i.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}),!1}}}class f extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class g extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:e,isMac:i}=p.platform;return e&&t.ctrlKey||i&&t.metaKey}_setEventListener(t,e,i,n){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:n(t)}})}))}_setEventListeners(t,e,i){for(const[n,r]of e)("Action"===r||this.data.actions?.[r])&&this._setEventListener(t,n,r,i)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":n.Util.makeHexColor(e[0],e[1],e[2])}}class m extends g{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,n){const r=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=i),r.setValue(s.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue}),r=n.formattedValue||n.value||"",s={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=r):(i=document.createElement("input"),i.type="text",i.setAttribute("value",r)),c.add(i),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=l,s.userValue=r,i.setAttribute("id",e),i.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value")})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=s.userValue=e,s.formattedValue=null}));let o=t=>{const{formattedValue:e}=s;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{s.userValue&&(t.target.value=s.userValue),s.valueOnFocus=t.target.value})),i.addEventListener("updatefromsandbox",(i=>{const n={value(i){s.userValue=i.detail.value??"",t.setValue(e,{value:s.userValue.toString()}),i.target.value=s.userValue},formattedValue(i){const{formattedValue:n}=i.detail;s.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)}};this._dispatchEventFromSandbox(n,i)})),i.addEventListener("keydown",(t=>{let i=-1;if("Escape"===t.key?i=0:"Enter"===t.key?i=2:"Tab"===t.key&&(i=3),-1===i)return;const{value:n}=t.target;s.valueOnFocus!==n&&(s.userValue=n,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const n=o;o=null,i.addEventListener("blur",(t=>{const{value:i}=t.target;s.userValue=i,this._mouseState.isDown&&s.valueOnFocus!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),n(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{const{data:i,target:n}=t,{value:r,selectionStart:s,selectionEnd:o}=n;let a=s,l=o;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,s).match(/\w*[^\w]*$/);t&&(a-=t[0].length);break}case"deleteWordForward":{const t=r.substring(s).match(/^[^\w]*\w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":s===o&&(a-=1);break;case"deleteContentForward":s===o&&(l+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:a,selEnd:l}})})),this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(o&&i.addEventListener("blur",o),null!==this.data.maxLen&&(i.maxLength=this.data.maxLen),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.appendChild(i),this.container}_setTextStyle(t){const e=["left","center","right"],{fontSize:i,fontColor:r}=this.data.defaultAppearanceData,s=t.style;i&&(s.fontSize=`${i}px`),s.color=n.Util.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(s.textAlign=e[this.data.textAlignment])}}class y extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,t.setValue(i,{value:n})),this.container.className="buttonWidgetAnnotation checkBox";const r=document.createElement("input");return c.add(r),r.disabled=e.readOnly,r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("id",i),r.setAttribute("exportValue",e.exportValue),r.tabIndex=l,r.addEventListener("change",(n=>{const{name:r,checked:s}=n.target;for(const n of this._getElementsByName(r,i)){const i=s&&n.exportValue===e.exportValue;n.domElement&&(n.domElement.checked=i),t.setValue(n.id,{value:i})}t.setValue(i,{value:s})})),r.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.appendChild(r),this.container}}class v extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof n&&(n=n!==e.buttonValue,t.setValue(i,{value:n}));const r=document.createElement("input");if(c.add(r),r.disabled=e.readOnly,r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("id",i),r.tabIndex=l,r.addEventListener("change",(e=>{const{name:n,checked:r}=e.target;for(const e of this._getElementsByName(n,i))t.setValue(e.id,{value:!1});t.setValue(i,{value:r})})),r.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;r.addEventListener("updatefromsandbox",(e=>{const r={value:e=>{const r=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=r&&n.id===i;n.domElement&&(n.domElement.checked=e),t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)})),this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.appendChild(r),this.container}}class b extends d{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class w extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue});let{fontSize:n}=this.data.defaultAppearanceData;n||(n=9);const r=`calc(${n}px * var(--zoom-factor))`,s=document.createElement("select");c.add(s),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.setAttribute("id",e),s.tabIndex=l,s.style.fontSize=`${n}px`,this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of s.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,this.data.combo&&(e.style.fontSize=r),i.value.includes(t.exportValue)&&e.setAttribute("selected",!0),s.appendChild(e)}const o=(t,e)=>{const i=e?"value":"textContent",n=t.target.options;return t.target.multiple?Array.prototype.filter.call(n,(t=>t.selected)).map((t=>t[i])):-1===n.selectedIndex?null:n[n.selectedIndex][i]},a=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",(i=>{const n={value(i){const n=i.detail.value,r=new Set(Array.isArray(n)?n:[n]);for(const t of s.options)t.selected=r.has(t.value);t.setValue(e,{value:o(i,!0)})},multipleSelection(t){s.multiple=!0},remove(i){const n=s.options,r=i.detail.remove;n[r].selected=!1,s.remove(r),n.length>0&&-1===Array.prototype.findIndex.call(n,(t=>t.selected))&&(n[0].selected=!0),t.setValue(e,{value:o(i,!0),items:a(i)})},clear(i){for(;0!==s.length;)s.remove(0);t.setValue(e,{value:null,items:[]})},insert(i){const{index:n,displayValue:r,exportValue:l}=i.detail.insert,c=document.createElement("option");c.textContent=r,c.value=l,s.insertBefore(c,s.children[n]),t.setValue(e,{value:o(i,!0),items:a(i)})},items(i){const{items:n}=i.detail;for(;0!==s.length;)s.remove(0);for(const t of n){const{displayValue:e,exportValue:i}=t,n=document.createElement("option");n.textContent=e,n.value=i,s.appendChild(n)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(i,!0),items:a(i)})},indices(i){const n=new Set(i.detail.indices);for(const t of i.target.options)t.selected=n.has(t.index);t.setValue(e,{value:o(i,!0)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n,i)})),s.addEventListener("input",(i=>{const n=o(i,!0),r=o(i,!1);t.setValue(e,{value:n}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,changeEx:n,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(t=>t.target.checked))):s.addEventListener("input",(function(i){t.setValue(e,{value:o(i,!0)})})),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.appendChild(s),this.container}}class x extends p{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;const i=new S({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),r=this.page,s=n.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data.parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),o=s[0]+this.data.parentRect[2]-this.data.parentRect[0],a=s[1];return this.container.style.transformOrigin=`${-o}px ${-a}px`,this.container.style.left=`${o}px`,this.container.style.top=`${a}px`,this.container.appendChild(i.render()),this.container}}class S{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const i=this.color;if(i){const t=.7*(255-i[0])+i[0],r=.7*(255-i[1])+i[1],s=.7*(255-i[2])+i[2];e.style.backgroundColor=n.Util.makeHexColor(0|t,0|r,0|s)}const s=document.createElement("h1");s.dir=this.titleObj.dir,s.textContent=this.titleObj.str,e.appendChild(s);const o=r.PDFDateString.toDateObject(this.modificationDate);if(o){const t=document.createElement("span");t.className="popupDate",t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:o.toLocaleDateString(),time:o.toLocaleTimeString()}),e.appendChild(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents(this.contentsObj);e.appendChild(t)}else a.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e}),e.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t of this.trigger)t.addEventListener("click",this._toggle.bind(this)),t.addEventListener("mouseover",this._show.bind(this,!1)),t.addEventListener("mouseout",this._hide.bind(this,!1));return e.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(e),t}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.className="popupContent",i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t){const r=n[t];i.appendChild(document.createTextNode(r)),t<e-1&&i.appendChild(document.createElement("br"))}return i}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class k extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),n=this.svgFactory.create(e,i),r=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.appendChild(r),this.container.append(n),this._createPopup(r,t),this.container}}class A extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),n=this.svgFactory.create(e,i),r=t.borderStyle.width,s=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",i-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.appendChild(s),this.container.append(n),this._createPopup(s,t),this.container}}class _ extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:e,height:i}=h(t.rect),n=this.svgFactory.create(e,i),r=t.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",i/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",i/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.appendChild(s),this.container.append(n),this._createPopup(s,t),this.container}}class T extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:i}=h(t.rect),n=this.svgFactory.create(e,i);let r=[];for(const e of t.vertices){const i=e.x-t.rect[0],n=t.rect[3]-e.y;r.push(i+","+n)}r=r.join(" ");const s=this.svgFactory.createElement(this.svgElementName);return s.setAttribute("points",r),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.appendChild(s),this.container.append(n),this._createPopup(s,t),this.container}}class O extends T{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:i}=h(t.rect),n=this.svgFactory.create(e,i);for(const e of t.inkLists){let i=[];for(const n of e){const e=n.x-t.rect[0],r=t.rect[3]-n.y;i.push(`${e},${r}`)}i=i.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",i),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),this._createPopup(r,t),n.appendChild(r)}return this.container.append(n),this.container}}class P extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class I extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class F extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class D extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class R extends p{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class L extends p{constructor(t){super(t,{isRenderable:!0});const{filename:e,content:i}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(e),this.content=i,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:i})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class{static render(t){const e=[],i=[];for(const r of t.annotations){if(!r)continue;const{width:t,height:s}=h(r.rect);t<=0||s<=0||(r.annotationType!==n.AnnotationType.POPUP?e.push(r):i.push(r))}i.length&&e.push(...i);const o=t.div;for(const i of e){const e=u.create({data:i,layer:o,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:t.annotationStorage||new s.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(e.isRenderable){const t=e.render();if(i.hidden&&(t.style.visibility="hidden"),Array.isArray(t))for(const e of t)o.appendChild(e);else e instanceof x?o.prepend(t):o.appendChild(t)}}this.#u(o,t.annotationCanvasMap)}static update(t){const{page:e,viewport:i,annotations:r,annotationCanvasMap:s,div:o}=t,a=i.transform,l=`matrix(${a.join(",")})`;let c,h;for(const t of r){const i=o.querySelectorAll(`[data-annotation-id="${t.id}"]`);if(i)for(const r of i)if(t.hasOwnCanvas){const i=n.Util.normalizeRect([t.rect[0],e.view[3]-t.rect[1]+e.view[1],t.rect[2],e.view[3]-t.rect[3]+e.view[1]]);if(!h){c=Math.abs(a[0]||a[1]);const t=a.slice();for(let e=0;e<4;e++)t[e]=Math.sign(t[e]);h=`matrix(${t.join(",")})`}const s=i[0]*c,o=i[1]*c;r.style.left=`${s}px`,r.style.top=`${o}px`,r.style.transformOrigin=`${-s}px ${-o}px`,r.style.transform=h}else r.style.transform=l}this.#u(o,s),o.hidden=!1}static#u(t,e){if(e){for(const[i,n]of e){const e=t.querySelector(`[data-annotation-id="${i}"]`);if(!e)continue;const{firstChild:r}=e;"CANVAS"===r.nodeName?e.replaceChild(n,r):e.insertBefore(n,r)}e.clear()}}}},(t,e)=>{function i(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_HTML([t]){const e=i(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_HTML([t,e,n]){return`#${i(t)}${i(e)}${i(n)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}static RGB_CMYK([t,e,i]){const n=1-t,r=1-e,s=1-i;return["CMYK",n,r,s,Math.min(n,r,s)]}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=i(18);e.XfaLayer=class{static setupStorage(t,e,i,n,r){const s=n.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(s.value===i.attributes.xfaOn?t.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==s.value)for(const t of i.children)t.attributes.value===s.value&&(t.attributes.selected=!0);t.addEventListener("input",(t=>{const i=t.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(e,{value:r})}))}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:r}){const{attributes:s}=e,o=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name=`${s.name}-${n}`);for(const[e,i]of Object.entries(s))if(null!=i&&"dataId"!==e)if("style"!==e)if("textContent"===e)t.textContent=i;else if("class"===e)i.length&&t.setAttribute(e,i.join(" "));else{if(o&&("href"===e||"newWindow"===e))continue;t.setAttribute(e,i)}else Object.assign(t.style,i);o&&r.addLinkAttributes(t,s.href,s.newWindow),i&&s.dataId&&this.setupStorage(t,s.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,s=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a=[[r,-1,o]],l=t.div;if(l.appendChild(o),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==s&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;a.length>0;){const[t,r,o]=a[a.length-1];if(r+1===t.children.length){a.pop();continue}const l=t.children[++a[a.length-1][1]];if(null===l)continue;const{name:h}=l;if("#text"===h){const t=document.createTextNode(l.value);c.push(t),o.appendChild(t);continue}let u;if(u=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h),o.appendChild(u),l.attributes&&this.setAttributes({html:u,element:l,storage:e,intent:s,linkService:i}),l.children&&l.children.length>0)a.push([l,-1,u]);else if(l.value){const t=document.createTextNode(l.value);n.XfaText.shouldBuildText(h)&&c.push(t),u.appendChild(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=function(t){const e=new p({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var n=i(1);const r=30,s=new Map,o=/^\s+$/g;function a(t,e,i,a){const l=document.createElement("span"),c=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL};t._textDivs.push(l);const h=n.Util.transform(t._viewport.transform,e.transform);let u=Math.atan2(h[1],h[0]);const p=i[e.fontName];p.vertical&&(u+=Math.PI/2);const d=Math.hypot(h[2],h[3]),f=d*function(t,e){const i=s.get(t);if(i)return i;e.save(),e.font=`30px ${t}`;const n=e.measureText("");let o=n.fontBoundingBoxAscent,a=Math.abs(n.fontBoundingBoxDescent);if(o){e.restore();const i=o/(o+a);return s.set(t,i),i}e.strokeStyle="red",e.clearRect(0,0,r,r),e.strokeText("g",0,0);let l=e.getImageData(0,0,r,r).data;a=0;for(let t=l.length-1-3;t>=0;t-=4)if(l[t]>0){a=Math.ceil(t/4/r);break}e.clearRect(0,0,r,r),e.strokeText("A",0,r),l=e.getImageData(0,0,r,r).data,o=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]>0){o=r-Math.floor(t/4/r);break}if(e.restore(),o){const e=o/(o+a);return s.set(t,e),e}return s.set(t,.8),.8}(p.fontFamily,a);let g,m;0===u?(g=h[4],m=h[5]-f):(g=h[4]+f*Math.sin(u),m=h[5]-f*Math.cos(u)),l.style.left=`${g}px`,l.style.top=`${m}px`,l.style.fontSize=`${d}px`,l.style.fontFamily=p.fontFamily,l.setAttribute("role","presentation"),l.textContent=e.str,l.dir=e.dir,t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName),0!==u&&(c.angle=u*(180/Math.PI));let y=!1;if(e.str.length>1||t._enhanceTextSelection&&o.test(e.str))y=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(y=!0)}if(y&&(p.vertical?c.canvasWidth=e.height*t._viewport.scale:c.canvasWidth=e.width*t._viewport.scale),t._textDivProperties.set(l,c),t._textContentStream&&t._layoutText(l),t._enhanceTextSelection&&c.hasText){let i=1,r=0;0!==u&&(i=Math.cos(u),r=Math.sin(u));const s=(p.vertical?e.height:e.width)*t._viewport.scale,o=d;let a,c;0!==u?(a=[i,r,-r,i,g,m],c=n.Util.getAxialAlignedBoundingBox([0,0,s,o],a)):c=[g,m,g+s,m+o],t._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[s,o],m:a})}}function l(t){if(t._canceled)return;const e=t._textDivs,i=t._capability,n=e.length;if(n>1e5)return t._renderingDone=!0,void i.resolve();if(!t._textContentStream)for(let i=0;i<n;i++)t._layoutText(e[i]);t._renderingDone=!0,i.resolve()}function c(t,e,i){let n=0;for(let r=0;r<i;r++){const i=t[e++];i>0&&(n=n?Math.min(i,n):i)}return n}function h(t){const e=t._bounds,i=t._viewport,r=function(t,e,i){const n=i.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));u(t,n);const r=new Array(i.length);for(const t of n){const e=t.index;r[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}i.map((function(e,i){const s=r[i],o=n[i];o.x1=e.top,o.y1=t-s.right,o.x2=e.bottom,o.y2=t-s.left,o.index=i,o.x1New=void 0,o.x2New=void 0})),u(e,n);for(const t of n){const e=t.index;r[e].top=t.x1New,r[e].bottom=t.x2New}return r}(i.width,i.height,e);for(let i=0;i<r.length;i++){const s=e[i].div,o=t._textDivProperties.get(s);if(0===o.angle){o.paddingLeft=e[i].left-r[i].left,o.paddingTop=e[i].top-r[i].top,o.paddingRight=r[i].right-e[i].right,o.paddingBottom=r[i].bottom-e[i].bottom,t._textDivProperties.set(s,o);continue}const a=r[i],l=e[i],h=l.m,u=h[0],p=h[1],d=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],f=new Float64Array(64);for(let t=0,e=d.length;t<e;t++){const e=n.Util.applyTransform(d[t],h);f[t+0]=u&&(a.left-e[0])/u,f[t+4]=p&&(a.top-e[1])/p,f[t+8]=u&&(a.right-e[0])/u,f[t+12]=p&&(a.bottom-e[1])/p,f[t+16]=p&&(a.left-e[0])/-p,f[t+20]=u&&(a.top-e[1])/u,f[t+24]=p&&(a.right-e[0])/-p,f[t+28]=u&&(a.bottom-e[1])/u,f[t+32]=u&&(a.left-e[0])/-u,f[t+36]=p&&(a.top-e[1])/-p,f[t+40]=u&&(a.right-e[0])/-u,f[t+44]=p&&(a.bottom-e[1])/-p,f[t+48]=p&&(a.left-e[0])/p,f[t+52]=u&&(a.top-e[1])/-u,f[t+56]=p&&(a.right-e[0])/p,f[t+60]=u&&(a.bottom-e[1])/-u}const g=1+Math.min(Math.abs(u),Math.abs(p));o.paddingLeft=c(f,32,16)/g,o.paddingTop=c(f,48,16)/g,o.paddingRight=c(f,0,16)/g,o.paddingBottom=c(f,16,16)/g,t._textDivProperties.set(s,o)}}function u(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of e){let e=0;for(;e<i.length&&i[e].end<=t.y1;)e++;let n,r,s=i.length-1;for(;s>=0&&i[s].start>=t.y2;)s--;let o,a,l=-1/0;for(o=e;o<=s;o++){let e;n=i[o],r=n.boundary,e=r.x2>t.x1?r.index>t.index?r.x1New:t.x1:void 0===r.x2New?(r.x2+t.x1)/2:r.x2New,e>l&&(l=e)}for(t.x1New=l,o=e;o<=s;o++)n=i[o],r=n.boundary,void 0===r.x2New?r.x2>t.x1?r.index>t.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2));const c=[];let h=null;for(o=e;o<=s;o++){n=i[o],r=n.boundary;const e=r.x2>t.x2?r:t;h===e?c[c.length-1].end=n.end:(c.push({start:n.start,end:n.end,boundary:e}),h=e)}for(i[e].start<t.y1&&(c[0].start=t.y1,c.unshift({start:i[e].start,end:t.y1,boundary:i[e].boundary})),t.y2<i[s].end&&(c[c.length-1].end=t.y2,c.push({start:t.y2,end:i[s].end,boundary:i[s].boundary})),o=e;o<=s;o++){if(n=i[o],r=n.boundary,void 0!==r.x2New)continue;let t=!1;for(a=e-1;!t&&a>=0&&i[a].start>=r.y1;a--)t=i[a].boundary===r;for(a=s+1;!t&&a<i.length&&i[a].end<=r.y2;a++)t=i[a].boundary===r;for(a=0;!t&&a<c.length;a++)t=c[a].boundary===r;t||(r.x2New=l)}Array.prototype.splice.apply(i,[e,s-e+1].concat(c))}for(const e of i){const i=e.boundary;void 0===i.x2New&&(i.x2New=Math.max(t,i.x2))}}class p{constructor({textContent:t,textContentStream:e,container:i,viewport:r,textDivs:s,textContentItemsStr:o,enhanceTextSelection:a}){this._textContent=t,this._textContentStream=e,this._container=i,this._document=i.ownerDocument,this._viewport=r,this._textDivs=s||[],this._textContentItemsStr=o||[],this._enhanceTextSelection=!!a,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(t,e){for(let i=0,n=t.length;i<n;i++)if(void 0!==t[i].str)this._textContentItemsStr.push(t[i].str),a(this,t[i],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[i].type||"beginMarkedContent"===t[i].type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[i].id&&this._container.setAttribute("id",`${t[i].id}`),e.appendChild(this._container)}else"endMarkedContent"===t[i].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let i="";if(0!==e.canvasWidth&&e.hasText){const{fontSize:n,fontFamily:r}=t.style;n===this._layoutTextLastFontSize&&r===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${n} ${r}`,this._layoutTextLastFontSize=n,this._layoutTextLastFontFamily=r);const{width:s}=this._layoutTextCtx.measureText(t.textContent);if(s>0){const t=e.canvasWidth/s;this._enhanceTextSelection&&(e.scale=t),i=`scaleX(${t})`}}if(0!==e.angle&&(i=`rotate(${e.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(e.originalTransform=i),t.style.transform=i),e.hasText&&this._container.appendChild(t),e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.appendChild(t)}}_render(t=0){const e=(0,n.createPromiseCapability)();let i=Object.create(null);const s=this._document.createElement("canvas");if(s.height=s.width=r,this._layoutTextCtx=s.getContext("2d",{alpha:!1}),this._textContent){const t=this._textContent.items,i=this._textContent.styles;this._processItems(t,i),e.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const t=()=>{this._reader.read().then((({value:n,done:r})=>{r?e.resolve():(Object.assign(i,n.styles),this._processItems(n.items,i),t())}),e.reject)};this._reader=this._textContentStream.getReader(),t()}}e.promise.then((()=>{i=null,t?this._renderTimer=setTimeout((()=>{l(this),this._renderTimer=null}),t):l(this)}),this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(h(this),this._bounds=null);const e=[],i=[];for(let n=0,r=this._textDivs.length;n<r;n++){const r=this._textDivs[n],s=this._textDivProperties.get(r);s.hasText&&(t?(e.length=0,i.length=0,s.originalTransform&&e.push(s.originalTransform),s.paddingTop>0?(i.push(`${s.paddingTop}px`),e.push(`translateY(${-s.paddingTop}px)`)):i.push(0),s.paddingRight>0?i.push(s.paddingRight/s.scale+"px"):i.push(0),s.paddingBottom>0?i.push(`${s.paddingBottom}px`):i.push(0),s.paddingLeft>0?(i.push(s.paddingLeft/s.scale+"px"),e.push(`translateX(${-s.paddingLeft/s.scale}px)`)):i.push(0),r.style.padding=i.join(" "),e.length&&(r.style.transform=e.join(" "))):(r.style.padding=null,r.style.transform=s.originalTransform))}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=i(1),r=i(5),s=i(3);let o=class{constructor(){(0,n.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=o;{const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",h=["butt","round","square"],u=["miter","round","bevel"],p=function(t,e="",i=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([t],{type:e}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=`data:${e};base64,`;for(let e=0,i=t.length;e<i;e+=3){const s=255&t[e],o=255&t[e+1],a=255&t[e+2];r+=n[s>>2]+n[(3&s)<<4|o>>4]+n[e+1<i?(15&o)<<2|a>>6:64]+n[e+2<i?63&a:64]}return r},d=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;e[t]=i}function i(t,i,n,r){let s=r;const o=i.length;n[s]=o>>24&255,n[s+1]=o>>16&255,n[s+2]=o>>8&255,n[s+3]=255&o,s+=4,n[s]=255&t.charCodeAt(0),n[s+1]=255&t.charCodeAt(1),n[s+2]=255&t.charCodeAt(2),n[s+3]=255&t.charCodeAt(3),s+=4,n.set(i,s),s+=i.length;const a=function(t,i,n){let r=-1;for(let s=i;s<n;s++){const i=255&(r^t[s]);r=r>>>8^e[i]}return-1^r}(n,r+4,s);n[s]=a>>24&255,n[s+1]=a>>16&255,n[s+2]=a>>8&255,n[s+3]=255&a}function r(t){let e=t.length;const i=65535,n=Math.ceil(e/i),r=new Uint8Array(2+e+5*n+4);let s=0;r[s++]=120,r[s++]=156;let o=0;for(;e>i;)r[s++]=0,r[s++]=255,r[s++]=255,r[s++]=0,r[s++]=0,r.set(t.subarray(o,o+i),s),s+=i,o+=i,e-=i;r[s++]=1,r[s++]=255&e,r[s++]=e>>8&255,r[s++]=255&~e,r[s++]=(65535&~e)>>8&255,r.set(t.subarray(o),s),s+=t.length-o;const a=function(t,e,i){let n=1,r=0;for(let s=e;s<i;++s)n=(n+(255&t[s]))%65521,r=(r+n)%65521;return r<<16|n}(t,0,t.length);return r[s++]=a>>24&255,r[s++]=a>>16&255,r[s++]=a>>8&255,r[s++]=255&a,r}function o(e,o,a,l){const c=e.width,h=e.height;let u,d,f;const g=e.data;switch(o){case n.ImageKind.GRAYSCALE_1BPP:d=0,u=1,f=c+7>>3;break;case n.ImageKind.RGB_24BPP:d=2,u=8,f=3*c;break;case n.ImageKind.RGBA_32BPP:d=6,u=8,f=4*c;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+f)*h);let y=0,v=0;for(let t=0;t<h;++t)m[y++]=0,m.set(g.subarray(v,v+f),y),v+=f,y+=f;if(o===n.ImageKind.GRAYSCALE_1BPP&&l){y=0;for(let t=0;t<h;t++){y++;for(let t=0;t<f;t++)m[y++]^=255}}const b=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,h>>24&255,h>>16&255,h>>8&255,255&h,u,d,0,0,0]),w=function(t){if(!s.isNodeJS)return r(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const i=__webpack_require__(258).deflateSync(e,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(t)}(m),x=t.length+36+b.length+w.length,S=new Uint8Array(x);let k=0;return S.set(t,k),k+=t.length,i("IHDR",b,S,k),k+=12+b.length,i("IDATA",w,S,k),k+=12+w.length,i("IEND",new Uint8Array(0),S,k),p(S,"image/png",a)}return function(t,e,i){return o(t,void 0===t.kind?n.ImageKind.GRAYSCALE_1BPP:t.kind,e,i)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}function g(t){let e=[];const i=[];for(const n of t)"save"!==n.fn?"restore"===n.fn?e=i.pop():e.push(n):(e.push({fnId:92,fn:"group",items:[]}),i.push(e),e=e[e.length-1].items);return e}function m(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let i=e.length-1;if("0"!==e[i])return e;do{i--}while("0"===e[i]);return e.substring(0,"."===e[i]?i:i+1)}function y(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${m(t[0])} ${m(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${m(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${m(t[4])} ${m(t[5])})`;return`matrix(${m(t[0])} ${m(t[1])} ${m(t[2])} ${m(t[3])} ${m(t[4])} ${m(t[5])})`}let v=0,b=0,w=0;e.SVGGraphics=o=class{constructor(t,e,i=!1){this.svgFactory=new r.DOMSVGFactory,this.current=new f,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const t in n.OPS)this._operatorIdMapping[n.OPS[t]]=t}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,i=t.argsArray;for(let t=0,r=e.length;t<r;t++)if(e[t]===n.OPS.dependency)for(const e of i[t]){const t=e.startsWith("g_")?this.commonObjs:this.objs,i=new Promise((i=>{t.get(e,i)}));this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(t,e,i,r,s,o){const a=[t,e,i,r,s,o];this.transformMatrix=n.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(t,e){this.viewport=e;const i=this._initialize(e);return this.loadDependencies(t).then((()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),i)))}convertOpList(t){const e=this._operatorIdMapping,i=t.argsArray,n=t.fnArray,r=[];for(let t=0,s=n.length;t<s;t++){const s=n[t];r.push({fnId:s,fn:e[s],args:i[t]})}return g(r)}executeOpTree(t){for(const e of t){const t=e.fn,i=e.fnId,r=e.args;switch(0|i){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(r);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case n.OPS.setFont:this.setFont(r);break;case n.OPS.showText:case n.OPS.showSpacedText:this.showText(r[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(r[0],r[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case n.OPS.setHScale:this.setHScale(r[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case n.OPS.setTextRise:this.setTextRise(r[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case n.OPS.setLineWidth:this.setLineWidth(r[0]);break;case n.OPS.setLineJoin:this.setLineJoin(r[0]);break;case n.OPS.setLineCap:this.setLineCap(r[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case n.OPS.setFillColorN:this.setFillColorN(r);break;case n.OPS.shadingFill:this.shadingFill(r[0]);break;case n.OPS.setDash:this.setDash(r[0],r[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case n.OPS.setFlatness:this.setFlatness(r[0]);break;case n.OPS.setGState:this.setGState(r[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case n.OPS.constructPath:this.constructPath(r[0],r[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,n.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,i,n,r,s){const o=this.current;o.textMatrix=o.lineMatrix=[t,e,i,n,r,s],o.textMatrixScale=Math.hypot(t,e),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${m(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",m(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.appendChild(o.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=n.IDENTITY_MATRIX,t.lineMatrix=n.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const i=this.current;i.x=i.lineX+=t,i.y=i.lineY+=e,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${m(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",m(-i.y))}showText(t){const e=this.current,i=e.font,r=e.fontSize;if(0===r)return;const s=e.fontSizeScale,o=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,p=i.vertical,d=p?1:-1,f=i.defaultVMetrics,g=r*e.fontMatrix[0];let v=0;for(const n of t){if(null===n){v+=h*c;continue}if("number"==typeof n){v+=d*n*r/1e3;continue}const t=(n.isSpace?c:0)+o,a=n.fontChar;let l,u,m,y=n.width;if(p){let t;const e=n.vmetric||f;t=n.vmetric?e[1]:.5*y,t=-t*g;const i=e[2]*g;y=e?-e[0]:y,l=t/s,u=(v+i)/s}else l=v/s,u=0;(n.isInFont||i.missingFile)&&(e.xcoords.push(e.x+l),p&&e.ycoords.push(-e.y+u),e.tspan.textContent+=a),m=p?y*g-t*h:y*g+t*h,v+=m}e.tspan.setAttributeNS(null,"x",e.xcoords.map(m).join(" ")),p?e.tspan.setAttributeNS(null,"y",e.ycoords.map(m).join(" ")):e.tspan.setAttributeNS(null,"y",m(-e.y)),p?e.y-=v:e.x+=v*u,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${m(e.fontSize)}px`),e.fontStyle!==a.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==a.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const b=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(b===n.TextRenderingMode.FILL||b===n.TextRenderingMode.FILL_STROKE?(e.fillColor!==a.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),b===n.TextRenderingMode.STROKE||b===n.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let w=e.textMatrix;0!==e.textRise&&(w=w.slice(),w[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${y(w)} scale(${m(u)}, -1)`),e.txtElement.setAttributeNS(l,"xml:space","preserve"),e.txtElement.appendChild(e.tspan),e.txtgrp.appendChild(e.txtElement),this._ensureTransformGroup().appendChild(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const e=p(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,i=this.commonObjs.get(t[0]);let r=t[1];e.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),e.fontMatrix=i.fontMatrix||n.FONT_IDENTITY_MATRIX;let s="normal";i.black?s="900":i.bold&&(s="bold");const o=i.italic?"italic":"normal";r<0?(r=-r,e.fontDirection=-1):e.fontDirection=1,e.fontSize=r,e.fontFamily=i.loadedName,e.fontWeight=s,e.fontStyle=o,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",m(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=h[t]}setLineJoin(t){this.current.lineJoin=u[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,i){this.current.strokeColor=n.Util.makeHexColor(t,e,i)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,i){this.current.fillColor=n.Util.makeHexColor(t,e,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,i=this.viewport.height,r=n.Util.inverseTransform(this.transformMatrix),s=n.Util.applyTransform([0,0],r),o=n.Util.applyTransform([0,i],r),a=n.Util.applyTransform([e,0],r),l=n.Util.applyTransform([e,i],r),c=Math.min(s[0],o[0],a[0],l[0]),h=Math.min(s[1],o[1],a[1],l[1]),u=Math.max(s[0],o[0],a[0],l[0]),p=Math.max(s[1],o[1],a[1],l[1]),d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",c),d.setAttributeNS(null,"y",h),d.setAttributeNS(null,"width",u-c),d.setAttributeNS(null,"height",p-h),d.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(d)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],i=t[2],r=t[3]||n.IDENTITY_MATRIX,[s,o,a,l]=t[4],c=t[5],h=t[6],u=t[7],p="shading"+w++,[d,f,g,m]=n.Util.normalizeRect([...n.Util.applyTransform([s,o],r),...n.Util.applyTransform([a,l],r)]),[y,v]=n.Util.singularValueDecompose2dScale(r),b=c*y,x=h*v,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",p),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",b),S.setAttributeNS(null,"height",x),S.setAttributeNS(null,"x",`${d}`),S.setAttributeNS(null,"y",`${f}`);const k=this.svg,C=this.transformMatrix,A=this.current.fillColor,_=this.current.strokeColor,T=this.svgFactory.create(g-d,m-f);if(this.svg=T,this.transformMatrix=r,2===u){const t=n.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(i)),this.svg=k,this.transformMatrix=C,this.current.fillColor=A,this.current.strokeColor=_,S.appendChild(T.childNodes[0]),this.defs.appendChild(S),`url(#${p})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+w++,i=t[3];let r;switch(t[1]){case"axial":const i=t[4],n=t[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",i[0]),r.setAttributeNS(null,"y1",i[1]),r.setAttributeNS(null,"x2",n[0]),r.setAttributeNS(null,"y2",n[1]);break;case"radial":const s=t[4],o=t[5],a=t[6],l=t[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",o[0]),r.setAttributeNS(null,"cy",o[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",s[0]),r.setAttributeNS(null,"fy",s[1]),r.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of i){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),r.appendChild(e)}return this.defs.appendChild(r),`url(#${e})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const i=this.current;let r=i.x,s=i.y,o=[],a=0;for(const i of t)switch(0|i){case n.OPS.rectangle:r=e[a++],s=e[a++];const t=r+e[a++],i=s+e[a++];o.push("M",m(r),m(s),"L",m(t),m(s),"L",m(t),m(i),"L",m(r),m(i),"Z");break;case n.OPS.moveTo:r=e[a++],s=e[a++],o.push("M",m(r),m(s));break;case n.OPS.lineTo:r=e[a++],s=e[a++],o.push("L",m(r),m(s));break;case n.OPS.curveTo:r=e[a+4],s=e[a+5],o.push("C",m(e[a]),m(e[a+1]),m(e[a+2]),m(e[a+3]),m(r),m(s)),a+=6;break;case n.OPS.curveTo2:o.push("C",m(r),m(s),m(e[a]),m(e[a+1]),m(e[a+2]),m(e[a+3])),r=e[a+2],s=e[a+3],a+=4;break;case n.OPS.curveTo3:r=e[a+2],s=e[a+3],o.push("C",m(e[a]),m(e[a+1]),m(r),m(s),m(r),m(s)),a+=4;break;case n.OPS.closePath:o.push("Z")}o=o.join(" "),i.path&&t.length>0&&t[0]!==n.OPS.rectangle&&t[0]!==n.OPS.moveTo?o=i.path.getAttributeNS(null,"d")+o:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",o),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(r,s)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+v++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"transform",y(this.transformMatrix));const n=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.appendChild(n),this.defs.appendChild(i),t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;i.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,n.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const i=this.current;let n=i.dashArray;1!==e&&n.length>0&&(n=n.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",i.strokeColor),t.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",m(i.miterLimit)),t.setAttributeNS(null,"stroke-linecap",i.lineCap),t.setAttributeNS(null,"stroke-linejoin",i.lineJoin),t.setAttributeNS(null,"stroke-width",m(e*i.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(m).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",m(e*i.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,n.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const i=t.width,n=t.height,r=d(t,this.forceDataSchema,!!e),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",m(i)),s.setAttributeNS(null,"height",m(n)),this.current.element=s,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(c,"xlink:href",r),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",m(-n)),o.setAttributeNS(null,"width",m(i)+"px"),o.setAttributeNS(null,"height",m(n)+"px"),o.setAttributeNS(null,"transform",`scale(${m(1/i)} ${m(-1/n)})`),e?e.appendChild(o):this._ensureTransformGroup().appendChild(o)}paintImageMaskXObject(t){const e=this.current,i=t.width,n=t.height,r=e.fillColor;e.maskId="mask"+b++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",e.maskId);const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",m(i)),o.setAttributeNS(null,"height",m(n)),o.setAttributeNS(null,"fill",r),o.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.appendChild(s),this._ensureTransformGroup().appendChild(o),this.paintInlineImageXObject(t,s)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],i=e[3]-e[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",e[0]),n.setAttributeNS(null,"y",e[1]),n.setAttributeNS(null,"width",m(t)),n.setAttributeNS(null,"height",m(i)),this.current.element=n,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");e.appendChild(i),this.defs=i;const n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",y(t.transform)),e.appendChild(n),this.svg=n,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=i(1),r=i(26);const s=__webpack_require__(172),o=__webpack_require__(1),a=__webpack_require__(779),l=__webpack_require__(558),c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=l.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?l.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new d(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new m(this,t,e):new f(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class h{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class d extends h{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new n.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i)};this._request=null,"http:"===this._url.protocol?this._request=o.request(p(this._url,t.httpHeaders),e):this._request=a.request(p(this._url,t.httpHeaders),e),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class f extends u{constructor(t,e,i){super(t),this._httpHeaders={};for(const e in t.httpHeaders){const i=t.httpHeaders[e];void 0!==i&&(this._httpHeaders[e]=i)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const r=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,"http:"===this._url.protocol?this._request=o.request(p(this._url,this._httpHeaders),r):this._request=a.request(p(this._url,this._httpHeaders),r),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class g extends h{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),s.lstat(e,((t,i)=>{if(t)return"ENOENT"===t.code&&(t=new n.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=i.size,this._setReadableStream(s.createReadStream(e)),this._headersCapability.resolve()}))}}class m extends u{constructor(t,e,i){super(t);let n=decodeURIComponent(this._url.path);c.test(this._url.href)&&(n=n.replace(/^\//,"")),this._setReadableStream(s.createReadStream(n,{start:e,end:i-1}))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+e+'".'):new n.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,r.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}if((0,s.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:i,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(r.suggestedLength=s,s<=2*i||n||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r},e.validateResponseStatus=function(t){return 200===t||206===t};var n=i(1),r=i(27),s=i(5)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,i=r("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=l(t),t=c(t),o(t)}if(i=function(t){const e=[];let i;const n=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=n.exec(t));){let[,t,n,r]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[n,r]}const s=[];for(let t=0;t<e.length&&t in e;++t){let[i,n]=e[t];n=a(n),i&&(n=unescape(n),0===t&&(n=l(n))),s.push(n)}return s.join("")}(t),i)return o(c(i));if(i=r("filename","i").exec(t),i){i=i[1];let t=a(i);return t=c(t),o(t)}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const r=new TextDecoder(t,{fatal:!0}),s=(0,n.stringToBytes)(i);i=r.decode(s),e=!1}catch(t){}}return i}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,n){if("q"===i||"Q"===i)return s(e,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch(t){}return s(e,n)}))}return""};var n=i(1)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=i(1),r=i(26);class s{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const t in i)n[t]=i[t];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const i=this.httpHeaders[t];void 0!==i&&e.setRequestHeader(t,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==r.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===r.status&&this.isHttp)return void i.onError?.(r.status);const s=r.status||200;if((200!==s||206!==i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(r.status);const o=function(t){const e=t.response;return"string"!=typeof e?e:(0,n.stringToBytes)(e).buffer}(r);if(206===s){const t=r.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new s(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new a(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class o{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:n,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=i(1),r=i(26);function s(t,e,i){return{method:"GET",headers:t,signal:i?.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function o(t){const e=new Headers;for(const i in t){const n=t[i];void 0!==n&&e.append(i,n)}return e}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new l(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class a{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=o(this._stream.httpHeaders);const i=e.url;fetch(i,s(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}class l{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const l=a.url;fetch(l,s(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return r.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return s.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}});var e=__w_pdfjs_require__(1),i=__w_pdfjs_require__(4),n=__w_pdfjs_require__(5),r=__w_pdfjs_require__(20),s=__w_pdfjs_require__(13),o=__w_pdfjs_require__(3),a=__w_pdfjs_require__(23),l=__w_pdfjs_require__(24),c=__w_pdfjs_require__(22);if(o.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(25);(0,i.setPDFNetworkStreamFactory)((e=>new t(e)))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(28),{PDFFetchStream:e}=__w_pdfjs_require__(29);(0,i.setPDFNetworkStreamFactory)((i=>(0,n.isValidFetchUrl)(i.url)?new e(i):new t(i)))}})(),__webpack_exports__})(),module.exports=factory()},16:(t,e,i)=>{("undefined"!=typeof window?window:{}).pdfjsWorker=i(624)},624:function(t){
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var e;e=()=>(()=>{"use strict";var t=[,(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerTask=e.WorkerMessageHandler=void 0;var n,r=i(2),s=i(5),o=i(6),a=i(67),l=i(73),c=i(4),h=i(102),u=i(103),p=i(8);class d{constructor(t){this.name=t,this.terminated=!1,this._capability=(0,r.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}e.WorkerTask=d;class f{static setup(t,e){let i=!1;t.on("test",(function(e){i||(i=!0,t.send("test",e instanceof Uint8Array))})),t.on("configure",(function(t){(0,r.setVerbosityLevel)(t.verbosity)})),t.on("GetDocRequest",(function(t){return f.createDocumentHandler(t,e)}))}static createDocumentHandler(t,e){let i,n=!1,f=null;const g=[],m=(0,r.getVerbosityLevel)(),y=t.apiVersion,v="2.14.305";if(y!==v)throw new Error(`The API version "${y}" does not match the Worker version "2.14.305".`);const b=[];for(const t in[])b.push(t);if(b.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+b.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if("undefined"==typeof ReadableStream){const t="The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); ";if(c.isNodeJS)throw new Error(t+"please use a `legacy`-build instead.");throw new Error(t+"please update to a supported browser.")}const w=t.docId,x=t.docBaseUrl,S=t.docId+"_worker";let k=new h.MessageHandler(S,w,e);function C(){if(n)throw new Error("Worker was terminated")}function A(t){g.push(t)}function _(t){t.finish();const e=g.indexOf(t);g.splice(e,1)}async function T(t){await i.ensureDoc("checkHeader"),await i.ensureDoc("parseStartXRef"),await i.ensureDoc("parse",[t]),await i.ensureDoc("checkFirstPage",[t]),await i.ensureDoc("checkLastPage",[t]);const e=await i.ensureDoc("isPureXfa");if(e){const t=new d("loadXfaFonts");A(t),await Promise.all([i.loadXfaFonts(k,t).catch((t=>{})).then((()=>_(t))),i.loadXfaImages()])}const[n,r]=await Promise.all([i.ensureDoc("numPages"),i.ensureDoc("fingerprints")]);return{numPages:n,fingerprints:r,htmlForXfa:e?await i.ensureDoc("htmlForXfa"):null}}function O(t,e,i){const n=(0,r.createPromiseCapability)();let s;const a=t.source;if(a.data){try{s=new o.LocalPdfManager(w,a.data,a.password,k,e,i,x),n.resolve(s)}catch(t){n.reject(t)}return n.promise}let l,c=[];try{l=new u.PDFWorkerStream(k)}catch(t){return n.reject(t),n.promise}const h=l.getFullReader();h.headersReady.then((function(){if(!h.isRangeSupported)return;const t=a.disableAutoFetch||h.isStreamingSupported;s=new o.NetworkPdfManager(w,l,{msgHandler:k,password:a.password,length:h.contentLength,disableAutoFetch:t,rangeChunkSize:a.rangeChunkSize},e,i,x);for(let t=0;t<c.length;t++)s.sendProgressiveData(c[t]);c=[],n.resolve(s),f=null})).catch((function(t){n.reject(t),f=null}));let p=0;return new Promise((function(t,l){const u=function({value:t,done:d}){try{if(C(),d)return s||function(){const t=(0,r.arraysToBytes)(c);a.length&&t.length!==a.length&&(0,r.warn)("reported HTTP length is different from actual");try{s=new o.LocalPdfManager(w,t,a.password,k,e,i,x),n.resolve(s)}catch(t){n.reject(t)}c=[]}(),void(f=null);p+=(0,r.arrayByteLength)(t),h.isStreamingSupported||k.send("DocProgress",{loaded:p,total:Math.max(p,h.contentLength||0)}),s?s.sendProgressiveData(t):c.push(t),h.read().then(u,l)}catch(t){l(t)}};h.read().then(u,l)})).catch((function(t){n.reject(t),f=null})),f=function(t){l.cancelAllRequests(t)},n.promise}return k.on("GetPage",(function(t){return i.getPage(t.pageIndex).then((function(t){return Promise.all([i.ensure(t,"rotate"),i.ensure(t,"ref"),i.ensure(t,"userUnit"),i.ensure(t,"view")]).then((function([t,e,i,n]){return{rotate:t,ref:e,userUnit:i,view:n}}))}))})),k.on("GetPageIndex",(function(t){const e=s.Ref.get(t.num,t.gen);return i.ensureCatalog("getPageIndex",[e])})),k.on("GetDestinations",(function(t){return i.ensureCatalog("destinations")})),k.on("GetDestination",(function(t){return i.ensureCatalog("getDestination",[t.id])})),k.on("GetPageLabels",(function(t){return i.ensureCatalog("pageLabels")})),k.on("GetPageLayout",(function(t){return i.ensureCatalog("pageLayout")})),k.on("GetPageMode",(function(t){return i.ensureCatalog("pageMode")})),k.on("GetViewerPreferences",(function(t){return i.ensureCatalog("viewerPreferences")})),k.on("GetOpenAction",(function(t){return i.ensureCatalog("openAction")})),k.on("GetAttachments",(function(t){return i.ensureCatalog("attachments")})),k.on("GetJavaScript",(function(t){return i.ensureCatalog("javaScript")})),k.on("GetDocJSActions",(function(t){return i.ensureCatalog("jsActions")})),k.on("GetPageJSActions",(function({pageIndex:t}){return i.getPage(t).then((function(t){return i.ensure(t,"jsActions")}))})),k.on("GetOutline",(function(t){return i.ensureCatalog("documentOutline")})),k.on("GetOptionalContentConfig",(function(t){return i.ensureCatalog("optionalContentConfig")})),k.on("GetPermissions",(function(t){return i.ensureCatalog("permissions")})),k.on("GetMetadata",(function(t){return Promise.all([i.ensureDoc("documentInfo"),i.ensureCatalog("metadata")])})),k.on("GetMarkInfo",(function(t){return i.ensureCatalog("markInfo")})),k.on("GetData",(function(t){return i.requestLoadedStream(),i.onLoadedStream().then((function(t){return t.bytes}))})),k.on("GetAnnotations",(function({pageIndex:t,intent:e}){return i.getPage(t).then((function(t){return t.getAnnotationsData(e)}))})),k.on("GetFieldObjects",(function(t){return i.ensureDoc("fieldObjects")})),k.on("HasJSActions",(function(t){return i.ensureDoc("hasJSActions")})),k.on("GetCalculationOrderIds",(function(t){return i.ensureDoc("calculationOrderIds")})),k.on("SaveDocument",(function({isPureXfa:t,numPages:e,annotationStorage:n,filename:o}){i.requestLoadedStream();const a=[i.onLoadedStream(),i.ensureCatalog("acroForm"),i.ensureCatalog("acroFormRef"),i.ensureDoc("xref"),i.ensureDoc("startXRef")];if(t)a.push(i.serializeXfaData(n));else for(let t=0;t<e;t++)a.push(i.getPage(t).then((function(e){const i=new d(`Save: page ${t}`);return e.save(k,i,n).finally((function(){_(i)}))})));return Promise.all(a).then((function([e,i,n,a,c,...h]){let u=[],p=null;if(t){if(p=h[0],!p)return e.bytes}else{for(const t of h)u=t.filter((t=>null!==t)).reduce(((t,e)=>t.concat(e)),u);if(0===u.length)return e.bytes}const d=i instanceof s.Dict&&i.get("XFA")||null;let f=null,g=!1;if(Array.isArray(d)){for(let t=0,e=d.length;t<e;t+=2)"datasets"===d[t]&&(f=d[t+1],n=null,g=!0);null===f&&(f=a.getNewRef())}else d&&(n=null,(0,r.warn)("Unsupported XFA type."));let m=Object.create(null);if(a.trailer){const t=Object.create(null),e=a.trailer.get("Info")||null;e instanceof s.Dict&&e.forEach(((e,i)=>{"string"==typeof i&&(t[e]=(0,r.stringToPDFString)(i))})),m={rootRef:a.trailer.getRaw("Root")||null,encryptRef:a.trailer.getRaw("Encrypt")||null,newRef:a.getNewRef(),infoRef:a.trailer.getRaw("Info")||null,info:t,fileIds:a.trailer.get("ID")||null,startXRef:c,filename:o}}return a.resetNewRef(),(0,l.incrementalUpdate)({originalData:e.bytes,xrefInfo:m,newRefs:u,xref:a,hasXfa:!!d,xfaDatasetsRef:f,hasXfaDatasetsEntry:g,acroFormRef:n,acroForm:i,xfaData:p})}))})),k.on("GetOperatorList",(function(t,e){const n=t.pageIndex;i.getPage(n).then((function(i){const s=new d(`GetOperatorList: page ${n}`);A(s);const o=m>=r.VerbosityLevel.INFOS?Date.now():0;i.getOperatorList({handler:k,sink:e,task:s,intent:t.intent,cacheKey:t.cacheKey,annotationStorage:t.annotationStorage}).then((function(t){_(s),o&&(0,r.info)(`page=${n+1} - getOperatorList: time=${Date.now()-o}ms, len=${t.length}`),e.close()}),(function(t){_(s),s.terminated||(k.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorOperatorList}),e.error(t))}))}))})),k.on("GetTextContent",(function(t,e){const n=t.pageIndex;i.getPage(n).then((function(i){const s=new d("GetTextContent: page "+n);A(s);const o=m>=r.VerbosityLevel.INFOS?Date.now():0;i.extractTextContent({handler:k,task:s,sink:e,includeMarkedContent:t.includeMarkedContent,combineTextItems:t.combineTextItems}).then((function(){_(s),o&&(0,r.info)(`page=${n+1} - getTextContent: time=`+(Date.now()-o)+"ms"),e.close()}),(function(t){_(s),s.terminated||e.error(t)}))}))})),k.on("GetStructTree",(function(t){return i.getPage(t.pageIndex).then((function(t){return i.ensure(t,"getStructTree")}))})),k.on("FontFallback",(function(t){return i.fontFallback(t.id,k)})),k.on("Cleanup",(function(t){return i.cleanup(!0)})),k.on("Terminate",(function(t){n=!0;const e=[];if(i){i.terminate(new r.AbortException("Worker was terminated."));const t=i.cleanup();e.push(t),i=null}else(0,a.clearGlobalCaches)();f&&f(new r.AbortException("Worker was terminated."));for(const t of g)e.push(t.finished),t.terminate();return Promise.all(e).then((function(){k.destroy(),k=null}))})),k.on("Ready",(function(e){!function(t){function e(t){C(),k.send("GetDoc",{pdfInfo:t})}function s(t){if(C(),t instanceof r.PasswordException){const e=new d(`PasswordException: response ${t.code}`);A(e),k.sendWithPromise("PasswordRequest",t).then((function({password:t}){_(e),i.updatePassword(t),o()})).catch((function(){_(e),k.send("DocException",t)}))}else t instanceof r.InvalidPDFException||t instanceof r.MissingPDFException||t instanceof r.UnexpectedResponseException||t instanceof r.UnknownErrorException?k.send("DocException",t):k.send("DocException",new r.UnknownErrorException(t.message,t.toString()))}function o(){C(),T(!1).then(e,(function(t){C(),t instanceof p.XRefParseException?(i.requestLoadedStream(),i.onLoadedStream().then((function(){C(),T(!0).then(e,s)}))):s(t)}))}C(),O(t,{maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,useSystemFonts:t.useSystemFonts,cMapUrl:t.cMapUrl,standardFontDataUrl:t.standardFontDataUrl},t.enableXfa).then((function(t){if(n)throw t.terminate(new r.AbortException("Worker was terminated.")),new Error("Worker was terminated");i=t,i.onLoadedStream().then((function(t){k.send("DataLoaded",{length:t.bytes.byteLength})}))})).then(o,s)}(t),t=null})),S}static initializeFromPort(t){const e=new h.MessageHandler("worker","main",t);f.setup(e,t),e.send("ready",null)}}e.WorkerMessageHandler=f,"undefined"==typeof window&&!c.isNodeJS&&"undefined"!=typeof self&&"function"==typeof(n=self).postMessage&&"onmessage"in n&&f.initializeFromPort(self)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=h,e.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let i=0;for(let n=0;n<e;n++)i+=h(t[n]);let n=0;const r=new Uint8Array(i);for(let i=0;i<e;i++){let e=t[i];e instanceof Uint8Array||(e="string"==typeof e?c(e):new Uint8Array(e));const s=e.byteLength;r.set(e,n),n+=s}return r},e.assert=function(t,e){t||o(e)},e.bytesToString=function(t){"object"==typeof t&&null!==t&&void 0!==t.length||o("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const n=[];for(let r=0;r<e;r+=i){const s=Math.min(r+i,e),o=t.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")},e.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(i,n){t.resolve=function(t){e=!0,i(t)},t.reject=function(t){e=!0,n(t)}})),t},e.createValidAbsoluteUrl=function(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=f(t)}catch(t){}}const n=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return r},e.info=function(t){r>=n.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){const e=Object.create(null);for(const[i,n]of t)e[i]=n;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(r=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=c,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const i=new TextDecoder(e,{fatal:!0}),n=c(t);return i.decode(n)}catch(t){s(`stringToPDFString: "${t}".`)}}const e=[];for(let i=0,n=t.length;i<n;i++){const n=d[t.charCodeAt(i)];e.push(n?String.fromCharCode(n):t.charAt(i))}return e.join("")},e.stringToUTF16BEString=function(t){const e=["þÿ"];for(let i=0,n=t.length;i<n;i++){const n=t.charCodeAt(i);e.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return e.join("")},e.stringToUTF8String=f,e.unreachable=o,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=s,i(3),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=n,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function s(t){r>=n.WARNINGS&&console.log(`Warning: ${t}`)}function o(t){throw new Error(t)}function a(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const l=function(){function t(e,i){this.constructor===t&&o("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();function c(t){"string"!=typeof t&&o("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function h(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void o("Invalid argument for arrayByteLength")}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class p{static makeHexColor(t,e,i){return`#${u[t]}${u[e]}${u[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=p.applyTransform(t,e),n=p.applyTransform(t.slice(2,4),e),r=p.applyTransform([t[0],t[3]],e),s=p.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],r[0],s[0]),Math.min(i[1],n[1],r[1],s[1]),Math.max(i[0],n[0],r[0],s[0]),Math.max(i[1],n[1],r[1],s[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],o=(i+s)/2,a=Math.sqrt((i+s)**2-4*(i*s-r*n))/2,l=o+a||1,c=o-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[i,r,n,s]}static bezierBoundingBox(t,e,i,n,r,s,o,a){const l=[],c=[[],[]];let h,u,p,d,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*i+6*r,h=-3*t+9*i-9*r+3*o,p=3*i-3*t):(u=6*e-12*n+6*s,h=-3*e+9*n-9*s+3*a,p=3*n-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;d=-p/u,0<d&&d<1&&l.push(d)}else m=u*u-4*p*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)d=l[b],v=1-d,c[0][b]=v*v*v*t+3*v*v*d*i+3*v*d*d*r+d*d*d*o,c[1][b]=v*v*v*e+3*v*v*d*n+3*v*d*d*s+d*d*d*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=o,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=p;const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(t){return decodeURIComponent(escape(t))}},(t,e,i)=>{i(4)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RefSetCache=e.RefSet=e.Ref=e.Name=e.EOF=e.Dict=e.Cmd=e.CIRCULAR_REF=void 0,e.clearPrimitiveCaches=function(){a._clearCache(),o._clearCache(),h._clearCache()},e.isCmd=function(t,e){return t instanceof a&&(void 0===e||t.cmd===e)},e.isDict=function(t,e){return t instanceof c&&(void 0===e||d(t.get("Type"),e))},e.isName=d,e.isRefsEqual=function(t,e){return t.num===e.num&&t.gen===e.gen};var n=i(2);const r=Symbol("CIRCULAR_REF");e.CIRCULAR_REF=r;const s=Symbol("EOF");e.EOF=s;const o=function(){let t=Object.create(null);class e{constructor(t){this.name=t}static get(i){const n=t[i];return n||(t[i]=new e(i))}static _clearCache(){t=Object.create(null)}}return e}();e.Name=o;const a=function(){let t=Object.create(null);class e{constructor(t){this.cmd=t}static get(i){const n=t[i];return n||(t[i]=new e(i))}static _clearCache(){t=Object.create(null)}}return e}();e.Cmd=a;const l=function(){return l};class c{constructor(t=null){this._map=Object.create(null),this.xref=t,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=l}assignXref(t){this.xref=t}get size(){return Object.keys(this._map).length}get(t,e,i){let n=this._map[t];return void 0===n&&void 0!==e&&(n=this._map[e],void 0===n&&void 0!==i&&(n=this._map[i])),n instanceof h&&this.xref?this.xref.fetch(n,this.suppressEncryption):n}async getAsync(t,e,i){let n=this._map[t];return void 0===n&&void 0!==e&&(n=this._map[e],void 0===n&&void 0!==i&&(n=this._map[i])),n instanceof h&&this.xref?this.xref.fetchAsync(n,this.suppressEncryption):n}getArray(t,e,i){let n=this._map[t];if(void 0===n&&void 0!==e&&(n=this._map[e],void 0===n&&void 0!==i&&(n=this._map[i])),n instanceof h&&this.xref&&(n=this.xref.fetch(n,this.suppressEncryption)),Array.isArray(n)){n=n.slice();for(let t=0,e=n.length;t<e;t++)n[t]instanceof h&&this.xref&&(n[t]=this.xref.fetch(n[t],this.suppressEncryption))}return n}getRaw(t){return this._map[t]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(t,e){this._map[t]=e}has(t){return void 0!==this._map[t]}forEach(t){for(const e in this._map)t(e,this.get(e))}static get empty(){const t=new c(null);return t.set=(t,e)=>{(0,n.unreachable)("Should not call `set` on the empty dictionary.")},(0,n.shadow)(this,"empty",t)}static merge({xref:t,dictArray:e,mergeSubDicts:i=!1}){const n=new c(t),r=new Map;for(const t of e)if(t instanceof c)for(const[e,n]of Object.entries(t._map)){let t=r.get(e);if(void 0===t)t=[],r.set(e,t);else if(!(i&&n instanceof c))continue;t.push(n)}for(const[e,i]of r){if(1===i.length||!(i[0]instanceof c)){n._map[e]=i[0];continue}const r=new c(t);for(const t of i)for(const[e,i]of Object.entries(t._map))void 0===r._map[e]&&(r._map[e]=i);r.size>0&&(n._map[e]=r)}return r.clear(),n.size>0?n:c.empty}}e.Dict=c;const h=function(){let t=Object.create(null);class e{constructor(t,e){this.num=t,this.gen=e}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static get(i,n){const r=0===n?`${i}R`:`${i}R${n}`,s=t[r];return s||(t[r]=new e(i,n))}static _clearCache(){t=Object.create(null)}}return e}();e.Ref=h;class u{constructor(t=null){this._set=new Set(t&&t._set)}has(t){return this._set.has(t.toString())}put(t){this._set.add(t.toString())}remove(t){this._set.delete(t.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}e.RefSet=u;class p{constructor(){this._map=new Map}get size(){return this._map.size}get(t){return this._map.get(t.toString())}has(t){return this._map.has(t.toString())}put(t,e){this._map.set(t.toString(),e)}putAlias(t,e){this._map.set(t.toString(),this.get(e))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}function d(t,e){return t instanceof o&&(void 0===e||t.name===e)}e.RefSetCache=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkPdfManager=e.LocalPdfManager=void 0;var n=i(2),r=i(7),s=i(8),o=i(11),a=i(10);function l(t){if(t){const e=(0,n.createValidAbsoluteUrl)(t);if(e)return e.href;(0,n.warn)(`Invalid absolute docBaseUrl: "${t}".`)}return null}class c{constructor(){this.constructor===c&&(0,n.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){const t=this.pdfDocument.catalog;return(0,n.shadow)(this,"docBaseUrl",t.baseUrl||this._docBaseUrl)}onLoadedStream(){(0,n.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(t,e){return this.ensure(this.pdfDocument,t,e)}ensureXRef(t,e){return this.ensure(this.pdfDocument.xref,t,e)}ensureCatalog(t,e){return this.ensure(this.pdfDocument.catalog,t,e)}getPage(t){return this.pdfDocument.getPage(t)}fontFallback(t,e){return this.pdfDocument.fontFallback(t,e)}loadXfaFonts(t,e){return this.pdfDocument.loadXfaFonts(t,e)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(t){return this.pdfDocument.serializeXfaData(t)}cleanup(t=!1){return this.pdfDocument.cleanup(t)}async ensure(t,e,i){(0,n.unreachable)("Abstract method `ensure` called")}requestRange(t,e){(0,n.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,n.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(t){(0,n.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(t){this._password=t}terminate(t){(0,n.unreachable)("Abstract method `terminate` called")}}e.LocalPdfManager=class extends c{constructor(t,e,i,n,r,s,c){super(),this._docId=t,this._password=i,this._docBaseUrl=l(c),this.msgHandler=n,this.evaluatorOptions=r,this.enableXfa=s;const h=new a.Stream(e);this.pdfDocument=new o.PDFDocument(this,h),this._loadedStreamPromise=Promise.resolve(h)}async ensure(t,e,i){const n=t[e];return"function"==typeof n?n.apply(t,i):n}requestRange(t,e){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(t){}},e.NetworkPdfManager=class extends c{constructor(t,e,i,n,s,a){super(),this._docId=t,this._password=i.password,this._docBaseUrl=l(a),this.msgHandler=i.msgHandler,this.evaluatorOptions=n,this.enableXfa=s,this.streamManager=new r.ChunkedStreamManager(e,{msgHandler:i.msgHandler,length:i.length,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize}),this.pdfDocument=new o.PDFDocument(this,this.streamManager.getStream())}async ensure(t,e,i){try{const n=t[e];return"function"==typeof n?n.apply(t,i):n}catch(n){if(!(n instanceof s.MissingDataException))throw n;return await this.requestRange(n.begin,n.end),this.ensure(t,e,i)}}requestRange(t,e){return this.streamManager.requestRange(t,e)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(t){this.streamManager.onReceiveData({chunk:t})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(t){this.streamManager.abort(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChunkedStreamManager=e.ChunkedStream=void 0;var n=i(2),r=i(8),s=i(10);class o extends s.Stream{constructor(t,e,i){super(new Uint8Array(t),0,t,null),this.chunkSize=e,this._loadedChunks=new Set,this.numChunks=Math.ceil(t/e),this.manager=i,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const t=[];for(let e=0,i=this.numChunks;e<i;++e)this._loadedChunks.has(e)||t.push(e);return t}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(t,e){const i=this.chunkSize;if(t%i!=0)throw new Error(`Bad begin offset: ${t}`);const n=t+e.byteLength;if(n%i!=0&&n!==this.bytes.length)throw new Error(`Bad end offset: ${n}`);this.bytes.set(new Uint8Array(e),t);const r=Math.floor(t/i),s=Math.floor((n-1)/i)+1;for(let t=r;t<s;++t)this._loadedChunks.add(t)}onReceiveProgressiveData(t){let e=this.progressiveDataLength;const i=Math.floor(e/this.chunkSize);this.bytes.set(new Uint8Array(t),e),e+=t.byteLength,this.progressiveDataLength=e;const n=e>=this.end?this.numChunks:Math.floor(e/this.chunkSize);for(let t=i;t<n;++t)this._loadedChunks.add(t)}ensureByte(t){if(t<this.progressiveDataLength)return;const e=Math.floor(t/this.chunkSize);if(!(e>this.numChunks)&&e!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(e))throw new r.MissingDataException(t,t+1);this.lastSuccessfulEnsureByteChunk=e}}ensureRange(t,e){if(t>=e)return;if(e<=this.progressiveDataLength)return;const i=Math.floor(t/this.chunkSize);if(i>this.numChunks)return;const n=Math.min(Math.floor((e-1)/this.chunkSize)+1,this.numChunks);for(let s=i;s<n;++s)if(!this._loadedChunks.has(s))throw new r.MissingDataException(t,e)}nextEmptyChunk(t){const e=this.numChunks;for(let i=0;i<e;++i){const n=(t+i)%e;if(!this._loadedChunks.has(n))return n}return null}hasChunk(t){return this._loadedChunks.has(t)}getByte(){const t=this.pos;return t>=this.end?-1:(t>=this.progressiveDataLength&&this.ensureByte(t),this.bytes[this.pos++])}getBytes(t){const e=this.bytes,i=this.pos,n=this.end;if(!t)return n>this.progressiveDataLength&&this.ensureRange(i,n),e.subarray(i,n);let r=i+t;return r>n&&(r=n),r>this.progressiveDataLength&&this.ensureRange(i,r),this.pos=r,e.subarray(i,r)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),e>this.progressiveDataLength&&this.ensureRange(t,e),this.bytes.subarray(t,e)}makeSubStream(t,e,i=null){function n(){}e?t+e>this.progressiveDataLength&&this.ensureRange(t,t+e):t>=this.progressiveDataLength&&this.ensureByte(t),n.prototype=Object.create(this),n.prototype.getMissingChunks=function(){const t=this.chunkSize,e=Math.floor(this.start/t),i=Math.floor((this.end-1)/t)+1,n=[];for(let t=e;t<i;++t)this._loadedChunks.has(t)||n.push(t);return n},Object.defineProperty(n.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length},configurable:!0});const r=new n;return r.pos=r.start=t,r.end=t+e||this.end,r.dict=i,r}getBaseStreams(){return[this]}}e.ChunkedStream=o,e.ChunkedStreamManager=class{constructor(t,e){this.length=e.length,this.chunkSize=e.rangeChunkSize,this.stream=new o(this.length,this.chunkSize,this),this.pdfNetworkStream=t,this.disableAutoFetch=e.disableAutoFetch,this.msgHandler=e.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,n.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(t,e){const i=this.pdfNetworkStream.getRangeReader(t,e);i.isStreamingSupported||(i.onProgress=this.onProgress.bind(this));let r=[],s=0;return new Promise(((t,e)=>{const o=a=>{try{if(!a.done){const t=a.value;return r.push(t),s+=(0,n.arrayByteLength)(t),i.isStreamingSupported&&this.onProgress({loaded:s}),void i.read().then(o,e)}const l=(0,n.arraysToBytes)(r);r=null,t(l)}catch(t){e(t)}};i.read().then(o,e)})).then((e=>{this.aborted||this.onReceiveData({chunk:e,begin:t})}))}requestAllChunks(){const t=this.stream.getMissingChunks();return this._requestChunks(t),this._loadedStreamCapability.promise}_requestChunks(t){const e=this.currRequestId++,i=new Set;this._chunksNeededByRequest.set(e,i);for(const e of t)this.stream.hasChunk(e)||i.add(e);if(0===i.size)return Promise.resolve();const r=(0,n.createPromiseCapability)();this._promisesByRequest.set(e,r);const s=[];for(const t of i){let i=this._requestsByChunk.get(t);i||(i=[],this._requestsByChunk.set(t,i),s.push(t)),i.push(e)}if(s.length>0){const t=this.groupChunks(s);for(const e of t){const t=e.beginChunk*this.chunkSize,i=Math.min(e.endChunk*this.chunkSize,this.length);this.sendRequest(t,i).catch(r.reject)}}return r.promise.catch((t=>{if(!this.aborted)throw t}))}getStream(){return this.stream}requestRange(t,e){e=Math.min(e,this.length);const i=this.getBeginChunk(t),n=this.getEndChunk(e),r=[];for(let t=i;t<n;++t)r.push(t);return this._requestChunks(r)}requestRanges(t=[]){const e=[];for(const i of t){const t=this.getBeginChunk(i.begin),n=this.getEndChunk(i.end);for(let i=t;i<n;++i)e.includes(i)||e.push(i)}return e.sort((function(t,e){return t-e})),this._requestChunks(e)}groupChunks(t){const e=[];let i=-1,n=-1;for(let r=0,s=t.length;r<s;++r){const s=t[r];i<0&&(i=s),n>=0&&n+1!==s&&(e.push({beginChunk:i,endChunk:n+1}),i=s),r+1===t.length&&e.push({beginChunk:i,endChunk:s+1}),n=s}return e}onProgress(t){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+t.loaded,total:this.length})}onReceiveData(t){const e=t.chunk,i=void 0===t.begin,n=i?this.progressiveDataLength:t.begin,r=n+e.byteLength,s=Math.floor(n/this.chunkSize),o=r<this.length?Math.floor(r/this.chunkSize):Math.ceil(r/this.chunkSize);i?(this.stream.onReceiveProgressiveData(e),this.progressiveDataLength=r):this.stream.onReceiveData(n,e),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const a=[];for(let t=s;t<o;++t){const e=this._requestsByChunk.get(t);if(e){this._requestsByChunk.delete(t);for(const i of e){const e=this._chunksNeededByRequest.get(i);e.has(t)&&e.delete(t),e.size>0||a.push(i)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let t;if(1===this.stream.numChunksLoaded){const e=this.stream.numChunks-1;this.stream.hasChunk(e)||(t=e)}else t=this.stream.nextEmptyChunk(o);Number.isInteger(t)&&this._requestChunks([t])}for(const t of a){const e=this._promisesByRequest.get(t);this._promisesByRequest.delete(t),e.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(t){this._loadedStreamCapability.reject(t)}getBeginChunk(t){return Math.floor(t/this.chunkSize)}getEndChunk(t){return Math.floor((t-1)/this.chunkSize)+1}abort(t){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(t);for(const e of this._promisesByRequest.values())e.reject(t)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRefParseException=e.XRefEntryException=e.ParserEOFException=e.MissingDataException=e.DocStats=void 0,e.collectActions=function(t,e,i){const s=Object.create(null),o=h({dict:e,key:"AA",stopWhenFound:!1});if(o)for(let e=o.length-1;e>=0;e--){const n=o[e];if(n instanceof r.Dict)for(const e of n.getKeys()){const o=i[e];if(!o)continue;const a=n.getRaw(e),l=new r.RefSet,c=[];p(a,t,c,l),c.length>0&&(s[o]=c)}}if(e.has("A")){const i=e.get("A"),n=new r.RefSet,o=[];p(i,t,o,n),o.length>0&&(s.Action=o)}return(0,n.objectSize)(s)>0?s:null},e.encodeToXmlString=function(t){const e=[];let i=0;for(let n=0,r=t.length;n<r;n++){const r=t.codePointAt(n);if(32<=r&&r<=126){const s=d[r];s&&(i<n&&e.push(t.substring(i,n)),e.push(s),i=n+1)}else i<n&&e.push(t.substring(i,n)),e.push(`&#x${r.toString(16).toUpperCase()};`),r>55295&&(r<57344||r>65533)&&n++,i=n+1}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))},e.escapePDFName=function(t){const e=[];let i=0;for(let n=0,r=t.length;n<r;n++){const r=t.charCodeAt(n);(r<33||r>126||35===r||40===r||41===r||60===r||62===r||91===r||93===r||123===r||125===r||47===r||37===r)&&(i<n&&e.push(t.substring(i,n)),e.push(`#${r.toString(16)}`),i=n+1)}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))},e.getArrayLookupTableFactory=function(t){let e;return function(){if(t){let i=t();t=null,e=Object.create(null);for(let t=0,n=i.length;t<n;t+=2)e[i[t]]=i[t+1];i=null}return e}},e.getInheritableProperty=h,e.getLookupTableFactory=function(t){let e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},e.isWhiteSpace=function(t){return 32===t||9===t||13===t||10===t},e.log2=function(t){return t<=0?0:Math.ceil(Math.log2(t))},e.parseXFAPath=function(t){const e=/(.+)\[(\d+)\]$/;return t.split(".").map((t=>{const i=t.match(e);return i?{name:i[1],pos:parseInt(i[2],10)}:{name:t,pos:0}}))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.recoverJsURL=function(t){const e=new RegExp("^\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec(t);if(e&&e[2]){const t=e[2];let i=!1;return"true"===e[3]&&"app.launchURL"===e[1]&&(i=!0),{url:t,newWindow:i}}return null},e.toRomanNumerals=function(t,e=!1){(0,n.assert)(Number.isInteger(t)&&t>0,"The number should be a positive integer.");const i=[];let r;for(;t>=1e3;)t-=1e3,i.push("M");r=t/100|0,t%=100,i.push(u[r]),r=t/10|0,t%=10,i.push(u[10+r]),i.push(u[20+t]);const s=i.join("");return e?s.toLowerCase():s},e.validateCSSFont=function(t){const e=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:i,fontWeight:r,italicAngle:s}=t;if(/^".*"$/.test(i)){if(/[^\\]"/.test(i.slice(1,i.length-1)))return(0,n.warn)(`XFA - FontFamily contains some unescaped ": ${i}.`),!1}else if(/^'.*'$/.test(i)){if(/[^\\]'/.test(i.slice(1,i.length-1)))return(0,n.warn)(`XFA - FontFamily contains some unescaped ': ${i}.`),!1}else for(const t of i.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(t)||!/^[\w-\\]+$/.test(t))return(0,n.warn)(`XFA - FontFamily contains some invalid <custom-ident>: ${i}.`),!1;const o=r?r.toString():"";t.fontWeight=e.has(o)?o:"400";const a=parseFloat(s);return t.italicAngle=isNaN(a)||a<-90||a>90?"14":s.toString(),!0};var n=i(2),r=i(5),s=i(9);class o extends n.BaseException{constructor(t,e){super(`Missing data [${t}, ${e})`,"MissingDataException"),this.begin=t,this.end=e}}e.MissingDataException=o;class a extends n.BaseException{constructor(t){super(t,"ParserEOFException")}}e.ParserEOFException=a;class l extends n.BaseException{constructor(t){super(t,"XRefEntryException")}}e.XRefEntryException=l;class c extends n.BaseException{constructor(t){super(t,"XRefParseException")}}function h({dict:t,key:e,getArray:i=!1,stopWhenFound:n=!0}){let s;const o=new r.RefSet;for(;t instanceof r.Dict&&(!t.objId||!o.has(t.objId));){t.objId&&o.put(t.objId);const r=i?t.getArray(e):t.get(e);if(void 0!==r){if(n)return r;s||(s=[]),s.push(r)}t=t.get("Parent")}return s}e.XRefParseException=c,e.DocStats=class{constructor(t){this._handler=t,this._streamTypes=new Set,this._fontTypes=new Set}_send(){const t=Object.create(null),e=Object.create(null);for(const e of this._streamTypes)t[e]=!0;for(const t of this._fontTypes)e[t]=!0;this._handler.send("DocStats",{streamTypes:t,fontTypes:e})}addStreamType(t){this._streamTypes.has(t)||(this._streamTypes.add(t),this._send())}addFontType(t){this._fontTypes.has(t)||(this._fontTypes.add(t),this._send())}};const u=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function p(t,e,i,o){if(!t)return;let a=null;if(t instanceof r.Ref){if(o.has(t))return;a=t,o.put(a),t=e.fetch(t)}if(Array.isArray(t))for(const n of t)p(n,e,i,o);else if(t instanceof r.Dict){if((0,r.isName)(t.get("S"),"JavaScript")){const e=t.get("JS");let r;e instanceof s.BaseStream?r=e.getString():"string"==typeof e&&(r=e),r=r&&(0,n.stringToPDFString)(r),r&&i.push(r)}p(t.getRaw("Next"),e,i,o)}a&&o.remove(a)}const d={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStream=void 0;var n=i(2);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseStream.")}get length(){(0,n.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,n.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,n.shadow)(this,"isDataLoaded",!0)}getByte(){(0,n.unreachable)("Abstract method `getByte` called")}getBytes(t){(0,n.unreachable)("Abstract method `getBytes` called")}peekByte(){const t=this.getByte();return-1!==t&&this.pos--,t}peekBytes(t){const e=this.getBytes(t);return this.pos-=e.length,e}getUint16(){const t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(t,e){(0,n.unreachable)("Abstract method `getByteRange` called")}getString(t){return(0,n.bytesToString)(this.getBytes(t))}skip(t){this.pos+=t||1}reset(){(0,n.unreachable)("Abstract method `reset` called")}moveStart(){(0,n.unreachable)("Abstract method `moveStart` called")}makeSubStream(t,e,i=null){(0,n.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}e.BaseStream=r},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StringStream=e.Stream=e.NullStream=void 0;var n=i(9),r=i(2);class s extends n.BaseStream{constructor(t,e,i,n){super(),this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+i||this.bytes.length,this.dict=n}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(t){const e=this.bytes,i=this.pos,n=this.end;if(!t)return e.subarray(i,n);let r=i+t;return r>n&&(r=n),this.pos=r,e.subarray(i,r)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(t,e,i=null){return new s(this.bytes.buffer,t,e,i)}}e.Stream=s,e.StringStream=class extends s{constructor(t){super((0,r.stringToBytes)(t))}},e.NullStream=class extends s{constructor(){super(new Uint8Array(0))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Page=e.PDFDocument=void 0;var n=i(2),r=i(8),s=i(5),o=i(12),a=i(22),l=i(9),c=i(74),h=i(65),u=i(67),p=i(100),d=i(27),f=i(10),g=i(72),m=i(62),y=i(25),v=i(29),b=i(71),w=i(76),x=i(101);const S=[0,0,612,792];class k{constructor({pdfManager:t,xref:e,pageIndex:i,pageDict:n,ref:r,globalIdFactory:s,fontCache:o,builtInCMapCache:a,standardFontDataCache:l,globalImageCache:c,nonBlendModesSet:h,xfaFactory:u}){this.pdfManager=t,this.pageIndex=i,this.pageDict=n,this.xref=e,this.ref=r,this.fontCache=o,this.builtInCMapCache=a,this.standardFontDataCache=l,this.globalImageCache=c,this.nonBlendModesSet=h,this.evaluatorOptions=t.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=u;const p={obj:0};this._localIdFactory=class extends s{static createObjId(){return`p${i}_${++p.obj}`}static getPageObjId(){return`page${r.toString()}`}}}_getInheritableProperty(t,e=!1){const i=(0,r.getInheritableProperty)({dict:this.pageDict,key:t,getArray:e,stopWhenFound:!1});return Array.isArray(i)?1!==i.length&&i[0]instanceof s.Dict?s.Dict.merge({xref:this.xref,dictArray:i}):i[0]:i}get content(){return this.pageDict.getArray("Contents")}get resources(){return(0,n.shadow)(this,"resources",this._getInheritableProperty("Resources")||s.Dict.empty)}_getBoundingBox(t){if(this.xfaData)return this.xfaData.bbox;const e=this._getInheritableProperty(t,!0);if(Array.isArray(e)&&4===e.length){if(e[2]-e[0]!=0&&e[3]-e[1]!=0)return e;(0,n.warn)(`Empty /${t} entry.`)}return null}get mediaBox(){return(0,n.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||S)}get cropBox(){return(0,n.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let t=this.pageDict.get("UserUnit");return("number"!=typeof t||t<=0)&&(t=1),(0,n.shadow)(this,"userUnit",t)}get view(){const{cropBox:t,mediaBox:e}=this;let i;if(t===e||(0,n.isArrayEqual)(t,e))i=e;else{const r=n.Util.intersect(t,e);r&&r[2]-r[0]!=0&&r[3]-r[1]!=0?i=r:(0,n.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,n.shadow)(this,"view",i||e)}get rotate(){let t=this._getInheritableProperty("Rotate")||0;return t%90!=0?t=0:t>=360?t%=360:t<0&&(t=(t%360+360)%360),(0,n.shadow)(this,"rotate",t)}_onSubStreamError(t,e,i){if(this.evaluatorOptions.ignoreErrors)return t.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorContentSubStream}),void(0,n.warn)(`getContentStream - ignoring sub-stream (${i}): "${e}".`);throw e}getContentStream(t){return this.pdfManager.ensure(this,"content").then((e=>e instanceof l.BaseStream?e:Array.isArray(e)?new v.StreamsSequenceStream(e,this._onSubStreamError.bind(this,t)):new f.NullStream))}get xfaData(){return(0,n.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}save(t,e,i){const r=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(t){const s=[];for(const o of t)o.mustBePrinted(i)&&s.push(o.save(r,e,i).catch((function(t){return(0,n.warn)(`save - ignoring annotation data during "${e.name}" task: "${t}".`),null})));return Promise.all(s)}))}loadResources(t){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((()=>new g.ObjectLoader(this.resources,t,this.xref).load()))}getOperatorList({handler:t,sink:e,task:i,intent:r,cacheKey:s,annotationStorage:o=null}){const a=this.getContentStream(t),l=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),c=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),h=Promise.all([a,l]).then((([n])=>{const o=new m.OperatorList(r,e);return t.send("StartRenderPage",{transparency:c.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:s}),c.getOperatorList({stream:n,task:i,resources:this.resources,operatorList:o}).then((function(){return o}))}));return Promise.all([h,this._parsedAnnotations]).then((function([t,e]){if(0===e.length||r&n.RenderingIntentFlag.ANNOTATIONS_DISABLE)return t.flush(!0),{length:t.totalLength};const s=!!(r&n.RenderingIntentFlag.ANNOTATIONS_FORMS),a=!!(r&n.RenderingIntentFlag.ANY),l=!!(r&n.RenderingIntentFlag.DISPLAY),h=!!(r&n.RenderingIntentFlag.PRINT),u=[];for(const t of e)(a||l&&t.mustBeViewed(o)||h&&t.mustBePrinted(o))&&u.push(t.getOperatorList(c,i,r,s,o).catch((function(t){return(0,n.warn)(`getOperatorList - ignoring annotation data during "${i.name}" task: "${t}".`),null})));return Promise.all(u).then((function(e){t.addOp(n.OPS.beginAnnotations,[]);for(const i of e)t.addOpList(i);return t.addOp(n.OPS.endAnnotations,[]),t.flush(!0),{length:t.totalLength}}))}))}extractTextContent({handler:t,task:e,includeMarkedContent:i,sink:n,combineTextItems:r}){const s=this.getContentStream(t),o=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([s,o]).then((([s])=>new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:s,task:e,resources:this.resources,includeMarkedContent:i,combineTextItems:r,sink:n,viewBox:this.view})))}async getStructTree(){const t=await this.pdfManager.ensureCatalog("structTreeRoot");return t?(await this.pdfManager.ensure(this,"_parseStructTree",[t])).serializable:null}_parseStructTree(t){const e=new b.StructTreePage(t,this.pageDict);return e.parse(),e}getAnnotationsData(t){return this._parsedAnnotations.then((function(e){const i=[];if(0===e.length)return i;const r=!!(t&n.RenderingIntentFlag.ANY),s=!!(t&n.RenderingIntentFlag.DISPLAY),o=!!(t&n.RenderingIntentFlag.PRINT);for(const t of e)(r||s&&t.viewable||o&&t.printable)&&i.push(t.data);return i}))}get annotations(){const t=this._getInheritableProperty("Annots");return(0,n.shadow)(this,"annotations",Array.isArray(t)?t:[])}get _parsedAnnotations(){const t=this.pdfManager.ensure(this,"annotations").then((()=>{const t=[];for(const e of this.annotations)t.push(a.AnnotationFactory.create(this.xref,e,this.pdfManager,this._localIdFactory,!1).catch((function(t){return(0,n.warn)(`_parsedAnnotations: "${t}".`),null})));return Promise.all(t).then((function(t){return t.filter((t=>!!t))}))}));return(0,n.shadow)(this,"_parsedAnnotations",t)}get jsActions(){const t=(0,r.collectActions)(this.xref,this.pageDict,n.PageActionEventType);return(0,n.shadow)(this,"jsActions",t)}}e.Page=k;const C=new Uint8Array([37,80,68,70,45]),A=new Uint8Array([115,116,97,114,116,120,114,101,102]),_=new Uint8Array([101,110,100,111,98,106]),T=/^[1-9]\.\d$/;function O(t,e,i=1024,n=!1){const r=e.length,s=t.peekBytes(i),o=s.length-r;if(o<=0)return!1;if(n){const i=r-1;let n=s.length-1;for(;n>=i;){let o=0;for(;o<r&&s[n-o]===e[i-o];)o++;if(o>=r)return t.pos+=n-i,!0;n--}}else{let i=0;for(;i<=o;){let n=0;for(;n<r&&s[i+n]===e[n];)n++;if(n>=r)return t.pos+=i,!0;i++}}return!1}e.PDFDocument=class{constructor(t,e){if(e.length<=0)throw new n.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=t,this.stream=e,this.xref=new x.XRef(e,t),this._pagePromises=new Map,this._version=null;const i={font:0};this._globalIdFactory=class{static getDocId(){return`g_${t.docId}`}static createFontId(){return"f"+ ++i.font}static createObjId(){(0,n.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,n.unreachable)("Abstract method `getPageObjId` called.")}}}parse(t){this.xref.parse(t),this.catalog=new h.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let t=null;try{t=d.Linearization.create(this.stream)}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.info)(t)}return(0,n.shadow)(this,"linearization",t)}get startXRef(){const t=this.stream;let e=0;if(this.linearization)t.reset(),O(t,_)&&(e=t.pos+6-t.start);else{const i=1024,n=A.length;let s=!1,o=t.end;for(;!s&&o>0;)o-=i-n,o<0&&(o=0),t.pos=o,s=O(t,A,i,!0);if(s){let i;t.skip(9);do{i=t.getByte()}while((0,r.isWhiteSpace)(i));let n="";for(;i>=32&&i<=57;)n+=String.fromCharCode(i),i=t.getByte();e=parseInt(n,10),isNaN(e)&&(e=0)}}return(0,n.shadow)(this,"startXRef",e)}checkHeader(){const t=this.stream;if(t.reset(),!O(t,C))return;t.moveStart();let e,i="";for(;(e=t.getByte())>32&&!(i.length>=12);)i+=String.fromCharCode(e);this._version||(this._version=i.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let t=0;return t=this.catalog.hasActualNumPages?this.catalog.numPages:this.xfaFactory?this.xfaFactory.getNumPages():this.linearization?this.linearization.numPages:this.catalog.numPages,(0,n.shadow)(this,"numPages",t)}_hasOnlyDocumentSignatures(t,e=0){return!!Array.isArray(t)&&t.every((t=>{if(!((t=this.xref.fetchIfRef(t))instanceof s.Dict))return!1;if(t.has("Kids"))return++e>10?((0,n.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(t.get("Kids"),e);const i=(0,s.isName)(t.get("FT"),"Sig"),r=t.get("Rect"),o=Array.isArray(r)&&r.every((t=>0===t));return i&&o}))}get _xfaStreams(){const t=this.catalog.acroForm;if(!t)return null;const e=t.get("XFA"),i={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(e instanceof l.BaseStream&&!e.isEmpty)return i["xdp:xdp"]=e,i;if(!Array.isArray(e)||0===e.length)return null;for(let t=0,n=e.length;t<n;t+=2){let r;if(r=0===t?"xdp:xdp":t===n-2?"/xdp:xdp":e[t],!i.hasOwnProperty(r))continue;const s=this.xref.fetchIfRef(e[t+1]);s instanceof l.BaseStream&&!s.isEmpty&&(i[r]=s)}return i}get xfaDatasets(){const t=this._xfaStreams;if(!t)return(0,n.shadow)(this,"xfaDatasets",null);for(const e of["datasets","xdp:xdp"]){const i=t[e];if(i)try{const t={[e]:(0,n.stringToUTF8String)(i.getString())};return(0,n.shadow)(this,"xfaDatasets",new p.DatasetReader(t))}catch(t){(0,n.warn)("XFA - Invalid utf-8 string.");break}}return(0,n.shadow)(this,"xfaDatasets",null)}get xfaData(){const t=this._xfaStreams;if(!t)return null;const e=Object.create(null);for(const[i,r]of Object.entries(t))if(r)try{e[i]=(0,n.stringToUTF8String)(r.getString())}catch(t){return(0,n.warn)("XFA - Invalid utf-8 string."),null}return e}get xfaFactory(){let t;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(t=this.xfaData),(0,n.shadow)(this,"xfaFactory",t?new w.XFAFactory(t):null)}get isPureXfa(){return!!this.xfaFactory&&this.xfaFactory.isValid()}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const t=await this.pdfManager.ensureCatalog("xfaImages");if(!t)return;const e=t.getKeys(),i=new g.ObjectLoader(t,e,this.xref);await i.load();const n=new Map;for(const i of e){const e=t.get(i);e instanceof l.BaseStream&&n.set(i,e.getBytes())}this.xfaFactory.setImages(n)}async loadXfaFonts(t,e){const i=await this.pdfManager.ensureCatalog("acroForm");if(!i)return;const a=await i.getAsync("DR");if(!(a instanceof s.Dict))return;const l=new g.ObjectLoader(a,["Font"],this.xref);await l.load();const c=a.get("Font");if(!(c instanceof s.Dict))return;const h=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);h.useSystemFonts=!1;const u=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:h}),p=new m.OperatorList,d=[],f={get font(){return d[d.length-1]},set font(t){d.push(t)},clone(){return this}},v=new Map;c.forEach(((t,e)=>{v.set(t,e)}));const b=[];for(const[t,i]of v){const o=i.get("FontDescriptor");if(!(o instanceof s.Dict))continue;let l=o.get("FontFamily");l=l.replace(/[ ]+(\d)/g,"$1");const c={fontFamily:l,fontWeight:o.get("FontWeight"),italicAngle:-o.get("ItalicAngle")};(0,r.validateCSSFont)(c)&&b.push(u.handleSetFont(a,[s.Name.get(t),1],null,p,e,f,null,c).catch((function(t){return(0,n.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b);const w=this.xfaFactory.setFonts(d);if(!w)return;h.ignoreErrors=!0,b.length=0,d.length=0;const x=new Set;for(const t of w)(0,o.getXfaFontName)(`${t}-Regular`)||x.add(t);x.size&&w.push("PdfJS-Fallback");for(const t of w)if(!x.has(t))for(const i of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const r=`${t}-${i.name}`,l=(0,o.getXfaFontDict)(r);b.push(u.handleSetFont(a,[s.Name.get(r),1],null,p,e,f,l,{fontFamily:t,fontWeight:i.fontWeight,italicAngle:i.italicAngle}).catch((function(t){return(0,n.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b),this.xfaFactory.appendFonts(d,x)}async serializeXfaData(t){return this.xfaFactory?this.xfaFactory.serializeData(t):null}get formInfo(){const t={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},e=this.catalog.acroForm;if(!e)return(0,n.shadow)(this,"formInfo",t);try{const i=e.get("Fields"),n=Array.isArray(i)&&i.length>0;t.hasFields=n;const r=e.get("XFA");t.hasXfa=Array.isArray(r)&&r.length>0||r instanceof l.BaseStream&&!r.isEmpty;const s=!!(1&e.get("SigFlags")),o=s&&this._hasOnlyDocumentSignatures(i);t.hasAcroForm=n&&!o,t.hasSignatures=s}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.warn)(`Cannot fetch form information: "${t}".`)}return(0,n.shadow)(this,"formInfo",t)}get documentInfo(){let t=this._version;"string"==typeof t&&T.test(t)||((0,n.warn)(`Invalid PDF header version number: ${t}`),t=null);const e={PDFFormatVersion:t,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let i;try{i=this.xref.trailer.get("Info")}catch(t){if(t instanceof r.MissingDataException)throw t;(0,n.info)("The document information dictionary is invalid.")}if(!(i instanceof s.Dict))return(0,n.shadow)(this,"documentInfo",e);for(const t of i.getKeys()){const r=i.get(t);switch(t){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if("string"==typeof r){e[t]=(0,n.stringToPDFString)(r);continue}break;case"Trapped":if(r instanceof s.Name){e[t]=r;continue}break;default:let i;switch(typeof r){case"string":i=(0,n.stringToPDFString)(r);break;case"number":case"boolean":i=r;break;default:r instanceof s.Name&&(i=r)}if(void 0===i){(0,n.warn)(`Bad value, for custom key "${t}", in Info: ${r}.`);continue}e.Custom||(e.Custom=Object.create(null)),e.Custom[t]=i;continue}(0,n.warn)(`Bad value, for key "${t}", in Info: ${r}.`)}return(0,n.shadow)(this,"documentInfo",e)}get fingerprints(){function t(t){return"string"==typeof t&&t.length>0&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==t}function e(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i].toString(16);e.push(n.padStart(2,"0"))}return e.join("")}const i=this.xref.trailer.get("ID");let r,s;return Array.isArray(i)&&t(i[0])?(r=(0,n.stringToBytes)(i[0]),i[1]!==i[0]&&t(i[1])&&(s=(0,n.stringToBytes)(i[1]))):r=(0,c.calculateMD5)(this.stream.getByteRange(0,1024),0,1024),(0,n.shadow)(this,"fingerprints",[e(r),s?e(s):null])}async _getLinearizationPage(t){const{catalog:e,linearization:i,xref:r}=this,o=s.Ref.get(i.objectNumberFirst,0);try{const t=await r.fetchAsync(o);if(t instanceof s.Dict){let i=t.getRaw("Type");if(i instanceof s.Ref&&(i=await r.fetchAsync(i)),(0,s.isName)(i,"Page")||!t.has("Type")&&!t.has("Kids"))return e.pageKidsCountCache.has(o)||e.pageKidsCountCache.put(o,1),e.pageIndexCache.has(o)||e.pageIndexCache.put(o,0),[t,o]}throw new n.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(i){return(0,n.warn)(`_getLinearizationPage: "${i.message}".`),e.getPageDict(t)}}getPage(t){const e=this._pagePromises.get(t);if(e)return e;const{catalog:i,linearization:n,xfaFactory:r}=this;let o;return o=r?Promise.resolve([s.Dict.empty,null]):n&&n.pageFirst===t?this._getLinearizationPage(t):i.getPageDict(t),o=o.then((([e,n])=>new k({pdfManager:this.pdfManager,xref:this.xref,pageIndex:t,pageDict:e,ref:n,globalIdFactory:this._globalIdFactory,fontCache:i.fontCache,builtInCMapCache:i.builtInCMapCache,standardFontDataCache:i.standardFontDataCache,globalImageCache:i.globalImageCache,nonBlendModesSet:i.nonBlendModesSet,xfaFactory:r}))),this._pagePromises.set(t,o),o}async checkFirstPage(t=!1){if(!t)try{await this.getPage(0)}catch(t){if(t instanceof r.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new r.XRefParseException}}async checkLastPage(t=!1){const{catalog:e,pdfManager:i}=this;let s;e.setActualNumPages();try{if(await Promise.all([i.ensureDoc("xfaFactory"),i.ensureDoc("linearization"),i.ensureCatalog("numPages")]),this.xfaFactory)return;if(s=this.linearization?this.linearization.numPages:e.numPages,!Number.isInteger(s))throw new n.FormatError("Page count is not an integer.");if(s<=1)return;await this.getPage(s-1)}catch(o){if(this._pagePromises.delete(s-1),await this.cleanup(),o instanceof r.XRefEntryException&&!t)throw new r.XRefParseException;let a;(0,n.warn)(`checkLastPage - invalid /Pages tree /Count: ${s}.`);try{a=await e.getAllPageDicts(t)}catch(i){if(i instanceof r.XRefEntryException&&!t)throw new r.XRefParseException;return void e.setActualNumPages(1)}for(const[t,[n,r]]of a){let s;n instanceof Error?(s=Promise.reject(n),s.catch((()=>{}))):s=Promise.resolve(new k({pdfManager:i,xref:this.xref,pageIndex:t,pageDict:n,ref:r,globalIdFactory:this._globalIdFactory,fontCache:e.fontCache,builtInCMapCache:e.builtInCMapCache,standardFontDataCache:e.standardFontDataCache,globalImageCache:e.globalImageCache,nonBlendModesSet:e.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(t,s)}e.setActualNumPages(a.size)}}fontFallback(t,e){return this.catalog.fontFallback(t,e)}async cleanup(t=!1){return this.catalog?this.catalog.cleanup(t):(0,u.clearGlobalCaches)()}_collectFieldObjects(t,e,i){const r=this.xref.fetchIfRef(e);if(r.has("T")){const e=(0,n.stringToPDFString)(r.get("T"));t=""===t?e:`${t}.${e}`}if(i.has(t)||i.set(t,[]),i.get(t).push(a.AnnotationFactory.create(this.xref,e,this.pdfManager,this._localIdFactory,!0).then((t=>t&&t.getFieldObject())).catch((function(t){return(0,n.warn)(`_collectFieldObjects: "${t}".`),null}))),r.has("Kids")){const e=r.get("Kids");for(const n of e)this._collectFieldObjects(t,n,i)}}get fieldObjects(){if(!this.formInfo.hasFields)return(0,n.shadow)(this,"fieldObjects",Promise.resolve(null));const t=Object.create(null),e=new Map;for(const t of this.catalog.acroForm.get("Fields"))this._collectFieldObjects("",t,e);const i=[];for(const[n,r]of e)i.push(Promise.all(r).then((e=>{(e=e.filter((t=>!!t))).length>0&&(t[n]=e)})));return(0,n.shadow)(this,"fieldObjects",Promise.all(i).then((()=>t)))}get hasJSActions(){const t=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,n.shadow)(this,"hasJSActions",t)}async _parseHasJSActions(){const[t,e]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return!!t||!!e&&Object.values(e).some((t=>t.some((t=>null!==t.actions))))}get calculationOrderIds(){const t=this.catalog.acroForm;if(!t||!t.has("CO"))return(0,n.shadow)(this,"calculationOrderIds",null);const e=t.get("CO");if(!Array.isArray(e)||0===e.length)return(0,n.shadow)(this,"calculationOrderIds",null);const i=[];for(const t of e)t instanceof s.Ref&&i.push(t.toString());return 0===i.length?(0,n.shadow)(this,"calculationOrderIds",null):(0,n.shadow)(this,"calculationOrderIds",i)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getXfaFontDict=function(t){const e=function(t){const e=p(t);if(!e)return null;const{baseWidths:i,baseMapping:n,factors:r}=e;let s;s=r?i.map(((t,e)=>t*r[e])):i;let o,a=-2;const l=[];for(const[t,e]of n.map(((t,e)=>[t,e])).sort((([t],[e])=>t-e)))-1!==t&&(t===a+1?(o.push(s[e]),a+=1):(a=t,o=[s[e]],l.push(t,o)));return l}(t),i=new r.Dict(null);i.set("BaseFont",r.Name.get(t)),i.set("Type",r.Name.get("Font")),i.set("Subtype",r.Name.get("CIDFontType2")),i.set("Encoding",r.Name.get("Identity-H")),i.set("CIDToGIDMap",r.Name.get("Identity")),i.set("W",e),i.set("FirstChar",e[0]),i.set("LastChar",e[e.length-2]+e[e.length-1].length-1);const n=new r.Dict(null);i.set("FontDescriptor",n);const s=new r.Dict(null);return s.set("Ordering","Identity"),s.set("Registry","Adobe"),s.set("Supplement",0),i.set("CIDSystemInfo",s),i},e.getXfaFontName=p;var n=i(13),r=i(5),s=i(14),o=i(15),a=i(16),l=i(17),c=i(8),h=i(18);const u=(0,c.getLookupTableFactory)((function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:a.MyriadProRegularFactors,baseWidths:o.LiberationSansRegularWidths,baseMapping:o.LiberationSansRegularMapping,metrics:a.MyriadProRegularMetrics},t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:a.MyriadProBoldFactors,baseWidths:o.LiberationSansBoldWidths,baseMapping:o.LiberationSansBoldMapping,metrics:a.MyriadProBoldMetrics},t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:a.MyriadProItalicFactors,baseWidths:o.LiberationSansItalicWidths,baseMapping:o.LiberationSansItalicMapping,metrics:a.MyriadProItalicMetrics},t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:a.MyriadProBoldItalicFactors,baseWidths:o.LiberationSansBoldItalicWidths,baseMapping:o.LiberationSansBoldItalicMapping,metrics:a.MyriadProBoldItalicMetrics},t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:o.LiberationSansRegularWidths,baseMapping:o.LiberationSansRegularMapping},t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:o.LiberationSansBoldWidths,baseMapping:o.LiberationSansBoldMapping},t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:o.LiberationSansItalicWidths,baseMapping:o.LiberationSansItalicMapping},t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:o.LiberationSansBoldItalicWidths,baseMapping:o.LiberationSansBoldItalicMapping},t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:n.CalibriRegularFactors,baseWidths:o.LiberationSansRegularWidths,baseMapping:o.LiberationSansRegularMapping,metrics:n.CalibriRegularMetrics},t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:n.CalibriBoldFactors,baseWidths:o.LiberationSansBoldWidths,baseMapping:o.LiberationSansBoldMapping,metrics:n.CalibriBoldMetrics},t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:n.CalibriItalicFactors,baseWidths:o.LiberationSansItalicWidths,baseMapping:o.LiberationSansItalicMapping,metrics:n.CalibriItalicMetrics},t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:n.CalibriBoldItalicFactors,baseWidths:o.LiberationSansBoldItalicWidths,baseMapping:o.LiberationSansBoldItalicMapping,metrics:n.CalibriBoldItalicMetrics},t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:l.SegoeuiRegularFactors,baseWidths:o.LiberationSansRegularWidths,baseMapping:o.LiberationSansRegularMapping,metrics:l.SegoeuiRegularMetrics},t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:l.SegoeuiBoldFactors,baseWidths:o.LiberationSansBoldWidths,baseMapping:o.LiberationSansBoldMapping,metrics:l.SegoeuiBoldMetrics},t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:l.SegoeuiItalicFactors,baseWidths:o.LiberationSansItalicWidths,baseMapping:o.LiberationSansItalicMapping,metrics:l.SegoeuiItalicMetrics},t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:l.SegoeuiBoldItalicFactors,baseWidths:o.LiberationSansBoldItalicWidths,baseMapping:o.LiberationSansBoldItalicMapping,metrics:l.SegoeuiBoldItalicMetrics},t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:s.HelveticaRegularFactors,baseWidths:o.LiberationSansRegularWidths,baseMapping:o.LiberationSansRegularMapping,metrics:s.HelveticaRegularMetrics},t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:s.HelveticaBoldFactors,baseWidths:o.LiberationSansBoldWidths,baseMapping:o.LiberationSansBoldMapping,metrics:s.HelveticaBoldMetrics},t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:s.HelveticaItalicFactors,baseWidths:o.LiberationSansItalicWidths,baseMapping:o.LiberationSansItalicMapping,metrics:s.HelveticaItalicMetrics},t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:s.HelveticaBoldItalicFactors,baseWidths:o.LiberationSansBoldItalicWidths,baseMapping:o.LiberationSansBoldItalicMapping,metrics:s.HelveticaBoldItalicMetrics}}));function p(t){const e=(0,h.normalizeFontName)(t);return u()[e]}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CalibriRegularMetrics=e.CalibriRegularFactors=e.CalibriItalicMetrics=e.CalibriItalicFactors=e.CalibriBoldMetrics=e.CalibriBoldItalicMetrics=e.CalibriBoldItalicFactors=e.CalibriBoldFactors=void 0,e.CalibriBoldFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriBoldItalicFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1],e.CalibriRegularMetrics={lineHeight:1.2207,lineGap:.2207}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HelveticaRegularMetrics=e.HelveticaRegularFactors=e.HelveticaItalicMetrics=e.HelveticaItalicFactors=e.HelveticaBoldMetrics=e.HelveticaBoldItalicMetrics=e.HelveticaBoldItalicFactors=e.HelveticaBoldFactors=void 0,e.HelveticaBoldFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldMetrics={lineHeight:1.2,lineGap:.2},e.HelveticaBoldItalicFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaItalicFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaRegularFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LiberationSansRegularWidths=e.LiberationSansRegularMapping=e.LiberationSansItalicWidths=e.LiberationSansItalicMapping=e.LiberationSansBoldWidths=e.LiberationSansBoldMapping=e.LiberationSansBoldItalicWidths=e.LiberationSansBoldItalicMapping=void 0,e.LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MyriadProRegularMetrics=e.MyriadProRegularFactors=e.MyriadProItalicMetrics=e.MyriadProItalicFactors=e.MyriadProBoldMetrics=e.MyriadProBoldItalicMetrics=e.MyriadProBoldItalicFactors=e.MyriadProBoldFactors=void 0,e.MyriadProBoldFactors=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProBoldItalicFactors=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProItalicFactors=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProRegularFactors=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SegoeuiRegularMetrics=e.SegoeuiRegularFactors=e.SegoeuiItalicMetrics=e.SegoeuiItalicFactors=e.SegoeuiBoldMetrics=e.SegoeuiBoldItalicMetrics=e.SegoeuiBoldItalicFactors=e.SegoeuiBoldFactors=void 0,e.SegoeuiBoldFactors=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiBoldItalicFactors=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiItalicFactors=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiRegularFactors=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SEAC_ANALYSIS_ENABLED=e.MacStandardGlyphOrdering=e.FontFlags=void 0,e.getFontType=function(t,e,i=!1){switch(t){case"Type1":return i?n.FontType.TYPE1STANDARD:"Type1C"===e?n.FontType.TYPE1C:n.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===e?n.FontType.CIDFONTTYPE0C:n.FontType.CIDFONTTYPE0;case"OpenType":return n.FontType.OPENTYPE;case"TrueType":return n.FontType.TRUETYPE;case"CIDFontType2":return n.FontType.CIDFONTTYPE2;case"MMType1":return n.FontType.MMTYPE1;case"Type0":return n.FontType.TYPE0;default:return n.FontType.UNKNOWN}},e.normalizeFontName=function(t){return t.replace(/[,_]/g,"-").replace(/\s/g,"")},e.recoverGlyphName=l,e.type1FontGlyphMapping=function(t,e,i){const n=Object.create(null);let o,c,h;const u=!!(t.flags&a.Symbolic);if(t.isInternalFont)for(h=e,c=0;c<h.length;c++)o=i.indexOf(h[c]),n[c]=o>=0?o:0;else if(t.baseEncodingName)for(h=(0,r.getEncoding)(t.baseEncodingName),c=0;c<h.length;c++)o=i.indexOf(h[c]),n[c]=o>=0?o:0;else if(u)for(c in e)n[c]=e[c];else for(h=r.StandardEncoding,c=0;c<h.length;c++)o=i.indexOf(h[c]),n[c]=o>=0?o:0;const p=t.differences;let d;if(p)for(c in p){const t=p[c];if(o=i.indexOf(t),-1===o){d||(d=(0,s.getGlyphsUnicode)());const e=l(t,d);e!==t&&(o=i.indexOf(e))}n[c]=o>=0?o:0}return n};var n=i(2),r=i(19),s=i(20),o=i(21);e.SEAC_ANALYSIS_ENABLED=!0;const a={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};function l(t,e){if(void 0!==e[t])return t;const i=(0,o.getUnicodeForGlyph)(t,e);if(-1!==i)for(const t in e)if(e[t]===i)return t;return(0,n.info)("Unable to recover a standard glyph name for: "+t),t}e.FontFlags=a,e.MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ZapfDingbatsEncoding=e.WinAnsiEncoding=e.SymbolSetEncoding=e.StandardEncoding=e.MacRomanEncoding=e.ExpertEncoding=void 0,e.getEncoding=function(t){switch(t){case"WinAnsiEncoding":return o;case"StandardEncoding":return s;case"MacRomanEncoding":return r;case"SymbolSetEncoding":return a;case"ZapfDingbatsEncoding":return l;case"ExpertEncoding":return i;case"MacExpertEncoding":return n;default:return null}};const i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];e.ExpertEncoding=i;const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];e.MacRomanEncoding=r;const s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];e.StandardEncoding=s;const o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];e.WinAnsiEncoding=o;const a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];e.SymbolSetEncoding=a;const l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];e.ZapfDingbatsEncoding=l},(t,e,i)=>{i.r(e),i.d(e,{getDingbatsGlyphsUnicode:()=>s,getGlyphsUnicode:()=>r});var n=i(8);const r=(0,n.getArrayLookupTableFactory)((function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]})),s=(0,n.getArrayLookupTableFactory)((function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]}))},(t,e,i)=>{i.r(e),i.d(e,{clearUnicodeCaches:()=>f,getCharUnicodeCategory:()=>d,getNormalizedUnicodes:()=>c,getUnicodeForGlyph:()=>o,getUnicodeRangeFor:()=>l,mapSpecialUnicodeValues:()=>s,reverseIfRtl:()=>h});var n=i(8);const r=(0,n.getLookupTableFactory)((function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120}));function s(t){return t>=65520&&t<=65535?0:t>=62976&&t<=63743?r()[t]||t:173===t?45:t}function o(t,e){let i=e[t];if(void 0!==i)return i;if(!t)return-1;if("u"===t[0]){const e=t.length;let n;if(7===e&&"n"===t[1]&&"i"===t[2])n=t.substring(3);else{if(!(e>=5&&e<=7))return-1;n=t.substring(1)}if(n===n.toUpperCase()&&(i=parseInt(n,16),i>=0))return i}return-1}const a=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function l(t){for(let e=0,i=a.length;e<i;e++){const i=a[e];if(t>=i.begin&&t<i.end)return e}return-1}const c=(0,n.getArrayLookupTableFactory)((function(){return["¨"," ̈","¯"," ̄","´"," ́","µ","μ","¸"," ̧","Ĳ","IJ","ĳ","ij","Ŀ","L·","ŀ","l·","ŉ","ʼn","ſ","s","Ǆ","DŽ","ǅ","Dž","ǆ","dž","Ǉ","LJ","ǈ","Lj","ǉ","lj","Ǌ","NJ","ǋ","Nj","ǌ","nj","Ǳ","DZ","ǲ","Dz","ǳ","dz","˘"," ̆","˙"," ̇","˚"," ̊","˛"," ̨","˜"," ̃","˝"," ̋","ͺ"," ͅ","΄"," ́","ϐ","β","ϑ","θ","ϒ","Υ","ϕ","φ","ϖ","π","ϰ","κ","ϱ","ρ","ϲ","ς","ϴ","Θ","ϵ","ε","Ϲ","Σ","և","եւ","ٵ","اٴ","ٶ","وٴ","ٷ","ۇٴ","ٸ","يٴ","ำ","ํา","ຳ","ໍາ","ໜ","ຫນ","ໝ","ຫມ","ཷ","ྲཱྀ","ཹ","ླཱྀ","ẚ","aʾ","᾽"," ̓","᾿"," ̓","῀"," ͂","῾"," ̔"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","‗"," ̳","․",".","‥","..","…","...","″","′′","‴","′′′","‶","‵‵","‷","‵‵‵","‼","!!","‾"," ̅","⁇","??","⁈","?!","⁉","!?","⁗","′′′′"," "," ","₨","Rs","℀","a/c","℁","a/s","℃","°C","℅","c/o","℆","c/u","ℇ","Ɛ","℉","°F","№","No","℡","TEL","ℵ","א","ℶ","ב","ℷ","ג","ℸ","ד","℻","FAX","Ⅰ","I","Ⅱ","II","Ⅲ","III","Ⅳ","IV","Ⅴ","V","Ⅵ","VI","Ⅶ","VII","Ⅷ","VIII","Ⅸ","IX","Ⅹ","X","Ⅺ","XI","Ⅻ","XII","Ⅼ","L","Ⅽ","C","Ⅾ","D","Ⅿ","M","ⅰ","i","ⅱ","ii","ⅲ","iii","ⅳ","iv","ⅴ","v","ⅵ","vi","ⅶ","vii","ⅷ","viii","ⅸ","ix","ⅹ","x","ⅺ","xi","ⅻ","xii","ⅼ","l","ⅽ","c","ⅾ","d","ⅿ","m","∬","∫∫","∭","∫∫∫","∯","∮∮","∰","∮∮∮","⑴","(1)","⑵","(2)","⑶","(3)","⑷","(4)","⑸","(5)","⑹","(6)","⑺","(7)","⑻","(8)","⑼","(9)","⑽","(10)","⑾","(11)","⑿","(12)","⒀","(13)","⒁","(14)","⒂","(15)","⒃","(16)","⒄","(17)","⒅","(18)","⒆","(19)","⒇","(20)","⒈","1.","⒉","2.","⒊","3.","⒋","4.","⒌","5.","⒍","6.","⒎","7.","⒏","8.","⒐","9.","⒑","10.","⒒","11.","⒓","12.","⒔","13.","⒕","14.","⒖","15.","⒗","16.","⒘","17.","⒙","18.","⒚","19.","⒛","20.","⒜","(a)","⒝","(b)","⒞","(c)","⒟","(d)","⒠","(e)","⒡","(f)","⒢","(g)","⒣","(h)","⒤","(i)","⒥","(j)","⒦","(k)","⒧","(l)","⒨","(m)","⒩","(n)","⒪","(o)","⒫","(p)","⒬","(q)","⒭","(r)","⒮","(s)","⒯","(t)","⒰","(u)","⒱","(v)","⒲","(w)","⒳","(x)","⒴","(y)","⒵","(z)","⨌","∫∫∫∫","⩴","::=","⩵","==","⩶","===","⺟","母","⻳","龟","⼀","一","⼁","丨","⼂","丶","⼃","丿","⼄","乙","⼅","亅","⼆","二","⼇","亠","⼈","人","⼉","儿","⼊","入","⼋","八","⼌","冂","⼍","冖","⼎","冫","⼏","几","⼐","凵","⼑","刀","⼒","力","⼓","勹","⼔","匕","⼕","匚","⼖","匸","⼗","十","⼘","卜","⼙","卩","⼚","厂","⼛","厶","⼜","又","⼝","口","⼞","囗","⼟","土","⼠","士","⼡","夂","⼢","夊","⼣","夕","⼤","大","⼥","女","⼦","子","⼧","宀","⼨","寸","⼩","小","⼪","尢","⼫","尸","⼬","屮","⼭","山","⼮","巛","⼯","工","⼰","己","⼱","巾","⼲","干","⼳","幺","⼴","广","⼵","廴","⼶","廾","⼷","弋","⼸","弓","⼹","彐","⼺","彡","⼻","彳","⼼","心","⼽","戈","⼾","戶","⼿","手","⽀","支","⽁","攴","⽂","文","⽃","斗","⽄","斤","⽅","方","⽆","无","⽇","日","⽈","曰","⽉","月","⽊","木","⽋","欠","⽌","止","⽍","歹","⽎","殳","⽏","毋","⽐","比","⽑","毛","⽒","氏","⽓","气","⽔","水","⽕","火","⽖","爪","⽗","父","⽘","爻","⽙","爿","⽚","片","⽛","牙","⽜","牛","⽝","犬","⽞","玄","⽟","玉","⽠","瓜","⽡","瓦","⽢","甘","⽣","生","⽤","用","⽥","田","⽦","疋","⽧","疒","⽨","癶","⽩","白","⽪","皮","⽫","皿","⽬","目","⽭","矛","⽮","矢","⽯","石","⽰","示","⽱","禸","⽲","禾","⽳","穴","⽴","立","⽵","竹","⽶","米","⽷","糸","⽸","缶","⽹","网","⽺","羊","⽻","羽","⽼","老","⽽","而","⽾","耒","⽿","耳","⾀","聿","⾁","肉","⾂","臣","⾃","自","⾄","至","⾅","臼","⾆","舌","⾇","舛","⾈","舟","⾉","艮","⾊","色","⾋","艸","⾌","虍","⾍","虫","⾎","血","⾏","行","⾐","衣","⾑","襾","⾒","見","⾓","角","⾔","言","⾕","谷","⾖","豆","⾗","豕","⾘","豸","⾙","貝","⾚","赤","⾛","走","⾜","足","⾝","身","⾞","車","⾟","辛","⾠","辰","⾡","辵","⾢","邑","⾣","酉","⾤","釆","⾥","里","⾦","金","⾧","長","⾨","門","⾩","阜","⾪","隶","⾫","隹","⾬","雨","⾭","靑","⾮","非","⾯","面","⾰","革","⾱","韋","⾲","韭","⾳","音","⾴","頁","⾵","風","⾶","飛","⾷","食","⾸","首","⾹","香","⾺","馬","⾻","骨","⾼","高","⾽","髟","⾾","鬥","⾿","鬯","⿀","鬲","⿁","鬼","⿂","魚","⿃","鳥","⿄","鹵","⿅","鹿","⿆","麥","⿇","麻","⿈","黃","⿉","黍","⿊","黑","⿋","黹","⿌","黽","⿍","鼎","⿎","鼓","⿏","鼠","⿐","鼻","⿑","齊","⿒","齒","⿓","龍","⿔","龜","⿕","龠","〶","〒","〸","十","〹","卄","〺","卅","゛"," ゙","゜"," ゚","ㄱ","ᄀ","ㄲ","ᄁ","ㄳ","ᆪ","ㄴ","ᄂ","ㄵ","ᆬ","ㄶ","ᆭ","ㄷ","ᄃ","ㄸ","ᄄ","ㄹ","ᄅ","ㄺ","ᆰ","ㄻ","ᆱ","ㄼ","ᆲ","ㄽ","ᆳ","ㄾ","ᆴ","ㄿ","ᆵ","ㅀ","ᄚ","ㅁ","ᄆ","ㅂ","ᄇ","ㅃ","ᄈ","ㅄ","ᄡ","ㅅ","ᄉ","ㅆ","ᄊ","ㅇ","ᄋ","ㅈ","ᄌ","ㅉ","ᄍ","ㅊ","ᄎ","ㅋ","ᄏ","ㅌ","ᄐ","ㅍ","ᄑ","ㅎ","ᄒ","ㅏ","ᅡ","ㅐ","ᅢ","ㅑ","ᅣ","ㅒ","ᅤ","ㅓ","ᅥ","ㅔ","ᅦ","ㅕ","ᅧ","ㅖ","ᅨ","ㅗ","ᅩ","ㅘ","ᅪ","ㅙ","ᅫ","ㅚ","ᅬ","ㅛ","ᅭ","ㅜ","ᅮ","ㅝ","ᅯ","ㅞ","ᅰ","ㅟ","ᅱ","ㅠ","ᅲ","ㅡ","ᅳ","ㅢ","ᅴ","ㅣ","ᅵ","ㅤ","ᅠ","ㅥ","ᄔ","ㅦ","ᄕ","ㅧ","ᇇ","ㅨ","ᇈ","ㅩ","ᇌ","ㅪ","ᇎ","ㅫ","ᇓ","ㅬ","ᇗ","ㅭ","ᇙ","ㅮ","ᄜ","ㅯ","ᇝ","ㅰ","ᇟ","ㅱ","ᄝ","ㅲ","ᄞ","ㅳ","ᄠ","ㅴ","ᄢ","ㅵ","ᄣ","ㅶ","ᄧ","ㅷ","ᄩ","ㅸ","ᄫ","ㅹ","ᄬ","ㅺ","ᄭ","ㅻ","ᄮ","ㅼ","ᄯ","ㅽ","ᄲ","ㅾ","ᄶ","ㅿ","ᅀ","ㆀ","ᅇ","ㆁ","ᅌ","ㆂ","ᇱ","ㆃ","ᇲ","ㆄ","ᅗ","ㆅ","ᅘ","ㆆ","ᅙ","ㆇ","ᆄ","ㆈ","ᆅ","ㆉ","ᆈ","ㆊ","ᆑ","ㆋ","ᆒ","ㆌ","ᆔ","ㆍ","ᆞ","ㆎ","ᆡ","㈀","(ᄀ)","㈁","(ᄂ)","㈂","(ᄃ)","㈃","(ᄅ)","㈄","(ᄆ)","㈅","(ᄇ)","㈆","(ᄉ)","㈇","(ᄋ)","㈈","(ᄌ)","㈉","(ᄎ)","㈊","(ᄏ)","㈋","(ᄐ)","㈌","(ᄑ)","㈍","(ᄒ)","㈎","(가)","㈏","(나)","㈐","(다)","㈑","(라)","㈒","(마)","㈓","(바)","㈔","(사)","㈕","(아)","㈖","(자)","㈗","(차)","㈘","(카)","㈙","(타)","㈚","(파)","㈛","(하)","㈜","(주)","㈝","(오전)","㈞","(오후)","㈠","(一)","㈡","(二)","㈢","(三)","㈣","(四)","㈤","(五)","㈥","(六)","㈦","(七)","㈧","(八)","㈨","(九)","㈩","(十)","㈪","(月)","㈫","(火)","㈬","(水)","㈭","(木)","㈮","(金)","㈯","(土)","㈰","(日)","㈱","(株)","㈲","(有)","㈳","(社)","㈴","(名)","㈵","(特)","㈶","(財)","㈷","(祝)","㈸","(労)","㈹","(代)","㈺","(呼)","㈻","(学)","㈼","(監)","㈽","(企)","㈾","(資)","㈿","(協)","㉀","(祭)","㉁","(休)","㉂","(自)","㉃","(至)","㋀","1月","㋁","2月","㋂","3月","㋃","4月","㋄","5月","㋅","6月","㋆","7月","㋇","8月","㋈","9月","㋉","10月","㋊","11月","㋋","12月","㍘","0点","㍙","1点","㍚","2点","㍛","3点","㍜","4点","㍝","5点","㍞","6点","㍟","7点","㍠","8点","㍡","9点","㍢","10点","㍣","11点","㍤","12点","㍥","13点","㍦","14点","㍧","15点","㍨","16点","㍩","17点","㍪","18点","㍫","19点","㍬","20点","㍭","21点","㍮","22点","㍯","23点","㍰","24点","㏠","1日","㏡","2日","㏢","3日","㏣","4日","㏤","5日","㏥","6日","㏦","7日","㏧","8日","㏨","9日","㏩","10日","㏪","11日","㏫","12日","㏬","13日","㏭","14日","㏮","15日","㏯","16日","㏰","17日","㏱","18日","㏲","19日","㏳","20日","㏴","21日","㏵","22日","㏶","23日","㏷","24日","㏸","25日","㏹","26日","㏺","27日","㏻","28日","㏼","29日","㏽","30日","㏾","31日","ﬀ","ff","ﬁ","fi","ﬂ","fl","ﬃ","ffi","ﬄ","ffl","ﬅ","ſt","ﬆ","st","ﬓ","մն","ﬔ","մե","ﬕ","մի","ﬖ","վն","ﬗ","մխ","ﭏ","אל","ﭐ","ٱ","ﭑ","ٱ","ﭒ","ٻ","ﭓ","ٻ","ﭔ","ٻ","ﭕ","ٻ","ﭖ","پ","ﭗ","پ","ﭘ","پ","ﭙ","پ","ﭚ","ڀ","ﭛ","ڀ","ﭜ","ڀ","ﭝ","ڀ","ﭞ","ٺ","ﭟ","ٺ","ﭠ","ٺ","ﭡ","ٺ","ﭢ","ٿ","ﭣ","ٿ","ﭤ","ٿ","ﭥ","ٿ","ﭦ","ٹ","ﭧ","ٹ","ﭨ","ٹ","ﭩ","ٹ","ﭪ","ڤ","ﭫ","ڤ","ﭬ","ڤ","ﭭ","ڤ","ﭮ","ڦ","ﭯ","ڦ","ﭰ","ڦ","ﭱ","ڦ","ﭲ","ڄ","ﭳ","ڄ","ﭴ","ڄ","ﭵ","ڄ","ﭶ","ڃ","ﭷ","ڃ","ﭸ","ڃ","ﭹ","ڃ","ﭺ","چ","ﭻ","چ","ﭼ","چ","ﭽ","چ","ﭾ","ڇ","ﭿ","ڇ","ﮀ","ڇ","ﮁ","ڇ","ﮂ","ڍ","ﮃ","ڍ","ﮄ","ڌ","ﮅ","ڌ","ﮆ","ڎ","ﮇ","ڎ","ﮈ","ڈ","ﮉ","ڈ","ﮊ","ژ","ﮋ","ژ","ﮌ","ڑ","ﮍ","ڑ","ﮎ","ک","ﮏ","ک","ﮐ","ک","ﮑ","ک","ﮒ","گ","ﮓ","گ","ﮔ","گ","ﮕ","گ","ﮖ","ڳ","ﮗ","ڳ","ﮘ","ڳ","ﮙ","ڳ","ﮚ","ڱ","ﮛ","ڱ","ﮜ","ڱ","ﮝ","ڱ","ﮞ","ں","ﮟ","ں","ﮠ","ڻ","ﮡ","ڻ","ﮢ","ڻ","ﮣ","ڻ","ﮤ","ۀ","ﮥ","ۀ","ﮦ","ہ","ﮧ","ہ","ﮨ","ہ","ﮩ","ہ","ﮪ","ھ","ﮫ","ھ","ﮬ","ھ","ﮭ","ھ","ﮮ","ے","ﮯ","ے","ﮰ","ۓ","ﮱ","ۓ","ﯓ","ڭ","ﯔ","ڭ","ﯕ","ڭ","ﯖ","ڭ","ﯗ","ۇ","ﯘ","ۇ","ﯙ","ۆ","ﯚ","ۆ","ﯛ","ۈ","ﯜ","ۈ","ﯝ","ٷ","ﯞ","ۋ","ﯟ","ۋ","ﯠ","ۅ","ﯡ","ۅ","ﯢ","ۉ","ﯣ","ۉ","ﯤ","ې","ﯥ","ې","ﯦ","ې","ﯧ","ې","ﯨ","ى","ﯩ","ى","ﯪ","ئا","ﯫ","ئا","ﯬ","ئە","ﯭ","ئە","ﯮ","ئو","ﯯ","ئو","ﯰ","ئۇ","ﯱ","ئۇ","ﯲ","ئۆ","ﯳ","ئۆ","ﯴ","ئۈ","ﯵ","ئۈ","ﯶ","ئې","ﯷ","ئې","ﯸ","ئې","ﯹ","ئى","ﯺ","ئى","ﯻ","ئى","ﯼ","ی","ﯽ","ی","ﯾ","ی","ﯿ","ی","ﰀ","ئج","ﰁ","ئح","ﰂ","ئم","ﰃ","ئى","ﰄ","ئي","ﰅ","بج","ﰆ","بح","ﰇ","بخ","ﰈ","بم","ﰉ","بى","ﰊ","بي","ﰋ","تج","ﰌ","تح","ﰍ","تخ","ﰎ","تم","ﰏ","تى","ﰐ","تي","ﰑ","ثج","ﰒ","ثم","ﰓ","ثى","ﰔ","ثي","ﰕ","جح","ﰖ","جم","ﰗ","حج","ﰘ","حم","ﰙ","خج","ﰚ","خح","ﰛ","خم","ﰜ","سج","ﰝ","سح","ﰞ","سخ","ﰟ","سم","ﰠ","صح","ﰡ","صم","ﰢ","ضج","ﰣ","ضح","ﰤ","ضخ","ﰥ","ضم","ﰦ","طح","ﰧ","طم","ﰨ","ظم","ﰩ","عج","ﰪ","عم","ﰫ","غج","ﰬ","غم","ﰭ","فج","ﰮ","فح","ﰯ","فخ","ﰰ","فم","ﰱ","فى","ﰲ","في","ﰳ","قح","ﰴ","قم","ﰵ","قى","ﰶ","قي","ﰷ","كا","ﰸ","كج","ﰹ","كح","ﰺ","كخ","ﰻ","كل","ﰼ","كم","ﰽ","كى","ﰾ","كي","ﰿ","لج","ﱀ","لح","ﱁ","لخ","ﱂ","لم","ﱃ","لى","ﱄ","لي","ﱅ","مج","ﱆ","مح","ﱇ","مخ","ﱈ","مم","ﱉ","مى","ﱊ","مي","ﱋ","نج","ﱌ","نح","ﱍ","نخ","ﱎ","نم","ﱏ","نى","ﱐ","ني","ﱑ","هج","ﱒ","هم","ﱓ","هى","ﱔ","هي","ﱕ","يج","ﱖ","يح","ﱗ","يخ","ﱘ","يم","ﱙ","يى","ﱚ","يي","ﱛ","ذٰ","ﱜ","رٰ","ﱝ","ىٰ","ﱞ"," ٌّ","ﱟ"," ٍّ","ﱠ"," َّ","ﱡ"," ُّ","ﱢ"," ِّ","ﱣ"," ّٰ","ﱤ","ئر","ﱥ","ئز","ﱦ","ئم","ﱧ","ئن","ﱨ","ئى","ﱩ","ئي","ﱪ","بر","ﱫ","بز","ﱬ","بم","ﱭ","بن","ﱮ","بى","ﱯ","بي","ﱰ","تر","ﱱ","تز","ﱲ","تم","ﱳ","تن","ﱴ","تى","ﱵ","تي","ﱶ","ثر","ﱷ","ثز","ﱸ","ثم","ﱹ","ثن","ﱺ","ثى","ﱻ","ثي","ﱼ","فى","ﱽ","في","ﱾ","قى","ﱿ","قي","ﲀ","كا","ﲁ","كل","ﲂ","كم","ﲃ","كى","ﲄ","كي","ﲅ","لم","ﲆ","لى","ﲇ","لي","ﲈ","ما","ﲉ","مم","ﲊ","نر","ﲋ","نز","ﲌ","نم","ﲍ","نن","ﲎ","نى","ﲏ","ني","ﲐ","ىٰ","ﲑ","ير","ﲒ","يز","ﲓ","يم","ﲔ","ين","ﲕ","يى","ﲖ","يي","ﲗ","ئج","ﲘ","ئح","ﲙ","ئخ","ﲚ","ئم","ﲛ","ئه","ﲜ","بج","ﲝ","بح","ﲞ","بخ","ﲟ","بم","ﲠ","به","ﲡ","تج","ﲢ","تح","ﲣ","تخ","ﲤ","تم","ﲥ","ته","ﲦ","ثم","ﲧ","جح","ﲨ","جم","ﲩ","حج","ﲪ","حم","ﲫ","خج","ﲬ","خم","ﲭ","سج","ﲮ","سح","ﲯ","سخ","ﲰ","سم","ﲱ","صح","ﲲ","صخ","ﲳ","صم","ﲴ","ضج","ﲵ","ضح","ﲶ","ضخ","ﲷ","ضم","ﲸ","طح","ﲹ","ظم","ﲺ","عج","ﲻ","عم","ﲼ","غج","ﲽ","غم","ﲾ","فج","ﲿ","فح","ﳀ","فخ","ﳁ","فم","ﳂ","قح","ﳃ","قم","ﳄ","كج","ﳅ","كح","ﳆ","كخ","ﳇ","كل","ﳈ","كم","ﳉ","لج","ﳊ","لح","ﳋ","لخ","ﳌ","لم","ﳍ","له","ﳎ","مج","ﳏ","مح","ﳐ","مخ","ﳑ","مم","ﳒ","نج","ﳓ","نح","ﳔ","نخ","ﳕ","نم","ﳖ","نه","ﳗ","هج","ﳘ","هم","ﳙ","هٰ","ﳚ","يج","ﳛ","يح","ﳜ","يخ","ﳝ","يم","ﳞ","يه","ﳟ","ئم","ﳠ","ئه","ﳡ","بم","ﳢ","به","ﳣ","تم","ﳤ","ته","ﳥ","ثم","ﳦ","ثه","ﳧ","سم","ﳨ","سه","ﳩ","شم","ﳪ","شه","ﳫ","كل","ﳬ","كم","ﳭ","لم","ﳮ","نم","ﳯ","نه","ﳰ","يم","ﳱ","يه","ﳲ","ـَّ","ﳳ","ـُّ","ﳴ","ـِّ","ﳵ","طى","ﳶ","طي","ﳷ","عى","ﳸ","عي","ﳹ","غى","ﳺ","غي","ﳻ","سى","ﳼ","سي","ﳽ","شى","ﳾ","شي","ﳿ","حى","ﴀ","حي","ﴁ","جى","ﴂ","جي","ﴃ","خى","ﴄ","خي","ﴅ","صى","ﴆ","صي","ﴇ","ضى","ﴈ","ضي","ﴉ","شج","ﴊ","شح","ﴋ","شخ","ﴌ","شم","ﴍ","شر","ﴎ","سر","ﴏ","صر","ﴐ","ضر","ﴑ","طى","ﴒ","طي","ﴓ","عى","ﴔ","عي","ﴕ","غى","ﴖ","غي","ﴗ","سى","ﴘ","سي","ﴙ","شى","ﴚ","شي","ﴛ","حى","ﴜ","حي","ﴝ","جى","ﴞ","جي","ﴟ","خى","ﴠ","خي","ﴡ","صى","ﴢ","صي","ﴣ","ضى","ﴤ","ضي","ﴥ","شج","ﴦ","شح","ﴧ","شخ","ﴨ","شم","ﴩ","شر","ﴪ","سر","ﴫ","صر","ﴬ","ضر","ﴭ","شج","ﴮ","شح","ﴯ","شخ","ﴰ","شم","ﴱ","سه","ﴲ","شه","ﴳ","طم","ﴴ","سج","ﴵ","سح","ﴶ","سخ","ﴷ","شج","ﴸ","شح","ﴹ","شخ","ﴺ","طم","ﴻ","ظم","ﴼ","اً","ﴽ","اً","ﵐ","تجم","ﵑ","تحج","ﵒ","تحج","ﵓ","تحم","ﵔ","تخم","ﵕ","تمج","ﵖ","تمح","ﵗ","تمخ","ﵘ","جمح","ﵙ","جمح","ﵚ","حمي","ﵛ","حمى","ﵜ","سحج","ﵝ","سجح","ﵞ","سجى","ﵟ","سمح","ﵠ","سمح","ﵡ","سمج","ﵢ","سمم","ﵣ","سمم","ﵤ","صحح","ﵥ","صحح","ﵦ","صمم","ﵧ","شحم","ﵨ","شحم","ﵩ","شجي","ﵪ","شمخ","ﵫ","شمخ","ﵬ","شمم","ﵭ","شمم","ﵮ","ضحى","ﵯ","ضخم","ﵰ","ضخم","ﵱ","طمح","ﵲ","طمح","ﵳ","طمم","ﵴ","طمي","ﵵ","عجم","ﵶ","عمم","ﵷ","عمم","ﵸ","عمى","ﵹ","غمم","ﵺ","غمي","ﵻ","غمى","ﵼ","فخم","ﵽ","فخم","ﵾ","قمح","ﵿ","قمم","ﶀ","لحم","ﶁ","لحي","ﶂ","لحى","ﶃ","لجج","ﶄ","لجج","ﶅ","لخم","ﶆ","لخم","ﶇ","لمح","ﶈ","لمح","ﶉ","محج","ﶊ","محم","ﶋ","محي","ﶌ","مجح","ﶍ","مجم","ﶎ","مخج","ﶏ","مخم","ﶒ","مجخ","ﶓ","همج","ﶔ","همم","ﶕ","نحم","ﶖ","نحى","ﶗ","نجم","ﶘ","نجم","ﶙ","نجى","ﶚ","نمي","ﶛ","نمى","ﶜ","يمم","ﶝ","يمم","ﶞ","بخي","ﶟ","تجي","ﶠ","تجى","ﶡ","تخي","ﶢ","تخى","ﶣ","تمي","ﶤ","تمى","ﶥ","جمي","ﶦ","جحى","ﶧ","جمى","ﶨ","سخى","ﶩ","صحي","ﶪ","شحي","ﶫ","ضحي","ﶬ","لجي","ﶭ","لمي","ﶮ","يحي","ﶯ","يجي","ﶰ","يمي","ﶱ","ممي","ﶲ","قمي","ﶳ","نحي","ﶴ","قمح","ﶵ","لحم","ﶶ","عمي","ﶷ","كمي","ﶸ","نجح","ﶹ","مخي","ﶺ","لجم","ﶻ","كمم","ﶼ","لجم","ﶽ","نجح","ﶾ","جحي","ﶿ","حجي","ﷀ","مجي","ﷁ","فمي","ﷂ","بحي","ﷃ","كمم","ﷄ","عجم","ﷅ","صمم","ﷆ","سخي","ﷇ","نجي","﹉","‾","﹊","‾","﹋","‾","﹌","‾","﹍","_","﹎","_","﹏","_","ﺀ","ء","ﺁ","آ","ﺂ","آ","ﺃ","أ","ﺄ","أ","ﺅ","ؤ","ﺆ","ؤ","ﺇ","إ","ﺈ","إ","ﺉ","ئ","ﺊ","ئ","ﺋ","ئ","ﺌ","ئ","ﺍ","ا","ﺎ","ا","ﺏ","ب","ﺐ","ب","ﺑ","ب","ﺒ","ب","ﺓ","ة","ﺔ","ة","ﺕ","ت","ﺖ","ت","ﺗ","ت","ﺘ","ت","ﺙ","ث","ﺚ","ث","ﺛ","ث","ﺜ","ث","ﺝ","ج","ﺞ","ج","ﺟ","ج","ﺠ","ج","ﺡ","ح","ﺢ","ح","ﺣ","ح","ﺤ","ح","ﺥ","خ","ﺦ","خ","ﺧ","خ","ﺨ","خ","ﺩ","د","ﺪ","د","ﺫ","ذ","ﺬ","ذ","ﺭ","ر","ﺮ","ر","ﺯ","ز","ﺰ","ز","ﺱ","س","ﺲ","س","ﺳ","س","ﺴ","س","ﺵ","ش","ﺶ","ش","ﺷ","ش","ﺸ","ش","ﺹ","ص","ﺺ","ص","ﺻ","ص","ﺼ","ص","ﺽ","ض","ﺾ","ض","ﺿ","ض","ﻀ","ض","ﻁ","ط","ﻂ","ط","ﻃ","ط","ﻄ","ط","ﻅ","ظ","ﻆ","ظ","ﻇ","ظ","ﻈ","ظ","ﻉ","ع","ﻊ","ع","ﻋ","ع","ﻌ","ع","ﻍ","غ","ﻎ","غ","ﻏ","غ","ﻐ","غ","ﻑ","ف","ﻒ","ف","ﻓ","ف","ﻔ","ف","ﻕ","ق","ﻖ","ق","ﻗ","ق","ﻘ","ق","ﻙ","ك","ﻚ","ك","ﻛ","ك","ﻜ","ك","ﻝ","ل","ﻞ","ل","ﻟ","ل","ﻠ","ل","ﻡ","م","ﻢ","م","ﻣ","م","ﻤ","م","ﻥ","ن","ﻦ","ن","ﻧ","ن","ﻨ","ن","ﻩ","ه","ﻪ","ه","ﻫ","ه","ﻬ","ه","ﻭ","و","ﻮ","و","ﻯ","ى","ﻰ","ى","ﻱ","ي","ﻲ","ي","ﻳ","ي","ﻴ","ي","ﻵ","لآ","ﻶ","لآ","ﻷ","لأ","ﻸ","لأ","ﻹ","لإ","ﻺ","لإ","ﻻ","لا","ﻼ","لا"]}));function h(t){const e=t.length;if(e<=1||!function(t){let e=a[13];return t>=e.begin&&t<e.end||(e=a[11],t>=e.begin&&t<e.end)}(t.charCodeAt(0)))return t;const i=[];for(let n=e-1;n>=0;n--)i.push(t[n]);return i.join("")}const u=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),p=new Map;function d(t){const e=p.get(t);if(e)return e;const i=t.match(u),n={isWhitespace:!(!i||!i[1]),isZeroWidthDiacritic:!(!i||!i[2]),isInvisibleFormatMark:!(!i||!i[3])};return p.set(t,n),n}function f(){p.clear()}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MarkupAnnotation=e.AnnotationFactory=e.AnnotationBorderStyle=e.Annotation=void 0,e.getQuadPoints=b;var n=i(2),r=i(8),s=i(23),o=i(5),a=i(9),l=i(60),c=i(65),h=i(24),u=i(68),p=i(72),d=i(62),f=i(10),g=i(73),m=i(76);const y=1.35;function v(t,e=new Uint8ClampedArray(3)){if(!Array.isArray(t))return e;const i=e||new Uint8ClampedArray(3);switch(t.length){case 0:return null;case 1:return h.ColorSpace.singletons.gray.getRgbItem(t,0,i,0),i;case 3:return h.ColorSpace.singletons.rgb.getRgbItem(t,0,i,0),i;case 4:return h.ColorSpace.singletons.cmyk.getRgbItem(t,0,i,0),i;default:return e}}function b(t,e){if(!t.has("QuadPoints"))return null;const i=t.getArray("QuadPoints");if(!Array.isArray(i)||0===i.length||i.length%8>0)return null;const n=[];for(let t=0,r=i.length/8;t<r;t++){n.push([]);for(let r=8*t,s=8*t+8;r<s;r+=2){const s=i[r],o=i[r+1];if(null!==e&&(s<e[0]||s>e[2]||o<e[1]||o>e[3]))return null;n[t].push({x:s,y:o})}}return n.map((t=>{const[e,i,n,r]=t.reduce((([t,e,i,n],r)=>[Math.min(t,r.x),Math.max(e,r.x),Math.min(i,r.y),Math.max(n,r.y)]),[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]);return[{x:e,y:r},{x:i,y:r},{x:e,y:n},{x:i,y:n}]}))}function w(t,e,i){const[r,s,o,a]=n.Util.getAxialAlignedBoundingBox(e,i);if(r===o||s===a)return[1,0,0,1,t[0],t[1]];const l=(t[2]-t[0])/(o-r),c=(t[3]-t[1])/(a-s);return[l,0,0,c,t[0]-r*l,t[1]-s*c]}e.AnnotationFactory=class{static create(t,e,i,n,r){return Promise.all([i.ensureCatalog("acroForm"),i.ensureCatalog("baseUrl"),i.ensureDoc("xfaDatasets"),r?this._getPageIndex(t,e,i):-1]).then((([s,o,a,l])=>i.ensure(this,"_create",[t,e,i,n,s,a,r,l])))}static _create(t,e,i,s,a,l,c,h=-1){const u=t.fetchIfRef(e);if(!(u instanceof o.Dict))return;const p=e instanceof o.Ref?e.toString():`annot_${s.createObjId()}`;let d=u.get("Subtype");d=d instanceof o.Name?d.name:null;const f={xref:t,ref:e,dict:u,subtype:d,id:p,pdfManager:i,acroForm:a instanceof o.Dict?a:o.Dict.empty,xfaDatasets:l,collectFields:c,pageIndex:h};switch(d){case"Link":return new M(f);case"Text":return new E(f);case"Widget":let t=(0,r.getInheritableProperty)({dict:u,key:"FT"});switch(t=t instanceof o.Name?t.name:null,t){case"Tx":return new A(f);case"Btn":return new _(f);case"Ch":return new T(f);case"Sig":return new O(f)}return(0,n.warn)(`Unimplemented widget field type "${t}", falling back to base field type.`),new C(f);case"Popup":return new P(f);case"FreeText":return new I(f);case"Line":return new F(f);case"Square":return new D(f);case"Circle":return new R(f);case"PolyLine":return new L(f);case"Polygon":return new N(f);case"Caret":return new B(f);case"Ink":return new j(f);case"Highlight":return new z(f);case"Underline":return new U(f);case"Squiggly":return new $(f);case"StrikeOut":return new H(f);case"Stamp":return new V(f);case"FileAttachment":return new q(f);default:return c||(d?(0,n.warn)(`Unimplemented annotation type "${d}", falling back to base annotation.`):(0,n.warn)("Annotation is missing the required /Subtype.")),new x(f)}}static async _getPageIndex(t,e,i){try{const n=await t.fetchIfRefAsync(e);if(!(n instanceof o.Dict))return-1;const r=n.getRaw("P");return r instanceof o.Ref?await i.ensureCatalog("getPageIndex",[r]):-1}catch(t){return(0,n.warn)(`_getPageIndex: "${t}".`),-1}}};class x{constructor(t){const e=t.dict;if(this.setTitle(e.get("T")),this.setContents(e.get("Contents")),this.setModificationDate(e.get("M")),this.setFlags(e.get("F")),this.setRectangle(e.getArray("Rect")),this.setColor(e.getArray("C")),this.setBorderStyle(e),this.setAppearance(e),this.setBorderAndBackgroundColors(e.get("MK")),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,contentsObj:this._contents,hasAppearance:!!this.appearance,id:t.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:t.subtype,hasOwnCanvas:!1},t.collectFields){const i=e.get("Kids");if(Array.isArray(i)){const t=[];for(const e of i)e instanceof o.Ref&&t.push(e.toString());0!==t.length&&(this.data.kidIds=t)}this.data.actions=(0,r.collectActions)(t.xref,e,n.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(e),this.data.pageIndex=t.pageIndex}this._fallbackFontDict=null}_hasFlag(t,e){return!!(t&e)}_isViewable(t){return!this._hasFlag(t,n.AnnotationFlag.INVISIBLE)&&!this._hasFlag(t,n.AnnotationFlag.NOVIEW)}_isPrintable(t){return this._hasFlag(t,n.AnnotationFlag.PRINT)&&!this._hasFlag(t,n.AnnotationFlag.INVISIBLE)}mustBeViewed(t){const e=t&&t.get(this.data.id);return e&&void 0!==e.hidden?!e.hidden:this.viewable&&!this._hasFlag(this.flags,n.AnnotationFlag.HIDDEN)}mustBePrinted(t){const e=t&&t.get(this.data.id);return e&&void 0!==e.print?e.print:this.printable}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&0!==this.flags&&this._isPrintable(this.flags)}_parseStringHelper(t){const e="string"==typeof t?(0,n.stringToPDFString)(t):"";return{str:e,dir:e&&"rtl"===(0,l.bidi)(e).dir?"rtl":"ltr"}}setTitle(t){this._title=this._parseStringHelper(t)}setContents(t){this._contents=this._parseStringHelper(t)}setModificationDate(t){this.modificationDate="string"==typeof t?t:null}setFlags(t){this.flags=Number.isInteger(t)&&t>0?t:0}hasFlag(t){return this._hasFlag(this.flags,t)}setRectangle(t){Array.isArray(t)&&4===t.length?this.rectangle=n.Util.normalizeRect(t):this.rectangle=[0,0,0,0]}setColor(t){this.color=v(t)}setLineEndings(t){if(this.lineEndings=["None","None"],Array.isArray(t)&&2===t.length)for(let e=0;e<2;e++){const i=t[e];if(i instanceof o.Name)switch(i.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[e]=i.name;continue}(0,n.warn)(`Ignoring invalid lineEnding: ${i}`)}}setBorderAndBackgroundColors(t){t instanceof o.Dict?(this.borderColor=v(t.getArray("BC"),null),this.backgroundColor=v(t.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(t){if(this.borderStyle=new S,t instanceof o.Dict)if(t.has("BS")){const e=t.get("BS"),i=e.get("Type");i&&!(0,o.isName)(i,"Border")||(this.borderStyle.setWidth(e.get("W"),this.rectangle),this.borderStyle.setStyle(e.get("S")),this.borderStyle.setDashArray(e.getArray("D")))}else if(t.has("Border")){const e=t.getArray("Border");Array.isArray(e)&&e.length>=3&&(this.borderStyle.setHorizontalCornerRadius(e[0]),this.borderStyle.setVerticalCornerRadius(e[1]),this.borderStyle.setWidth(e[2],this.rectangle),4===e.length&&this.borderStyle.setDashArray(e[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(t){this.appearance=null;const e=t.get("AP");if(!(e instanceof o.Dict))return;const i=e.get("N");if(i instanceof a.BaseStream)return void(this.appearance=i);if(!(i instanceof o.Dict))return;const n=t.get("AS");n instanceof o.Name&&i.has(n.name)&&(this.appearance=i.get(n.name))}loadResources(t,e){return e.dict.getAsync("Resources").then((e=>{if(e)return new p.ObjectLoader(e,t,e.xref).load().then((function(){return e}))}))}getOperatorList(t,e,i,r,s){const a=this.data;let l=this.appearance;const c=a.hasOwnCanvas&&i&n.RenderingIntentFlag.DISPLAY;if(!l){if(!c)return Promise.resolve(new d.OperatorList);l=new f.StringStream(""),l.dict=new o.Dict}const h=l.dict,u=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],l),p=h.getArray("BBox")||[0,0,1,1],g=h.getArray("Matrix")||[1,0,0,1,0,0],m=w(a.rect,p,g);return u.then((i=>{const r=new d.OperatorList;return r.addOp(n.OPS.beginAnnotation,[a.id,a.rect,m,g,c]),t.getOperatorList({stream:l,task:e,resources:i,operatorList:r,fallbackFontDict:this._fallbackFontDict}).then((()=>(r.addOp(n.OPS.endAnnotation,[]),this.reset(),r)))}))}async save(t,e,i){return null}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex}:null}reset(){for(const t of this._streams)t.reset()}_constructFieldName(t){if(!t.has("T")&&!t.has("Parent"))return(0,n.warn)("Unknown field name, falling back to empty field name."),"";if(!t.has("Parent"))return(0,n.stringToPDFString)(t.get("T"));const e=[];t.has("T")&&e.unshift((0,n.stringToPDFString)(t.get("T")));let i=t;const r=new o.RefSet;for(t.objId&&r.put(t.objId);i.has("Parent")&&(i=i.get("Parent"),i instanceof o.Dict&&(!i.objId||!r.has(i.objId)));)i.objId&&r.put(i.objId),i.has("T")&&e.unshift((0,n.stringToPDFString)(i.get("T")));return e.join(".")}}e.Annotation=x;class S{constructor(){this.width=1,this.style=n.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(t,e=[0,0,0,0]){if(t instanceof o.Name)this.width=0;else if("number"==typeof t){if(t>0){const i=(e[2]-e[0])/2,r=(e[3]-e[1])/2;i>0&&r>0&&(t>i||t>r)&&((0,n.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${t}`),t=1)}this.width=t}}setStyle(t){if(t instanceof o.Name)switch(t.name){case"S":this.style=n.AnnotationBorderStyleType.SOLID;break;case"D":this.style=n.AnnotationBorderStyleType.DASHED;break;case"B":this.style=n.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=n.AnnotationBorderStyleType.INSET;break;case"U":this.style=n.AnnotationBorderStyleType.UNDERLINE}}setDashArray(t,e=!1){if(Array.isArray(t)&&t.length>0){let i=!0,n=!0;for(const e of t){if(!(+e>=0)){i=!1;break}e>0&&(n=!1)}i&&!n?(this.dashArray=t,e&&this.setStyle(o.Name.get("D"))):this.width=0}else t&&(this.width=0)}setHorizontalCornerRadius(t){Number.isInteger(t)&&(this.horizontalCornerRadius=t)}setVerticalCornerRadius(t){Number.isInteger(t)&&(this.verticalCornerRadius=t)}}e.AnnotationBorderStyle=S;class k extends x{constructor(t){super(t);const e=t.dict;if(e.has("IRT")){const t=e.getRaw("IRT");this.data.inReplyTo=t instanceof o.Ref?t.toString():null;const i=e.get("RT");this.data.replyType=i instanceof o.Name?i.name:n.AnnotationReplyType.REPLY}if(this.data.replyType===n.AnnotationReplyType.GROUP){const t=e.get("IRT");this.setTitle(t.get("T")),this.data.titleObj=this._title,this.setContents(t.get("Contents")),this.data.contentsObj=this._contents,t.has("CreationDate")?(this.setCreationDate(t.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,t.has("M")?(this.setModificationDate(t.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=t.has("Popup"),t.has("C")?(this.setColor(t.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(e.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=e.has("Popup"),e.has("C")||(this.data.color=null);e.has("RC")&&(this.data.richText=m.XFAFactory.getRichTextAsHtml(e.get("RC")))}setCreationDate(t){this.creationDate="string"==typeof t?t:null}_setDefaultAppearance({xref:t,extra:e,strokeColor:i,fillColor:n,blendMode:r,strokeAlpha:s,fillAlpha:a,pointsCallback:l}){let c=Number.MAX_VALUE,h=Number.MAX_VALUE,u=Number.MIN_VALUE,p=Number.MIN_VALUE;const d=["q"];e&&d.push(e),i&&d.push(`${i[0]} ${i[1]} ${i[2]} RG`),n&&d.push(`${n[0]} ${n[1]} ${n[2]} rg`);let g=this.data.quadPoints;g||(g=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const t of g){const[e,i,n,r]=l(d,t);c=Math.min(c,e),u=Math.max(u,i),h=Math.min(h,n),p=Math.max(p,r)}d.push("Q");const m=new o.Dict(t),y=new o.Dict(t);y.set("Subtype",o.Name.get("Form"));const v=new f.StringStream(d.join(" "));v.dict=y,m.set("Fm0",v);const b=new o.Dict(t);r&&b.set("BM",o.Name.get(r)),"number"==typeof s&&b.set("CA",s),"number"==typeof a&&b.set("ca",a);const w=new o.Dict(t);w.set("GS0",b);const x=new o.Dict(t);x.set("ExtGState",w),x.set("XObject",m);const S=new o.Dict(t);S.set("Resources",x);const k=this.data.rect=[c,h,u,p];S.set("BBox",k),this.appearance=new f.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=S,this._streams.push(this.appearance,v)}}e.MarkupAnnotation=k;class C extends x{constructor(t){super(t);const e=t.dict,i=this.data;this.ref=t.ref,i.annotationType=n.AnnotationType.WIDGET,void 0===i.fieldName&&(i.fieldName=this._constructFieldName(e)),void 0===i.actions&&(i.actions=(0,r.collectActions)(t.xref,e,n.AnnotationActionEventType));let a=(0,r.getInheritableProperty)({dict:e,key:"V",getArray:!0});i.fieldValue=this._decodeFormValue(a);const l=(0,r.getInheritableProperty)({dict:e,key:"DV",getArray:!0});if(i.defaultFieldValue=this._decodeFormValue(l),void 0===a&&t.xfaDatasets){const e=this._title.str;e&&(this._hasValueFromXFA=!0,i.fieldValue=a=t.xfaDatasets.getValue(e))}void 0===a&&null!==i.defaultFieldValue&&(i.fieldValue=i.defaultFieldValue),i.alternativeText=(0,n.stringToPDFString)(e.get("TU")||"");const c=(0,r.getInheritableProperty)({dict:e,key:"DA"})||t.acroForm.get("DA");this._defaultAppearance="string"==typeof c?c:"",i.defaultAppearanceData=(0,s.parseDefaultAppearance)(this._defaultAppearance);const h=(0,r.getInheritableProperty)({dict:e,key:"FT"});i.fieldType=h instanceof o.Name?h.name:null;const u=(0,r.getInheritableProperty)({dict:e,key:"DR"}),p=t.acroForm.get("DR"),d=this.appearance&&this.appearance.dict.get("Resources");this._fieldResources={localResources:u,acroFormResources:p,appearanceResources:d,mergedResources:o.Dict.merge({xref:t.xref,dictArray:[u,d,p],mergeSubDicts:!0})},i.fieldFlags=(0,r.getInheritableProperty)({dict:e,key:"Ff"}),(!Number.isInteger(i.fieldFlags)||i.fieldFlags<0)&&(i.fieldFlags=0),i.readOnly=this.hasFieldFlag(n.AnnotationFieldFlag.READONLY),i.hidden=this._hasFlag(i.annotationFlags,n.AnnotationFlag.HIDDEN)}_decodeFormValue(t){return Array.isArray(t)?t.filter((t=>"string"==typeof t)).map((t=>(0,n.stringToPDFString)(t))):t instanceof o.Name?(0,n.stringToPDFString)(t.name):"string"==typeof t?(0,n.stringToPDFString)(t):null}hasFieldFlag(t){return!!(this.data.fieldFlags&t)}getOperatorList(t,e,i,r,s){return!r||this instanceof O?this._hasText?this._getAppearance(t,e,s).then((o=>{if(this.appearance&&null===o)return super.getOperatorList(t,e,i,r,s);const a=new d.OperatorList;if(!this._defaultAppearance||null===o)return a;const l=[1,0,0,1,0,0],c=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],h=w(this.data.rect,c,l);a.addOp(n.OPS.beginAnnotation,[this.data.id,this.data.rect,h,l]);const u=new f.StringStream(o);return t.getOperatorList({stream:u,task:e,resources:this._fieldResources.mergedResources,operatorList:a}).then((function(){return a.addOp(n.OPS.endAnnotation,[]),a}))})):super.getOperatorList(t,e,i,r,s):Promise.resolve(new d.OperatorList)}async save(t,e,i){const r=i?i.get(this.data.id):void 0;let s=r&&r.value;if(s===this.data.fieldValue||void 0===s){if(!this._hasValueFromXFA)return null;s=s||this.data.fieldValue}if(!this._hasValueFromXFA&&Array.isArray(s)&&Array.isArray(this.data.fieldValue)&&s.length===this.data.fieldValue.length&&s.every(((t,e)=>t===this.data.fieldValue[e])))return null;let a=await this._getAppearance(t,e,i);if(null===a)return null;const{xref:l}=t,c=l.fetchIfRef(this.ref);if(!(c instanceof o.Dict))return null;const h=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],u={path:(0,n.stringToPDFString)(c.get("T")||""),value:s},p=l.getNewRef(),d=new o.Dict(l);d.set("N",p);const f=l.encrypt;let m=null,y=null;f&&(m=f.createCipherTransform(this.ref.num,this.ref.gen),y=f.createCipherTransform(p.num,p.gen),a=y.encryptString(a));const v=t=>(0,n.isAscii)(t)?t:(0,n.stringToUTF16BEString)(t);c.set("V",Array.isArray(s)?s.map(v):v(s)),c.set("AP",d),c.set("M",`D:${(0,n.getModificationDate)()}`);const b=new o.Dict(l);b.set("Length",a.length),b.set("Subtype",o.Name.get("Form")),b.set("Resources",this._getSaveFieldResources(l)),b.set("BBox",h);const w=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,g.writeDict)(c,w,m),w.push("\nendobj\n");const x=[`${p.num} ${p.gen} obj\n`];return(0,g.writeDict)(b,x,y),x.push(" stream\n",a,"\nendstream\nendobj\n"),[{ref:this.ref,data:w.join(""),xfa:u},{ref:p,data:x.join(""),xfa:null}]}async _getAppearance(t,e,i){if(this.hasFieldFlag(n.AnnotationFieldFlag.PASSWORD))return null;const r=i?i.get(this.data.id):void 0;let o=r&&(r.formattedValue||r.value);if(void 0===o){if(!this._hasValueFromXFA||this.appearance)return null;if(o=this.data.fieldValue,!o)return""}if((0,n.assert)("string"==typeof o,"Expected `value` to be a string."),o=o.trim(),""===o)return"";let a=-1;this.data.multiLine&&(a=o.split(/\r\n|\r|\n/).length);const l=this.data.rect[3]-this.data.rect[1],c=this.data.rect[2]-this.data.rect[0];this._defaultAppearance||(this.data.defaultAppearanceData=(0,s.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const h=await this._getFontData(t,e),[u,p]=this._computeFontSize(l-2,c-4,o,h,a);let d=h.descent;isNaN(d)&&(d=0);const f=2+Math.abs(d)*p,g=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(u,o,h,p,c,l,g,2,f);const m=h.encodeString(o).join("");return this.data.comb?this._getCombAppearance(u,h,m,c,2,f):0===g||g>2?"/Tx BMC q BT "+u+` 1 0 0 1 2 ${f} Tm (${(0,n.escapeString)(m)}) Tj ET Q EMC`:"/Tx BMC q BT "+u+` 1 0 0 1 0 0 Tm ${this._renderText(m,h,p,c,g,2,f)} ET Q EMC`}async _getFontData(t,e){const i=new d.OperatorList,n={font:null,clone(){return this}},{fontName:r,fontSize:s}=this.data.defaultAppearanceData;return await t.handleSetFont(this._fieldResources.mergedResources,[r&&o.Name.get(r),s],null,i,e,n,null),n.font}_getTextWidth(t,e){return e.charsToGlyphs(t).reduce(((t,e)=>t+e.width),0)/1e3}_computeFontSize(t,e,i,n,r){let{fontSize:o}=this.data.defaultAppearanceData;if(!o){const a=t=>Math.floor(100*t)/100;if(-1===r){const r=this._getTextWidth(i,n);o=a(Math.min(t/y,e/r))}else{const s=i.split(/\r\n?|\n/),l=[];for(const t of s){const e=n.encodeString(t).join(""),i=n.charsToGlyphs(e),r=n.getCharPositions(e);l.push({line:e,glyphs:i,positions:r})}const c=i=>{let r=0;for(const s of l)if(r+=this._splitLine(null,n,i,e,s).length*i,r>t)return!0;return!1};o=12;let h=o*y,u=Math.round(t/h);for(u=Math.max(u,r);h=t/u,o=a(h/y),c(o);)u++}const{fontName:l,fontColor:c}=this.data.defaultAppearanceData;this._defaultAppearance=(0,s.createDefaultAppearance)({fontSize:o,fontName:l,fontColor:c})}return[this._defaultAppearance,o]}_renderText(t,e,i,r,s,o,a){let l;return l=1===s?(r-this._getTextWidth(t,e)*i)/2:2===s?r-this._getTextWidth(t,e)*i-o:o,l=l.toFixed(2),`${l} ${a=a.toFixed(2)} Td (${(0,n.escapeString)(t)}) Tj`}_getSaveFieldResources(t){const{localResources:e,appearanceResources:i,acroFormResources:n}=this._fieldResources,r=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName;if(!r)return e||o.Dict.empty;for(const t of[e,i])if(t instanceof o.Dict){const e=t.get("Font");if(e instanceof o.Dict&&e.has(r))return t}if(n instanceof o.Dict){const i=n.get("Font");if(i instanceof o.Dict&&i.has(r)){const n=new o.Dict(t);n.set(r,i.getRaw(r));const s=new o.Dict(t);return s.set("Font",n),o.Dict.merge({xref:t,dictArray:[s,e],mergeSubDicts:!0})}}return e||o.Dict.empty}getFieldObject(){return null}}class A extends C{constructor(t){super(t),this._hasText=!0;const e=t.dict;"string"!=typeof this.data.fieldValue&&(this.data.fieldValue="");let i=(0,r.getInheritableProperty)({dict:e,key:"Q"});(!Number.isInteger(i)||i<0||i>2)&&(i=null),this.data.textAlignment=i;let s=(0,r.getInheritableProperty)({dict:e,key:"MaxLen"});(!Number.isInteger(s)||s<0)&&(s=null),this.data.maxLen=s,this.data.multiLine=this.hasFieldFlag(n.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(n.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(n.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(n.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(n.AnnotationFieldFlag.FILESELECT)&&null!==this.data.maxLen}_getCombAppearance(t,e,i,r,s,o){const a=(r/this.data.maxLen).toFixed(2),l=[],c=e.getCharPositions(i);for(const[t,e]of c)l.push(`(${(0,n.escapeString)(i.substring(t,e))}) Tj`);return"/Tx BMC q BT "+t+` 1 0 0 1 ${s} ${o} Tm ${l.join(` ${a} 0 Td `)} ET Q EMC`}_getMultilineAppearance(t,e,i,n,r,s,o,a,l){const c=e.split(/\r\n?|\n/),h=[],u=r-2*a;for(const t of c){const e=this._splitLine(t,i,n,u);for(const t of e){const e=0===h.length?a:0;h.push(this._renderText(t,i,n,r,o,e,-n))}}return"/Tx BMC q BT "+t+` 1 0 0 1 0 ${s} Tm ${h.join("\n")} ET Q EMC`}_splitLine(t,e,i,n,r={}){t=r.line||e.encodeString(t).join("");const s=r.glyphs||e.charsToGlyphs(t);if(s.length<=1)return[t];const o=r.positions||e.getCharPositions(t),a=i/1e3,l=[];let c=-1,h=-1,u=-1,p=0,d=0;for(let e=0,i=s.length;e<i;e++){const[i,r]=o[e],f=s[e],g=f.width*a;" "===f.unicode?d+g>n?(l.push(t.substring(p,i)),p=i,d=g,c=-1,u=-1):(d+=g,c=i,h=r,u=e):d+g>n?-1!==c?(l.push(t.substring(p,h)),p=h,e=u+1,c=-1,d=0):(l.push(t.substring(p,i)),p=i,d=g):d+=g}return p<t.length&&l.push(t.substring(p,t.length)),l}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(n.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"text"}}}class _ extends C{constructor(t){super(t),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(n.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(n.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(n.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(n.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(n.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(t):this.data.radioButton?this._processRadioButton(t):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(t)):(0,n.warn)("Invalid field flags for button widget annotation")}async getOperatorList(t,e,i,n,r){if(this.data.pushButton)return super.getOperatorList(t,e,i,!1,r);let s=null;if(r){const t=r.get(this.data.id);s=t?t.value:null}if(null===s){if(this.appearance)return super.getOperatorList(t,e,i,n,r);s=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue}const o=s?this.checkedAppearance:this.uncheckedAppearance;if(o){const s=this.appearance;this.appearance=o;const a=super.getOperatorList(t,e,i,n,r);return this.appearance=s,a}return new d.OperatorList}async save(t,e,i){return this.data.checkBox?this._saveCheckbox(t,e,i):this.data.radioButton?this._saveRadioButton(t,e,i):null}async _saveCheckbox(t,e,i){if(!i)return null;const r=i.get(this.data.id),s=r&&r.value;if(void 0===s)return null;if(this.data.fieldValue===this.data.exportValue===s)return null;const a=t.xref.fetchIfRef(this.ref);if(!(a instanceof o.Dict))return null;const l={path:(0,n.stringToPDFString)(a.get("T")||""),value:s?this.data.exportValue:""},c=o.Name.get(s?this.data.exportValue:"Off");a.set("V",c),a.set("AS",c),a.set("M",`D:${(0,n.getModificationDate)()}`);const h=t.xref.encrypt;let u=null;h&&(u=h.createCipherTransform(this.ref.num,this.ref.gen));const p=[`${this.ref.num} ${this.ref.gen} obj\n`];return(0,g.writeDict)(a,p,u),p.push("\nendobj\n"),[{ref:this.ref,data:p.join(""),xfa:l}]}async _saveRadioButton(t,e,i){if(!i)return null;const r=i.get(this.data.id),s=r&&r.value;if(void 0===s)return null;if(this.data.fieldValue===this.data.buttonValue===s)return null;const a=t.xref.fetchIfRef(this.ref);if(!(a instanceof o.Dict))return null;const l={path:(0,n.stringToPDFString)(a.get("T")||""),value:s?this.data.buttonValue:""},c=o.Name.get(s?this.data.buttonValue:"Off");let h=null;const u=t.xref.encrypt;if(s)if(this.parent instanceof o.Ref){const e=t.xref.fetch(this.parent);let i=null;u&&(i=u.createCipherTransform(this.parent.num,this.parent.gen)),e.set("V",c),h=[`${this.parent.num} ${this.parent.gen} obj\n`],(0,g.writeDict)(e,h,i),h.push("\nendobj\n")}else this.parent instanceof o.Dict&&this.parent.set("V",c);a.set("AS",c),a.set("M",`D:${(0,n.getModificationDate)()}`);let p=null;u&&(p=u.createCipherTransform(this.ref.num,this.ref.gen));const d=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,g.writeDict)(a,d,p),d.push("\nendobj\n");const f=[{ref:this.ref,data:d.join(""),xfa:l}];return null!==h&&f.push({ref:this.parent,data:h.join(""),xfa:null}),f}_getDefaultCheckedAppearance(t,e){const i=this.data.rect[2]-this.data.rect[0],r=this.data.rect[3]-this.data.rect[1],s=[0,0,i,r],a=.8*Math.min(i,r);let l,c;"check"===e?(l={width:.755*a,height:.705*a},c="3"):"disc"===e?(l={width:.791*a,height:.705*a},c="l"):(0,n.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${e}`);const h=`q BT /PdfJsZaDb ${a} Tf 0 g ${(i-l.width)/2} ${(r-l.height)/2} Td (${c}) Tj ET Q`,u=new o.Dict(t.xref);u.set("FormType",1),u.set("Subtype",o.Name.get("Form")),u.set("Type",o.Name.get("XObject")),u.set("BBox",s),u.set("Matrix",[1,0,0,1,0,0]),u.set("Length",h.length);const p=new o.Dict(t.xref),d=new o.Dict(t.xref);d.set("PdfJsZaDb",this.fallbackFontDict),p.set("Font",d),u.set("Resources",p),this.checkedAppearance=new f.StringStream(h),this.checkedAppearance.dict=u,this._streams.push(this.checkedAppearance)}_processCheckBox(t){const e=t.dict.get("AP");if(!(e instanceof o.Dict))return;const i=e.get("N");if(!(i instanceof o.Dict))return;const n=this._decodeFormValue(t.dict.get("AS"));"string"==typeof n&&(this.data.fieldValue=n);const r=null!==this.data.fieldValue&&"Off"!==this.data.fieldValue?this.data.fieldValue:"Yes",s=i.getKeys();if(0===s.length)s.push("Off",r);else if(1===s.length)"Off"===s[0]?s.push(r):s.unshift("Off");else if(s.includes(r))s.length=0,s.push("Off",r);else{const t=s.find((t=>"Off"!==t));s.length=0,s.push("Off",t)}s.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=s[1],this.checkedAppearance=i.get(this.data.exportValue)||null,this.uncheckedAppearance=i.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}_processRadioButton(t){this.data.fieldValue=this.data.buttonValue=null;const e=t.dict.get("Parent");if(e instanceof o.Dict){this.parent=t.dict.getRaw("Parent");const i=e.get("V");i instanceof o.Name&&(this.data.fieldValue=this._decodeFormValue(i))}const i=t.dict.get("AP");if(!(i instanceof o.Dict))return;const n=i.get("N");if(n instanceof o.Dict){for(const t of n.getKeys())if("Off"!==t){this.data.buttonValue=this._decodeFormValue(t);break}this.checkedAppearance=n.get(this.data.buttonValue)||null,this.uncheckedAppearance=n.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}_processPushButton(t){t.dict.has("A")||t.dict.has("AA")||this.data.alternativeText?(this.data.isTooltipOnly=!t.dict.has("A")&&!t.dict.has("AA"),c.Catalog.parseDestDictionary({destDict:t.dict,resultObj:this.data,docBaseUrl:t.pdfManager.docBaseUrl})):(0,n.warn)("Push buttons without action dictionaries are not supported")}getFieldObject(){let t,e="button";return this.data.checkBox?(e="checkbox",t=this.data.exportValue):this.data.radioButton&&(e="radiobutton",t=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:t,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:e}}get fallbackFontDict(){const t=new o.Dict;return t.set("BaseFont",o.Name.get("ZapfDingbats")),t.set("Type",o.Name.get("FallbackType")),t.set("Subtype",o.Name.get("FallbackType")),t.set("Encoding",o.Name.get("ZapfDingbatsEncoding")),(0,n.shadow)(this,"fallbackFontDict",t)}}class T extends C{constructor(t){super(t),this.data.options=[];const e=(0,r.getInheritableProperty)({dict:t.dict,key:"Opt"});if(Array.isArray(e)){const i=t.xref;for(let t=0,n=e.length;t<n;t++){const n=i.fetchIfRef(e[t]),r=Array.isArray(n);this.data.options[t]={exportValue:this._decodeFormValue(r?i.fetchIfRef(n[0]):n),displayValue:this._decodeFormValue(r?i.fetchIfRef(n[1]):n)}}}"string"==typeof this.data.fieldValue?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(n.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(n.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const t=this.data.combo?"combobox":"listbox",e=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:e,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:t}}async _getAppearance(t,e,i){if(this.data.combo)return super._getAppearance(t,e,i);if(!i)return null;const n=i.get(this.data.id);let r=n&&n.value;if(void 0===r)return null;Array.isArray(r)||(r=[r]);const o=this.data.rect[3]-this.data.rect[1],a=this.data.rect[2]-this.data.rect[0],l=this.data.options.length,c=[];for(let t=0;t<l;t++){const{exportValue:e}=this.data.options[t];r.includes(e)&&c.push(t)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,s.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const h=await this._getFontData(t,e);let u,{fontSize:p}=this.data.defaultAppearanceData;if(p)u=this._defaultAppearance;else{const t=(o-2)/l;let e,i=-1;for(const{displayValue:t}of this.data.options){const n=this._getTextWidth(t);n>i&&(i=n,e=t)}[u,p]=this._computeFontSize(t,a-4,e,h,-1)}const d=p*y,f=(d-p)/2,g=Math.floor(o/d);let m;if(1===c.length){const t=c[0];m=t-t%g}else m=c.length?c[0]:0;const v=Math.min(m+g+1,l),b=["/Tx BMC q",`1 1 ${a} ${o} re W n`];if(c.length){b.push("0.600006 0.756866 0.854904 rg");for(const t of c)m<=t&&t<v&&b.push(`1 ${o-(t-m+1)*d} ${a} ${d} re f`)}b.push("BT",u,`1 0 0 1 0 ${o} Tm`);for(let t=m;t<v;t++){const{displayValue:e}=this.data.options[t],i=t===m?2:0,n=t===m?f:0;b.push(this._renderText(e,h,p,a,0,i,-d+n))}return b.push("ET Q EMC"),b.join("\n")}}class O extends C{constructor(t){super(t),this.data.fieldValue=null}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class E extends k{constructor(t){super(t);const e=t.dict;this.data.annotationType=n.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=e.has("Name")?e.get("Name").name:"Note"),e.has("State")?(this.data.state=e.get("State")||null,this.data.stateModel=e.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class M extends x{constructor(t){super(t),this.data.annotationType=n.AnnotationType.LINK;const e=b(t.dict,this.rectangle);e&&(this.data.quadPoints=e),c.Catalog.parseDestDictionary({destDict:t.dict,resultObj:this.data,docBaseUrl:t.pdfManager.docBaseUrl})}}class P extends x{constructor(t){super(t),this.data.annotationType=n.AnnotationType.POPUP;let e=t.dict.get("Parent");if(!e)return void(0,n.warn)("Popup annotation has a missing or invalid parent annotation.");const i=e.get("Subtype");this.data.parentType=i instanceof o.Name?i.name:null;const r=t.dict.getRaw("Parent");this.data.parentId=r instanceof o.Ref?r.toString():null;const s=e.getArray("Rect");Array.isArray(s)&&4===s.length?this.data.parentRect=n.Util.normalizeRect(s):this.data.parentRect=[0,0,0,0];const a=e.get("RT");if((0,o.isName)(a,n.AnnotationReplyType.GROUP)&&(e=e.get("IRT")),e.has("M")?(this.setModificationDate(e.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,e.has("C")?(this.setColor(e.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const t=e.get("F");this._isViewable(t)&&this.setFlags(t)}this.setTitle(e.get("T")),this.data.titleObj=this._title,this.setContents(e.get("Contents")),this.data.contentsObj=this._contents,e.has("RC")&&(this.data.richText=m.XFAFactory.getRichTextAsHtml(e.get("RC")))}}class I extends k{constructor(t){super(t),this.data.annotationType=n.AnnotationType.FREETEXT}}class F extends k{constructor(t){super(t);const{dict:e}=t;this.data.annotationType=n.AnnotationType.LINE;const i=e.getArray("L");if(this.data.lineCoordinates=n.Util.normalizeRect(i),this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const r=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],s=e.get("CA");let o=null,a=e.getArray("IC");a&&(a=v(a,null),o=a?Array.from(a).map((t=>t/255)):null);const l=o?s:null,c=this.borderStyle.width||1,h=2*c,u=[this.data.lineCoordinates[0]-h,this.data.lineCoordinates[1]-h,this.data.lineCoordinates[2]+h,this.data.lineCoordinates[3]+h];n.Util.intersect(this.rectangle,u)||(this.rectangle=u),this._setDefaultAppearance({xref:t.xref,extra:`${c} w`,strokeColor:r,fillColor:o,strokeAlpha:s,fillAlpha:l,pointsCallback:(t,e)=>(t.push(`${i[0]} ${i[1]} m`,`${i[2]} ${i[3]} l`,"S"),[e[0].x-c,e[1].x+c,e[3].y-c,e[1].y+c])})}}}class D extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.SQUARE,!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");let n=null,r=t.dict.getArray("IC");r&&(r=v(r,null),n=r?Array.from(r).map((t=>t/255)):null);const s=n?i:null;if(0===this.borderStyle.width&&!n)return;this._setDefaultAppearance({xref:t.xref,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:n,strokeAlpha:i,fillAlpha:s,pointsCallback:(t,e)=>{const i=e[2].x+this.borderStyle.width/2,r=e[2].y+this.borderStyle.width/2,s=e[3].x-e[2].x-this.borderStyle.width,o=e[1].y-e[3].y-this.borderStyle.width;return t.push(`${i} ${r} ${s} ${o} re`),n?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class R extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.CIRCLE,!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");let n=null,r=t.dict.getArray("IC");r&&(r=v(r,null),n=r?Array.from(r).map((t=>t/255)):null);const s=n?i:null;if(0===this.borderStyle.width&&!n)return;const o=4/3*Math.tan(Math.PI/8);this._setDefaultAppearance({xref:t.xref,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:n,strokeAlpha:i,fillAlpha:s,pointsCallback:(t,e)=>{const i=e[0].x+this.borderStyle.width/2,r=e[0].y-this.borderStyle.width/2,s=e[3].x-this.borderStyle.width/2,a=e[3].y+this.borderStyle.width/2,l=i+(s-i)/2,c=r+(a-r)/2,h=(s-i)/2*o,u=(a-r)/2*o;return t.push(`${l} ${a} m`,`${l+h} ${a} ${s} ${c+u} ${s} ${c} c`,`${s} ${c-u} ${l+h} ${r} ${l} ${r} c`,`${l-h} ${r} ${i} ${c-u} ${i} ${c} c`,`${i} ${c+u} ${l-h} ${a} ${l} ${a} c`,"h"),n?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class L extends k{constructor(t){super(t);const{dict:e}=t;this.data.annotationType=n.AnnotationType.POLYLINE,this.data.vertices=[],this instanceof N||(this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings);const i=e.getArray("Vertices");if(Array.isArray(i)){for(let t=0,e=i.length;t<e;t+=2)this.data.vertices.push({x:i[t],y:i[t+1]});if(!this.appearance){const i=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],r=e.get("CA"),s=this.borderStyle.width||1,o=2*s,a=[1/0,1/0,-1/0,-1/0];for(const t of this.data.vertices)a[0]=Math.min(a[0],t.x-o),a[1]=Math.min(a[1],t.y-o),a[2]=Math.max(a[2],t.x+o),a[3]=Math.max(a[3],t.y+o);n.Util.intersect(this.rectangle,a)||(this.rectangle=a),this._setDefaultAppearance({xref:t.xref,extra:`${s} w`,strokeColor:i,strokeAlpha:r,pointsCallback:(t,e)=>{const i=this.data.vertices;for(let e=0,n=i.length;e<n;e++)t.push(`${i[e].x} ${i[e].y} ${0===e?"m":"l"}`);return t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}}class N extends L{constructor(t){super(t),this.data.annotationType=n.AnnotationType.POLYGON}}class B extends k{constructor(t){super(t),this.data.annotationType=n.AnnotationType.CARET}}class j extends k{constructor(t){super(t),this.data.annotationType=n.AnnotationType.INK,this.data.inkLists=[];const e=t.dict.getArray("InkList");if(!Array.isArray(e))return;const i=t.xref;for(let t=0,n=e.length;t<n;++t){this.data.inkLists.push([]);for(let n=0,r=e[t].length;n<r;n+=2)this.data.inkLists[t].push({x:i.fetchIfRef(e[t][n]),y:i.fetchIfRef(e[t][n+1])})}if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA"),r=this.borderStyle.width||1,s=2*r,o=[1/0,1/0,-1/0,-1/0];for(const t of this.data.inkLists)for(const e of t)o[0]=Math.min(o[0],e.x-s),o[1]=Math.min(o[1],e.y-s),o[2]=Math.max(o[2],e.x+s),o[3]=Math.max(o[3],e.y+s);n.Util.intersect(this.rectangle,o)||(this.rectangle=o),this._setDefaultAppearance({xref:t.xref,extra:`${r} w`,strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>{for(const e of this.data.inkLists){for(let i=0,n=e.length;i<n;i++)t.push(`${e[i].x} ${e[i].y} ${0===i?"m":"l"}`);t.push("S")}return[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class z extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.HIGHLIGHT,this.data.quadPoints=b(t.dict,null)){const e=this.appearance&&this.appearance.dict.get("Resources");if(!this.appearance||!e||!e.has("ExtGState")){this.appearance&&(0,n.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const e=this.color?Array.from(this.color).map((t=>t/255)):[1,1,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,fillColor:e,blendMode:"Multiply",fillAlpha:i,pointsCallback:(t,e)=>(t.push(`${e[0].x} ${e[0].y} m`,`${e[1].x} ${e[1].y} l`,`${e[3].x} ${e[3].y} l`,`${e[2].x} ${e[2].y} l`,"f"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class U extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.UNDERLINE,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>(t.push(`${e[2].x} ${e[2].y} m`,`${e[3].x} ${e[3].y} l`,"S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class $ extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.SQUIGGLY,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>{const i=(e[0].y-e[2].y)/6;let n=i,r=e[2].x;const s=e[2].y,o=e[3].x;t.push(`${r} ${s+n} m`);do{r+=2,n=0===n?i:0,t.push(`${r} ${s+n} l`)}while(r<o);return t.push("S"),[e[2].x,o,s-2*i,s+2*i]}})}}else this.data.hasPopup=!1}}class H extends k{constructor(t){if(super(t),this.data.annotationType=n.AnnotationType.STRIKEOUT,this.data.quadPoints=b(t.dict,null)){if(!this.appearance){const e=this.color?Array.from(this.color).map((t=>t/255)):[0,0,0],i=t.dict.get("CA");this._setDefaultAppearance({xref:t.xref,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:i,pointsCallback:(t,e)=>(t.push((e[0].x+e[2].x)/2+" "+(e[0].y+e[2].y)/2+" m",(e[1].x+e[3].x)/2+" "+(e[1].y+e[3].y)/2+" l","S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.hasPopup=!1}}class V extends k{constructor(t){super(t),this.data.annotationType=n.AnnotationType.STAMP}}class q extends k{constructor(t){super(t);const e=new u.FileSpec(t.dict.get("FS"),t.xref);this.data.annotationType=n.AnnotationType.FILEATTACHMENT,this.data.file=e.serializable}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultAppearance=function({fontSize:t,fontName:e,fontColor:i}){let n;return n=i.every((t=>0===t))?"0 g":Array.from(i).map((t=>(t/255).toFixed(2))).join(" ")+" rg",`/${(0,s.escapePDFName)(e)} ${t} Tf ${n}`},e.parseDefaultAppearance=function(t){return new c(t).parse()};var n=i(2),r=i(24),s=i(8),o=i(25),a=i(5),l=i(10);class c extends o.EvaluatorPreprocessor{constructor(t){super(new l.StringStream(t))}parse(){const t={fn:0,args:[]},e={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;t.args.length=0,this.read(t);){if(0!==this.savedStatesDepth)continue;const{fn:i,args:s}=t;switch(0|i){case n.OPS.setFont:const[t,i]=s;t instanceof a.Name&&(e.fontName=t.name),"number"==typeof i&&i>0&&(e.fontSize=i);break;case n.OPS.setFillRGBColor:r.ColorSpace.singletons.rgb.getRgbItem(s,0,e.fontColor,0);break;case n.OPS.setFillGray:r.ColorSpace.singletons.gray.getRgbItem(s,0,e.fontColor,0);break;case n.OPS.setFillColorSpace:r.ColorSpace.singletons.cmyk.getRgbItem(s,0,e.fontColor,0)}}}catch(t){(0,n.warn)(`parseDefaultAppearance - ignoring errors: "${t}".`)}return e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorSpace=void 0;var n=i(2),r=i(5),s=i(9),o=i(8);class a{constructor(t,e){this.constructor===a&&(0,n.unreachable)("Cannot initialize ColorSpace."),this.name=t,this.numComps=e}getRgb(t,e){const i=new Uint8ClampedArray(3);return this.getRgbItem(t,e,i,0),i}getRgbItem(t,e,i,r){(0,n.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(t,e,i,r,s,o,a){(0,n.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(t,e){(0,n.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(t){return!1}isDefaultDecode(t,e){return a.isDefaultDecode(t,this.numComps)}fillRgb(t,e,i,n,r,s,o,a,l){const c=e*i;let h=null;const u=1<<o,p=i!==r||e!==n;if(this.isPassthrough(o))h=a;else if(1===this.numComps&&c>u&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const e=o<=8?new Uint8Array(u):new Uint16Array(u);for(let t=0;t<u;t++)e[t]=t;const i=new Uint8ClampedArray(3*u);if(this.getRgbBuffer(e,0,u,i,0,o,0),p){h=new Uint8Array(3*c);let t=0;for(let e=0;e<c;++e){const n=3*a[e];h[t++]=i[n],h[t++]=i[n+1],h[t++]=i[n+2]}}else{let e=0;for(let n=0;n<c;++n){const r=3*a[n];t[e++]=i[r],t[e++]=i[r+1],t[e++]=i[r+2],e+=l}}}else p?(h=new Uint8ClampedArray(3*c),this.getRgbBuffer(a,0,c,h,0,o,0)):this.getRgbBuffer(a,0,n*s,t,0,o,l);if(h)if(p)!function(t,e,i,n,r,s,o){o=1!==o?0:o;const a=i/r,l=n/s;let c,h=0;const u=new Uint16Array(r),p=3*i;for(let t=0;t<r;t++)u[t]=3*Math.floor(t*a);for(let i=0;i<s;i++){const n=Math.floor(i*l)*p;for(let i=0;i<r;i++)c=n+u[i],e[h++]=t[c++],e[h++]=t[c++],e[h++]=t[c++],h+=o}}(h,t,e,i,n,r,l);else{let e=0,i=0;for(let r=0,o=n*s;r<o;r++)t[e++]=h[i++],t[e++]=h[i++],t[e++]=h[i++],e+=l}}get usesZeroToOneRange(){return(0,n.shadow)(this,"usesZeroToOneRange",!0)}static _cache(t,e,i,n){if(!i)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!n)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let s,o;t instanceof r.Ref&&(o=t,t=e.fetch(t)),t instanceof r.Name&&(s=t.name),(s||o)&&i.set(s,o,n)}static getCached(t,e,i){if(!i)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(t instanceof r.Ref){const n=i.getByRef(t);if(n)return n;try{t=e.fetch(t)}catch(t){if(t instanceof o.MissingDataException)throw t}}if(t instanceof r.Name){const e=i.getByName(t.name);if(e)return e}return null}static async parseAsync({cs:t,xref:e,resources:i=null,pdfFunctionFactory:n,localColorSpaceCache:r}){const s=this._parse(t,e,i,n);return this._cache(t,e,r,s),s}static parse({cs:t,xref:e,resources:i=null,pdfFunctionFactory:n,localColorSpaceCache:r}){const s=this.getCached(t,e,r);if(s)return s;const o=this._parse(t,e,i,n);return this._cache(t,e,r,o),o}static _parse(t,e,i=null,s){if((t=e.fetchIfRef(t))instanceof r.Name)switch(t.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new c(null);default:if(i instanceof r.Dict){const n=i.get("ColorSpace");if(n instanceof r.Dict){const o=n.get(t.name);if(o){if(o instanceof r.Name)return this._parse(o,e,i,s);t=o;break}}}throw new n.FormatError(`Unrecognized ColorSpace: ${t.name}`)}if(Array.isArray(t)){const r=e.fetchIfRef(t[0]).name;let o,a,u,p,d,y;switch(r){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return o=e.fetchIfRef(t[1]),p=o.getArray("WhitePoint"),d=o.getArray("BlackPoint"),y=o.get("Gamma"),new f(p,d,y);case"CalRGB":o=e.fetchIfRef(t[1]),p=o.getArray("WhitePoint"),d=o.getArray("BlackPoint"),y=o.getArray("Gamma");const v=o.getArray("Matrix");return new g(p,d,y,v);case"ICCBased":const b=e.fetchIfRef(t[1]).dict;a=b.get("N");const w=b.get("Alternate");if(w){const t=this._parse(w,e,i,s);if(t.numComps===a)return t;(0,n.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===a)return this.singletons.gray;if(3===a)return this.singletons.rgb;if(4===a)return this.singletons.cmyk;break;case"Pattern":return u=t[1]||null,u&&(u=this._parse(u,e,i,s)),new c(u);case"I":case"Indexed":u=this._parse(t[1],e,i,s);const x=e.fetchIfRef(t[2])+1,S=e.fetchIfRef(t[3]);return new h(u,x,S);case"Separation":case"DeviceN":const k=e.fetchIfRef(t[1]);a=Array.isArray(k)?k.length:1,u=this._parse(t[2],e,i,s);const C=s.create(t[3]);return new l(a,u,C);case"Lab":o=e.fetchIfRef(t[1]),p=o.getArray("WhitePoint"),d=o.getArray("BlackPoint");const A=o.getArray("Range");return new m(p,d,A);default:throw new n.FormatError(`Unimplemented ColorSpace object: ${r}`)}}throw new n.FormatError(`Unrecognized ColorSpace object: ${t}`)}static isDefaultDecode(t,e){if(!Array.isArray(t))return!0;if(2*e!==t.length)return(0,n.warn)("The decode map is not the correct length"),!0;for(let e=0,i=t.length;e<i;e+=2)if(0!==t[e]||1!==t[e+1])return!1;return!0}static get singletons(){return(0,n.shadow)(this,"singletons",{get gray(){return(0,n.shadow)(this,"gray",new u)},get rgb(){return(0,n.shadow)(this,"rgb",new p)},get cmyk(){return(0,n.shadow)(this,"cmyk",new d)}})}}e.ColorSpace=a;class l extends a{constructor(t,e,i){super("Alternate",t),this.base=e,this.tintFn=i,this.tmpBuf=new Float32Array(e.numComps)}getRgbItem(t,e,i,n){const r=this.tmpBuf;this.tintFn(t,e,r,0),this.base.getRgbItem(r,0,i,n)}getRgbBuffer(t,e,i,n,r,s,o){const a=this.tintFn,l=this.base,c=1/((1<<s)-1),h=l.numComps,u=l.usesZeroToOneRange,p=(l.isPassthrough(8)||!u)&&0===o;let d=p?r:0;const f=p?n:new Uint8ClampedArray(h*i),g=this.numComps,m=new Float32Array(g),y=new Float32Array(h);let v,b;for(v=0;v<i;v++){for(b=0;b<g;b++)m[b]=t[e++]*c;if(a(m,0,y,0),u)for(b=0;b<h;b++)f[d++]=255*y[b];else l.getRgbItem(y,0,f,d),d+=h}p||l.getRgbBuffer(f,0,i,n,r,8,o)}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps/this.numComps,e)}}class c extends a{constructor(t){super("Pattern",null),this.base=t}isDefaultDecode(t,e){(0,n.unreachable)("Should not call PatternCS.isDefaultDecode")}}class h extends a{constructor(t,e,i){super("Indexed",1),this.base=t,this.highVal=e;const r=t.numComps*e;if(this.lookup=new Uint8Array(r),i instanceof s.BaseStream){const t=i.getBytes(r);this.lookup.set(t)}else{if("string"!=typeof i)throw new n.FormatError(`IndexedCS - unrecognized lookup table: ${i}`);for(let t=0;t<r;++t)this.lookup[t]=255&i.charCodeAt(t)}}getRgbItem(t,e,i,n){const r=this.base.numComps,s=t[e]*r;this.base.getRgbBuffer(this.lookup,s,1,i,n,8,0)}getRgbBuffer(t,e,i,n,r,s,o){const a=this.base,l=a.numComps,c=a.getOutputLength(l,o),h=this.lookup;for(let s=0;s<i;++s){const i=t[e++]*l;a.getRgbBuffer(h,i,1,n,r,8,o),r+=c}}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps,e)}isDefaultDecode(t,e){return!Array.isArray(t)||(2!==t.length?((0,n.warn)("Decode map length is not correct"),!0):!Number.isInteger(e)||e<1?((0,n.warn)("Bits per component is not correct"),!0):0===t[0]&&t[1]===(1<<e)-1)}}class u extends a{constructor(){super("DeviceGray",1)}getRgbItem(t,e,i,n){const r=255*t[e];i[n]=i[n+1]=i[n+2]=r}getRgbBuffer(t,e,i,n,r,s,o){const a=255/((1<<s)-1);let l=e,c=r;for(let e=0;e<i;++e){const e=a*t[l++];n[c++]=e,n[c++]=e,n[c++]=e,c+=o}}getOutputLength(t,e){return t*(3+e)}}class p extends a{constructor(){super("DeviceRGB",3)}getRgbItem(t,e,i,n){i[n]=255*t[e],i[n+1]=255*t[e+1],i[n+2]=255*t[e+2]}getRgbBuffer(t,e,i,n,r,s,o){if(8===s&&0===o)return void n.set(t.subarray(e,e+3*i),r);const a=255/((1<<s)-1);let l=e,c=r;for(let e=0;e<i;++e)n[c++]=a*t[l++],n[c++]=a*t[l++],n[c++]=a*t[l++],c+=o}getOutputLength(t,e){return t*(3+e)/3|0}isPassthrough(t){return 8===t}}const d=function(){function t(t,e,i,n,r){const s=t[e]*i,o=t[e+1]*i,a=t[e+2]*i,l=t[e+3]*i;n[r]=255+s*(-4.387332384609988*s+54.48615194189176*o+18.82290502165302*a+212.25662451639585*l-285.2331026137004)+o*(1.7149763477362134*o-5.6096736904047315*a+-17.873870861415444*l-5.497006427196366)+a*(-2.5217340131683033*a-21.248923337353073*l+17.5119270841813)+l*(-21.86122147463605*l-189.48180835922747),n[r+1]=255+s*(8.841041422036149*s+60.118027045597366*o+6.871425592049007*a+31.159100130055922*l-79.2970844816548)+o*(-15.310361306967817*o+17.575251261109482*a+131.35250912493976*l-190.9453302588951)+a*(4.444339102852739*a+9.8632861493405*l-24.86741582555878)+l*(-20.737325471181034*l-187.80453709719578),n[r+2]=255+s*(.8842522430003296*s+8.078677503112928*o+30.89978309703729*a-.23883238689178934*l-14.183576799673286)+o*(10.49593273432072*o+63.02378494754052*a+50.606957656360734*l-112.23884253719248)+a*(.03296041114873217*a+115.60384449646641*l-193.58209356861505)+l*(-22.33816807309886*l-180.12613974708367)}return class extends a{constructor(){super("DeviceCMYK",4)}getRgbItem(e,i,n,r){t(e,i,1,n,r)}getRgbBuffer(e,i,n,r,s,o,a){const l=1/((1<<o)-1);for(let o=0;o<n;o++)t(e,i,l,r,s),i+=4,s+=3+a}getOutputLength(t,e){return t/4*(3+e)|0}}}(),f=function(){function t(t,e,i,n,r,s){const o=(e[i]*s)**t.G,a=t.YW*o,l=Math.max(295.8*a**.3333333333333333-40.8,0);n[r]=l,n[r+1]=l,n[r+2]=l}return class extends a{constructor(t,e,i){if(super("CalGray",1),!t)throw new n.FormatError("WhitePoint missing - required for color space CalGray");if(e=e||[0,0,0],i=i||1,this.XW=t[0],this.YW=t[1],this.ZW=t[2],this.XB=e[0],this.YB=e[1],this.ZB=e[2],this.G=i,this.XW<0||this.ZW<0||1!==this.YW)throw new n.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,n.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),0===this.XB&&0===this.YB&&0===this.ZB||(0,n.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,n.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(e,i,n,r){t(this,e,i,n,r,1)}getRgbBuffer(e,i,n,r,s,o,a){const l=1/((1<<o)-1);for(let o=0;o<n;++o)t(this,e,i,r,s,l),i+=1,s+=3+a}getOutputLength(t,e){return t*(3+e)}}}(),g=function(){const t=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),e=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),i=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),r=new Float32Array([1,1,1]),s=new Float32Array(3),o=new Float32Array(3),l=new Float32Array(3);function c(t,e,i){i[0]=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],i[1]=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i[2]=t[6]*e[0]+t[7]*e[1]+t[8]*e[2]}function h(t){return t<=.0031308?u(0,1,12.92*t):t>=.99554525?1:u(0,1,1.055*t**(1/2.4)-.055)}function u(t,e,i){return Math.max(t,Math.min(e,i))}function p(t){return t<0?-p(-t):t>8?((t+16)/116)**3:.0011070564598794539*t}function d(n,a,d,f,g,m){const y=u(0,1,a[d]*m),v=u(0,1,a[d+1]*m),b=u(0,1,a[d+2]*m),w=1===y?1:y**n.GR,x=1===v?1:v**n.GG,S=1===b?1:b**n.GB,k=n.MXA*w+n.MXB*x+n.MXC*S,C=n.MYA*w+n.MYB*x+n.MYC*S,A=n.MZA*w+n.MZB*x+n.MZC*S,_=o;_[0]=k,_[1]=C,_[2]=A;const T=l;!function(i,n,r){if(1===i[0]&&1===i[2])return r[0]=n[0],r[1]=n[1],void(r[2]=n[2]);const o=r;c(t,n,o);const a=s;!function(t,e,i){i[0]=1*e[0]/t[0],i[1]=1*e[1]/t[1],i[2]=1*e[2]/t[2]}(i,o,a),c(e,a,r)}(n.whitePoint,_,T);const O=o;!function(t,e,i){if(0===t[0]&&0===t[1]&&0===t[2])return i[0]=e[0],i[1]=e[1],void(i[2]=e[2]);const n=p(0),r=(1-n)/(1-p(t[0])),s=1-r,o=(1-n)/(1-p(t[1])),a=1-o,l=(1-n)/(1-p(t[2])),c=1-l;i[0]=e[0]*r+s,i[1]=e[1]*o+a,i[2]=e[2]*l+c}(n.blackPoint,T,O);const E=l;!function(i,n,r){const o=r;c(t,n,o);const a=s;!function(t,e,i){i[0]=.95047*e[0]/t[0],i[1]=1*e[1]/t[1],i[2]=1.08883*e[2]/t[2]}(i,o,a),c(e,a,r)}(r,O,E);const M=o;c(i,E,M),f[g]=255*h(M[0]),f[g+1]=255*h(M[1]),f[g+2]=255*h(M[2])}return class extends a{constructor(t,e,i,r){if(super("CalRGB",3),!t)throw new n.FormatError("WhitePoint missing - required for color space CalRGB");e=e||new Float32Array(3),i=i||new Float32Array([1,1,1]),r=r||new Float32Array([1,0,0,0,1,0,0,0,1]);const s=t[0],o=t[1],a=t[2];this.whitePoint=t;const l=e[0],c=e[1],h=e[2];if(this.blackPoint=e,this.GR=i[0],this.GG=i[1],this.GB=i[2],this.MXA=r[0],this.MYA=r[1],this.MZA=r[2],this.MXB=r[3],this.MYB=r[4],this.MZB=r[5],this.MXC=r[6],this.MYC=r[7],this.MZC=r[8],s<0||a<0||1!==o)throw new n.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(l<0||c<0||h<0)&&((0,n.info)(`Invalid BlackPoint for ${this.name} [${l}, ${c}, ${h}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,n.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(t,e,i,n){d(this,t,e,i,n,1)}getRgbBuffer(t,e,i,n,r,s,o){const a=1/((1<<s)-1);for(let s=0;s<i;++s)d(this,t,e,n,r,a),e+=3,r+=3+o}getOutputLength(t,e){return t*(3+e)/3|0}}}(),m=function(){function t(t){let e;return e=t>=6/29?t**3:108/841*(t-4/29),e}function e(t,e,i,n){return i+t*(n-i)/e}function i(i,n,r,s,o,a){let l=n[r],c=n[r+1],h=n[r+2];!1!==s&&(l=e(l,s,0,100),c=e(c,s,i.amin,i.amax),h=e(h,s,i.bmin,i.bmax)),c>i.amax?c=i.amax:c<i.amin&&(c=i.amin),h>i.bmax?h=i.bmax:h<i.bmin&&(h=i.bmin);const u=(l+16)/116,p=u+c/500,d=u-h/200,f=i.XW*t(p),g=i.YW*t(u),m=i.ZW*t(d);let y,v,b;i.ZW<1?(y=3.1339*f+-1.617*g+-.4906*m,v=-.9785*f+1.916*g+.0333*m,b=.072*f+-.229*g+1.4057*m):(y=3.2406*f+-1.5372*g+-.4986*m,v=-.9689*f+1.8758*g+.0415*m,b=.0557*f+-.204*g+1.057*m),o[a]=255*Math.sqrt(y),o[a+1]=255*Math.sqrt(v),o[a+2]=255*Math.sqrt(b)}return class extends a{constructor(t,e,i){if(super("Lab",3),!t)throw new n.FormatError("WhitePoint missing - required for color space Lab");if(e=e||[0,0,0],i=i||[-100,100,-100,100],this.XW=t[0],this.YW=t[1],this.ZW=t[2],this.amin=i[0],this.amax=i[1],this.bmin=i[2],this.bmax=i[3],this.XB=e[0],this.YB=e[1],this.ZB=e[2],this.XW<0||this.ZW<0||1!==this.YW)throw new n.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,n.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,n.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(t,e,n,r){i(this,t,e,!1,n,r)}getRgbBuffer(t,e,n,r,s,o,a){const l=(1<<o)-1;for(let o=0;o<n;o++)i(this,t,e,l,r,s),e+=3,s+=3+a}getOutputLength(t,e){return t*(3+e)/3|0}isDefaultDecode(t,e){return!0}get usesZeroToOneRange(){return(0,n.shadow)(this,"usesZeroToOneRange",!1)}}}()},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PartialEvaluator=e.EvaluatorPreprocessor=void 0;var n=i(2),r=i(26),s=i(5),o=i(44),a=i(18),l=i(19),c=i(47),h=i(21),u=i(56),p=i(12),d=i(48),f=i(57),g=i(27),m=i(59),y=i(10),v=i(9),b=i(60),w=i(24),x=i(29),S=i(20),k=i(8),C=i(51),A=i(61),_=i(62),T=i(63);const O=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),E=1,M=2,P=Promise.resolve();function I(t,e=!1){if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++){const i=I(t[e],!0);if(i)return i}return(0,n.warn)(`Unsupported blend mode Array: ${t}`),"source-over"}if(!(t instanceof s.Name))return e?null:"source-over";switch(t.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return e?null:((0,n.warn)(`Unsupported blend mode: ${t.name}`),"source-over")}function F(t){t.fn===n.OPS.paintImageMaskXObject&&t.args[0]&&t.args[0].count>0&&t.args[0].count++}class D{static get TIME_SLOT_DURATION_MS(){return(0,n.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,n.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return!(++this.checked<D.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+D.TIME_SLOT_DURATION_MS,this.checked=0}}class R{constructor({xref:t,handler:e,pageIndex:i,idFactory:n,fontCache:r,builtInCMapCache:s,standardFontDataCache:o,globalImageCache:a,options:l=null}){this.xref=t,this.handler=e,this.pageIndex=i,this.idFactory=n,this.fontCache=r,this.builtInCMapCache=s,this.standardFontDataCache=o,this.globalImageCache=a,this.options=l||O,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const t=new f.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,n.shadow)(this,"_pdfFunctionFactory",t)}clone(t=null){const e=Object.create(this);return e.options=Object.assign(Object.create(null),this.options,t),e}hasBlendModes(t,e){if(!(t instanceof s.Dict))return!1;if(t.objId&&e.has(t.objId))return!1;const i=new s.RefSet(e);t.objId&&i.put(t.objId);const r=[t],o=this.xref;for(;r.length;){const t=r.shift(),e=t.get("ExtGState");if(e instanceof s.Dict)for(let t of e.getRawValues()){if(t instanceof s.Ref){if(i.has(t))continue;try{t=o.fetch(t)}catch(e){i.put(t),(0,n.info)(`hasBlendModes - ignoring ExtGState: "${e}".`);continue}}if(!(t instanceof s.Dict))continue;t.objId&&i.put(t.objId);const e=t.get("BM");if(e instanceof s.Name){if("Normal"!==e.name)return!0}else if(void 0!==e&&Array.isArray(e))for(const t of e)if(t instanceof s.Name&&"Normal"!==t.name)return!0}const a=t.get("XObject");if(a instanceof s.Dict)for(let t of a.getRawValues()){if(t instanceof s.Ref){if(i.has(t))continue;try{t=o.fetch(t)}catch(e){i.put(t),(0,n.info)(`hasBlendModes - ignoring XObject: "${e}".`);continue}}if(!(t instanceof v.BaseStream))continue;t.dict.objId&&i.put(t.dict.objId);const e=t.dict.get("Resources");e instanceof s.Dict&&(e.objId&&i.has(e.objId)||(r.push(e),e.objId&&i.put(e.objId)))}}for(const t of i)e.put(t);return!1}async fetchBuiltInCMap(t){const e=this.builtInCMapCache.get(t);if(e)return e;let i;if(null!==this.options.cMapUrl){const e=`${this.options.cMapUrl}${t}.bcmap`,r=await fetch(e);if(!r.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${e}" with "${r.statusText}".`);i={cMapData:new Uint8Array(await r.arrayBuffer()),compressionType:n.CMapCompressionType.BINARY}}else i=await this.handler.sendWithPromise("FetchBuiltInCMap",{name:t});return i.compressionType!==n.CMapCompressionType.NONE&&this.builtInCMapCache.set(t,i),i}async fetchStandardFontData(t){const e=this.standardFontDataCache.get(t);if(e)return new y.Stream(e);if(this.options.useSystemFonts&&"Symbol"!==t&&"ZapfDingbats"!==t)return null;const i=(0,c.getFontNameToFileMap)()[t];let r;if(null!==this.options.standardFontDataUrl){const t=`${this.options.standardFontDataUrl}${i}`,e=await fetch(t);e.ok?r=await e.arrayBuffer():(0,n.warn)(`fetchStandardFontData: failed to fetch file "${t}" with "${e.statusText}".`)}else try{r=await this.handler.sendWithPromise("FetchStandardFontData",{filename:i})}catch(t){(0,n.warn)(`fetchStandardFontData: failed to fetch file "${i}" with "${t}".`)}return r?(this.standardFontDataCache.set(t,r),new y.Stream(r)):null}async buildFormXObject(t,e,i,r,o,a,l){const c=e.dict,h=c.getArray("Matrix");let u,p,d=c.getArray("BBox");d=Array.isArray(d)&&4===d.length?n.Util.normalizeRect(d):null,c.has("OC")&&(u=await this.parseMarkedContentProps(c.get("OC"),t)),void 0!==u&&r.addOp(n.OPS.beginMarkedContentProps,["OC",u]);const f=c.get("Group");if(f){p={matrix:h,bbox:d,smask:i,isolated:!1,knockout:!1};const e=f.get("S");let o=null;if((0,s.isName)(e,"Transparency")&&(p.isolated=f.get("I")||!1,p.knockout=f.get("K")||!1,f.has("CS"))){const e=f.getRaw("CS"),i=w.ColorSpace.getCached(e,this.xref,l);o=i||await this.parseColorSpace({cs:e,resources:t,localColorSpaceCache:l})}i&&i.backdrop&&(o=o||w.ColorSpace.singletons.rgb,i.backdrop=o.getRgb(i.backdrop,0)),r.addOp(n.OPS.beginGroup,[p])}const g=f?[h,null]:[h,d];return r.addOp(n.OPS.paintFormXObjectBegin,g),this.getOperatorList({stream:e,task:o,resources:c.get("Resources")||t,operatorList:r,initialState:a}).then((function(){r.addOp(n.OPS.paintFormXObjectEnd,[]),f&&r.addOp(n.OPS.endGroup,[p]),void 0!==u&&r.addOp(n.OPS.endMarkedContent,[])}))}_sendImgData(t,e,i=!1){const n=e?[e.bitmap||e.data.buffer]:null;return this.parsingType3Font||i?this.handler.send("commonobj",[t,"Image",e],n):this.handler.send("obj",[t,this.pageIndex,"Image",e],n)}async buildPaintImageXObject({resources:t,image:e,isInline:i=!1,operatorList:r,cacheKey:s,localImageCache:o,localColorSpaceCache:a}){const l=e.dict,c=l.objId,h=l.get("W","Width"),u=l.get("H","Height");if(!h||"number"!=typeof h||!u||"number"!=typeof u)return void(0,n.warn)("Image dimensions are missing, or not numbers.");const p=this.options.maxImageSize;if(-1!==p&&h*u>p){const t="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors)return void(0,n.warn)(t);throw new Error(t)}let d,f,g;if(l.has("OC")&&(d=await this.parseMarkedContentProps(l.get("OC"),t)),l.get("IM","ImageMask")){const t=l.get("I","Interpolate"),i=h+7>>3,a=e.getBytes(i*u),p=l.getArray("D","Decode");if(this.parsingType3Font)return f=T.PDFImage.createRawMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof x.DecodeStream,inverseDecode:!!p&&p[0]>0,interpolate:t}),f.cached=!!s,g=[f],r.addImageOps(n.OPS.paintImageMaskXObject,g,d),void(s&&o.set(s,c,{fn:n.OPS.paintImageMaskXObject,args:g,optionalContent:d}));if(f=T.PDFImage.createMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof x.DecodeStream,inverseDecode:!!p&&p[0]>0,interpolate:t}),f.isSingleOpaquePixel)return r.addImageOps(n.OPS.paintSolidColorImageMask,[],d),void(s&&o.set(s,c,{fn:n.OPS.paintSolidColorImageMask,args:[],optionalContent:d}));const m=`mask_${this.idFactory.createObjId()}`;return r.addDependency(m),this._sendImgData(m,f),g=[{data:m,width:f.width,height:f.height,interpolate:f.interpolate,count:1}],r.addImageOps(n.OPS.paintImageMaskXObject,g,d),void(s&&o.set(s,c,{fn:n.OPS.paintImageMaskXObject,args:g,optionalContent:d}))}const m=l.get("SM","SMask")||!1,y=l.get("Mask")||!1;if(i&&!m&&!y&&h+u<200){const s=new T.PDFImage({xref:this.xref,res:t,image:e,isInline:i,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a});return f=s.createImageData(!0),void r.addImageOps(n.OPS.paintInlineImageXObject,[f],d)}let v=`img_${this.idFactory.createObjId()}`,b=!1;this.parsingType3Font?v=`${this.idFactory.getDocId()}_type3_${v}`:c&&(b=this.globalImageCache.shouldCache(c,this.pageIndex),b&&(v=`${this.idFactory.getDocId()}_${v}`)),r.addDependency(v),g=[v,h,u],T.PDFImage.buildImage({xref:this.xref,res:t,image:e,isInline:i,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a}).then((t=>(f=t.createImageData(!1),s&&c&&b&&this.globalImageCache.addByteSize(c,f.data.length),this._sendImgData(v,f,b)))).catch((t=>((0,n.warn)(`Unable to decode image "${v}": "${t}".`),this._sendImgData(v,null,b)))),r.addImageOps(n.OPS.paintImageXObject,g,d),s&&(o.set(s,c,{fn:n.OPS.paintImageXObject,args:g,optionalContent:d}),c&&((0,n.assert)(!i,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(c,this.pageIndex),b&&this.globalImageCache.setData(c,{objId:v,fn:n.OPS.paintImageXObject,args:g,optionalContent:d,byteSize:0})))}handleSMask(t,e,i,n,r,s){const o=t.get("G"),a={subtype:t.get("S").name,backdrop:t.get("BC")},l=t.get("TR");if((0,f.isPDFFunction)(l)){const t=this._pdfFunctionFactory.create(l),e=new Uint8Array(256),i=new Float32Array(1);for(let n=0;n<256;n++)i[0]=n/255,t(i,0,i,0),e[n]=255*i[0]|0;a.transferMap=e}return this.buildFormXObject(e,o,a,i,n,r.state.clone(),s)}handleTransferFunction(t){let e;if(Array.isArray(t))e=t;else{if(!(0,f.isPDFFunction)(t))return null;e=[t]}const i=[];let n=0,r=0;for(const t of e){const e=this.xref.fetchIfRef(t);if(n++,(0,s.isName)(e,"Identity")){i.push(null);continue}if(!(0,f.isPDFFunction)(e))return null;const o=this._pdfFunctionFactory.create(e),a=new Uint8Array(256),l=new Float32Array(1);for(let t=0;t<256;t++)l[0]=t/255,o(l,0,l,0),a[t]=255*l[0]|0;i.push(a),r++}return 1!==n&&4!==n||0===r?null:i}handleTilingType(t,e,i,r,o,a,l,c){const h=new _.OperatorList,p=s.Dict.merge({xref:this.xref,dictArray:[o.get("Resources"),i]});return this.getOperatorList({stream:r,task:l,resources:p,operatorList:h}).then((function(){const i=h.getIR(),n=(0,u.getTilingPatternIR)(i,o,e);a.addDependencies(h.dependencies),a.addOp(t,n),o.objId&&c.set(null,o.objId,{operatorListIR:i,dict:o})})).catch((t=>{if(!(t instanceof n.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,n.warn)(`handleTilingType - ignoring pattern: "${t}".`);throw t}}))}handleSetFont(t,e,i,r,a,l,c=null,h=null){const u=e&&e[0]instanceof s.Name?e[0].name:null;return this.loadFont(u,i,t,c,h).then((e=>e.font.isType3Font?e.loadType3Data(this,t,a).then((function(){return r.addDependencies(e.type3Dependencies),e})).catch((t=>(this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontLoadType3}),new L({loadedName:"g_font_error",font:new o.ErrorFont(`Type3 font load error: ${t}`),dict:e.font,evaluatorOptions:this.options})))):e)).then((t=>(l.font=t.font,t.send(this.handler),t.loadedName)))}handleText(t,e){const i=e.font,r=i.charsToGlyphs(t);return i.data&&(e.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===e.fillColorSpace.name||i.disableFontFace||this.options.disableFontFace)&&R.buildFontPaths(i,r,this.handler,this.options),r}ensureStateFont(t){if(t.font)return;const e=new n.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontState}),void(0,n.warn)(`ensureStateFont: "${e}".`);throw e}async setGState({resources:t,gState:e,operatorList:i,cacheKey:r,task:o,stateManager:a,localGStateCache:l,localColorSpaceCache:c}){const h=e.objId;let u=!0;const p=[],d=e.getKeys();let f=Promise.resolve();for(let r=0,l=d.length;r<l;r++){const l=d[r],h=e.get(l);switch(l){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":p.push([l,h]);break;case"Font":u=!1,f=f.then((()=>this.handleSetFont(t,null,h[0],i,o,a.state).then((function(t){i.addDependency(t),p.push([l,[t,h[1]]])}))));break;case"BM":p.push([l,I(h)]);break;case"SMask":if((0,s.isName)(h,"None")){p.push([l,!1]);break}h instanceof s.Dict?(u=!1,f=f.then((()=>this.handleSMask(h,t,i,o,a,c))),p.push([l,!0])):(0,n.warn)("Unsupported SMask type");break;case"TR":const e=this.handleTransferFunction(h);p.push([l,e]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,n.info)("graphic state operator "+l);break;default:(0,n.info)("Unknown graphic state operator "+l)}}return f.then((function(){p.length>0&&i.addOp(n.OPS.setGState,[p]),u&&l.set(r,h,p)}))}loadFont(t,e,i,r=null,l=null){const c=async()=>new L({loadedName:"g_font_error",font:new o.ErrorFont(`Font "${t}" is not available.`),dict:e,evaluatorOptions:this.options}),h=this.xref;let u;if(e){if(!(e instanceof s.Ref))throw new n.FormatError('The "font" object should be a reference.');u=e}else{const e=i.get("Font");e&&(u=e.getRaw(t))}if(!u){const i=`Font "${t||e&&e.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,n.warn)(`${i}.`),c();this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontMissing}),(0,n.warn)(`${i} -- attempting to fallback to a default font.`),u=r||R.fallbackFontDict}if(this.parsingType3Font&&this.type3FontRefs.has(u))return c();if(this.fontCache.has(u))return this.fontCache.get(u);if(!((e=h.fetchIfRef(u))instanceof s.Dict))return c();if(e.cacheKey&&this.fontCache.has(e.cacheKey))return this.fontCache.get(e.cacheKey);const p=(0,n.createPromiseCapability)();let d;try{d=this.preEvaluateFont(e),d.cssFontInfo=l}catch(t){return(0,n.warn)(`loadFont - preEvaluateFont failed: "${t}".`),c()}const{descriptor:f,hash:g}=d,m=u instanceof s.Ref;let y;if(m&&(y=`f${u.toString()}`),g&&f instanceof s.Dict){f.fontAliases||(f.fontAliases=Object.create(null));const t=f.fontAliases;if(t[g]){const e=t[g].aliasRef;if(m&&e&&this.fontCache.has(e))return this.fontCache.putAlias(u,e),this.fontCache.get(u)}else t[g]={fontID:this.idFactory.createFontId()};m&&(t[g].aliasRef=u),y=t[g].fontID}return m?this.fontCache.put(u,p.promise):(y||(y=this.idFactory.createFontId()),e.cacheKey=`cacheKey_${y}`,this.fontCache.put(e.cacheKey,p.promise)),(0,n.assert)(y&&y.startsWith("f"),'The "fontID" must be (correctly) defined.'),e.loadedName=`${this.idFactory.getDocId()}_${y}`,this.translateFont(d).then((t=>{void 0!==t.fontType&&h.stats.addFontType(t.fontType),p.resolve(new L({loadedName:e.loadedName,font:t,dict:e,evaluatorOptions:this.options}))})).catch((t=>{this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontTranslate}),(0,n.warn)(`loadFont - translateFont failed: "${t}".`);try{const t=f&&f.get("FontFile3"),e=t&&t.get("Subtype"),i=(0,a.getFontType)(d.type,e&&e.name);void 0!==i&&h.stats.addFontType(i)}catch(t){}p.resolve(new L({loadedName:e.loadedName,font:new o.ErrorFont(t instanceof Error?t.message:t),dict:e,evaluatorOptions:this.options}))})),p.promise}buildPath(t,e,i,r=!1){const s=t.length-1;let o;if(i||(i=[]),s<0||t.fnArray[s]!==n.OPS.constructPath)r&&((0,n.warn)(`Encountered path operator "${e}" inside of a text object.`),t.addOp(n.OPS.save,null)),o=[1/0,-1/0,1/0,-1/0],t.addOp(n.OPS.constructPath,[[e],i,o]),r&&t.addOp(n.OPS.restore,null);else{const n=t.argsArray[s];n[0].push(e),Array.prototype.push.apply(n[1],i),o=n[2]}switch(e){case n.OPS.rectangle:o[0]=Math.min(o[0],i[0],i[0]+i[2]),o[1]=Math.max(o[1],i[0],i[0]+i[2]),o[2]=Math.min(o[2],i[1],i[1]+i[3]),o[3]=Math.max(o[3],i[1],i[1]+i[3]);break;case n.OPS.moveTo:case n.OPS.lineTo:o[0]=Math.min(o[0],i[0]),o[1]=Math.max(o[1],i[0]),o[2]=Math.min(o[2],i[1]),o[3]=Math.max(o[3],i[1])}}parseColorSpace({cs:t,resources:e,localColorSpaceCache:i}){return w.ColorSpace.parseAsync({cs:t,xref:this.xref,resources:e,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:i}).catch((t=>{if(t instanceof n.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorColorSpace}),(0,n.warn)(`parseColorSpace - ignoring ColorSpace: "${t}".`),null;throw t}))}parseShading({shading:t,resources:e,localColorSpaceCache:i,localShadingPatternCache:n}){let r=n.get(t);if(!r){const s=u.Pattern.parseShading(t,this.xref,e,this.handler,this._pdfFunctionFactory,i).getIR();r=`pattern_${this.idFactory.createObjId()}`,n.set(t,r),this.handler.send("obj",[r,this.pageIndex,"Pattern",s])}return r}handleColorN(t,e,i,r,o,a,l,c,h,p){const d=i.pop();if(d instanceof s.Name){const f=o.getRaw(d.name),g=f instanceof s.Ref&&h.getByRef(f);if(g)try{const n=r.base?r.base.getRgb(i,0):null,s=(0,u.getTilingPatternIR)(g.operatorListIR,g.dict,n);return void t.addOp(e,s)}catch(t){}const m=this.xref.fetchIfRef(f);if(m){const s=m instanceof v.BaseStream?m.dict:m,o=s.get("PatternType");if(o===E){const n=r.base?r.base.getRgb(i,0):null;return this.handleTilingType(e,n,a,m,s,t,l,h)}if(o===M){const i=s.get("Shading"),n=s.getArray("Matrix"),r=this.parseShading({shading:i,resources:a,localColorSpaceCache:c,localShadingPatternCache:p});return void t.addOp(e,["Shading",r,n])}throw new n.FormatError(`Unknown PatternType: ${o}`)}}throw new n.FormatError(`Unknown PatternName: ${d}`)}_parseVisibilityExpression(t,e,i){if(++e>10)return void(0,n.warn)("Visibility expression is too deeply nested");const r=t.length,o=this.xref.fetchIfRef(t[0]);if(!(r<2)&&o instanceof s.Name){switch(o.name){case"And":case"Or":case"Not":i.push(o.name);break;default:return void(0,n.warn)(`Invalid operator ${o.name} in visibility expression`)}for(let n=1;n<r;n++){const r=t[n],o=this.xref.fetchIfRef(r);if(Array.isArray(o)){const t=[];i.push(t),this._parseVisibilityExpression(o,e,t)}else r instanceof s.Ref&&i.push(r.toString())}}else(0,n.warn)("Invalid visibility expression")}async parseMarkedContentProps(t,e){let i;if(t instanceof s.Name)i=e.get("Properties").get(t.name);else{if(!(t instanceof s.Dict))throw new n.FormatError("Optional content properties malformed.");i=t}const r=i.get("Type").name;if("OCG"===r)return{type:r,id:i.objId};if("OCMD"===r){const t=i.get("VE");if(Array.isArray(t)){const e=[];if(this._parseVisibilityExpression(t,0,e),e.length>0)return{type:"OCMD",expression:e}}const e=i.get("OCGs");if(Array.isArray(e)||e instanceof s.Dict){const t=[];if(Array.isArray(e))for(const i of e)t.push(i.toString());else t.push(e.objId);return{type:r,ids:t,policy:i.get("P")instanceof s.Name?i.get("P").name:null,expression:null}}if(e instanceof s.Ref)return{type:r,id:e.toString()}}return null}getOperatorList({stream:t,task:e,resources:i,operatorList:r,initialState:o=null,fallbackFontDict:a=null}){if(i=i||s.Dict.empty,o=o||new j,!r)throw new Error('getOperatorList: missing "operatorList" parameter');const l=this,c=this.xref;let h=!1;const u=new m.LocalImageCache,p=new m.LocalColorSpaceCache,d=new m.LocalGStateCache,f=new m.LocalTilingPatternCache,g=new Map,y=i.get("XObject")||s.Dict.empty,b=i.get("Pattern")||s.Dict.empty,x=new N(o),S=new z(t,c,x),k=new D;function C(t){for(let t=0,e=S.savedStatesDepth;t<e;t++)r.addOp(n.OPS.restore,[])}return new Promise((function t(o,m){const A=function(e){Promise.all([e,r.ready]).then((function(){try{t(o,m)}catch(t){m(t)}}),m)};e.ensureNotTerminated(),k.reset();const _={};let T,O,E,M,I,D;for(;!(T=k.check())&&(_.args=null,S.read(_));){let t=_.args,o=_.fn;switch(0|o){case n.OPS.paintXObject:if(D=t[0]instanceof s.Name,I=t[0].name,D){const e=u.getByName(I);if(e){r.addImageOps(e.fn,e.args,e.optionalContent),F(e),t=null;continue}}return void A(new Promise((function(t,o){if(!D)throw new n.FormatError("XObject must be referred to by name.");let a=y.getRaw(I);if(a instanceof s.Ref){const e=u.getByRef(a);if(e)return r.addImageOps(e.fn,e.args,e.optionalContent),F(e),void t();const i=l.globalImageCache.getData(a,l.pageIndex);if(i)return r.addDependency(i.objId),r.addImageOps(i.fn,i.args,i.optionalContent),void t();a=c.fetch(a)}if(!(a instanceof v.BaseStream))throw new n.FormatError("XObject should be a stream");const h=a.dict.get("Subtype");if(!(h instanceof s.Name))throw new n.FormatError("XObject should have a Name subtype");if("Form"===h.name)return x.save(),void l.buildFormXObject(i,a,null,r,e,x.state.clone(),p).then((function(){x.restore(),t()}),o);if("Image"!==h.name){if("PS"!==h.name)throw new n.FormatError(`Unhandled XObject subtype ${h.name}`);(0,n.info)("Ignored XObject subtype PS"),t()}else l.buildPaintImageXObject({resources:i,image:a,operatorList:r,cacheKey:I,localImageCache:u,localColorSpaceCache:p}).then(t,o)})).catch((function(t){if(!(t instanceof n.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorXObject}),void(0,n.warn)(`getOperatorList - ignoring XObject: "${t}".`);throw t}})));case n.OPS.setFont:var R=t[1];return void A(l.handleSetFont(i,t,null,r,e,x.state,a).then((function(t){r.addDependency(t),r.addOp(n.OPS.setFont,[t,R])})));case n.OPS.beginText:h=!0;break;case n.OPS.endText:h=!1;break;case n.OPS.endInlineImage:var L=t[0].cacheKey;if(L){const e=u.getByName(L);if(e){r.addImageOps(e.fn,e.args,e.optionalContent),F(e),t=null;continue}}return void A(l.buildPaintImageXObject({resources:i,image:t[0],isInline:!0,operatorList:r,cacheKey:L,localImageCache:u,localColorSpaceCache:p}));case n.OPS.showText:if(!x.state.font){l.ensureStateFont(x.state);continue}t[0]=l.handleText(t[0],x.state);break;case n.OPS.showSpacedText:if(!x.state.font){l.ensureStateFont(x.state);continue}var N=t[0],B=[],j=N.length,z=x.state;for(O=0;O<j;++O){const t=N[O];"string"==typeof t?Array.prototype.push.apply(B,l.handleText(t,z)):"number"==typeof t&&B.push(t)}t[0]=B,o=n.OPS.showText;break;case n.OPS.nextLineShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}r.addOp(n.OPS.nextLine),t[0]=l.handleText(t[0],x.state),o=n.OPS.showText;break;case n.OPS.nextLineSetSpacingShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}r.addOp(n.OPS.nextLine),r.addOp(n.OPS.setWordSpacing,[t.shift()]),r.addOp(n.OPS.setCharSpacing,[t.shift()]),t[0]=l.handleText(t[0],x.state),o=n.OPS.showText;break;case n.OPS.setTextRenderingMode:x.state.textRenderingMode=t[0];break;case n.OPS.setFillColorSpace:{const e=w.ColorSpace.getCached(t[0],c,p);if(e){x.state.fillColorSpace=e;continue}return void A(l.parseColorSpace({cs:t[0],resources:i,localColorSpaceCache:p}).then((function(t){t&&(x.state.fillColorSpace=t)})))}case n.OPS.setStrokeColorSpace:{const e=w.ColorSpace.getCached(t[0],c,p);if(e){x.state.strokeColorSpace=e;continue}return void A(l.parseColorSpace({cs:t[0],resources:i,localColorSpaceCache:p}).then((function(t){t&&(x.state.strokeColorSpace=t)})))}case n.OPS.setFillColor:M=x.state.fillColorSpace,t=M.getRgb(t,0),o=n.OPS.setFillRGBColor;break;case n.OPS.setStrokeColor:M=x.state.strokeColorSpace,t=M.getRgb(t,0),o=n.OPS.setStrokeRGBColor;break;case n.OPS.setFillGray:x.state.fillColorSpace=w.ColorSpace.singletons.gray,t=w.ColorSpace.singletons.gray.getRgb(t,0),o=n.OPS.setFillRGBColor;break;case n.OPS.setStrokeGray:x.state.strokeColorSpace=w.ColorSpace.singletons.gray,t=w.ColorSpace.singletons.gray.getRgb(t,0),o=n.OPS.setStrokeRGBColor;break;case n.OPS.setFillCMYKColor:x.state.fillColorSpace=w.ColorSpace.singletons.cmyk,t=w.ColorSpace.singletons.cmyk.getRgb(t,0),o=n.OPS.setFillRGBColor;break;case n.OPS.setStrokeCMYKColor:x.state.strokeColorSpace=w.ColorSpace.singletons.cmyk,t=w.ColorSpace.singletons.cmyk.getRgb(t,0),o=n.OPS.setStrokeRGBColor;break;case n.OPS.setFillRGBColor:x.state.fillColorSpace=w.ColorSpace.singletons.rgb,t=w.ColorSpace.singletons.rgb.getRgb(t,0);break;case n.OPS.setStrokeRGBColor:x.state.strokeColorSpace=w.ColorSpace.singletons.rgb,t=w.ColorSpace.singletons.rgb.getRgb(t,0);break;case n.OPS.setFillColorN:if(M=x.state.fillColorSpace,"Pattern"===M.name)return void A(l.handleColorN(r,n.OPS.setFillColorN,t,M,b,i,e,p,f,g));t=M.getRgb(t,0),o=n.OPS.setFillRGBColor;break;case n.OPS.setStrokeColorN:if(M=x.state.strokeColorSpace,"Pattern"===M.name)return void A(l.handleColorN(r,n.OPS.setStrokeColorN,t,M,b,i,e,p,f,g));t=M.getRgb(t,0),o=n.OPS.setStrokeRGBColor;break;case n.OPS.shadingFill:var U=i.get("Shading");if(!U)throw new n.FormatError("No shading resource found");var $=U.get(t[0].name);if(!$)throw new n.FormatError("No shading object found");t=[l.parseShading({shading:$,resources:i,localColorSpaceCache:p,localShadingPatternCache:g})],o=n.OPS.shadingFill;break;case n.OPS.setGState:if(D=t[0]instanceof s.Name,I=t[0].name,D){const e=d.getByName(I);if(e){e.length>0&&r.addOp(n.OPS.setGState,[e]),t=null;continue}}return void A(new Promise((function(t,o){if(!D)throw new n.FormatError("GState must be referred to by name.");const a=i.get("ExtGState");if(!(a instanceof s.Dict))throw new n.FormatError("ExtGState should be a dictionary.");const c=a.get(I);if(!(c instanceof s.Dict))throw new n.FormatError("GState should be a dictionary.");l.setGState({resources:i,gState:c,operatorList:r,cacheKey:I,task:e,stateManager:x,localGStateCache:d,localColorSpaceCache:p}).then(t,o)})).catch((function(t){if(!(t instanceof n.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorExtGState}),void(0,n.warn)(`getOperatorList - ignoring ExtGState: "${t}".`);throw t}})));case n.OPS.moveTo:case n.OPS.lineTo:case n.OPS.curveTo:case n.OPS.curveTo2:case n.OPS.curveTo3:case n.OPS.closePath:case n.OPS.rectangle:l.buildPath(r,o,t,h);continue;case n.OPS.markPoint:case n.OPS.markPointProps:case n.OPS.beginCompat:case n.OPS.endCompat:continue;case n.OPS.beginMarkedContentProps:if(!(t[0]instanceof s.Name)){(0,n.warn)(`Expected name for beginMarkedContentProps arg0=${t[0]}`);continue}if("OC"===t[0].name)return void A(l.parseMarkedContentProps(t[1],i).then((t=>{r.addOp(n.OPS.beginMarkedContentProps,["OC",t])})).catch((t=>{if(!(t instanceof n.AbortException)){if(l.options.ignoreErrors)return l.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorMarkedContent}),void(0,n.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${t}".`);throw t}})));t=[t[0].name,t[1]instanceof s.Dict?t[1].get("MCID"):null];break;case n.OPS.beginMarkedContent:case n.OPS.endMarkedContent:default:if(null!==t){for(O=0,E=t.length;O<E&&!(t[O]instanceof s.Dict);O++);if(O<E){(0,n.warn)("getOperatorList - ignoring operator: "+o);continue}}}r.addOp(o,t)}T?A(P):(C(),o())})).catch((t=>{if(!(t instanceof n.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorOperatorList}),(0,n.warn)(`getOperatorList - ignoring errors during "${e.name}" task: "${t}".`),void C();throw t}}))}getTextContent({stream:t,task:e,resources:i,stateManager:r=null,combineTextItems:o=!1,includeMarkedContent:a=!1,sink:l,seenStyles:c=new Set,viewBox:u}){i=i||s.Dict.empty,r=r||new N(new B);const p=(0,h.getNormalizedUnicodes)(),d={items:[],styles:Object.create(null)},f={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},g=[" "," "];let y=0;function w(t){const e=(y+1)%2,i=" "!==g[y]&&" "===g[e];return g[y]=t,y=e,i}function x(){g[0]=g[1]=" ",y=0}const S=this,k=this.xref,C=[];let A=null;const _=new m.LocalImageCache,T=new m.LocalGStateCache,O=new z(t,k,r);let E;function M(){const t=E.font,e=[E.fontSize*E.textHScale,0,0,E.fontSize,0,E.textRise];if(t.isType3Font&&(E.fontSize<=1||t.isCharBBox)&&!(0,n.isArrayEqual)(E.fontMatrix,n.FONT_IDENTITY_MATRIX)){const i=t.bbox[3]-t.bbox[1];i>0&&(e[3]*=i*E.fontMatrix[3])}return n.Util.transform(E.ctm,n.Util.transform(E.textMatrix,e))}function I(){if(f.initialized)return f;const t=E.font,e=t.loadedName;c.has(e)||(c.add(e),d.styles[e]={fontFamily:t.fallbackName,ascent:t.ascent,descent:t.descent,vertical:t.vertical}),f.fontName=e;const i=f.transform=M();t.vertical?(f.width=f.totalWidth=Math.hypot(i[0],i[1]),f.height=f.totalHeight=0,f.vertical=!0):(f.width=f.totalWidth=0,f.height=f.totalHeight=Math.hypot(i[2],i[3]),f.vertical=!1);const n=Math.hypot(E.textLineMatrix[0],E.textLineMatrix[1]),r=Math.hypot(E.ctm[0],E.ctm[1]);return f.textAdvanceScale=r*n,f.trackingSpaceMin=.1*E.fontSize,f.notASpace=.03*E.fontSize,f.negativeSpaceMax=-.2*E.fontSize,f.spaceInFlowMin=.1*E.fontSize,f.spaceInFlowMax=.6*E.fontSize,f.hasEOL=!1,f.initialized=!0,f}function F(){if(!f.initialized)return;const t=Math.hypot(E.textLineMatrix[0],E.textLineMatrix[1]),e=Math.hypot(E.ctm[0],E.ctm[1])*t;e!==f.textAdvanceScale&&(f.vertical?(f.totalHeight+=f.height*f.textAdvanceScale,f.height=0):(f.totalWidth+=f.width*f.textAdvanceScale,f.width=0),f.textAdvanceScale=e)}function R(t,r){return S.loadFont(t,r,i).then((function(t){return t.font.isType3Font?t.loadType3Data(S,i,e).catch((function(){})).then((function(){return t})):t})).then((function(t){E.font=t.font,E.fontMatrix=t.font.fontMatrix||n.FONT_IDENTITY_MATRIX}))}function L(t,e,i){const n=Math.hypot(i[0],i[1]);return[(i[0]*t+i[1]*e)/n,(i[2]*t+i[3]*e)/n]}function j(){const t=M();let e=t[4],i=t[5];const n=e-u[0],r=i-u[1];if(n<0||n>u[2]||r<0||r>u[3])return!1;if(!o||!E.font||!f.prevTransform)return!0;let s=f.prevTransform[4],a=f.prevTransform[5];if(s===e&&a===i)return!0;let l=-1;switch(t[0]&&0===t[1]&&0===t[2]?l=t[0]>0?0:180:t[1]&&0===t[0]&&0===t[3]&&(l=t[1]>0?90:270),l){case 0:break;case 90:[e,i]=[i,e],[s,a]=[a,s];break;case 180:[e,i,s,a]=[-e,-i,-s,-a];break;case 270:[e,i]=[-i,-e],[s,a]=[-a,-s];break;default:[e,i]=L(e,i,t),[s,a]=L(s,a,f.prevTransform)}if(E.font.vertical){const t=(a-i)/f.textAdvanceScale,n=e-s,r=Math.sign(f.height);return t<r*f.negativeSpaceMax?Math.abs(n)>.5*f.width?($(),!0):(x(),V(),!0):Math.abs(n)>f.width?($(),!0):(t<=r*f.notASpace&&x(),t<=r*f.trackingSpaceMin?f.height+=t:H(t,f.prevTransform,r)||(0===f.str.length?(x(),d.items.push({str:" ",dir:"ltr",width:0,height:Math.abs(t),transform:f.prevTransform,fontName:f.fontName,hasEOL:!1})):f.height+=t),!0)}const c=(e-s)/f.textAdvanceScale,h=i-a,p=Math.sign(f.width);return c<p*f.negativeSpaceMax?Math.abs(h)>.5*f.height?($(),!0):(x(),V(),!0):Math.abs(h)>f.height?($(),!0):(c<=p*f.notASpace&&x(),c<=p*f.trackingSpaceMin?f.width+=c:H(c,f.prevTransform,p)||(0===f.str.length?(x(),d.items.push({str:" ",dir:"ltr",width:Math.abs(c),height:0,transform:f.prevTransform,fontName:f.fontName,hasEOL:!1})):f.width+=c),!0)}function U({chars:t,extraSpacing:e}){const i=E.font;if(!t){const t=E.charSpacing+e;return void(t&&(i.vertical?E.translateTextMatrix(0,-t):E.translateTextMatrix(t*E.textHScale,0)))}const n=i.charsToGlyphs(t),r=E.fontMatrix[0]*E.fontSize;for(let t=0,s=n.length;t<s;t++){const o=n[t];if(o.isInvisibleFormatMark)continue;let a=E.charSpacing+(t+1===s?e:0),l=o.width;i.vertical&&(l=o.vmetric?o.vmetric[0]:-l);let c=l*r;if(o.isWhitespace){i.vertical?(a+=-c+E.wordSpacing,E.translateTextMatrix(0,-a)):(a+=c+E.wordSpacing,E.translateTextMatrix(a*E.textHScale,0)),w(" ");continue}if(!j())continue;const u=I();o.isZeroWidthDiacritic&&(c=0),i.vertical?(E.translateTextMatrix(0,c),c=Math.abs(c),u.height+=c):(c*=E.textHScale,E.translateTextMatrix(c,0),u.width+=c),c&&(u.prevTransform=M());let d=o.unicode;d=p[d]||d,d=(0,h.reverseIfRtl)(d),w(d)&&u.str.push(" "),u.str.push(d),a&&(i.vertical?E.translateTextMatrix(0,-a):E.translateTextMatrix(a*E.textHScale,0))}}function $(){x(),f.initialized?(f.hasEOL=!0,V()):d.items.push({str:"",dir:"ltr",width:0,height:0,transform:M(),fontName:E.font.loadedName,hasEOL:!0})}function H(t,e,i){if(i*f.spaceInFlowMin<=t&&t<=i*f.spaceInFlowMax)return f.initialized&&(x(),f.str.push(" ")),!1;const n=f.fontName;let r=0;return f.vertical&&(r=t,t=0),V(),x(),d.items.push({str:" ",dir:"ltr",width:Math.abs(t),height:Math.abs(r),transform:e||M(),fontName:n,hasEOL:!1}),!0}function V(){f.initialized&&f.str&&(f.vertical?f.totalHeight+=f.height*f.textAdvanceScale:f.totalWidth+=f.width*f.textAdvanceScale,d.items.push(function(t){const e=t.str.join(""),i=(0,b.bidi)(e,-1,t.vertical);return{str:i.str,dir:i.dir,width:Math.abs(t.totalWidth),height:Math.abs(t.totalHeight),transform:t.transform,fontName:t.fontName,hasEOL:t.hasEOL}}(f)),f.initialized=!1,f.str.length=0)}function q(t=!1){const e=d.items.length;0!==e&&(t&&e<10||(l.enqueue(d,e),d.items=[],d.styles=Object.create(null)))}const W=new D;return new Promise((function t(h,p){const f=function(e){q(!0),Promise.all([e,l.ready]).then((function(){try{t(h,p)}catch(t){p(t)}}),p)};e.ensureNotTerminated(),W.reset();const g={};let m,y=[];for(;!(m=W.check())&&(y.length=0,g.args=y,O.read(g));){E=r.state;const t=g.fn;switch(y=g.args,0|t){case n.OPS.setFont:var b=y[0].name,w=y[1];if(E.font&&b===E.fontName&&w===E.fontSize)break;return V(),E.fontName=b,E.fontSize=w,void f(R(b,null));case n.OPS.setTextRise:E.textRise=y[0];break;case n.OPS.setHScale:E.textHScale=y[0]/100;break;case n.OPS.setLeading:E.leading=y[0];break;case n.OPS.moveText:E.translateTextLineMatrix(y[0],y[1]),E.textMatrix=E.textLineMatrix.slice();break;case n.OPS.setLeadingMoveText:E.leading=-y[1],E.translateTextLineMatrix(y[0],y[1]),E.textMatrix=E.textLineMatrix.slice();break;case n.OPS.nextLine:E.carriageReturn();break;case n.OPS.setTextMatrix:E.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]),E.setTextLineMatrix(y[0],y[1],y[2],y[3],y[4],y[5]),F();break;case n.OPS.setCharSpacing:E.charSpacing=y[0];break;case n.OPS.setWordSpacing:E.wordSpacing=y[0];break;case n.OPS.beginText:E.textMatrix=n.IDENTITY_MATRIX.slice(),E.textLineMatrix=n.IDENTITY_MATRIX.slice();break;case n.OPS.showSpacedText:if(!r.state.font){S.ensureStateFont(r.state);continue}const t=(E.font.vertical?1:-1)*E.fontSize/1e3,h=y[0];for(let e=0,i=h.length;e<i-1;e++){const i=h[e];if("string"==typeof i)C.push(i);else if("number"==typeof i&&0!==i){const e=C.join("");C.length=0,U({chars:e,extraSpacing:i*t})}}const p=h[h.length-1];if("string"==typeof p&&C.push(p),C.length>0){const t=C.join("");C.length=0,U({chars:t,extraSpacing:0})}break;case n.OPS.showText:if(!r.state.font){S.ensureStateFont(r.state);continue}U({chars:y[0],extraSpacing:0});break;case n.OPS.nextLineShowText:if(!r.state.font){S.ensureStateFont(r.state);continue}E.carriageReturn(),U({chars:y[0],extraSpacing:0});break;case n.OPS.nextLineSetSpacingShowText:if(!r.state.font){S.ensureStateFont(r.state);continue}E.wordSpacing=y[0],E.charSpacing=y[1],E.carriageReturn(),U({chars:y[2],extraSpacing:0});break;case n.OPS.paintXObject:V(),A||(A=i.get("XObject")||s.Dict.empty);var x=y[0]instanceof s.Name,M=y[0].name;if(x&&_.getByName(M))break;return void f(new Promise((function(t,h){if(!x)throw new n.FormatError("XObject must be referred to by name.");let p=A.getRaw(M);if(p instanceof s.Ref){if(_.getByRef(p))return void t();if(S.globalImageCache.getData(p,S.pageIndex))return void t();p=k.fetch(p)}if(!(p instanceof v.BaseStream))throw new n.FormatError("XObject should be a stream");const d=p.dict.get("Subtype");if(!(d instanceof s.Name))throw new n.FormatError("XObject should have a Name subtype");if("Form"!==d.name)return _.set(M,p.dict.objId,!0),void t();const f=r.state.clone(),g=new N(f),m=p.dict.getArray("Matrix");Array.isArray(m)&&6===m.length&&g.transform(m),q();const y={enqueueInvoked:!1,enqueue(t,e){this.enqueueInvoked=!0,l.enqueue(t,e)},get desiredSize(){return l.desiredSize},get ready(){return l.ready}};S.getTextContent({stream:p,task:e,resources:p.dict.get("Resources")||i,stateManager:g,combineTextItems:o,includeMarkedContent:a,sink:y,seenStyles:c,viewBox:u}).then((function(){y.enqueueInvoked||_.set(M,p.dict.objId,!0),t()}),h)})).catch((function(t){if(!(t instanceof n.AbortException)){if(!S.options.ignoreErrors)throw t;(0,n.warn)(`getTextContent - ignoring XObject: "${t}".`)}})));case n.OPS.setGState:if(x=y[0]instanceof s.Name,M=y[0].name,x&&T.getByName(M))break;return void f(new Promise((function(t,e){if(!x)throw new n.FormatError("GState must be referred to by name.");const r=i.get("ExtGState");if(!(r instanceof s.Dict))throw new n.FormatError("ExtGState should be a dictionary.");const o=r.get(M);if(!(o instanceof s.Dict))throw new n.FormatError("GState should be a dictionary.");const a=o.get("Font");if(!a)return T.set(M,o.objId,!0),void t();V(),E.fontName=null,E.fontSize=a[1],R(null,a[0]).then(t,e)})).catch((function(t){if(!(t instanceof n.AbortException)){if(!S.options.ignoreErrors)throw t;(0,n.warn)(`getTextContent - ignoring ExtGState: "${t}".`)}})));case n.OPS.beginMarkedContent:a&&d.items.push({type:"beginMarkedContent",tag:y[0]instanceof s.Name?y[0].name:null});break;case n.OPS.beginMarkedContentProps:if(a){V();let t=null;y[1]instanceof s.Dict&&(t=y[1].get("MCID")),d.items.push({type:"beginMarkedContentProps",id:Number.isInteger(t)?`${S.idFactory.getPageObjId()}_mcid${t}`:null,tag:y[0]instanceof s.Name?y[0].name:null})}break;case n.OPS.endMarkedContent:a&&(V(),d.items.push({type:"endMarkedContent"}))}if(d.items.length>=l.desiredSize){m=!0;break}}m?f(P):(V(),q(),h())})).catch((t=>{if(!(t instanceof n.AbortException)){if(this.options.ignoreErrors)return(0,n.warn)(`getTextContent - ignoring errors during "${e.name}" task: "${t}".`),V(),void q();throw t}}))}extractDataStructures(t,e,i){const r=this.xref;let o;const c=this.readToUnicode(i.toUnicode||t.get("ToUnicode")||e.get("ToUnicode"));if(i.composite){const e=t.get("CIDSystemInfo");e instanceof s.Dict&&(i.cidSystemInfo={registry:(0,n.stringToPDFString)(e.get("Registry")),ordering:(0,n.stringToPDFString)(e.get("Ordering")),supplement:e.get("Supplement")});const r=t.get("CIDToGIDMap");r instanceof v.BaseStream&&(o=r.getBytes())}const h=[];let u,p=null;if(t.has("Encoding")){if(u=t.get("Encoding"),u instanceof s.Dict){if(p=u.get("BaseEncoding"),p=p instanceof s.Name?p.name:null,u.has("Differences")){const t=u.get("Differences");let e=0;for(let i=0,o=t.length;i<o;i++){const o=r.fetchIfRef(t[i]);if("number"==typeof o)e=o;else{if(!(o instanceof s.Name))throw new n.FormatError(`Invalid entry in 'Differences' array: ${o}`);h[e++]=o.name}}}}else if(u instanceof s.Name)p=u.name;else{const t="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new n.FormatError(t);(0,n.warn)(t)}"MacRomanEncoding"!==p&&"MacExpertEncoding"!==p&&"WinAnsiEncoding"!==p&&(p=null)}if(p)i.defaultEncoding=(0,l.getEncoding)(p);else{const t=!!(i.flags&a.FontFlags.Symbolic),e=!!(i.flags&a.FontFlags.Nonsymbolic);u=l.StandardEncoding,"TrueType"!==i.type||e||(u=l.WinAnsiEncoding),t&&(u=l.MacRomanEncoding,i.file&&!i.isInternalFont||(/Symbol/i.test(i.name)?u=l.SymbolSetEncoding:/Dingbats|Wingdings/i.test(i.name)&&(u=l.ZapfDingbatsEncoding))),i.defaultEncoding=u}return i.differences=h,i.baseEncodingName=p,i.hasEncoding=!!p||h.length>0,i.dict=t,c.then((t=>(i.toUnicode=t,this.buildToUnicode(i)))).then((t=>(i.toUnicode=t,o&&(i.cidToGidMap=this.readCidToGidMap(o,t)),i)))}_simpleFontToUnicode(t,e=!1){(0,n.assert)(!t.composite,"Must be a simple font.");const i=[],r=t.defaultEncoding.slice(),s=t.baseEncodingName,o=t.differences;for(const t in o){const e=o[t];".notdef"!==e&&(r[t]=e)}const a=(0,S.getGlyphsUnicode)();for(const n in r){let o=r[n];if(""!==o)if(void 0!==a[o])i[n]=String.fromCharCode(a[o]);else{let r=0;switch(o[0]){case"G":3===o.length&&(r=parseInt(o.substring(1),16));break;case"g":5===o.length&&(r=parseInt(o.substring(1),16));break;case"C":case"c":if(o.length>=3&&o.length<=4){const i=o.substring(1);if(e){r=parseInt(i,16);break}if(r=+i,Number.isNaN(r)&&Number.isInteger(parseInt(i,16)))return this._simpleFontToUnicode(t,!0)}break;default:const i=(0,h.getUnicodeForGlyph)(o,a);-1!==i&&(r=i)}if(r>0&&r<=1114111&&Number.isInteger(r)){if(s&&r===+n){const t=(0,l.getEncoding)(s);if(t&&(o=t[n])){i[n]=String.fromCharCode(a[o]);continue}}i[n]=String.fromCodePoint(r)}}}return i}async buildToUnicode(t){if(t.hasIncludedToUnicodeMap=!!t.toUnicode&&t.toUnicode.length>0,t.hasIncludedToUnicodeMap)return!t.composite&&t.hasEncoding&&(t.fallbackToUnicode=this._simpleFontToUnicode(t)),t.toUnicode;if(!t.composite)return new d.ToUnicodeMap(this._simpleFontToUnicode(t));if(t.composite&&(t.cMap.builtInCMap&&!(t.cMap instanceof r.IdentityCMap)||"Adobe"===t.cidSystemInfo.registry&&("GB1"===t.cidSystemInfo.ordering||"CNS1"===t.cidSystemInfo.ordering||"Japan1"===t.cidSystemInfo.ordering||"Korea1"===t.cidSystemInfo.ordering))){const{registry:e,ordering:i}=t.cidSystemInfo,o=s.Name.get(`${e}-${i}-UCS2`),a=await r.CMapFactory.create({encoding:o,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),l=[];return t.cMap.forEach((function(t,e){if(e>65535)throw new n.FormatError("Max size of CID is 65,535");const i=a.lookup(e);i&&(l[t]=String.fromCharCode((i.charCodeAt(0)<<8)+i.charCodeAt(1)))})),new d.ToUnicodeMap(l)}return new d.IdentityToUnicodeMap(t.firstChar,t.lastChar)}readToUnicode(t){return t?t instanceof s.Name?r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){return t instanceof r.IdentityCMap?new d.IdentityToUnicodeMap(0,65535):new d.ToUnicodeMap(t.getMap())})):t instanceof v.BaseStream?r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){if(t instanceof r.IdentityCMap)return new d.IdentityToUnicodeMap(0,65535);const e=new Array(t.length);return t.forEach((function(t,i){if("number"==typeof i)return void(e[t]=String.fromCodePoint(i));const n=[];for(let t=0;t<i.length;t+=2){const e=i.charCodeAt(t)<<8|i.charCodeAt(t+1);if(55296!=(63488&e)){n.push(e);continue}t+=2;const r=i.charCodeAt(t)<<8|i.charCodeAt(t+1);n.push(((1023&e)<<10)+(1023&r)+65536)}e[t]=String.fromCodePoint.apply(String,n)})),new d.ToUnicodeMap(e)}),(t=>{if(t instanceof n.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,n.warn)(`readToUnicode - ignoring ToUnicode data: "${t}".`),null;throw t})):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(t,e){const i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n++]<<8|t[n],s=n>>1;(0!==r||e.has(s))&&(i[s]=r)}return i}extractWidths(t,e,i){const n=this.xref;let r=[],o=0;const l=[];let c,h,u,p,d,f,g,m;if(i.composite){if(o=t.has("DW")?t.get("DW"):1e3,m=t.get("W"),m)for(h=0,u=m.length;h<u;h++)if(f=n.fetchIfRef(m[h++]),g=n.fetchIfRef(m[h]),Array.isArray(g))for(p=0,d=g.length;p<d;p++)r[f++]=n.fetchIfRef(g[p]);else{const t=n.fetchIfRef(m[++h]);for(p=f;p<=g;p++)r[p]=t}if(i.vertical){let e=t.getArray("DW2")||[880,-1e3];if(c=[e[1],.5*o,e[0]],e=t.get("W2"),e)for(h=0,u=e.length;h<u;h++)if(f=n.fetchIfRef(e[h++]),g=n.fetchIfRef(e[h]),Array.isArray(g))for(p=0,d=g.length;p<d;p++)l[f++]=[n.fetchIfRef(g[p++]),n.fetchIfRef(g[p++]),n.fetchIfRef(g[p])];else{const t=[n.fetchIfRef(e[++h]),n.fetchIfRef(e[++h]),n.fetchIfRef(e[++h])];for(p=f;p<=g;p++)l[p]=t}}}else{const a=i.firstChar;if(m=t.get("Widths"),m){for(p=a,h=0,u=m.length;h<u;h++)r[p++]=n.fetchIfRef(m[h]);o=parseFloat(e.get("MissingWidth"))||0}else{const e=t.get("BaseFont");if(e instanceof s.Name){const t=this.getBaseFontMetrics(e.name);r=this.buildCharCodeToWidth(t.widths,i),o=t.defaultWidth}}}let y=!0,v=o;for(const t in r){const e=r[t];if(e)if(v){if(v!==e){y=!1;break}}else v=e}y&&(i.flags|=a.FontFlags.FixedPitch),i.defaultWidth=o,i.widths=r,i.defaultVMetrics=c,i.vmetrics=l}isSerifFont(t){const e=t.split("-")[0];return e in(0,c.getSerifFonts)()||-1!==e.search(/serif/gi)}getBaseFontMetrics(t){let e=0,i=Object.create(null),n=!1,r=(0,c.getStdFontMap)()[t]||t;const s=(0,C.getMetrics)();r in s||(r=this.isSerifFont(t)?"Times-Roman":"Helvetica");const o=s[r];return"number"==typeof o?(e=o,n=!0):i=o(),{defaultWidth:e,monospace:n,widths:i}}buildCharCodeToWidth(t,e){const i=Object.create(null),n=e.differences,r=e.defaultEncoding;for(let e=0;e<256;e++)e in n&&t[n[e]]?i[e]=t[n[e]]:e in r&&t[r[e]]&&(i[e]=t[r[e]]);return i}preEvaluateFont(t){const e=t;let i=t.get("Subtype");if(!(i instanceof s.Name))throw new n.FormatError("invalid font Subtype");let r,o,a=!1;if("Type0"===i.name){const e=t.get("DescendantFonts");if(!e)throw new n.FormatError("Descendant fonts are not specified");if(!((t=Array.isArray(e)?this.xref.fetchIfRef(e[0]):e)instanceof s.Dict))throw new n.FormatError("Descendant font is not a dictionary.");if(i=t.get("Subtype"),!(i instanceof s.Name))throw new n.FormatError("invalid font Subtype");a=!0}const l=t.get("FirstChar")||0,c=t.get("LastChar")||(a?65535:255),h=t.get("FontDescriptor");if(h){r=new A.MurmurHash3_64;const i=e.getRaw("Encoding");if(i instanceof s.Name)r.update(i.name);else if(i instanceof s.Ref)r.update(i.toString());else if(i instanceof s.Dict)for(const t of i.getRawValues())if(t instanceof s.Name)r.update(t.name);else if(t instanceof s.Ref)r.update(t.toString());else if(Array.isArray(t)){const e=t.length,i=new Array(e);for(let n=0;n<e;n++){const e=t[n];e instanceof s.Name?i[n]=e.name:("number"==typeof e||e instanceof s.Ref)&&(i[n]=e.toString())}r.update(i.join())}if(r.update(`${l}-${c}`),o=t.get("ToUnicode")||e.get("ToUnicode"),o instanceof v.BaseStream){const t=o.str||o,e=t.buffer?new Uint8Array(t.buffer.buffer,0,t.bufferLength):new Uint8Array(t.bytes.buffer,t.start,t.end-t.start);r.update(e)}else o instanceof s.Name&&r.update(o.name);const n=t.get("Widths")||e.get("Widths");if(Array.isArray(n)){const t=[];for(const e of n)("number"==typeof e||e instanceof s.Ref)&&t.push(e.toString());r.update(t.join())}if(a){r.update("compositeFont");const i=t.get("W")||e.get("W");if(Array.isArray(i)){const t=[];for(const e of i)if("number"==typeof e||e instanceof s.Ref)t.push(e.toString());else if(Array.isArray(e)){const i=[];for(const t of e)("number"==typeof t||t instanceof s.Ref)&&i.push(t.toString());t.push(`[${i.join()}]`)}r.update(t.join())}const n=t.getRaw("CIDToGIDMap")||e.getRaw("CIDToGIDMap");n instanceof s.Name?r.update(n.name):n instanceof s.Ref?r.update(n.toString()):n instanceof v.BaseStream&&r.update(n.peekBytes())}}return{descriptor:h,dict:t,baseDict:e,composite:a,type:i.name,firstChar:l,lastChar:c,toUnicode:o,hash:r?r.hexdigest():""}}async translateFont({descriptor:t,dict:e,baseDict:i,composite:l,type:h,firstChar:u,lastChar:d,toUnicode:f,cssFontInfo:g}){const m="Type3"===h;let v;if(!t){if(!m){let t=e.get("BaseFont");if(!(t instanceof s.Name))throw new n.FormatError("Base font is not specified");t=t.name.replace(/[,_]/g,"-");const r=this.getBaseFontMetrics(t),l=t.split("-")[0],p=(this.isSerifFont(l)?a.FontFlags.Serif:0)|(r.monospace?a.FontFlags.FixedPitch:0)|((0,c.getSymbolsFonts)()[l]?a.FontFlags.Symbolic:a.FontFlags.Nonsymbolic);v={type:h,name:t,loadedName:i.loadedName,widths:r.widths,defaultWidth:r.defaultWidth,isSimulatedFlags:!0,flags:p,firstChar:u,lastChar:d,toUnicode:f,xHeight:0,capHeight:0,italicAngle:0,isType3Font:m};const g=e.get("Widths"),y=(0,c.getStandardFontName)(t);let b=null;return y&&(v.isStandardFont=!0,b=await this.fetchStandardFontData(y),v.isInternalFont=!!b),this.extractDataStructures(e,e,v).then((e=>{if(g){const t=[];let i=u;for(let e=0,n=g.length;e<n;e++)t[i++]=this.xref.fetchIfRef(g[e]);e.widths=t}else e.widths=this.buildCharCodeToWidth(r.widths,e);return new o.Font(t,b,e)}))}(t=new s.Dict(null)).set("FontName",s.Name.get(h)),t.set("FontBBox",e.getArray("FontBBox")||[0,0,0,0])}let b,w,x,S,k,C=t.get("FontName"),A=e.get("BaseFont");if("string"==typeof C&&(C=s.Name.get(C)),"string"==typeof A&&(A=s.Name.get(A)),!m){const t=C&&C.name,e=A&&A.name;t!==e&&((0,n.info)(`The FontDescriptor's FontName is "${t}" but should be the same as the Font's BaseFont "${e}".`),t&&e&&e.startsWith(t)&&(C=A))}if(C=C||A,!(C instanceof s.Name))throw new n.FormatError("invalid font name");try{b=t.get("FontFile","FontFile2","FontFile3")}catch(t){if(!this.options.ignoreErrors)throw t;(0,n.warn)(`translateFont - fetching "${C.name}" font file: "${t}".`),b=new y.NullStream}let _=!1,T=!1,O=null;if(b){if(b.dict){const t=b.dict.get("Subtype");t instanceof s.Name&&(w=t.name),x=b.dict.get("Length1"),S=b.dict.get("Length2"),k=b.dict.get("Length3")}}else if(g){const t=(0,p.getXfaFontName)(C.name);t&&(g.fontFamily=`${g.fontFamily}-PdfJS-XFA`,g.metrics=t.metrics||null,O=t.factors||null,b=await this.fetchStandardFontData(t.name),T=!!b,i=e=(0,p.getXfaFontDict)(C.name),l=!0)}else if(!m){const t=(0,c.getStandardFontName)(C.name);t&&(_=!0,b=await this.fetchStandardFontData(t),T=!!b)}if(v={type:h,name:C.name,subtype:w,file:b,length1:x,length2:S,length3:k,isStandardFont:_,isInternalFont:T,loadedName:i.loadedName,composite:l,fixedPitch:!1,fontMatrix:e.getArray("FontMatrix")||n.FONT_IDENTITY_MATRIX,firstChar:u,lastChar:d,toUnicode:f,bbox:t.getArray("FontBBox")||e.getArray("FontBBox"),ascent:t.get("Ascent"),descent:t.get("Descent"),xHeight:t.get("XHeight")||0,capHeight:t.get("CapHeight")||0,flags:t.get("Flags"),italicAngle:t.get("ItalicAngle")||0,isType3Font:m,cssFontInfo:g,scaleFactors:O},l){const t=i.get("Encoding");t instanceof s.Name&&(v.cidEncoding=t.name);const e=await r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});v.cMap=e,v.vertical=v.cMap.vertical}return this.extractDataStructures(e,i,v).then((i=>(this.extractWidths(e,t,i),new o.Font(C.name,b,i))))}static buildFontPaths(t,e,i,r){function s(e){const s=`${t.loadedName}_path_${e}`;try{if(t.renderer.hasBuiltPath(e))return;i.send("commonobj",[s,"FontPath",t.renderer.getPathJs(e)])}catch(t){if(r.ignoreErrors)return i.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.errorFontBuildPath}),void(0,n.warn)(`buildFontPaths - ignoring ${s} glyph: "${t}".`);throw t}}for(const t of e){s(t.fontChar);const e=t.accent;e&&e.fontChar&&s(e.fontChar)}}static get fallbackFontDict(){const t=new s.Dict;return t.set("BaseFont",s.Name.get("PDFJS-FallbackFont")),t.set("Type",s.Name.get("FallbackType")),t.set("Subtype",s.Name.get("FallbackType")),t.set("Encoding",s.Name.get("WinAnsiEncoding")),(0,n.shadow)(this,"fallbackFontDict",t)}}e.PartialEvaluator=R;class L{constructor({loadedName:t,font:e,dict:i,evaluatorOptions:n}){this.loadedName=t,this.font=e,this.dict=i,this._evaluatorOptions=n||O,this.type3Loaded=null,this.type3Dependencies=e.isType3Font?new Set:null,this.sent=!1}send(t){this.sent||(this.sent=!0,t.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(t){this.font.data&&(this.font.disableFontFace=!0,R.buildFontPaths(this.font,this.font.glyphCacheValues,t,this._evaluatorOptions))}loadType3Data(t,e,i){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const r=t.clone({ignoreErrors:!1});r.parsingType3Font=!0;const o=new s.RefSet(t.type3FontRefs);this.dict.objId&&!o.has(this.dict.objId)&&o.put(this.dict.objId),r.type3FontRefs=o;const a=this.font,l=this.type3Dependencies;let c=Promise.resolve();const h=this.dict.get("CharProcs"),u=this.dict.get("Resources")||e,p=Object.create(null),d=!a.bbox||(0,n.isArrayEqual)(a.bbox,[0,0,0,0]);for(const t of h.getKeys())c=c.then((()=>{const e=h.get(t),s=new _.OperatorList;return r.getOperatorList({stream:e,task:i,resources:u,operatorList:s}).then((()=>{s.fnArray[0]===n.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(s,d),p[t]=s.getIR();for(const t of s.dependencies)l.add(t)})).catch((function(e){(0,n.warn)(`Type3 font resource "${t}" is not available.`);const i=new _.OperatorList;p[t]=i.getIR()}))}));return this.type3Loaded=c.then((()=>{a.charProcOperatorList=p,this._bbox&&(a.isCharBBox=!0,a.bbox=this._bbox)})),this.type3Loaded}_removeType3ColorOperators(t,e=!1){if(e){this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]);const e=n.Util.normalizeRect(t.argsArray[0].slice(2));this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3])}let i=1,r=t.length;for(;i<r;){switch(t.fnArray[i]){case n.OPS.setStrokeColorSpace:case n.OPS.setFillColorSpace:case n.OPS.setStrokeColor:case n.OPS.setStrokeColorN:case n.OPS.setFillColor:case n.OPS.setFillColorN:case n.OPS.setStrokeGray:case n.OPS.setFillGray:case n.OPS.setStrokeRGBColor:case n.OPS.setFillRGBColor:case n.OPS.setStrokeCMYKColor:case n.OPS.setFillCMYKColor:case n.OPS.shadingFill:case n.OPS.setRenderingIntent:t.fnArray.splice(i,1),t.argsArray.splice(i,1),r--;continue;case n.OPS.setGState:const[e]=t.argsArray[i];let s=0,o=e.length;for(;s<o;){const[t]=e[s];switch(t){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":e.splice(s,1),o--;continue}s++}}i++}}}class N{constructor(t=new j){this.state=t,this.stateStack=[]}save(){const t=this.state;this.stateStack.push(this.state),this.state=t.clone()}restore(){const t=this.stateStack.pop();t&&(this.state=t)}transform(t){this.state.ctm=n.Util.transform(this.state.ctm,t)}}class B{constructor(){this.ctm=new Float32Array(n.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.textMatrix=n.IDENTITY_MATRIX.slice(),this.textLineMatrix=n.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(t,e,i,n,r,s){const o=this.textMatrix;o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s}setTextLineMatrix(t,e,i,n,r,s){const o=this.textLineMatrix;o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s}translateTextMatrix(t,e){const i=this.textMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5]}translateTextLineMatrix(t,e){const i=this.textLineMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const t=Object.create(this);return t.textMatrix=this.textMatrix.slice(),t.textLineMatrix=this.textLineMatrix.slice(),t.fontMatrix=this.fontMatrix.slice(),t}}class j{constructor(){this.ctm=new Float32Array(n.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=n.TextRenderingMode.FILL,this.fillColorSpace=w.ColorSpace.singletons.gray,this.strokeColorSpace=w.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class z{static get opMap(){const t=(0,k.getLookupTableFactory)((function(t){t.w={id:n.OPS.setLineWidth,numArgs:1,variableArgs:!1},t.J={id:n.OPS.setLineCap,numArgs:1,variableArgs:!1},t.j={id:n.OPS.setLineJoin,numArgs:1,variableArgs:!1},t.M={id:n.OPS.setMiterLimit,numArgs:1,variableArgs:!1},t.d={id:n.OPS.setDash,numArgs:2,variableArgs:!1},t.ri={id:n.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},t.i={id:n.OPS.setFlatness,numArgs:1,variableArgs:!1},t.gs={id:n.OPS.setGState,numArgs:1,variableArgs:!1},t.q={id:n.OPS.save,numArgs:0,variableArgs:!1},t.Q={id:n.OPS.restore,numArgs:0,variableArgs:!1},t.cm={id:n.OPS.transform,numArgs:6,variableArgs:!1},t.m={id:n.OPS.moveTo,numArgs:2,variableArgs:!1},t.l={id:n.OPS.lineTo,numArgs:2,variableArgs:!1},t.c={id:n.OPS.curveTo,numArgs:6,variableArgs:!1},t.v={id:n.OPS.curveTo2,numArgs:4,variableArgs:!1},t.y={id:n.OPS.curveTo3,numArgs:4,variableArgs:!1},t.h={id:n.OPS.closePath,numArgs:0,variableArgs:!1},t.re={id:n.OPS.rectangle,numArgs:4,variableArgs:!1},t.S={id:n.OPS.stroke,numArgs:0,variableArgs:!1},t.s={id:n.OPS.closeStroke,numArgs:0,variableArgs:!1},t.f={id:n.OPS.fill,numArgs:0,variableArgs:!1},t.F={id:n.OPS.fill,numArgs:0,variableArgs:!1},t["f*"]={id:n.OPS.eoFill,numArgs:0,variableArgs:!1},t.B={id:n.OPS.fillStroke,numArgs:0,variableArgs:!1},t["B*"]={id:n.OPS.eoFillStroke,numArgs:0,variableArgs:!1},t.b={id:n.OPS.closeFillStroke,numArgs:0,variableArgs:!1},t["b*"]={id:n.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},t.n={id:n.OPS.endPath,numArgs:0,variableArgs:!1},t.W={id:n.OPS.clip,numArgs:0,variableArgs:!1},t["W*"]={id:n.OPS.eoClip,numArgs:0,variableArgs:!1},t.BT={id:n.OPS.beginText,numArgs:0,variableArgs:!1},t.ET={id:n.OPS.endText,numArgs:0,variableArgs:!1},t.Tc={id:n.OPS.setCharSpacing,numArgs:1,variableArgs:!1},t.Tw={id:n.OPS.setWordSpacing,numArgs:1,variableArgs:!1},t.Tz={id:n.OPS.setHScale,numArgs:1,variableArgs:!1},t.TL={id:n.OPS.setLeading,numArgs:1,variableArgs:!1},t.Tf={id:n.OPS.setFont,numArgs:2,variableArgs:!1},t.Tr={id:n.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},t.Ts={id:n.OPS.setTextRise,numArgs:1,variableArgs:!1},t.Td={id:n.OPS.moveText,numArgs:2,variableArgs:!1},t.TD={id:n.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},t.Tm={id:n.OPS.setTextMatrix,numArgs:6,variableArgs:!1},t["T*"]={id:n.OPS.nextLine,numArgs:0,variableArgs:!1},t.Tj={id:n.OPS.showText,numArgs:1,variableArgs:!1},t.TJ={id:n.OPS.showSpacedText,numArgs:1,variableArgs:!1},t["'"]={id:n.OPS.nextLineShowText,numArgs:1,variableArgs:!1},t['"']={id:n.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},t.d0={id:n.OPS.setCharWidth,numArgs:2,variableArgs:!1},t.d1={id:n.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},t.CS={id:n.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},t.cs={id:n.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},t.SC={id:n.OPS.setStrokeColor,numArgs:4,variableArgs:!0},t.SCN={id:n.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},t.sc={id:n.OPS.setFillColor,numArgs:4,variableArgs:!0},t.scn={id:n.OPS.setFillColorN,numArgs:33,variableArgs:!0},t.G={id:n.OPS.setStrokeGray,numArgs:1,variableArgs:!1},t.g={id:n.OPS.setFillGray,numArgs:1,variableArgs:!1},t.RG={id:n.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},t.rg={id:n.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},t.K={id:n.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},t.k={id:n.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},t.sh={id:n.OPS.shadingFill,numArgs:1,variableArgs:!1},t.BI={id:n.OPS.beginInlineImage,numArgs:0,variableArgs:!1},t.ID={id:n.OPS.beginImageData,numArgs:0,variableArgs:!1},t.EI={id:n.OPS.endInlineImage,numArgs:1,variableArgs:!1},t.Do={id:n.OPS.paintXObject,numArgs:1,variableArgs:!1},t.MP={id:n.OPS.markPoint,numArgs:1,variableArgs:!1},t.DP={id:n.OPS.markPointProps,numArgs:2,variableArgs:!1},t.BMC={id:n.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},t.BDC={id:n.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},t.EMC={id:n.OPS.endMarkedContent,numArgs:0,variableArgs:!1},t.BX={id:n.OPS.beginCompat,numArgs:0,variableArgs:!1},t.EX={id:n.OPS.endCompat,numArgs:0,variableArgs:!1},t.BM=null,t.BD=null,t.true=null,t.fa=null,t.fal=null,t.fals=null,t.false=null,t.nu=null,t.nul=null,t.null=null}));return(0,n.shadow)(this,"opMap",t())}static get MAX_INVALID_PATH_OPS(){return(0,n.shadow)(this,"MAX_INVALID_PATH_OPS",10)}constructor(t,e,i=new N){this.parser=new g.Parser({lexer:new g.Lexer(t,z.opMap),xref:e}),this.stateManager=i,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(t){let e=t.args;for(;;){const i=this.parser.getObj();if(i instanceof s.Cmd){const r=i.cmd,s=z.opMap[r];if(!s){(0,n.warn)(`Unknown command "${r}".`);continue}const o=s.id,a=s.numArgs;let l=null!==e?e.length:0;if(s.variableArgs)l>a&&(0,n.info)(`Command ${r}: expected [0, ${a}] args, but received ${l} args.`);else{if(l!==a){const t=this.nonProcessedArgs;for(;l>a;)t.push(e.shift()),l--;for(;l<a&&0!==t.length;)null===e&&(e=[]),e.unshift(t.pop()),l++}if(l<a){const t=`command ${r}: expected ${a} args, but received ${l} args.`;if(o>=n.OPS.moveTo&&o<=n.OPS.endPath&&++this._numInvalidPathOPS>z.MAX_INVALID_PATH_OPS)throw new n.FormatError(`Invalid ${t}`);(0,n.warn)(`Skipping ${t}`),null!==e&&(e.length=0);continue}}return this.preprocessCommand(o,e),t.fn=o,t.args=e,!0}if(i===s.EOF)return!1;if(null!==i&&(null===e&&(e=[]),e.push(i),e.length>33))throw new n.FormatError("Too many arguments")}}preprocessCommand(t,e){switch(0|t){case n.OPS.save:this.stateManager.save();break;case n.OPS.restore:this.stateManager.restore();break;case n.OPS.transform:this.stateManager.transform(e)}}}e.EvaluatorPreprocessor=z},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityCMap=e.CMapFactory=e.CMap=void 0;var n=i(2),r=i(5),s=i(9),o=i(27),a=i(8),l=i(10);const c=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],h=2**24-1;class u{constructor(t=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=t}addCodespaceRange(t,e,i){this.codespaceRanges[t-1].push(e,i),this.numCodespaceRanges++}mapCidRange(t,e,i){if(e-t>h)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;t<=e;)this._map[t++]=i++}mapBfRange(t,e,i){if(e-t>h)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const n=i.length-1;for(;t<=e;){this._map[t++]=i;const e=i.charCodeAt(n)+1;i=e>255?i.substring(0,n-1)+String.fromCharCode(i.charCodeAt(n-1)+1)+"\0":i.substring(0,n)+String.fromCharCode(e)}}mapBfRangeToArray(t,e,i){if(e-t>h)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const n=i.length;let r=0;for(;t<=e&&r<n;)this._map[t]=i[r++],++t}mapOne(t,e){this._map[t]=e}lookup(t){return this._map[t]}contains(t){return void 0!==this._map[t]}forEach(t){const e=this._map,i=e.length;if(i<=65536)for(let n=0;n<i;n++)void 0!==e[n]&&t(n,e[n]);else for(const i in e)t(i,e[i])}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const i in e)if(e[i]===t)return 0|i;return-1}getMap(){return this._map}readCharCode(t,e,i){let n=0;const r=this.codespaceRanges;for(let s=0,o=r.length;s<o;s++){n=(n<<8|t.charCodeAt(e+s))>>>0;const o=r[s];for(let t=0,e=o.length;t<e;){const e=o[t++],r=o[t++];if(n>=e&&n<=r)return i.charcode=n,void(i.length=s+1)}}i.charcode=0,i.length=1}getCharCodeLength(t){const e=this.codespaceRanges;for(let i=0,n=e.length;i<n;i++){const n=e[i];for(let e=0,r=n.length;e<r;){const r=n[e++],s=n[e++];if(t>=r&&t<=s)return i+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(let t=0;t<65536;t++)if(this._map[t]!==t)return!1;return!0}}e.CMap=u;class p extends u{constructor(t,e){super(),this.vertical=t,this.addCodespaceRange(e,0,65535)}mapCidRange(t,e,i){(0,n.unreachable)("should not call mapCidRange")}mapBfRange(t,e,i){(0,n.unreachable)("should not call mapBfRange")}mapBfRangeToArray(t,e,i){(0,n.unreachable)("should not call mapBfRangeToArray")}mapOne(t,e){(0,n.unreachable)("should not call mapCidOne")}lookup(t){return Number.isInteger(t)&&t<=65535?t:void 0}contains(t){return Number.isInteger(t)&&t<=65535}forEach(t){for(let e=0;e<=65535;e++)t(e,e)}charCodeOf(t){return Number.isInteger(t)&&t<=65535?t:-1}getMap(){const t=new Array(65536);for(let e=0;e<=65535;e++)t[e]=e;return t}get length(){return 65536}get isIdentityCMap(){(0,n.unreachable)("should not access .isIdentityCMap")}}e.IdentityCMap=p;const d=function(){function t(t,e){let i=0;for(let n=0;n<=e;n++)i=i<<8|t[n];return i>>>0}function e(t,e){return 1===e?String.fromCharCode(t[0],t[1]):3===e?String.fromCharCode(t[0],t[1],t[2],t[3]):String.fromCharCode.apply(null,t.subarray(0,e+1))}function i(t,e,i){let n=0;for(let r=i;r>=0;r--)n+=t[r]+e[r],t[r]=255&n,n>>=8}function r(t,e){let i=1;for(let n=e;n>=0&&i>0;n--)i+=t[n],t[n]=255&i,i>>=8}const s=16;class o{constructor(t){this.buffer=t,this.pos=0,this.end=t.length,this.tmpBuf=new Uint8Array(19)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let t,e=0;do{const i=this.readByte();if(i<0)throw new n.FormatError("unexpected EOF in bcmap");t=!(128&i),e=e<<7|127&i}while(!t);return e}readSigned(){const t=this.readNumber();return 1&t?~(t>>>1):t>>>1}readHex(t,e){t.set(this.buffer.subarray(this.pos,this.pos+e+1)),this.pos+=e+1}readHexNumber(t,e){let i;const r=this.tmpBuf;let s=0;do{const t=this.readByte();if(t<0)throw new n.FormatError("unexpected EOF in bcmap");i=!(128&t),r[s++]=127&t}while(!i);let o=e,a=0,l=0;for(;o>=0;){for(;l<8&&r.length>0;)a|=r[--s]<<l,l+=7;t[o]=255&a,o--,a>>=8,l-=8}}readHexSigned(t,e){this.readHexNumber(t,e);const i=1&t[e]?255:0;let n=0;for(let r=0;r<=e;r++)n=(1&n)<<8|t[r],t[r]=n>>1^i}readString(){const t=this.readNumber();let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(this.readNumber());return e}}return class{async process(n,a,l){const c=new o(n),h=c.readByte();a.vertical=!!(1&h);let u=null;const p=new Uint8Array(s),d=new Uint8Array(s),f=new Uint8Array(s),g=new Uint8Array(s),m=new Uint8Array(s);let y,v;for(;(v=c.readByte())>=0;){const n=v>>5;if(7===n){switch(31&v){case 0:c.readString();break;case 1:u=c.readString()}continue}const o=!!(16&v),l=15&v;if(l+1>s)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const h=1,b=c.readNumber();switch(n){case 0:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),a.addCodespaceRange(l+1,t(p,l),t(d,l));for(let e=1;e<b;e++)r(d,l),c.readHexNumber(p,l),i(p,d,l),c.readHexNumber(d,l),i(d,p,l),a.addCodespaceRange(l+1,t(p,l),t(d,l));break;case 1:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),c.readNumber();for(let t=1;t<b;t++)r(d,l),c.readHexNumber(p,l),i(p,d,l),c.readHexNumber(d,l),i(d,p,l),c.readNumber();break;case 2:c.readHex(f,l),y=c.readNumber(),a.mapOne(t(f,l),y);for(let e=1;e<b;e++)r(f,l),o||(c.readHexNumber(m,l),i(f,m,l)),y=c.readSigned()+(y+1),a.mapOne(t(f,l),y);break;case 3:c.readHex(p,l),c.readHexNumber(d,l),i(d,p,l),y=c.readNumber(),a.mapCidRange(t(p,l),t(d,l),y);for(let e=1;e<b;e++)r(d,l),o?p.set(d):(c.readHexNumber(p,l),i(p,d,l)),c.readHexNumber(d,l),i(d,p,l),y=c.readNumber(),a.mapCidRange(t(p,l),t(d,l),y);break;case 4:c.readHex(f,h),c.readHex(g,l),a.mapOne(t(f,h),e(g,l));for(let n=1;n<b;n++)r(f,h),o||(c.readHexNumber(m,h),i(f,m,h)),r(g,l),c.readHexSigned(m,l),i(g,m,l),a.mapOne(t(f,h),e(g,l));break;case 5:c.readHex(p,h),c.readHexNumber(d,h),i(d,p,h),c.readHex(g,l),a.mapBfRange(t(p,h),t(d,h),e(g,l));for(let n=1;n<b;n++)r(d,h),o?p.set(d):(c.readHexNumber(p,h),i(p,d,h)),c.readHexNumber(d,h),i(d,p,h),c.readHex(g,l),a.mapBfRange(t(p,h),t(d,h),e(g,l));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${n}`)}}return u?l(u):a}}}(),f=function(){function t(t){let e=0;for(let i=0;i<t.length;i++)e=e<<8|t.charCodeAt(i);return e>>>0}function e(t){if("string"!=typeof t)throw new n.FormatError("Malformed CMap: expected string.")}function i(t){if(!Number.isInteger(t))throw new n.FormatError("Malformed CMap: expected int.")}function h(i,n){for(;;){let s=n.getObj();if(s===r.EOF)break;if((0,r.isCmd)(s,"endbfchar"))return;e(s);const o=t(s);s=n.getObj(),e(s);const a=s;i.mapOne(o,a)}}function f(i,s){for(;;){let n=s.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endbfrange"))return;e(n);const o=t(n);n=s.getObj(),e(n);const a=t(n);if(n=s.getObj(),Number.isInteger(n)||"string"==typeof n){const t=Number.isInteger(n)?String.fromCharCode(n):n;i.mapBfRange(o,a,t)}else{if(!(0,r.isCmd)(n,"["))break;{n=s.getObj();const t=[];for(;!(0,r.isCmd)(n,"]")&&n!==r.EOF;)t.push(n),n=s.getObj();i.mapBfRangeToArray(o,a,t)}}}throw new n.FormatError("Invalid bf range.")}function g(n,s){for(;;){let o=s.getObj();if(o===r.EOF)break;if((0,r.isCmd)(o,"endcidchar"))return;e(o);const a=t(o);o=s.getObj(),i(o);const l=o;n.mapOne(a,l)}}function m(n,s){for(;;){let o=s.getObj();if(o===r.EOF)break;if((0,r.isCmd)(o,"endcidrange"))return;e(o);const a=t(o);o=s.getObj(),e(o);const l=t(o);o=s.getObj(),i(o);const c=o;n.mapCidRange(a,l,c)}}function y(e,i){for(;;){let n=i.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endcodespacerange"))return;if("string"!=typeof n)break;const s=t(n);if(n=i.getObj(),"string"!=typeof n)break;const o=t(n);e.addCodespaceRange(n.length,s,o)}throw new n.FormatError("Invalid codespace range.")}function v(t,e){const i=e.getObj();Number.isInteger(i)&&(t.vertical=!!i)}function b(t,e){const i=e.getObj();i instanceof r.Name&&(t.name=i.name)}async function w(t,e,i,s){let o,l;t:for(;;)try{const i=e.getObj();if(i===r.EOF)break;if(i instanceof r.Name)"WMode"===i.name?v(t,e):"CMapName"===i.name&&b(t,e),o=i;else if(i instanceof r.Cmd)switch(i.cmd){case"endcmap":break t;case"usecmap":o instanceof r.Name&&(l=o.name);break;case"begincodespacerange":y(t,e);break;case"beginbfchar":h(t,e);break;case"begincidchar":g(t,e);break;case"beginbfrange":f(t,e);break;case"begincidrange":m(t,e)}}catch(t){if(t instanceof a.MissingDataException)throw t;(0,n.warn)("Invalid cMap data: "+t);continue}return!s&&l&&(s=l),s?x(t,i,s):t}async function x(t,e,i){if(t.useCMap=await S(i,e),0===t.numCodespaceRanges){const e=t.useCMap.codespaceRanges;for(let i=0;i<e.length;i++)t.codespaceRanges[i]=e[i].slice();t.numCodespaceRanges=t.useCMap.numCodespaceRanges}return t.useCMap.forEach((function(e,i){t.contains(e)||t.mapOne(e,t.useCMap.lookup(e))})),t}async function S(t,e){if("Identity-H"===t)return new p(!1,2);if("Identity-V"===t)return new p(!0,2);if(!c.includes(t))throw new Error("Unknown CMap name: "+t);if(!e)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:i,compressionType:r}=await e(t),s=new u(!0);if(r===n.CMapCompressionType.BINARY)return(new d).process(i,s,(t=>x(s,e,t)));if(r===n.CMapCompressionType.NONE){const t=new o.Lexer(new l.Stream(i));return w(s,t,e,null)}throw new Error("TODO: Only BINARY/NONE CMap compression is currently supported.")}return{async create(t){const e=t.encoding,i=t.fetchBuiltInCMap,n=t.useCMap;if(e instanceof r.Name)return S(e.name,i);if(e instanceof s.BaseStream){const t=await w(new u,new o.Lexer(e),i,n);return t.isIdentityCMap?S(t.name,i):t}throw new Error("Encoding required.")}}}();e.CMapFactory=f},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.Linearization=e.Lexer=void 0;var n=i(2),r=i(5),s=i(8),o=i(28),a=i(30),l=i(31),c=i(33),h=i(34),u=i(37),p=i(39),d=i(41),f=i(10),g=i(42),m=i(43);function y(t){const e=t.length;let i=1,n=0;for(let r=0;r<e;++r)i+=255&t[r],n+=i;return n%65521<<16|i%65521}class v{constructor({lexer:t,xref:e,allowStreams:i=!1,recoveryMode:n=!1}){this.lexer=t,this.xref=e,this.allowStreams=i,this.recoveryMode=n,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof r.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(t){if(t instanceof s.MissingDataException)throw t;return!1}}getObj(t=null){const e=this.buf1;if(this.shift(),e instanceof r.Cmd)switch(e.cmd){case"BI":return this.makeInlineImage(t);case"[":const i=[];for(;!(0,r.isCmd)(this.buf1,"]")&&this.buf1!==r.EOF;)i.push(this.getObj(t));if(this.buf1===r.EOF){if(this.recoveryMode)return i;throw new s.ParserEOFException("End of file inside array.")}return this.shift(),i;case"<<":const o=new r.Dict(this.xref);for(;!(0,r.isCmd)(this.buf1,">>")&&this.buf1!==r.EOF;){if(!(this.buf1 instanceof r.Name)){(0,n.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const e=this.buf1.name;if(this.shift(),this.buf1===r.EOF)break;o.set(e,this.getObj(t))}if(this.buf1===r.EOF){if(this.recoveryMode)return o;throw new s.ParserEOFException("End of file inside dictionary.")}return(0,r.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(o,t):o:(this.shift(),o);default:return e}if(Number.isInteger(e)){if(Number.isInteger(this.buf1)&&(0,r.isCmd)(this.buf2,"R")){const t=r.Ref.get(e,this.buf1);return this.shift(),this.shift(),t}return e}return"string"==typeof e&&t?t.decryptString(e):e}findDefaultInlineStreamEnd(t){const e=this.lexer,i=t.pos;let o,a,l=0;for(;-1!==(o=t.getByte());)if(0===l)l=69===o?1:0;else if(1===l)l=73===o?2:0;else if((0,n.assert)(2===l,"findDefaultInlineStreamEnd - invalid state."),32===o||10===o||13===o){a=t.pos;const i=t.peekBytes(10);for(let t=0,e=i.length;t<e;t++)if(o=i[t],(0!==o||0===i[t+1])&&10!==o&&13!==o&&(o<32||o>127)){l=0;break}if(2!==l)continue;if(e.knownCommands){const t=e.peekObj();t instanceof r.Cmd&&!e.knownCommands[t.cmd]&&(l=0)}else(0,n.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(2===l)break}else l=0;-1===o&&((0,n.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),a&&((0,n.warn)('... trying to recover by using the last "EI" occurrence.'),t.skip(-(t.pos-a))));let c=4;return t.skip(-c),o=t.peekByte(),t.skip(c),(0,s.isWhiteSpace)(o)||c--,t.pos-c-i}findDCTDecodeInlineStreamEnd(t){const e=t.pos;let i,r,s=!1;for(;-1!==(i=t.getByte());)if(255===i){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:s=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:r=t.getUint16(),r>2?t.skip(r-2):t.skip(-2)}if(s)break}const o=t.pos-e;return-1===i?((0,n.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),t.skip(-o),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),o)}findASCII85DecodeInlineStreamEnd(t){const e=t.pos;let i;for(;-1!==(i=t.getByte());)if(126===i){const e=t.pos;for(i=t.peekByte();(0,s.isWhiteSpace)(i);)t.skip(),i=t.peekByte();if(62===i){t.skip();break}if(t.pos>e){const e=t.peekBytes(2);if(69===e[0]&&73===e[1])break}}const r=t.pos-e;return-1===i?((0,n.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-r),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),r)}findASCIIHexDecodeInlineStreamEnd(t){const e=t.pos;let i;for(;-1!==(i=t.getByte())&&62!==i;);const r=t.pos-e;return-1===i?((0,n.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-r),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),r)}inlineStreamSkipEI(t){let e,i=0;for(;-1!==(e=t.getByte());)if(0===i)i=69===e?1:0;else if(1===i)i=73===e?2:0;else if(2===i)break}makeInlineImage(t){const e=this.lexer,i=e.stream,s=new r.Dict(this.xref);let o;for(;!(0,r.isCmd)(this.buf1,"ID")&&this.buf1!==r.EOF;){if(!(this.buf1 instanceof r.Name))throw new n.FormatError("Dictionary key must be a name object");const e=this.buf1.name;if(this.shift(),this.buf1===r.EOF)break;s.set(e,this.getObj(t))}-1!==e.beginInlineImagePos&&(o=i.pos-e.beginInlineImagePos);const a=s.get("F","Filter");let l;if(a instanceof r.Name)l=a.name;else if(Array.isArray(a)){const t=this.xref.fetchIfRef(a[0]);t instanceof r.Name&&(l=t.name)}const c=i.pos;let h;switch(l){case"DCT":case"DCTDecode":h=this.findDCTDecodeInlineStreamEnd(i);break;case"A85":case"ASCII85Decode":h=this.findASCII85DecodeInlineStreamEnd(i);break;case"AHx":case"ASCIIHexDecode":h=this.findASCIIHexDecodeInlineStreamEnd(i);break;default:h=this.findDefaultInlineStreamEnd(i)}let u,p=i.makeSubStream(c,h,s);if(h<1e3&&o<5552){const t=p.getBytes();p.reset();const n=i.pos;i.pos=e.beginInlineImagePos;const s=i.getBytes(o);i.pos=n,u=y(t)+"_"+y(s);const a=this.imageCache[u];if(void 0!==a)return this.buf2=r.Cmd.get("EI"),this.shift(),a.reset(),a}return t&&(p=t.createStream(p,h)),p=this.filter(p,s,h),p.dict=s,void 0!==u&&(p.cacheKey=`inline_${h}_${u}`,this.imageCache[u]=p),this.buf2=r.Cmd.get("EI"),this.shift(),p}_findStreamLength(t,e){const{stream:i}=this.lexer;i.pos=t;const n=e.length;for(;i.pos<i.end;){const r=i.peekBytes(2048),s=r.length-n;if(s<=0)break;let o=0;for(;o<s;){let s=0;for(;s<n&&r[o+s]===e[s];)s++;if(s>=n)return i.pos+=o,i.pos-t;o++}i.pos+=s}return-1}makeStream(t,e){const i=this.lexer;let o=i.stream;i.skipToNextLine();const a=o.pos-1;let l=t.get("Length");if(Number.isInteger(l)||((0,n.info)(`Bad length "${l&&l.toString()}" in stream.`),l=0),o.pos=a+l,i.nextChar(),this.tryShift()&&(0,r.isCmd)(this.buf2,"endstream"))this.shift();else{const t=new Uint8Array([101,110,100,115,116,114,101,97,109]);let e=this._findStreamLength(a,t);if(e<0){const i=1;for(let r=1;r<=i;r++){const i=t.length-r,l=t.slice(0,i),c=this._findStreamLength(a,l);if(c>=0){const t=o.peekBytes(i+1)[i];if(!(0,s.isWhiteSpace)(t))break;(0,n.info)(`Found "${(0,n.bytesToString)(l)}" when searching for endstream command.`),e=c;break}}if(e<0)throw new n.FormatError("Missing endstream command.")}l=e,i.nextChar(),this.shift(),this.shift()}return this.shift(),o=o.makeSubStream(a,l,t),e&&(o=e.createStream(o,l)),o=this.filter(o,t,l),o.dict=t,o}filter(t,e,i){let s=e.get("F","Filter"),o=e.get("DP","DecodeParms");if(s instanceof r.Name)return Array.isArray(o)&&(0,n.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(t,s.name,i,o);let a=i;if(Array.isArray(s)){const e=s,i=o;for(let l=0,c=e.length;l<c;++l){if(s=this.xref.fetchIfRef(e[l]),!(s instanceof r.Name))throw new n.FormatError(`Bad filter name "${s}"`);o=null,Array.isArray(i)&&l in i&&(o=this.xref.fetchIfRef(i[l])),t=this.makeFilter(t,s.name,a,o),a=null}}return t}makeFilter(t,e,i,r){if(0===i)return(0,n.warn)(`Empty "${e}" stream.`),new f.NullStream;const y=this.xref.stats;try{switch(e){case"Fl":case"FlateDecode":return y.addStreamType(n.StreamType.FLATE),r?new g.PredictorStream(new c.FlateStream(t,i),i,r):new c.FlateStream(t,i);case"LZW":case"LZWDecode":y.addStreamType(n.StreamType.LZW);let e=1;return r?(r.has("EarlyChange")&&(e=r.get("EarlyChange")),new g.PredictorStream(new d.LZWStream(t,i,e),i,r)):new d.LZWStream(t,i,e);case"DCT":case"DCTDecode":return y.addStreamType(n.StreamType.DCT),new u.JpegStream(t,i,r);case"JPX":case"JPXDecode":return y.addStreamType(n.StreamType.JPX),new p.JpxStream(t,i,r);case"A85":case"ASCII85Decode":return y.addStreamType(n.StreamType.A85),new o.Ascii85Stream(t,i);case"AHx":case"ASCIIHexDecode":return y.addStreamType(n.StreamType.AHX),new a.AsciiHexStream(t,i);case"CCF":case"CCITTFaxDecode":return y.addStreamType(n.StreamType.CCF),new l.CCITTFaxStream(t,i,r);case"RL":case"RunLengthDecode":return y.addStreamType(n.StreamType.RLX),new m.RunLengthStream(t,i);case"JBIG2Decode":return y.addStreamType(n.StreamType.JBIG),new h.Jbig2Stream(t,i,r)}return(0,n.warn)(`Filter "${e}" is not supported.`),t}catch(t){if(t instanceof s.MissingDataException)throw t;return(0,n.warn)(`Invalid stream: "${t}"`),new f.NullStream}}}e.Parser=v;const b=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function w(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1}class x{constructor(t,e=null){this.stream=t,this.nextChar(),this.strBuf=[],this.knownCommands=e,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let t=this.currentChar,e=!1,i=0,r=0;if(45===t?(r=-1,t=this.nextChar(),45===t&&(t=this.nextChar())):43===t&&(r=1,t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(i=10,t=this.nextChar()),t<48||t>57){if((0,s.isWhiteSpace)(t)||-1===t){if(10===i&&0===r)return(0,n.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;if(0===i&&-1===r)return(0,n.warn)("Lexer.getNumber - treating a single minus sign as zero."),0}throw new n.FormatError(`Invalid number: ${String.fromCharCode(t)} (charCode ${t})`)}r=r||1;let o=t-48,a=0,l=1;for(;(t=this.nextChar())>=0;)if(t>=48&&t<=57){const n=t-48;e?a=10*a+n:(0!==i&&(i*=10),o=10*o+n)}else if(46===t){if(0!==i)break;i=1}else if(45===t)(0,n.warn)("Badly formatted number: minus sign in the middle");else{if(69!==t&&101!==t)break;if(t=this.peekChar(),43===t||45===t)l=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;e=!0}return 0!==i&&(o/=i),e&&(o*=10**(l*a)),r*o}getString(){let t=1,e=!1;const i=this.strBuf;i.length=0;let r=this.nextChar();for(;;){let s=!1;switch(0|r){case-1:(0,n.warn)("Unterminated string"),e=!0;break;case 40:++t,i.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):i.push(")");break;case 92:switch(r=this.nextChar(),r){case-1:(0,n.warn)("Unterminated string"),e=!0;break;case 110:i.push("\n");break;case 114:i.push("\r");break;case 116:i.push("\t");break;case 98:i.push("\b");break;case 102:i.push("\f");break;case 92:case 40:case 41:i.push(String.fromCharCode(r));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let t=15&r;r=this.nextChar(),s=!0,r>=48&&r<=55&&(t=(t<<3)+(15&r),r=this.nextChar(),r>=48&&r<=55&&(s=!1,t=(t<<3)+(15&r))),i.push(String.fromCharCode(t));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:i.push(String.fromCharCode(r))}break;default:i.push(String.fromCharCode(r))}if(e)break;s||(r=this.nextChar())}return i.join("")}getName(){let t,e;const i=this.strBuf;for(i.length=0;(t=this.nextChar())>=0&&!b[t];)if(35===t){if(t=this.nextChar(),b[t]){(0,n.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),i.push("#");break}const r=w(t);if(-1!==r){e=t,t=this.nextChar();const s=w(t);if(-1===s){if((0,n.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(t)}) in hexadecimal number.`),i.push("#",String.fromCharCode(e)),b[t])break;i.push(String.fromCharCode(t));continue}i.push(String.fromCharCode(r<<4|s))}else i.push("#",String.fromCharCode(t))}else i.push(String.fromCharCode(t));return i.length>127&&(0,n.warn)(`Name token is longer than allowed by the spec: ${i.length}`),r.Name.get(i.join(""))}_hexStringWarn(t){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,n.warn)(`getHexString - ignoring invalid character: ${t}`):(0,n.warn)("getHexString - ignoring additional invalid characters.")}getHexString(){const t=this.strBuf;t.length=0;let e,i,r=this.currentChar,s=!0;for(this._hexStringNumWarn=0;;){if(r<0){(0,n.warn)("Unterminated hex string");break}if(62===r){this.nextChar();break}if(1!==b[r]){if(s){if(e=w(r),-1===e){this._hexStringWarn(r),r=this.nextChar();continue}}else{if(i=w(r),-1===i){this._hexStringWarn(r),r=this.nextChar();continue}t.push(String.fromCharCode(e<<4|i))}s=!s,r=this.nextChar()}else r=this.nextChar()}return t.join("")}getObj(){let t=!1,e=this.currentChar;for(;;){if(e<0)return r.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==b[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),r.Cmd.get("[");case 93:return this.nextChar(),r.Cmd.get("]");case 60:return e=this.nextChar(),60===e?(this.nextChar(),r.Cmd.get("<<")):this.getHexString();case 62:return e=this.nextChar(),62===e?(this.nextChar(),r.Cmd.get(">>")):r.Cmd.get(">");case 123:return this.nextChar(),r.Cmd.get("{");case 125:return this.nextChar(),r.Cmd.get("}");case 41:throw this.nextChar(),new n.FormatError(`Illegal character: ${e}`)}let i=String.fromCharCode(e);if(e<32||e>127){const t=this.peekChar();if(t>=32&&t<=127)return this.nextChar(),r.Cmd.get(i)}const s=this.knownCommands;let o=s&&void 0!==s[i];for(;(e=this.nextChar())>=0&&!b[e];){const t=i+String.fromCharCode(e);if(o&&void 0===s[t])break;if(128===i.length)throw new n.FormatError(`Command token too long: ${i.length}`);i=t,o=s&&void 0!==s[i]}return"true"===i||"false"!==i&&("null"===i?null:("BI"===i&&(this.beginInlineImagePos=this.stream.pos),r.Cmd.get(i)))}peekObj(){const t=this.stream.pos,e=this.currentChar,i=this.beginInlineImagePos;let r;try{r=this.getObj()}catch(t){if(t instanceof s.MissingDataException)throw t;(0,n.warn)(`peekObj: ${t}`)}return this.stream.pos=t,this.currentChar=e,this.beginInlineImagePos=i,r}skipToNextLine(){let t=this.currentChar;for(;t>=0;){if(13===t){t=this.nextChar(),10===t&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}}}e.Lexer=x,e.Linearization=class{static create(t){function e(t,e,i=!1){const n=t.get(e);if(Number.isInteger(n)&&(i?n>=0:n>0))return n;throw new Error(`The "${e}" parameter in the linearization dictionary is invalid.`)}const i=new v({lexer:new x(t),xref:null}),n=i.getObj(),s=i.getObj(),o=i.getObj(),a=i.getObj();let l,c;if(!(Number.isInteger(n)&&Number.isInteger(s)&&(0,r.isCmd)(o,"obj")&&a instanceof r.Dict&&"number"==typeof(l=a.get("Linearized"))&&l>0))return null;if((c=e(a,"L"))!==t.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:c,hints:function(t){const e=t.get("H");let i;if(Array.isArray(e)&&(2===(i=e.length)||4===i)){for(let t=0;t<i;t++){const i=e[t];if(!(Number.isInteger(i)&&i>0))throw new Error(`Hint (${t}) in the linearization dictionary is invalid.`)}return e}throw new Error("Hint array in the linearization dictionary is invalid.")}(a),objectNumberFirst:e(a,"O"),endFirst:e(a,"E"),numPages:e(a,"N"),mainXRefEntriesOffset:e(a,"T"),pageFirst:a.has("P")?e(a,"P",!0):0}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Ascii85Stream=void 0;var n=i(29),r=i(8);class s extends n.DecodeStream{constructor(t,e){e&&(e*=.8),super(e),this.str=t,this.dict=t.dict,this.input=new Uint8Array(5)}readBlock(){const t=this.str;let e=t.getByte();for(;(0,r.isWhiteSpace)(e);)e=t.getByte();if(-1===e||126===e)return void(this.eof=!0);const i=this.bufferLength;let n,s;if(122===e){for(n=this.ensureBuffer(i+4),s=0;s<4;++s)n[i+s]=0;this.bufferLength+=4}else{const o=this.input;for(o[0]=e,s=1;s<5;++s){for(e=t.getByte();(0,r.isWhiteSpace)(e);)e=t.getByte();if(o[s]=e,-1===e||126===e)break}if(n=this.ensureBuffer(i+s-1),this.bufferLength+=s-1,s<5){for(;s<5;++s)o[s]=117;this.eof=!0}let a=0;for(s=0;s<5;++s)a=85*a+(o[s]-33);for(s=3;s>=0;--s)n[i+s]=255&a,a>>=8}}}e.Ascii85Stream=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StreamsSequenceStream=e.DecodeStream=void 0;var n=i(9),r=i(10);const s=new Uint8Array(0);class o extends n.BaseStream{constructor(t){if(super(),this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=s,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}ensureBuffer(t){const e=this.buffer;if(t<=e.byteLength)return e;let i=this.minBufferLength;for(;i<t;)i*=2;const n=new Uint8Array(i);return n.set(e),this.buffer=n}getByte(){const t=this.pos;for(;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(t){const e=this.pos;let i;if(t){for(this.ensureBuffer(e+t),i=e+t;!this.eof&&this.bufferLength<i;)this.readBlock();const n=this.bufferLength;i>n&&(i=n)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(e,i)}reset(){this.pos=0}makeSubStream(t,e,i=null){if(void 0===e)for(;!this.eof;)this.readBlock();else{const i=t+e;for(;this.bufferLength<=i&&!this.eof;)this.readBlock()}return new r.Stream(this.buffer,t,e,i)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}e.DecodeStream=o,e.StreamsSequenceStream=class extends o{constructor(t,e=null){let i=0;for(const e of t)i+=e instanceof o?e._rawMinBufferLength:e.length;super(i),this.streams=t,this._onError=e}readBlock(){const t=this.streams;if(0===t.length)return void(this.eof=!0);const e=t.shift();let i;try{i=e.getBytes()}catch(t){if(this._onError)return void this._onError(t,e.dict&&e.dict.objId);throw t}const n=this.bufferLength,r=n+i.length;this.ensureBuffer(r).set(i,n),this.bufferLength=r}getBaseStreams(){const t=[];for(const e of this.streams){const i=e.getBaseStreams();i&&t.push(...i)}return t.length>0?t:null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsciiHexStream=void 0;var n=i(29);class r extends n.DecodeStream{constructor(t,e){e&&(e*=.5),super(e),this.str=t,this.dict=t.dict,this.firstDigit=-1}readBlock(){const t=this.str.getBytes(8e3);if(!t.length)return void(this.eof=!0);const e=t.length+1>>1,i=this.ensureBuffer(this.bufferLength+e);let n=this.bufferLength,r=this.firstDigit;for(const e of t){let t;if(e>=48&&e<=57)t=15&e;else{if(!(e>=65&&e<=70||e>=97&&e<=102)){if(62===e){this.eof=!0;break}continue}t=9+(15&e)}r<0?r=t:(i[n++]=r<<4|t,r=-1)}r>=0&&this.eof&&(i[n++]=r<<4,r=-1),this.firstDigit=r,this.bufferLength=n}}e.AsciiHexStream=r},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxStream=void 0;var n=i(32),r=i(29),s=i(5);class o extends r.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,i instanceof s.Dict||(i=s.Dict.empty);const r={next:()=>t.getByte()};this.ccittFaxDecoder=new n.CCITTFaxDecoder(r,{K:i.get("K"),EndOfLine:i.get("EndOfLine"),EncodedByteAlign:i.get("EncodedByteAlign"),Columns:i.get("Columns"),Rows:i.get("Rows"),EndOfBlock:i.get("EndOfBlock"),BlackIs1:i.get("BlackIs1")})}readBlock(){for(;!this.eof;){const t=this.ccittFaxDecoder.readNextChar();if(-1===t)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=t}}}e.CCITTFaxStream=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxDecoder=void 0;var n=i(2);const r=-1,s=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],o=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],a=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],l=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],c=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],h=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];e.CCITTFaxDecoder=class{constructor(t,e={}){if(!t||"function"!=typeof t.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=t,this.eof=!1,this.encoding=e.K||0,this.eoline=e.EndOfLine||!1,this.byteAlign=e.EncodedByteAlign||!1,this.columns=e.Columns||1728,this.rows=e.Rows||0;let i,n=e.EndOfBlock;for(null==n&&(n=!0),this.eoblock=n,this.black=e.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(i=this._lookBits(12));)this._eatBits(1);1===i&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const t=this.refLine,e=this.codingLine,i=this.columns;let s,o,a,l,c;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let a,c,h;if(this.err=!1,this.nextLine2D){for(l=0;e[l]<i;++l)t[l]=e[l];for(t[l++]=i,t[l]=i,e[0]=0,this.codingPos=0,s=0,o=0;e[this.codingPos]<i;)switch(a=this._getTwoDimCode(),a){case 0:this._addPixels(t[s+1],o),t[s+1]<i&&(s+=2);break;case 1:if(a=c=0,o){do{a+=h=this._getBlackCode()}while(h>=64);do{c+=h=this._getWhiteCode()}while(h>=64)}else{do{a+=h=this._getWhiteCode()}while(h>=64);do{c+=h=this._getBlackCode()}while(h>=64)}for(this._addPixels(e[this.codingPos]+a,o),e[this.codingPos]<i&&this._addPixels(e[this.codingPos]+c,1^o);t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 7:if(this._addPixels(t[s]+3,o),o^=1,e[this.codingPos]<i)for(++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 5:if(this._addPixels(t[s]+2,o),o^=1,e[this.codingPos]<i)for(++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 3:if(this._addPixels(t[s]+1,o),o^=1,e[this.codingPos]<i)for(++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 2:if(this._addPixels(t[s],o),o^=1,e[this.codingPos]<i)for(++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 8:if(this._addPixelsNeg(t[s]-3,o),o^=1,e[this.codingPos]<i)for(s>0?--s:++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 6:if(this._addPixelsNeg(t[s]-2,o),o^=1,e[this.codingPos]<i)for(s>0?--s:++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case 4:if(this._addPixelsNeg(t[s]-1,o),o^=1,e[this.codingPos]<i)for(s>0?--s:++s;t[s]<=e[this.codingPos]&&t[s]<i;)s+=2;break;case r:this._addPixels(i,0),this.eof=!0;break;default:(0,n.info)("bad 2d code"),this._addPixels(i,0),this.err=!0}}else for(e[0]=0,this.codingPos=0,o=0;e[this.codingPos]<i;){if(a=0,o)do{a+=h=this._getBlackCode()}while(h>=64);else do{a+=h=this._getWhiteCode()}while(h>=64);this._addPixels(e[this.codingPos]+a,o),o^=1}let u=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(a=this._lookBits(12),this.eoline)for(;a!==r&&1!==a;)this._eatBits(1),a=this._lookBits(12);else for(;0===a;)this._eatBits(1),a=this._lookBits(12);1===a?(this._eatBits(12),u=!0):a===r&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&u&&this.byteAlign){if(a=this._lookBits(12),1===a){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(l=0;l<4;++l)a=this._lookBits(12),1!==a&&(0,n.info)("bad rtc code: "+a),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(a=this._lookBits(13),a===r)return this.eof=!0,-1;if(a>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&a))}e[0]>0?this.outputBits=e[this.codingPos=0]:this.outputBits=e[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&e[this.codingPos]<i&&(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]);else{a=8,c=0;do{if("number"!=typeof this.outputBits)throw new n.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>a?(c<<=a,1&this.codingPos||(c|=255>>8-a),this.outputBits-=a,a=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),a-=this.outputBits,this.outputBits=0,e[this.codingPos]<i?(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]):a>0&&(c<<=a,a=0))}while(a)}return this.black&&(c^=255),c}_addPixels(t,e){const i=this.codingLine;let r=this.codingPos;t>i[r]&&(t>this.columns&&((0,n.info)("row is wrong length"),this.err=!0,t=this.columns),1&r^e&&++r,i[r]=t),this.codingPos=r}_addPixelsNeg(t,e){const i=this.codingLine;let r=this.codingPos;if(t>i[r])t>this.columns&&((0,n.info)("row is wrong length"),this.err=!0,t=this.columns),1&r^e&&++r,i[r]=t;else if(t<i[r]){for(t<0&&((0,n.info)("invalid code"),this.err=!0,t=0);r>0&&t<i[r-1];)--r;i[r]=t}this.codingPos=r}_findTableCode(t,e,i,n){const s=n||0;for(let n=t;n<=e;++n){let t=this._lookBits(n);if(t===r)return[!0,1,!1];if(n<e&&(t<<=e-n),!s||t>=s){const e=i[t-s];if(e[0]===n)return this._eatBits(n),[!0,e[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(7),t=s[e],t&&t[0]>0)return this._eatBits(t[0]),t[1]}else{const t=this._findTableCode(1,7,s);if(t[0]&&t[2])return t[1]}return(0,n.info)("Bad two dim code"),r}_getWhiteCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(12),e===r)return 1;if(t=e>>5==0?o[e]:a[e>>3],t[0]>0)return this._eatBits(t[0]),t[1]}else{let t=this._findTableCode(1,9,a);if(t[0])return t[1];if(t=this._findTableCode(11,12,o),t[0])return t[1]}return(0,n.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let t,e;if(this.eoblock){if(t=this._lookBits(13),t===r)return 1;if(e=t>>7==0?l[t]:t>>9==0&&t>>7!=0?c[(t>>1)-64]:h[t>>7],e[0]>0)return this._eatBits(e[0]),e[1]}else{let t=this._findTableCode(2,6,h);if(t[0])return t[1];if(t=this._findTableCode(7,12,c,64),t[0])return t[1];if(t=this._findTableCode(10,13,l),t[0])return t[1]}return(0,n.info)("bad black code"),this._eatBits(1),1}_lookBits(t){let e;for(;this.inputBits<t;){if(-1===(e=this.source.next()))return 0===this.inputBits?r:this.inputBuf<<t-this.inputBits&65535>>16-t;this.inputBuf=this.inputBuf<<8|e,this.inputBits+=8}return this.inputBuf>>this.inputBits-t&65535>>16-t}_eatBits(t){(this.inputBits-=t)<0&&(this.inputBits=0)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlateStream=void 0;var n=i(29),r=i(2);const s=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),l=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],c=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class h extends n.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict;const i=t.getByte(),n=t.getByte();if(-1===i||-1===n)throw new r.FormatError(`Invalid header in flate stream: ${i}, ${n}`);if(8!=(15&i))throw new r.FormatError(`Unknown compression method in flate stream: ${i}, ${n}`);if(((i<<8)+n)%31!=0)throw new r.FormatError(`Bad FCHECK in flate stream: ${i}, ${n}`);if(32&n)throw new r.FormatError(`FDICT bit set in flate stream: ${i}, ${n}`);this.codeSize=0,this.codeBuf=0}getBits(t){const e=this.str;let i,n=this.codeSize,s=this.codeBuf;for(;n<t;){if(-1===(i=e.getByte()))throw new r.FormatError("Bad encoding in flate stream");s|=i<<n,n+=8}return i=s&(1<<t)-1,this.codeBuf=s>>t,this.codeSize=n-=t,i}getCode(t){const e=this.str,i=t[0],n=t[1];let s,o=this.codeSize,a=this.codeBuf;for(;o<n&&-1!==(s=e.getByte());)a|=s<<o,o+=8;const l=i[a&(1<<n)-1],c=l>>16,h=65535&l;if(c<1||o<c)throw new r.FormatError("Bad encoding in flate stream");return this.codeBuf=a>>c,this.codeSize=o-c,h}generateHuffmanTable(t){const e=t.length;let i,n=0;for(i=0;i<e;++i)t[i]>n&&(n=t[i]);const r=1<<n,s=new Int32Array(r);for(let o=1,a=0,l=2;o<=n;++o,a<<=1,l<<=1)for(let n=0;n<e;++n)if(t[n]===o){let t=0,e=a;for(i=0;i<o;++i)t=t<<1|1&e,e>>=1;for(i=t;i<r;i+=l)s[i]=o<<16|n;++a}return[s,n]}readBlock(){let t,e;const i=this.str;let n,h,u=this.getBits(3);if(1&u&&(this.eof=!0),u>>=1,0===u){let e;if(-1===(e=i.getByte()))throw new r.FormatError("Bad block header in flate stream");let n=e;if(-1===(e=i.getByte()))throw new r.FormatError("Bad block header in flate stream");if(n|=e<<8,-1===(e=i.getByte()))throw new r.FormatError("Bad block header in flate stream");let s=e;if(-1===(e=i.getByte()))throw new r.FormatError("Bad block header in flate stream");if(s|=e<<8,s!==(65535&~n)&&(0!==n||0!==s))throw new r.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const o=this.bufferLength,a=o+n;if(t=this.ensureBuffer(a),this.bufferLength=a,0===n)-1===i.peekByte()&&(this.eof=!0);else{const e=i.getBytes(n);t.set(e,o),e.length<n&&(this.eof=!0)}return}if(1===u)n=l,h=c;else{if(2!==u)throw new r.FormatError("Unknown block type in flate stream");{const t=this.getBits(5)+257,i=this.getBits(5)+1,r=this.getBits(4)+4,o=new Uint8Array(s.length);let a;for(a=0;a<r;++a)o[s[a]]=this.getBits(3);const l=this.generateHuffmanTable(o);e=0,a=0;const c=t+i,u=new Uint8Array(c);let p,d,f;for(;a<c;){const t=this.getCode(l);if(16===t)p=2,d=3,f=e;else if(17===t)p=3,d=3,f=e=0;else{if(18!==t){u[a++]=e=t;continue}p=7,d=11,f=e=0}let i=this.getBits(p)+d;for(;i-- >0;)u[a++]=f}n=this.generateHuffmanTable(u.subarray(0,t)),h=this.generateHuffmanTable(u.subarray(t,c))}}t=this.buffer;let p=t?t.length:0,d=this.bufferLength;for(;;){let i=this.getCode(n);if(i<256){d+1>=p&&(t=this.ensureBuffer(d+1),p=t.length),t[d++]=i;continue}if(256===i)return void(this.bufferLength=d);i-=257,i=o[i];let r=i>>16;r>0&&(r=this.getBits(r)),e=(65535&i)+r,i=this.getCode(h),i=a[i],r=i>>16,r>0&&(r=this.getBits(r));const s=(65535&i)+r;d+e>=p&&(t=this.ensureBuffer(d+e),p=t.length);for(let i=0;i<e;++i,++d)t[d]=t[d-s]}}}e.FlateStream=h},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Stream=void 0;var n=i(9),r=i(29),s=i(5),o=i(35),a=i(2);class l extends r.DecodeStream{constructor(t,e,i){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,a.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new o.Jbig2Image,e=[];if(this.params instanceof s.Dict){const t=this.params.get("JBIG2Globals");if(t instanceof n.BaseStream){const i=t.getBytes();e.push({data:i,start:0,end:i.length})}}e.push({data:this.bytes,start:0,end:this.bytes.length});const i=t.parseChunks(e),r=i.length;for(let t=0;t<r;t++)i[t]^=255;this.buffer=i,this.bufferLength=r,this.eof=!0}}e.Jbig2Stream=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Image=void 0;var n=i(2),r=i(8),s=i(36),o=i(32);class a extends n.BaseException{constructor(t){super(`JBIG2 error: ${t}`,"Jbig2Error")}}class l{getContexts(t){return t in this?this[t]:this[t]=new Int8Array(65536)}}class c{constructor(t,e,i){this.data=t,this.start=e,this.end=i}get decoder(){const t=new s.ArithmeticDecoder(this.data,this.start,this.end);return(0,n.shadow)(this,"decoder",t)}get contextCache(){const t=new l;return(0,n.shadow)(this,"contextCache",t)}}function h(t,e,i){const n=t.getContexts(e);let r=1;function s(t){let e=0;for(let s=0;s<t;s++){const t=i.readBit(n,r);r=r<256?r<<1|t:511&(r<<1|t)|256,e=e<<1|t}return e>>>0}const o=s(1),a=s(1)?s(1)?s(1)?s(1)?s(1)?s(32)+4436:s(12)+340:s(8)+84:s(6)+20:s(4)+4:s(2);return 0===o?a:a>0?-a:null}function u(t,e,i){const n=t.getContexts("IAID");let r=1;for(let t=0;t<i;t++)r=r<<1|e.readBit(n,r);return i<31?r&(1<<i)-1:2147483647&r}const p=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],d=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],f=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],g=[39717,1941,229,405],m=[32,8];function y(t,e,i,n,r,s,o,a){if(t)return R(new I(a.data,a.start,a.end),e,i,!1);if(0===n&&!s&&!r&&4===o.length&&3===o[0].x&&-1===o[0].y&&-3===o[1].x&&-1===o[1].y&&2===o[2].x&&-2===o[2].y&&-2===o[3].x&&-2===o[3].y)return function(t,e,i){const n=i.decoder,r=i.contextCache.getContexts("GB"),s=[];let o,a,l,c,h,u,p;for(a=0;a<e;a++)for(h=s[a]=new Uint8Array(t),u=a<1?h:s[a-1],p=a<2?h:s[a-2],o=p[0]<<13|p[1]<<12|p[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,l=0;l<t;l++)h[l]=c=n.readBit(r,o),o=(31735&o)<<1|(l+3<t?p[l+3]<<11:0)|(l+4<t?u[l+4]<<4:0)|c;return s}(e,i,a);const l=!!s,c=d[n].concat(o);c.sort((function(t,e){return t.y-e.y||t.x-e.x}));const h=c.length,u=new Int8Array(h),p=new Int8Array(h),f=[];let m,y,v=0,b=0,w=0,x=0;for(y=0;y<h;y++)u[y]=c[y].x,p[y]=c[y].y,b=Math.min(b,c[y].x),w=Math.max(w,c[y].x),x=Math.min(x,c[y].y),y<h-1&&c[y].y===c[y+1].y&&c[y].x===c[y+1].x-1?v|=1<<h-1-y:f.push(y);const S=f.length,k=new Int8Array(S),C=new Int8Array(S),A=new Uint16Array(S);for(m=0;m<S;m++)y=f[m],k[m]=c[y].x,C[m]=c[y].y,A[m]=1<<h-1-y;const _=-b,T=-x,O=e-w,E=g[n];let M=new Uint8Array(e);const P=[],F=a.decoder,D=a.contextCache.getContexts("GB");let L,N,B,j,z,U=0,$=0;for(let t=0;t<i;t++)if(r&&(U^=F.readBit(D,E),U))P.push(M);else for(M=new Uint8Array(M),P.push(M),L=0;L<e;L++){if(l&&s[t][L]){M[L]=0;continue}if(L>=_&&L<O&&t>=T)for($=$<<1&v,y=0;y<S;y++)N=t+C[y],B=L+k[y],j=P[N][B],j&&(j=A[y],$|=j);else for($=0,z=h-1,y=0;y<h;y++,z--)B=L+u[y],B>=0&&B<e&&(N=t+p[y],N>=0&&(j=P[N][B],j&&($|=j<<z)));const i=F.readBit(D,$);M[L]=i}return P}function v(t,e,i,n,r,s,o,l,c){let h=f[i].coding;0===i&&(h=h.concat([l[0]]));const u=h.length,p=new Int32Array(u),d=new Int32Array(u);let g;for(g=0;g<u;g++)p[g]=h[g].x,d[g]=h[g].y;let y=f[i].reference;0===i&&(y=y.concat([l[1]]));const v=y.length,b=new Int32Array(v),w=new Int32Array(v);for(g=0;g<v;g++)b[g]=y[g].x,w[g]=y[g].y;const x=n[0].length,S=n.length,k=m[i],C=[],A=c.decoder,_=c.contextCache.getContexts("GR");let T=0;for(let i=0;i<e;i++){if(o&&(T^=A.readBit(_,k),T))throw new a("prediction is not supported");const e=new Uint8Array(t);C.push(e);for(let o=0;o<t;o++){let a,l,c=0;for(g=0;g<u;g++)a=i+d[g],l=o+p[g],a<0||l<0||l>=t?c<<=1:c=c<<1|C[a][l];for(g=0;g<v;g++)a=i+w[g]-s,l=o+b[g]-r,a<0||a>=S||l<0||l>=x?c<<=1:c=c<<1|n[a][l];const h=A.readBit(_,c);e[o]=h}}return C}function b(t,e,i,n,r,s,o,l,c,p,d,f,g,m,y,b,w,x,S){if(t&&e)throw new a("refinement with Huffman is not supported");const k=[];let C,A;for(C=0;C<n;C++){if(A=new Uint8Array(i),r)for(let t=0;t<i;t++)A[t]=r;k.push(A)}const _=w.decoder,T=w.contextCache;let O=t?-m.tableDeltaT.decode(S):-h(T,"IADT",_),E=0;for(C=0;C<s;){O+=t?m.tableDeltaT.decode(S):h(T,"IADT",_),E+=t?m.tableFirstS.decode(S):h(T,"IAFS",_);let n=E;for(;;){let r=0;o>1&&(r=t?S.readBits(x):h(T,"IAIT",_));const s=o*O+r,E=t?m.symbolIDTable.decode(S):u(T,_,c),M=e&&(t?S.readBit():h(T,"IARI",_));let P=l[E],I=P[0].length,F=P.length;if(M){const t=h(T,"IARDW",_),e=h(T,"IARDH",_),i=h(T,"IARDX",_),n=h(T,"IARDY",_);I+=t,F+=e,P=v(I,F,y,P,(t>>1)+i,(e>>1)+n,!1,b,w)}const D=s-(1&f?0:F-1),R=n-(2&f?I-1:0);let L,N,B;if(p){for(L=0;L<F;L++){if(A=k[R+L],!A)continue;B=P[L];const t=Math.min(i-D,I);switch(g){case 0:for(N=0;N<t;N++)A[D+N]|=B[N];break;case 2:for(N=0;N<t;N++)A[D+N]^=B[N];break;default:throw new a(`operator ${g} is not supported`)}}n+=F-1}else{for(N=0;N<F;N++)if(A=k[D+N],A)switch(B=P[N],g){case 0:for(L=0;L<I;L++)A[R+L]|=B[L];break;case 2:for(L=0;L<I;L++)A[R+L]^=B[L];break;default:throw new a(`operator ${g} is not supported`)}n+=I-1}C++;const j=t?m.tableDeltaS.decode(S):h(T,"IADS",_);if(null===j)break;n+=j+d}}return k}function w(t,e){const i={};i.number=(0,r.readUint32)(t,e);const n=t[e+4],s=63&n;if(!p[s])throw new a("invalid segment type: "+s);i.type=s,i.typeName=p[s],i.deferredNonRetain=!!(128&n);const o=!!(64&n),l=t[e+5];let c=l>>5&7;const h=[31&l];let u=e+6;if(7===l){c=536870911&(0,r.readUint32)(t,u-1),u+=3;let e=c+7>>3;for(h[0]=t[u++];--e>0;)h.push(t[u++])}else if(5===l||6===l)throw new a("invalid referred-to flags");i.retainBits=h;let d=4;i.number<=256?d=1:i.number<=65536&&(d=2);const f=[];let g,m;for(g=0;g<c;g++){let e;e=1===d?t[u]:2===d?(0,r.readUint16)(t,u):(0,r.readUint32)(t,u),f.push(e),u+=d}if(i.referredTo=f,o?(i.pageAssociation=(0,r.readUint32)(t,u),u+=4):i.pageAssociation=t[u++],i.length=(0,r.readUint32)(t,u),u+=4,4294967295===i.length){if(38!==s)throw new a("invalid unknown segment length");{const e=S(t,u),n=!!(1&t[u+k]),r=6,s=new Uint8Array(r);for(n||(s[0]=255,s[1]=172),s[2]=e.height>>>24&255,s[3]=e.height>>16&255,s[4]=e.height>>8&255,s[5]=255&e.height,g=u,m=t.length;g<m;g++){let e=0;for(;e<r&&s[e]===t[g+e];)e++;if(e===r){i.length=g+r;break}}if(4294967295===i.length)throw new a("segment end was not found")}}return i.headerEnd=u,i}function x(t,e,i,n){const r=[];let s=i;for(;s<n;){const i=w(e,s);s=i.headerEnd;const n={header:i,data:e};if(t.randomAccess||(n.start=s,s+=i.length,n.end=s),r.push(n),51===i.type)break}if(t.randomAccess)for(let t=0,e=r.length;t<e;t++)r[t].start=s,s+=r[t].header.length,r[t].end=s;return r}function S(t,e){return{width:(0,r.readUint32)(t,e),height:(0,r.readUint32)(t,e+4),x:(0,r.readUint32)(t,e+8),y:(0,r.readUint32)(t,e+12),combinationOperator:7&t[e+16]}}const k=17;function C(t,e){const i=t.header,n=t.data,s=t.end;let o,l,c,h,u=t.start;switch(i.type){case 0:const t={},e=(0,r.readUint16)(n,u);if(t.huffman=!!(1&e),t.refinement=!!(2&e),t.huffmanDHSelector=e>>2&3,t.huffmanDWSelector=e>>4&3,t.bitmapSizeSelector=e>>6&1,t.aggregationInstancesSelector=e>>7&1,t.bitmapCodingContextUsed=!!(256&e),t.bitmapCodingContextRetained=!!(512&e),t.template=e>>10&3,t.refinementTemplate=e>>12&1,u+=2,!t.huffman){for(h=0===t.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,r.readInt8)(n,u),y:(0,r.readInt8)(n,u+1)}),u+=2;t.at=l}if(t.refinement&&!t.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,r.readInt8)(n,u),y:(0,r.readInt8)(n,u+1)}),u+=2;t.refinementAt=l}t.numberOfExportedSymbols=(0,r.readUint32)(n,u),u+=4,t.numberOfNewSymbols=(0,r.readUint32)(n,u),u+=4,o=[t,i.number,i.referredTo,n,u,s];break;case 6:case 7:const p={};p.info=S(n,u),u+=k;const d=(0,r.readUint16)(n,u);if(u+=2,p.huffman=!!(1&d),p.refinement=!!(2&d),p.logStripSize=d>>2&3,p.stripSize=1<<p.logStripSize,p.referenceCorner=d>>4&3,p.transposed=!!(64&d),p.combinationOperator=d>>7&3,p.defaultPixelValue=d>>9&1,p.dsOffset=d<<17>>27,p.refinementTemplate=d>>15&1,p.huffman){const t=(0,r.readUint16)(n,u);u+=2,p.huffmanFS=3&t,p.huffmanDS=t>>2&3,p.huffmanDT=t>>4&3,p.huffmanRefinementDW=t>>6&3,p.huffmanRefinementDH=t>>8&3,p.huffmanRefinementDX=t>>10&3,p.huffmanRefinementDY=t>>12&3,p.huffmanRefinementSizeSelector=!!(16384&t)}if(p.refinement&&!p.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,r.readInt8)(n,u),y:(0,r.readInt8)(n,u+1)}),u+=2;p.refinementAt=l}p.numberOfSymbolInstances=(0,r.readUint32)(n,u),u+=4,o=[p,i.referredTo,n,u,s];break;case 16:const f={},g=n[u++];f.mmr=!!(1&g),f.template=g>>1&3,f.patternWidth=n[u++],f.patternHeight=n[u++],f.maxPatternIndex=(0,r.readUint32)(n,u),u+=4,o=[f,i.number,n,u,s];break;case 22:case 23:const m={};m.info=S(n,u),u+=k;const y=n[u++];m.mmr=!!(1&y),m.template=y>>1&3,m.enableSkip=!!(8&y),m.combinationOperator=y>>4&7,m.defaultPixelValue=y>>7&1,m.gridWidth=(0,r.readUint32)(n,u),u+=4,m.gridHeight=(0,r.readUint32)(n,u),u+=4,m.gridOffsetX=4294967295&(0,r.readUint32)(n,u),u+=4,m.gridOffsetY=4294967295&(0,r.readUint32)(n,u),u+=4,m.gridVectorX=(0,r.readUint16)(n,u),u+=2,m.gridVectorY=(0,r.readUint16)(n,u),u+=2,o=[m,i.referredTo,n,u,s];break;case 38:case 39:const v={};v.info=S(n,u),u+=k;const b=n[u++];if(v.mmr=!!(1&b),v.template=b>>1&3,v.prediction=!!(8&b),!v.mmr){for(h=0===v.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,r.readInt8)(n,u),y:(0,r.readInt8)(n,u+1)}),u+=2;v.at=l}o=[v,n,u,s];break;case 48:const w={width:(0,r.readUint32)(n,u),height:(0,r.readUint32)(n,u+4),resolutionX:(0,r.readUint32)(n,u+8),resolutionY:(0,r.readUint32)(n,u+12)};4294967295===w.height&&delete w.height;const x=n[u+16];(0,r.readUint16)(n,u+17),w.lossless=!!(1&x),w.refinement=!!(2&x),w.defaultPixelValue=x>>2&1,w.combinationOperator=x>>3&3,w.requiresBuffer=!!(32&x),w.combinationOperatorOverride=!!(64&x),o=[w];break;case 49:case 50:case 51:case 62:break;case 53:o=[i.number,n,u,s];break;default:throw new a(`segment type ${i.typeName}(${i.type}) is not implemented`)}const p="on"+i.typeName;p in e&&e[p].apply(e,o)}function A(t,e){for(let i=0,n=t.length;i<n;i++)C(t[i],e)}class _{onPageInformation(t){this.currentPageInfo=t;const e=t.width+7>>3,i=new Uint8ClampedArray(e*t.height);t.defaultPixelValue&&i.fill(255),this.buffer=i}drawBitmap(t,e){const i=this.currentPageInfo,n=t.width,r=t.height,s=i.width+7>>3,o=i.combinationOperatorOverride?t.combinationOperator:i.combinationOperator,l=this.buffer,c=128>>(7&t.x);let h,u,p,d,f=t.y*s+(t.x>>3);switch(o){case 0:for(h=0;h<r;h++){for(p=c,d=f,u=0;u<n;u++)e[h][u]&&(l[d]|=p),p>>=1,p||(p=128,d++);f+=s}break;case 2:for(h=0;h<r;h++){for(p=c,d=f,u=0;u<n;u++)e[h][u]&&(l[d]^=p),p>>=1,p||(p=128,d++);f+=s}break;default:throw new a(`operator ${o} is not supported`)}}onImmediateGenericRegion(t,e,i,n){const r=t.info,s=new c(e,i,n),o=y(t.mmr,r.width,r.height,t.template,t.prediction,null,t.at,s);this.drawBitmap(r,o)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments)}onSymbolDictionary(t,e,i,n,s,o){let l,p;t.huffman&&(l=function(t,e,i){let n,r,s,o,l=0;switch(t.huffmanDHSelector){case 0:case 1:n=P(t.huffmanDHSelector+4);break;case 3:n=F(l,e,i),l++;break;default:throw new a("invalid Huffman DH selector")}switch(t.huffmanDWSelector){case 0:case 1:r=P(t.huffmanDWSelector+2);break;case 3:r=F(l,e,i),l++;break;default:throw new a("invalid Huffman DW selector")}return t.bitmapSizeSelector?(s=F(l,e,i),l++):s=P(1),o=t.aggregationInstancesSelector?F(l,e,i):P(1),{tableDeltaHeight:n,tableDeltaWidth:r,tableBitmapSize:s,tableAggregateInstances:o}}(t,i,this.customTables),p=new I(n,s,o));let d=this.symbols;d||(this.symbols=d={});let f=[];for(let t=0,e=i.length;t<e;t++){const e=d[i[t]];e&&(f=f.concat(e))}const g=new c(n,s,o);d[e]=function(t,e,i,n,s,o,l,c,p,d,f,g){if(t&&e)throw new a("symbol refinement with Huffman is not supported");const m=[];let w=0,x=(0,r.log2)(i.length+n);const S=f.decoder,k=f.contextCache;let C,A;for(t&&(C=P(1),A=[],x=Math.max(x,1));m.length<n;){w+=t?o.tableDeltaHeight.decode(g):h(k,"IADH",S);let n=0,r=0;const s=t?A.length:0;for(;;){const s=t?o.tableDeltaWidth.decode(g):h(k,"IADW",S);if(null===s)break;let a;if(n+=s,r+=n,e){const r=h(k,"IAAI",S);if(r>1)a=b(t,e,n,w,0,r,1,i.concat(m),x,0,0,1,0,o,p,d,f,0,g);else{const t=u(k,S,x),e=h(k,"IARDX",S),r=h(k,"IARDY",S);a=v(n,w,p,t<i.length?i[t]:m[t-i.length],e,r,!1,d,f)}m.push(a)}else t?A.push(n):(a=y(!1,n,w,l,!1,null,c,f),m.push(a))}if(t&&!e){const t=o.tableBitmapSize.decode(g);let e;if(g.byteAlign(),0===t)e=D(g,r,w);else{const i=g.end,n=g.position+t;g.end=n,e=R(g,r,w,!1),g.end=i,g.position=n}const i=A.length;if(s===i-1)m.push(e);else{let t,n,r,o,a,l=0;for(t=s;t<i;t++){for(o=A[t],r=l+o,a=[],n=0;n<w;n++)a.push(e[n].subarray(l,r));m.push(a),l=r}}}}const _=[],T=[];let O,E,M=!1;const I=i.length+n;for(;T.length<I;){let e=t?C.decode(g):h(k,"IAEX",S);for(;e--;)T.push(M);M=!M}for(O=0,E=i.length;O<E;O++)T[O]&&_.push(i[O]);for(let t=0;t<n;O++,t++)T[O]&&_.push(m[t]);return _}(t.huffman,t.refinement,f,t.numberOfNewSymbols,t.numberOfExportedSymbols,l,t.template,t.at,t.refinementTemplate,t.refinementAt,g,p)}onImmediateTextRegion(t,e,i,n,s){const o=t.info;let l,h;const u=this.symbols;let p=[];for(let t=0,i=e.length;t<i;t++){const i=u[e[t]];i&&(p=p.concat(i))}const d=(0,r.log2)(p.length);t.huffman&&(h=new I(i,n,s),l=function(t,e,i,n,r){const s=[];for(let t=0;t<=34;t++){const e=r.readBits(4);s.push(new T([t,e,0,0]))}const o=new E(s,!1);s.length=0;for(let t=0;t<n;){const e=o.decode(r);if(e>=32){let i,n,o;switch(e){case 32:if(0===t)throw new a("no previous value in symbol ID table");n=r.readBits(2)+3,i=s[t-1].prefixLength;break;case 33:n=r.readBits(3)+3,i=0;break;case 34:n=r.readBits(7)+11,i=0;break;default:throw new a("invalid code length in symbol ID table")}for(o=0;o<n;o++)s.push(new T([t,i,0,0])),t++}else s.push(new T([t,e,0,0])),t++}r.byteAlign();const l=new E(s,!1);let c,h,u,p=0;switch(t.huffmanFS){case 0:case 1:c=P(t.huffmanFS+6);break;case 3:c=F(p,e,i),p++;break;default:throw new a("invalid Huffman FS selector")}switch(t.huffmanDS){case 0:case 1:case 2:h=P(t.huffmanDS+8);break;case 3:h=F(p,e,i),p++;break;default:throw new a("invalid Huffman DS selector")}switch(t.huffmanDT){case 0:case 1:case 2:u=P(t.huffmanDT+11);break;case 3:u=F(p,e,i),p++;break;default:throw new a("invalid Huffman DT selector")}if(t.refinement)throw new a("refinement with Huffman is not supported");return{symbolIDTable:l,tableFirstS:c,tableDeltaS:h,tableDeltaT:u}}(t,e,this.customTables,p.length,h));const f=new c(i,n,s),g=b(t.huffman,t.refinement,o.width,o.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,p,d,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,l,t.refinementTemplate,t.refinementAt,f,t.logStripSize,h);this.drawBitmap(o,g)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments)}onPatternDictionary(t,e,i,n,r){let s=this.patterns;s||(this.patterns=s={});const o=new c(i,n,r);s[e]=function(t,e,i,n,r,s){const o=[];t||(o.push({x:-e,y:0}),0===r&&o.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const a=y(t,(n+1)*e,i,r,!1,null,o,s),l=[];for(let t=0;t<=n;t++){const n=[],r=e*t,s=r+e;for(let t=0;t<i;t++)n.push(a[t].subarray(r,s));l.push(n)}return l}(t.mmr,t.patternWidth,t.patternHeight,t.maxPatternIndex,t.template,o)}onImmediateHalftoneRegion(t,e,i,n,s){const o=this.patterns[e[0]],l=t.info,h=new c(i,n,s),u=function(t,e,i,n,s,o,l,c,h,u,p,d,f,g,m){if(l)throw new a("skip is not supported");if(0!==c)throw new a(`operator "${c}" is not supported in halftone region`);const v=[];let b,w,x;for(b=0;b<s;b++){if(x=new Uint8Array(n),o)for(w=0;w<n;w++)x[w]=o;v.push(x)}const S=e.length,k=e[0],C=k[0].length,A=k.length,_=(0,r.log2)(S),T=[];t||(T.push({x:i<=1?3:2,y:-1}),0===i&&T.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const O=[];let E,M,P,F,D,L,N,B,j,z,U;for(t&&(E=new I(m.data,m.start,m.end)),b=_-1;b>=0;b--)M=t?R(E,h,u,!0):y(!1,h,u,i,!1,null,T,m),O[b]=M;for(P=0;P<u;P++)for(F=0;F<h;F++){for(D=0,L=0,w=_-1;w>=0;w--)D^=O[w][P][F],L|=D<<w;if(N=e[L],B=p+P*g+F*f>>8,j=d+P*f-F*g>>8,B>=0&&B+C<=n&&j>=0&&j+A<=s)for(b=0;b<A;b++)for(U=v[j+b],z=N[b],w=0;w<C;w++)U[B+w]|=z[w];else{let t,e;for(b=0;b<A;b++)if(e=j+b,!(e<0||e>=s))for(U=v[e],z=N[b],w=0;w<C;w++)t=B+w,t>=0&&t<n&&(U[t]|=z[w])}}return v}(t.mmr,o,t.template,l.width,l.height,t.defaultPixelValue,t.enableSkip,t.combinationOperator,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridVectorX,t.gridVectorY,h);this.drawBitmap(l,u)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)}onTables(t,e,i,n){let s=this.customTables;s||(this.customTables=s={}),s[t]=function(t,e,i){const n=t[e],s=4294967295&(0,r.readUint32)(t,e+1),o=4294967295&(0,r.readUint32)(t,e+5),a=new I(t,e+9,i),l=1+(n>>1&7),c=1+(n>>4&7),h=[];let u,p,d=s;do{u=a.readBits(l),p=a.readBits(c),h.push(new T([d,u,p,0])),d+=1<<p}while(d<o);return u=a.readBits(l),h.push(new T([s-1,u,32,0,"lower"])),u=a.readBits(l),h.push(new T([o,u,32,0])),1&n&&(u=a.readBits(l),h.push(new T([u,0]))),new E(h,!1)}(e,i,n)}}class T{constructor(t){2===t.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=t[0],this.rangeLength=0,this.prefixCode=t[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=t[0],this.prefixLength=t[1],this.rangeLength=t[2],this.prefixCode=t[3],this.isLowerRange="lower"===t[4])}}class O{constructor(t){this.children=[],t?(this.isLeaf=!0,this.rangeLength=t.rangeLength,this.rangeLow=t.rangeLow,this.isLowerRange=t.isLowerRange,this.isOOB=t.isOOB):this.isLeaf=!1}buildTree(t,e){const i=t.prefixCode>>e&1;if(e<=0)this.children[i]=new O(t);else{let n=this.children[i];n||(this.children[i]=n=new O(null)),n.buildTree(t,e-1)}}decodeNode(t){if(this.isLeaf){if(this.isOOB)return null;const e=t.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-e:e)}const e=this.children[t.readBit()];if(!e)throw new a("invalid Huffman data");return e.decodeNode(t)}}class E{constructor(t,e){e||this.assignPrefixCodes(t),this.rootNode=new O(null);for(let e=0,i=t.length;e<i;e++){const i=t[e];i.prefixLength>0&&this.rootNode.buildTree(i,i.prefixLength-1)}}decode(t){return this.rootNode.decodeNode(t)}assignPrefixCodes(t){const e=t.length;let i=0;for(let n=0;n<e;n++)i=Math.max(i,t[n].prefixLength);const n=new Uint32Array(i+1);for(let i=0;i<e;i++)n[t[i].prefixLength]++;let r,s,o,a=1,l=0;for(n[0]=0;a<=i;){for(l=l+n[a-1]<<1,r=l,s=0;s<e;)o=t[s],o.prefixLength===a&&(o.prefixCode=r,r++),s++;a++}}}const M={};function P(t){let e,i=M[t];if(i)return i;switch(t){case 1:e=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:e=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:e=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:e=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:e=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:e=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:e=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:e=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:e=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:e=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:e=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:e=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:e=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:e=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:e=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new a(`standard table B.${t} does not exist`)}for(let t=0,i=e.length;t<i;t++)e[t]=new T(e[t]);return i=new E(e,!0),M[t]=i,i}class I{constructor(t,e,i){this.data=t,this.start=e,this.end=i,this.position=e,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new a("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const t=this.currentByte>>this.shift&1;return this.shift--,t}readBits(t){let e,i=0;for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function F(t,e,i){let n=0;for(let r=0,s=e.length;r<s;r++){const s=i[e[r]];if(s){if(t===n)return s;n++}}throw new a("can't find custom Huffman table")}function D(t,e,i){const n=[];for(let r=0;r<i;r++){const i=new Uint8Array(e);n.push(i);for(let n=0;n<e;n++)i[n]=t.readBit();t.byteAlign()}return n}function R(t,e,i,n){const r={K:-1,Columns:e,Rows:i,BlackIs1:!0,EndOfBlock:n},s=new o.CCITTFaxDecoder(t,r),a=[];let l,c=!1;for(let t=0;t<i;t++){const t=new Uint8Array(e);a.push(t);let i=-1;for(let n=0;n<e;n++)i<0&&(l=s.readNextChar(),-1===l&&(l=0,c=!0),i=7),t[n]=l>>i&1,i--}if(n&&!c){const t=5;for(let e=0;e<t&&-1!==s.readNextChar();e++);}return a}e.Jbig2Image=class{parseChunks(t){return function(t){const e=new _;for(let i=0,n=t.length;i<n;i++){const n=t[i];A(x({},n.data,n.start,n.end),e)}return e.buffer}(t)}parse(t){const{imgData:e,width:i,height:n}=function(t){const e=t.length;let i=0;if(151!==t[i]||74!==t[i+1]||66!==t[i+2]||50!==t[i+3]||13!==t[i+4]||10!==t[i+5]||26!==t[i+6]||10!==t[i+7])throw new a("parseJbig2 - invalid header.");const n=Object.create(null);i+=8;const s=t[i++];n.randomAccess=!(1&s),2&s||(n.numberOfPages=(0,r.readUint32)(t,i),i+=4);const o=x(n,t,i,e),l=new _;A(o,l);const{width:c,height:h}=l.currentPageInfo,u=l.buffer,p=new Uint8ClampedArray(c*h);let d=0,f=0;for(let t=0;t<h;t++){let t,e=0;for(let i=0;i<c;i++)e||(e=128,t=u[f++]),p[d++]=t&e?0:255,e>>=1}return{imgData:p,width:c,height:h}}(t);return this.width=i,this.height=n,e}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticDecoder=void 0;const i=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];e.ArithmeticDecoder=class{constructor(t,e,i){this.data=t,this.bp=e,this.dataEnd=i,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const t=this.data;let e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(t,e){let n=t[e]>>1,r=1&t[e];const s=i[n],o=s.qe;let a,l=this.a-o;if(this.chigh<o)l<o?(l=o,a=r,n=s.nmps):(l=o,a=1^r,1===s.switchFlag&&(r=a),n=s.nlps);else{if(this.chigh-=o,0!=(32768&l))return this.a=l,r;l<o?(a=1^r,1===s.switchFlag&&(r=a),n=s.nlps):(a=r,n=s.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,t[e]=n<<1|r,a}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegStream=void 0;var n=i(29),r=i(5),s=i(38),o=i(2);class a extends n.DecodeStream{constructor(t,e,i){let n;for(;-1!==(n=t.getByte());)if(255===n){t.skip(-1);break}super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,o.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t={decodeTransform:void 0,colorTransform:void 0},e=this.dict.getArray("D","Decode");if(this.forceRGB&&Array.isArray(e)){const i=this.dict.get("BPC","BitsPerComponent")||8,n=e.length,r=new Int32Array(n);let s=!1;const o=(1<<i)-1;for(let t=0;t<n;t+=2)r[t]=256*(e[t+1]-e[t])|0,r[t+1]=e[t]*o|0,256===r[t]&&0===r[t+1]||(s=!0);s&&(t.decodeTransform=r)}if(this.params instanceof r.Dict){const e=this.params.get("ColorTransform");Number.isInteger(e)&&(t.colorTransform=e)}const i=new s.JpegImage(t);i.parse(this.bytes);const n=i.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=n,this.bufferLength=n.length,this.eof=!0}}e.JpegStream=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegImage=void 0;var n=i(2),r=i(8);class s extends n.BaseException{constructor(t){super(`JPEG error: ${t}`,"JpegError")}}class o extends n.BaseException{constructor(t,e){super(t,"DNLMarkerError"),this.scanLines=e}}class a extends n.BaseException{constructor(t){super(t,"EOIMarkerError")}}const l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=4017,h=799,u=3406,p=2276,d=1567,f=3784,g=5793,m=2896;function y(t,e){let i,n,r=0,s=16;for(;s>0&&!t[s-1];)s--;const o=[{children:[],index:0}];let a,l=o[0];for(i=0;i<s;i++){for(n=0;n<t[i];n++){for(l=o.pop(),l.children[l.index]=e[r];l.index>0;)l=o.pop();for(l.index++,o.push(l);o.length<=i;)o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;r++}i+1<s&&(o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return o[0].children}function v(t,e,i){return 64*((t.blocksPerLine+1)*e+i)}function b(t,e,i,c,h,u,p,d,f,g=!1){const m=i.mcusPerLine,y=i.progressive,b=e;let w=0,x=0;function k(){if(x>0)return x--,w>>x&1;if(w=t[e++],255===w){const n=t[e++];if(n){if(220===n&&g){e+=2;const n=(0,r.readUint16)(t,e);if(e+=2,n>0&&n!==i.scanLines)throw new o("Found DNL marker (0xFFDC) while parsing scan data",n)}else if(217===n){if(g){const t=M*(8===i.precision?8:0);if(t>0&&Math.round(i.scanLines/t)>=10)throw new o("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",t)}throw new a("Found EOI marker (0xFFD9) while parsing scan data")}throw new s(`unexpected marker ${(w<<8|n).toString(16)}`)}}return x=7,w>>>7}function C(t){let e=t;for(;;){switch(e=e[k()],typeof e){case"number":return e;case"object":continue}throw new s("invalid huffman sequence")}}function A(t){let e=0;for(;t>0;)e=e<<1|k(),t--;return e}function _(t){if(1===t)return 1===k()?1:-1;const e=A(t);return e>=1<<t-1?e:e+(-1<<t)+1}let T,O=0,E=0,M=0;function P(t,e,i,n,r){const s=i%m;M=(i/m|0)*t.v+n;const o=s*t.h+r;e(t,v(t,M,o))}function I(t,e,i){M=i/t.blocksPerLine|0;const n=i%t.blocksPerLine;e(t,v(t,M,n))}const F=c.length;let D,R,L,N,B,j;j=y?0===u?0===d?function(t,e){const i=C(t.huffmanTableDC),n=0===i?0:_(i)<<f;t.blockData[e]=t.pred+=n}:function(t,e){t.blockData[e]|=k()<<f}:0===d?function(t,e){if(O>0)return void O--;let i=u;const n=p;for(;i<=n;){const n=C(t.huffmanTableAC),r=15&n,s=n>>4;if(0===r){if(s<15){O=A(s)+(1<<s)-1;break}i+=16;continue}i+=s;const o=l[i];t.blockData[e+o]=_(r)*(1<<f),i++}}:function(t,e){let i=u;const n=p;let r,o,a=0;for(;i<=n;){const n=e+l[i],c=t.blockData[n]<0?-1:1;switch(E){case 0:if(o=C(t.huffmanTableAC),r=15&o,a=o>>4,0===r)a<15?(O=A(a)+(1<<a),E=4):(a=16,E=1);else{if(1!==r)throw new s("invalid ACn encoding");T=_(r),E=a?2:3}continue;case 1:case 2:t.blockData[n]?t.blockData[n]+=c*(k()<<f):(a--,0===a&&(E=2===E?3:0));break;case 3:t.blockData[n]?t.blockData[n]+=c*(k()<<f):(t.blockData[n]=T<<f,E=0);break;case 4:t.blockData[n]&&(t.blockData[n]+=c*(k()<<f))}i++}4===E&&(O--,0===O&&(E=0))}:function(t,e){const i=C(t.huffmanTableDC),n=0===i?0:_(i);t.blockData[e]=t.pred+=n;let r=1;for(;r<64;){const i=C(t.huffmanTableAC),n=15&i,s=i>>4;if(0===n){if(s<15)break;r+=16;continue}r+=s;const o=l[r];t.blockData[e+o]=_(n),r++}};let z,U,$,H,V=0;for(U=1===F?c[0].blocksPerLine*c[0].blocksPerColumn:m*i.mcusPerColumn;V<=U;){const i=h?Math.min(U-V,h):U;if(i>0){for(R=0;R<F;R++)c[R].pred=0;if(O=0,1===F)for(D=c[0],B=0;B<i;B++)I(D,j,V),V++;else for(B=0;B<i;B++){for(R=0;R<F;R++)for(D=c[R],$=D.h,H=D.v,L=0;L<H;L++)for(N=0;N<$;N++)P(D,j,V,L,N);V++}}if(x=0,z=S(t,e),!z)break;if(z.invalid){const t=i>0?"unexpected":"excessive";(0,n.warn)(`decodeScan - ${t} MCU data, current marker is: ${z.invalid}`),e=z.offset}if(!(z.marker>=65488&&z.marker<=65495))break;e+=2}return e-b}function w(t,e,i){const n=t.quantizationTable,r=t.blockData;let o,a,l,y,v,b,w,x,S,k,C,A,_,T,O,E,M;if(!n)throw new s("missing required Quantization Table.");for(let t=0;t<64;t+=8)S=r[e+t],k=r[e+t+1],C=r[e+t+2],A=r[e+t+3],_=r[e+t+4],T=r[e+t+5],O=r[e+t+6],E=r[e+t+7],S*=n[t],0!=(k|C|A|_|T|O|E)?(k*=n[t+1],C*=n[t+2],A*=n[t+3],_*=n[t+4],T*=n[t+5],O*=n[t+6],E*=n[t+7],o=g*S+128>>8,a=g*_+128>>8,l=C,y=O,v=m*(k-E)+128>>8,x=m*(k+E)+128>>8,b=A<<4,w=T<<4,o=o+a+1>>1,a=o-a,M=l*f+y*d+128>>8,l=l*d-y*f+128>>8,y=M,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,o=o+y+1>>1,y=o-y,a=a+l+1>>1,l=a-l,M=v*p+x*u+2048>>12,v=v*u-x*p+2048>>12,x=M,M=b*h+w*c+2048>>12,b=b*c-w*h+2048>>12,w=M,i[t]=o+x,i[t+7]=o-x,i[t+1]=a+w,i[t+6]=a-w,i[t+2]=l+b,i[t+5]=l-b,i[t+3]=y+v,i[t+4]=y-v):(M=g*S+512>>10,i[t]=M,i[t+1]=M,i[t+2]=M,i[t+3]=M,i[t+4]=M,i[t+5]=M,i[t+6]=M,i[t+7]=M);for(let t=0;t<8;++t)S=i[t],k=i[t+8],C=i[t+16],A=i[t+24],_=i[t+32],T=i[t+40],O=i[t+48],E=i[t+56],0!=(k|C|A|_|T|O|E)?(o=g*S+2048>>12,a=g*_+2048>>12,l=C,y=O,v=m*(k-E)+2048>>12,x=m*(k+E)+2048>>12,b=A,w=T,o=4112+(o+a+1>>1),a=o-a,M=l*f+y*d+2048>>12,l=l*d-y*f+2048>>12,y=M,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,o=o+y+1>>1,y=o-y,a=a+l+1>>1,l=a-l,M=v*p+x*u+2048>>12,v=v*u-x*p+2048>>12,x=M,M=b*h+w*c+2048>>12,b=b*c-w*h+2048>>12,w=M,S=o+x,E=o-x,k=a+w,O=a-w,C=l+b,T=l-b,A=y+v,_=y-v,S<16?S=0:S>=4080?S=255:S>>=4,k<16?k=0:k>=4080?k=255:k>>=4,C<16?C=0:C>=4080?C=255:C>>=4,A<16?A=0:A>=4080?A=255:A>>=4,_<16?_=0:_>=4080?_=255:_>>=4,T<16?T=0:T>=4080?T=255:T>>=4,O<16?O=0:O>=4080?O=255:O>>=4,E<16?E=0:E>=4080?E=255:E>>=4,r[e+t]=S,r[e+t+8]=k,r[e+t+16]=C,r[e+t+24]=A,r[e+t+32]=_,r[e+t+40]=T,r[e+t+48]=O,r[e+t+56]=E):(M=g*S+8192>>14,M=M<-2040?0:M>=2024?255:M+2056>>4,r[e+t]=M,r[e+t+8]=M,r[e+t+16]=M,r[e+t+24]=M,r[e+t+32]=M,r[e+t+40]=M,r[e+t+48]=M,r[e+t+56]=M)}function x(t,e){const i=e.blocksPerLine,n=e.blocksPerColumn,r=new Int16Array(64);for(let t=0;t<n;t++)for(let n=0;n<i;n++)w(e,v(e,t,n),r);return e.blockData}function S(t,e,i=e){const n=t.length-1;let s=i<e?i:e;if(e>=n)return null;const o=(0,r.readUint16)(t,e);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:e};let a=(0,r.readUint16)(t,s);for(;!(a>=65472&&a<=65534);){if(++s>=n)return null;a=(0,r.readUint16)(t,s)}return{invalid:o.toString(16),marker:a,offset:s}}e.JpegImage=class{constructor({decodeTransform:t=null,colorTransform:e=-1}={}){this._decodeTransform=t,this._colorTransform=e}parse(t,{dnlScanLines:e=null}={}){function i(){const e=(0,r.readUint16)(t,p);p+=2;let i=p+e-2;const s=S(t,i,p);s&&s.invalid&&((0,n.warn)("readDataBlock - incorrect length, current marker is: "+s.invalid),i=s.offset);const o=t.subarray(p,i);return p+=o.length,o}function c(t){const e=Math.ceil(t.samplesPerLine/8/t.maxH),i=Math.ceil(t.scanLines/8/t.maxV);for(let n=0,r=t.components.length;n<r;n++){const r=t.components[n],s=Math.ceil(Math.ceil(t.samplesPerLine/8)*r.h/t.maxH),o=Math.ceil(Math.ceil(t.scanLines/8)*r.v/t.maxV),a=e*r.h,l=i*r.v*64*(a+1);r.blockData=new Int16Array(l),r.blocksPerLine=s,r.blocksPerColumn=o}t.mcusPerLine=e,t.mcusPerColumn=i}let h,u,p=0,d=null,f=null,g=0;const m=[],v=[],w=[];let k=(0,r.readUint16)(t,p);if(p+=2,65496!==k)throw new s("SOI not found");k=(0,r.readUint16)(t,p),p+=2;t:for(;65497!==k;){let x,C,A;switch(k){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const _=i();65504===k&&74===_[0]&&70===_[1]&&73===_[2]&&70===_[3]&&0===_[4]&&(d={version:{major:_[5],minor:_[6]},densityUnits:_[7],xDensity:_[8]<<8|_[9],yDensity:_[10]<<8|_[11],thumbWidth:_[12],thumbHeight:_[13],thumbData:_.subarray(14,14+3*_[12]*_[13])}),65518===k&&65===_[0]&&100===_[1]&&111===_[2]&&98===_[3]&&101===_[4]&&(f={version:_[5]<<8|_[6],flags0:_[7]<<8|_[8],flags1:_[9]<<8|_[10],transformCode:_[11]});break;case 65499:const T=(0,r.readUint16)(t,p);p+=2;const O=T+p-2;let E;for(;p<O;){const e=t[p++],i=new Uint16Array(64);if(e>>4==0)for(C=0;C<64;C++)E=l[C],i[E]=t[p++];else{if(e>>4!=1)throw new s("DQT - invalid table spec");for(C=0;C<64;C++)E=l[C],i[E]=(0,r.readUint16)(t,p),p+=2}m[15&e]=i}break;case 65472:case 65473:case 65474:if(h)throw new s("Only single frame JPEGs supported");p+=2,h={},h.extended=65473===k,h.progressive=65474===k,h.precision=t[p++];const M=(0,r.readUint16)(t,p);p+=2,h.scanLines=e||M,h.samplesPerLine=(0,r.readUint16)(t,p),p+=2,h.components=[],h.componentIds={};const P=t[p++];let I=0,F=0;for(x=0;x<P;x++){const e=t[p],i=t[p+1]>>4,n=15&t[p+1];I<i&&(I=i),F<n&&(F=n);const r=t[p+2];A=h.components.push({h:i,v:n,quantizationId:r,quantizationTable:null}),h.componentIds[e]=A-1,p+=3}h.maxH=I,h.maxV=F,c(h);break;case 65476:const D=(0,r.readUint16)(t,p);for(p+=2,x=2;x<D;){const e=t[p++],i=new Uint8Array(16);let n=0;for(C=0;C<16;C++,p++)n+=i[C]=t[p];const r=new Uint8Array(n);for(C=0;C<n;C++,p++)r[C]=t[p];x+=17+n,(e>>4==0?w:v)[15&e]=y(i,r)}break;case 65501:p+=2,u=(0,r.readUint16)(t,p),p+=2;break;case 65498:const R=1==++g&&!e;p+=2;const L=t[p++],N=[];for(x=0;x<L;x++){const e=t[p++],i=h.componentIds[e],n=h.components[i];n.index=e;const r=t[p++];n.huffmanTableDC=w[r>>4],n.huffmanTableAC=v[15&r],N.push(n)}const B=t[p++],j=t[p++],z=t[p++];try{const e=b(t,p,h,N,u,B,j,z>>4,15&z,R);p+=e}catch(e){if(e instanceof o)return(0,n.warn)(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(t,{dnlScanLines:e.scanLines});if(e instanceof a){(0,n.warn)(`${e.message} -- ignoring the rest of the image data.`);break t}throw e}break;case 65500:p+=4;break;case 65535:255!==t[p]&&p--;break;default:const U=S(t,p-2,p-3);if(U&&U.invalid){(0,n.warn)("JpegImage.parse - unexpected data, current marker is: "+U.invalid),p=U.offset;break}if(!U||p>=t.length-1){(0,n.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break t}throw new s("JpegImage.parse - unknown marker: "+k.toString(16))}k=(0,r.readUint16)(t,p),p+=2}this.width=h.samplesPerLine,this.height=h.scanLines,this.jfif=d,this.adobe=f,this.components=[];for(let t=0,e=h.components.length;t<e;t++){const e=h.components[t],i=m[e.quantizationId];i&&(e.quantizationTable=i),this.components.push({index:e.index,output:x(0,e),scaleX:e.h/h.maxH,scaleY:e.v/h.maxV,blocksPerLine:e.blocksPerLine,blocksPerColumn:e.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(t,e,i=!1){const n=this.width/t,r=this.height/e;let s,o,a,l,c,h,u,p,d,f,g,m=0;const y=this.components.length,v=t*e*y,b=new Uint8ClampedArray(v),w=new Uint32Array(t),x=4294967288;let S;for(u=0;u<y;u++){if(s=this.components[u],o=s.scaleX*n,a=s.scaleY*r,m=u,g=s.output,l=s.blocksPerLine+1<<3,o!==S){for(c=0;c<t;c++)p=0|c*o,w[c]=(p&x)<<3|7&p;S=o}for(h=0;h<e;h++)for(p=0|h*a,f=l*(p&x)|(7&p)<<3,c=0;c<t;c++)b[m]=g[f+w[c]],m+=y}let k=this._decodeTransform;if(i||4!==y||k||(k=new Int32Array([-256,255,-256,255,-256,255,-256,255])),k)for(u=0;u<v;)for(p=0,d=0;p<y;p++,u++,d+=2)b[u]=(b[u]*k[d]>>8)+k[d+1];return b}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform}_convertYccToRgb(t){let e,i,n;for(let r=0,s=t.length;r<s;r+=3)e=t[r],i=t[r+1],n=t[r+2],t[r]=e-179.456+1.402*n,t[r+1]=e+135.459-.344*i-.714*n,t[r+2]=e-226.816+1.772*i;return t}_convertYcckToRgb(t){let e,i,n,r,s=0;for(let o=0,a=t.length;o<a;o+=4)e=t[o],i=t[o+1],n=t[o+2],r=t[o+3],t[s++]=i*(-660635669420364e-19*i+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*r-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*r+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*r+.48357088451265)+r*(-.000336197177618394*r+.484791561490776),t[s++]=107.268039397724+i*(219927104525741e-19*i-.000640992018297945*n+.000659397001245577*e+.000426105652938837*r-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*r-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*r+.25802910206845)+r*(-.000318913117588328*r-.213742400323665),t[s++]=i*(-.000570115196973677*i-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*r+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*r-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*r+.116935020465145)+r*(-.000343531996510555*r+.24165260232407);return t.subarray(0,s)}_convertYcckToCmyk(t){let e,i,n;for(let r=0,s=t.length;r<s;r+=4)e=t[r],i=t[r+1],n=t[r+2],t[r]=434.456-e-1.402*n,t[r+1]=119.541-e+.344*i+.714*n,t[r+2]=481.816-e-1.772*i;return t}_convertCmykToRgb(t){let e,i,n,r,s=0;for(let o=0,a=t.length;o<a;o+=4)e=t[o],i=t[o+1],n=t[o+2],r=t[o+3],t[s++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*i+.0002894718188643294*n+.003264231057537806*r-1.1185611867203937)+i*(26374107616089405e-21*i-8626949158638572e-20*n-.0002748769067499491*r-.02155688794978967)+n*(-3878099212869363e-20*n-.0003267808279485286*r+.0686742238595345)-r*(.0003361971776183937*r+.7430659151342254),t[s++]=255+e*(.00013596372813588848*e+.000924537132573585*i+.00010567359618683593*n+.0004791864687436512*r-.3109689587515875)+i*(-.00023545346108370344*i+.0002702845253534714*n+.0020200308977307156*r-.7488052167015494)+n*(6834815998235662e-20*n+.00015168452363460973*r-.09751927774728933)-r*(.0003189131175883281*r+.7364883807733168),t[s++]=255+e*(13598650411385307e-21*e+.00012423956175490851*i+.0004751985097583589*n-36729317476630422e-22*r-.05562186980264034)+i*(.00016141380598724676*i+.0009692239130725186*n+.0007782692450036253*r-.44015232367526463)+n*(5.068882914068769e-7*n+.0017778369011375071*r-.7591454649749609)-r*(.0003435319965105553*r+.7063770186160144);return t.subarray(0,s)}getData({width:t,height:e,forceRGB:i=!1,isSourcePDF:n=!1}){if(this.numComponents>4)throw new s("Unsupported color mode");const r=this._getLinearizedBlockData(t,e,n);if(1===this.numComponents&&i){const t=r.length,e=new Uint8ClampedArray(3*t);let i=0;for(let n=0;n<t;n++){const t=r[n];e[i++]=t,e[i++]=t,e[i++]=t}return e}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(r);if(4===this.numComponents){if(this._isColorConversionNeeded)return i?this._convertYcckToRgb(r):this._convertYcckToCmyk(r);if(i)return this._convertCmykToRgb(r)}return r}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxStream=void 0;var n=i(29),r=i(40),s=i(2);class o extends n.DecodeStream{constructor(t,e,i){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=i}get bytes(){return(0,s.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new r.JpxImage;t.parse(this.bytes);const e=t.width,i=t.height,n=t.componentsCount,s=t.tiles.length;if(1===s)this.buffer=t.tiles[0].items;else{const r=new Uint8ClampedArray(e*i*n);for(let i=0;i<s;i++){const s=t.tiles[i],o=s.width,a=s.height,l=s.left,c=s.top,h=s.items;let u=0,p=(e*c+l)*n;const d=e*n,f=o*n;for(let t=0;t<a;t++){const t=h.subarray(u,u+f);r.set(t,p),u+=f,p+=d}}this.buffer=r}this.bufferLength=this.buffer.length,this.eof=!0}}e.JpxStream=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxImage=void 0;var n=i(2),r=i(8),s=i(36);class o extends n.BaseException{constructor(t){super(`JPX error: ${t}`,"JpxError")}}const a={LL:0,LH:1,HL:1,HH:2};function l(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function c(t,e){const i=t.SIZ,n=[];let r;const s=Math.ceil((i.Xsiz-i.XTOsiz)/i.XTsiz),o=Math.ceil((i.Ysiz-i.YTOsiz)/i.YTsiz);for(let t=0;t<o;t++)for(let e=0;e<s;e++)r={},r.tx0=Math.max(i.XTOsiz+e*i.XTsiz,i.XOsiz),r.ty0=Math.max(i.YTOsiz+t*i.YTsiz,i.YOsiz),r.tx1=Math.min(i.XTOsiz+(e+1)*i.XTsiz,i.Xsiz),r.ty1=Math.min(i.YTOsiz+(t+1)*i.YTsiz,i.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],n.push(r);t.tiles=n;for(let t=0,s=i.Csiz;t<s;t++){const i=e[t];for(let e=0,s=n.length;e<s;e++){const s={};r=n[e],s.tcx0=Math.ceil(r.tx0/i.XRsiz),s.tcy0=Math.ceil(r.ty0/i.YRsiz),s.tcx1=Math.ceil(r.tx1/i.XRsiz),s.tcy1=Math.ceil(r.ty1/i.YRsiz),s.width=s.tcx1-s.tcx0,s.height=s.tcy1-s.tcy0,r.components[t]=s}}}function h(t,e,i){const n=e.codingStyleParameters,r={};return n.entropyCoderWithCustomPrecincts?(r.PPx=n.precinctsSizes[i].PPx,r.PPy=n.precinctsSizes[i].PPy):(r.PPx=15,r.PPy=15),r.xcb_=i>0?Math.min(n.xcb,r.PPx-1):Math.min(n.xcb,r.PPx),r.ycb_=i>0?Math.min(n.ycb,r.PPy-1):Math.min(n.ycb,r.PPy),r}function u(t,e,i){const n=1<<i.PPx,r=1<<i.PPy,s=0===e.resLevel,o=1<<i.PPx+(s?0:-1),a=1<<i.PPy+(s?0:-1),l=e.trx1>e.trx0?Math.ceil(e.trx1/n)-Math.floor(e.trx0/n):0,c=e.try1>e.try0?Math.ceil(e.try1/r)-Math.floor(e.try0/r):0,h=l*c;e.precinctParameters={precinctWidth:n,precinctHeight:r,numprecinctswide:l,numprecinctshigh:c,numprecincts:h,precinctWidthInSubband:o,precinctHeightInSubband:a}}function p(t,e,i){const n=i.xcb_,r=i.ycb_,s=1<<n,o=1<<r,a=e.tbx0>>n,l=e.tby0>>r,c=e.tbx1+s-1>>n,h=e.tby1+o-1>>r,u=e.resolution.precinctParameters,p=[],d=[];let f,g,m,y;for(g=l;g<h;g++)for(f=a;f<c;f++){if(m={cbx:f,cby:g,tbx0:s*f,tby0:o*g,tbx1:s*(f+1),tby1:o*(g+1)},m.tbx0_=Math.max(e.tbx0,m.tbx0),m.tby0_=Math.max(e.tby0,m.tby0),m.tbx1_=Math.min(e.tbx1,m.tbx1),m.tby1_=Math.min(e.tby1,m.tby1),y=Math.floor((m.tbx0_-e.tbx0)/u.precinctWidthInSubband)+Math.floor((m.tby0_-e.tby0)/u.precinctHeightInSubband)*u.numprecinctswide,m.precinctNumber=y,m.subbandType=e.type,m.Lblock=3,m.tbx1_<=m.tbx0_||m.tby1_<=m.tby0_)continue;p.push(m);let t=d[y];void 0!==t?(f<t.cbxMin?t.cbxMin=f:f>t.cbxMax&&(t.cbxMax=f),g<t.cbyMin?t.cbxMin=g:g>t.cbyMax&&(t.cbyMax=g)):d[y]=t={cbxMin:f,cbyMin:g,cbxMax:f,cbyMax:g},m.precinct=t}e.codeblockParameters={codeblockWidth:n,codeblockHeight:r,numcodeblockwide:c-a+1,numcodeblockhigh:h-l+1},e.codeblocks=p,e.precincts=d}function d(t,e,i){const n=[],r=t.subbands;for(let t=0,i=r.length;t<i;t++){const i=r[t].codeblocks;for(let t=0,r=i.length;t<r;t++){const r=i[t];r.precinctNumber===e&&n.push(r)}}return{layerNumber:i,codeblocks:n}}function f(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,s=e.Csiz;let a=0;for(let t=0;t<s;t++)a=Math.max(a,n.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<r;l++){for(;c<=a;c++){for(;h<s;h++){const t=n.components[h];if(c>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[c],i=e.precinctParameters.numprecincts;for(;u<i;){const t=d(e,u,l);return u++,t}u=0}h=0}c=0}throw new o("Out of packets")}}function g(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,s=e.Csiz;let a=0;for(let t=0;t<s;t++)a=Math.max(a,n.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<=a;l++){for(;c<r;c++){for(;h<s;h++){const t=n.components[h];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],i=e.precinctParameters.numprecincts;for(;u<i;){const t=d(e,u,c);return u++,t}u=0}h=0}c=0}throw new o("Out of packets")}}function m(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,s=e.Csiz;let a,l,c,h,u=0;for(c=0;c<s;c++){const t=n.components[c];u=Math.max(u,t.codingStyleParameters.decompositionLevelsCount)}const p=new Int32Array(u+1);for(l=0;l<=u;++l){let t=0;for(c=0;c<s;++c){const e=n.components[c].resolutions;l<e.length&&(t=Math.max(t,e[l].precinctParameters.numprecincts))}p[l]=t}a=0,l=0,c=0,h=0,this.nextPacket=function(){for(;l<=u;l++){for(;h<p[l];h++){for(;c<s;c++){const t=n.components[c];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],i=e.precinctParameters.numprecincts;if(!(h>=i)){for(;a<r;){const t=d(e,h,a);return a++,t}a=0}}c=0}h=0}throw new o("Out of packets")}}function y(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=w(n),l=a;let c=0,h=0,u=0,p=0,f=0;this.nextPacket=function(){for(;f<l.maxNumHigh;f++){for(;p<l.maxNumWide;p++){for(;u<s;u++){const t=n.components[u],e=t.codingStyleParameters.decompositionLevelsCount;for(;h<=e;h++){const e=t.resolutions[h],i=a.components[u].resolutions[h],n=b(p,f,i,l,e);if(null!==n){for(;c<r;){const t=d(e,n,c);return c++,t}c=0}}h=0}u=0}p=0}throw new o("Out of packets")}}function v(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=w(n);let l=0,c=0,h=0,u=0,p=0;this.nextPacket=function(){for(;h<s;++h){const t=n.components[h],e=a.components[h],i=t.codingStyleParameters.decompositionLevelsCount;for(;p<e.maxNumHigh;p++){for(;u<e.maxNumWide;u++){for(;c<=i;c++){const i=t.resolutions[c],n=e.resolutions[c],s=b(u,p,n,e,i);if(null!==s){for(;l<r;){const t=d(i,s,l);return l++,t}l=0}}c=0}u=0}p=0}throw new o("Out of packets")}}function b(t,e,i,n,r){const s=t*n.minWidth,o=e*n.minHeight;if(s%i.width!=0||o%i.height!=0)return null;const a=o/i.width*r.precinctParameters.numprecinctswide;return s/i.height+a}function w(t){const e=t.components.length;let i=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,s=0;const o=new Array(e);for(let a=0;a<e;a++){const e=t.components[a],l=e.codingStyleParameters.decompositionLevelsCount,c=new Array(l+1);let h=Number.MAX_VALUE,u=Number.MAX_VALUE,p=0,d=0,f=1;for(let t=l;t>=0;--t){const i=e.resolutions[t],n=f*i.precinctParameters.precinctWidth,r=f*i.precinctParameters.precinctHeight;h=Math.min(h,n),u=Math.min(u,r),p=Math.max(p,i.precinctParameters.numprecinctswide),d=Math.max(d,i.precinctParameters.numprecinctshigh),c[t]={width:n,height:r},f<<=1}i=Math.min(i,h),n=Math.min(n,u),r=Math.max(r,p),s=Math.max(s,d),o[a]={resolutions:c,minWidth:h,minHeight:u,maxNumWide:p,maxNumHigh:d}}return{components:o,minWidth:i,minHeight:n,maxNumWide:r,maxNumHigh:s}}function x(t){const e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=e.Csiz;for(let t=0;t<r;t++){const e=n.components[t],i=e.codingStyleParameters.decompositionLevelsCount,r=[],s=[];for(let t=0;t<=i;t++){const n=h(0,e,t),o={},a=1<<i-t;let l;if(o.trx0=Math.ceil(e.tcx0/a),o.try0=Math.ceil(e.tcy0/a),o.trx1=Math.ceil(e.tcx1/a),o.try1=Math.ceil(e.tcy1/a),o.resLevel=t,u(0,o,n),r.push(o),0===t)l={},l.type="LL",l.tbx0=Math.ceil(e.tcx0/a),l.tby0=Math.ceil(e.tcy0/a),l.tbx1=Math.ceil(e.tcx1/a),l.tby1=Math.ceil(e.tcy1/a),l.resolution=o,p(0,l,n),s.push(l),o.subbands=[l];else{const r=1<<i-t+1,a=[];l={},l.type="HL",l.tbx0=Math.ceil(e.tcx0/r-.5),l.tby0=Math.ceil(e.tcy0/r),l.tbx1=Math.ceil(e.tcx1/r-.5),l.tby1=Math.ceil(e.tcy1/r),l.resolution=o,p(0,l,n),s.push(l),a.push(l),l={},l.type="LH",l.tbx0=Math.ceil(e.tcx0/r),l.tby0=Math.ceil(e.tcy0/r-.5),l.tbx1=Math.ceil(e.tcx1/r),l.tby1=Math.ceil(e.tcy1/r-.5),l.resolution=o,p(0,l,n),s.push(l),a.push(l),l={},l.type="HH",l.tbx0=Math.ceil(e.tcx0/r-.5),l.tby0=Math.ceil(e.tcy0/r-.5),l.tbx1=Math.ceil(e.tcx1/r-.5),l.tby1=Math.ceil(e.tcy1/r-.5),l.resolution=o,p(0,l,n),s.push(l),a.push(l),o.subbands=a}}e.resolutions=r,e.subbands=s}const s=n.codingStyleDefaultParameters.progressionOrder;switch(s){case 0:n.packetsIterator=new f(t);break;case 1:n.packetsIterator=new g(t);break;case 2:n.packetsIterator=new m(t);break;case 3:n.packetsIterator=new y(t);break;case 4:n.packetsIterator=new v(t);break;default:throw new o(`Unsupported progression order ${s}`)}}function S(t,e,i,n){let s,a=0,l=0,c=!1;function h(t){for(;l<t;){const t=e[i+a];a++,c?(s=s<<7|t,l+=7,c=!1):(s=s<<8|t,l+=8),255===t&&(c=!0)}return l-=t,s>>>l&(1<<t)-1}function u(t){return 255===e[i+a-1]&&e[i+a]===t?(p(1),!0):255===e[i+a]&&e[i+a+1]===t&&(p(2),!0)}function p(t){a+=t}function d(){l=0,c&&(a++,c=!1)}function f(){if(0===h(1))return 1;if(0===h(1))return 2;let t=h(2);return t<3?t+3:(t=h(5),t<31?t+6:(t=h(7),t+37))}const g=t.currentTile.index,m=t.tiles[g],y=t.COD.sopMarkerUsed,v=t.COD.ephMarkerUsed,b=m.packetsIterator;for(;a<n;){d(),y&&u(145)&&p(4);const t=b.nextPacket();if(!h(1))continue;const n=t.layerNumber,s=[];let l;for(let e=0,i=t.codeblocks.length;e<i;e++){l=t.codeblocks[e];let i=l.precinct;const a=l.cbx-i.cbxMin,c=l.cby-i.cbyMin;let u,p,d=!1,g=!1;if(void 0!==l.included)d=!!h(1);else{let t;if(i=l.precinct,void 0!==i.inclusionTree)t=i.inclusionTree;else{const e=i.cbxMax-i.cbxMin+1,r=i.cbyMax-i.cbyMin+1;t=new T(e,r,n),p=new _(e,r),i.inclusionTree=t,i.zeroBitPlanesTree=p;for(let t=0;t<n;t++)if(0!==h(1))throw new o("Invalid tag tree")}if(t.reset(a,c,n))for(;;){if(!h(1)){t.incrementValue(n);break}if(u=!t.nextLevel(),u){l.included=!0,d=g=!0;break}}}if(!d)continue;if(g){for(p=i.zeroBitPlanesTree,p.reset(a,c);;)if(h(1)){if(u=!p.nextLevel(),u)break}else p.incrementValue();l.zeroBitPlanes=p.value}const m=f();for(;h(1);)l.Lblock++;const y=(0,r.log2)(m),v=h((m<1<<y?y-1:y)+l.Lblock);s.push({codeblock:l,codingpasses:m,dataLength:v})}for(d(),v&&u(146);s.length>0;){const t=s.shift();l=t.codeblock,void 0===l.data&&(l.data=[]),l.data.push({data:e,start:i+a,end:i+a+t.dataLength,codingpasses:t.codingpasses}),a+=t.dataLength}}return a}function k(t,e,i,n,r,o,a,l,c){const h=n.tbx0,u=n.tby0,p=n.tbx1-n.tbx0,d=n.codeblocks,f="H"===n.type.charAt(0)?1:0,g="H"===n.type.charAt(1)?e:0;for(let i=0,m=d.length;i<m;++i){const m=d[i],y=m.tbx1_-m.tbx0_,v=m.tby1_-m.tby0_;if(0===y||0===v)continue;if(void 0===m.data)continue;const b=new O(y,v,m.subbandType,m.zeroBitPlanes,o);let w=2;const x=m.data;let S,k,C,A=0,_=0;for(S=0,k=x.length;S<k;S++)C=x[S],A+=C.end-C.start,_+=C.codingpasses;const T=new Uint8Array(A);let E=0;for(S=0,k=x.length;S<k;S++){C=x[S];const t=C.data.subarray(C.start,C.end);T.set(t,E),E+=t.length}const M=new s.ArithmeticDecoder(T,0,A);for(b.setDecoder(M),S=0;S<_;S++){switch(w){case 0:b.runSignificancePropagationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),l&&b.checkSegmentationSymbol()}c&&b.reset(),w=(w+1)%3}let P=m.tbx0_-h+(m.tby0_-u)*p;const I=b.coefficentsSign,F=b.coefficentsMagnitude,D=b.bitsDecoded,R=a?0:.5;let L,N,B;E=0;const j="LL"!==n.type;for(S=0;S<v;S++){const i=2*(P/p|0)*(e-p)+f+g;for(L=0;L<y;L++){if(N=F[E],0!==N){N=(N+R)*r,0!==I[E]&&(N=-N),B=D[E];const e=j?i+(P<<1):P;t[e]=a&&B>=o?N:N*(1<<o-B)}P++,E++}P+=p-y}}}function C(t,e,i){const n=e.components[i],r=n.codingStyleParameters,s=n.quantizationParameters,o=r.decompositionLevelsCount,l=s.SPqcds,c=s.scalarExpounded,h=s.guardBits,u=r.segmentationSymbolUsed,p=r.resetContextProbabilities,d=t.components[i].precision,f=r.reversibleTransformation,g=f?new P:new M,m=[];let y=0;for(let t=0;t<=o;t++){const e=n.resolutions[t],i=e.trx1-e.trx0,r=e.try1-e.try0,s=new Float32Array(i*r);for(let n=0,r=e.subbands.length;n<r;n++){let r,o;c?(r=l[y].mu,o=l[y].epsilon,y++):(r=l[0].mu,o=l[0].epsilon+(t>0?1-t:0));const g=e.subbands[n],m=a[g.type];k(s,i,0,g,f?1:2**(d+m-o)*(1+r/2048),h+o-1,f,u,p)}m.push({width:i,height:r,items:s})}const v=g.calculate(m,n.tcx0,n.tcy0);return{left:n.tcx0,top:n.tcy0,width:v.width,height:v.height,items:v.items}}function A(t,e){const i=t.SIZ.Csiz,n=t.tiles[e];for(let e=0;e<i;e++){const i=n.components[e],r=void 0!==t.currentTile.QCC[e]?t.currentTile.QCC[e]:t.currentTile.QCD;i.quantizationParameters=r;const s=void 0!==t.currentTile.COC[e]?t.currentTile.COC[e]:t.currentTile.COD;i.codingStyleParameters=s}n.codingStyleDefaultParameters=t.currentTile.COD}e.JpxImage=class{constructor(){this.failOnCorruptedImage=!1}parse(t){if(65359===(0,r.readUint16)(t,0))return void this.parseCodestream(t,0,t.length);const e=t.length;let i=0;for(;i<e;){let s=8,a=(0,r.readUint32)(t,i);const l=(0,r.readUint32)(t,i+4);if(i+=s,1===a&&(a=4294967296*(0,r.readUint32)(t,i)+(0,r.readUint32)(t,i+4),i+=8,s+=8),0===a&&(a=e-i+s),a<s)throw new o("Invalid box field size");const c=a-s;let h=!0;switch(l){case 1785737832:h=!1;break;case 1668246642:const e=t[i];if(1===e){const e=(0,r.readUint32)(t,i+3);switch(e){case 16:case 17:case 18:break;default:(0,n.warn)("Unknown colorspace "+e)}}else 2===e&&(0,n.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,i,i+c);break;case 1783636e3:218793738!==(0,r.readUint32)(t,i)&&(0,n.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const s=String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,255&l);(0,n.warn)(`Unsupported header type ${l} (${s}).`)}h&&(i+=c)}}parseImageProperties(t){let e=t.getByte();for(;e>=0;){const i=e;if(e=t.getByte(),65361==(i<<8|e)){t.skip(4);const e=t.getInt32()>>>0,i=t.getInt32()>>>0,n=t.getInt32()>>>0,r=t.getInt32()>>>0;t.skip(16);const s=t.getUint16();return this.width=e-n,this.height=i-r,this.componentsCount=s,void(this.bitsPerComponent=8)}}throw new o("No size marker found in JPX stream")}parseCodestream(t,e,i){const s={};let a=!1;try{let o=e;for(;o+1<i;){const e=(0,r.readUint16)(t,o);o+=2;let i,h,u,p,d,f,g=0;switch(e){case 65359:s.mainHeader=!0;break;case 65497:break;case 65361:g=(0,r.readUint16)(t,o);const m={};m.Xsiz=(0,r.readUint32)(t,o+4),m.Ysiz=(0,r.readUint32)(t,o+8),m.XOsiz=(0,r.readUint32)(t,o+12),m.YOsiz=(0,r.readUint32)(t,o+16),m.XTsiz=(0,r.readUint32)(t,o+20),m.YTsiz=(0,r.readUint32)(t,o+24),m.XTOsiz=(0,r.readUint32)(t,o+28),m.YTOsiz=(0,r.readUint32)(t,o+32);const y=(0,r.readUint16)(t,o+36);m.Csiz=y;const v=[];i=o+38;for(let e=0;e<y;e++){const e={precision:1+(127&t[i]),isSigned:!!(128&t[i]),XRsiz:t[i+1],YRsiz:t[i+2]};i+=3,l(e,m),v.push(e)}s.SIZ=m,s.components=v,c(s,v),s.QCC=[],s.COC=[];break;case 65372:g=(0,r.readUint16)(t,o);const b={};switch(i=o+2,h=t[i++],31&h){case 0:p=8,d=!0;break;case 1:p=16,d=!1;break;case 2:p=16,d=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(b.noQuantization=8===p,b.scalarExpounded=d,b.guardBits=h>>5,u=[];i<g+o;){const e={};8===p?(e.epsilon=t[i++]>>3,e.mu=0):(e.epsilon=t[i]>>3,e.mu=(7&t[i])<<8|t[i+1],i+=2),u.push(e)}b.SPqcds=u,s.mainHeader?s.QCD=b:(s.currentTile.QCD=b,s.currentTile.QCC=[]);break;case 65373:g=(0,r.readUint16)(t,o);const w={};let k;switch(i=o+2,s.SIZ.Csiz<257?k=t[i++]:(k=(0,r.readUint16)(t,i),i+=2),h=t[i++],31&h){case 0:p=8,d=!0;break;case 1:p=16,d=!1;break;case 2:p=16,d=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(w.noQuantization=8===p,w.scalarExpounded=d,w.guardBits=h>>5,u=[];i<g+o;){const e={};8===p?(e.epsilon=t[i++]>>3,e.mu=0):(e.epsilon=t[i]>>3,e.mu=(7&t[i])<<8|t[i+1],i+=2),u.push(e)}w.SPqcds=u,s.mainHeader?s.QCC[k]=w:s.currentTile.QCC[k]=w;break;case 65362:g=(0,r.readUint16)(t,o);const C={};i=o+2;const _=t[i++];C.entropyCoderWithCustomPrecincts=!!(1&_),C.sopMarkerUsed=!!(2&_),C.ephMarkerUsed=!!(4&_),C.progressionOrder=t[i++],C.layersCount=(0,r.readUint16)(t,i),i+=2,C.multipleComponentTransform=t[i++],C.decompositionLevelsCount=t[i++],C.xcb=2+(15&t[i++]),C.ycb=2+(15&t[i++]);const T=t[i++];if(C.selectiveArithmeticCodingBypass=!!(1&T),C.resetContextProbabilities=!!(2&T),C.terminationOnEachCodingPass=!!(4&T),C.verticallyStripe=!!(8&T),C.predictableTermination=!!(16&T),C.segmentationSymbolUsed=!!(32&T),C.reversibleTransformation=t[i++],C.entropyCoderWithCustomPrecincts){const e=[];for(;i<g+o;){const n=t[i++];e.push({PPx:15&n,PPy:n>>4})}C.precinctsSizes=e}const O=[];C.selectiveArithmeticCodingBypass&&O.push("selectiveArithmeticCodingBypass"),C.terminationOnEachCodingPass&&O.push("terminationOnEachCodingPass"),C.verticallyStripe&&O.push("verticallyStripe"),C.predictableTermination&&O.push("predictableTermination"),O.length>0&&(a=!0,(0,n.warn)(`JPX: Unsupported COD options (${O.join(", ")}).`)),s.mainHeader?s.COD=C:(s.currentTile.COD=C,s.currentTile.COC=[]);break;case 65424:g=(0,r.readUint16)(t,o),f={},f.index=(0,r.readUint16)(t,o+2),f.length=(0,r.readUint32)(t,o+4),f.dataEnd=f.length+o-2,f.partIndex=t[o+8],f.partsCount=t[o+9],s.mainHeader=!1,0===f.partIndex&&(f.COD=s.COD,f.COC=s.COC.slice(0),f.QCD=s.QCD,f.QCC=s.QCC.slice(0)),s.currentTile=f;break;case 65427:f=s.currentTile,0===f.partIndex&&(A(s,f.index),x(s)),g=f.dataEnd-o,S(s,t,o,g);break;case 65363:(0,n.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:g=(0,r.readUint16)(t,o);break;default:throw new Error("Unknown codestream code: "+e.toString(16))}o+=g}}catch(t){if(a||this.failOnCorruptedImage)throw new o(t.message);(0,n.warn)(`JPX: Trying to recover from: "${t.message}".`)}this.tiles=function(t){const e=t.SIZ,i=t.components,n=e.Csiz,r=[];for(let e=0,s=t.tiles.length;e<s;e++){const s=t.tiles[e],o=[];for(let e=0;e<n;e++)o[e]=C(t,s,e);const a=o[0],l=new Uint8ClampedArray(a.items.length*n),c={left:a.left,top:a.top,width:a.width,height:a.height,items:l};let h,u,p,d,f,g,m,y=0;if(s.codingStyleDefaultParameters.multipleComponentTransform){const t=4===n,e=o[0].items,r=o[1].items,a=o[2].items,c=t?o[3].items:null;h=i[0].precision-8,u=.5+(128<<h);const v=s.components[0],b=n-3;if(d=e.length,v.codingStyleParameters.reversibleTransformation)for(p=0;p<d;p++,y+=b){f=e[p]+u,g=r[p],m=a[p];const t=f-(m+g>>2);l[y++]=t+m>>h,l[y++]=t>>h,l[y++]=t+g>>h}else for(p=0;p<d;p++,y+=b)f=e[p]+u,g=r[p],m=a[p],l[y++]=f+1.402*m>>h,l[y++]=f-.34413*g-.71414*m>>h,l[y++]=f+1.772*g>>h;if(t)for(p=0,y=3;p<d;p++,y+=4)l[y]=c[p]+u>>h}else for(let t=0;t<n;t++){const e=o[t].items;for(h=i[t].precision-8,u=.5+(128<<h),y=t,p=0,d=e.length;p<d;p++)l[y]=e[p]+u>>h,y+=n}r.push(c)}return r}(s),this.width=s.SIZ.Xsiz-s.SIZ.XOsiz,this.height=s.SIZ.Ysiz-s.SIZ.YOsiz,this.componentsCount=s.SIZ.Csiz}};class _{constructor(t,e){const i=(0,r.log2)(Math.max(t,e))+1;this.levels=[];for(let n=0;n<i;n++){const i={width:t,height:e,items:[]};this.levels.push(i),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e){let i,n=0,r=0;for(;n<this.levels.length;){i=this.levels[n];const s=t+e*i.width;if(void 0!==i.items[s]){r=i.items[s];break}i.index=s,t>>=1,e>>=1,n++}n--,i=this.levels[n],i.items[i.index]=r,this.currentLevel=n,delete this.value}incrementValue(){const t=this.levels[this.currentLevel];t.items[t.index]++}nextLevel(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];return t--,t<0?(this.value=i,!1):(this.currentLevel=t,e=this.levels[t],e.items[e.index]=i,!0)}}class T{constructor(t,e,i){const n=(0,r.log2)(Math.max(t,e))+1;this.levels=[];for(let r=0;r<n;r++){const n=new Uint8Array(t*e);for(let t=0,e=n.length;t<e;t++)n[t]=i;const r={width:t,height:e,items:n};this.levels.push(r),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e,i){let n=0;for(;n<this.levels.length;){const r=this.levels[n],s=t+e*r.width;r.index=s;const o=r.items[s];if(255===o)break;if(o>i)return this.currentLevel=n,this.propagateValues(),!1;t>>=1,e>>=1,n++}return this.currentLevel=n-1,!0}incrementValue(t){const e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()}propagateValues(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];for(;--t>=0;)e=this.levels[t],e.items[e.index]=i}nextLevel(){let t=this.currentLevel,e=this.levels[t];const i=e.items[e.index];return e.items[e.index]=255,t--,!(t<0||(this.currentLevel=t,e=this.levels[t],e.items[e.index]=i,0))}}const O=function(){const t=17,e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),i=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),n=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return class{constructor(t,r,s,o,a){let l;this.width=t,this.height=r,l="HH"===s?n:"HL"===s?i:e,this.contextLabelTable=l;const c=t*r;let h;this.neighborsSignificance=new Uint8Array(c),this.coefficentsSign=new Uint8Array(c),h=a>14?new Uint32Array(c):a>6?new Uint16Array(c):new Uint8Array(c),this.coefficentsMagnitude=h,this.processingFlags=new Uint8Array(c);const u=new Uint8Array(c);if(0!==o)for(let t=0;t<c;t++)u[t]=o;this.bitsDecoded=u,this.reset()}setDecoder(t){this.decoder=t}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6}setNeighborsSignificance(t,e,i){const n=this.neighborsSignificance,r=this.width,s=this.height,o=e>0,a=e+1<r;let l;t>0&&(l=i-r,o&&(n[l-1]+=16),a&&(n[l+1]+=16),n[l]+=4),t+1<s&&(l=i+r,o&&(n[l-1]+=16),a&&(n[l+1]+=16),n[l]+=4),o&&(n[i-1]+=1),a&&(n[i+1]+=1),n[i]|=128}runSignificancePropagationPass(){const t=this.decoder,e=this.width,i=this.height,n=this.coefficentsMagnitude,r=this.coefficentsSign,s=this.neighborsSignificance,o=this.processingFlags,a=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded;for(let h=0;h<i;h+=4)for(let u=0;u<e;u++){let p=h*e+u;for(let d=0;d<4;d++,p+=e){const e=h+d;if(e>=i)break;if(o[p]&=-2,n[p]||!s[p])continue;const f=l[s[p]];if(t.readBit(a,f)){const t=this.decodeSignBit(e,u,p);r[p]=t,n[p]=1,this.setNeighborsSignificance(e,u,p),o[p]|=2}c[p]++,o[p]|=1}}}decodeSignBit(t,e,i){const n=this.width,r=this.height,s=this.coefficentsMagnitude,o=this.coefficentsSign;let a,l,c,h,u,p;h=e>0&&0!==s[i-1],e+1<n&&0!==s[i+1]?(c=o[i+1],h?(l=o[i-1],a=1-c-l):a=1-c-c):h?(l=o[i-1],a=1-l-l):a=0;const d=3*a;return h=t>0&&0!==s[i-n],t+1<r&&0!==s[i+n]?(c=o[i+n],h?(l=o[i-n],a=1-c-l+d):a=1-c-c+d):h?(l=o[i-n],a=1-l-l+d):a=d,a>=0?(u=9+a,p=this.decoder.readBit(this.contexts,u)):(u=9-a,p=1^this.decoder.readBit(this.contexts,u)),p}runMagnitudeRefinementPass(){const t=this.decoder,e=this.width,i=this.height,n=this.coefficentsMagnitude,r=this.neighborsSignificance,s=this.contexts,o=this.bitsDecoded,a=this.processingFlags,l=e*i,c=4*e;for(let i,h=0;h<l;h=i){i=Math.min(l,h+c);for(let l=0;l<e;l++)for(let c=h+l;c<i;c+=e){if(!n[c]||0!=(1&a[c]))continue;let e=16;0!=(2&a[c])&&(a[c]^=2,e=0==(127&r[c])?15:14);const i=t.readBit(s,e);n[c]=n[c]<<1|i,o[c]++,a[c]|=1}}}runCleanupPass(){const e=this.decoder,i=this.width,n=this.height,r=this.neighborsSignificance,s=this.coefficentsMagnitude,o=this.coefficentsSign,a=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=this.processingFlags,u=i,p=2*i,d=3*i;let f;for(let g=0;g<n;g=f){f=Math.min(g+4,n);const m=g*i,y=g+3<n;for(let n=0;n<i;n++){const v=m+n;let b,w=0,x=v,S=g;if(y&&0===h[v]&&0===h[v+u]&&0===h[v+p]&&0===h[v+d]&&0===r[v]&&0===r[v+u]&&0===r[v+p]&&0===r[v+d]){if(!e.readBit(a,18)){c[v]++,c[v+u]++,c[v+p]++,c[v+d]++;continue}w=e.readBit(a,t)<<1|e.readBit(a,t),0!==w&&(S=g+w,x+=w*i),b=this.decodeSignBit(S,n,x),o[x]=b,s[x]=1,this.setNeighborsSignificance(S,n,x),h[x]|=2,x=v;for(let t=g;t<=S;t++,x+=i)c[x]++;w++}for(S=g+w;S<f;S++,x+=i){if(s[x]||0!=(1&h[x]))continue;const t=l[r[x]];1===e.readBit(a,t)&&(b=this.decodeSignBit(S,n,x),o[x]=b,s[x]=1,this.setNeighborsSignificance(S,n,x),h[x]|=2),c[x]++}}}}checkSegmentationSymbol(){const e=this.decoder,i=this.contexts;if(10!=(e.readBit(i,t)<<3|e.readBit(i,t)<<2|e.readBit(i,t)<<1|e.readBit(i,t)))throw new o("Invalid segmentation symbol")}}}();class E{constructor(){this.constructor===E&&(0,n.unreachable)("Cannot initialize Transform.")}calculate(t,e,i){let n=t[0];for(let r=1,s=t.length;r<s;r++)n=this.iterate(n,t[r],e,i);return n}extend(t,e,i){let n=e-1,r=e+1,s=e+i-2,o=e+i;t[n--]=t[r++],t[o++]=t[s--],t[n--]=t[r++],t[o++]=t[s--],t[n--]=t[r++],t[o++]=t[s--],t[n]=t[r],t[o]=t[s]}filter(t,e,i){(0,n.unreachable)("Abstract method `filter` called")}iterate(t,e,i,n){const r=t.width,s=t.height;let o=t.items;const a=e.width,l=e.height,c=e.items;let h,u,p,d,f,g;for(p=0,h=0;h<s;h++)for(d=2*h*a,u=0;u<r;u++,p++,d+=2)c[d]=o[p];o=t.items=null;const m=new Float32Array(a+8);if(1===a){if(0!=(1&i))for(g=0,p=0;g<l;g++,p+=a)c[p]*=.5}else for(g=0,p=0;g<l;g++,p+=a)m.set(c.subarray(p,p+a),4),this.extend(m,4,a),this.filter(m,4,a),c.set(m.subarray(4,4+a),p);let y=16;const v=[];for(h=0;h<y;h++)v.push(new Float32Array(l+8));let b,w=0;if(t=4+l,1===l){if(0!=(1&n))for(f=0;f<a;f++)c[f]*=.5}else for(f=0;f<a;f++){if(0===w){for(y=Math.min(a-f,y),p=f,d=4;d<t;p+=a,d++)for(b=0;b<y;b++)v[b][d]=c[p+b];w=y}w--;const e=v[w];if(this.extend(e,4,l),this.filter(e,4,l),0===w)for(p=f-y+1,d=4;d<t;p+=a,d++)for(b=0;b<y;b++)c[p+b]=v[b][d]}return{width:a,height:l,items:c}}}class M extends E{filter(t,e,i){const n=i>>1;let r,s,o,a;const l=-1.586134342059924,c=-.052980118572961,h=.882911075530934,u=.443506852043971,p=1.230174104914001;for(r=(e|=0)-3,s=n+4;s--;r+=2)t[r]*=.8128930661159609;for(r=e-2,o=u*t[r-1],s=n+3;s--&&(a=u*t[r+1],t[r]=p*t[r]-o-a,s--);r+=2)r+=2,o=u*t[r+1],t[r]=p*t[r]-o-a;for(r=e-1,o=h*t[r-1],s=n+2;s--&&(a=h*t[r+1],t[r]-=o+a,s--);r+=2)r+=2,o=h*t[r+1],t[r]-=o+a;for(r=e,o=c*t[r-1],s=n+1;s--&&(a=c*t[r+1],t[r]-=o+a,s--);r+=2)r+=2,o=c*t[r+1],t[r]-=o+a;if(0!==n)for(r=e+1,o=l*t[r-1],s=n;s--&&(a=l*t[r+1],t[r]-=o+a,s--);r+=2)r+=2,o=l*t[r+1],t[r]-=o+a}}class P extends E{filter(t,e,i){const n=i>>1;let r,s;for(r=e|=0,s=n+1;s--;r+=2)t[r]-=t[r-1]+t[r+1]+2>>2;for(r=e+1,s=n;s--;r+=2)t[r]+=t[r-1]+t[r+1]>>1}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LZWStream=void 0;var n=i(29);class r extends n.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;const n=4096,r={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(n),dictionaryLengths:new Uint16Array(n),dictionaryPrevCodes:new Uint16Array(n),currentSequence:new Uint8Array(n),currentSequenceLength:0};for(let t=0;t<256;++t)r.dictionaryValues[t]=t,r.dictionaryLengths[t]=1;this.lzwState=r}readBits(t){let e=this.bitsCached,i=this.cachedData;for(;e<t;){const t=this.str.getByte();if(-1===t)return this.eof=!0,null;i=i<<8|t,e+=8}return this.bitsCached=e-=t,this.cachedData=i,this.lastCode=null,i>>>e&(1<<t)-1}readBlock(){let t,e,i,n=1024;const r=this.lzwState;if(!r)return;const s=r.earlyChange;let o=r.nextCode;const a=r.dictionaryValues,l=r.dictionaryLengths,c=r.dictionaryPrevCodes;let h=r.codeLength,u=r.prevCode;const p=r.currentSequence;let d=r.currentSequenceLength,f=0,g=this.bufferLength,m=this.ensureBuffer(this.bufferLength+n);for(t=0;t<512;t++){const t=this.readBits(h),r=d>0;if(t<256)p[0]=t,d=1;else{if(!(t>=258)){if(256===t){h=9,o=258,d=0;continue}this.eof=!0,delete this.lzwState;break}if(t<o)for(d=l[t],e=d-1,i=t;e>=0;e--)p[e]=a[i],i=c[i];else p[d++]=p[0]}if(r&&(c[o]=u,l[o]=l[u]+1,a[o]=p[0],o++,h=o+s&o+s-1?h:0|Math.min(Math.log(o+s)/.6931471805599453+1,12)),u=t,f+=d,n<f){do{n+=512}while(n<f);m=this.ensureBuffer(this.bufferLength+n)}for(e=0;e<d;e++)m[g++]=p[e]}r.nextCode=o,r.codeLength=h,r.prevCode=u,r.currentSequenceLength=d,this.bufferLength=g}}e.LZWStream=r},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PredictorStream=void 0;var n=i(29),r=i(5),s=i(2);class o extends n.DecodeStream{constructor(t,e,i){if(super(e),!(i instanceof r.Dict))return t;const n=this.predictor=i.get("Predictor")||1;if(n<=1)return t;if(2!==n&&(n<10||n>15))throw new s.FormatError(`Unsupported predictor: ${n}`);this.readBlock=2===n?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;const o=this.colors=i.get("Colors")||1,a=this.bits=i.get("BPC","BitsPerComponent")||8,l=this.columns=i.get("Columns")||1;return this.pixBytes=o*a+7>>3,this.rowBytes=l*o*a+7>>3,this}readBlockTiff(){const t=this.rowBytes,e=this.bufferLength,i=this.ensureBuffer(e+t),n=this.bits,r=this.colors,s=this.str.getBytes(t);if(this.eof=!s.length,this.eof)return;let o,a=0,l=0,c=0,h=0,u=e;if(1===n&&1===r)for(o=0;o<t;++o){let t=s[o]^a;t^=t>>1,t^=t>>2,t^=t>>4,a=(1&t)<<7,i[u++]=t}else if(8===n){for(o=0;o<r;++o)i[u++]=s[o];for(;o<t;++o)i[u]=i[u-r]+s[o],u++}else if(16===n){const e=2*r;for(o=0;o<e;++o)i[u++]=s[o];for(;o<t;o+=2){const t=((255&s[o])<<8)+(255&s[o+1])+((255&i[u-e])<<8)+(255&i[u-e+1]);i[u++]=t>>8&255,i[u++]=255&t}}else{const t=new Uint8Array(r+1),u=(1<<n)-1;let p=0,d=e;const f=this.columns;for(o=0;o<f;++o)for(let e=0;e<r;++e)c<n&&(a=a<<8|255&s[p++],c+=8),t[e]=t[e]+(a>>c-n)&u,c-=n,l=l<<n|t[e],h+=n,h>=8&&(i[d++]=l>>h-8&255,h-=8);h>0&&(i[d++]=(l<<8-h)+(a&(1<<8-h)-1))}this.bufferLength+=t}readBlockPng(){const t=this.rowBytes,e=this.pixBytes,i=this.str.getByte(),n=this.str.getBytes(t);if(this.eof=!n.length,this.eof)return;const r=this.bufferLength,o=this.ensureBuffer(r+t);let a=o.subarray(r-t,r);0===a.length&&(a=new Uint8Array(t));let l,c,h,u=r;switch(i){case 0:for(l=0;l<t;++l)o[u++]=n[l];break;case 1:for(l=0;l<e;++l)o[u++]=n[l];for(;l<t;++l)o[u]=o[u-e]+n[l]&255,u++;break;case 2:for(l=0;l<t;++l)o[u++]=a[l]+n[l]&255;break;case 3:for(l=0;l<e;++l)o[u++]=(a[l]>>1)+n[l];for(;l<t;++l)o[u]=(a[l]+o[u-e]>>1)+n[l]&255,u++;break;case 4:for(l=0;l<e;++l)c=a[l],h=n[l],o[u++]=c+h;for(;l<t;++l){c=a[l];const t=a[l-e],i=o[u-e],r=i+c-t;let s=r-i;s<0&&(s=-s);let p=r-c;p<0&&(p=-p);let d=r-t;d<0&&(d=-d),h=n[l],o[u++]=s<=p&&s<=d?i+h:p<=d?c+h:t+h}break;default:throw new s.FormatError(`Unsupported predictor: ${i}`)}this.bufferLength+=t}}e.PredictorStream=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RunLengthStream=void 0;var n=i(29);class r extends n.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict}readBlock(){const t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])return void(this.eof=!0);let e,i=this.bufferLength,n=t[0];if(n<128){if(e=this.ensureBuffer(i+n+1),e[i++]=t[1],n>0){const t=this.str.getBytes(n);e.set(t,i),i+=n}}else{n=257-n;const r=t[1];e=this.ensureBuffer(i+n+1);for(let t=0;t<n;t++)e[i++]=r}this.bufferLength=i}}e.RunLengthStream=r},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Font=e.ErrorFont=void 0;var n=i(2),r=i(45),s=i(18),o=i(21),a=i(20),l=i(19),c=i(47),h=i(48),u=i(49),p=i(50),d=i(51),f=i(52),g=i(26),m=i(53),y=i(8),v=i(10),b=i(54);const w=[[57344,63743],[1048576,1114109]],x=1e3,S=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],k=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function C(t){if(!t.fontMatrix)return;if(t.fontMatrix[0]===n.FONT_IDENTITY_MATRIX[0])return;const e=.001/t.fontMatrix[0],i=t.widths;for(const t in i)i[t]*=e;t.defaultWidth*=e}function A(t){if(!t.fallbackToUnicode)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const e=[];for(const i in t.fallbackToUnicode)t.toUnicode.has(i)||(e[i]=t.fallbackToUnicode[i]);e.length>0&&t.toUnicode.amend(e)}class _{constructor(t,e,i,n,r,s,a,l,c){this.originalCharCode=t,this.fontChar=e,this.unicode=i,this.accent=n,this.width=r,this.vmetric=s,this.operatorListId=a,this.isSpace=l,this.isInFont=c;const h=(0,o.getCharUnicodeCategory)(i);this.isWhitespace=h.isWhitespace,this.isZeroWidthDiacritic=h.isZeroWidthDiacritic,this.isInvisibleFormatMark=h.isInvisibleFormatMark}matchesForCache(t,e,i,n,r,s,o,a,l){return this.originalCharCode===t&&this.fontChar===e&&this.unicode===i&&this.accent===n&&this.width===r&&this.vmetric===s&&this.operatorListId===o&&this.isSpace===a&&this.isInFont===l}}function T(t,e){return(t<<8)+e}function O(t,e,i){t[e+1]=i,t[e]=i>>>8}function E(t,e){const i=(t<<8)+e;return 32768&i?i-65536:i}function M(t){return String.fromCharCode(t>>8&255,255&t)}function P(t){return t>32767?t=32767:t<-32768&&(t=-32768),String.fromCharCode(t>>8&255,255&t)}function I(t){const e=t.peekBytes(4);return"ttcf"===(0,n.bytesToString)(e)}function F(t,{type:e,subtype:i,composite:r}){let s,o;return function(t){const e=t.peekBytes(4);return 65536===(0,y.readUint32)(e,0)||"true"===(0,n.bytesToString)(e)}(t)||I(t)?s=r?"CIDFontType2":"TrueType":function(t){const e=t.peekBytes(4);return"OTTO"===(0,n.bytesToString)(e)}(t)?s=r?"CIDFontType2":"OpenType":function(t){const e=t.peekBytes(2);return 37===e[0]&&33===e[1]||128===e[0]&&1===e[1]}(t)?s=r?"CIDFontType0":"MMType1"===e?"MMType1":"Type1":function(t){const e=t.peekBytes(4);return e[0]>=1&&e[3]>=1&&e[3]<=4}(t)?r?(s="CIDFontType0",o="CIDFontType0C"):(s="MMType1"===e?"MMType1":"Type1",o="Type1C"):((0,n.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),s=e,o=i),[s,o]}function D(t,e){for(const i in e)t[+i]=e[i]}function R(t,e,i){const n=[];let r;for(let i=0,s=t.length;i<s;i++)r=(0,o.getUnicodeForGlyph)(t[i],e),-1!==r&&(n[i]=r);for(const t in i)r=(0,o.getUnicodeForGlyph)(i[t],e),-1!==r&&(n[+t]=r);return n}function L(t,e,i=!1){switch(e.length){case 1:return e.charCodeAt(0);case 2:return e.charCodeAt(0)<<8|e.charCodeAt(1)}const r=`Unsupported CID string (charCode ${t}): "${e}".`;if(i)throw new n.FormatError(r);return(0,n.warn)(r),e}function N(t,e,i){const r=Object.create(null),s=[];let o=0,a=w[o][0],l=w[o][1];for(let c in t){c|=0;let h=t[c];if(!e(h))continue;if(a>l){if(o++,o>=w.length){(0,n.warn)("Ran out of space in font private use area.");break}a=w[o][0],l=w[o][1]}const u=a++;0===h&&(h=i),r[u]=h,s[c]=u}return{toFontChar:s,charCodeToGlyphId:r,nextAvailableFontCharCode:a}}function B(t,e){const i=function(t,e){const i=[];for(const n in t)t[n]>=e||i.push({fontCharCode:0|n,glyphId:t[n]});0===i.length&&i.push({fontCharCode:0,glyphId:0}),i.sort((function(t,e){return t.fontCharCode-e.fontCharCode}));const n=[],r=i.length;for(let t=0;t<r;){const e=i[t].fontCharCode,s=[i[t].glyphId];++t;let o=e;for(;t<r&&o+1===i[t].fontCharCode&&(s.push(i[t].glyphId),++o,++t,65535!==o););n.push([e,o,s])}return n}(t,e),r=i[i.length-1][1]>65535?2:1;let s,o,a,l,c="\0\0"+M(r)+"\0\0"+(0,n.string32)(4+8*r);for(s=i.length-1;s>=0&&!(i[s][0]<=65535);--s);const h=s+1;i[s][0]<65535&&65535===i[s][1]&&(i[s][1]=65534);const u=i[s][1]<65535?1:0,p=h+u,d=m.OpenTypeFileBuilder.getSearchParams(p,2);let f,g,y,v,b="",w="",x="",S="",k="",C=0;for(s=0,o=h;s<o;s++){f=i[s],g=f[0],y=f[1],b+=M(g),w+=M(y),v=f[2];let t=!0;for(a=1,l=v.length;a<l;++a)if(v[a]!==v[a-1]+1){t=!1;break}if(t)x+=M(v[0]-g&65535),S+=M(0);else{const t=2*(p-s)+2*C;for(C+=y-g+1,x+=M(0),S+=M(t),a=0,l=v.length;a<l;++a)k+=M(v[a])}}u>0&&(w+="ÿÿ",b+="ÿÿ",x+="\0",S+="\0\0");const A="\0\0"+M(2*p)+M(d.range)+M(d.entry)+M(d.rangeShift)+w+"\0\0"+b+x+S+k;let _="",T="";if(r>1){for(c+="\0\0\n"+(0,n.string32)(4+8*r+4+A.length),_="",s=0,o=i.length;s<o;s++){f=i[s],g=f[0],v=f[2];let t=v[0];for(a=1,l=v.length;a<l;++a)v[a]!==v[a-1]+1&&(y=f[0]+a-1,_+=(0,n.string32)(g)+(0,n.string32)(y)+(0,n.string32)(t),g=y+1,t=v[a]);_+=(0,n.string32)(g)+(0,n.string32)(f[1])+(0,n.string32)(t)}T="\0\f\0\0"+(0,n.string32)(_.length+16)+"\0\0\0\0"+(0,n.string32)(_.length/12)}return c+"\0"+M(A.length+4)+A+T+_}function j(t,e,i){i=i||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let r=0,s=0,a=0,l=0,c=null,h=0;if(e){for(let t in e){t|=0,(c>t||!c)&&(c=t),h<t&&(h=t);const e=(0,o.getUnicodeRangeFor)(t);if(e<32)r|=1<<e;else if(e<64)s|=1<<e-32;else if(e<96)a|=1<<e-64;else{if(!(e<123))throw new n.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");l|=1<<e-96}}h>65535&&(h=65535)}else c=0,h=255;const u=t.bbox||[0,0,0,0],p=i.unitsPerEm||1/(t.fontMatrix||n.FONT_IDENTITY_MATRIX)[0],d=t.ascentScaled?1:p/x,f=i.ascent||Math.round(d*(t.ascent||u[3]));let g=i.descent||Math.round(d*(t.descent||u[1]));g>0&&t.descent>0&&u[1]<0&&(g=-g);const m=i.yMax||f,y=-i.yMin||-g;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(t.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,n.string32)(r)+(0,n.string32)(s)+(0,n.string32)(a)+(0,n.string32)(l)+"*21*"+M(t.italicAngle?1:0)+M(c||t.firstChar)+M(h||t.lastChar)+M(f)+M(g)+"\0d"+M(m)+M(y)+"\0\0\0\0\0\0\0\0"+M(t.xHeight)+M(t.capHeight)+M(0)+M(c||t.firstChar)+"\0"}function z(t){const e=Math.floor(65536*t.italicAngle);return"\0\0\0"+(0,n.string32)(e)+"\0\0\0\0"+(0,n.string32)(t.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function U(t){return t.replace(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}function $(t,e){e||(e=[[],[]]);const i=[e[0][0]||"Original licence",e[0][1]||t,e[0][2]||"Unknown",e[0][3]||"uniqueID",e[0][4]||t,e[0][5]||"Version 0.11",e[0][6]||U(t),e[0][7]||"Unknown",e[0][8]||"Unknown",e[0][9]||"Unknown"],n=[];let r,s,o,a,l;for(r=0,s=i.length;r<s;r++){l=e[1][r]||i[r];const t=[];for(o=0,a=l.length;o<a;o++)t.push(M(l.charCodeAt(o)));n.push(t.join(""))}const c=[i,n],h=["\0","\0"],u=["\0\0","\0"],p=["\0\0","\t"],d=i.length*h.length;let f="\0\0"+M(d)+M(12*d+6),g=0;for(r=0,s=h.length;r<s;r++){const t=c[r];for(o=0,a=t.length;o<a;o++)l=t[o],f+=h[r]+u[r]+p[r]+M(o)+M(l.length)+M(g),g+=l.length}return f+=i.join("")+n.join(""),f}e.Font=class{constructor(t,e,i){this.name=t,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=i.loadedName,this.isType3Font=i.isType3Font,this.missingFile=!1,this.cssFontInfo=i.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let r=!!(i.flags&s.FontFlags.Serif);if(!r&&!i.isSimulatedFlags){const e=t.replace(/[,_]/g,"-").split("-")[0],i=(0,c.getSerifFonts)();for(const t of e.split("+"))if(i[t]){r=!0;break}}this.isSerifFont=r,this.isSymbolicFont=!!(i.flags&s.FontFlags.Symbolic),this.isMonospace=!!(i.flags&s.FontFlags.FixedPitch);let o=i.type,a=i.subtype;this.type=o,this.subtype=a;let l,h="sans-serif";if(this.isMonospace?h="monospace":this.isSerifFont&&(h="serif"),this.fallbackName=h,this.differences=i.differences,this.widths=i.widths,this.defaultWidth=i.defaultWidth,this.composite=i.composite,this.cMap=i.cMap,this.capHeight=i.capHeight/x,this.ascent=i.ascent/x,this.descent=i.descent/x,this.lineHeight=this.ascent-this.descent,this.fontMatrix=i.fontMatrix,this.bbox=i.bbox,this.defaultEncoding=i.defaultEncoding,this.toUnicode=i.toUnicode,this.toFontChar=[],"Type3"!==i.type){if(this.cidEncoding=i.cidEncoding||"",this.vertical=!!i.vertical,this.vertical&&(this.vmetrics=i.vmetrics,this.defaultVMetrics=i.defaultVMetrics),!e||e.isEmpty)return e&&(0,n.warn)('Font file is empty in "'+t+'" ('+this.loadedName+")"),void this.fallbackToSystemFont(i);[o,a]=F(e,i),o===this.type&&a===this.subtype||(0,n.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${o}/${a}.`);try{switch(o){case"MMType1":(0,n.info)("MMType1 font ("+t+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const r="Type1C"===a||"CIDFontType0C"===a?new u.CFFFont(e,i):new b.Type1Font(t,e,i);C(i),l=this.convert(t,r,i);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",l=this.checkAndRepair(t,e,i),this.isOpenType&&(C(i),o="OpenType");break;default:throw new n.FormatError(`Font ${o} is not supported`)}}catch(t){return(0,n.warn)(t),void this.fallbackToSystemFont(i)}A(i),this.data=l,this.fontType=(0,s.getFontType)(o,a,i.isStandardFont),this.fontMatrix=i.fontMatrix,this.widths=i.widths,this.defaultWidth=i.defaultWidth,this.toUnicode=i.toUnicode,this.seacMap=i.seacMap}else{for(let t=0;t<256;t++)this.toFontChar[t]=this.differences[t]||i.defaultEncoding[t];this.fontType=n.FontType.TYPE3}}get renderer(){const t=p.FontRendererFactory.create(this,s.SEAC_ANALYSIS_ENABLED);return(0,n.shadow)(this,"renderer",t)}exportData(t=!1){const e=t?[...S,...k]:S,i=Object.create(null);let n,r;for(n of e)r=this[n],void 0!==r&&(i[n]=r);return i}fallbackToSystemFont(t){this.missingFile=!0;const e=this.name,i=this.type,r=this.subtype;let u=(0,s.normalizeFontName)(e);const p=(0,c.getStdFontMap)(),f=(0,c.getNonStdFontMap)(),g=!!p[u],m=!(!f[u]||!p[f[u]]);u=p[u]||f[u]||u;const y=(0,d.getFontBasicMetrics)()[u];y&&(isNaN(this.ascent)&&(this.ascent=y.ascent/x),isNaN(this.descent)&&(this.descent=y.descent/x),isNaN(this.capHeight)&&(this.capHeight=y.capHeight/x)),this.bold=-1!==u.search(/bold/gi),this.italic=-1!==u.search(/oblique/gi)||-1!==u.search(/italic/gi),this.black=-1!==e.search(/Black/g);const v=-1!==e.search(/Narrow/g);if(this.remeasure=(!g||v)&&Object.keys(this.widths).length>0,(g||m)&&"CIDFontType2"===i&&this.cidEncoding.startsWith("Identity-")){const i=t.cidToGidMap,n=[];if(D(n,(0,c.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(e)?D(n,(0,c.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(e)&&D(n,(0,c.getSupplementalGlyphMapForCalibri)()),i){for(const t in n){const e=n[t];void 0!==i[e]&&(n[+t]=i[e])}i.length!==this.toUnicode.length&&t.hasIncludedToUnicodeMap&&this.toUnicode instanceof h.IdentityToUnicodeMap&&this.toUnicode.forEach((function(t,e){const r=n[t];void 0===i[r]&&(n[+t]=e)}))}this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(t,e){n[+t]=e})),this.toFontChar=n,this.toUnicode=new h.ToUnicodeMap(n)}else if(/Symbol/i.test(u))this.toFontChar=R(l.SymbolSetEncoding,(0,a.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(u))/Wingdings/i.test(e)&&(0,n.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=R(l.ZapfDingbatsEncoding,(0,a.getDingbatsGlyphsUnicode)(),this.differences);else if(g){const t=R(this.defaultEncoding,(0,a.getGlyphsUnicode)(),this.differences);"CIDFontType2"!==i||this.cidEncoding.startsWith("Identity-")||this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(e,i){t[+e]=i})),this.toFontChar=t}else{const t=(0,a.getGlyphsUnicode)(),i=[];this.toUnicode.forEach(((e,n)=>{if(!this.composite){const i=this.differences[e]||this.defaultEncoding[e],r=(0,o.getUnicodeForGlyph)(i,t);-1!==r&&(n=r)}i[+e]=n})),this.composite&&this.toUnicode instanceof h.IdentityToUnicodeMap&&/Verdana/i.test(e)&&D(i,(0,c.getGlyphMapForStandardFonts)()),this.toFontChar=i}A(t),this.loadedName=u.split("-")[0],this.fontType=(0,s.getFontType)(i,r,t.isStandardFont)}checkAndRepair(t,e,i){const o=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function c(t,e){const i=Object.create(null);i["OS/2"]=null,i.cmap=null,i.head=null,i.hhea=null,i.hmtx=null,i.maxp=null,i.name=null,i.post=null;for(let n=0;n<e;n++){const e=p(t);o.includes(e.tag)&&0!==e.length&&(i[e.tag]=e)}return i}function p(t){const e=t.getString(4),i=t.getInt32()>>>0,n=t.getInt32()>>>0,r=t.getInt32()>>>0,s=t.pos;t.pos=t.start?t.start:0,t.skip(n);const o=t.getBytes(r);return t.pos=s,"head"===e&&(o[8]=o[9]=o[10]=o[11]=0,o[17]|=32),{tag:e,checksum:i,length:r,offset:n,data:o}}function d(t){return{version:t.getString(4),numTables:t.getUint16(),searchRange:t.getUint16(),entrySelector:t.getUint16(),rangeShift:t.getUint16()}}function y(t,e,i,n,r,s){const o={length:0,sizeOfInstructions:0};if(i-e<=12)return o;const a=t.subarray(e,i);let l=E(a[0],a[1]);if(l<0)return l=-1,O(a,0,l),n.set(a,r),o.length=a.length,o;let c,h=10,u=0;for(c=0;c<l;c++)u=1+(a[h]<<8|a[h+1]),h+=2;const p=h,d=a[h]<<8|a[h+1];o.sizeOfInstructions=d,h+=2+d;const f=h;let g=0;for(c=0;c<u;c++){const t=a[h++];192&t&&(a[h-1]=63&t);let e=2;2&t?e=1:16&t&&(e=0);let i=2;4&t?i=1:32&t&&(i=0);const n=e+i;if(g+=n,8&t){const t=a[h++];c+=t,g+=t*n}}if(0===g)return o;let m=h+g;return m>a.length?o:!s&&d>0?(n.set(a.subarray(0,p),r),n.set([0,0],r+p),n.set(a.subarray(f,m),r+p+2),m-=d,a.length-m>3&&(m=m+3&-4),o.length=m,o):a.length-m>3?(m=m+3&-4,n.set(a.subarray(0,m),r),o.length=m,o):(n.set(a,r),o.length=a.length,o)}function b(t){const i=(e.start?e.start:0)+t.offset;e.pos=i;const n=[[],[]],r=t.length,s=i+r;if(0!==e.getUint16()||r<6)return n;const o=e.getUint16(),a=e.getUint16(),l=[];let c,h;for(c=0;c<o&&e.pos+12<=s;c++){const t={platform:e.getUint16(),encoding:e.getUint16(),language:e.getUint16(),name:e.getUint16(),length:e.getUint16(),offset:e.getUint16()};(1===t.platform&&0===t.encoding&&0===t.language||3===t.platform&&1===t.encoding&&1033===t.language)&&l.push(t)}for(c=0,h=l.length;c<h;c++){const t=l[c];if(t.length<=0)continue;const r=i+a+t.offset;if(r+t.length>s)continue;e.pos=r;const o=t.name;if(t.encoding){let i="";for(let n=0,r=t.length;n<r;n+=2)i+=String.fromCharCode(e.getUint16());n[1][o]=i}else n[0][o]=e.getString(t.length)}return n}const w=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function x(t,e){let i,r,s,o,a,l=t.data,c=0,h=0,u=0;const p=[],d=[],f=[];let g=e.tooComplexToFollowFunctions,m=!1,y=0,v=0;for(let t=l.length;c<t;){const t=l[c++];if(64===t)if(r=l[c++],m||v)c+=r;else for(i=0;i<r;i++)p.push(l[c++]);else if(65===t)if(r=l[c++],m||v)c+=2*r;else for(i=0;i<r;i++)s=l[c++],p.push(s<<8|l[c++]);else if(176==(248&t))if(r=t-176+1,m||v)c+=r;else for(i=0;i<r;i++)p.push(l[c++]);else if(184==(248&t))if(r=t-184+1,m||v)c+=2*r;else for(i=0;i<r;i++)s=l[c++],p.push(s<<8|l[c++]);else if(43!==t||g)if(44!==t||g){if(45===t)if(m)m=!1,h=c;else{if(a=d.pop(),!a)return(0,n.warn)("TT: ENDF bad stack"),void(e.hintsValid=!1);o=f.pop(),l=a.data,c=a.i,e.functionsStackDeltas[o]=p.length-a.stackTop}else if(137===t)(m||v)&&((0,n.warn)("TT: nested IDEFs not allowed"),g=!0),m=!0,u=c;else if(88===t)++y;else if(27===t)v=y;else if(89===t)v===y&&(v=0),--y;else if(28===t&&!m&&!v){const t=p[p.length-1];t>0&&(c+=t-1)}}else(m||v)&&((0,n.warn)("TT: nested FDEFs not allowed"),g=!0),m=!0,u=c,o=p.pop(),e.functionsDefined[o]={data:l,i:c};else if(!m&&!v)if(o=p[p.length-1],isNaN(o))(0,n.info)("TT: CALL empty stack (or invalid entry).");else if(e.functionsUsed[o]=!0,o in e.functionsStackDeltas){const t=p.length+e.functionsStackDeltas[o];if(t<0)return(0,n.warn)("TT: CALL invalid functions stack delta."),void(e.hintsValid=!1);p.length=t}else if(o in e.functionsDefined&&!f.includes(o)){if(d.push({data:l,i:c,stackTop:p.length-1}),f.push(o),a=e.functionsDefined[o],!a)return(0,n.warn)("TT: CALL non-existent function"),void(e.hintsValid=!1);l=a.data,c=a.i}if(!m&&!v){let e=0;for(t<=142?e=w[t]:t>=192&&t<=223?e=-1:t>=224&&(e=-2),t>=113&&t<=117&&(r=p.pop(),isNaN(r)||(e=2*-r));e<0&&p.length>0;)p.pop(),e++;for(;e>0;)p.push(NaN),e--}}e.tooComplexToFollowFunctions=g;const b=[l];c>l.length&&b.push(new Uint8Array(c-l.length)),u>h&&((0,n.warn)("TT: complementing a missing function tail"),b.push(new Uint8Array([34,45]))),function(t,e){if(e.length>1){let i,n,r=0;for(i=0,n=e.length;i<n;i++)r+=e[i].length;r=r+3&-4;const s=new Uint8Array(r);let o=0;for(i=0,n=e.length;i<n;i++)s.set(e[i],o),o+=e[i].length;t.data=s,t.length=r}}(t,b)}let S,k,A,_;if(I(e=new v.Stream(new Uint8Array(e.getBytes())))){const t=function(t,e){const{numFonts:i,offsetTable:r}=function(t){const e=t.getString(4);(0,n.assert)("ttcf"===e,"Must be a TrueType Collection font.");const i=t.getUint16(),r=t.getUint16(),s=t.getInt32()>>>0,o=[];for(let e=0;e<s;e++)o.push(t.getInt32()>>>0);const a={ttcTag:e,majorVersion:i,minorVersion:r,numFonts:s,offsetTable:o};switch(i){case 1:return a;case 2:return a.dsigTag=t.getInt32()>>>0,a.dsigLength=t.getInt32()>>>0,a.dsigOffset=t.getInt32()>>>0,a}throw new n.FormatError(`Invalid TrueType Collection majorVersion: ${i}.`)}(t),s=e.split("+");let o;for(let a=0;a<i;a++){t.pos=(t.start||0)+r[a];const i=d(t),l=c(t,i.numTables);if(!l.name)throw new n.FormatError('TrueType Collection font must contain a "name" table.');const h=b(l.name);for(let t=0,n=h.length;t<n;t++)for(let n=0,r=h[t].length;n<r;n++){const r=h[t][n]&&h[t][n].replace(/\s/g,"");if(r){if(r===e)return{header:i,tables:l};if(!(s.length<2))for(const t of s)r===t&&(o={name:t,header:i,tables:l})}}}if(o)return(0,n.warn)(`TrueType Collection does not contain "${e}" font, falling back to "${o.name}" font instead.`),{header:o.header,tables:o.tables};throw new n.FormatError(`TrueType Collection does not contain "${e}" font.`)}(e,this.name);S=t.header,k=t.tables}else S=d(e),k=c(e,S.numTables);const M=!k["CFF "];if(M){if(!k.loca)throw new n.FormatError('Required "loca" table is not found');k.glyf||((0,n.warn)('Required "glyf" table is not found -- trying to recover.'),k.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const e=i.composite&&((i.cidToGidMap||[]).length>0||!(i.cMap instanceof g.IdentityCMap));if("OTTO"===S.version&&!e||!k.head||!k.hhea||!k.maxp||!k.post)return _=new v.Stream(k["CFF "].data),A=new u.CFFFont(_,i),C(i),this.convert(t,A,i);delete k.glyf,delete k.loca,delete k.fpgm,delete k.prep,delete k["cvt "],this.isOpenType=!0}if(!k.maxp)throw new n.FormatError('Required "maxp" table is not found');e.pos=(e.start||0)+k.maxp.offset;const P=e.getInt32(),F=e.getUint16();if(i.scaleFactors&&i.scaleFactors.length===F&&M){const{scaleFactors:t}=i,e=T(k.head.data[50],k.head.data[51]),n=new f.GlyfTable({glyfTable:k.glyf.data,isGlyphLocationsLong:e,locaTable:k.loca.data,numGlyphs:F});n.scale(t);const{glyf:r,loca:s,isLocationLong:o}=n.write();k.glyf.data=r,k.loca.data=s,o!==!!e&&(k.head.data[50]=0,k.head.data[51]=o?1:0);const a=k.hmtx.data;for(let e=0;e<F;e++){const i=4*e,n=Math.round(t[e]*T(a[i],a[i+1]));a[i]=n>>8&255,a[i+1]=255&n,O(a,i+2,Math.round(t[e]*E(a[i+2],a[i+3])))}}let D=F+1,R=!0;D>65535&&(R=!1,D=F,(0,n.warn)("Not enough space in glyfs to duplicate first glyph."));let U=0,H=0;P>=65536&&k.maxp.length>=22&&(e.pos+=8,e.getUint16()>2&&(k.maxp.data[14]=0,k.maxp.data[15]=2),e.pos+=4,U=e.getUint16(),e.pos+=4,H=e.getUint16()),k.maxp.data[4]=D>>8,k.maxp.data[5]=255&D;const V=function(t,e,i,r){const s={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(t&&x(t,s),e&&x(e,s),t&&function(t,e){if(!t.tooComplexToFollowFunctions){if(t.functionsDefined.length>e)return(0,n.warn)("TT: more functions defined than expected"),void(t.hintsValid=!1);for(let i=0,r=t.functionsUsed.length;i<r;i++){if(i>e)return(0,n.warn)("TT: invalid function id: "+i),void(t.hintsValid=!1);if(t.functionsUsed[i]&&!t.functionsDefined[i])return(0,n.warn)("TT: undefined function: "+i),void(t.hintsValid=!1)}}}(s,r),i&&1&i.length){const t=new Uint8Array(i.length+1);t.set(i.data),i.data=t}return s.hintsValid}(k.fpgm,k.prep,k["cvt "],U);if(V||(delete k.fpgm,delete k.prep,delete k["cvt "]),function(t,e,i,r,s,o){if(!e)return void(i&&(i.data=null));t.pos=(t.start?t.start:0)+e.offset,t.pos+=4,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2;const a=t.getUint16();t.pos+=8,t.pos+=2;let l=t.getUint16();0!==a&&(2&T(r.data[44],r.data[45])||(e.data[22]=0,e.data[23]=0)),l>s&&((0,n.info)(`The numOfMetrics (${l}) should not be greater than the numGlyphs (${s}).`),l=s,e.data[34]=(65280&l)>>8,e.data[35]=255&l);const c=s-l-(i.length-4*l>>1);if(c>0){const t=new Uint8Array(i.length+2*c);t.set(i.data),o&&(t[i.length]=i.data[2],t[i.length+1]=i.data[3]),i.data=t}}(e,k.hhea,k.hmtx,k.head,D,R),!k.head)throw new n.FormatError('Required "head" table is not found');!function(t,e,i){const r=t.data,s=(o=r[0],a=r[1],l=r[2],c=r[3],(o<<24)+(a<<16)+(l<<8)+c);var o,a,l,c;s>>16!=1&&((0,n.info)("Attempting to fix invalid version in head table: "+s),r[0]=0,r[1]=1,r[2]=0,r[3]=0);const h=T(r[50],r[51]);if(h<0||h>1){(0,n.info)("Attempting to fix invalid indexToLocFormat in head table: "+h);const t=e+1;if(i===t<<1)r[50]=0,r[51]=0;else{if(i!==t<<2)throw new n.FormatError("Could not fix indexToLocFormat: "+h);r[50]=0,r[51]=1}}}(k.head,F,M?k.loca.length:0);let q=Object.create(null);if(M){const t=T(k.head.data[50],k.head.data[51]),e=function(t,e,i,n,r,s,o){let a,l,c;n?(a=4,l=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]},c=function(t,e,i){t[e]=i>>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}):(a=2,l=function(t,e){return t[e]<<9|t[e+1]<<1},c=function(t,e,i){t[e]=i>>9&255,t[e+1]=i>>1&255});const h=s?i+1:i,u=a*(1+h),p=new Uint8Array(u);p.set(t.data.subarray(0,u)),t.data=p;const d=e.data,f=d.length,g=new Uint8Array(f);let m,v;const b=[];for(m=0,v=0;m<i+1;m++,v+=a){let t=l(p,v);t>f&&(t=f),b.push({index:m,offset:t,endOffset:0})}for(b.sort(((t,e)=>t.offset-e.offset)),m=0;m<i;m++)b[m].endOffset=b[m+1].offset;for(b.sort(((t,e)=>t.index-e.index)),m=0;m<i;m++){const{offset:t,endOffset:e}=b[m];if(0!==t||0!==e)break;const i=b[m+1].offset;if(0!==i){b[m].endOffset=i;break}}const w=Object.create(null);let x=0;for(c(p,0,x),m=0,v=a;m<i;m++,v+=a){const t=y(d,b[m].offset,b[m].endOffset,g,x,r),e=t.length;0===e&&(w[m]=!0),t.sizeOfInstructions>o&&(o=t.sizeOfInstructions),x+=e,c(p,v,x)}if(0===x){const t=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(m=0,v=a;m<h;m++,v+=a)c(p,v,t.length);e.data=t}else if(s){const i=l(p,a);g.length>i+x?e.data=g.subarray(0,i+x):(e.data=new Uint8Array(i+x),e.data.set(g.subarray(0,x))),e.data.set(g.subarray(0,i),x),c(t.data,p.length-a,x+i)}else e.data=g.subarray(0,x);return{missingGlyphs:w,maxSizeOfInstructions:o}}(k.loca,k.glyf,F,t,V,R,H);q=e.missingGlyphs,P>=65536&&k.maxp.length>=22&&(k.maxp.data[26]=e.maxSizeOfInstructions>>8,k.maxp.data[27]=255&e.maxSizeOfInstructions)}if(!k.hhea)throw new n.FormatError('Required "hhea" table is not found');0===k.hhea.data[10]&&0===k.hhea.data[11]&&(k.hhea.data[10]=255,k.hhea.data[11]=255);const W={unitsPerEm:T(k.head.data[18],k.head.data[19]),yMax:T(k.head.data[42],k.head.data[43]),yMin:E(k.head.data[38],k.head.data[39]),ascent:E(k.hhea.data[4],k.hhea.data[5]),descent:E(k.hhea.data[6],k.hhea.data[7]),lineGap:E(k.hhea.data[8],k.hhea.data[9])};this.ascent=W.ascent/W.unitsPerEm,this.descent=W.descent/W.unitsPerEm,this.lineGap=W.lineGap/W.unitsPerEm,this.cssFontInfo&&this.cssFontInfo.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,k.post&&function(t,i,r){const o=(e.start?e.start:0)+t.offset;e.pos=o;const a=o+t.length,l=e.getInt32();let c;e.skip(28);let h,u=!0;switch(l){case 65536:c=s.MacStandardGlyphOrdering;break;case 131072:const t=e.getUint16();if(t!==r){u=!1;break}const o=[];for(h=0;h<t;++h){const t=e.getUint16();if(t>=32768){u=!1;break}o.push(t)}if(!u)break;const p=[],d=[];for(;e.pos<a;){const t=e.getByte();for(d.length=t,h=0;h<t;++h)d[h]=String.fromCharCode(e.getByte());p.push(d.join(""))}for(c=[],h=0;h<t;++h){const t=o[h];t<258?c.push(s.MacStandardGlyphOrdering[t]):c.push(p[t-258])}break;case 196608:break;default:(0,n.warn)("Unknown/unsupported post table version "+l),u=!1,i.defaultEncoding&&(c=i.defaultEncoding)}i.glyphNames=c}(k.post,i,F),k.post={tag:"post",data:z(i)};const X=[];function G(t){return!q[t]}if(i.composite){const t=i.cidToGidMap||[],e=0===t.length;i.cMap.forEach((function(i,r){if("string"==typeof r&&(r=L(i,r,!0)),r>65535)throw new n.FormatError("Max size of CID is 65,535");let s=-1;e?s=r:void 0!==t[r]&&(s=t[r]),s>=0&&s<F&&G(s)&&(X[i]=s)}))}else{const t=function(t,e,i,r){if(!t)return(0,n.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let s,o=(e.start?e.start:0)+t.offset;e.pos=o,e.skip(2);const a=e.getUint16();let l,c=!1;for(let t=0;t<a;t++){const n=e.getUint16(),s=e.getUint16(),o=e.getInt32()>>>0;let h=!1;if(!l||l.platformId!==n||l.encodingId!==s){if(0!==n||0!==s&&1!==s&&3!==s)if(1===n&&0===s)h=!0;else if(3!==n||1!==s||!r&&l){if(i&&3===n&&0===s){h=!0;let i=!0;if(t<a-1){const t=e.peekBytes(2);T(t[0],t[1])<n&&(i=!1)}i&&(c=!0)}}else h=!0,i||(c=!0);else h=!0;if(h&&(l={platformId:n,encodingId:s,offset:o}),c)break}}if(l&&(e.pos=o+l.offset),!l||-1===e.peekByte())return(0,n.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const h=e.getUint16();let u=!1;const p=[];let d,f;if(0===h){for(e.skip(4),d=0;d<256;d++){const t=e.getByte();t&&p.push({charCode:d,glyphId:t})}u=!0}else if(2===h){e.skip(4);const t=[];let i=0;for(let n=0;n<256;n++){const n=e.getUint16()>>3;t.push(n),i=Math.max(n,i)}const n=[];for(let t=0;t<=i;t++)n.push({firstCode:e.getUint16(),entryCount:e.getUint16(),idDelta:E(e.getByte(),e.getByte()),idRangePos:e.pos+e.getUint16()});for(let i=0;i<256;i++)if(0===t[i])e.pos=n[0].idRangePos+2*i,f=e.getUint16(),p.push({charCode:i,glyphId:f});else{const r=n[t[i]];for(d=0;d<r.entryCount;d++){const t=(i<<8)+d+r.firstCode;e.pos=r.idRangePos+2*d,f=e.getUint16(),0!==f&&(f=(f+r.idDelta)%65536),p.push({charCode:t,glyphId:f})}}}else if(4===h){e.skip(4);const t=e.getUint16()>>1;e.skip(6);const i=[];let n;for(n=0;n<t;n++)i.push({end:e.getUint16()});for(e.skip(2),n=0;n<t;n++)i[n].start=e.getUint16();for(n=0;n<t;n++)i[n].delta=e.getUint16();let r,a=0;for(n=0;n<t;n++){s=i[n];const o=e.getUint16();o?(r=(o>>1)-(t-n),s.offsetIndex=r,a=Math.max(a,r+s.end-s.start+1)):s.offsetIndex=-1}const l=[];for(d=0;d<a;d++)l.push(e.getUint16());for(n=0;n<t;n++){s=i[n],o=s.start;const t=s.end,e=s.delta;for(r=s.offsetIndex,d=o;d<=t;d++)65535!==d&&(f=r<0?d:l[r+d-o],f=f+e&65535,p.push({charCode:d,glyphId:f}))}}else if(6===h){e.skip(4);const t=e.getUint16(),i=e.getUint16();for(d=0;d<i;d++){f=e.getUint16();const i=t+d;p.push({charCode:i,glyphId:f})}}else{if(12!==h)return(0,n.warn)("cmap table has unsupported format: "+h),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};{e.skip(10);const t=e.getInt32()>>>0;for(d=0;d<t;d++){const t=e.getInt32()>>>0,i=e.getInt32()>>>0;let n=e.getInt32()>>>0;for(let e=t;e<=i;e++)p.push({charCode:e,glyphId:n++})}}}p.sort((function(t,e){return t.charCode-e.charCode}));for(let t=1;t<p.length;t++)p[t-1].charCode===p[t].charCode&&(p.splice(t,1),t--);return{platformId:l.platformId,encodingId:l.encodingId,mappings:p,hasShortCmap:u}}(k.cmap,e,this.isSymbolicFont,i.hasEncoding),r=t.platformId,o=t.encodingId,c=t.mappings,u=c.length;let p=[],d=!1;if(!i.hasEncoding||"MacRomanEncoding"!==i.baseEncodingName&&"WinAnsiEncoding"!==i.baseEncodingName||(p=(0,l.getEncoding)(i.baseEncodingName)),i.hasEncoding&&!this.isSymbolicFont&&(3===r&&1===o||1===r&&0===o)){const t=(0,a.getGlyphsUnicode)();for(let e=0;e<256;e++){let n;if(n=void 0!==this.differences[e]?this.differences[e]:p.length&&""!==p[e]?p[e]:l.StandardEncoding[e],!n)continue;const a=(0,s.recoverGlyphName)(n,t);let d;if(3===r&&1===o?d=t[a]:1===r&&0===o&&(d=l.MacRomanEncoding.indexOf(a)),void 0===d){if(!i.glyphNames&&i.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof h.IdentityToUnicodeMap)){const t=this.toUnicode.get(e);t&&(d=t.codePointAt(0))}if(void 0===d)continue}for(let t=0;t<u;++t)if(c[t].charCode===d){X[e]=c[t].glyphId;break}}}else if(0===r){for(let t=0;t<u;++t)X[c[t].charCode]=c[t].glyphId;d=!0}else for(let t=0;t<u;++t){let e=c[t].charCode;3===r&&e>=61440&&e<=61695&&(e&=255),X[e]=c[t].glyphId}if(i.glyphNames&&(p.length||this.differences.length))for(let t=0;t<256;++t){if(!d&&void 0!==X[t])continue;const e=this.differences[t]||p[t];if(!e)continue;const n=i.glyphNames.indexOf(e);n>0&&G(n)&&(X[t]=n)}}0===X.length&&(X[0]=0);let K=D-1;if(R||(K=0),!i.cssFontInfo){const t=N(X,G,K);this.toFontChar=t.toFontChar,k.cmap={tag:"cmap",data:B(t.charCodeToGlyphId,D)},k["OS/2"]&&function(t,e){e.pos=(e.start||0)+t.offset;const i=e.getUint16();e.skip(60);const n=e.getUint16();return!(i<4&&768&n||e.getUint16()>e.getUint16()||(e.skip(6),0===e.getUint16()||(t.data[8]=t.data[9]=0,0)))}(k["OS/2"],e)||(k["OS/2"]={tag:"OS/2",data:j(i,t.charCodeToGlyphId,W)})}if(!M)try{_=new v.Stream(k["CFF "].data),A=new r.CFFParser(_,i,s.SEAC_ANALYSIS_ENABLED).parse(),A.duplicateFirstGlyph();const t=new r.CFFCompiler(A);k["CFF "].data=t.compile()}catch(t){(0,n.warn)("Failed to compile font "+i.loadedName)}if(k.name){const e=b(k.name);k.name.data=$(t,e),this.psName=e[0][6]||null}else k.name={tag:"name",data:$(this.name)};const Y=new m.OpenTypeFileBuilder(S.version);for(const t in k)Y.addTable(t,k[t].data);return Y.toArray()}convert(t,e,i){i.fixedPitch=!1,i.builtInEncoding&&function(t,e){if(t.isInternalFont)return;if(e===t.defaultEncoding)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const i=[],n=(0,a.getGlyphsUnicode)();for(const r in e){if(t.hasIncludedToUnicodeMap){if(t.toUnicode.has(r))continue}else if(t.hasEncoding&&(0===t.differences.length||void 0!==t.differences[r]))continue;const s=e[r],a=(0,o.getUnicodeForGlyph)(s,n);-1!==a&&(i[r]=String.fromCharCode(a))}i.length>0&&t.toUnicode.amend(i)}(i,i.builtInEncoding);let r=1;e instanceof u.CFFFont&&(r=e.numGlyphs-1);const c=e.getGlyphMapping(i);let p=null,d=c;i.cssFontInfo||(p=N(c,e.hasGlyphId.bind(e),r),this.toFontChar=p.toFontChar,d=p.charCodeToGlyphId);const f=e.numGlyphs;function g(t,e){let i=null;for(const n in t)e===t[n]&&(i||(i=[]),i.push(0|n));return i}function y(t,e){for(const i in t)if(e===t[i])return 0|i;return p.charCodeToGlyphId[p.nextAvailableFontCharCode]=e,p.nextAvailableFontCharCode++}const v=e.seacs;if(p&&s.SEAC_ANALYSIS_ENABLED&&v&&v.length){const t=i.fontMatrix||n.FONT_IDENTITY_MATRIX,r=e.getCharset(),s=Object.create(null);for(let e in v){e|=0;const i=v[e],n=l.StandardEncoding[i[2]],o=l.StandardEncoding[i[3]],a=r.indexOf(n),h=r.indexOf(o);if(a<0||h<0)continue;const u={x:i[0]*t[0]+i[1]*t[2]+t[4],y:i[0]*t[1]+i[1]*t[3]+t[5]},d=g(c,e);if(d)for(let t=0,e=d.length;t<e;t++){const e=d[t],i=p.charCodeToGlyphId,n=y(i,a),r=y(i,h);s[e]={baseFontCharCode:n,accentFontCharCode:r,accentOffset:u}}}i.seacMap=s}const b=1/(i.fontMatrix||n.FONT_IDENTITY_MATRIX)[0],w=new m.OpenTypeFileBuilder("OTTO");return w.addTable("CFF ",e.data),w.addTable("OS/2",j(i,d)),w.addTable("cmap",B(d,f)),w.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+P(b)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+P(i.descent)+"ÿ"+P(i.ascent)+M(i.italicAngle?2:0)+"\0\0\0\0\0\0\0"),w.addTable("hhea","\0\0\0"+P(i.ascent)+P(i.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+P(i.capHeight)+P(Math.tan(i.italicAngle)*i.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+M(f)),w.addTable("hmtx",function(){const t=e.charstrings,i=e.cff?e.cff.widths:null;let n="\0\0\0\0";for(let e=1,r=f;e<r;e++){let r=0;if(t){const i=t[e-1];r="width"in i?i.width:0}else i&&(r=Math.ceil(i[e]||0));n+=M(r)+M(0)}return n}()),w.addTable("maxp","\0\0P\0"+M(f)),w.addTable("name",$(t)),w.addTable("post",z(i)),w.toArray()}get spaceWidth(){const t=["space","minus","one","i","I"];let e;for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n in this.widths){e=this.widths[n];break}const r=(0,a.getGlyphsUnicode)()[n];let s=0;if(this.composite&&this.cMap.contains(r)&&(s=this.cMap.lookup(r),"string"==typeof s&&(s=L(r,s))),!s&&this.toUnicode&&(s=this.toUnicode.charCodeOf(r)),s<=0&&(s=r),e=this.widths[s],e)break}return e=e||this.defaultWidth,(0,n.shadow)(this,"spaceWidth",e)}_charToGlyph(t,e=!1){let i,r,s,a=t;this.cMap&&this.cMap.contains(t)&&(a=this.cMap.lookup(t),"string"==typeof a&&(a=L(t,a))),r=this.widths[a],"number"!=typeof r&&(r=this.defaultWidth);const l=this.vmetrics&&this.vmetrics[a];let c=this.toUnicode.get(t)||t;"number"==typeof c&&(c=String.fromCharCode(c));let h=void 0!==this.toFontChar[t];if(i=this.toFontChar[t]||t,this.missingFile){const e=this.differences[t]||this.defaultEncoding[t];".notdef"!==e&&""!==e||"Type1"!==this.type||(i=32),i=(0,o.mapSpecialUnicodeValues)(i)}this.isType3Font&&(s=i);let u=null;if(this.seacMap&&this.seacMap[t]){h=!0;const e=this.seacMap[t];i=e.baseFontCharCode,u={fontChar:String.fromCodePoint(e.accentFontCharCode),offset:e.accentOffset}}let p="";"number"==typeof i&&(i<=1114111?p=String.fromCodePoint(i):(0,n.warn)(`charToGlyph - invalid fontCharCode: ${i}`));let d=this._glyphCache[t];return d&&d.matchesForCache(t,p,c,u,r,l,s,e,h)||(d=new _(t,p,c,u,r,l,s,e,h),this._glyphCache[t]=d),d}charsToGlyphs(t){let e=this._charsCache[t];if(e)return e;if(e=[],this.cMap){const i=Object.create(null),n=t.length;let r=0;for(;r<n;){this.cMap.readCharCode(t,r,i);const{charcode:n,length:s}=i;r+=s;const o=this._charToGlyph(n,1===s&&32===t.charCodeAt(r-1));e.push(o)}}else for(let i=0,n=t.length;i<n;++i){const n=t.charCodeAt(i),r=this._charToGlyph(n,32===n);e.push(r)}return this._charsCache[t]=e}getCharPositions(t){const e=[];if(this.cMap){const i=Object.create(null);let n=0;for(;n<t.length;){this.cMap.readCharCode(t,n,i);const r=i.length;e.push([n,n+r]),n+=r}}else for(let i=0,n=t.length;i<n;++i)e.push([i,i+1]);return e}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(t){const e=[],i=[],n=()=>e.length%2==1,r=this.toUnicode instanceof h.IdentityToUnicodeMap?t=>this.toUnicode.charCodeOf(t):t=>this.toUnicode.charCodeOf(String.fromCodePoint(t));for(let s=0,o=t.length;s<o;s++){const o=t.codePointAt(s);if(o>55295&&(o<57344||o>65533)&&s++,this.toUnicode){const t=r(o);if(-1!==t){n()&&(e.push(i.join("")),i.length=0);for(let e=(this.cMap?this.cMap.getCharCodeLength(t):1)-1;e>=0;e--)i.push(String.fromCharCode(t>>8*e&255));continue}}n()||(e.push(i.join("")),i.length=0),i.push(String.fromCodePoint(o))}return e.push(i.join("")),e}},e.ErrorFont=class{constructor(t){this.error=t,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString(t){return[t]}exportData(t=!1){return{error:this.error}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFTopDict=e.CFFStrings=e.CFFStandardStrings=e.CFFPrivateDict=e.CFFParser=e.CFFIndex=e.CFFHeader=e.CFFFDSelect=e.CFFCompiler=e.CFFCharset=e.CFF=void 0;var n=i(2),r=i(46),s=i(19);const o=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];e.CFFStandardStrings=o;const a=391,l=function(){const t=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],e=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]+t[e-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]-t[e-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]/t[e-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(t,e){t[e-1]=-t[e-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(t,e){t[e-2]=t[e-2]*t[e-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];return class{constructor(t,e,i){this.bytes=t.getBytes(),this.properties=e,this.seacAnalysisEnabled=!!i}parse(){const t=this.properties,e=new c;this.cff=e;const i=this.parseHeader(),n=this.parseIndex(i.endPos),r=this.parseIndex(n.endPos),s=this.parseIndex(r.endPos),o=this.parseIndex(s.endPos),a=this.parseDict(r.obj.get(0)),l=this.createDict(f,a,e.strings);e.header=i.obj,e.names=this.parseNameIndex(n.obj),e.strings=this.parseStringIndex(s.obj),e.topDict=l,e.globalSubrIndex=o.obj,this.parsePrivateDict(e.topDict),e.isCIDFont=l.hasName("ROS");const h=l.getByName("CharStrings"),u=this.parseIndex(h).obj,p=l.getByName("FontMatrix");p&&(t.fontMatrix=p);const d=l.getByName("FontBBox");let g,m;if(d&&(t.ascent=Math.max(d[3],d[1]),t.descent=Math.min(d[1],d[3]),t.ascentScaled=!0),e.isCIDFont){const t=this.parseIndex(l.getByName("FDArray")).obj;for(let i=0,n=t.count;i<n;++i){const n=t.get(i),r=this.createDict(f,this.parseDict(n),e.strings);this.parsePrivateDict(r),e.fdArray.push(r)}m=null,g=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!0),e.fdSelect=this.parseFDSelect(l.getByName("FDSelect"),u.count)}else g=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!1),m=this.parseEncoding(l.getByName("Encoding"),t,e.strings,g.charset);e.charset=g,e.encoding=m;const y=this.parseCharStrings({charStrings:u,localSubrIndex:l.privateDict.subrsIndex,globalSubrIndex:o.obj,fdSelect:e.fdSelect,fdArray:e.fdArray,privateDict:l.privateDict});return e.charStrings=y.charStrings,e.seacs=y.seacs,e.widths=y.widths,e}parseHeader(){let t=this.bytes;const e=t.length;let i=0;for(;i<e&&1!==t[i];)++i;if(i>=e)throw new n.FormatError("Invalid CFF header");0!==i&&((0,n.info)("cff data is shifted"),t=t.subarray(i),this.bytes=t);const r=t[0],s=t[1],o=t[2],a=t[3];return{obj:new h(r,s,o,a),endPos:o}}parseDict(t){let e=0;function i(){let i=t[e++];return 30===i?function(){let i="";const n=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],s=t.length;for(;e<s;){const s=t[e++],o=s>>4,a=15&s;if(o===n)break;if(i+=r[o],a===n)break;i+=r[a]}return parseFloat(i)}():28===i?(i=t[e++],i=(i<<24|t[e++]<<16)>>16,i):29===i?(i=t[e++],i=i<<8|t[e++],i=i<<8|t[e++],i=i<<8|t[e++],i):i>=32&&i<=246?i-139:i>=247&&i<=250?256*(i-247)+t[e++]+108:i>=251&&i<=254?-256*(i-251)-t[e++]-108:((0,n.warn)('CFFParser_parseDict: "'+i+'" is a reserved command.'),NaN)}let r=[];const s=[];e=0;const o=t.length;for(;e<o;){let n=t[e];n<=21?(12===n&&(n=n<<8|t[++e]),s.push([n,r]),r=[],++e):r.push(i())}return s}parseIndex(t){const e=new p,i=this.bytes,n=i[t++]<<8|i[t++],r=[];let s,o,a=t;if(0!==n){const e=i[t++],l=t+(n+1)*e-1;for(s=0,o=n+1;s<o;++s){let n=0;for(let r=0;r<e;++r)n<<=8,n+=i[t++];r.push(l+n)}a=r[n]}for(s=0,o=r.length-1;s<o;++s){const t=r[s],n=r[s+1];e.add(i.subarray(t,n))}return{obj:e,endPos:a}}parseNameIndex(t){const e=[];for(let i=0,r=t.count;i<r;++i){const r=t.get(i);e.push((0,n.bytesToString)(r))}return e}parseStringIndex(t){const e=new u;for(let i=0,r=t.count;i<r;++i){const r=t.get(i);e.add((0,n.bytesToString)(r))}return e}createDict(t,e,i){const n=new t(i);for(let t=0,i=e.length;t<i;++t){const i=e[t],r=i[0],s=i[1];n.setByKey(r,s)}return n}parseCharString(i,r,s,o){if(!r||i.callDepth>10)return!1;let a=i.stackSize;const l=i.stack,c=r.length;for(let h=0;h<c;){const c=r[h++];let u=null;if(12===c){const t=r[h++];0===t?(r[h-2]=139,r[h-1]=22,a=0):u=e[t]}else if(28===c)l[a]=(r[h]<<24|r[h+1]<<16)>>16,h+=2,a++;else if(14===c){if(a>=4&&(a-=4,this.seacAnalysisEnabled))return i.seac=l.slice(a,a+4),!1;u=t[c]}else if(c>=32&&c<=246)l[a]=c-139,a++;else if(c>=247&&c<=254)l[a]=c<251?(c-247<<8)+r[h]+108:-(c-251<<8)-r[h]-108,h++,a++;else if(255===c)l[a]=(r[h]<<24|r[h+1]<<16|r[h+2]<<8|r[h+3])/65536,h+=4,a++;else if(19===c||20===c)i.hints+=a>>1,h+=i.hints+7>>3,a%=2,u=t[c];else{if(10===c||29===c){let e;if(e=10===c?s:o,!e)return u=t[c],(0,n.warn)("Missing subrsIndex for "+u.id),!1;let r=32768;e.count<1240?r=107:e.count<33900&&(r=1131);const h=l[--a]+r;if(h<0||h>=e.count||isNaN(h))return u=t[c],(0,n.warn)("Out of bounds subrIndex for "+u.id),!1;if(i.stackSize=a,i.callDepth++,!this.parseCharString(i,e.get(h),s,o))return!1;i.callDepth--,a=i.stackSize;continue}if(11===c)return i.stackSize=a,!0;0===c&&h===r.length?(r[h-1]=14,u=t[14]):u=t[c]}if(u){if(u.stem&&(i.hints+=a>>1,3===c||23===c?i.hasVStems=!0:!i.hasVStems||1!==c&&18!==c||((0,n.warn)("CFF stem hints are in wrong order"),r[h-1]=1===c?3:23)),"min"in u&&!i.undefStack&&a<u.min)return(0,n.warn)("Not enough parameters for "+u.id+"; actual: "+a+", expected: "+u.min),0===a&&(r[h-1]=14,!0);i.firstStackClearing&&u.stackClearing&&(i.firstStackClearing=!1,a-=u.min,a>=2&&u.stem?a%=2:a>1&&(0,n.warn)("Found too many parameters for stack-clearing command"),a>0&&(i.width=l[a-1])),"stackDelta"in u?("stackFn"in u&&u.stackFn(l,a),a+=u.stackDelta):u.stackClearing?a=0:u.resetStack?(a=0,i.undefStack=!1):u.undefStack&&(a=0,i.undefStack=!0,i.firstStackClearing=!1)}}return i.stackSize=a,!0}parseCharStrings({charStrings:t,localSubrIndex:e,globalSubrIndex:i,fdSelect:r,fdArray:s,privateDict:o}){const a=[],l=[],c=t.count;for(let h=0;h<c;h++){const c=t.get(h),u={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let p=!0,d=null,f=o;if(r&&s.length){const t=r.getFDIndex(h);-1===t&&((0,n.warn)("Glyph index is not in fd select."),p=!1),t>=s.length&&((0,n.warn)("Invalid fd index for glyph index."),p=!1),p&&(f=s[t].privateDict,d=f.subrsIndex)}else e&&(d=e);if(p&&(p=this.parseCharString(u,c,d,i)),null!==u.width){const t=f.getByName("nominalWidthX");l[h]=t+u.width}else{const t=f.getByName("defaultWidthX");l[h]=t}null!==u.seac&&(a[h]=u.seac),p||t.set(h,new Uint8Array([14]))}return{charStrings:t,seacs:a,widths:l}}emptyPrivateDictionary(t){const e=this.createDict(g,[],t.strings);t.setByKey(18,[0,0]),t.privateDict=e}parsePrivateDict(t){if(!t.hasName("Private"))return void this.emptyPrivateDictionary(t);const e=t.getByName("Private");if(!Array.isArray(e)||2!==e.length)return void t.removeByName("Private");const i=e[0],n=e[1];if(0===i||n>=this.bytes.length)return void this.emptyPrivateDictionary(t);const r=n+i,s=this.bytes.subarray(n,r),o=this.parseDict(s),a=this.createDict(g,o,t.strings);if(t.privateDict=a,!a.getByName("Subrs"))return;const l=a.getByName("Subrs"),c=n+l;if(0===l||c>=this.bytes.length)return void this.emptyPrivateDictionary(t);const h=this.parseIndex(c);a.subrsIndex=h.obj}parseCharsets(t,e,i,s){if(0===t)return new y(!0,m.ISO_ADOBE,r.ISOAdobeCharset);if(1===t)return new y(!0,m.EXPERT,r.ExpertCharset);if(2===t)return new y(!0,m.EXPERT_SUBSET,r.ExpertSubsetCharset);const o=this.bytes,a=t,l=o[t++],c=[s?0:".notdef"];let h,u,p;switch(e-=1,l){case 0:for(p=0;p<e;p++)h=o[t++]<<8|o[t++],c.push(s?h:i.get(h));break;case 1:for(;c.length<=e;)for(h=o[t++]<<8|o[t++],u=o[t++],p=0;p<=u;p++)c.push(s?h++:i.get(h++));break;case 2:for(;c.length<=e;)for(h=o[t++]<<8|o[t++],u=o[t++]<<8|o[t++],p=0;p<=u;p++)c.push(s?h++:i.get(h++));break;default:throw new n.FormatError("Unknown charset format")}const d=t,f=o.subarray(a,d);return new y(!1,l,c,f)}parseEncoding(t,e,i,r){const o=Object.create(null),a=this.bytes;let l,c,h,u=!1,p=null;if(0===t||1===t){u=!0,l=t;const e=t?s.ExpertEncoding:s.StandardEncoding;for(c=0,h=r.length;c<h;c++){const t=e.indexOf(r[c]);-1!==t&&(o[t]=c)}}else{const e=t;switch(l=a[t++],127&l){case 0:const e=a[t++];for(c=1;c<=e;c++)o[a[t++]]=c;break;case 1:const i=a[t++];let r=1;for(c=0;c<i;c++){const e=a[t++],i=a[t++];for(let t=e;t<=e+i;t++)o[t]=r++}break;default:throw new n.FormatError(`Unknown encoding format: ${l} in CFF`)}const s=t;128&l&&(a[e]&=127,function(){const e=a[t++];for(c=0;c<e;c++){const e=a[t++],n=(a[t++]<<8)+(255&a[t++]);o[e]=r.indexOf(i.get(n))}}()),p=a.subarray(e,s)}return l&=127,new v(u,l,o,p)}parseFDSelect(t,e){const i=this.bytes,r=i[t++],s=[];let o;switch(r){case 0:for(o=0;o<e;++o){const e=i[t++];s.push(e)}break;case 3:const a=i[t++]<<8|i[t++];for(o=0;o<a;++o){let e=i[t++]<<8|i[t++];0===o&&0!==e&&((0,n.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),e=0);const r=i[t++],a=i[t]<<8|i[t+1];for(let t=e;t<a;++t)s.push(r)}t+=2;break;default:throw new n.FormatError(`parseFDSelect: Unknown format "${r}".`)}if(s.length!==e)throw new n.FormatError("parseFDSelect: Invalid font data.");return new b(r,s)}}}();e.CFFParser=l;class c{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new u,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535)return void(0,n.warn)("Not enough space in charstrings to duplicate first glyph.");const t=this.charStrings.get(0);this.charStrings.add(t),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(t){return!(t<0||t>=this.charStrings.count)&&this.charStrings.get(t).length>0}}e.CFF=c;class h{constructor(t,e,i,n){this.major=t,this.minor=e,this.hdrSize=i,this.offSize=n}}e.CFFHeader=h;class u{constructor(){this.strings=[]}get(t){return t>=0&&t<=390?o[t]:t-a<=this.strings.length?this.strings[t-a]:o[0]}getSID(t){let e=o.indexOf(t);return-1!==e?e:(e=this.strings.indexOf(t),-1!==e?e+a:-1)}add(t){this.strings.push(t)}get count(){return this.strings.length}}e.CFFStrings=u;class p{constructor(){this.objects=[],this.length=0}add(t){this.length+=t.length,this.objects.push(t)}set(t,e){this.length+=e.length-this.objects[t].length,this.objects[t]=e}get(t){return this.objects[t]}get count(){return this.objects.length}}e.CFFIndex=p;class d{constructor(t,e){this.keyToNameMap=t.keyToNameMap,this.nameToKeyMap=t.nameToKeyMap,this.defaults=t.defaults,this.types=t.types,this.opcodes=t.opcodes,this.order=t.order,this.strings=e,this.values=Object.create(null)}setByKey(t,e){if(!(t in this.keyToNameMap))return!1;const i=e.length;if(0===i)return!0;for(let r=0;r<i;r++)if(isNaN(e[r]))return(0,n.warn)('Invalid CFFDict value: "'+e+'" for key "'+t+'".'),!0;const r=this.types[t];return"num"!==r&&"sid"!==r&&"offset"!==r||(e=e[0]),this.values[t]=e,!0}setByName(t,e){if(!(t in this.nameToKeyMap))throw new n.FormatError(`Invalid dictionary name "${t}"`);this.values[this.nameToKeyMap[t]]=e}hasName(t){return this.nameToKeyMap[t]in this.values}getByName(t){if(!(t in this.nameToKeyMap))throw new n.FormatError(`Invalid dictionary name ${t}"`);const e=this.nameToKeyMap[t];return e in this.values?this.values[e]:this.defaults[e]}removeByName(t){delete this.values[this.nameToKeyMap[t]]}static createTables(t){const e={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(let i=0,n=t.length;i<n;++i){const n=t[i],r=Array.isArray(n[0])?(n[0][0]<<8)+n[0][1]:n[0];e.keyToNameMap[r]=n[1],e.nameToKeyMap[n[1]]=r,e.types[r]=n[2],e.defaults[r]=n[3],e.opcodes[r]=Array.isArray(n[0])?n[0]:[n[0]],e.order.push(r)}return e}}const f=function(){const t=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];let e=null;return class extends d{constructor(i){null===e&&(e=d.createTables(t)),super(e,i),this.privateDict=null}}}();e.CFFTopDict=f;const g=function(){const t=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];let e=null;return class extends d{constructor(i){null===e&&(e=d.createTables(t)),super(e,i),this.subrsIndex=null}}}();e.CFFPrivateDict=g;const m={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class y{constructor(t,e,i,n){this.predefined=t,this.format=e,this.charset=i,this.raw=n}}e.CFFCharset=y;class v{constructor(t,e,i,n){this.predefined=t,this.format=e,this.encoding=i,this.raw=n}}class b{constructor(t,e){this.format=t,this.fdSelect=e}getFDIndex(t){return t<0||t>=this.fdSelect.length?-1:this.fdSelect[t]}}e.CFFFDSelect=b;class w{constructor(){this.offsets=Object.create(null)}isTracking(t){return t in this.offsets}track(t,e){if(t in this.offsets)throw new n.FormatError(`Already tracking location of ${t}`);this.offsets[t]=e}offset(t){for(const e in this.offsets)this.offsets[e]+=t}setEntryLocation(t,e,i){if(!(t in this.offsets))throw new n.FormatError(`Not tracking location of ${t}`);const r=i.data,s=this.offsets[t];for(let t=0,i=e.length;t<i;++t){const i=5*t+s,o=i+1,a=i+2,l=i+3,c=i+4;if(29!==r[i]||0!==r[o]||0!==r[a]||0!==r[l]||0!==r[c])throw new n.FormatError("writing to an offset that is not empty");const h=e[t];r[i]=29,r[o]=h>>24&255,r[a]=h>>16&255,r[l]=h>>8&255,r[c]=255&h}}}class x{constructor(t){this.cff=t}compile(){const t=this.cff,e={data:[],length:0,add:function(t){this.data=this.data.concat(t),this.length=this.data.length}},i=this.compileHeader(t.header);e.add(i);const r=this.compileNameIndex(t.names);if(e.add(r),t.isCIDFont&&t.topDict.hasName("FontMatrix")){const e=t.topDict.getByName("FontMatrix");t.topDict.removeByName("FontMatrix");for(let i=0,r=t.fdArray.length;i<r;i++){const r=t.fdArray[i];let s=e.slice(0);r.hasName("FontMatrix")&&(s=n.Util.transform(s,r.getByName("FontMatrix"))),r.setByName("FontMatrix",s)}}const s=t.topDict.getByName("XUID");s&&s.length>16&&t.topDict.removeByName("XUID"),t.topDict.setByName("charset",0);let o=this.compileTopDicts([t.topDict],e.length,t.isCIDFont);e.add(o.output);const a=o.trackers[0],l=this.compileStringIndex(t.strings.strings);e.add(l);const c=this.compileIndex(t.globalSubrIndex);if(e.add(c),t.encoding&&t.topDict.hasName("Encoding"))if(t.encoding.predefined)a.setEntryLocation("Encoding",[t.encoding.format],e);else{const i=this.compileEncoding(t.encoding);a.setEntryLocation("Encoding",[e.length],e),e.add(i)}const h=this.compileCharset(t.charset,t.charStrings.count,t.strings,t.isCIDFont);a.setEntryLocation("charset",[e.length],e),e.add(h);const u=this.compileCharStrings(t.charStrings);if(a.setEntryLocation("CharStrings",[e.length],e),e.add(u),t.isCIDFont){a.setEntryLocation("FDSelect",[e.length],e);const i=this.compileFDSelect(t.fdSelect);e.add(i),o=this.compileTopDicts(t.fdArray,e.length,!0),a.setEntryLocation("FDArray",[e.length],e),e.add(o.output);const n=o.trackers;this.compilePrivateDicts(t.fdArray,n,e)}return this.compilePrivateDicts([t.topDict],[a],e),e.add([0]),e.data}encodeNumber(t){return Number.isInteger(t)?this.encodeInteger(t):this.encodeFloat(t)}static get EncodeFloatRegExp(){return(0,n.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(t){let e=t.toString();const i=x.EncodeFloatRegExp.exec(e);if(i){const n=parseFloat("1e"+((i[2]?+i[2]:0)+i[1].length));e=(Math.round(t*n)/n).toString()}let n,r,s="";for(n=0,r=e.length;n<r;++n){const t=e[n];s+="e"===t?"-"===e[++n]?"c":"b":"."===t?"a":"-"===t?"e":t}s+=1&s.length?"f":"ff";const o=[30];for(n=0,r=s.length;n<r;n+=2)o.push(parseInt(s.substring(n,n+2),16));return o}encodeInteger(t){let e;return e=t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?[247+((t-=108)>>8),255&t]:t>=-1131&&t<=-108?[251+((t=-t-108)>>8),255&t]:t>=-32768&&t<=32767?[28,t>>8&255,255&t]:[29,t>>24&255,t>>16&255,t>>8&255,255&t],e}compileHeader(t){return[t.major,t.minor,4,t.offSize]}compileNameIndex(t){const e=new p;for(let i=0,r=t.length;i<r;++i){const r=t[i],s=Math.min(r.length,127);let o=new Array(s);for(let t=0;t<s;t++){let e=r[t];(e<"!"||e>"~"||"["===e||"]"===e||"("===e||")"===e||"{"===e||"}"===e||"<"===e||">"===e||"/"===e||"%"===e)&&(e="_"),o[t]=e}o=o.join(""),""===o&&(o="Bad_Font_Name"),e.add((0,n.stringToBytes)(o))}return this.compileIndex(e)}compileTopDicts(t,e,i){const n=[];let r=new p;for(let s=0,o=t.length;s<o;++s){const o=t[s];i&&(o.removeByName("CIDFontVersion"),o.removeByName("CIDFontRevision"),o.removeByName("CIDFontType"),o.removeByName("CIDCount"),o.removeByName("UIDBase"));const a=new w,l=this.compileDict(o,a);n.push(a),r.add(l),a.offset(e)}return r=this.compileIndex(r,n),{trackers:n,output:r}}compilePrivateDicts(t,e,i){for(let r=0,s=t.length;r<s;++r){const s=t[r],o=s.privateDict;if(!o||!s.hasName("Private"))throw new n.FormatError("There must be a private dictionary.");const a=new w,l=this.compileDict(o,a);let c=i.length;if(a.offset(c),l.length||(c=0),e[r].setEntryLocation("Private",[l.length,c],i),i.add(l),o.subrsIndex&&o.hasName("Subrs")){const t=this.compileIndex(o.subrsIndex);a.setEntryLocation("Subrs",[l.length],i),i.add(t)}}}compileDict(t,e){let i=[];const r=t.order;for(let s=0;s<r.length;++s){const o=r[s];if(!(o in t.values))continue;let a=t.values[o],l=t.types[o];if(Array.isArray(l)||(l=[l]),Array.isArray(a)||(a=[a]),0!==a.length){for(let r=0,s=l.length;r<s;++r){const s=l[r],c=a[r];switch(s){case"num":case"sid":i=i.concat(this.encodeNumber(c));break;case"offset":const r=t.keyToNameMap[o];e.isTracking(r)||e.track(r,i.length),i=i.concat([29,0,0,0,0]);break;case"array":case"delta":i=i.concat(this.encodeNumber(c));for(let t=1,e=a.length;t<e;++t)i=i.concat(this.encodeNumber(a[t]));break;default:throw new n.FormatError(`Unknown data type of ${s}`)}}i=i.concat(t.opcodes[o])}}return i}compileStringIndex(t){const e=new p;for(let i=0,r=t.length;i<r;++i)e.add((0,n.stringToBytes)(t[i]));return this.compileIndex(e)}compileGlobalSubrIndex(){const t=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(t))}compileCharStrings(t){const e=new p;for(let i=0;i<t.count;i++){const n=t.get(i);0!==n.length?e.add(n):e.add(new Uint8Array([139,14]))}return this.compileIndex(e)}compileCharset(t,e,i,r){let s;const o=e-1;if(r)s=new Uint8Array([2,0,0,o>>8&255,255&o]);else{s=new Uint8Array(1+2*o),s[0]=0;let e=0;const r=t.charset.length;let a=!1;for(let o=1;o<s.length;o+=2){let l=0;if(e<r){const r=t.charset[e++];l=i.getSID(r),-1===l&&(l=0,a||(a=!0,(0,n.warn)(`Couldn't find ${r} in CFF strings`)))}s[o]=l>>8&255,s[o+1]=255&l}}return this.compileTypedArray(s)}compileEncoding(t){return this.compileTypedArray(t.raw)}compileFDSelect(t){const e=t.format;let i,n;switch(e){case 0:for(i=new Uint8Array(1+t.fdSelect.length),i[0]=e,n=0;n<t.fdSelect.length;n++)i[n+1]=t.fdSelect[n];break;case 3:const r=0;let s=t.fdSelect[0];const o=[e,0,0,r>>8&255,255&r,s];for(n=1;n<t.fdSelect.length;n++){const e=t.fdSelect[n];e!==s&&(o.push(n>>8&255,255&n,e),s=e)}const a=(o.length-3)/3;o[1]=a>>8&255,o[2]=255&a,o.push(n>>8&255,255&n),i=new Uint8Array(o)}return this.compileTypedArray(i)}compileTypedArray(t){const e=[];for(let i=0,n=t.length;i<n;++i)e[i]=t[i];return e}compileIndex(t,e=[]){const i=t.objects,n=i.length;if(0===n)return[0,0,0];const r=[n>>8&255,255&n];let s,o,a=1;for(s=0;s<n;++s)a+=i[s].length;o=a<256?1:a<65536?2:a<16777216?3:4,r.push(o);let l=1;for(s=0;s<n+1;s++)1===o?r.push(255&l):2===o?r.push(l>>8&255,255&l):3===o?r.push(l>>16&255,l>>8&255,255&l):r.push(l>>>24&255,l>>16&255,l>>8&255,255&l),i[s]&&(l+=i[s].length);for(s=0;s<n;s++){e[s]&&e[s].offset(r.length);for(let t=0,e=i[s].length;t<e;t++)r.push(i[s][t])}return r}}e.CFFCompiler=x},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ISOAdobeCharset=e.ExpertSubsetCharset=e.ExpertCharset=void 0,e.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],e.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],e.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerifFonts=e.getNonStdFontMap=e.getGlyphMapForStandardFonts=e.getFontNameToFileMap=void 0,e.getStandardFontName=function(t){const e=(0,r.normalizeFontName)(t);return s()[e]},e.getSymbolsFonts=e.getSupplementalGlyphMapForCalibri=e.getSupplementalGlyphMapForArialBlack=e.getStdFontMap=void 0;var n=i(8),r=i(18);const s=(0,n.getLookupTableFactory)((function(t){t["Times-Roman"]="Times-Roman",t.Helvetica="Helvetica",t.Courier="Courier",t.Symbol="Symbol",t["Times-Bold"]="Times-Bold",t["Helvetica-Bold"]="Helvetica-Bold",t["Courier-Bold"]="Courier-Bold",t.ZapfDingbats="ZapfDingbats",t["Times-Italic"]="Times-Italic",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Courier-Oblique"]="Courier-Oblique",t["Times-BoldItalic"]="Times-BoldItalic",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Courier-BoldOblique"]="Courier-BoldOblique",t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"}));e.getStdFontMap=s;const o=(0,n.getLookupTableFactory)((function(t){t.Courier="FoxitFixed.pfb",t["Courier-Bold"]="FoxitFixedBold.pfb",t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",t["Courier-Oblique"]="FoxitFixedItalic.pfb",t.Helvetica="FoxitSans.pfb",t["Helvetica-Bold"]="FoxitSansBold.pfb",t["Helvetica-BoldOblique"]="FoxitSansBoldItalic.pfb",t["Helvetica-Oblique"]="FoxitSansItalic.pfb",t["Times-Roman"]="FoxitSerif.pfb",t["Times-Bold"]="FoxitSerifBold.pfb",t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",t["Times-Italic"]="FoxitSerifItalic.pfb",t.Symbol="FoxitSymbol.pfb",t.ZapfDingbats="FoxitDingbats.pfb",t["LiberationSans-Regular"]="LiberationSans-Regular.ttf",t["LiberationSans-Bold"]="LiberationSans-Bold.ttf",t["LiberationSans-Italic"]="LiberationSans-Italic.ttf",t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"}));e.getFontNameToFileMap=o;const a=(0,n.getLookupTableFactory)((function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t["ItcSymbol-Bold"]="Helvetica-Bold",t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",t["ItcSymbol-Book"]="Helvetica",t["ItcSymbol-BookItalic"]="Helvetica-Oblique",t["ItcSymbol-Medium"]="Helvetica",t["ItcSymbol-MediumItalic"]="Helvetica-Oblique",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica",t.Wingdings="ZapfDingbats",t["Wingdings-Regular"]="ZapfDingbats"}));e.getNonStdFontMap=a;const l=(0,n.getLookupTableFactory)((function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t.LiberationSerif=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t["Trinité"]=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0}));e.getSerifFonts=l;const c=(0,n.getLookupTableFactory)((function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0}));e.getSymbolsFonts=c;const h=(0,n.getLookupTableFactory)((function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[200]=193,t[203]=205,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[226]=352,t[227]=353,t[228]=381,t[229]=382,t[233]=221,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[267]=282,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[283]=344,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377}));e.getGlyphMapForStandardFonts=h;const u=(0,n.getLookupTableFactory)((function(t){t[227]=322,t[264]=261,t[291]=346}));e.getSupplementalGlyphMapForArialBlack=u;const p=(0,n.getLookupTableFactory)((function(t){t[1]=32,t[4]=65,t[6]=193,t[17]=66,t[18]=67,t[21]=268,t[24]=68,t[28]=69,t[30]=201,t[32]=282,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[49]=205,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[87]=80,t[89]=81,t[90]=82,t[92]=344,t[94]=83,t[97]=352,t[100]=84,t[104]=85,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[124]=221,t[127]=90,t[129]=381,t[258]=97,t[260]=225,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[275]=269,t[282]=100,t[286]=101,t[288]=233,t[290]=283,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[351]=237,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[383]=243,t[393]=112,t[395]=113,t[396]=114,t[398]=345,t[400]=115,t[401]=347,t[403]=353,t[410]=116,t[437]=117,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[457]=253,t[460]=122,t[462]=382,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45}));e.getSupplementalGlyphMapForCalibri=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ToUnicodeMap=e.IdentityToUnicodeMap=void 0;var n=i(2);e.ToUnicodeMap=class{constructor(t=[]){this._map=t}get length(){return this._map.length}forEach(t){for(const e in this._map)t(e,this._map[e].charCodeAt(0))}has(t){return void 0!==this._map[t]}get(t){return this._map[t]}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const i in e)if(e[i]===t)return 0|i;return-1}amend(t){for(const e in t)this._map[e]=t[e]}},e.IdentityToUnicodeMap=class{constructor(t,e){this.firstChar=t,this.lastChar=e}get length(){return this.lastChar+1-this.firstChar}forEach(t){for(let e=this.firstChar,i=this.lastChar;e<=i;e++)t(e,e)}has(t){return this.firstChar<=t&&t<=this.lastChar}get(t){if(this.firstChar<=t&&t<=this.lastChar)return String.fromCharCode(t)}charCodeOf(t){return Number.isInteger(t)&&t>=this.firstChar&&t<=this.lastChar?t:-1}amend(t){(0,n.unreachable)("Should not call amend()")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFFont=void 0;var n=i(45),r=i(18),s=i(2);e.CFFFont=class{constructor(t,e){this.properties=e;const i=new n.CFFParser(t,e,r.SEAC_ANALYSIS_ENABLED);this.cff=i.parse(),this.cff.duplicateFirstGlyph();const o=new n.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=o.compile()}catch(i){(0,s.warn)("Failed to compile font "+e.loadedName),this.data=t}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const t=this.cff,e=this.properties,i=t.charset.charset;let n,s;if(e.composite){let r;if(n=Object.create(null),t.isCIDFont)for(s=0;s<i.length;s++){const t=i[s];r=e.cMap.charCodeOf(t),n[r]=s}else for(s=0;s<t.charStrings.count;s++)r=e.cMap.charCodeOf(s),n[r]=s;return n}let o=t.encoding?t.encoding.encoding:null;return e.isInternalFont&&(o=e.defaultEncoding),n=(0,r.type1FontGlyphMapping)(e,o,i),n}hasGlyphId(t){return this.cff.hasGlyphId(t)}_createBuiltInEncoding(){const{charset:t,encoding:e}=this.cff;if(!t||!e)return;const i=t.charset,n=e.encoding,r=[];for(const t in n){const e=n[t];if(e>=0){const n=i[e];n&&(r[t]=n)}}r.length>0&&(this.properties.builtInEncoding=r)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontRendererFactory=void 0;var n=i(2),r=i(45),s=i(20),o=i(19),a=i(10);function l(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16)>>16}function u(t,e){return t[e]<<24>>24}function p(t,e){return h(t,e)/16384}function d(t){const e=t.length;let i=32768;return e<1240?i=107:e<33900&&(i=1131),i}function f(t,e,i){const r=1===c(t,e+2)?l(t,e+8):l(t,e+16),s=c(t,e+r);let o,a,h;if(4===s){c(t,e+r+2);const i=c(t,e+r+6)>>1;for(a=e+r+14,o=[],h=0;h<i;h++,a+=2)o[h]={end:c(t,a)};for(a+=2,h=0;h<i;h++,a+=2)o[h].start=c(t,a);for(h=0;h<i;h++,a+=2)o[h].idDelta=c(t,a);for(h=0;h<i;h++,a+=2){let e=c(t,a);if(0!==e){o[h].ids=[];for(let i=0,n=o[h].end-o[h].start+1;i<n;i++)o[h].ids[i]=c(t,a+e),e+=2}}return o}if(12===s){const i=l(t,e+r+12);for(a=e+r+16,o=[],h=0;h<i;h++)e=l(t,a),o.push({start:e,end:l(t,a+4),idDelta:l(t,a+8)-e}),a+=12;return o}throw new n.FormatError(`unsupported cmap: ${s}`)}function g(t,e,i,n){const s=new r.CFFParser(new a.Stream(t,e,i-e),{},n).parse();return{glyphs:s.charStrings.objects,subrs:s.topDict.privateDict&&s.topDict.privateDict.subrsIndex&&s.topDict.privateDict.subrsIndex.objects,gsubrs:s.globalSubrIndex&&s.globalSubrIndex.objects,isCFFCIDFont:s.isCIDFont,fdSelect:s.fdSelect,fdArray:s.fdArray}}function m(t,e){const i=e.codePointAt(0);let n=0,r=0,s=t.length-1;for(;r<s;){const e=r+s+1>>1;i<t[e].start?s=e-1:r=e}return t[r].start<=i&&i<=t[r].end&&(n=t[r].idDelta+(t[r].ids?t[r].ids[i-t[r].start]:i)&65535),{charCode:i,glyphId:n}}function y(t,e,i){function n(t,i){e.push({cmd:"moveTo",args:[t,i]})}function r(t,i){e.push({cmd:"lineTo",args:[t,i]})}function s(t,i,n,r){e.push({cmd:"quadraticCurveTo",args:[t,i,n,r]})}let o=0;const a=h(t,o);let l,d=0,f=0;if(o+=10,a<0)do{l=c(t,o);const n=c(t,o+2);let r,s;o+=4,1&l?(2&l?(r=h(t,o),s=h(t,o+2)):(r=c(t,o),s=c(t,o+2)),o+=4):2&l?(r=u(t,o++),s=u(t,o++)):(r=t[o++],s=t[o++]),2&l?(d=r,f=s):(d=0,f=0);let a=1,g=1,m=0,v=0;8&l?(a=g=p(t,o),o+=2):64&l?(a=p(t,o),g=p(t,o+2),o+=4):128&l&&(a=p(t,o),m=p(t,o+2),v=p(t,o+4),g=p(t,o+6),o+=8);const b=i.glyphs[n];b&&(e.push({cmd:"save"},{cmd:"transform",args:[a,m,v,g,d,f]}),y(b,e,i),e.push({cmd:"restore"}))}while(32&l);else{const e=[];let i,u;for(i=0;i<a;i++)e.push(c(t,o)),o+=2;o+=2+c(t,o);const p=e[e.length-1]+1,g=[];for(;g.length<p;){l=t[o++];let e=1;for(8&l&&(e+=t[o++]);e-- >0;)g.push({flags:l})}for(i=0;i<p;i++){switch(18&g[i].flags){case 0:d+=h(t,o),o+=2;break;case 2:d-=t[o++];break;case 18:d+=t[o++]}g[i].x=d}for(i=0;i<p;i++){switch(36&g[i].flags){case 0:f+=h(t,o),o+=2;break;case 4:f-=t[o++];break;case 36:f+=t[o++]}g[i].y=f}let m=0;for(o=0;o<a;o++){const t=e[o],a=g.slice(m,t+1);if(1&a[0].flags)a.push(a[0]);else if(1&a[a.length-1].flags)a.unshift(a[a.length-1]);else{const t={flags:1,x:(a[0].x+a[a.length-1].x)/2,y:(a[0].y+a[a.length-1].y)/2};a.unshift(t),a.push(t)}for(n(a[0].x,a[0].y),i=1,u=a.length;i<u;i++)1&a[i].flags?r(a[i].x,a[i].y):1&a[i+1].flags?(s(a[i].x,a[i].y,a[i+1].x,a[i+1].y),i++):s(a[i].x,a[i].y,(a[i].x+a[i+1].x)/2,(a[i].y+a[i+1].y)/2);m=t+1}}}function v(t,e,i,r){function s(t,i){e.push({cmd:"moveTo",args:[t,i]})}function a(t,i){e.push({cmd:"lineTo",args:[t,i]})}function l(t,i,n,r,s,o){e.push({cmd:"bezierCurveTo",args:[t,i,n,r,s,o]})}const c=[];let h=0,u=0,p=0;!function t(f){let g=0;for(;g<f.length;){let y,b,w,x,S,k,C,A,_,T=!1,O=f[g++];switch(O){case 1:case 3:case 18:case 23:p+=c.length>>1,T=!0;break;case 4:u+=c.pop(),s(h,u),T=!0;break;case 5:for(;c.length>0;)h+=c.shift(),u+=c.shift(),a(h,u);break;case 6:for(;c.length>0&&(h+=c.shift(),a(h,u),0!==c.length);)u+=c.shift(),a(h,u);break;case 7:for(;c.length>0&&(u+=c.shift(),a(h,u),0!==c.length);)h+=c.shift(),a(h,u);break;case 8:for(;c.length>0;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 10:if(A=c.pop(),_=null,i.isCFFCIDFont){const t=i.fdSelect.getFDIndex(r);if(t>=0&&t<i.fdArray.length){const e=i.fdArray[t];let n;e.privateDict&&e.privateDict.subrsIndex&&(n=e.privateDict.subrsIndex.objects),n&&(A+=d(n),_=n[A])}else(0,n.warn)("Invalid fd index for glyph index.")}else _=i.subrs[A+i.subrsBias];_&&t(_);break;case 11:return;case 12:switch(O=f[g++],O){case 34:y=h+c.shift(),b=y+c.shift(),S=u+c.shift(),h=b+c.shift(),l(y,u,b,S,h,S),y=h+c.shift(),b=y+c.shift(),h=b+c.shift(),l(y,S,b,u,h,u);break;case 35:y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),c.pop();break;case 36:y=h+c.shift(),S=u+c.shift(),b=y+c.shift(),k=S+c.shift(),h=b+c.shift(),l(y,S,b,k,h,k),y=h+c.shift(),b=y+c.shift(),C=k+c.shift(),h=b+c.shift(),l(y,k,b,C,h,u);break;case 37:const t=h,e=u;y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x,Math.abs(h-t)>Math.abs(u-e)?h+=c.shift():u+=c.shift(),l(y,w,b,x,h,u);break;default:throw new n.FormatError(`unknown operator: 12 ${O}`)}break;case 14:if(c.length>=4){const t=c.pop(),n=c.pop();u=c.pop(),h=c.pop(),e.push({cmd:"save"},{cmd:"translate",args:[h,u]});let r=m(i.cmap,String.fromCharCode(i.glyphNameMap[o.StandardEncoding[t]]));v(i.glyphs[r.glyphId],e,i,r.glyphId),e.push({cmd:"restore"}),r=m(i.cmap,String.fromCharCode(i.glyphNameMap[o.StandardEncoding[n]])),v(i.glyphs[r.glyphId],e,i,r.glyphId)}return;case 19:case 20:p+=c.length>>1,g+=p+7>>3,T=!0;break;case 21:u+=c.pop(),h+=c.pop(),s(h,u),T=!0;break;case 22:h+=c.pop(),s(h,u),T=!0;break;case 24:for(;c.length>2;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);h+=c.shift(),u+=c.shift(),a(h,u);break;case 25:for(;c.length>6;)h+=c.shift(),u+=c.shift(),a(h,u);y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 26:for(c.length%2&&(h+=c.shift());c.length>0;)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x+c.shift(),l(y,w,b,x,h,u);break;case 27:for(c.length%2&&(u+=c.shift());c.length>0;)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x,l(y,w,b,x,h,u);break;case 28:c.push((f[g]<<24|f[g+1]<<16)>>16),g+=2;break;case 29:A=c.pop()+i.gsubrsBias,_=i.gsubrs[A],_&&t(_);break;case 30:for(;c.length>0&&(y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;case 31:for(;c.length>0&&(y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;default:if(O<32)throw new n.FormatError(`unknown operator: ${O}`);O<247?c.push(O-139):O<251?c.push(256*(O-247)+f[g++]+108):O<255?c.push(256*-(O-251)-f[g++]-108):(c.push((f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])/65536),g+=4)}T&&(c.length=0)}}(t)}const b=[];class w{constructor(t){this.constructor===w&&(0,n.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=t,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(t){const{charCode:e,glyphId:i}=m(this.cmap,t);let n=this.compiledGlyphs[i];if(!n)try{n=this.compileGlyph(this.glyphs[i],i),this.compiledGlyphs[i]=n}catch(t){throw this.compiledGlyphs[i]=b,void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=i),t}return void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=i),n}compileGlyph(t,e){if(!t||0===t.length||14===t[0])return b;let i=this.fontMatrix;if(this.isCFFCIDFont){const t=this.fdSelect.getFDIndex(e);t>=0&&t<this.fdArray.length?i=this.fdArray[t].getByName("FontMatrix")||n.FONT_IDENTITY_MATRIX:(0,n.warn)("Invalid fd index for glyph index.")}const r=[{cmd:"save"},{cmd:"transform",args:i.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(t,r,e),r.push({cmd:"restore"}),r}compileGlyphImpl(){(0,n.unreachable)("Children classes should implement this.")}hasBuiltPath(t){const{charCode:e,glyphId:i}=m(this.cmap,t);return void 0!==this.compiledGlyphs[i]&&void 0!==this.compiledCharCodeToGlyphId[e]}}class x extends w{constructor(t,e,i){super(i||[488e-6,0,0,488e-6,0,0]),this.glyphs=t,this.cmap=e}compileGlyphImpl(t,e){y(t,e,this)}}class S extends w{constructor(t,e,i,n){super(i||[.001,0,0,.001,0,0]),this.glyphs=t.glyphs,this.gsubrs=t.gsubrs||[],this.subrs=t.subrs||[],this.cmap=e,this.glyphNameMap=n||(0,s.getGlyphsUnicode)(),this.gsubrsBias=d(this.gsubrs),this.subrsBias=d(this.subrs),this.isCFFCIDFont=t.isCFFCIDFont,this.fdSelect=t.fdSelect,this.fdArray=t.fdArray}compileGlyphImpl(t,e,i){v(t,e,this,i)}}e.FontRendererFactory=class{static create(t,e){const i=new Uint8Array(t.data);let r,s,o,a,h,u;const p=c(i,4);for(let t=0,d=12;t<p;t++,d+=16){const t=(0,n.bytesToString)(i.subarray(d,d+4)),p=l(i,d+8),m=l(i,d+12);switch(t){case"cmap":r=f(i,p);break;case"glyf":s=i.subarray(p,p+m);break;case"loca":o=i.subarray(p,p+m);break;case"head":u=c(i,p+18),h=c(i,p+50);break;case"CFF ":a=g(i,p,p+m,e)}}if(s){const e=u?[1/u,0,0,1/u,0,0]:t.fontMatrix;return new x(function(t,e,i){let n,r;i?(n=4,r=l):(n=2,r=(t,e)=>2*c(t,e));const s=[];let o=r(e,0);for(let i=n;i<e.length;i+=n){const n=r(e,i);s.push(t.subarray(o,n)),o=n}return s}(s,o,h),r,e)}return new S(a,r,t.fontMatrix,t.glyphNameMap)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getMetrics=e.getFontBasicMetrics=void 0;var n=i(8);const r=(0,n.getLookupTableFactory)((function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,n.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Bold"]=(0,n.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-BoldOblique"]=(0,n.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Oblique"]=(0,n.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t.Symbol=(0,n.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790})),t["Times-Roman"]=(0,n.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Bold"]=(0,n.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-BoldItalic"]=(0,n.getLookupTableFactory)((function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Italic"]=(0,n.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t.ZapfDingbats=(0,n.getLookupTableFactory)((function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918}))}));e.getMetrics=r;const s=(0,n.getLookupTableFactory)((function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}}));e.getFontBasicMetrics=s},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlyfTable=void 0,e.GlyfTable=class{constructor({glyfTable:t,isGlyphLocationsLong:e,locaTable:n,numGlyphs:r}){this.glyphs=[];const s=new DataView(n.buffer,n.byteOffset,n.byteLength),o=new DataView(t.buffer,t.byteOffset,t.byteLength),a=e?4:2;let l=e?s.getUint32(0):2*s.getUint16(0),c=0;for(let t=0;t<r;t++){c+=a;const t=e?s.getUint32(c):2*s.getUint16(c);if(t===l){this.glyphs.push(new i({}));continue}const n=i.parse(l,o);this.glyphs.push(n),l=t}}getSize(){return this.glyphs.reduce(((t,e)=>t+(e.getSize()+3&-4)),0)}write(){const t=this.getSize(),e=new DataView(new ArrayBuffer(t)),i=t>131070,n=i?4:2,r=new DataView(new ArrayBuffer((this.glyphs.length+1)*n));i?r.setUint32(0,0):r.setUint16(0,0);let s=0,o=0;for(const t of this.glyphs)s+=t.write(s,e),s=s+3&-4,o+=n,i?r.setUint32(o,s):r.setUint16(o,s>>1);return{isLocationLong:i,loca:new Uint8Array(r.buffer),glyf:new Uint8Array(e.buffer)}}scale(t){for(let e=0,i=this.glyphs.length;e<i;e++)this.glyphs[e].scale(t[e])}};class i{constructor({header:t=null,simple:e=null,composites:i=null}){this.header=t,this.simple=e,this.composites=i}static parse(t,e){const[r,a]=n.parse(t,e);if(t+=r,a.numberOfContours<0){const n=[];for(;;){const[i,r]=o.parse(t,e);if(t+=i,n.push(r),!(32&r.flags))break}return new i({header:a,composites:n})}const l=s.parse(t,e,a.numberOfContours);return new i({header:a,simple:l})}getSize(){if(!this.header)return 0;const t=this.simple?this.simple.getSize():this.composites.reduce(((t,e)=>t+e.getSize()),0);return this.header.getSize()+t}write(t,e){if(!this.header)return 0;const i=t;if(t+=this.header.write(t,e),this.simple)t+=this.simple.write(t,e);else for(const i of this.composites)t+=i.write(t,e);return t-i}scale(t){if(!this.header)return;const e=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(e,t),this.simple)this.simple.scale(e,t);else for(const i of this.composites)i.scale(e,t)}}class n{constructor({numberOfContours:t,xMin:e,yMin:i,xMax:n,yMax:r}){this.numberOfContours=t,this.xMin=e,this.yMin=i,this.xMax=n,this.yMax=r}static parse(t,e){return[10,new n({numberOfContours:e.getInt16(t),xMin:e.getInt16(t+2),yMin:e.getInt16(t+4),xMax:e.getInt16(t+6),yMax:e.getInt16(t+8)})]}getSize(){return 10}write(t,e){return e.setInt16(t,this.numberOfContours),e.setInt16(t+2,this.xMin),e.setInt16(t+4,this.yMin),e.setInt16(t+6,this.xMax),e.setInt16(t+8,this.yMax),10}scale(t,e){this.xMin=Math.round(t+(this.xMin-t)*e),this.xMax=Math.round(t+(this.xMax-t)*e)}}class r{constructor({flags:t,xCoordinates:e,yCoordinates:i}){this.xCoordinates=e,this.yCoordinates=i,this.flags=t}}class s{constructor({contours:t,instructions:e}){this.contours=t,this.instructions=e}static parse(t,e,i){const n=[];for(let r=0;r<i;r++){const i=e.getUint16(t);t+=2,n.push(i)}const o=n[i-1]+1,a=e.getUint16(t);t+=2;const l=new Uint8Array(e).slice(t,t+a);t+=a;const c=[];for(let i=0;i<o;t++,i++){let n=e.getUint8(t);if(c.push(n),8&n){const r=e.getUint8(++t);n^=8;for(let t=0;t<r;t++)c.push(n);i+=r}}const h=[];let u=[],p=[],d=[];const f=[];let g=0,m=0;for(let i=0;i<o;i++){const r=c[i];if(2&r){const i=e.getUint8(t++);m+=16&r?i:-i,u.push(m)}else 16&r||(m+=e.getInt16(t),t+=2),u.push(m);n[g]===i&&(g++,h.push(u),u=[])}m=0,g=0;for(let i=0;i<o;i++){const s=c[i];if(4&s){const i=e.getUint8(t++);m+=32&s?i:-i,p.push(m)}else 32&s||(m+=e.getInt16(t),t+=2),p.push(m);d.push(1&s|64&s),n[g]===i&&(u=h[g],g++,f.push(new r({flags:d,xCoordinates:u,yCoordinates:p})),p=[],d=[])}return new s({contours:f,instructions:l})}getSize(){let t=2*this.contours.length+2+this.instructions.length,e=0,i=0;for(const n of this.contours){t+=n.flags.length;for(let r=0,s=n.xCoordinates.length;r<s;r++){const s=n.xCoordinates[r],o=n.yCoordinates[r];let a=Math.abs(s-e);a>255?t+=2:a>0&&(t+=1),e=s,a=Math.abs(o-i),a>255?t+=2:a>0&&(t+=1),i=o}}return t}write(t,e){const i=t,n=[],r=[],s=[];let o=0,a=0;for(const i of this.contours){for(let t=0,e=i.xCoordinates.length;t<e;t++){let e=i.flags[t];const l=i.xCoordinates[t];let c=l-o;if(0===c)e|=16,n.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?18:2,n.push(t)):n.push(c)}o=l;const h=i.yCoordinates[t];if(c=h-a,0===c)e|=32,r.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?36:4,r.push(t)):r.push(c)}a=h,s.push(e)}e.setUint16(t,n.length-1),t+=2}e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length);for(const i of s)e.setUint8(t++,i);for(let i=0,r=n.length;i<r;i++){const r=n[i],o=s[i];2&o?e.setUint8(t++,r):16&o||(e.setInt16(t,r),t+=2)}for(let i=0,n=r.length;i<n;i++){const n=r[i],o=s[i];4&o?e.setUint8(t++,n):32&o||(e.setInt16(t,n),t+=2)}return t-i}scale(t,e){for(const i of this.contours)if(0!==i.xCoordinates.length)for(let n=0,r=i.xCoordinates.length;n<r;n++)i.xCoordinates[n]=Math.round(t+(i.xCoordinates[n]-t)*e)}}class o{constructor({flags:t,glyphIndex:e,argument1:i,argument2:n,transf:r,instructions:s}){this.flags=t,this.glyphIndex=e,this.argument1=i,this.argument2=n,this.transf=r,this.instructions=s}static parse(t,e){const i=t,n=[];let r=e.getUint16(t);const s=e.getUint16(t+2);let a,l;t+=4,1&r?(2&r?(a=e.getInt16(t),l=e.getInt16(t+2)):(a=e.getUint16(t),l=e.getUint16(t+2)),t+=4,r^=1):(2&r?(a=e.getInt8(t),l=e.getInt8(t+1)):(a=e.getUint8(t),l=e.getUint8(t+1)),t+=2),8&r?(n.push(e.getUint16(t)),t+=2):64&r?(n.push(e.getUint16(t),e.getUint16(t+2)),t+=4):128&r&&(n.push(e.getUint16(t),e.getUint16(t+2),e.getUint16(t+4),e.getUint16(t+6)),t+=8);let c=null;if(256&r){const i=e.getUint16(t);t+=2,c=new Uint8Array(e).slice(t,t+i),t+=i}return[t-i,new o({flags:r,glyphIndex:s,argument1:a,argument2:l,transf:n,instructions:c})]}getSize(){let t=4+2*this.transf.length;return 256&this.flags&&(t+=2+this.instructions.length),t+=2,2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(t+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(t+=2),t}write(t,e){const i=t;return 2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=1):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=1),e.setUint16(t,this.flags),e.setUint16(t+2,this.glyphIndex),t+=4,1&this.flags?(2&this.flags?(e.setInt16(t,this.argument1),e.setInt16(t+2,this.argument2)):(e.setUint16(t,this.argument1),e.setUint16(t+2,this.argument2)),t+=4):(e.setUint8(t,this.argument1),e.setUint8(t+1,this.argument2),t+=2),256&this.flags&&(e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length)),t-i}scale(t,e){}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OpenTypeFileBuilder=void 0;var n=i(8),r=i(2);function s(t,e,i){t[e]=i>>8&255,t[e+1]=255&i}function o(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}function a(t,e,i){if(i instanceof Uint8Array)t.set(i,e);else if("string"==typeof i)for(let n=0,r=i.length;n<r;n++)t[e++]=255&i.charCodeAt(n);else for(let n=0,r=i.length;n<r;n++)t[e++]=255&i[n]}class l{constructor(t){this.sfnt=t,this.tables=Object.create(null)}static getSearchParams(t,e){let i=1,n=0;for(;(i^t)>i;)i<<=1,n++;const r=i*e;return{range:r,entry:n,rangeShift:e*t-r}}toArray(){let t=this.sfnt;const e=this.tables,i=Object.keys(e);i.sort();const c=i.length;let h,u,p,d,f,g=12+16*c;const m=[g];for(h=0;h<c;h++)d=e[i[h]],g+=(d.length+3&-4)>>>0,m.push(g);const y=new Uint8Array(g);for(h=0;h<c;h++)d=e[i[h]],a(y,m[h],d);"true"===t&&(t=(0,r.string32)(65536)),y[0]=255&t.charCodeAt(0),y[1]=255&t.charCodeAt(1),y[2]=255&t.charCodeAt(2),y[3]=255&t.charCodeAt(3),s(y,4,c);const v=l.getSearchParams(c,16);for(s(y,6,v.range),s(y,8,v.entry),s(y,10,v.rangeShift),g=12,h=0;h<c;h++){f=i[h],y[g]=255&f.charCodeAt(0),y[g+1]=255&f.charCodeAt(1),y[g+2]=255&f.charCodeAt(2),y[g+3]=255&f.charCodeAt(3);let t=0;for(u=m[h],p=m[h+1];u<p;u+=4)t=t+(0,n.readUint32)(y,u)>>>0;o(y,g+4,t),o(y,g+8,m[h]),o(y,g+12,e[f].length),g+=16}return y}addTable(t,e){if(t in this.tables)throw new Error("Table "+t+" already exists");this.tables[t]=e}}e.OpenTypeFileBuilder=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Font=void 0;var n=i(45),r=i(18),s=i(8),o=i(10),a=i(55),l=i(2);function c(t,e,i){const n=t.length,r=e.length,o=n-r;let a=i,l=!1;for(;a<o;){let i=0;for(;i<r&&t[a+i]===e[i];)i++;if(i>=r){for(a+=i;a<n&&(0,s.isWhiteSpace)(t[a]);)a++;l=!0;break}a++}return{found:l,length:a}}e.Type1Font=class{constructor(t,e,i){let n=i.length1,s=i.length2,h=e.peekBytes(6);const u=128===h[0]&&1===h[1];u&&(e.skip(6),n=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const p=function(t,e){const i=[101,101,120,101,99],n=t.pos;let r,s,a,h;try{r=t.getBytes(e),s=r.length}catch(t){}if(s===e&&(a=c(r,i,e-2*i.length),a.found&&a.length===e))return{stream:new o.Stream(r),length:e};for((0,l.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),t.pos=n;a=c(t.peekBytes(2048),i,0),0!==a.length;)if(t.pos+=a.length,a.found){h=t.pos-n;break}return t.pos=n,h?{stream:new o.Stream(t.getBytes(h)),length:h}:((0,l.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new o.Stream(t.getBytes(e)),length:e})}(e,n);new a.Type1Parser(p.stream,!1,r.SEAC_ANALYSIS_ENABLED).extractFontHeader(i),u&&(h=e.getBytes(6),s=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const d=function(t,e){const i=t.getBytes();return{stream:new o.Stream(i),length:i.length}}(e),f=new a.Type1Parser(d.stream,!0,r.SEAC_ANALYSIS_ENABLED).extractFontProgram(i);for(const t in f.properties)i[t]=f.properties[t];const g=f.charstrings,m=this.getType2Charstrings(g),y=this.getType2Subrs(f.subrs);this.charstrings=g,this.data=this.wrap(t,m,this.charstrings,y,i),this.seacs=this.getSeacs(f.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const t=[".notdef"],e=this.charstrings;for(let i=0;i<e.length;i++)t.push(e[i].glyphName);return t}getGlyphMapping(t){const e=this.charstrings;if(t.composite){const i=Object.create(null);for(let n=0,r=e.length;n<r;n++)i[t.cMap.charCodeOf(n)]=n+1;return i}const i=[".notdef"];let n,s;for(s=0;s<e.length;s++)i.push(e[s].glyphName);const o=t.builtInEncoding;if(o){n=Object.create(null);for(const t in o)s=i.indexOf(o[t]),s>=0&&(n[t]=s)}return(0,r.type1FontGlyphMapping)(t,n,i)}hasGlyphId(t){return!(t<0||t>=this.numGlyphs)&&(0===t||this.charstrings[t-1].charstring.length>0)}getSeacs(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];n.seac&&(e[i+1]=n.seac)}return e}getType2Charstrings(t){const e=[];for(let i=0,n=t.length;i<n;i++)e.push(t[i].charstring);return e}getType2Subrs(t){let e=0;const i=t.length;e=i<1133?107:i<33769?1131:32768;const n=[];let r;for(r=0;r<e;r++)n.push([11]);for(r=0;r<i;r++)n.push(t[r]);return n}wrap(t,e,i,r,s){const o=new n.CFF;o.header=new n.CFFHeader(1,0,4,4),o.names=[t];const a=new n.CFFTopDict;a.setByName("version",391),a.setByName("Notice",392),a.setByName("FullName",393),a.setByName("FamilyName",394),a.setByName("Weight",395),a.setByName("Encoding",null),a.setByName("FontMatrix",s.fontMatrix),a.setByName("FontBBox",s.bbox),a.setByName("charset",null),a.setByName("CharStrings",null),a.setByName("Private",null),o.topDict=a;const l=new n.CFFStrings;l.add("Version 0.11"),l.add("See original notice"),l.add(t),l.add(t),l.add("Medium"),o.strings=l,o.globalSubrIndex=new n.CFFIndex;const c=e.length,h=[".notdef"];let u,p;for(u=0;u<c;u++){const t=i[u].glyphName;-1===n.CFFStandardStrings.indexOf(t)&&l.add(t),h.push(t)}o.charset=new n.CFFCharset(!1,0,h);const d=new n.CFFIndex;for(d.add([139,14]),u=0;u<c;u++)d.add(e[u]);o.charStrings=d;const f=new n.CFFPrivateDict;f.setByName("Subrs",null);const g=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(u=0,p=g.length;u<p;u++){const t=g[u];if(!(t in s.privateData))continue;const e=s.privateData[t];if(Array.isArray(e))for(let t=e.length-1;t>0;t--)e[t]-=e[t-1];f.setByName(t,e)}o.topDict.privateDict=f;const m=new n.CFFIndex;for(u=0,p=r.length;u<p;u++)m.add(r[u]);return f.subrsIndex=m,new n.CFFCompiler(o).compile()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Parser=void 0;var n=i(19),r=i(8),s=i(10),o=i(2);const a=function(){const t=[4],e=[5],i=[6],n=[7],r=[8],s=[12,35],a=[14],l=[21],c=[22],h=[30],u=[31];return class{constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(p,d,f){const g=p.length;let m,y,v,b=!1;for(let w=0;w<g;w++){let g=p[w];if(g<32){switch(12===g&&(g=(g<<8)+p[++w]),g){case 1:case 3:case 9:case 3072:case 3073:case 3074:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){b=!0;break}const t=this.stack.pop();this.stack.push(0,t);break}b=this.executeCommand(1,t);break;case 5:b=this.executeCommand(2,e);break;case 6:b=this.executeCommand(1,i);break;case 7:b=this.executeCommand(1,n);break;case 8:b=this.executeCommand(6,r);break;case 10:if(this.stack.length<1){b=!0;break}if(v=this.stack.pop(),!d[v]){b=!0;break}b=this.convert(d[v],d,f);break;case 11:return b;case 13:if(this.stack.length<2){b=!0;break}m=this.stack.pop(),y=this.stack.pop(),this.lsb=y,this.width=m,this.stack.push(m,y),b=this.executeCommand(2,c);break;case 14:this.output.push(a[0]);break;case 21:if(this.flexing)break;b=this.executeCommand(2,l);break;case 22:if(this.flexing){this.stack.push(0);break}b=this.executeCommand(1,c);break;case 30:b=this.executeCommand(4,h);break;case 31:b=this.executeCommand(4,u);break;case 3078:if(f){const t=this.stack[this.stack.length-5];this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-t,b=this.executeCommand(0,a)}else b=this.executeCommand(4,a);break;case 3079:if(this.stack.length<4){b=!0;break}this.stack.pop(),m=this.stack.pop();const p=this.stack.pop();y=this.stack.pop(),this.lsb=y,this.width=m,this.stack.push(m,y,p),b=this.executeCommand(3,l);break;case 3084:if(this.stack.length<2){b=!0;break}const w=this.stack.pop(),x=this.stack.pop();this.stack.push(x/w);break;case 3088:if(this.stack.length<2){b=!0;break}v=this.stack.pop();const S=this.stack.pop();if(0===v&&3===S){const t=this.stack.splice(this.stack.length-17,17);this.stack.push(t[2]+t[0],t[3]+t[1],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]),b=this.executeCommand(13,s,!0),this.flexing=!1,this.stack.push(t[15],t[16])}else 1===v&&0===S&&(this.flexing=!0);break;case 3089:break;default:(0,o.warn)('Unknown type 1 charstring command of "'+g+'"')}if(b)break}else g<=246?g-=139:g=g<=250?256*(g-247)+p[++w]+108:g<=254?-256*(g-251)-p[++w]-108:(255&p[++w])<<24|(255&p[++w])<<16|(255&p[++w])<<8|(255&p[++w])<<0,this.stack.push(g)}return b}executeCommand(t,e,i){const n=this.stack.length;if(t>n)return!0;const r=n-t;for(let t=r;t<n;t++){let e=this.stack[t];Number.isInteger(e)?this.output.push(28,e>>8&255,255&e):(e=65536*e|0,this.output.push(255,e>>24&255,e>>16&255,e>>8&255,255&e))}return this.output.push.apply(this.output,e),i?this.stack.splice(r,t):this.stack.length=0,!1}}}(),l=function(){function t(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function e(t,e,i){if(i>=t.length)return new Uint8Array(0);let n,r,s=0|e;for(n=0;n<i;n++)s=52845*(t[n]+s)+22719&65535;const o=t.length-i,a=new Uint8Array(o);for(n=i,r=0;r<o;n++,r++){const e=t[n];a[r]=e^s>>8,s=52845*(e+s)+22719&65535}return a}function i(t){return 47===t||91===t||93===t||123===t||125===t||40===t||41===t}return class{constructor(i,n,o){if(n){const n=i.getBytes(),o=!((t(n[0])||(0,r.isWhiteSpace)(n[0]))&&t(n[1])&&t(n[2])&&t(n[3])&&t(n[4])&&t(n[5])&&t(n[6])&&t(n[7]));i=new s.Stream(o?e(n,55665,4):function(e,i,n){let r=0|i;const s=e.length,o=new Uint8Array(s>>>1);let a,l;for(a=0,l=0;a<s;a++){const i=e[a];if(!t(i))continue;let n;for(a++;a<s&&!t(n=e[a]);)a++;if(a<s){const t=parseInt(String.fromCharCode(i,n),16);o[l++]=t^r>>8,r=52845*(t+r)+22719&65535}}return o.slice(n,l)}(n,55665,4))}this.seacAnalysisEnabled=!!o,this.stream=i,this.nextChar()}readNumberArray(){this.getToken();const t=[];for(;;){const e=this.getToken();if(null===e||"]"===e||"}"===e)break;t.push(parseFloat(e||0))}return t}readNumber(){const t=this.getToken();return parseFloat(t||0)}readInt(){const t=this.getToken();return 0|parseInt(t||0,10)}readBoolean(){return"true"===this.getToken()?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(-1===e)return null;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,r.isWhiteSpace)(e))break;e=this.nextChar()}if(i(e))return this.nextChar(),String.fromCharCode(e);let n="";do{n+=String.fromCharCode(e),e=this.nextChar()}while(e>=0&&!(0,r.isWhiteSpace)(e)&&!i(e));return n}readCharStrings(t,i){return-1===i?t:e(t,4330,i)}extractFontProgram(t){const e=this.stream,i=[],n=[],r=Object.create(null);r.lenIV=4;const s={subrs:[],charstrings:[],properties:{privateData:r}};let o,l,c,h,u;for(;null!==(o=this.getToken());)if("/"===o)switch(o=this.getToken(),o){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();o=this.getToken(),null!==o&&"end"!==o;){if("/"!==o)continue;const t=this.getToken();l=this.readInt(),this.getToken(),c=l>0?e.getBytes(l):new Uint8Array(0),h=s.properties.privateData.lenIV,u=this.readCharStrings(c,h),this.nextChar(),o=this.getToken(),"noaccess"===o?this.getToken():"/"===o&&this.prevChar(),n.push({glyph:t,encoded:u})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){const t=this.readInt();l=this.readInt(),this.getToken(),c=l>0?e.getBytes(l):new Uint8Array(0),h=s.properties.privateData.lenIV,u=this.readCharStrings(c,h),this.nextChar(),o=this.getToken(),"noaccess"===o&&this.getToken(),i[t]=u}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const t=this.readNumberArray();t.length>0&&t.length;break;case"StemSnapH":case"StemSnapV":s.properties.privateData[o]=this.readNumberArray();break;case"StdHW":case"StdVW":s.properties.privateData[o]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":s.properties.privateData[o]=this.readNumber();break;case"ForceBold":s.properties.privateData[o]=this.readBoolean()}for(let e=0;e<n.length;e++){const r=n[e].glyph;u=n[e].encoded;const o=new a,l=o.convert(u,i,this.seacAnalysisEnabled);let c=o.output;l&&(c=[14]);const h={glyphName:r,charstring:c,width:o.width,lsb:o.lsb,seac:o.seac};if(".notdef"===r?s.charstrings.unshift(h):s.charstrings.push(h),t.builtInEncoding){const e=t.builtInEncoding.indexOf(r);e>-1&&void 0===t.widths[e]&&e>=t.firstChar&&e<=t.lastChar&&(t.widths[e]=o.width)}}return s}extractFontHeader(t){let e;for(;null!==(e=this.getToken());)if("/"===e)switch(e=this.getToken(),e){case"FontMatrix":const i=this.readNumberArray();t.fontMatrix=i;break;case"Encoding":const r=this.getToken();let s;if(/^\d+$/.test(r)){s=[];const t=0|parseInt(r,10);this.getToken();for(let i=0;i<t;i++){for(e=this.getToken();"dup"!==e&&"def"!==e;)if(e=this.getToken(),null===e)return;if("def"===e)break;const t=this.readInt();this.getToken();const i=this.getToken();s[t]=i,this.getToken()}}else s=(0,n.getEncoding)(r);t.builtInEncoding=s;break;case"FontBBox":const o=this.readNumberArray();t.ascent=Math.max(o[3],o[1]),t.descent=Math.min(o[1],o[3]),t.ascentScaled=!0}}}}();e.Type1Parser=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Pattern=void 0,e.getTilingPatternIR=function(t,e,i){const r=e.getArray("Matrix"),s=n.Util.normalizeRect(e.getArray("BBox")),o=e.get("XStep"),a=e.get("YStep"),l=e.get("PaintType"),c=e.get("TilingType");if(s[2]-s[0]==0||s[3]-s[1]==0)throw new n.FormatError(`Invalid getTilingPatternIR /BBox array: [${s}].`);return["TilingPattern",i,t,r,s,o,a,l,c]};var n=i(2),r=i(9),s=i(24),o=i(8);const a=2,l=3,c=4,h=5,u=6,p=7;e.Pattern=class{constructor(){(0,n.unreachable)("Cannot initialize Pattern.")}static parseShading(t,e,i,s,d,g){const m=t instanceof r.BaseStream?t.dict:t,b=m.get("ShadingType");try{switch(b){case a:case l:return new f(m,e,i,d,g);case c:case h:case u:case p:return new y(t,e,i,d,g);default:throw new n.FormatError("Unsupported ShadingType: "+b)}}catch(t){if(t instanceof o.MissingDataException)throw t;return s.send("UnsupportedFeature",{featureId:n.UNSUPPORTED_FEATURES.shadingPattern}),(0,n.warn)(t),new v}}};class d{static get SMALL_NUMBER(){return(0,n.shadow)(this,"SMALL_NUMBER",1e-6)}constructor(){this.constructor===d&&(0,n.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,n.unreachable)("Abstract method `getIR` called.")}}class f extends d{constructor(t,e,i,r,o){super(),this.coordsArr=t.getArray("Coords"),this.shadingType=t.get("ShadingType");const a=s.ColorSpace.parse({cs:t.getRaw("CS")||t.getRaw("ColorSpace"),xref:e,resources:i,pdfFunctionFactory:r,localColorSpaceCache:o}),c=t.getArray("BBox");Array.isArray(c)&&4===c.length?this.bbox=n.Util.normalizeRect(c):this.bbox=null;let h=0,u=1;if(t.has("Domain")){const e=t.getArray("Domain");h=e[0],u=e[1]}let p=!1,f=!1;if(t.has("Extend")){const e=t.getArray("Extend");p=e[0],f=e[1]}if(!(this.shadingType!==l||p&&f)){const[t,e,i,r,s,o]=this.coordsArr,a=Math.hypot(t-r,e-s);i<=o+a&&o<=i+a&&(0,n.warn)("Unsupported radial gradient.")}this.extendStart=p,this.extendEnd=f;const g=t.getRaw("Function"),m=r.createFromArray(g),y=(u-h)/10,v=this.colorStops=[];if(h>=u||y<=0)return void(0,n.info)("Bad shading domain.");const b=new Float32Array(a.numComps),w=new Float32Array(1);let x;for(let t=0;t<=10;t++){w[0]=h+t*y,m(w,0,b,0),x=a.getRgb(b,0);const e=n.Util.makeHexColor(x[0],x[1],x[2]);v.push([t/10,e])}let S="transparent";t.has("Background")&&(x=a.getRgb(t.get("Background"),0),S=n.Util.makeHexColor(x[0],x[1],x[2])),p||(v.unshift([0,S]),v[1][0]+=d.SMALL_NUMBER),f||(v[v.length-1][0]-=d.SMALL_NUMBER,v.push([1,S])),this.colorStops=v}getIR(){const t=this.coordsArr,e=this.shadingType;let i,r,s,o,c;return e===a?(r=[t[0],t[1]],s=[t[2],t[3]],o=null,c=null,i="axial"):e===l?(r=[t[0],t[1]],s=[t[3],t[4]],o=t[2],c=t[5],i="radial"):(0,n.unreachable)(`getPattern type unknown: ${e}`),["RadialAxial",i,this.bbox,this.colorStops,r,s,o,c]}}class g{constructor(t,e){this.stream=t,this.context=e,this.buffer=0,this.bufferLength=0;const i=e.numComps;this.tmpCompsBuf=new Float32Array(i);const n=e.colorSpace.numComps;this.tmpCsCompsBuf=e.colorFn?new Float32Array(n):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const t=this.stream.getByte();return!(t<0||(this.buffer=t,this.bufferLength=8,0))}readBits(t){let e=this.buffer,i=this.bufferLength;if(32===t){if(0===i)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;e=e<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const t=this.stream.getByte();return this.buffer=t&(1<<i)-1,(e<<8-i|(255&t)>>i)>>>0}if(8===t&&0===i)return this.stream.getByte();for(;i<t;)e=e<<8|this.stream.getByte(),i+=8;return i-=t,this.bufferLength=i,this.buffer=e&(1<<i)-1,e>>i}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const t=this.context.bitsPerCoordinate,e=this.readBits(t),i=this.readBits(t),n=this.context.decode,r=t<32?1/((1<<t)-1):2.3283064365386963e-10;return[e*r*(n[1]-n[0])+n[0],i*r*(n[3]-n[2])+n[2]]}readComponents(){const t=this.context.numComps,e=this.context.bitsPerComponent,i=e<32?1/((1<<e)-1):2.3283064365386963e-10,n=this.context.decode,r=this.tmpCompsBuf;for(let s=0,o=4;s<t;s++,o+=2){const t=this.readBits(e);r[s]=t*i*(n[o+1]-n[o])+n[o]}const s=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(r,0,s,0),this.context.colorSpace.getRgb(s,0)}}const m=function(){const t=[];return function(e){return t[e]||(t[e]=function(t){const e=[];for(let i=0;i<=t;i++){const n=i/t,r=1-n;e.push(new Float32Array([r*r*r,3*n*r*r,3*n*n*r,n*n*n]))}return e}(e)),t[e]}}();class y extends d{static get MIN_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,n.shadow)(this,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3)}static get MAX_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,n.shadow)(this,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20)}static get TRIANGLE_DENSITY(){return(0,n.shadow)(this,"TRIANGLE_DENSITY",20)}constructor(t,e,i,o,a){if(super(),!(t instanceof r.BaseStream))throw new n.FormatError("Mesh data is not a stream");const l=t.dict;this.shadingType=l.get("ShadingType");const d=l.getArray("BBox");Array.isArray(d)&&4===d.length?this.bbox=n.Util.normalizeRect(d):this.bbox=null;const f=s.ColorSpace.parse({cs:l.getRaw("CS")||l.getRaw("ColorSpace"),xref:e,resources:i,pdfFunctionFactory:o,localColorSpaceCache:a});this.background=l.has("Background")?f.getRgb(l.get("Background"),0):null;const m=l.getRaw("Function"),y=m?o.createFromArray(m):null;this.coords=[],this.colors=[],this.figures=[];const v={bitsPerCoordinate:l.get("BitsPerCoordinate"),bitsPerComponent:l.get("BitsPerComponent"),bitsPerFlag:l.get("BitsPerFlag"),decode:l.getArray("Decode"),colorFn:y,colorSpace:f,numComps:y?1:f.numComps},b=new g(t,v);let w=!1;switch(this.shadingType){case c:this._decodeType4Shading(b);break;case h:const t=0|l.get("VerticesPerRow");if(t<2)throw new n.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(b,t);break;case u:this._decodeType6Shading(b),w=!0;break;case p:this._decodeType7Shading(b),w=!0;break;default:(0,n.unreachable)("Unsupported mesh type.")}if(w){this._updateBounds();for(let t=0,e=this.figures.length;t<e;t++)this._buildFigureFromPatch(t)}this._updateBounds(),this._packData()}_decodeType4Shading(t){const e=this.coords,i=this.colors,r=[],s=[];let o=0;for(;t.hasData;){const a=t.readFlag(),l=t.readCoordinate(),c=t.readComponents();if(0===o){if(!(0<=a&&a<=2))throw new n.FormatError("Unknown type4 flag");switch(a){case 0:o=3;break;case 1:s.push(s[s.length-2],s[s.length-1]),o=1;break;case 2:s.push(s[s.length-3],s[s.length-1]),o=1}r.push(a)}s.push(e.length),e.push(l),i.push(c),o--,t.align()}this.figures.push({type:"triangles",coords:new Int32Array(s),colors:new Int32Array(s)})}_decodeType5Shading(t,e){const i=this.coords,n=this.colors,r=[];for(;t.hasData;){const e=t.readCoordinate(),s=t.readComponents();r.push(i.length),i.push(e),n.push(s)}this.figures.push({type:"lattice",coords:new Int32Array(r),colors:new Int32Array(r),verticesPerRow:e})}_decodeType6Shading(t){const e=this.coords,i=this.colors,r=new Int32Array(16),s=new Int32Array(4);for(;t.hasData;){const o=t.readFlag();if(!(0<=o&&o<=3))throw new n.FormatError("Unknown type6 flag");const a=e.length;for(let i=0,n=0!==o?8:12;i<n;i++)e.push(t.readCoordinate());const l=i.length;for(let e=0,n=0!==o?2:4;e<n;e++)i.push(t.readComponents());let c,h,u,p;switch(o){case 0:r[12]=a+3,r[13]=a+4,r[14]=a+5,r[15]=a+6,r[8]=a+2,r[11]=a+7,r[4]=a+1,r[7]=a+8,r[0]=a,r[1]=a+11,r[2]=a+10,r[3]=a+9,s[2]=l+1,s[3]=l+2,s[0]=l,s[1]=l+3;break;case 1:c=r[12],h=r[13],u=r[14],p=r[15],r[12]=p,r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=u,r[11]=a+3,r[4]=h,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=s[2],h=s[3],s[2]=h,s[3]=l,s[0]=c,s[1]=l+1;break;case 2:c=r[15],h=r[11],r[12]=r[3],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[7],r[11]=a+3,r[4]=h,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=s[3],s[2]=s[1],s[3]=l,s[0]=c,s[1]=l+1;break;case 3:r[12]=r[0],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[1],r[11]=a+3,r[4]=r[2],r[7]=a+4,r[0]=r[3],r[1]=a+7,r[2]=a+6,r[3]=a+5,s[2]=s[0],s[3]=l,s[0]=s[1],s[1]=l+1}r[5]=e.length,e.push([(-4*e[r[0]][0]-e[r[15]][0]+6*(e[r[4]][0]+e[r[1]][0])-2*(e[r[12]][0]+e[r[3]][0])+3*(e[r[13]][0]+e[r[7]][0]))/9,(-4*e[r[0]][1]-e[r[15]][1]+6*(e[r[4]][1]+e[r[1]][1])-2*(e[r[12]][1]+e[r[3]][1])+3*(e[r[13]][1]+e[r[7]][1]))/9]),r[6]=e.length,e.push([(-4*e[r[3]][0]-e[r[12]][0]+6*(e[r[2]][0]+e[r[7]][0])-2*(e[r[0]][0]+e[r[15]][0])+3*(e[r[4]][0]+e[r[14]][0]))/9,(-4*e[r[3]][1]-e[r[12]][1]+6*(e[r[2]][1]+e[r[7]][1])-2*(e[r[0]][1]+e[r[15]][1])+3*(e[r[4]][1]+e[r[14]][1]))/9]),r[9]=e.length,e.push([(-4*e[r[12]][0]-e[r[3]][0]+6*(e[r[8]][0]+e[r[13]][0])-2*(e[r[0]][0]+e[r[15]][0])+3*(e[r[11]][0]+e[r[1]][0]))/9,(-4*e[r[12]][1]-e[r[3]][1]+6*(e[r[8]][1]+e[r[13]][1])-2*(e[r[0]][1]+e[r[15]][1])+3*(e[r[11]][1]+e[r[1]][1]))/9]),r[10]=e.length,e.push([(-4*e[r[15]][0]-e[r[0]][0]+6*(e[r[11]][0]+e[r[14]][0])-2*(e[r[12]][0]+e[r[3]][0])+3*(e[r[2]][0]+e[r[8]][0]))/9,(-4*e[r[15]][1]-e[r[0]][1]+6*(e[r[11]][1]+e[r[14]][1])-2*(e[r[12]][1]+e[r[3]][1])+3*(e[r[2]][1]+e[r[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(s)})}}_decodeType7Shading(t){const e=this.coords,i=this.colors,r=new Int32Array(16),s=new Int32Array(4);for(;t.hasData;){const o=t.readFlag();if(!(0<=o&&o<=3))throw new n.FormatError("Unknown type7 flag");const a=e.length;for(let i=0,n=0!==o?12:16;i<n;i++)e.push(t.readCoordinate());const l=i.length;for(let e=0,n=0!==o?2:4;e<n;e++)i.push(t.readComponents());let c,h,u,p;switch(o){case 0:r[12]=a+3,r[13]=a+4,r[14]=a+5,r[15]=a+6,r[8]=a+2,r[9]=a+13,r[10]=a+14,r[11]=a+7,r[4]=a+1,r[5]=a+12,r[6]=a+15,r[7]=a+8,r[0]=a,r[1]=a+11,r[2]=a+10,r[3]=a+9,s[2]=l+1,s[3]=l+2,s[0]=l,s[1]=l+3;break;case 1:c=r[12],h=r[13],u=r[14],p=r[15],r[12]=p,r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=u,r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=h,r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=s[2],h=s[3],s[2]=h,s[3]=l,s[0]=c,s[1]=l+1;break;case 2:c=r[15],h=r[11],r[12]=r[3],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[7],r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=h,r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=s[3],s[2]=s[1],s[3]=l,s[0]=c,s[1]=l+1;break;case 3:r[12]=r[0],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[1],r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=r[2],r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=r[3],r[1]=a+7,r[2]=a+6,r[3]=a+5,s[2]=s[0],s[3]=l,s[0]=s[1],s[1]=l+1}this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(s)})}}_buildFigureFromPatch(t){const e=this.figures[t];(0,n.assert)("patch"===e.type,"Unexpected patch mesh figure");const i=this.coords,r=this.colors,s=e.coords,o=e.colors,a=Math.min(i[s[0]][0],i[s[3]][0],i[s[12]][0],i[s[15]][0]),l=Math.min(i[s[0]][1],i[s[3]][1],i[s[12]][1],i[s[15]][1]),c=Math.max(i[s[0]][0],i[s[3]][0],i[s[12]][0],i[s[15]][0]),h=Math.max(i[s[0]][1],i[s[3]][1],i[s[12]][1],i[s[15]][1]);let u=Math.ceil((c-a)*y.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));u=Math.max(y.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(y.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,u));let p=Math.ceil((h-l)*y.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));p=Math.max(y.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(y.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,p));const d=u+1,f=new Int32Array((p+1)*d),g=new Int32Array((p+1)*d);let v=0;const b=new Uint8Array(3),w=new Uint8Array(3),x=r[o[0]],S=r[o[1]],k=r[o[2]],C=r[o[3]],A=m(p),_=m(u);for(let t=0;t<=p;t++){b[0]=(x[0]*(p-t)+k[0]*t)/p|0,b[1]=(x[1]*(p-t)+k[1]*t)/p|0,b[2]=(x[2]*(p-t)+k[2]*t)/p|0,w[0]=(S[0]*(p-t)+C[0]*t)/p|0,w[1]=(S[1]*(p-t)+C[1]*t)/p|0,w[2]=(S[2]*(p-t)+C[2]*t)/p|0;for(let e=0;e<=u;e++,v++){if(!(0!==t&&t!==p||0!==e&&e!==u))continue;let n=0,o=0,a=0;for(let r=0;r<=3;r++)for(let l=0;l<=3;l++,a++){const c=A[t][r]*_[e][l];n+=i[s[a]][0]*c,o+=i[s[a]][1]*c}f[v]=i.length,i.push([n,o]),g[v]=r.length;const l=new Uint8Array(3);l[0]=(b[0]*(u-e)+w[0]*e)/u|0,l[1]=(b[1]*(u-e)+w[1]*e)/u|0,l[2]=(b[2]*(u-e)+w[2]*e)/u|0,r.push(l)}}f[0]=s[0],g[0]=o[0],f[u]=s[3],g[u]=o[1],f[d*p]=s[12],g[d*p]=o[2],f[d*p+u]=s[15],g[d*p+u]=o[3],this.figures[t]={type:"lattice",coords:f,colors:g,verticesPerRow:d}}_updateBounds(){let t=this.coords[0][0],e=this.coords[0][1],i=t,n=e;for(let r=1,s=this.coords.length;r<s;r++){const s=this.coords[r][0],o=this.coords[r][1];t=t>s?s:t,e=e>o?o:e,i=i<s?s:i,n=n<o?o:n}this.bounds=[t,e,i,n]}_packData(){let t,e,i,n;const r=this.coords,s=new Float32Array(2*r.length);for(t=0,i=0,e=r.length;t<e;t++){const e=r[t];s[i++]=e[0],s[i++]=e[1]}this.coords=s;const o=this.colors,a=new Uint8Array(3*o.length);for(t=0,i=0,e=o.length;t<e;t++){const e=o[t];a[i++]=e[0],a[i++]=e[1],a[i++]=e[2]}this.colors=a;const l=this.figures;for(t=0,e=l.length;t<e;t++){const e=l[t],r=e.coords,s=e.colors;for(i=0,n=r.length;i<n;i++)r[i]*=2,s[i]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}}class v extends d{getIR(){return["Dummy"]}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptEvaluator=e.PostScriptCompiler=e.PDFFunctionFactory=void 0,e.isPDFFunction=function(t){let e;if("object"!=typeof t)return!1;if(t instanceof n.Dict)e=t;else{if(!(t instanceof o.BaseStream))return!1;e=t.dict}return e.has("FunctionType")};var n=i(5),r=i(2),s=i(58),o=i(9),a=i(59);function l(t){if(!Array.isArray(t))return null;const e=t.length;for(let i=0;i<e;i++)if("number"!=typeof t[i]){const i=new Array(e);for(let n=0;n<e;n++)i[n]=+t[n];return i}return t}e.PDFFunctionFactory=class{constructor({xref:t,isEvalSupported:e=!0}){this.xref=t,this.isEvalSupported=!1!==e}create(t){const e=this.getCached(t);if(e)return e;const i=c.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:t instanceof n.Ref?this.xref.fetch(t):t});return this._cache(t,i),i}createFromArray(t){const e=this.getCached(t);if(e)return e;const i=c.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:t instanceof n.Ref?this.xref.fetch(t):t});return this._cache(t,i),i}getCached(t){let e;if(t instanceof n.Ref?e=t:t instanceof n.Dict?e=t.objId:t instanceof o.BaseStream&&(e=t.dict&&t.dict.objId),e){const t=this._localFunctionCache.getByRef(e);if(t)return t}return null}_cache(t,e){if(!e)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let i;t instanceof n.Ref?i=t:t instanceof n.Dict?i=t.objId:t instanceof o.BaseStream&&(i=t.dict&&t.dict.objId),i&&this._localFunctionCache.set(null,i,e)}get _localFunctionCache(){return(0,r.shadow)(this,"_localFunctionCache",new a.LocalFunctionCache)}};class c{static getSampleArray(t,e,i,n){let r,s,o=1;for(r=0,s=t.length;r<s;r++)o*=t[r];o*=e;const a=new Array(o);let l=0,c=0;const h=1/(2**i-1),u=n.getBytes((o*i+7)/8);let p=0;for(r=0;r<o;r++){for(;l<i;)c<<=8,c|=u[p++],l+=8;l-=i,a[r]=(c>>l)*h,c&=(1<<l)-1}return a}static parse({xref:t,isEvalSupported:e,fn:i}){const n=i.dict||i;switch(n.get("FunctionType")){case 0:return this.constructSampled({xref:t,isEvalSupported:e,fn:i,dict:n});case 1:break;case 2:return this.constructInterpolated({xref:t,isEvalSupported:e,dict:n});case 3:return this.constructStiched({xref:t,isEvalSupported:e,dict:n});case 4:return this.constructPostScript({xref:t,isEvalSupported:e,fn:i,dict:n})}throw new r.FormatError("Unknown type of function")}static parseArray({xref:t,isEvalSupported:e,fnObj:i}){if(!Array.isArray(i))return this.parse({xref:t,isEvalSupported:e,fn:i});const n=[];for(let r=0,s=i.length;r<s;r++)n.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(i[r])}));return function(t,e,i,r){for(let s=0,o=n.length;s<o;s++)n[s](t,e,i,r+s)}}static constructSampled({xref:t,isEvalSupported:e,fn:i,dict:n}){function s(t){const e=t.length,i=[];let n=0;for(let r=0;r<e;r+=2)i[n++]=[t[r],t[r+1]];return i}function o(t,e,i,n,r){return n+(r-n)/(i-e)*(t-e)}let a=l(n.getArray("Domain")),c=l(n.getArray("Range"));if(!a||!c)throw new r.FormatError("No domain or range");const h=a.length/2,u=c.length/2;a=s(a),c=s(c);const p=l(n.getArray("Size")),d=n.get("BitsPerSample"),f=n.get("Order")||1;1!==f&&(0,r.info)("No support for cubic spline interpolation: "+f);let g=l(n.getArray("Encode"));if(g)g=s(g);else{g=[];for(let t=0;t<h;++t)g.push([0,p[t]-1])}let m=l(n.getArray("Decode"));m=m?s(m):c;const y=this.getSampleArray(p,u,d,i);return function(t,e,i,n){const r=1<<h,s=new Float64Array(r),l=new Uint32Array(r);let d,f;for(f=0;f<r;f++)s[f]=1;let v=u,b=1;for(d=0;d<h;++d){const i=a[d][0],n=a[d][1];let c=o(Math.min(Math.max(t[e+d],i),n),i,n,g[d][0],g[d][1]);const h=p[d];c=Math.min(Math.max(c,0),h-1);const u=c<h-1?Math.floor(c):c-1,m=u+1-c,y=c-u,w=u*v,x=w+v;for(f=0;f<r;f++)f&b?(s[f]*=y,l[f]+=x):(s[f]*=m,l[f]+=w);v*=h,b<<=1}for(f=0;f<u;++f){let t=0;for(d=0;d<r;d++)t+=y[l[d]+f]*s[d];t=o(t,0,1,m[f][0],m[f][1]),i[n+f]=Math.min(Math.max(t,c[f][0]),c[f][1])}}}static constructInterpolated({xref:t,isEvalSupported:e,dict:i}){const n=l(i.getArray("C0"))||[0],r=l(i.getArray("C1"))||[1],s=i.get("N"),o=[];for(let t=0,e=n.length;t<e;++t)o.push(r[t]-n[t]);const a=o.length;return function(t,e,i,r){const l=1===s?t[e]:t[e]**s;for(let t=0;t<a;++t)i[r+t]=n[t]+l*o[t]}}static constructStiched({xref:t,isEvalSupported:e,dict:i}){const n=l(i.getArray("Domain"));if(!n)throw new r.FormatError("No domain");if(1!=n.length/2)throw new r.FormatError("Bad domain for stiched function");const s=i.get("Functions"),o=[];for(let i=0,n=s.length;i<n;++i)o.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(s[i])}));const a=l(i.getArray("Bounds")),c=l(i.getArray("Encode")),h=new Float32Array(1);return function(t,e,i,r){const s=function(t,e,i){return t>i?t=i:t<e&&(t=e),t}(t[e],n[0],n[1]),l=a.length;let u;for(u=0;u<l&&!(s<a[u]);++u);let p=n[0];u>0&&(p=a[u-1]);let d=n[1];u<a.length&&(d=a[u]);const f=c[2*u],g=c[2*u+1];h[0]=p===d?f:f+(s-p)*(g-f)/(d-p),o[u](h,0,i,r)}}static constructPostScript({xref:t,isEvalSupported:e,fn:i,dict:n}){const o=l(n.getArray("Domain")),a=l(n.getArray("Range"));if(!o)throw new r.FormatError("No domain.");if(!a)throw new r.FormatError("No range.");const c=new s.PostScriptLexer(i),h=new s.PostScriptParser(c).parse();if(e&&r.FeatureTest.isEvalSupported){const t=(new p).compile(h,o,a);if(t)return new Function("src","srcOffset","dest","destOffset",t)}(0,r.info)("Unable to compile PS function");const d=a.length>>1,f=o.length>>1,g=new u(h),m=Object.create(null);let y=8192;const v=new Float32Array(f);return function(t,e,i,n){let r,s,o="";const l=v;for(r=0;r<f;r++)s=t[e+r],l[r]=s,o+=s+"_";const c=m[o];if(void 0!==c)return void i.set(c,n);const h=new Float32Array(d),u=g.execute(l),p=u.length-d;for(r=0;r<d;r++){s=u[p+r];let t=a[2*r];s<t?s=t:(t=a[2*r+1],s>t&&(s=t)),h[r]=s}y>0&&(y--,m[o]=h),i.set(h,n)}}}class h{static get MAX_STACK_SIZE(){return(0,r.shadow)(this,"MAX_STACK_SIZE",100)}constructor(t){this.stack=t?Array.prototype.slice.call(t,0):[]}push(t){if(this.stack.length>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(t)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(t){if(this.stack.length+t>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const e=this.stack;for(let i=e.length-t,n=t-1;n>=0;n--,i++)e.push(e[i])}index(t){this.push(this.stack[this.stack.length-t-1])}roll(t,e){const i=this.stack,n=i.length-t,r=i.length-1,s=n+(e-Math.floor(e/t)*t);for(let t=n,e=r;t<e;t++,e--){const n=i[t];i[t]=i[e],i[e]=n}for(let t=n,e=s-1;t<e;t++,e--){const n=i[t];i[t]=i[e],i[e]=n}for(let t=s,e=r;t<e;t++,e--){const n=i[t];i[t]=i[e],i[e]=n}}}class u{constructor(t){this.operators=t}execute(t){const e=new h(t);let i=0;const n=this.operators,s=n.length;let o,a,l;for(;i<s;)if(o=n[i++],"number"!=typeof o)switch(o){case"jz":l=e.pop(),a=e.pop(),a||(i=l);break;case"j":a=e.pop(),i=a;break;case"abs":a=e.pop(),e.push(Math.abs(a));break;case"add":l=e.pop(),a=e.pop(),e.push(a+l);break;case"and":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a&&l):e.push(a&l);break;case"atan":a=e.pop(),e.push(Math.atan(a));break;case"bitshift":l=e.pop(),a=e.pop(),a>0?e.push(a<<l):e.push(a>>l);break;case"ceiling":a=e.pop(),e.push(Math.ceil(a));break;case"copy":a=e.pop(),e.copy(a);break;case"cos":a=e.pop(),e.push(Math.cos(a));break;case"cvi":a=0|e.pop(),e.push(a);break;case"cvr":break;case"div":l=e.pop(),a=e.pop(),e.push(a/l);break;case"dup":e.copy(1);break;case"eq":l=e.pop(),a=e.pop(),e.push(a===l);break;case"exch":e.roll(2,1);break;case"exp":l=e.pop(),a=e.pop(),e.push(a**l);break;case"false":e.push(!1);break;case"floor":a=e.pop(),e.push(Math.floor(a));break;case"ge":l=e.pop(),a=e.pop(),e.push(a>=l);break;case"gt":l=e.pop(),a=e.pop(),e.push(a>l);break;case"idiv":l=e.pop(),a=e.pop(),e.push(a/l|0);break;case"index":a=e.pop(),e.index(a);break;case"le":l=e.pop(),a=e.pop(),e.push(a<=l);break;case"ln":a=e.pop(),e.push(Math.log(a));break;case"log":a=e.pop(),e.push(Math.log(a)/Math.LN10);break;case"lt":l=e.pop(),a=e.pop(),e.push(a<l);break;case"mod":l=e.pop(),a=e.pop(),e.push(a%l);break;case"mul":l=e.pop(),a=e.pop(),e.push(a*l);break;case"ne":l=e.pop(),a=e.pop(),e.push(a!==l);break;case"neg":a=e.pop(),e.push(-a);break;case"not":a=e.pop(),"boolean"==typeof a?e.push(!a):e.push(~a);break;case"or":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a||l):e.push(a|l);break;case"pop":e.pop();break;case"roll":l=e.pop(),a=e.pop(),e.roll(a,l);break;case"round":a=e.pop(),e.push(Math.round(a));break;case"sin":a=e.pop(),e.push(Math.sin(a));break;case"sqrt":a=e.pop(),e.push(Math.sqrt(a));break;case"sub":l=e.pop(),a=e.pop(),e.push(a-l);break;case"true":e.push(!0);break;case"truncate":a=e.pop(),a=a<0?Math.ceil(a):Math.floor(a),e.push(a);break;case"xor":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a!==l):e.push(a^l);break;default:throw new r.FormatError(`Unknown operator ${o}`)}else e.push(o);return e.stack}}e.PostScriptEvaluator=u;const p=function(){class t{constructor(t){this.type=t}visit(t){(0,r.unreachable)("abstract method")}}class e extends t{constructor(t,e,i){super("args"),this.index=t,this.min=e,this.max=i}visit(t){t.visitArgument(this)}}class i extends t{constructor(t){super("literal"),this.number=t,this.min=t,this.max=t}visit(t){t.visitLiteral(this)}}class n extends t{constructor(t,e,i,n,r){super("binary"),this.op=t,this.arg1=e,this.arg2=i,this.min=n,this.max=r}visit(t){t.visitBinaryOperation(this)}}class s extends t{constructor(t,e){super("max"),this.arg=t,this.min=t.min,this.max=e}visit(t){t.visitMin(this)}}class o extends t{constructor(t,e,i){super("var"),this.index=t,this.min=e,this.max=i}visit(t){t.visitVariable(this)}}class a extends t{constructor(t,e){super("definition"),this.variable=t,this.arg=e}visit(t){t.visitVariableDefinition(this)}}class l{constructor(){this.parts=[]}visitArgument(t){this.parts.push("Math.max(",t.min,", Math.min(",t.max,", src[srcOffset + ",t.index,"]))")}visitVariable(t){this.parts.push("v",t.index)}visitLiteral(t){this.parts.push(t.number)}visitBinaryOperation(t){this.parts.push("("),t.arg1.visit(this),this.parts.push(" ",t.op," "),t.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(t){this.parts.push("var "),t.variable.visit(this),this.parts.push(" = "),t.arg.visit(this),this.parts.push(";")}visitMin(t){this.parts.push("Math.min("),t.arg.visit(this),this.parts.push(", ",t.max,")")}toString(){return this.parts.join("")}}function c(t,e){return"literal"===e.type&&0===e.number?t:"literal"===t.type&&0===t.number?e:"literal"===e.type&&"literal"===t.type?new i(t.number+e.number):new n("+",t,e,t.min+e.min,t.max+e.max)}function h(t,e){if("literal"===e.type){if(0===e.number)return new i(0);if(1===e.number)return t;if("literal"===t.type)return new i(t.number*e.number)}if("literal"===t.type){if(0===t.number)return new i(0);if(1===t.number)return e}const r=Math.min(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max),s=Math.max(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max);return new n("*",t,e,r,s)}function u(t,e){if("literal"===e.type){if(0===e.number)return t;if("literal"===t.type)return new i(t.number-e.number)}return"binary"===e.type&&"-"===e.op&&"literal"===t.type&&1===t.number&&"literal"===e.arg1.type&&1===e.arg1.number?e.arg2:new n("-",t,e,t.min-e.max,t.max-e.min)}function p(t,e){return t.min>=e?new i(e):t.max<=e?t:new s(t,e)}return class{compile(t,n,r){const s=[],d=[],f=n.length>>1,g=r.length>>1;let m,y,v,b,w,x,S,k,C=0;for(let t=0;t<f;t++)s.push(new e(t,n[2*t],n[2*t+1]));for(let e=0,n=t.length;e<n;e++)if(k=t[e],"number"!=typeof k)switch(k){case"add":if(s.length<2)return null;b=s.pop(),v=s.pop(),s.push(c(v,b));break;case"cvr":if(s.length<1)return null;break;case"mul":if(s.length<2)return null;b=s.pop(),v=s.pop(),s.push(h(v,b));break;case"sub":if(s.length<2)return null;b=s.pop(),v=s.pop(),s.push(u(v,b));break;case"exch":if(s.length<2)return null;w=s.pop(),x=s.pop(),s.push(w,x);break;case"pop":if(s.length<1)return null;s.pop();break;case"index":if(s.length<1)return null;if(v=s.pop(),"literal"!==v.type)return null;if(m=v.number,m<0||!Number.isInteger(m)||s.length<m)return null;if(w=s[s.length-m-1],"literal"===w.type||"var"===w.type){s.push(w);break}S=new o(C++,w.min,w.max),s[s.length-m-1]=S,s.push(S),d.push(new a(S,w));break;case"dup":if(s.length<1)return null;if("number"==typeof t[e+1]&&"gt"===t[e+2]&&t[e+3]===e+7&&"jz"===t[e+4]&&"pop"===t[e+5]&&t[e+6]===t[e+1]){v=s.pop(),s.push(p(v,t[e+1])),e+=6;break}if(w=s[s.length-1],"literal"===w.type||"var"===w.type){s.push(w);break}S=new o(C++,w.min,w.max),s[s.length-1]=S,s.push(S),d.push(new a(S,w));break;case"roll":if(s.length<2)return null;if(b=s.pop(),v=s.pop(),"literal"!==b.type||"literal"!==v.type)return null;if(y=b.number,m=v.number,m<=0||!Number.isInteger(m)||!Number.isInteger(y)||s.length<m)return null;if(y=(y%m+m)%m,0===y)break;Array.prototype.push.apply(s,s.splice(s.length-m,m-y));break;default:return null}else s.push(new i(k));if(s.length!==g)return null;const A=[];for(const t of d){const e=new l;t.visit(e),A.push(e.toString())}for(let t=0,e=s.length;t<e;t++){const e=s[t],i=new l;e.visit(i);const n=r[2*t],o=r[2*t+1],a=[i.toString()];n>e.min&&(a.unshift("Math.max(",n,", "),a.push(")")),o<e.max&&(a.unshift("Math.min(",o,", "),a.push(")")),a.unshift("dest[destOffset + ",t,"] = "),a.push(";"),A.push(a.join(""))}return A.join("\n")}}}();e.PostScriptCompiler=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptParser=e.PostScriptLexer=void 0;var n=i(2),r=i(5),s=i(8);e.PostScriptParser=class{constructor(t){this.lexer=t,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(t){return this.token.type===t&&(this.nextToken(),!0)}expect(t){if(this.accept(t))return!0;throw new n.FormatError(`Unexpected symbol: found ${this.token.type} expected ${t}.`)}parse(){return this.nextToken(),this.expect(o.LBRACE),this.parseBlock(),this.expect(o.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(o.NUMBER))this.operators.push(this.prev.value);else if(this.accept(o.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(o.LBRACE))return;this.parseCondition()}}parseCondition(){const t=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(o.RBRACE),this.accept(o.IF))this.operators[t]=this.operators.length,this.operators[t+1]="jz";else{if(!this.accept(o.LBRACE))throw new n.FormatError("PS Function: error parsing conditional.");{const e=this.operators.length;this.operators.push(null,null);const i=this.operators.length;this.parseBlock(),this.expect(o.RBRACE),this.expect(o.IFELSE),this.operators[e]=this.operators.length,this.operators[e+1]="j",this.operators[t]=i,this.operators[t+1]="jz"}}}};const o={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class a{static get opCache(){return(0,n.shadow)(this,"opCache",Object.create(null))}constructor(t,e){this.type=t,this.value=e}static getOperator(t){const e=a.opCache[t];return e||(a.opCache[t]=new a(o.OPERATOR,t))}static get LBRACE(){return(0,n.shadow)(this,"LBRACE",new a(o.LBRACE,"{"))}static get RBRACE(){return(0,n.shadow)(this,"RBRACE",new a(o.RBRACE,"}"))}static get IF(){return(0,n.shadow)(this,"IF",new a(o.IF,"IF"))}static get IFELSE(){return(0,n.shadow)(this,"IFELSE",new a(o.IFELSE,"IFELSE"))}}e.PostScriptLexer=class{constructor(t){this.stream=t,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(e<0)return r.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,s.isWhiteSpace)(e))break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new a(o.NUMBER,this.getNumber());case 123:return this.nextChar(),a.LBRACE;case 125:return this.nextChar(),a.RBRACE}const i=this.strBuf;for(i.length=0,i[0]=String.fromCharCode(e);(e=this.nextChar())>=0&&(e>=65&&e<=90||e>=97&&e<=122);)i.push(String.fromCharCode(e));const n=i.join("");switch(n.toLowerCase()){case"if":return a.IF;case"ifelse":return a.IFELSE;default:return a.getOperator(n)}}getNumber(){let t=this.currentChar;const e=this.strBuf;for(e.length=0,e[0]=String.fromCharCode(t);(t=this.nextChar())>=0&&(t>=48&&t<=57||45===t||46===t);)e.push(String.fromCharCode(t));const i=parseFloat(e.join(""));if(isNaN(i))throw new n.FormatError(`Invalid floating point number: ${i}`);return i}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocalTilingPatternCache=e.LocalImageCache=e.LocalGStateCache=e.LocalFunctionCache=e.LocalColorSpaceCache=e.GlobalImageCache=void 0;var n=i(2),r=i(5);class s{constructor(t){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=!0===(t&&t.onlyRefs),this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new r.RefSetCache}getByName(t){this._onlyRefs&&(0,n.unreachable)("Should not call `getByName` method.");const e=this._nameRefMap.get(t);return e?this.getByRef(e):this._imageMap.get(t)||null}getByRef(t){return this._imageCache.get(t)||null}set(t,e,i){(0,n.unreachable)("Abstract method `set` called.")}}e.LocalImageCache=class extends s{set(t,e=null,i){if("string"!=typeof t)throw new Error('LocalImageCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalColorSpaceCache=class extends s{set(t=null,e=null,i){if("string"!=typeof t&&!e)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(e){if(this._imageCache.has(e))return;return null!==t&&this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalFunctionCache=class extends s{constructor(t){super({onlyRefs:!0})}set(t=null,e,i){if(!e)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,i)}},e.LocalGStateCache=class extends s{set(t,e=null,i){if("string"!=typeof t)throw new Error('LocalGStateCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,i)}this._imageMap.has(t)||this._imageMap.set(t,i)}},e.LocalTilingPatternCache=class extends s{constructor(t){super({onlyRefs:!0})}set(t=null,e,i){if(!e)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,i)}};class o{static get NUM_PAGES_THRESHOLD(){return(0,n.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MIN_IMAGES_TO_CACHE(){return(0,n.shadow)(this,"MIN_IMAGES_TO_CACHE",10)}static get MAX_BYTE_SIZE(){return(0,n.shadow)(this,"MAX_BYTE_SIZE",4e7)}constructor(){this._refCache=new r.RefSetCache,this._imageCache=new r.RefSetCache}get _byteSize(){let t=0;for(const e of this._imageCache)t+=e.byteSize;return t}get _cacheLimitReached(){return!(this._imageCache.size<o.MIN_IMAGES_TO_CACHE||this._byteSize<o.MAX_BYTE_SIZE)}shouldCache(t,e){const i=this._refCache.get(t);return!((i?i.size+(i.has(e)?0:1):1)<o.NUM_PAGES_THRESHOLD||!this._imageCache.has(t)&&this._cacheLimitReached)}addPageIndex(t,e){let i=this._refCache.get(t);i||(i=new Set,this._refCache.put(t,i)),i.add(e)}addByteSize(t,e){const i=this._imageCache.get(t);i&&(i.byteSize||(i.byteSize=e))}getData(t,e){const i=this._refCache.get(t);if(!i)return null;if(i.size<o.NUM_PAGES_THRESHOLD)return null;const n=this._imageCache.get(t);return n?(i.add(e),n):null}setData(t,e){if(!this._refCache.has(t))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');this._imageCache.has(t)||(this._cacheLimitReached?(0,n.warn)("GlobalImageCache.setData - cache limit reached."):this._imageCache.put(t,e))}clear(t=!1){t||this._refCache.clear(),this._imageCache.clear()}}e.GlobalImageCache=o},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bidi=function(t,e=-1,i=!1){let f=!0;const g=t.length;if(0===g||i)return u(t,f,i);p.length=g,d.length=g;let m,y,v=0;for(m=0;m<g;++m){p[m]=t.charAt(m);const e=t.charCodeAt(m);let i="L";e<=255?i=r[e]:1424<=e&&e<=1524?i="R":1536<=e&&e<=1791?(i=s[255&e],i||(0,n.warn)("Bidi: invalid Unicode character "+e.toString(16))):1792<=e&&e<=2220&&(i="AL"),"R"!==i&&"AL"!==i&&"AN"!==i||v++,d[m]=i}if(0===v)return f=!0,u(t,f);-1===e&&(v/g<.3&&g>4?(f=!0,e=0):(f=!1,e=1));const b=[];for(m=0;m<g;++m)b[m]=e;const w=o(e)?"R":"L",x=w,S=x;let k,C=x;for(m=0;m<g;++m)"NSM"===d[m]?d[m]=C:C=d[m];for(C=x,m=0;m<g;++m)k=d[m],"EN"===k?d[m]="AL"===C?"AN":"EN":"R"!==k&&"L"!==k&&"AL"!==k||(C=k);for(m=0;m<g;++m)k=d[m],"AL"===k&&(d[m]="R");for(m=1;m<g-1;++m)"ES"===d[m]&&"EN"===d[m-1]&&"EN"===d[m+1]&&(d[m]="EN"),"CS"!==d[m]||"EN"!==d[m-1]&&"AN"!==d[m-1]||d[m+1]!==d[m-1]||(d[m]=d[m-1]);for(m=0;m<g;++m)if("EN"===d[m]){for(let t=m-1;t>=0&&"ET"===d[t];--t)d[t]="EN";for(let t=m+1;t<g&&"ET"===d[t];++t)d[t]="EN"}for(m=0;m<g;++m)k=d[m],"WS"!==k&&"ES"!==k&&"ET"!==k&&"CS"!==k||(d[m]="ON");for(C=x,m=0;m<g;++m)k=d[m],"EN"===k?d[m]="L"===C?"L":"EN":"R"!==k&&"L"!==k||(C=k);for(m=0;m<g;++m)if("ON"===d[m]){const t=l(d,m+1,"ON");let e=x;m>0&&(e=d[m-1]);let i=S;t+1<g&&(i=d[t+1]),"L"!==e&&(e="R"),"L"!==i&&(i="R"),e===i&&c(d,m,t,e),m=t-1}for(m=0;m<g;++m)"ON"===d[m]&&(d[m]=w);for(m=0;m<g;++m)k=d[m],a(b[m])?"R"===k?b[m]+=1:"AN"!==k&&"EN"!==k||(b[m]+=2):"L"!==k&&"AN"!==k&&"EN"!==k||(b[m]+=1);let A,_=-1,T=99;for(m=0,y=b.length;m<y;++m)A=b[m],_<A&&(_=A),T>A&&o(A)&&(T=A);for(A=_;A>=T;--A){let t=-1;for(m=0,y=b.length;m<y;++m)b[m]<A?t>=0&&(h(p,t,m),t=-1):t<0&&(t=m);t>=0&&h(p,t,b.length)}for(m=0,y=p.length;m<y;++m){const t=p[m];"<"!==t&&">"!==t||(p[m]="")}return u(p.join(""),f)};var n=i(2);const r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],s=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function o(t){return 0!=(1&t)}function a(t){return 0==(1&t)}function l(t,e,i){let n,r;for(n=e,r=t.length;n<r;++n)if(t[n]!==i)return n;return n}function c(t,e,i,n){for(let r=e;r<i;++r)t[r]=n}function h(t,e,i){for(let n=e,r=i-1;n<r;++n,--r){const e=t[n];t[n]=t[r],t[r]=e}}function u(t,e,i=!1){let n="ltr";return i?n="ttb":e||(n="rtl"),{str:t,dir:n}}const p=[],d=[]},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=i(2);const r=3285377520,s=4294901760,o=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:r,this.h2=t?4294967295&t:r}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,r=t.length;n<r;n++){const r=t.charCodeAt(n);r<=255?e[i++]=r:(e[i++]=r>>>8,e[i++]=255&r)}}else{if(!(0,n.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),i=e.byteLength}const r=i>>2,a=i-4*r,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,u=this.h1,p=this.h2;const d=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<r;t++)1&t?(c=l[t],c=c*d&s|c*g&o,c=c<<15|c>>>17,c=c*f&s|c*m&o,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*d&s|h*g&o,h=h<<15|h>>>17,h=h*f&s|h*m&o,p^=h,p=p<<13|p>>>19,p=5*p+3864292196);switch(c=0,a){case 3:c^=e[4*r+2]<<16;case 2:c^=e[4*r+1]<<8;case 1:c^=e[4*r],c=c*d&s|c*g&o,c=c<<15|c>>>17,c=c*f&s|c*m&o,1&r?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1,t=3981806797*t&s|36045*t&o,e=4283543511*e&s|(2950163797*(e<<16|t>>>16)&s)>>>16,t^=e>>>1,t=444984403*t&s|60499*t&o,e=3301882366*e&s|(3120437893*(e<<16|t>>>16)&s)>>>16,t^=e>>>1;const i=(t>>>0).toString(16),n=(e>>>0).toString(16);return i.padStart(8,"0")+n.padStart(8,"0")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorList=void 0;var n=i(2);function r(t,e,i,n,r){let s=t;for(let t=0,i=e.length-1;t<i;t++){const i=e[t];s=s[i]||(s[i]=[])}s[e[e.length-1]]={checkFn:i,iterateFn:n,processFn:r}}const s=[];r(s,[n.OPS.save,n.OPS.transform,n.OPS.paintInlineImageXObject,n.OPS.restore],null,(function(t,e){const i=t.fnArray,r=(e-(t.iCurr-3))%4;switch(r){case 0:return i[e]===n.OPS.save;case 1:return i[e]===n.OPS.transform;case 2:return i[e]===n.OPS.paintInlineImageXObject;case 3:return i[e]===n.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${r}`)}),(function(t,e){const i=t.fnArray,r=t.argsArray,s=t.iCurr,o=s-3,a=s-2,l=s-1,c=Math.min(Math.floor((e-o)/4),200);if(c<10)return e-(e-o)%4;let h=0;const u=[];let p=0,d=1,f=1;for(let t=0;t<c;t++){const e=r[a+(t<<2)],i=r[l+(t<<2)][0];d+i.width>1e3&&(h=Math.max(h,d),f+=p+2,d=0,p=0),u.push({transform:e,x:d,y:f,w:i.width,h:i.height}),d+=i.width+2,p=Math.max(p,i.height)}const g=Math.max(h,d)+1,m=f+p+1,y=new Uint8Array(g*m*4),v=g<<2;for(let t=0;t<c;t++){const e=r[l+(t<<2)][0].data,i=u[t].w<<2;let n=0,s=u[t].x+u[t].y*g<<2;y.set(e.subarray(0,i),s-v);for(let r=0,o=u[t].h;r<o;r++)y.set(e.subarray(n,n+i),s),n+=i,s+=v;for(y.set(e.subarray(n-i,n),s);s>=0;)e[s-4]=e[s],e[s-3]=e[s+1],e[s-2]=e[s+2],e[s-1]=e[s+3],e[s+i]=e[s+i-4],e[s+i+1]=e[s+i-3],e[s+i+2]=e[s+i-2],e[s+i+3]=e[s+i-1],s-=v}return i.splice(o,4*c,n.OPS.paintInlineImageXObjectGroup),r.splice(o,4*c,[{width:g,height:m,kind:n.ImageKind.RGBA_32BPP,data:y},u]),o+1})),r(s,[n.OPS.save,n.OPS.transform,n.OPS.paintImageMaskXObject,n.OPS.restore],null,(function(t,e){const i=t.fnArray,r=(e-(t.iCurr-3))%4;switch(r){case 0:return i[e]===n.OPS.save;case 1:return i[e]===n.OPS.transform;case 2:return i[e]===n.OPS.paintImageMaskXObject;case 3:return i[e]===n.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${r}`)}),(function(t,e){const i=t.fnArray,r=t.argsArray,s=t.iCurr,o=s-3,a=s-2,l=s-1;let c=Math.floor((e-o)/4);if(c<10)return e-(e-o)%4;let h,u,p=!1;const d=r[l][0],f=r[a][0],g=r[a][1],m=r[a][2],y=r[a][3];if(g===m){p=!0,h=a+4;let t=l+4;for(let e=1;e<c;e++,h+=4,t+=4)if(u=r[h],r[t][0]!==d||u[0]!==f||u[1]!==g||u[2]!==m||u[3]!==y){e<10?p=!1:c=e;break}}if(p){c=Math.min(c,1e3);const t=new Float32Array(2*c);h=a;for(let e=0;e<c;e++,h+=4)u=r[h],t[e<<1]=u[4],t[1+(e<<1)]=u[5];i.splice(o,4*c,n.OPS.paintImageMaskXObjectRepeat),r.splice(o,4*c,[d,f,g,m,y,t])}else{c=Math.min(c,100);const t=[];for(let e=0;e<c;e++){u=r[a+(e<<2)];const i=r[l+(e<<2)][0];t.push({data:i.data,width:i.width,height:i.height,interpolate:i.interpolate,count:i.count,transform:u})}i.splice(o,4*c,n.OPS.paintImageMaskXObjectGroup),r.splice(o,4*c,[t])}return o+1})),r(s,[n.OPS.save,n.OPS.transform,n.OPS.paintImageXObject,n.OPS.restore],(function(t){const e=t.argsArray,i=t.iCurr-2;return 0===e[i][1]&&0===e[i][2]}),(function(t,e){const i=t.fnArray,r=t.argsArray,s=(e-(t.iCurr-3))%4;switch(s){case 0:return i[e]===n.OPS.save;case 1:if(i[e]!==n.OPS.transform)return!1;const s=t.iCurr-2,o=r[s][0],a=r[s][3];return r[e][0]===o&&0===r[e][1]&&0===r[e][2]&&r[e][3]===a;case 2:if(i[e]!==n.OPS.paintImageXObject)return!1;const l=r[t.iCurr-1][0];return r[e][0]===l;case 3:return i[e]===n.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${s}`)}),(function(t,e){const i=t.fnArray,r=t.argsArray,s=t.iCurr,o=s-3,a=s-2,l=r[s-1][0],c=r[a][0],h=r[a][3],u=Math.min(Math.floor((e-o)/4),1e3);if(u<3)return e-(e-o)%4;const p=new Float32Array(2*u);let d=a;for(let t=0;t<u;t++,d+=4){const e=r[d];p[t<<1]=e[4],p[1+(t<<1)]=e[5]}const f=[l,c,h,p];return i.splice(o,4*u,n.OPS.paintImageXObjectRepeat),r.splice(o,4*u,f),o+1})),r(s,[n.OPS.beginText,n.OPS.setFont,n.OPS.setTextMatrix,n.OPS.showText,n.OPS.endText],null,(function(t,e){const i=t.fnArray,r=t.argsArray,s=(e-(t.iCurr-4))%5;switch(s){case 0:return i[e]===n.OPS.beginText;case 1:return i[e]===n.OPS.setFont;case 2:return i[e]===n.OPS.setTextMatrix;case 3:if(i[e]!==n.OPS.showText)return!1;const s=t.iCurr-3,o=r[s][0],a=r[s][1];return r[e][0]===o&&r[e][1]===a;case 4:return i[e]===n.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${s}`)}),(function(t,e){const i=t.fnArray,n=t.argsArray,r=t.iCurr,s=r-4,o=r-3,a=r-2,l=r-1,c=r,h=n[o][0],u=n[o][1];let p=Math.min(Math.floor((e-s)/5),1e3);if(p<3)return e-(e-s)%5;let d=s;s>=4&&i[s-4]===i[o]&&i[s-3]===i[a]&&i[s-2]===i[l]&&i[s-1]===i[c]&&n[s-4][0]===h&&n[s-4][1]===u&&(p++,d-=5);let f=d+4;for(let t=1;t<p;t++)i.splice(f,3),n.splice(f,3),f+=2;return f+1}));class o{constructor(t){this.queue=t}_optimize(){}push(t,e){this.queue.fnArray.push(t),this.queue.argsArray.push(e),this._optimize()}flush(){}reset(){}}class a extends o{constructor(t){super(t),this.state=null,this.context={iCurr:0,fnArray:t.fnArray,argsArray:t.argsArray},this.match=null,this.lastProcessed=0}_optimize(){const t=this.queue.fnArray;let e=this.lastProcessed,i=t.length,n=this.state,r=this.match;if(!n&&!r&&e+1===i&&!s[t[e]])return void(this.lastProcessed=i);const o=this.context;for(;e<i;){if(r){if((0,r.iterateFn)(o,e)){e++;continue}if(e=(0,r.processFn)(o,e+1),i=t.length,r=null,n=null,e>=i)break}n=(n||s)[t[e]],n&&!Array.isArray(n)?(o.iCurr=e,e++,!n.checkFn||(0,n.checkFn)(o)?(r=n,n=null):n=null):e++}this.state=n,this.match=r,this.lastProcessed=e}flush(){for(;this.match;){const t=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,t),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}}class l{static get CHUNK_SIZE(){return(0,n.shadow)(this,"CHUNK_SIZE",1e3)}static get CHUNK_SIZE_ABOUT(){return(0,n.shadow)(this,"CHUNK_SIZE_ABOUT",this.CHUNK_SIZE-5)}constructor(t=0,e){this._streamSink=e,this.fnArray=[],this.argsArray=[],!e||t&n.RenderingIntentFlag.OPLIST?this.optimizer=new o(this):this.optimizer=new a(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=e?null:Promise.resolve()}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(t,e){this.optimizer.push(t,e),this.weight++,this._streamSink&&(this.weight>=l.CHUNK_SIZE||this.weight>=l.CHUNK_SIZE_ABOUT&&(t===n.OPS.restore||t===n.OPS.endText))&&this.flush()}addImageOps(t,e,i){void 0!==i&&this.addOp(n.OPS.beginMarkedContentProps,["OC",i]),this.addOp(t,e),void 0!==i&&this.addOp(n.OPS.endMarkedContent,[])}addDependency(t){this.dependencies.has(t)||(this.dependencies.add(t),this.addOp(n.OPS.dependency,[t]))}addDependencies(t){for(const e of t)this.addDependency(e)}addOpList(t){if(t instanceof l){for(const e of t.dependencies)this.dependencies.add(e);for(let e=0,i=t.length;e<i;e++)this.addOp(t.fnArray[e],t.argsArray[e])}else(0,n.warn)('addOpList - ignoring invalid "opList" parameter.')}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const t=[],{fnArray:e,argsArray:i,length:r}=this;for(let s=0;s<r;s++)switch(e[s]){case n.OPS.paintInlineImageXObject:case n.OPS.paintInlineImageXObjectGroup:case n.OPS.paintImageMaskXObject:const e=i[s][0];!e.cached&&e.data&&e.data.buffer instanceof ArrayBuffer&&t.push(e.data.buffer)}return t}flush(t=!1){this.optimizer.flush();const e=this.length;this._totalLength+=e,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:t,length:e},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}}e.OperatorList=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFImage=void 0;var n=i(2),r=i(64),s=i(9),o=i(24),a=i(29),l=i(37),c=i(40),h=i(5);function u(t,e,i,n){return(t=e+t*i)<0?t=0:t>n&&(t=n),t}function p(t,e,i,n,r,s){const o=r*s;let a;a=e<=8?new Uint8Array(o):e<=16?new Uint16Array(o):new Uint32Array(o);const l=i/r,c=n/s;let h,u,p,d,f=0;const g=new Uint16Array(r),m=i;for(h=0;h<r;h++)g[h]=Math.floor(h*l);for(h=0;h<s;h++)for(p=Math.floor(h*c)*m,u=0;u<r;u++)d=p+g[u],a[f++]=t[d];return a}class d{constructor({xref:t,res:e,image:i,isInline:r=!1,smask:a=null,mask:l=null,isMask:u=!1,pdfFunctionFactory:p,localColorSpaceCache:f}){this.image=i;const g=i.dict,m=g.get("F","Filter");if(m instanceof h.Name)switch(m.name){case"JPXDecode":const t=new c.JpxImage;t.parseImageProperties(i.stream),i.stream.reset(),i.width=t.width,i.height=t.height,i.bitsPerComponent=t.bitsPerComponent,i.numComps=t.componentsCount;break;case"JBIG2Decode":i.bitsPerComponent=1,i.numComps=1}let y=g.get("W","Width"),v=g.get("H","Height");if(Number.isInteger(i.width)&&i.width>0&&Number.isInteger(i.height)&&i.height>0&&(i.width!==y||i.height!==v)&&((0,n.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),y=i.width,v=i.height),y<1||v<1)throw new n.FormatError(`Invalid image width: ${y} or height: ${v}`);this.width=y,this.height=v,this.interpolate=g.get("I","Interpolate"),this.imageMask=g.get("IM","ImageMask")||!1,this.matte=g.get("Matte")||!1;let b=i.bitsPerComponent;if(!b&&(b=g.get("BPC","BitsPerComponent"),!b)){if(!this.imageMask)throw new n.FormatError(`Bits per component missing in image: ${this.imageMask}`);b=1}if(this.bpc=b,!this.imageMask){let s=g.getRaw("CS")||g.getRaw("ColorSpace");if(!s)switch((0,n.info)("JPX images (which do not require color spaces)"),i.numComps){case 1:s=h.Name.get("DeviceGray");break;case 3:s=h.Name.get("DeviceRGB");break;case 4:s=h.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${i.numComps} color components not supported.`)}this.colorSpace=o.ColorSpace.parse({cs:s,xref:t,resources:r?e:null,pdfFunctionFactory:p,localColorSpaceCache:f}),this.numComps=this.colorSpace.numComps}if(this.decode=g.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,b)||u&&!o.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const t=(1<<b)-1;this.decodeCoefficients=[],this.decodeAddends=[];const e=this.colorSpace&&"Indexed"===this.colorSpace.name;for(let i=0,n=0;i<this.decode.length;i+=2,++n){const r=this.decode[i],s=this.decode[i+1];this.decodeCoefficients[n]=e?(s-r)/t:s-r,this.decodeAddends[n]=e?r:t*r}}a?this.smask=new d({xref:t,res:e,image:a,isInline:r,pdfFunctionFactory:p,localColorSpaceCache:f}):l&&(l instanceof s.BaseStream?l.dict.get("IM","ImageMask")?this.mask=new d({xref:t,res:e,image:l,isInline:r,isMask:!0,pdfFunctionFactory:p,localColorSpaceCache:f}):(0,n.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=l)}static async buildImage({xref:t,res:e,image:i,isInline:r=!1,pdfFunctionFactory:o,localColorSpaceCache:a}){const l=i;let c=null,h=null;const u=i.dict.get("SMask"),p=i.dict.get("Mask");return u?u instanceof s.BaseStream?c=u:(0,n.warn)("Unsupported /SMask format."):p&&(p instanceof s.BaseStream||Array.isArray(p)?h=p:(0,n.warn)("Unsupported /Mask format.")),new d({xref:t,res:e,image:l,isInline:r,smask:c,mask:h,pdfFunctionFactory:o,localColorSpaceCache:a})}static createRawMask({imgArray:t,width:e,height:i,imageIsFromDecodeStream:n,inverseDecode:r,interpolate:s}){const o=(e+7>>3)*i,a=t.byteLength;let l,c;if(!n||r&&o!==a?r?(l=new Uint8Array(o),l.set(t),l.fill(255,a)):l=new Uint8Array(t):l=t,r)for(c=0;c<a;c++)l[c]^=255;return{data:l,width:e,height:i,interpolate:s}}static createMask({imgArray:t,width:e,height:i,imageIsFromDecodeStream:s,inverseDecode:o,interpolate:a}){const l=1===e&&1===i&&o===(0===t.length||!!(128&t[0]));if(l)return{isSingleOpaquePixel:l};if(n.FeatureTest.isOffscreenCanvasSupported){const n=new OffscreenCanvas(e,i),s=n.getContext("2d"),l=s.createImageData(e,i);return(0,r.applyMaskImageData)({src:t,dest:l.data,width:e,height:i,inverseDecode:o}),s.putImageData(l,0,0),{data:null,width:e,height:i,interpolate:a,bitmap:n.transferToImageBitmap()}}return this.createRawMask({imgArray:t,width:e,height:i,inverseDecode:o,imageIsFromDecodeStream:s,interpolate:a})}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer(t){const e=this.bpc,i=this.numComps,n=this.decodeAddends,r=this.decodeCoefficients,s=(1<<e)-1;let o,a;if(1===e){for(o=0,a=t.length;o<a;o++)t[o]=+!t[o];return}let l=0;for(o=0,a=this.width*this.height;o<a;o++)for(let e=0;e<i;e++)t[l]=u(t[l],n[e],r[e],s),l++}getComponents(t){const e=this.bpc;if(8===e)return t;const i=this.width,n=this.height,r=this.numComps,s=i*n*r;let o,a=0;o=e<=8?new Uint8Array(s):e<=16?new Uint16Array(s):new Uint32Array(s);const l=i*r,c=(1<<e)-1;let h,u,p=0;if(1===e){let e,i,r;for(let s=0;s<n;s++){for(i=p+(-8&l),r=p+l;p<i;)u=t[a++],o[p]=u>>7&1,o[p+1]=u>>6&1,o[p+2]=u>>5&1,o[p+3]=u>>4&1,o[p+4]=u>>3&1,o[p+5]=u>>2&1,o[p+6]=u>>1&1,o[p+7]=1&u,p+=8;if(p<r)for(u=t[a++],e=128;p<r;)o[p++]=+!!(u&e),e>>=1}}else{let i=0;for(u=0,p=0,h=s;p<h;++p){for(p%l==0&&(u=0,i=0);i<e;)u=u<<8|t[a++],i+=8;const n=i-e;let r=u>>n;r<0?r=0:r>c&&(r=c),o[p]=r,u&=(1<<n)-1,i=n}}return o}fillOpacity(t,e,i,r,s){const o=this.smask,a=this.mask;let l,c,h,u,f,g;if(o)c=o.width,h=o.height,l=new Uint8ClampedArray(c*h),o.fillGrayBuffer(l),c===e&&h===i||(l=p(l,o.bpc,c,h,e,i));else if(a)if(a instanceof d){for(c=a.width,h=a.height,l=new Uint8ClampedArray(c*h),a.numComps=1,a.fillGrayBuffer(l),u=0,f=c*h;u<f;++u)l[u]=255-l[u];c===e&&h===i||(l=p(l,a.bpc,c,h,e,i))}else{if(!Array.isArray(a))throw new n.FormatError("Unknown mask format.");{l=new Uint8ClampedArray(e*i);const t=this.numComps;for(u=0,f=e*i;u<f;++u){let e=0;const i=u*t;for(g=0;g<t;++g){const t=s[i+g],n=2*g;if(t<a[n]||t>a[n+1]){e=255;break}}l[u]=e}}}if(l)for(u=0,g=3,f=e*r;u<f;++u,g+=4)t[g]=l[u];else for(u=0,g=3,f=e*r;u<f;++u,g+=4)t[g]=255}undoPreblend(t,e,i){const n=this.smask&&this.smask.matte;if(!n)return;const r=this.colorSpace.getRgb(n,0),s=r[0],o=r[1],a=r[2],l=e*i*4;for(let e=0;e<l;e+=4){const i=t[e+3];if(0===i){t[e]=255,t[e+1]=255,t[e+2]=255;continue}const n=255/i;t[e]=(t[e]-s)*n+s,t[e+1]=(t[e+1]-o)*n+o,t[e+2]=(t[e+2]-a)*n+a}}createImageData(t=!1){const e=this.drawWidth,i=this.drawHeight,r={width:e,height:i,interpolate:this.interpolate,kind:0,data:null},s=this.numComps,o=this.width,a=this.height,c=this.bpc,h=o*s*c+7>>3;if(!t){let t;if("DeviceGray"===this.colorSpace.name&&1===c?t=n.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==c||this.needsDecode||(t=n.ImageKind.RGB_24BPP),t&&!this.smask&&!this.mask&&e===o&&i===a){if(r.kind=t,r.data=this.getImageBytes(a*h,{}),this.needsDecode){(0,n.assert)(t===n.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const e=r.data;for(let t=0,i=e.length;t<i;t++)e[t]^=255}return r}if(this.image instanceof l.JpegStream&&!this.smask&&!this.mask){let t=a*h;switch(this.colorSpace.name){case"DeviceGray":t*=3;case"DeviceRGB":case"DeviceCMYK":return r.kind=n.ImageKind.RGB_24BPP,r.data=this.getImageBytes(t,{drawWidth:e,drawHeight:i,forceRGB:!0}),r}}}const u=this.getImageBytes(a*h,{internal:!0}),p=0|u.length/h*i/a,d=this.getComponents(u);let f,g;return t||this.smask||this.mask?(r.kind=n.ImageKind.RGBA_32BPP,r.data=new Uint8ClampedArray(e*i*4),f=1,g=!0,this.fillOpacity(r.data,e,i,p,d)):(r.kind=n.ImageKind.RGB_24BPP,r.data=new Uint8ClampedArray(e*i*3),f=0,g=!1),this.needsDecode&&this.decodeBuffer(d),this.colorSpace.fillRgb(r.data,o,a,e,i,p,c,d,f),g&&this.undoPreblend(r.data,e,p),r}fillGrayBuffer(t){const e=this.numComps;if(1!==e)throw new n.FormatError(`Reading gray scale from a color image: ${e}`);const i=this.width,r=this.height,s=this.bpc,o=i*e*s+7>>3,a=this.getImageBytes(r*o,{internal:!0}),l=this.getComponents(a);let c,h;if(1===s){if(h=i*r,this.needsDecode)for(c=0;c<h;++c)t[c]=l[c]-1&255;else for(c=0;c<h;++c)t[c]=255&-l[c];return}this.needsDecode&&this.decodeBuffer(l),h=i*r;const u=255/((1<<s)-1);for(c=0;c<h;++c)t[c]=u*l[c]}getImageBytes(t,{drawWidth:e,drawHeight:i,forceRGB:r=!1,internal:s=!1}){this.image.reset(),this.image.drawWidth=e||this.width,this.image.drawHeight=i||this.height,this.image.forceRGB=!!r;const o=this.image.getBytes(t);return s||this.image instanceof a.DecodeStream?o:((0,n.assert)(o instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(o))}}e.PDFImage=d},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function({src:t,srcPos:e=0,dest:i,destPos:r=0,width:s,height:o,inverseDecode:a=!1}){const l=n.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[0,l]:[l,0],u=s>>3,p=7&s,d=t.length;i=new Uint32Array(i.buffer);for(let n=0;n<o;n++){for(const n=e+u;e<n;e++){const n=e<d?t[e]:255;i[r++]=128&n?h:c,i[r++]=64&n?h:c,i[r++]=32&n?h:c,i[r++]=16&n?h:c,i[r++]=8&n?h:c,i[r++]=4&n?h:c,i[r++]=2&n?h:c,i[r++]=1&n?h:c}if(0===p)continue;const n=e<d?t[e++]:255;for(let t=0;t<p;t++)i[r++]=n&1<<7-t?h:c}return{srcPos:e,destPos:r}};var n=i(2)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Catalog=void 0;var n=i(8),r=i(2),s=i(5),o=i(66),a=i(9),l=i(67),c=i(24),h=i(68),u=i(59),p=i(69),d=i(71);function f(t){return t instanceof s.Dict&&(t=t.get("D")),Array.isArray(t)?t:null}class g{constructor(t,e){if(this.pdfManager=t,this.xref=e,this._catDict=e.getCatalogObj(),!(this._catDict instanceof s.Dict))throw new r.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new s.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new u.GlobalImageCache,this.pageKidsCountCache=new s.RefSetCache,this.pageIndexCache=new s.RefSetCache,this.nonBlendModesSet=new s.RefSet}get version(){const t=this._catDict.get("Version");return(0,r.shadow)(this,"version",t instanceof s.Name?t.name:null)}get lang(){const t=this._catDict.get("Lang");return(0,r.shadow)(this,"lang","string"==typeof t?(0,r.stringToPDFString)(t):null)}get needsRendering(){const t=this._catDict.get("NeedsRendering");return(0,r.shadow)(this,"needsRendering","boolean"==typeof t&&t)}get collection(){let t=null;try{const e=this._catDict.get("Collection");e instanceof s.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,r.shadow)(this,"collection",t)}get acroForm(){let t=null;try{const e=this._catDict.get("AcroForm");e instanceof s.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,r.shadow)(this,"acroForm",t)}get acroFormRef(){const t=this._catDict.getRaw("AcroForm");return(0,r.shadow)(this,"acroFormRef",t instanceof s.Ref?t:null)}get metadata(){const t=this._catDict.getRaw("Metadata");if(!(t instanceof s.Ref))return(0,r.shadow)(this,"metadata",null);let e=null;try{const i=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),n=this.xref.fetch(t,i);if(n instanceof a.BaseStream&&n.dict instanceof s.Dict){const t=n.dict.get("Type"),i=n.dict.get("Subtype");if((0,s.isName)(t,"Metadata")&&(0,s.isName)(i,"XML")){const t=(0,r.stringToUTF8String)(n.getString());t&&(e=new p.MetadataParser(t).serializable)}}}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.info)(`Skipping invalid Metadata: "${t}".`)}return(0,r.shadow)(this,"metadata",e)}get markInfo(){let t=null;try{t=this._readMarkInfo()}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)("Unable to read mark info.")}return(0,r.shadow)(this,"markInfo",t)}_readMarkInfo(){const t=this._catDict.get("MarkInfo");if(!(t instanceof s.Dict))return null;const e={Marked:!1,UserProperties:!1,Suspects:!1};for(const i in e){const n=t.get(i);"boolean"==typeof n&&(e[i]=n)}return e}get structTreeRoot(){let t=null;try{t=this._readStructTreeRoot()}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)("Unable read to structTreeRoot info.")}return(0,r.shadow)(this,"structTreeRoot",t)}_readStructTreeRoot(){const t=this._catDict.get("StructTreeRoot");if(!(t instanceof s.Dict))return null;const e=new d.StructTreeRoot(t);return e.init(),e}get toplevelPagesDict(){const t=this._catDict.get("Pages");if(!(t instanceof s.Dict))throw new r.FormatError("Invalid top-level pages dictionary.");return(0,r.shadow)(this,"toplevelPagesDict",t)}get documentOutline(){let t=null;try{t=this._readDocumentOutline()}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)("Unable to read document outline.")}return(0,r.shadow)(this,"documentOutline",t)}_readDocumentOutline(){let t=this._catDict.get("Outlines");if(!(t instanceof s.Dict))return null;if(t=t.getRaw("First"),!(t instanceof s.Ref))return null;const e={items:[]},i=[{obj:t,parent:e}],n=new s.RefSet;n.put(t);const o=this.xref,a=new Uint8ClampedArray(3);for(;i.length>0;){const e=i.shift(),l=o.fetchIfRef(e.obj);if(null===l)continue;if(!l.has("Title"))throw new r.FormatError("Invalid outline item encountered.");const h={url:null,dest:null};g.parseDestDictionary({destDict:l,resultObj:h,docBaseUrl:this.pdfManager.docBaseUrl});const u=l.get("Title"),p=l.get("F")||0,d=l.getArray("C"),f=l.get("Count");let m=a;!Array.isArray(d)||3!==d.length||0===d[0]&&0===d[1]&&0===d[2]||(m=c.ColorSpace.singletons.rgb.getRgb(d,0));const y={dest:h.dest,url:h.url,unsafeUrl:h.unsafeUrl,newWindow:h.newWindow,title:(0,r.stringToPDFString)(u),color:m,count:Number.isInteger(f)?f:void 0,bold:!!(2&p),italic:!!(1&p),items:[]};e.parent.items.push(y),t=l.getRaw("First"),t instanceof s.Ref&&!n.has(t)&&(i.push({obj:t,parent:y}),n.put(t)),t=l.getRaw("Next"),t instanceof s.Ref&&!n.has(t)&&(i.push({obj:t,parent:e.parent}),n.put(t))}return e.items.length>0?e.items:null}get permissions(){let t=null;try{t=this._readPermissions()}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)("Unable to read permissions.")}return(0,r.shadow)(this,"permissions",t)}_readPermissions(){const t=this.xref.trailer.get("Encrypt");if(!(t instanceof s.Dict))return null;let e=t.get("P");if("number"!=typeof e)return null;e+=2**32;const i=[];for(const t in r.PermissionFlag){const n=r.PermissionFlag[t];e&n&&i.push(n)}return i}get optionalContentConfig(){let t=null;try{const e=this._catDict.get("OCProperties");if(!e)return(0,r.shadow)(this,"optionalContentConfig",null);const i=e.get("D");if(!i)return(0,r.shadow)(this,"optionalContentConfig",null);const n=e.get("OCGs");if(!Array.isArray(n))return(0,r.shadow)(this,"optionalContentConfig",null);const o=[],a=[];for(const t of n){if(!(t instanceof s.Ref))continue;a.push(t);const e=this.xref.fetchIfRef(t);o.push({id:t.toString(),name:"string"==typeof e.get("Name")?(0,r.stringToPDFString)(e.get("Name")):null,intent:"string"==typeof e.get("Intent")?(0,r.stringToPDFString)(e.get("Intent")):null})}t=this._readOptionalContentConfig(i,a),t.groups=o}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)(`Unable to read optional content config: ${t}`)}return(0,r.shadow)(this,"optionalContentConfig",t)}_readOptionalContentConfig(t,e){function i(t){const i=[];if(Array.isArray(t))for(const n of t)n instanceof s.Ref&&e.includes(n)&&i.push(n.toString());return i}function n(t,i=0){if(!Array.isArray(t))return null;const n=[];for(const r of t){if(r instanceof s.Ref&&e.includes(r)){l.put(r),n.push(r.toString());continue}const t=o(r,i);t&&n.push(t)}if(i>0)return n;const r=[];for(const t of e)l.has(t)||r.push(t.toString());return r.length&&n.push({name:null,order:r}),n}function o(t,e){if(++e>c)return(0,r.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const i=a.fetchIfRef(t);if(!Array.isArray(i))return null;const s=a.fetchIfRef(i[0]);if("string"!=typeof s)return null;const o=n(i.slice(1),e);return o&&o.length?{name:(0,r.stringToPDFString)(s),order:o}:null}const a=this.xref,l=new s.RefSet,c=10;return{name:"string"==typeof t.get("Name")?(0,r.stringToPDFString)(t.get("Name")):null,creator:"string"==typeof t.get("Creator")?(0,r.stringToPDFString)(t.get("Creator")):null,baseState:t.get("BaseState")instanceof s.Name?t.get("BaseState").name:null,on:i(t.get("ON")),off:i(t.get("OFF")),order:n(t.get("Order")),groups:null}}setActualNumPages(t=null){this._actualNumPages=t}get hasActualNumPages(){return null!==this._actualNumPages}get _pagesCount(){const t=this.toplevelPagesDict.get("Count");if(!Number.isInteger(t))throw new r.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,r.shadow)(this,"_pagesCount",t)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const t=this._readDests(),e=Object.create(null);if(t instanceof o.NameTree)for(const[i,n]of t.getAll()){const t=f(n);t&&(e[(0,r.stringToPDFString)(i)]=t)}else t instanceof s.Dict&&t.forEach((function(t,i){const n=f(i);n&&(e[t]=n)}));return(0,r.shadow)(this,"destinations",e)}getDestination(t){const e=this._readDests();if(e instanceof o.NameTree){const i=f(e.get(t));if(i)return i;const n=this.destinations[t];if(n)return(0,r.warn)(`Found "${t}" at an incorrect position in the NameTree.`),n}else if(e instanceof s.Dict){const i=f(e.get(t));if(i)return i}return null}_readDests(){const t=this._catDict.get("Names");return t&&t.has("Dests")?new o.NameTree(t.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}get pageLabels(){let t=null;try{t=this._readPageLabels()}catch(t){if(t instanceof n.MissingDataException)throw t;(0,r.warn)("Unable to read page labels.")}return(0,r.shadow)(this,"pageLabels",t)}_readPageLabels(){const t=this._catDict.getRaw("PageLabels");if(!t)return null;const e=new Array(this.numPages);let i=null,a="";const l=new o.NumberTree(t,this.xref).getAll();let c="",h=1;for(let t=0,o=this.numPages;t<o;t++){const o=l.get(t);if(void 0!==o){if(!(o instanceof s.Dict))throw new r.FormatError("PageLabel is not a dictionary.");if(o.has("Type")&&!(0,s.isName)(o.get("Type"),"PageLabel"))throw new r.FormatError("Invalid type in PageLabel dictionary.");if(o.has("S")){const t=o.get("S");if(!(t instanceof s.Name))throw new r.FormatError("Invalid style in PageLabel dictionary.");i=t.name}else i=null;if(o.has("P")){const t=o.get("P");if("string"!=typeof t)throw new r.FormatError("Invalid prefix in PageLabel dictionary.");a=(0,r.stringToPDFString)(t)}else a="";if(o.has("St")){const t=o.get("St");if(!(Number.isInteger(t)&&t>=1))throw new r.FormatError("Invalid start in PageLabel dictionary.");h=t}else h=1}switch(i){case"D":c=h;break;case"R":case"r":c=(0,n.toRomanNumerals)(h,"r"===i);break;case"A":case"a":const t=26,e=65,s=97,o="a"===i?s:e,a=h-1;c=String.fromCharCode(o+a%t).repeat(Math.floor(a/t)+1);break;default:if(i)throw new r.FormatError(`Invalid style "${i}" in PageLabel dictionary.`);c=""}e[t]=a+c,h++}return e}get pageLayout(){const t=this._catDict.get("PageLayout");let e="";if(t instanceof s.Name)switch(t.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":e=t.name}return(0,r.shadow)(this,"pageLayout",e)}get pageMode(){const t=this._catDict.get("PageMode");let e="UseNone";if(t instanceof s.Name)switch(t.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":e=t.name}return(0,r.shadow)(this,"pageMode",e)}get viewerPreferences(){const t=this._catDict.get("ViewerPreferences");if(!(t instanceof s.Dict))return(0,r.shadow)(this,"viewerPreferences",null);let e=null;for(const i of t.getKeys()){const n=t.get(i);let o;switch(i){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":"boolean"==typeof n&&(o=n);break;case"NonFullScreenPageMode":if(n instanceof s.Name)switch(n.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":o=n.name;break;default:o="UseNone"}break;case"Direction":if(n instanceof s.Name)switch(n.name){case"L2R":case"R2L":o=n.name;break;default:o="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(n instanceof s.Name)switch(n.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":o=n.name;break;default:o="CropBox"}break;case"PrintScaling":if(n instanceof s.Name)switch(n.name){case"None":case"AppDefault":o=n.name;break;default:o="AppDefault"}break;case"Duplex":if(n instanceof s.Name)switch(n.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":o=n.name;break;default:o="None"}break;case"PrintPageRange":Array.isArray(n)&&n.length%2==0&&n.every(((t,e,i)=>Number.isInteger(t)&&t>0&&(0===e||t>=i[e-1])&&t<=this.numPages))&&(o=n);break;case"NumCopies":Number.isInteger(n)&&n>0&&(o=n);break;default:(0,r.warn)(`Ignoring non-standard key in ViewerPreferences: ${i}.`);continue}void 0!==o?(e||(e=Object.create(null)),e[i]=o):(0,r.warn)(`Bad value, for key "${i}", in ViewerPreferences: ${n}.`)}return(0,r.shadow)(this,"viewerPreferences",e)}get openAction(){const t=this._catDict.get("OpenAction"),e=Object.create(null);if(t instanceof s.Dict){const i=new s.Dict(this.xref);i.set("A",t);const n={url:null,dest:null,action:null};g.parseDestDictionary({destDict:i,resultObj:n}),Array.isArray(n.dest)?e.dest=n.dest:n.action&&(e.action=n.action)}else Array.isArray(t)&&(e.dest=t);return(0,r.shadow)(this,"openAction",(0,r.objectSize)(e)>0?e:null)}get attachments(){const t=this._catDict.get("Names");let e=null;if(t instanceof s.Dict&&t.has("EmbeddedFiles")){const i=new o.NameTree(t.getRaw("EmbeddedFiles"),this.xref);for(const[t,n]of i.getAll()){const i=new h.FileSpec(n,this.xref);e||(e=Object.create(null)),e[(0,r.stringToPDFString)(t)]=i.serializable}}return(0,r.shadow)(this,"attachments",e)}get xfaImages(){const t=this._catDict.get("Names");let e=null;if(t instanceof s.Dict&&t.has("XFAImages")){const i=new o.NameTree(t.getRaw("XFAImages"),this.xref);for(const[t,n]of i.getAll())e||(e=new s.Dict(this.xref)),e.set((0,r.stringToPDFString)(t),n)}return(0,r.shadow)(this,"xfaImages",e)}_collectJavaScript(){const t=this._catDict.get("Names");let e=null;function i(t,i){if(!(i instanceof s.Dict))return;if(!(0,s.isName)(i.get("S"),"JavaScript"))return;let n=i.get("JS");if(n instanceof a.BaseStream)n=n.getString();else if("string"!=typeof n)return;null===e&&(e=new Map),e.set(t,(0,r.stringToPDFString)(n))}if(t instanceof s.Dict&&t.has("JavaScript")){const e=new o.NameTree(t.getRaw("JavaScript"),this.xref);for(const[t,n]of e.getAll())i((0,r.stringToPDFString)(t),n)}const n=this._catDict.get("OpenAction");return n&&i("OpenAction",n),e}get javaScript(){const t=this._collectJavaScript();return(0,r.shadow)(this,"javaScript",t?[...t.values()]:null)}get jsActions(){const t=this._collectJavaScript();let e=(0,n.collectActions)(this.xref,this._catDict,r.DocumentActionEventType);if(t){e||(e=Object.create(null));for(const[i,n]of t)i in e?e[i].push(n):e[i]=[n]}return(0,r.shadow)(this,"jsActions",e)}async fontFallback(t,e){const i=await Promise.all(this.fontCache);for(const n of i)if(n.loadedName===t)return void n.fallback(e)}async cleanup(t=!1){(0,l.clearGlobalCaches)(),this.globalImageCache.clear(t),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const e=await Promise.all(this.fontCache);for(const{dict:t}of e)delete t.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear()}async getPageDict(t){const e=[this.toplevelPagesDict],i=new s.RefSet,n=this._catDict.getRaw("Pages");n instanceof s.Ref&&i.put(n);const o=this.xref,a=this.pageKidsCountCache,l=this.pageIndexCache;let c=0;for(;e.length;){const n=e.pop();if(n instanceof s.Ref){const h=a.get(n);if(h>=0&&c+h<=t){c+=h;continue}if(i.has(n))throw new r.FormatError("Pages tree contains circular reference.");i.put(n);const u=await o.fetchAsync(n);if(u instanceof s.Dict){let e=u.getRaw("Type");if(e instanceof s.Ref&&(e=await o.fetchAsync(e)),(0,s.isName)(e,"Page")||!u.has("Kids")){if(a.has(n)||a.put(n,1),l.has(n)||l.put(n,c),c===t)return[u,n];c++;continue}}e.push(u);continue}if(!(n instanceof s.Dict))throw new r.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:h}=n;let u=n.getRaw("Count");if(u instanceof s.Ref&&(u=await o.fetchAsync(u)),Number.isInteger(u)&&u>=0&&(h&&!a.has(h)&&a.put(h,u),c+u<=t)){c+=u;continue}let p=n.getRaw("Kids");if(p instanceof s.Ref&&(p=await o.fetchAsync(p)),!Array.isArray(p)){let e=n.getRaw("Type");if(e instanceof s.Ref&&(e=await o.fetchAsync(e)),(0,s.isName)(e,"Page")||!n.has("Kids")){if(c===t)return[n,null];c++;continue}throw new r.FormatError("Page dictionary kids object is not an array.")}for(let t=p.length-1;t>=0;t--)e.push(p[t])}throw new Error(`Page index ${t} not found.`)}async getAllPageDicts(t=!1){const e=[{currentNode:this.toplevelPagesDict,posInKids:0}],i=new s.RefSet,o=this._catDict.getRaw("Pages");o instanceof s.Ref&&i.put(o);const a=new Map,l=this.xref,c=this.pageIndexCache;let h=0;function u(e){if(e instanceof n.XRefEntryException&&!t)throw e;a.set(h++,[e,null])}for(;e.length>0;){const t=e[e.length-1],{currentNode:n,posInKids:o}=t;let f=n.getRaw("Kids");if(f instanceof s.Ref)try{f=await l.fetchAsync(f)}catch(t){u(t);break}if(!Array.isArray(f)){u(new r.FormatError("Page dictionary kids object is not an array."));break}if(o>=f.length){e.pop();continue}const g=f[o];let m;if(g instanceof s.Ref){if(i.has(g)){u(new r.FormatError("Pages tree contains circular reference."));break}i.put(g);try{m=await l.fetchAsync(g)}catch(t){u(t);break}}else m=g;if(!(m instanceof s.Dict)){u(new r.FormatError("Page dictionary kid reference points to wrong type of object."));break}let y=m.getRaw("Type");if(y instanceof s.Ref)try{y=await l.fetchAsync(y)}catch(t){u(t);break}(0,s.isName)(y,"Page")||!m.has("Kids")?(p=m,(d=g instanceof s.Ref?g:null)&&!c.has(d)&&c.put(d,h),a.set(h++,[p,d])):e.push({currentNode:m,posInKids:0}),t.posInKids++}var p,d;return a}getPageIndex(t){const e=this.pageIndexCache.get(t);if(void 0!==e)return Promise.resolve(e);const i=this.xref;let n=0;const o=e=>function(e){let n,o=0;return i.fetchAsync(e).then((function(i){if((0,s.isRefsEqual)(e,t)&&!(0,s.isDict)(i,"Page")&&!(i instanceof s.Dict&&!i.has("Type")&&i.has("Contents")))throw new r.FormatError("The reference does not point to a /Page dictionary.");if(!i)return null;if(!(i instanceof s.Dict))throw new r.FormatError("Node must be a dictionary.");return n=i.getRaw("Parent"),i.getAsync("Parent")})).then((function(t){if(!t)return null;if(!(t instanceof s.Dict))throw new r.FormatError("Parent must be a dictionary.");return t.getAsync("Kids")})).then((function(t){if(!t)return null;const a=[];let l=!1;for(let n=0,c=t.length;n<c;n++){const c=t[n];if(!(c instanceof s.Ref))throw new r.FormatError("Kid must be a reference.");if((0,s.isRefsEqual)(c,e)){l=!0;break}a.push(i.fetchAsync(c).then((function(t){if(!(t instanceof s.Dict))throw new r.FormatError("Kid node must be a dictionary.");t.has("Count")?o+=t.get("Count"):o++})))}if(!l)throw new r.FormatError("Kid reference not found in parent's kids.");return Promise.all(a).then((function(){return[o,n]}))}))}(e).then((e=>{if(!e)return this.pageIndexCache.put(t,n),n;const[i,r]=e;return n+=i,o(r)}));return o(t)}get baseUrl(){const t=this._catDict.get("URI");if(t instanceof s.Dict){const e=t.get("Base");if("string"==typeof e){const t=(0,r.createValidAbsoluteUrl)(e,null,{tryConvertEncoding:!0});if(t)return(0,r.shadow)(this,"baseUrl",t.href)}}return(0,r.shadow)(this,"baseUrl",null)}static parseDestDictionary(t){const e=t.destDict;if(!(e instanceof s.Dict))return void(0,r.warn)("parseDestDictionary: `destDict` must be a dictionary.");const i=t.resultObj;if("object"!=typeof i)return void(0,r.warn)("parseDestDictionary: `resultObj` must be an object.");const o=t.docBaseUrl||null;let l,c,h=e.get("A");if(h instanceof s.Dict||(e.has("Dest")?h=e.get("Dest"):(h=e.get("AA"),h instanceof s.Dict&&(h.has("D")?h=h.get("D"):h.has("U")&&(h=h.get("U"))))),h instanceof s.Dict){const t=h.get("S");if(!(t instanceof s.Name))return void(0,r.warn)("parseDestDictionary: Invalid type in Action dictionary.");const e=t.name;switch(e){case"ResetForm":const t=h.get("Flags"),o=0==(1&("number"==typeof t?t:0)),u=[],p=[];for(const t of h.get("Fields")||[])t instanceof s.Ref?p.push(t.toString()):"string"==typeof t&&u.push((0,r.stringToPDFString)(t));i.resetForm={fields:u,refs:p,include:o};break;case"URI":l=h.get("URI"),l instanceof s.Name&&(l="/"+l.name);break;case"GoTo":c=h.get("D");break;case"Launch":case"GoToR":const d=h.get("F");d instanceof s.Dict?l=d.get("F")||null:"string"==typeof d&&(l=d);let f=h.get("D");if(f&&(f instanceof s.Name&&(f=f.name),"string"==typeof l)){const t=l.split("#")[0];"string"==typeof f?l=t+"#"+f:Array.isArray(f)&&(l=t+"#"+JSON.stringify(f))}const g=h.get("NewWindow");"boolean"==typeof g&&(i.newWindow=g);break;case"Named":const m=h.get("N");m instanceof s.Name&&(i.action=m.name);break;case"JavaScript":const y=h.get("JS");let v;y instanceof a.BaseStream?v=y.getString():"string"==typeof y&&(v=y);const b=v&&(0,n.recoverJsURL)((0,r.stringToPDFString)(v));if(b){l=b.url,i.newWindow=b.newWindow;break}default:if("JavaScript"===e||"SubmitForm"===e)break;(0,r.warn)(`parseDestDictionary - unsupported action: "${e}".`)}}else e.has("Dest")&&(c=e.get("Dest"));if("string"==typeof l){const t=(0,r.createValidAbsoluteUrl)(l,o,{addDefaultProtocol:!0,tryConvertEncoding:!0});t&&(i.url=t.href),i.unsafeUrl=l}c&&(c instanceof s.Name&&(c=c.name),"string"==typeof c?i.dest=(0,r.stringToPDFString)(c):Array.isArray(c)&&(i.dest=c))}}e.Catalog=g},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NumberTree=e.NameTree=void 0;var n=i(5),r=i(2);class s{constructor(t,e,i){this.constructor===s&&(0,r.unreachable)("Cannot initialize NameOrNumberTree."),this.root=t,this.xref=e,this._type=i}getAll(){const t=new Map;if(!this.root)return t;const e=this.xref,i=new n.RefSet;i.put(this.root);const s=[this.root];for(;s.length>0;){const o=e.fetchIfRef(s.shift());if(!(o instanceof n.Dict))continue;if(o.has("Kids")){const t=o.get("Kids");if(!Array.isArray(t))continue;for(const e of t){if(i.has(e))throw new r.FormatError(`Duplicate entry in "${this._type}" tree.`);s.push(e),i.put(e)}continue}const a=o.get(this._type);if(Array.isArray(a))for(let i=0,n=a.length;i<n;i+=2)t.set(e.fetchIfRef(a[i]),e.fetchIfRef(a[i+1]))}return t}get(t){if(!this.root)return null;const e=this.xref;let i=e.fetchIfRef(this.root),n=0;for(;i.has("Kids");){if(++n>10)return(0,r.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const s=i.get("Kids");if(!Array.isArray(s))return null;let o=0,a=s.length-1;for(;o<=a;){const n=o+a>>1,r=e.fetchIfRef(s[n]),l=r.get("Limits");if(t<e.fetchIfRef(l[0]))a=n-1;else{if(!(t>e.fetchIfRef(l[1]))){i=r;break}o=n+1}}if(o>a)return null}const s=i.get(this._type);if(Array.isArray(s)){let i=0,n=s.length-2;for(;i<=n;){const r=i+n>>1,o=r+(1&r),a=e.fetchIfRef(s[o]);if(t<a)n=o-2;else{if(!(t>a))return e.fetchIfRef(s[o+1]);i=o+2}}}return null}}e.NameTree=class extends s{constructor(t,e){super(t,e,"Names")}},e.NumberTree=class extends s{constructor(t,e){super(t,e,"Nums")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clearGlobalCaches=function(){(0,n.clearPrimitiveCaches)(),(0,r.clearUnicodeCaches)()};var n=i(5),r=i(21)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FileSpec=void 0;var n=i(2),r=i(9),s=i(5);function o(t){return t.has("UF")?t.get("UF"):t.has("F")?t.get("F"):t.has("Unix")?t.get("Unix"):t.has("Mac")?t.get("Mac"):t.has("DOS")?t.get("DOS"):null}e.FileSpec=class{constructor(t,e){t instanceof s.Dict&&(this.xref=e,this.root=t,t.has("FS")&&(this.fs=t.get("FS")),this.description=t.has("Desc")?(0,n.stringToPDFString)(t.get("Desc")):"",t.has("RF")&&(0,n.warn)("Related file specifications are not supported"),this.contentAvailable=!0,t.has("EF")||(this.contentAvailable=!1,(0,n.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const t=o(this.root)||"unnamed";this._filename=(0,n.stringToPDFString)(t).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=o(this.root.get("EF")));let t=null;if(this.contentRef){const e=this.xref.fetchIfRef(this.contentRef);e instanceof r.BaseStream?t=e.getBytes():(0,n.warn)("Embedded file specification points to non-existing/invalid content")}else(0,n.warn)("Embedded file specification does not have a content");return t}get serializable(){return{filename:this.filename,content:this.content}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataParser=void 0;var n=i(70);e.MetadataParser=class{constructor(t){t=this._repair(t);const e=new n.SimpleXMLParser({lowerCaseName:!0}).parseFromString(t);this._metadataMap=new Map,this._data=t,e&&this._parse(e)}_repair(t){return t.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(t,e){const i=e.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,e,i,n){return String.fromCharCode(64*e+8*i+1*n)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${e} isn't defined.`)})),n=[];for(let t=0,e=i.length;t<e;t+=2){const e=256*i.charCodeAt(t)+i.charCodeAt(t+1);e>=32&&e<127&&60!==e&&62!==e&&38!==e?n.push(String.fromCharCode(e)):n.push("&#x"+(65536+e).toString(16).substring(1)+";")}return">"+n.join("")}))}_getSequence(t){const e=t.nodeName;return"rdf:bag"!==e&&"rdf:seq"!==e&&"rdf:alt"!==e?null:t.childNodes.filter((t=>"rdf:li"===t.nodeName))}_parseArray(t){if(!t.hasChildNodes())return;const[e]=t.childNodes,i=this._getSequence(e)||[];this._metadataMap.set(t.nodeName,i.map((t=>t.textContent.trim())))}_parse(t){let e=t.documentElement;if("rdf:rdf"!==e.nodeName)for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName;)e=e.nextSibling;if(e&&"rdf:rdf"===e.nodeName&&e.hasChildNodes())for(const t of e.childNodes)if("rdf:description"===t.nodeName)for(const e of t.childNodes){const t=e.nodeName;switch(t){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(e);continue}this._metadataMap.set(t,e.textContent.trim())}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XMLParserErrorCode=e.XMLParserBase=e.SimpleXMLParser=e.SimpleDOMNode=void 0;var n=i(8);const r={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function s(t,e){const i=t[e];return" "===i||"\n"===i||"\r"===i||"\t"===i}e.XMLParserErrorCode=r;class o{_resolveEntities(t){return t.replace(/&([^;]+);/g,((t,e)=>{if("#x"===e.substring(0,2))return String.fromCodePoint(parseInt(e.substring(2),16));if("#"===e.substring(0,1))return String.fromCodePoint(parseInt(e.substring(1),10));switch(e){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(e)}))}_parseContent(t,e){const i=[];let n=e;function r(){for(;n<t.length&&s(t,n);)++n}for(;n<t.length&&!s(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;const o=t.substring(e,n);for(r();n<t.length&&">"!==t[n]&&"/"!==t[n]&&"?"!==t[n];){r();let e="",o="";for(;n<t.length&&!s(t,n)&&"="!==t[n];)e+=t[n],++n;if(r(),"="!==t[n])return null;++n,r();const a=t[n];if('"'!==a&&"'"!==a)return null;const l=t.indexOf(a,++n);if(l<0)return null;o=t.substring(n,l),i.push({name:e,value:this._resolveEntities(o)}),n=l+1,r()}return{name:o,attributes:i,parsed:n-e}}_parseProcessingInstruction(t,e){let i=e;for(;i<t.length&&!s(t,i)&&">"!==t[i]&&"?"!==t[i]&&"/"!==t[i];)++i;const n=t.substring(e,i);!function(){for(;i<t.length&&s(t,i);)++i}();const r=i;for(;i<t.length&&("?"!==t[i]||">"!==t[i+1]);)++i;return{name:n,value:t.substring(r,i),parsed:i-e}}parseXml(t){let e=0;for(;e<t.length;){let i=e;if("<"===t[e]){let e;switch(++i,t[i]){case"/":if(++i,e=t.indexOf(">",i),e<0)return void this.onError(r.UnterminatedElement);this.onEndElement(t.substring(i,e)),i=e+1;break;case"?":++i;const n=this._parseProcessingInstruction(t,i);if("?>"!==t.substring(i+n.parsed,i+n.parsed+2))return void this.onError(r.UnterminatedXmlDeclaration);this.onPi(n.name,n.value),i+=n.parsed+2;break;case"!":if("--"===t.substring(i+1,i+3)){if(e=t.indexOf("--\x3e",i+3),e<0)return void this.onError(r.UnterminatedComment);this.onComment(t.substring(i+3,e)),i=e+3}else if("[CDATA["===t.substring(i+1,i+8)){if(e=t.indexOf("]]>",i+8),e<0)return void this.onError(r.UnterminatedCdat);this.onCdata(t.substring(i+8,e)),i=e+3}else{if("DOCTYPE"!==t.substring(i+1,i+8))return void this.onError(r.MalformedElement);{const n=t.indexOf("[",i+8);let s=!1;if(e=t.indexOf(">",i+8),e<0)return void this.onError(r.UnterminatedDoctypeDeclaration);if(n>0&&e>n){if(e=t.indexOf("]>",i+8),e<0)return void this.onError(r.UnterminatedDoctypeDeclaration);s=!0}const o=t.substring(i+8,e+(s?1:0));this.onDoctype(o),i=e+(s?2:1)}}break;default:const s=this._parseContent(t,i);if(null===s)return void this.onError(r.MalformedElement);let o=!1;if("/>"===t.substring(i+s.parsed,i+s.parsed+2))o=!0;else if(">"!==t.substring(i+s.parsed,i+s.parsed+1))return void this.onError(r.UnterminatedElement);this.onBeginElement(s.name,s.attributes,o),i+=s.parsed+(o?2:1)}}else{for(;i<t.length&&"<"!==t[i];)i++;const n=t.substring(e,i);this.onText(this._resolveEntities(n))}e=i}}onResolveEntity(t){return`&${t};`}onPi(t,e){}onComment(t){}onCdata(t){}onDoctype(t){}onText(t){}onBeginElement(t,e,i){}onEndElement(t){}onError(t){}}e.XMLParserBase=o;class a{constructor(t,e){this.nodeName=t,this.nodeValue=e,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const t=this.parentNode.childNodes;if(!t)return;const e=t.indexOf(this);return-1!==e?t[e+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(t,e){if(e>=t.length)return this;const i=t[e],n=[];let r=this;for(;;){if(i.name===r.nodeName){if(0!==i.pos){if(0===n.length)return null;{const[s]=n.pop();let o=0;for(const n of s.childNodes)if(i.name===n.nodeName){if(o===i.pos)return n.searchNode(t,e+1);o++}return r.searchNode(t,e+1)}}{const i=r.searchNode(t,e+1);if(null!==i)return i}}if(r.childNodes&&0!==r.childNodes.length)n.push([r,0]),r=r.childNodes[0];else{if(0===n.length)return null;for(;0!==n.length;){const[t,e]=n.pop(),i=e+1;if(i<t.childNodes.length){n.push([t,i]),r=t.childNodes[i];break}}if(0===n.length)return null}}}dump(t){if("#text"!==this.nodeName){if(t.push(`<${this.nodeName}`),this.attributes)for(const e of this.attributes)t.push(` ${e.name}="${(0,n.encodeToXmlString)(e.value)}"`);if(this.hasChildNodes()){t.push(">");for(const e of this.childNodes)e.dump(t);t.push(`</${this.nodeName}>`)}else this.nodeValue?t.push(`>${(0,n.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):t.push("/>")}else t.push((0,n.encodeToXmlString)(this.nodeValue))}}e.SimpleDOMNode=a,e.SimpleXMLParser=class extends o{constructor({hasAttributes:t=!1,lowerCaseName:e=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=r.NoError,this._hasAttributes=t,this._lowerCaseName=e}parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=r.NoError,this.parseXml(t),this._errorCode!==r.NoError)return;const[e]=this._currentFragment;return e?{documentElement:e}:void 0}onText(t){if(function(t){for(let e=0,i=t.length;e<i;e++)if(!s(t,e))return!1;return!0}(t))return;const e=new a("#text",t);this._currentFragment.push(e)}onCdata(t){const e=new a("#text",t);this._currentFragment.push(e)}onBeginElement(t,e,i){this._lowerCaseName&&(t=t.toLowerCase());const n=new a(t);n.childNodes=[],this._hasAttributes&&(n.attributes=e),this._currentFragment.push(n),i||(this._stack.push(this._currentFragment),this._currentFragment=n.childNodes)}onEndElement(t){this._currentFragment=this._stack.pop()||[];const e=this._currentFragment[this._currentFragment.length-1];if(!e)return null;for(let t=0,i=e.childNodes.length;t<i;t++)e.childNodes[t].parentNode=e;return e}onError(t){this._errorCode=t}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructTreeRoot=e.StructTreePage=void 0;var n=i(5),r=i(2),s=i(66);const o="PAGE_CONTENT",a="STREAM_CONTENT",l="OBJECT",c="ELEMENT";e.StructTreeRoot=class{constructor(t){this.dict=t,this.roleMap=new Map}init(){this.readRoleMap()}readRoleMap(){const t=this.dict.get("RoleMap");t instanceof n.Dict&&t.forEach(((t,e)=>{e instanceof n.Name&&this.roleMap.set(t,e.name)}))}};class h{constructor(t,e){this.tree=t,this.dict=e,this.kids=[],this.parseKids()}get role(){const t=this.dict.get("S"),e=t instanceof n.Name?t.name:"",{root:i}=this.tree;return i.roleMap.has(e)?i.roleMap.get(e):e}parseKids(){let t=null;const e=this.dict.getRaw("Pg");e instanceof n.Ref&&(t=e.toString());const i=this.dict.get("K");if(Array.isArray(i))for(const e of i){const i=this.parseKid(t,e);i&&this.kids.push(i)}else{const e=this.parseKid(t,i);e&&this.kids.push(e)}}parseKid(t,e){if(Number.isInteger(e))return this.tree.pageDict.objId!==t?null:new u({type:o,mcid:e,pageObjId:t});let i=null;if(e instanceof n.Ref?i=this.dict.xref.fetch(e):e instanceof n.Dict&&(i=e),!i)return null;const r=i.getRaw("Pg");r instanceof n.Ref&&(t=r.toString());const s=i.get("Type")instanceof n.Name?i.get("Type").name:null;return"MCR"===s?this.tree.pageDict.objId!==t?null:new u({type:a,refObjId:i.getRaw("Stm")instanceof n.Ref?i.getRaw("Stm").toString():null,pageObjId:t,mcid:i.get("MCID")}):"OBJR"===s?this.tree.pageDict.objId!==t?null:new u({type:l,refObjId:i.getRaw("Obj")instanceof n.Ref?i.getRaw("Obj").toString():null,pageObjId:t}):new u({type:c,dict:i})}}class u{constructor({type:t,dict:e=null,mcid:i=null,pageObjId:n=null,refObjId:r=null}){this.type=t,this.dict=e,this.mcid=i,this.pageObjId=n,this.refObjId=r,this.parentNode=null}}e.StructTreePage=class{constructor(t,e){this.root=t,this.rootDict=t?t.dict:null,this.pageDict=e,this.nodes=[]}parse(){if(!this.root||!this.rootDict)return;const t=this.rootDict.get("ParentTree");if(!t)return;const e=this.pageDict.get("StructParents");if(!Number.isInteger(e))return;const i=new s.NumberTree(t,this.rootDict.xref).get(e);if(!Array.isArray(i))return;const r=new Map;for(const t of i)t instanceof n.Ref&&this.addNode(this.rootDict.xref.fetch(t),r)}addNode(t,e,i=0){if(i>40)return(0,r.warn)("StructTree MAX_DEPTH reached."),null;if(e.has(t))return e.get(t);const s=new h(this,t);e.set(t,s);const o=t.get("P");if(!o||(0,n.isName)(o.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(t,s)||e.delete(t),s;const a=this.addNode(o,e,i+1);if(!a)return s;let l=!1;for(const e of a.kids)e.type===c&&e.dict===t&&(e.parentNode=s,l=!0);return l||e.delete(t),s}addTopLevelNode(t,e){const i=this.rootDict.get("K");if(!i)return!1;if(i instanceof n.Dict)return i.objId===t.objId&&(this.nodes[0]=e,!0);if(!Array.isArray(i))return!0;let r=!1;for(let n=0;n<i.length;n++){const s=i[n];s&&s.toString()===t.objId&&(this.nodes[n]=e,r=!0)}return r}get serializable(){function t(e,i,n=0){if(n>40)return void(0,r.warn)("StructTree too deep to be fully serialized.");const s=Object.create(null);s.role=e.role,s.children=[],i.children.push(s);const h=e.dict.get("Alt");"string"==typeof h&&(s.alt=(0,r.stringToPDFString)(h));const u=e.dict.get("Lang");"string"==typeof u&&(s.lang=(0,r.stringToPDFString)(u));for(const i of e.kids){const e=i.type===c?i.parentNode:null;e?t(e,s,n+1):i.type===o||i.type===a?s.children.push({type:"content",id:`page${i.pageObjId}_mcid${i.mcid}`}):i.type===l&&s.children.push({type:"object",id:i.refObjId})}}const e=Object.create(null);e.children=[],e.role="Root";for(const i of this.nodes)i&&t(i,e);return e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectLoader=void 0;var n=i(5),r=i(9),s=i(8),o=i(2);function a(t,e){if(t instanceof n.Dict)t=t.getRawValues();else if(t instanceof r.BaseStream)t=t.dict.getRawValues();else if(!Array.isArray(t))return;for(const s of t)((i=s)instanceof n.Ref||i instanceof n.Dict||i instanceof r.BaseStream||Array.isArray(i))&&e.push(s);var i}e.ObjectLoader=class{constructor(t,e,i){this.dict=t,this.keys=e,this.xref=i,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys:t,dict:e}=this;this.refSet=new n.RefSet;const i=[];for(let n=0,r=t.length;n<r;n++){const r=e.getRaw(t[n]);void 0!==r&&i.push(r)}return this._walk(i)}async _walk(t){const e=[],i=[];for(;t.length;){let l=t.pop();if(l instanceof n.Ref){if(this.refSet.has(l))continue;try{this.refSet.put(l),l=this.xref.fetch(l)}catch(t){if(!(t instanceof s.MissingDataException)){(0,o.warn)(`ObjectLoader._walk - requesting all data: "${t}".`),this.refSet=null;const{manager:e}=this.xref.stream;return e.requestAllChunks()}e.push(l),i.push({begin:t.begin,end:t.end})}}if(l instanceof r.BaseStream){const t=l.getBaseStreams();if(t){let n=!1;for(const e of t)e.isDataLoaded||(n=!0,i.push({begin:e.start,end:e.end}));n&&e.push(l)}}a(l,t)}if(i.length){await this.xref.stream.manager.requestRanges(i);for(const t of e)t instanceof n.Ref&&this.refSet.remove(t);return this._walk(e)}this.refSet=null}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.incrementalUpdate=function({originalData:t,xrefInfo:e,newRefs:i,xref:a=null,hasXfa:h=!1,xfaDatasetsRef:d=null,hasXfaDatasetsEntry:f=!1,acroFormRef:g=null,acroForm:m=null,xfaData:y=null}){h&&function({xfaData:t,xfaDatasetsRef:e,hasXfaDatasetsEntry:i,acroFormRef:r,acroForm:a,newRefs:l,xref:h,xrefInfo:u}){if(null===h)return;if(!i){if(!r)return void(0,n.warn)("XFA - Cannot save it");const t=a.get("XFA"),i=t.slice();i.splice(2,0,"datasets"),i.splice(3,0,e),a.set("XFA",i);const s=h.encrypt;let o=null;s&&(o=s.createCipherTransform(r.num,r.gen));const u=[`${r.num} ${r.gen} obj\n`];c(a,u,o),u.push("\n"),a.set("XFA",t),l.push({ref:r,data:u.join("")})}null===t&&(t=function(t,e){const i=new o.SimpleXMLParser({hasAttributes:!0}).parseFromString(t);for(const{xfa:t}of e){if(!t)continue;const{path:e,value:r}=t;if(!e)continue;const a=i.documentElement.searchNode((0,s.parseXFAPath)(e),0);a?Array.isArray(r)?a.childNodes=r.map((t=>new o.SimpleDOMNode("value",t))):a.childNodes=[new o.SimpleDOMNode("#text",r)]:(0,n.warn)(`Node not found for path: ${e}`)}const r=[];return i.documentElement.dump(r),r.join("")}(h.fetchIfRef(e).getString(),l));const p=h.encrypt;p&&(t=p.createCipherTransform(e.num,e.gen).encryptString(t));const d=`${e.num} ${e.gen} obj\n<< /Type /EmbeddedFile /Length ${t.length}>>\nstream\n`+t+"\nendstream\nendobj\n";l.push({ref:e,data:d})}({xfaData:y,xfaDatasetsRef:d,hasXfaDatasetsEntry:f,acroFormRef:g,acroForm:m,newRefs:i,xref:a,xrefInfo:e});const v=new r.Dict(null),b=e.newRef;let w,x;const S=t[t.length-1];10===S||13===S?(w=[],x=t.length):(w=["\n"],x=t.length+1),v.set("Size",b.num+1),v.set("Prev",e.startXRef),v.set("Type",r.Name.get("XRef")),null!==e.rootRef&&v.set("Root",e.rootRef),null!==e.infoRef&&v.set("Info",e.infoRef),null!==e.encryptRef&&v.set("Encrypt",e.encryptRef),i.push({ref:b,data:""}),i=i.sort(((t,e)=>t.ref.num-e.ref.num));const k=[[0,1,65535]],C=[0,1];let A=0;for(const{ref:t,data:e}of i)A=Math.max(A,x),k.push([1,x,Math.min(t.gen,65535)]),x+=e.length,C.push(t.num,1),w.push(e);if(v.set("Index",C),Array.isArray(e.fileIds)&&e.fileIds.length>0){const t=function(t,e){const i=Math.floor(Date.now()/1e3),r=e.filename||"",s=[i.toString(),r,t.toString()];let o=s.reduce(((t,e)=>t+e.length),0);for(const t of Object.values(e.info))s.push(t),o+=t.length;const a=new Uint8Array(o);let c=0;for(const t of s)p(t,c,a),c+=t.length;return(0,n.bytesToString)((0,l.calculateMD5)(a))}(x,e);v.set("ID",[e.fileIds[0],t])}const _=[1,Math.ceil(Math.log2(A)/8),2],T=(_[0]+_[1]+_[2])*k.length;v.set("W",_),v.set("Length",T),w.push(`${b.num} ${b.gen} obj\n`),c(v,w,null),w.push(" stream\n");const O=w.reduce(((t,e)=>t+e.length),0),E=`\nendstream\nendobj\nstartxref\n${x}\n%%EOF\n`,M=new Uint8Array(t.length+O+T+E.length);M.set(t);let P=t.length;for(const t of w)p(t,P,M),P+=t.length;for(const[t,e,i]of k)P=u(t,_[0],P,M),P=u(e,_[1],P,M),P=u(i,_[2],P,M);return p(E,P,M),M},e.writeDict=c;var n=i(2),r=i(5),s=i(8),o=i(70),a=i(9),l=i(74);function c(t,e,i){e.push("<<");for(const n of t.getKeys())e.push(` /${(0,s.escapePDFName)(n)} `),h(t.getRaw(n),e,i);e.push(">>")}function h(t,e,i){t instanceof r.Name?e.push(`/${(0,s.escapePDFName)(t.name)}`):t instanceof r.Ref?e.push(`${t.num} ${t.gen} R`):Array.isArray(t)?function(t,e,i){e.push("[");let n=!0;for(const r of t)n?n=!1:e.push(" "),h(r,e,i);e.push("]")}(t,e,i):"string"==typeof t?(null!==i&&(t=i.encryptString(t)),e.push(`(${(0,n.escapeString)(t)})`)):"number"==typeof t?e.push(function(t){if(Number.isInteger(t))return t.toString();const e=Math.round(100*t);return e%100==0?(e/100).toString():e%10==0?t.toFixed(1):t.toFixed(2)}(t)):"boolean"==typeof t?e.push(t.toString()):t instanceof r.Dict?c(t,e,i):t instanceof a.BaseStream?function(t,e,i){c(t.dict,e,i),e.push(" stream\n");let n=t.getString();null!==i&&(n=i.encryptString(n)),e.push(n,"\nendstream\n")}(t,e,i):null===t?e.push("null"):(0,n.warn)(`Unhandled value in writer: ${typeof t}, please file a bug.`)}function u(t,e,i,n){for(let r=e+i-1;r>i-1;r--)n[r]=255&t,t>>=8;return i+e}function p(t,e,i){for(let n=0,r=t.length;n<r;n++)i[e+n]=255&t.charCodeAt(n)}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSHA256=e.calculateMD5=e.PDF20=e.PDF17=e.CipherTransformFactory=e.ARCFourCipher=e.AES256Cipher=e.AES128Cipher=void 0,e.calculateSHA384=u,e.calculateSHA512=void 0;var n=i(2),r=i(5),s=i(75);class o{constructor(t){this.a=0,this.b=0;const e=new Uint8Array(256),i=t.length;for(let t=0;t<256;++t)e[t]=t;for(let n=0,r=0;n<256;++n){const s=e[n];r=r+s+t[n%i]&255,e[n]=e[r],e[r]=s}this.s=e}encryptBlock(t){let e=this.a,i=this.b;const n=this.s,r=t.length,s=new Uint8Array(r);for(let o=0;o<r;++o){e=e+1&255;const r=n[e];i=i+r&255;const a=n[i];n[e]=a,n[i]=r,s[o]=t[o]^n[r+a&255]}return this.a=e,this.b=i,s}decryptBlock(t){return this.encryptBlock(t)}encrypt(t){return this.encryptBlock(t)}}e.ARCFourCipher=o;const a=function(){const t=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),e=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);return function(i,n,r){let s=1732584193,o=-271733879,a=-1732584194,l=271733878;const c=r+72&-64,h=new Uint8Array(c);let u,p;for(u=0;u<r;++u)h[u]=i[n++];h[u++]=128;const d=c-8;for(;u<d;)h[u++]=0;h[u++]=r<<3&255,h[u++]=r>>5&255,h[u++]=r>>13&255,h[u++]=r>>21&255,h[u++]=r>>>29&255,h[u++]=0,h[u++]=0,h[u++]=0;const f=new Int32Array(16);for(u=0;u<c;){for(p=0;p<16;++p,u+=4)f[p]=h[u]|h[u+1]<<8|h[u+2]<<16|h[u+3]<<24;let i,n,r=s,c=o,d=a,g=l;for(p=0;p<64;++p){p<16?(i=c&d|~c&g,n=p):p<32?(i=g&c|~g&d,n=5*p+1&15):p<48?(i=c^d^g,n=3*p+5&15):(i=d^(c|~g),n=7*p&15);const s=g,o=r+i+e[p]+f[n]|0,a=t[p];g=d,d=c,c=c+(o<<a|o>>>32-a)|0,r=s}s=s+r|0,o=o+c|0,a=a+d|0,l=l+g|0}return new Uint8Array([255&s,s>>8&255,s>>16&255,s>>>24&255,255&o,o>>8&255,o>>16&255,o>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255,255&l,l>>8&255,l>>16&255,l>>>24&255])}}();e.calculateMD5=a;class l{constructor(t,e){this.high=0|t,this.low=0|e}and(t){this.high&=t.high,this.low&=t.low}xor(t){this.high^=t.high,this.low^=t.low}or(t){this.high|=t.high,this.low|=t.low}shiftRight(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)}shiftLeft(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)}rotateRight(t){let e,i;32&t?(i=this.low,e=this.high):(e=this.low,i=this.high),t&=31,this.low=e>>>t|i<<32-t,this.high=i>>>t|e<<32-t}not(){this.high=~this.high,this.low=~this.low}add(t){const e=(this.low>>>0)+(t.low>>>0);let i=(this.high>>>0)+(t.high>>>0);e>4294967295&&(i+=1),this.low=0|e,this.high=0|i}copyTo(t,e){t[e]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low}assign(t){this.high=t.high,this.low=t.low}}const c=function(){function t(t,e){return t>>>e|t<<32-e}function e(t,e,i){return t&e^~t&i}function i(t,e,i){return t&e^t&i^e&i}function n(e){return t(e,2)^t(e,13)^t(e,22)}function r(e){return t(e,6)^t(e,11)^t(e,25)}function s(e){return t(e,7)^t(e,18)^e>>>3}const o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function(a,l,c){let h=1779033703,u=3144134277,p=1013904242,d=2773480762,f=1359893119,g=2600822924,m=528734635,y=1541459225;const v=64*Math.ceil((c+9)/64),b=new Uint8Array(v);let w,x;for(w=0;w<c;++w)b[w]=a[l++];b[w++]=128;const S=v-8;for(;w<S;)b[w++]=0;b[w++]=0,b[w++]=0,b[w++]=0,b[w++]=c>>>29&255,b[w++]=c>>21&255,b[w++]=c>>13&255,b[w++]=c>>5&255,b[w++]=c<<3&255;const k=new Uint32Array(64);for(w=0;w<v;){for(x=0;x<16;++x)k[x]=b[w]<<24|b[w+1]<<16|b[w+2]<<8|b[w+3],w+=4;for(x=16;x<64;++x)k[x]=0|(t(C=k[x-2],17)^t(C,19)^C>>>10)+k[x-7]+s(k[x-15])+k[x-16];let a,l,c=h,v=u,S=p,A=d,_=f,T=g,O=m,E=y;for(x=0;x<64;++x)a=E+r(_)+e(_,T,O)+o[x]+k[x],l=n(c)+i(c,v,S),E=O,O=T,T=_,_=A+a|0,A=S,S=v,v=c,c=a+l|0;h=h+c|0,u=u+v|0,p=p+S|0,d=d+A|0,f=f+_|0,g=g+T|0,m=m+O|0,y=y+E|0}var C;return new Uint8Array([h>>24&255,h>>16&255,h>>8&255,255&h,u>>24&255,u>>16&255,u>>8&255,255&u,p>>24&255,p>>16&255,p>>8&255,255&p,d>>24&255,d>>16&255,d>>8&255,255&d,f>>24&255,f>>16&255,f>>8&255,255&f,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24&255,m>>16&255,m>>8&255,255&m,y>>24&255,y>>16&255,y>>8&255,255&y])}}();e.calculateSHA256=c;const h=function(){function t(t,e,i,n,r){t.assign(e),t.and(i),r.assign(e),r.not(),r.and(n),t.xor(r)}function e(t,e,i,n,r){t.assign(e),t.and(i),r.assign(e),r.and(n),t.xor(r),r.assign(i),r.and(n),t.xor(r)}function i(t,e,i){t.assign(e),t.rotateRight(28),i.assign(e),i.rotateRight(34),t.xor(i),i.assign(e),i.rotateRight(39),t.xor(i)}function n(t,e,i){t.assign(e),t.rotateRight(14),i.assign(e),i.rotateRight(18),t.xor(i),i.assign(e),i.rotateRight(41),t.xor(i)}function r(t,e,i){t.assign(e),t.rotateRight(1),i.assign(e),i.rotateRight(8),t.xor(i),i.assign(e),i.shiftRight(7),t.xor(i)}function s(t,e,i){t.assign(e),t.rotateRight(19),i.assign(e),i.rotateRight(61),t.xor(i),i.assign(e),i.shiftRight(6),t.xor(i)}const o=[new l(1116352408,3609767458),new l(1899447441,602891725),new l(3049323471,3964484399),new l(3921009573,2173295548),new l(961987163,4081628472),new l(1508970993,3053834265),new l(2453635748,2937671579),new l(2870763221,3664609560),new l(3624381080,2734883394),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,3590304994),new l(1925078388,4068182383),new l(2162078206,991336113),new l(2614888103,633803317),new l(3248222580,3479774868),new l(3835390401,2666613458),new l(4022224774,944711139),new l(264347078,2341262773),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,3175218132),new l(1996064986,2198950837),new l(2554220882,3999719339),new l(2821834349,766784016),new l(2952996808,2566594879),new l(3210313671,3203337956),new l(3336571891,1034457026),new l(3584528711,2466948901),new l(113926993,3758326383),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,2643833823),new l(1695183700,2343527390),new l(1986661051,1014477480),new l(2177026350,1206759142),new l(2456956037,344077627),new l(2730485921,1290863460),new l(2820302411,3158454273),new l(3259730800,3505952657),new l(3345764771,106217008),new l(3516065817,3606008344),new l(3600352804,1432725776),new l(4094571909,1467031594),new l(275423344,851169720),new l(430227734,3100823752),new l(506948616,1363258195),new l(659060556,3750685593),new l(883997877,3785050280),new l(958139571,3318307427),new l(1322822218,3812723403),new l(1537002063,2003034995),new l(1747873779,3602036899),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(2227730452,2716904306),new l(2361852424,442776044),new l(2428436474,593698344),new l(2756734187,3733110249),new l(3204031479,2999351573),new l(3329325298,3815920427),new l(3391569614,3928383900),new l(3515267271,566280711),new l(3940187606,3454069534),new l(4118630271,4000239992),new l(116418474,1914138554),new l(174292421,2731055270),new l(289380356,3203993006),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,2618297676),new l(1288033470,3409855158),new l(1501505948,4234509866),new l(1607167915,987167468),new l(1816402316,1246189591)];return function(a,c,h,u=!1){let p,d,f,g,m,y,v,b;u?(p=new l(3418070365,3238371032),d=new l(1654270250,914150663),f=new l(2438529370,812702999),g=new l(355462360,4144912697),m=new l(1731405415,4290775857),y=new l(2394180231,1750603025),v=new l(3675008525,1694076839),b=new l(1203062813,3204075428)):(p=new l(1779033703,4089235720),d=new l(3144134277,2227873595),f=new l(1013904242,4271175723),g=new l(2773480762,1595750129),m=new l(1359893119,2917565137),y=new l(2600822924,725511199),v=new l(528734635,4215389547),b=new l(1541459225,327033209));const w=128*Math.ceil((h+17)/128),x=new Uint8Array(w);let S,k;for(S=0;S<h;++S)x[S]=a[c++];x[S++]=128;const C=w-16;for(;S<C;)x[S++]=0;x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=0,x[S++]=h>>>29&255,x[S++]=h>>21&255,x[S++]=h>>13&255,x[S++]=h>>5&255,x[S++]=h<<3&255;const A=new Array(80);for(S=0;S<80;S++)A[S]=new l(0,0);let _=new l(0,0),T=new l(0,0),O=new l(0,0),E=new l(0,0),M=new l(0,0),P=new l(0,0),I=new l(0,0),F=new l(0,0);const D=new l(0,0),R=new l(0,0),L=new l(0,0),N=new l(0,0);let B,j;for(S=0;S<w;){for(k=0;k<16;++k)A[k].high=x[S]<<24|x[S+1]<<16|x[S+2]<<8|x[S+3],A[k].low=x[S+4]<<24|x[S+5]<<16|x[S+6]<<8|x[S+7],S+=8;for(k=16;k<80;++k)B=A[k],s(B,A[k-2],N),B.add(A[k-7]),r(L,A[k-15],N),B.add(L),B.add(A[k-16]);for(_.assign(p),T.assign(d),O.assign(f),E.assign(g),M.assign(m),P.assign(y),I.assign(v),F.assign(b),k=0;k<80;++k)D.assign(F),n(L,M,N),D.add(L),t(L,M,P,I,N),D.add(L),D.add(o[k]),D.add(A[k]),i(R,_,N),e(L,_,T,O,N),R.add(L),B=F,F=I,I=P,P=M,E.add(D),M=E,E=O,O=T,T=_,B.assign(D),B.add(R),_=B;p.add(_),d.add(T),f.add(O),g.add(E),m.add(M),y.add(P),v.add(I),b.add(F)}return u?(j=new Uint8Array(48),p.copyTo(j,0),d.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40)):(j=new Uint8Array(64),p.copyTo(j,0),d.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40),v.copyTo(j,48),b.copyTo(j,56)),j}}();function u(t,e,i){return h(t,e,i,!0)}e.calculateSHA512=h;class p{decryptBlock(t){return t}encrypt(t){return t}}class d{constructor(){this.constructor===d&&(0,n.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let t=0;t<256;t++)this._mixCol[t]=t<128?t<<1:t<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(t){(0,n.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(t,e){let i,n,r;const s=new Uint8Array(16);s.set(t);for(let t=0,i=this._keySize;t<16;++t,++i)s[t]^=e[i];for(let t=this._cyclesOfRepetition-1;t>=1;--t){i=s[13],s[13]=s[9],s[9]=s[5],s[5]=s[1],s[1]=i,i=s[14],n=s[10],s[14]=s[6],s[10]=s[2],s[6]=i,s[2]=n,i=s[15],n=s[11],r=s[7],s[15]=s[3],s[11]=i,s[7]=n,s[3]=r;for(let t=0;t<16;++t)s[t]=this._inv_s[s[t]];for(let i=0,n=16*t;i<16;++i,++n)s[i]^=e[n];for(let t=0;t<16;t+=4){const e=this._mix[s[t]],n=this._mix[s[t+1]],r=this._mix[s[t+2]],o=this._mix[s[t+3]];i=e^n>>>8^n<<24^r>>>16^r<<16^o>>>24^o<<8,s[t]=i>>>24&255,s[t+1]=i>>16&255,s[t+2]=i>>8&255,s[t+3]=255&i}}i=s[13],s[13]=s[9],s[9]=s[5],s[5]=s[1],s[1]=i,i=s[14],n=s[10],s[14]=s[6],s[10]=s[2],s[6]=i,s[2]=n,i=s[15],n=s[11],r=s[7],s[15]=s[3],s[11]=i,s[7]=n,s[3]=r;for(let t=0;t<16;++t)s[t]=this._inv_s[s[t]],s[t]^=e[t];return s}_encrypt(t,e){const i=this._s;let n,r,s;const o=new Uint8Array(16);o.set(t);for(let t=0;t<16;++t)o[t]^=e[t];for(let t=1;t<this._cyclesOfRepetition;t++){for(let t=0;t<16;++t)o[t]=i[o[t]];s=o[1],o[1]=o[5],o[5]=o[9],o[9]=o[13],o[13]=s,s=o[2],r=o[6],o[2]=o[10],o[6]=o[14],o[10]=s,o[14]=r,s=o[3],r=o[7],n=o[11],o[3]=o[15],o[7]=s,o[11]=r,o[15]=n;for(let t=0;t<16;t+=4){const e=o[t+0],i=o[t+1],r=o[t+2],s=o[t+3];n=e^i^r^s,o[t+0]^=n^this._mixCol[e^i],o[t+1]^=n^this._mixCol[i^r],o[t+2]^=n^this._mixCol[r^s],o[t+3]^=n^this._mixCol[s^e]}for(let i=0,n=16*t;i<16;++i,++n)o[i]^=e[n]}for(let t=0;t<16;++t)o[t]=i[o[t]];s=o[1],o[1]=o[5],o[5]=o[9],o[9]=o[13],o[13]=s,s=o[2],r=o[6],o[2]=o[10],o[6]=o[14],o[10]=s,o[14]=r,s=o[3],r=o[7],n=o[11],o[3]=o[15],o[7]=s,o[11]=r,o[15]=n;for(let t=0,i=this._keySize;t<16;++t,++i)o[t]^=e[i];return o}_decryptBlock2(t,e){const i=t.length;let n=this.buffer,r=this.bufferPosition;const s=[];let o=this.iv;for(let e=0;e<i;++e){if(n[r]=t[e],++r,r<16)continue;const i=this._decrypt(n,this._key);for(let t=0;t<16;++t)i[t]^=o[t];o=n,s.push(i),n=new Uint8Array(16),r=0}if(this.buffer=n,this.bufferLength=r,this.iv=o,0===s.length)return new Uint8Array(0);let a=16*s.length;if(e){const t=s[s.length-1];let e=t[15];if(e<=16){for(let i=15,n=16-e;i>=n;--i)if(t[i]!==e){e=0;break}a-=e,s[s.length-1]=t.subarray(0,16-e)}}const l=new Uint8Array(a);for(let t=0,e=0,i=s.length;t<i;++t,e+=16)l.set(s[t],e);return l}decryptBlock(t,e,i=null){const n=t.length,r=this.buffer;let s=this.bufferPosition;if(i)this.iv=i;else{for(let e=0;s<16&&e<n;++e,++s)r[s]=t[e];if(s<16)return this.bufferLength=s,new Uint8Array(0);this.iv=r,t=t.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(t,e)}encrypt(t,e){const i=t.length;let n=this.buffer,r=this.bufferPosition;const s=[];e||(e=new Uint8Array(16));for(let o=0;o<i;++o){if(n[r]=t[o],++r,r<16)continue;for(let t=0;t<16;++t)n[t]^=e[t];const i=this._encrypt(n,this._key);e=i,s.push(i),n=new Uint8Array(16),r=0}if(this.buffer=n,this.bufferLength=r,this.iv=e,0===s.length)return new Uint8Array(0);const o=16*s.length,a=new Uint8Array(o);for(let t=0,e=0,i=s.length;t<i;++t,e+=16)a.set(s[t],e);return a}}class f extends d{constructor(t){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(t)}_expandKey(t){const e=this._s,i=this._rcon,n=new Uint8Array(176);n.set(t);for(let t=16,r=1;t<176;++r){let s=n[t-3],o=n[t-2],a=n[t-1],l=n[t-4];s=e[s],o=e[o],a=e[a],l=e[l],s^=i[r];for(let e=0;e<4;++e)n[t]=s^=n[t-16],t++,n[t]=o^=n[t-16],t++,n[t]=a^=n[t-16],t++,n[t]=l^=n[t-16],t++}return n}}e.AES128Cipher=f;class g extends d{constructor(t){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(t)}_expandKey(t){const e=this._s,i=new Uint8Array(240);i.set(t);let n,r,s,o,a=1;for(let t=32,l=1;t<240;++l){t%32==16?(n=e[n],r=e[r],s=e[s],o=e[o]):t%32==0&&(n=i[t-3],r=i[t-2],s=i[t-1],o=i[t-4],n=e[n],r=e[r],s=e[s],o=e[o],n^=a,(a<<=1)>=256&&(a=255&(27^a)));for(let e=0;e<4;++e)i[t]=n^=i[t-32],t++,i[t]=r^=i[t-32],t++,i[t]=s^=i[t-32],t++,i[t]=o^=i[t-32],t++}return i}}e.AES256Cipher=g;class m{checkOwnerPassword(t,e,i,r){const s=new Uint8Array(t.length+56);s.set(t,0),s.set(e,t.length),s.set(i,t.length+e.length);const o=c(s,0,s.length);return(0,n.isArrayEqual)(o,r)}checkUserPassword(t,e,i){const r=new Uint8Array(t.length+8);r.set(t,0),r.set(e,t.length);const s=c(r,0,r.length);return(0,n.isArrayEqual)(s,i)}getOwnerKey(t,e,i,n){const r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length);const s=c(r,0,r.length);return new g(s).decryptBlock(n,!1,new Uint8Array(16))}getUserKey(t,e,i){const n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);const r=c(n,0,n.length);return new g(r).decryptBlock(i,!1,new Uint8Array(16))}}e.PDF17=m;const y=function(){function t(t,e,i){let n=c(e,0,e.length).subarray(0,32),r=[0],s=0;for(;s<64||r[r.length-1]>s-32;){const e=t.length+n.length+i.length,o=new Uint8Array(e);let a=0;o.set(t,a),a+=t.length,o.set(n,a),a+=n.length,o.set(i,a);const l=new Uint8Array(64*e);for(let t=0,i=0;t<64;t++,i+=e)l.set(o,i);r=new f(n.subarray(0,16)).encrypt(l,n.subarray(16,32));let p=0;for(let t=0;t<16;t++)p*=1,p%=3,p+=(r[t]>>>0)%3,p%=3;0===p?n=c(r,0,r.length):1===p?n=u(r,0,r.length):2===p&&(n=h(r,0,r.length)),s++}return n.subarray(0,32)}return class{hash(e,i,n){return t(e,i,n)}checkOwnerPassword(e,i,r,s){const o=new Uint8Array(e.length+56);o.set(e,0),o.set(i,e.length),o.set(r,e.length+i.length);const a=t(e,o,r);return(0,n.isArrayEqual)(a,s)}checkUserPassword(e,i,r){const s=new Uint8Array(e.length+8);s.set(e,0),s.set(i,e.length);const o=t(e,s,[]);return(0,n.isArrayEqual)(o,r)}getOwnerKey(e,i,n,r){const s=new Uint8Array(e.length+56);s.set(e,0),s.set(i,e.length),s.set(n,e.length+i.length);const o=t(e,s,n);return new g(o).decryptBlock(r,!1,new Uint8Array(16))}getUserKey(e,i,n){const r=new Uint8Array(e.length+8);r.set(e,0),r.set(i,e.length);const s=t(e,r,[]);return new g(s).decryptBlock(n,!1,new Uint8Array(16))}}}();e.PDF20=y;class v{constructor(t,e){this.StringCipherConstructor=t,this.StreamCipherConstructor=e}createStream(t,e){const i=new this.StreamCipherConstructor;return new s.DecryptStream(t,e,(function(t,e){return i.decryptBlock(t,e)}))}decryptString(t){const e=new this.StringCipherConstructor;let i=(0,n.stringToBytes)(t);return i=e.decryptBlock(i,!0),(0,n.bytesToString)(i)}encryptString(t){const e=new this.StringCipherConstructor;if(e instanceof d){const i=16-t.length%16;t+=String.fromCharCode(i).repeat(i);const r=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(r);else for(let t=0;t<16;t++)r[t]=Math.floor(256*Math.random());let s=(0,n.stringToBytes)(t);s=e.encrypt(s,r);const o=new Uint8Array(16+s.length);return o.set(r),o.set(s,16),(0,n.bytesToString)(o)}let i=(0,n.stringToBytes)(t);return i=e.encrypt(i),(0,n.bytesToString)(i)}}const b=function(){const t=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function e(e,i,n,r,s,l,c,h){const u=40+n.length+e.length,p=new Uint8Array(u);let d,f,g=0;if(i)for(f=Math.min(32,i.length);g<f;++g)p[g]=i[g];for(d=0;g<32;)p[g++]=t[d++];for(d=0,f=n.length;d<f;++d)p[g++]=n[d];for(p[g++]=255&s,p[g++]=s>>8&255,p[g++]=s>>16&255,p[g++]=s>>>24&255,d=0,f=e.length;d<f;++d)p[g++]=e[d];l>=4&&!h&&(p[g++]=255,p[g++]=255,p[g++]=255,p[g++]=255);let m=a(p,0,g);const y=c>>3;if(l>=3)for(d=0;d<50;++d)m=a(m,0,y);const v=m.subarray(0,y);let b,w;if(l>=3){for(g=0;g<32;++g)p[g]=t[g];for(d=0,f=e.length;d<f;++d)p[g++]=e[d];b=new o(v),w=b.encryptBlock(a(p,0,g)),f=v.length;const i=new Uint8Array(f);for(d=1;d<=19;++d){for(let t=0;t<f;++t)i[t]=v[t]^d;b=new o(i),w=b.encryptBlock(w)}for(d=0,f=w.length;d<f;++d)if(r[d]!==w[d])return null}else for(b=new o(v),w=b.encryptBlock(t),d=0,f=w.length;d<f;++d)if(r[d]!==w[d])return null;return v}const i=r.Name.get("Identity");function s(t,e,i,n=!1){const r=new Uint8Array(i.length+9),s=i.length;let o;for(o=0;o<s;++o)r[o]=i[o];return r[o++]=255&t,r[o++]=t>>8&255,r[o++]=t>>16&255,r[o++]=255&e,r[o++]=e>>8&255,n&&(r[o++]=115,r[o++]=65,r[o++]=108,r[o++]=84),a(r,0,o).subarray(0,Math.min(i.length+5,16))}function l(t,e,i,a,l){if(!(e instanceof r.Name))throw new n.FormatError("Invalid crypt filter name.");const c=t.get(e.name);let h;if(null!=c&&(h=c.get("CFM")),!h||"None"===h.name)return function(){return new p};if("V2"===h.name)return function(){return new o(s(i,a,l,!1))};if("AESV2"===h.name)return function(){return new f(s(i,a,l,!0))};if("AESV3"===h.name)return function(){return new g(l)};throw new n.FormatError("Unknown crypto method")}return class{constructor(s,l,c){const h=s.get("Filter");if(!(0,r.isName)(h,"Standard"))throw new n.FormatError("unknown encryption method");this.filterName=h.name,this.dict=s;const u=s.get("V");if(!Number.isInteger(u)||1!==u&&2!==u&&4!==u&&5!==u)throw new n.FormatError("unsupported encryption algorithm");this.algorithm=u;let p=s.get("Length");if(!p)if(u<=3)p=40;else{const t=s.get("CF"),e=s.get("StmF");if(t instanceof r.Dict&&e instanceof r.Name){t.suppressEncryption=!0;const i=t.get(e.name);p=i&&i.get("Length")||128,p<40&&(p<<=3)}}if(!Number.isInteger(p)||p<40||p%8!=0)throw new n.FormatError("invalid key length");const d=(0,n.stringToBytes)(s.get("O")).subarray(0,32),f=(0,n.stringToBytes)(s.get("U")).subarray(0,32),g=s.get("P"),v=s.get("R"),b=(4===u||5===u)&&!1!==s.get("EncryptMetadata");this.encryptMetadata=b;const w=(0,n.stringToBytes)(l);let x,S;if(c){if(6===v)try{c=(0,n.utf8StringToString)(c)}catch(t){(0,n.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}x=(0,n.stringToBytes)(c)}if(5!==u)S=e(w,x,d,f,g,v,p,b);else{const t=(0,n.stringToBytes)(s.get("O")).subarray(32,40),e=(0,n.stringToBytes)(s.get("O")).subarray(40,48),i=(0,n.stringToBytes)(s.get("U")).subarray(0,48),r=(0,n.stringToBytes)(s.get("U")).subarray(32,40),o=(0,n.stringToBytes)(s.get("U")).subarray(40,48),a=(0,n.stringToBytes)(s.get("OE")),l=(0,n.stringToBytes)(s.get("UE"));(0,n.stringToBytes)(s.get("Perms")),S=function(t,e,i,n,r,s,o,a,l,c,h,u){if(e){const t=Math.min(127,e.length);e=e.subarray(0,t)}else e=[];let p;return p=6===t?new y:new m,p.checkUserPassword(e,a,o)?p.getUserKey(e,l,h):e.length&&p.checkOwnerPassword(e,n,s,i)?p.getOwnerKey(e,r,s,c):null}(v,x,d,t,e,i,f,r,o,a,l)}if(!S&&!c)throw new n.PasswordException("No password given",n.PasswordResponses.NEED_PASSWORD);if(!S&&c){const i=function(e,i,n,r){const s=new Uint8Array(32);let l=0;const c=Math.min(32,e.length);for(;l<c;++l)s[l]=e[l];let h=0;for(;l<32;)s[l++]=t[h++];let u=a(s,0,l);const p=r>>3;if(n>=3)for(h=0;h<50;++h)u=a(u,0,u.length);let d,f;if(n>=3){f=i;const t=new Uint8Array(p);for(h=19;h>=0;h--){for(let e=0;e<p;++e)t[e]=u[e]^h;d=new o(t),f=d.encryptBlock(f)}}else d=new o(u.subarray(0,p)),f=d.encryptBlock(i);return f}(x,d,v,p);S=e(w,i,d,f,g,v,p,b)}if(!S)throw new n.PasswordException("Incorrect Password",n.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=S,u>=4){const t=s.get("CF");t instanceof r.Dict&&(t.suppressEncryption=!0),this.cf=t,this.stmf=s.get("StmF")||i,this.strf=s.get("StrF")||i,this.eff=s.get("EFF")||this.stmf}}createCipherTransform(t,e){if(4===this.algorithm||5===this.algorithm)return new v(l(this.cf,this.stmf,t,e,this.encryptionKey),l(this.cf,this.strf,t,e,this.encryptionKey));const i=s(t,e,this.encryptionKey,!1),n=function(){return new o(i)};return new v(n,n)}}}();e.CipherTransformFactory=b},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecryptStream=void 0;var n=i(29);class r extends n.DecodeStream{constructor(t,e,i){super(e),this.str=t,this.dict=t.dict,this.decrypt=i,this.nextChunk=null,this.initialized=!1}readBlock(){let t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(512),this.initialized=!0),!t||0===t.length)return void(this.eof=!0);this.nextChunk=this.str.getBytes(512);const e=this.nextChunk&&this.nextChunk.length>0;t=(0,this.decrypt)(t,!e);let i=this.bufferLength;const n=t.length,r=this.ensureBuffer(i+n);for(let e=0;e<n;e++)r[i++]=t[e];this.bufferLength=i}}e.DecryptStream=r},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAFactory=void 0;var n=i(77),r=i(81),s=i(87),o=i(85),a=i(78),l=i(2),c=i(88),h=i(98);class u{constructor(t){try{this.root=(new c.XFAParser).parse(u._createDocument(t));const e=new r.Binder(this.root);this.form=e.bind(),this.dataHandler=new s.DataHandler(this.root,e.getData()),this.form[n.$globalData].template=this.form}catch(t){(0,l.warn)(`XFA - an error occurred during parsing and binding: ${t}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const t=this.form[n.$toPages]();return new Promise(((e,i)=>{const n=()=>{try{const i=t.next();i.done?e(i.value):setTimeout(n,0)}catch(t){i(t)}};setTimeout(n,0)}))}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map((t=>{const{width:e,height:i}=t.attributes.style;return[0,0,parseInt(e),parseInt(i)]}))}catch(t){(0,l.warn)(`XFA - an error occurred during layout: ${t}`)}}getBoundingBox(t){return this.dims[t]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(t){this.form[n.$globalData].images=t}setFonts(t){this.form[n.$globalData].fontFinder=new o.FontFinder(t);const e=[];for(let t of this.form[n.$globalData].usedTypefaces)t=(0,a.stripQuotes)(t),this.form[n.$globalData].fontFinder.find(t)||e.push(t);return e.length>0?e:null}appendFonts(t,e){this.form[n.$globalData].fontFinder.add(t,e)}async getPages(){this.pages||await this._createPages();const t=this.pages;return this.pages=null,t}serializeData(t){return this.dataHandler.serialize(t)}static _createDocument(t){return t["/xdp:xdp"]?Object.values(t).join(""):t["xdp:xdp"]}static getRichTextAsHtml(t){if(!t||"string"!=typeof t)return null;try{let e=new c.XFAParser(h.XhtmlNamespace,!0).parse(t);if(!["body","xhtml"].includes(e[n.$nodeName])){const t=h.XhtmlNamespace.body({});t[n.$appendChild](e),e=t}const i=e[n.$toHTML]();if(!i.success)return null;const{html:r}=i,{attributes:s}=r;return s&&(s.class&&(s.class=s.class.filter((t=>!t.startsWith("xfa")))),s.dir="auto"),{html:r,str:e[n.$text]()}}catch(t){(0,l.warn)(`XFA - an error occurred during parsing of rich text: ${t}`)}return null}}e.XFAFactory=u},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XmlObject=e.XFAObjectArray=e.XFAObject=e.XFAAttribute=e.StringObject=e.OptionObject=e.Option10=e.Option01=e.IntegerObject=e.ContentObject=e.$uid=e.$toStyle=e.$toString=e.$toPages=e.$toHTML=e.$text=e.$tabIndex=e.$setValue=e.$setSetAttributes=e.$setId=e.$searchNode=e.$root=e.$resolvePrototypes=e.$removeChild=e.$pushPara=e.$pushGlyphs=e.$popPara=e.$onText=e.$onChildCheck=e.$onChild=e.$nsAttributes=e.$nodeName=e.$namespaceId=e.$isUsable=e.$isTransparent=e.$isThereMoreWidth=e.$isSplittable=e.$isNsAgnostic=e.$isDescendent=e.$isDataValue=e.$isCDATAXml=e.$isBindable=e.$insertAt=e.$indexOf=e.$ids=e.$hasSettableValue=e.$globalData=e.$getTemplateRoot=e.$getSubformParent=e.$getRealChildrenByNameIt=e.$getParent=e.$getNextPage=e.$getExtra=e.$getDataValue=e.$getContainedChildren=e.$getChildrenByNameIt=e.$getChildrenByName=e.$getChildrenByClass=e.$getChildren=e.$getAvailableSpace=e.$getAttributes=e.$getAttributeIt=e.$flushHTML=e.$finalize=e.$extra=e.$dump=e.$data=e.$content=e.$consumed=e.$clone=e.$cleanup=e.$cleanPage=e.$clean=e.$childrenToHTML=e.$appendChild=e.$addHTML=e.$acceptWhitespace=void 0;var n=i(78),r=i(2),s=i(8),o=i(79),a=i(80);const l=Symbol();e.$acceptWhitespace=l;const c=Symbol();e.$addHTML=c;const h=Symbol();e.$appendChild=h;const u=Symbol();e.$childrenToHTML=u;const p=Symbol();e.$clean=p;const d=Symbol();e.$cleanPage=d;const f=Symbol();e.$cleanup=f;const g=Symbol();e.$clone=g;const m=Symbol();e.$consumed=m;const y=Symbol("content");e.$content=y;const v=Symbol("data");e.$data=v;const b=Symbol();e.$dump=b;const w=Symbol("extra");e.$extra=w;const x=Symbol();e.$finalize=x;const S=Symbol();e.$flushHTML=S;const k=Symbol();e.$getAttributeIt=k;const C=Symbol();e.$getAttributes=C;const A=Symbol();e.$getAvailableSpace=A;const _=Symbol();e.$getChildrenByClass=_;const T=Symbol();e.$getChildrenByName=T;const O=Symbol();e.$getChildrenByNameIt=O;const E=Symbol();e.$getDataValue=E;const M=Symbol();e.$getExtra=M;const P=Symbol();e.$getRealChildrenByNameIt=P;const I=Symbol();e.$getChildren=I;const F=Symbol();e.$getContainedChildren=F;const D=Symbol();e.$getNextPage=D;const R=Symbol();e.$getSubformParent=R;const L=Symbol();e.$getParent=L;const N=Symbol();e.$getTemplateRoot=N;const B=Symbol();e.$globalData=B;const j=Symbol();e.$hasSettableValue=j;const z=Symbol();e.$ids=z;const U=Symbol();e.$indexOf=U;const $=Symbol();e.$insertAt=$;const H=Symbol();e.$isCDATAXml=H;const V=Symbol();e.$isBindable=V;const q=Symbol();e.$isDataValue=q;const W=Symbol();e.$isDescendent=W;const X=Symbol();e.$isNsAgnostic=X;const G=Symbol();e.$isSplittable=G;const K=Symbol();e.$isThereMoreWidth=K;const Y=Symbol();e.$isTransparent=Y;const J=Symbol();e.$isUsable=J;const Z=Symbol(),Q=Symbol("namespaceId");e.$namespaceId=Q;const tt=Symbol("nodeName");e.$nodeName=tt;const et=Symbol();e.$nsAttributes=et;const it=Symbol();e.$onChild=it;const nt=Symbol();e.$onChildCheck=nt;const rt=Symbol();e.$onText=rt;const st=Symbol();e.$pushGlyphs=st;const ot=Symbol();e.$popPara=ot;const at=Symbol();e.$pushPara=at;const lt=Symbol();e.$removeChild=lt;const ct=Symbol("root");e.$root=ct;const ht=Symbol();e.$resolvePrototypes=ht;const ut=Symbol();e.$searchNode=ut;const pt=Symbol();e.$setId=pt;const dt=Symbol();e.$setSetAttributes=dt;const ft=Symbol();e.$setValue=ft;const gt=Symbol();e.$tabIndex=gt;const mt=Symbol();e.$text=mt;const yt=Symbol();e.$toPages=yt;const vt=Symbol();e.$toHTML=vt;const bt=Symbol();e.$toString=bt;const wt=Symbol();e.$toStyle=wt;const xt=Symbol("uid");e.$uid=xt;const St=Symbol(),kt=Symbol(),Ct=Symbol(),At=Symbol("_children"),_t=Symbol(),Tt=Symbol(),Ot=Symbol(),Et=Symbol(),Mt=Symbol(),Pt=Symbol(),It=Symbol(),Ft=Symbol(),Dt=Symbol(),Rt=Symbol("parent"),Lt=Symbol(),Nt=Symbol(),Bt=Symbol();let jt=0;const zt=o.NamespaceIds.datasets.id;class Ut{constructor(t,e,i=!1){this[Q]=t,this[tt]=e,this[It]=i,this[Rt]=null,this[At]=[],this[xt]=`${e}${jt++}`,this[B]=null}[it](t){if(!this[It]||!this[nt](t))return!1;const e=t[tt],i=this[e];if(!(i instanceof $t))return null!==i&&this[lt](i),this[e]=t,this[h](t),!0;if(i.push(t))return this[h](t),!0;let n="";return this.id?n=` (id: ${this.id})`:this.name&&(n=` (name: ${this.name} ${this.h.value})`),(0,r.warn)(`XFA - node "${this[tt]}"${n} has already enough "${e}"!`),!1}[nt](t){return this.hasOwnProperty(t[tt])&&t[Q]===this[Q]}[X](){return!1}[l](){return!1}[H](){return!1}[V](){return!1}[ot](){this.para&&this[N]()[w].paraStack.pop()}[at](){this[N]()[w].paraStack.push(this.para)}[pt](t){this.id&&this[Q]===o.NamespaceIds.template.id&&t.set(this.id,this)}[N](){return this[B].template}[G](){return!1}[K](){return!1}[h](t){t[Rt]=this,this[At].push(t),!t[B]&&this[B]&&(t[B]=this[B])}[lt](t){const e=this[At].indexOf(t);this[At].splice(e,1)}[j](){return this.hasOwnProperty("value")}[ft](t){}[rt](t){}[x](){}[p](t){delete this[It],this[f]&&(t.clean(this[f]),delete this[f])}[U](t){return this[At].indexOf(t)}[$](t,e){e[Rt]=this,this[At].splice(t,0,e),!e[B]&&this[B]&&(e[B]=this[B])}[Y](){return!this.name}[Z](){return""}[mt](){return 0===this[At].length?this[y]:this[At].map((t=>t[mt]())).join("")}get[Ct](){const t=Object.getPrototypeOf(this);if(!t._attributes){const e=t._attributes=new Set;for(const t of Object.getOwnPropertyNames(this)){if(null===this[t]||this[t]instanceof Ut||this[t]instanceof $t)break;e.add(t)}}return(0,r.shadow)(this,Ct,t._attributes)}[W](t){let e=this;for(;e;){if(e===t)return!0;e=e[L]()}return!1}[L](){return this[Rt]}[R](){return this[L]()}[I](t=null){return t?this[t]:this[At]}[b](){const t=Object.create(null);this[y]&&(t.$content=this[y]);for(const e of Object.getOwnPropertyNames(this)){const i=this[e];null!==i&&(i instanceof Ut?t[e]=i[b]():i instanceof $t?i.isEmpty()||(t[e]=i.dump()):t[e]=i)}return t}[wt](){return null}[vt](){return n.HTMLResult.EMPTY}*[F](){for(const t of this[I]())yield t}*[Et](t,e){for(const i of this[F]())if(!t||e===t.has(i[tt])){const t=this[A](),e=i[vt](t);e.success||(this[w].failingNode=i),yield e}}[S](){return null}[c](t,e){this[w].children.push(t)}[A](){}[u]({filter:t=null,include:e=!0}){if(this[w].generator){const t=this[A](),e=this[w].failingNode[vt](t);if(!e.success)return e;e.html&&this[c](e.html,e.bbox),delete this[w].failingNode}else this[w].generator=this[Et](t,e);for(;;){const t=this[w].generator.next();if(t.done)break;const e=t.value;if(!e.success)return e;e.html&&this[c](e.html,e.bbox)}return this[w].generator=null,n.HTMLResult.EMPTY}[dt](t){this[Nt]=new Set(Object.keys(t))}[Pt](t){const e=this[Ct],i=this[Nt];return[...t].filter((t=>e.has(t)&&!i.has(t)))}[ht](t,e=new Set){for(const i of this[At])i[Lt](t,e)}[Lt](t,e){const i=this[Mt](t,e);i?this[St](i,t,e):this[ht](t,e)}[Mt](t,e){const{use:i,usehref:n}=this;if(!i&&!n)return null;let s=null,o=null,l=null,c=i;if(n?(c=n,n.startsWith("#som(")&&n.endsWith(")")?o=n.slice("#som(".length,n.length-1):n.startsWith(".#som(")&&n.endsWith(")")?o=n.slice(".#som(".length,n.length-1):n.startsWith("#")?l=n.slice(1):n.startsWith(".#")&&(l=n.slice(2))):i.startsWith("#")?l=i.slice(1):o=i,this.use=this.usehref="",l?s=t.get(l):(s=(0,a.searchNode)(t.get(ct),this,o,!0,!1),s&&(s=s[0])),!s)return(0,r.warn)(`XFA - Invalid prototype reference: ${c}.`),null;if(s[tt]!==this[tt])return(0,r.warn)(`XFA - Incompatible prototype: ${s[tt]} !== ${this[tt]}.`),null;if(e.has(s))return(0,r.warn)("XFA - Cycle detected in prototypes use."),null;e.add(s);const h=s[Mt](t,e);return h&&s[St](h,t,e),s[ht](t,e),e.delete(s),s}[St](t,e,i){if(i.has(t))(0,r.warn)("XFA - Cycle detected in prototypes use.");else{!this[y]&&t[y]&&(this[y]=t[y]),new Set(i).add(t);for(const e of this[Pt](t[Nt]))this[e]=t[e],this[Nt]&&this[Nt].add(e);for(const n of Object.getOwnPropertyNames(this)){if(this[Ct].has(n))continue;const r=this[n],s=t[n];if(r instanceof $t){for(const t of r[At])t[Lt](e,i);for(let n=r[At].length,o=s[At].length;n<o;n++){const s=t[At][n][g]();if(!r.push(s))break;s[Rt]=this,this[At].push(s),s[Lt](e,i)}}else if(null===r){if(null!==s){const t=s[g]();t[Rt]=this,this[n]=t,this[At].push(t),t[Lt](e,i)}}else r[ht](e,i),s&&r[St](s,e,i)}}}static[_t](t){return Array.isArray(t)?t.map((t=>Ut[_t](t))):"object"==typeof t&&null!==t?Object.assign({},t):t}[g](){const t=Object.create(Object.getPrototypeOf(this));for(const e of Object.getOwnPropertySymbols(this))try{t[e]=this[e]}catch(i){(0,r.shadow)(t,e,this[e])}t[xt]=`${t[tt]}${jt++}`,t[At]=[];for(const e of Object.getOwnPropertyNames(this)){if(this[Ct].has(e)){t[e]=Ut[_t](this[e]);continue}const i=this[e];t[e]=i instanceof $t?new $t(i[Ft]):null}for(const e of this[At]){const i=e[tt],n=e[g]();t[At].push(n),n[Rt]=t,null===t[i]?t[i]=n:t[i][At].push(n)}return t}[I](t=null){return t?this[At].filter((e=>e[tt]===t)):this[At]}[_](t){return this[t]}[T](t,e,i=!0){return Array.from(this[O](t,e,i))}*[O](t,e,i=!0){if("parent"!==t){for(const i of this[At])i[tt]===t&&(yield i),i.name===t&&(yield i),(e||i[Y]())&&(yield*i[O](t,e,!1));i&&this[Ct].has(t)&&(yield new Ht(this,t,this[t]))}else yield this[Rt]}}e.XFAObject=Ut;class $t{constructor(t=1/0){this[Ft]=t,this[At]=[]}push(t){return this[At].length<=this[Ft]?(this[At].push(t),!0):((0,r.warn)(`XFA - node "${t[tt]}" accepts no more than ${this[Ft]} children`),!1)}isEmpty(){return 0===this[At].length}dump(){return 1===this[At].length?this[At][0][b]():this[At].map((t=>t[b]()))}[g](){const t=new $t(this[Ft]);return t[At]=this[At].map((t=>t[g]())),t}get children(){return this[At]}clear(){this[At].length=0}}e.XFAObjectArray=$t;class Ht{constructor(t,e,i){this[Rt]=t,this[tt]=e,this[y]=i,this[m]=!1,this[xt]="attribute"+jt++}[L](){return this[Rt]}[q](){return!0}[E](){return this[y].trim()}[ft](t){t=t.value||"",this[y]=t.toString()}[mt](){return this[y]}[W](t){return this[Rt]===t||this[Rt][W](t)}}e.XFAAttribute=Ht;class Vt extends Ut{constructor(t,e,i={}){if(super(t,e),this[y]="",this[Tt]=null,"#text"!==e){const t=new Map;this[kt]=t;for(const[e,n]of Object.entries(i))t.set(e,new Ht(this,e,n));if(i.hasOwnProperty(et)){const t=i[et].xfa.dataNode;void 0!==t&&("dataGroup"===t?this[Tt]=!1:"dataValue"===t&&(this[Tt]=!0))}}this[m]=!1}[bt](t){const e=this[tt];if("#text"===e)return void t.push((0,s.encodeToXmlString)(this[y]));const i=(0,r.utf8StringToString)(e),n=this[Q]===zt?"xfa:":"";t.push(`<${n}${i}`);for(const[e,i]of this[kt].entries()){const n=(0,r.utf8StringToString)(e);t.push(` ${n}="${(0,s.encodeToXmlString)(i[y])}"`)}if(null!==this[Tt]&&(this[Tt]?t.push(' xfa:dataNode="dataValue"'):t.push(' xfa:dataNode="dataGroup"')),this[y]||0!==this[At].length){if(t.push(">"),this[y])"string"==typeof this[y]?t.push((0,s.encodeToXmlString)(this[y])):this[y][bt](t);else for(const e of this[At])e[bt](t);t.push(`</${n}${i}>`)}else t.push("/>")}[it](t){if(this[y]){const t=new Vt(this[Q],"#text");this[h](t),t[y]=this[y],this[y]=""}return this[h](t),!0}[rt](t){this[y]+=t}[x](){if(this[y]&&this[At].length>0){const t=new Vt(this[Q],"#text");this[h](t),t[y]=this[y],delete this[y]}}[vt](){return"#text"===this[tt]?n.HTMLResult.success({name:"#text",value:this[y]}):n.HTMLResult.EMPTY}[I](t=null){return t?this[At].filter((e=>e[tt]===t)):this[At]}[C](){return this[kt]}[_](t){const e=this[kt].get(t);return void 0!==e?e:this[I](t)}*[O](t,e){const i=this[kt].get(t);i&&(yield i);for(const i of this[At])i[tt]===t&&(yield i),e&&(yield*i[O](t,e))}*[k](t,e){const i=this[kt].get(t);!i||e&&i[m]||(yield i);for(const i of this[At])yield*i[k](t,e)}*[P](t,e,i){for(const n of this[At])n[tt]!==t||i&&n[m]||(yield n),e&&(yield*n[P](t,e,i))}[q](){return null===this[Tt]?0===this[At].length||this[At][0][Q]===o.NamespaceIds.xhtml.id:this[Tt]}[E](){return null===this[Tt]?0===this[At].length?this[y].trim():this[At][0][Q]===o.NamespaceIds.xhtml.id?this[At][0][mt]().trim():null:this[y].trim()}[ft](t){t=t.value||"",this[y]=t.toString()}[b](t=!1){const e=Object.create(null);t&&(e.$ns=this[Q]),this[y]&&(e.$content=this[y]),e.$name=this[tt],e.children=[];for(const i of this[At])e.children.push(i[b](t));e.attributes=Object.create(null);for(const[t,i]of this[kt])e.attributes[t]=i[y];return e}}e.XmlObject=Vt;class qt extends Ut{constructor(t,e){super(t,e),this[y]=""}[rt](t){this[y]+=t}[x](){}}e.ContentObject=qt,e.OptionObject=class extends qt{constructor(t,e,i){super(t,e),this[Dt]=i}[x](){this[y]=(0,n.getKeyword)({data:this[y],defaultValue:this[Dt][0],validate:t=>this[Dt].includes(t)})}[p](t){super[p](t),delete this[Dt]}},e.StringObject=class extends qt{[x](){this[y]=this[y].trim()}};class Wt extends qt{constructor(t,e,i,n){super(t,e),this[Ot]=i,this[Bt]=n}[x](){this[y]=(0,n.getInteger)({data:this[y],defaultValue:this[Ot],validate:this[Bt]})}[p](t){super[p](t),delete this[Ot],delete this[Bt]}}e.IntegerObject=Wt,e.Option01=class extends Wt{constructor(t,e){super(t,e,0,(t=>1===t))}},e.Option10=class extends Wt{constructor(t,e){super(t,e,1,(t=>0===t))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLResult=void 0,e.getBBox=function(t){const e=-1;if(!t)return{x:e,y:e,width:e,height:e};const i=t.trim().split(/\s*,\s*/).map((t=>a(t,"-1")));if(i.length<4||i[2]<0||i[3]<0)return{x:e,y:e,width:e,height:e};const[n,r,s,o]=i;return{x:n,y:r,width:s,height:o}},e.getColor=function(t,e=[0,0,0]){let[i,n,r]=e;if(!t)return{r:i,g:n,b:r};const s=t.trim().split(/\s*,\s*/).map((t=>Math.min(Math.max(0,parseInt(t.trim(),10)),255))).map((t=>isNaN(t)?0:t));return s.length<3||([i,n,r]=s),{r:i,g:n,b:r}},e.getFloat=function({data:t,defaultValue:e,validate:i}){if(!t)return e;t=t.trim();const n=parseFloat(t);return!isNaN(n)&&i(n)?n:e},e.getInteger=function({data:t,defaultValue:e,validate:i}){if(!t)return e;t=t.trim();const n=parseInt(t,10);return!isNaN(n)&&i(n)?n:e},e.getKeyword=o,e.getMeasurement=a,e.getRatio=function(t){if(!t)return{num:1,den:1};const e=t.trim().split(/\s*:\s*/).map((t=>parseFloat(t))).filter((t=>!isNaN(t)));if(1===e.length&&e.push(1),0===e.length)return{num:1,den:1};const[i,n]=e;return{num:i,den:n}},e.getRelevant=function(t){return t?t.trim().split(/\s+/).map((t=>({excluded:"-"===t[0],viewname:t.substring(1)}))):[]},e.getStringOption=function(t,e){return o({data:t,defaultValue:e[0],validate:t=>e.includes(t)})},e.stripQuotes=function(t){return t.startsWith("'")||t.startsWith('"')?t.slice(1,t.length-1):t};var n=i(2);const r={pt:t=>t,cm:t=>t/2.54*72,mm:t=>t/25.4*72,in:t=>72*t,px:t=>t},s=/([+-]?\d+\.?\d*)(.*)/;function o({data:t,defaultValue:e,validate:i}){return t&&i(t=t.trim())?t:e}function a(t,e="0"){if(e=e||"0",!t)return a(e);const i=t.trim().match(s);if(!i)return a(e);const[,n,o]=i,l=parseFloat(n);if(isNaN(l))return a(e);if(0===l)return 0;const c=r[o];return c?c(l):l}class l{static get FAILURE(){return(0,n.shadow)(this,"FAILURE",new l(!1,null,null,null))}static get EMPTY(){return(0,n.shadow)(this,"EMPTY",new l(!0,null,null,null))}constructor(t,e,i,n){this.success=t,this.html=e,this.bbox=i,this.breakNode=n}isBreak(){return!!this.breakNode}static breakNode(t){return new l(!1,null,null,t)}static success(t,e=null){return new l(!0,t,e,null)}}e.HTMLResult=l},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceIds=e.$buildXFAObject=void 0;const i=Symbol();e.$buildXFAObject=i,e.NamespaceIds={config:{id:0,check:t=>t.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:t=>"http://ns.adobe.com/xdp/pdf/"===t},signature:{id:6,check:t=>"http://www.w3.org/2000/09/xmldsig#"===t},sourceSet:{id:7,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:t=>"http://www.w3.org/1999/XSL/Transform"===t},template:{id:9,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:t=>t.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:t=>"http://ns.adobe.com/xdp/"===t},xfdf:{id:12,check:t=>"http://ns.adobe.com/xfdf/"===t},xhtml:{id:13,check:t=>"http://www.w3.org/1999/xhtml"===t},xmpmeta:{id:14,check:t=>"http://ns.adobe.com/xmpmeta/"===t}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDataNode=function(t,e,i){const r=m(i);if(!r)return null;if(r.some((t=>t.operator===c)))return null;const o=d.get(r[0].name);let a=0;o?(t=o(t,e),a=1):t=e||t;for(let e=r.length;a<e;a++){const{name:e,operator:i,index:o}=r[a];if(!isFinite(o))return r[a].index=0,y(t,r.slice(a));let u;switch(i){case l:u=t[n.$getChildrenByName](e,!1);break;case c:u=t[n.$getChildrenByName](e,!0);break;case h:u=t[n.$getChildrenByClass](e),u=u instanceof n.XFAObjectArray?u.children:[u]}if(0===u.length)return y(t,r.slice(a));if(!(o<u.length))return r[a].index=o-u.length,y(t,r.slice(a));{const e=u[o];if(!(e instanceof n.XFAObject))return(0,s.warn)("XFA - Cannot create a node."),null;t=e}}return null},e.searchNode=function(t,e,i,r=!0,s=!0){const o=m(i,r);if(!o)return null;const a=d.get(o[0].name);let u,p=0;a?(u=!0,t=[a(t,e)],p=1):(u=null===e,t=[e||t]);for(let i=o.length;p<i;p++){const{name:i,cacheName:r,operator:a,index:d}=o[p],g=[];for(const e of t){if(!(e instanceof n.XFAObject))continue;let t,o;if(s&&(o=f.get(e),o||(o=new Map,f.set(e,o)),t=o.get(r)),!t){switch(a){case l:t=e[n.$getChildrenByName](i,!1);break;case c:t=e[n.$getChildrenByName](i,!0);break;case h:t=e[n.$getChildrenByClass](i),t=t instanceof n.XFAObjectArray?t.children:[t]}s&&o.set(r,t)}t.length>0&&g.push(t)}if(0!==g.length||u||0!==p)t=isFinite(d)?g.filter((t=>d<t.length)).map((t=>t[d])):g.reduce(((t,e)=>t.concat(e)),[]);else{const i=e[n.$getParent]();if(!(e=i))return null;p=-1,t=[e]}}return 0===t.length?null:t};var n=i(77),r=i(79),s=i(2);const o=/^[^.[]+/,a=/^[^\]]+/,l=0,c=1,h=2,u=3,p=4,d=new Map([["$data",(t,e)=>t.datasets?t.datasets.data:t],["$record",(t,e)=>(t.datasets?t.datasets.data:t)[n.$getChildren]()[0]],["$template",(t,e)=>t.template],["$connectionSet",(t,e)=>t.connectionSet],["$form",(t,e)=>t.form],["$layout",(t,e)=>t.layout],["$host",(t,e)=>t.host],["$dataWindow",(t,e)=>t.dataWindow],["$event",(t,e)=>t.event],["!",(t,e)=>t.datasets],["$xfa",(t,e)=>t],["xfa",(t,e)=>t],["$",(t,e)=>e]]),f=new WeakMap,g=r.NamespaceIds.datasets.id;function m(t,e,i=!0){let n=t.match(o);if(!n)return null;let[r]=n;const d=[{name:r,cacheName:"."+r,index:0,js:null,formCalc:null,operator:l}];let f=r.length;for(;f<t.length;){const m=f;if("["===t.charAt(f++)){if(n=t.slice(f).match(a),!n)return(0,s.warn)("XFA - Invalid index in SOM expression"),null;d[d.length-1].index="*"===(g=(g=n[0]).trim())?1/0:parseInt(g,10)||0,f+=n[0].length+1;continue}let y;switch(t.charAt(f)){case".":if(!e)return null;f++,y=c;break;case"#":f++,y=h;break;case"[":if(i)return(0,s.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;y=u;break;case"(":if(i)return(0,s.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;y=p;break;default:y=l}if(n=t.slice(f).match(o),!n)break;[r]=n,f+=r.length,d.push({name:r,cacheName:t.slice(m,f),operator:y,index:0,js:null,formCalc:null})}var g;return d}function y(t,e){let i=null;for(const{name:r,index:s}of e){for(let e=0,o=isFinite(s)?s:0;e<=o;e++){const e=t[n.$namespaceId]===g?-1:t[n.$namespaceId];i=new n.XmlObject(e,r),t[n.$appendChild](i)}t=i}return i}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Binder=void 0;var n=i(77),r=i(82),s=i(80),o=i(79),a=i(2);const l=o.NamespaceIds.datasets.id;function c(t){const e=new r.Text({});return e[n.$content]=t,e}e.Binder=class{constructor(t){this.root=t,this.datasets=t.datasets,t.datasets&&t.datasets.data?this.data=t.datasets.data:this.data=new n.XmlObject(o.NamespaceIds.datasets.id,"data"),this.emptyMerge=0===this.data[n.$getChildren]().length,this.root.form=this.form=t.template[n.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(t,e,i){if(t[n.$data]=e,t[n.$hasSettableValue]())if(e[n.$isDataValue]()){const i=e[n.$getDataValue]();t[n.$setValue](c(i))}else if(t instanceof r.Field&&t.ui&&t.ui.choiceList&&"multiSelect"===t.ui.choiceList.open){const i=e[n.$getChildren]().map((t=>t[n.$content].trim())).join("\n");t[n.$setValue](c(i))}else this._isConsumeData()&&(0,a.warn)("XFA - Nodes haven't the same type.");else!e[n.$isDataValue]()||this._isMatchTemplate()?this._bindElement(t,e):(0,a.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(t,e,i,r){if(!t)return null;let s,a;for(let r=0;r<3;r++){for(s=i[n.$getRealChildrenByNameIt](t,!1,!0);a=s.next().value,a;)if(e===a[n.$isDataValue]())return a;if(i[n.$namespaceId]===o.NamespaceIds.datasets.id&&"data"===i[n.$nodeName])break;i=i[n.$getParent]()}return r?(s=this.data[n.$getRealChildrenByNameIt](t,!0,!1),a=s.next().value,a||(s=this.data[n.$getAttributeIt](t,!0),a=s.next().value,a&&a[n.$isDataValue]()?a:null)):null}_setProperties(t,e){if(t.hasOwnProperty("setProperty"))for(const{ref:i,target:o,connection:l}of t.setProperty.children){if(l)continue;if(!i)continue;const c=(0,s.searchNode)(this.root,e,i,!1,!1);if(!c){(0,a.warn)(`XFA - Invalid reference: ${i}.`);continue}const[h]=c;if(!h[n.$isDescendent](this.data)){(0,a.warn)("XFA - Invalid node: must be a data node.");continue}const u=(0,s.searchNode)(this.root,t,o,!1,!1);if(!u){(0,a.warn)(`XFA - Invalid target: ${o}.`);continue}const[p]=u;if(!p[n.$isDescendent](t)){(0,a.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const d=p[n.$getParent]();if(p instanceof r.SetProperty||d instanceof r.SetProperty){(0,a.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(p instanceof r.BindItems||d instanceof r.BindItems){(0,a.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const f=h[n.$text](),g=p[n.$nodeName];if(p instanceof n.XFAAttribute){const t=Object.create(null);t[g]=f;const e=Reflect.construct(Object.getPrototypeOf(d).constructor,[t]);d[g]=e[g]}else p.hasOwnProperty(n.$content)?(p[n.$data]=h,p[n.$content]=f,p[n.$finalize]()):(0,a.warn)("XFA - Invalid node to use in setProperty")}}_bindItems(t,e){if(!t.hasOwnProperty("items")||!t.hasOwnProperty("bindItems")||t.bindItems.isEmpty())return;for(const e of t.items.children)t[n.$removeChild](e);t.items.clear();const i=new r.Items({}),o=new r.Items({});t[n.$appendChild](i),t.items.push(i),t[n.$appendChild](o),t.items.push(o);for(const{ref:r,labelRef:l,valueRef:h,connection:u}of t.bindItems.children){if(u)continue;if(!r)continue;const t=(0,s.searchNode)(this.root,e,r,!1,!1);if(t)for(const e of t){if(!e[n.$isDescendent](this.datasets)){(0,a.warn)(`XFA - Invalid ref (${r}): must be a datasets child.`);continue}const t=(0,s.searchNode)(this.root,e,l,!0,!1);if(!t){(0,a.warn)(`XFA - Invalid label: ${l}.`);continue}const[u]=t;if(!u[n.$isDescendent](this.datasets)){(0,a.warn)("XFA - Invalid label: must be a datasets child.");continue}const p=(0,s.searchNode)(this.root,e,h,!0,!1);if(!p){(0,a.warn)(`XFA - Invalid value: ${h}.`);continue}const[d]=p;if(!d[n.$isDescendent](this.datasets)){(0,a.warn)("XFA - Invalid value: must be a datasets child.");continue}const f=c(u[n.$text]()),g=c(d[n.$text]());i[n.$appendChild](f),i.text.push(f),o[n.$appendChild](g),o.text.push(g)}else(0,a.warn)(`XFA - Invalid reference: ${r}.`)}}_bindOccurrences(t,e,i){let r;if(e.length>1&&(r=t[n.$clone](),r[n.$removeChild](r.occur),r.occur=null),this._bindValue(t,e[0],i),this._setProperties(t,e[0]),this._bindItems(t,e[0]),1===e.length)return;const s=t[n.$getParent](),o=t[n.$nodeName],a=s[n.$indexOf](t);for(let t=1,l=e.length;t<l;t++){const l=e[t],c=r[n.$clone]();s[o].push(c),s[n.$insertAt](a+t,c),this._bindValue(c,l,i),this._setProperties(c,l),this._bindItems(c,l)}}_createOccurrences(t){if(!this.emptyMerge)return;const{occur:e}=t;if(!e||e.initial<=1)return;const i=t[n.$getParent](),r=t[n.$nodeName];if(!(i[r]instanceof n.XFAObjectArray))return;let s;s=t.name?i[r].children.filter((e=>e.name===t.name)).length:i[r].children.length;const o=i[n.$indexOf](t)+1,a=e.initial-s;if(a){const e=t[n.$clone]();e[n.$removeChild](e.occur),e.occur=null,i[r].push(e),i[n.$insertAt](o,e);for(let t=1;t<a;t++){const s=e[n.$clone]();i[r].push(s),i[n.$insertAt](o+t,s)}}}_getOccurInfo(t){const{name:e,occur:i}=t;if(!i||!e)return[1,1];const n=-1===i.max?1/0:i.max;return[i.min,n]}_setAndBind(t,e){this._setProperties(t,e),this._bindItems(t,e),this._bindElement(t,e)}_bindElement(t,e){const i=[];this._createOccurrences(t);for(const r of t[n.$getChildren]()){if(r[n.$data])continue;if(void 0===this._mergeMode&&"subform"===r[n.$nodeName]){this._mergeMode="consumeData"===r.mergeMode;const t=e[n.$getChildren]();if(t.length>0)this._bindOccurrences(r,[t[0]],null);else if(this.emptyMerge){const t=e[n.$namespaceId]===l?-1:e[n.$namespaceId],i=r[n.$data]=new n.XmlObject(t,r.name||"root");e[n.$appendChild](i),this._bindElement(r,i)}continue}if(!r[n.$isBindable]())continue;let t=!1,o=null,c=null,h=null;if(r.bind){switch(r.bind.match){case"none":this._setAndBind(r,e);continue;case"global":t=!0;break;case"dataRef":if(!r.bind.ref){(0,a.warn)(`XFA - ref is empty in node ${r[n.$nodeName]}.`),this._setAndBind(r,e);continue}c=r.bind.ref}r.bind.picture&&(o=r.bind.picture[n.$content])}const[u,p]=this._getOccurInfo(r);if(c){if(h=(0,s.searchNode)(this.root,e,c,!0,!1),null===h){if(h=(0,s.createDataNode)(this.data,e,c),!h)continue;this._isConsumeData()&&(h[n.$consumed]=!0),this._setAndBind(r,h);continue}this._isConsumeData()&&(h=h.filter((t=>!t[n.$consumed]))),h.length>p?h=h.slice(0,p):0===h.length&&(h=null),h&&this._isConsumeData()&&h.forEach((t=>{t[n.$consumed]=!0}))}else{if(!r.name){this._setAndBind(r,e);continue}if(this._isConsumeData()){const i=[];for(;i.length<p;){const s=this._findDataByNameToConsume(r.name,r[n.$hasSettableValue](),e,t);if(!s)break;s[n.$consumed]=!0,i.push(s)}h=i.length>0?i:null}else{if(h=e[n.$getRealChildrenByNameIt](r.name,!1,this.emptyMerge).next().value,!h){if(0===u){i.push(r);continue}const t=e[n.$namespaceId]===l?-1:e[n.$namespaceId];h=r[n.$data]=new n.XmlObject(t,r.name),this.emptyMerge&&(h[n.$consumed]=!0),e[n.$appendChild](h),this._setAndBind(r,h);continue}this.emptyMerge&&(h[n.$consumed]=!0),h=[h]}}h?this._bindOccurrences(r,h,o):u>0?this._setAndBind(r,e):i.push(r)}i.forEach((t=>t[n.$getParent]()[n.$removeChild](t)))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Value=e.Text=e.TemplateNamespace=e.Template=e.SetProperty=e.Items=e.Field=e.BindItems=void 0;var n=i(77),r=i(79),s=i(83),o=i(84),a=i(78),l=i(2),c=i(85),h=i(8),u=i(80);const p=r.NamespaceIds.template.id,d="http://www.w3.org/2000/svg",f=/^H(\d+)$/,g=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),m=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function y(t){if(!t||!t.border)return{w:0,h:0};const e=t.border[n.$getExtra]();return e?{w:e.widths[0]+e.widths[2]+e.insets[0]+e.insets[2],h:e.widths[1]+e.widths[3]+e.insets[1]+e.insets[3]}:{w:0,h:0}}function v(t){return t.margin&&(t.margin.topInset||t.margin.rightInset||t.margin.bottomInset||t.margin.leftInset)}function b(t,e){if(!t.value){const e=new Ie({});t[n.$appendChild](e),t.value=e}t.value[n.$setValue](e)}function*w(t){for(const e of t[n.$getChildren]())e instanceof ve?yield*e[n.$getContainedChildren]():yield e}function x(t){for(;t;){if(!t.traversal)return void(t[n.$tabIndex]=t[n.$getParent]()[n.$tabIndex]);if(t[n.$tabIndex])return;let e=null;for(const i of t.traversal[n.$getChildren]())if("next"===i.operation){e=i;break}if(!e||!e.ref)return void(t[n.$tabIndex]=t[n.$getParent]()[n.$tabIndex]);const i=t[n.$getTemplateRoot]();t[n.$tabIndex]=++i[n.$tabIndex];const r=i[n.$searchNode](e.ref,t);if(!r)return;t=r[0]}}function S(t,e){const i=t.assist;if(i){const t=i[n.$toHTML]();t&&(e.title=t);const r=i.role.match(f);if(r){const t="heading",i=r[1];e.role=t,e["aria-level"]=i}}if("table"===t.layout)e.role="table";else if("row"===t.layout)e.role="row";else{const i=t[n.$getParent]();"row"===i.layout&&(i.assist&&"TH"===i.assist.role?e.role="columnheader":e.role="cell")}}function k(t){if(!t.assist)return null;const e=t.assist;return e.speak&&""!==e.speak[n.$content]?e.speak[n.$content]:e.toolTip?e.toolTip[n.$content]:null}function C(t){return a.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:t}]})}function A(t){const e=t[n.$getTemplateRoot]();null===e[n.$extra].firstUnsplittable&&(e[n.$extra].firstUnsplittable=t,e[n.$extra].noLayoutFailure=!0)}function _(t){const e=t[n.$getTemplateRoot]();e[n.$extra].firstUnsplittable===t&&(e[n.$extra].noLayoutFailure=!1)}function T(t){if(t[n.$extra])return!1;if(t[n.$extra]=Object.create(null),"auto"===t.targetType)return!1;const e=t[n.$getTemplateRoot]();let i=null;if(t.target){if(i=e[n.$searchNode](t.target,t[n.$getParent]()),!i)return!1;i=i[0]}const{currentPageArea:r,currentContentArea:s}=e[n.$extra];if("pageArea"===t.targetType)return i instanceof Jt||(i=null),t.startNew?(t[n.$extra].target=i||r,!0):!(!i||i===r||(t[n.$extra].target=i,0));i instanceof Z||(i=null);const o=i&&i[n.$getParent]();let a,l=o;if(t.startNew)if(i){const t=o.contentArea.children,e=t.indexOf(s),n=t.indexOf(i);-1!==e&&e<n&&(l=null),a=n-1}else a=r.contentArea.children.indexOf(s);else{if(!i||i===s)return!1;a=o.contentArea.children.indexOf(i)-1,l=o===r?null:o}return t[n.$extra].target=l,t[n.$extra].index=a,!0}function O(t,e,i){const r=t[n.$getTemplateRoot](),s=r[n.$extra].noLayoutFailure,o=e[n.$getSubformParent];e[n.$getSubformParent]=()=>t,r[n.$extra].noLayoutFailure=!0;const a=e[n.$toHTML](i);t[n.$addHTML](a.html,a.bbox),r[n.$extra].noLayoutFailure=s,e[n.$getSubformParent]=o}class E extends n.StringObject{constructor(t){super(p,"appearanceFilter"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class M extends n.XFAObject{constructor(t){super(p,"arc",!0),this.circular=(0,a.getInteger)({data:t.circular,defaultValue:0,validate:t=>1===t}),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.startAngle=(0,a.getFloat)({data:t.startAngle,defaultValue:0,validate:t=>!0}),this.sweepAngle=(0,a.getFloat)({data:t.sweepAngle,defaultValue:360,validate:t=>!0}),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null,this.fill=null}[n.$toHTML](){const t=this.edge?this.edge:new ct({}),e=t[n.$toStyle](),i=Object.create(null);let r;this.fill&&"visible"===this.fill.presence?Object.assign(i,this.fill[n.$toStyle]()):i.fill="transparent",i.strokeWidth=(0,o.measureToString)("visible"===t.presence?t.thickness:0),i.stroke=e.color;const s={xmlns:d,style:{width:"100%",height:"100%",overflow:"visible"}};if(360===this.sweepAngle)r={name:"ellipse",attributes:{xmlns:d,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:i}};else{const t=this.startAngle*Math.PI/180,e=this.sweepAngle*Math.PI/180,n=this.sweepAngle>180?1:0,[o,a,l,c]=[50*(1+Math.cos(t)),50*(1-Math.sin(t)),50*(1+Math.cos(t+e)),50*(1-Math.sin(t+e))];r={name:"path",attributes:{xmlns:d,d:`M ${o} ${a} A 50 50 0 ${n} 0 ${l} ${c}`,vectorEffect:"non-scaling-stroke",style:i}},Object.assign(s,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const l={name:"svg",children:[r],attributes:s};return v(this[n.$getParent]()[n.$getParent]())?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[l]}):(l.attributes.style.position="absolute",a.HTMLResult.success(l))}}class P extends n.XFAObject{constructor(t){super(p,"area",!0),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null,this.area=new n.XFAObjectArray,this.draw=new n.XFAObjectArray,this.exObject=new n.XFAObjectArray,this.exclGroup=new n.XFAObjectArray,this.field=new n.XFAObjectArray,this.subform=new n.XFAObjectArray,this.subformSet=new n.XFAObjectArray}*[n.$getContainedChildren](){yield*w(this)}[n.$isTransparent](){return!0}[n.$isBindable](){return!0}[n.$addHTML](t,e){const[i,r,s,o]=e;this[n.$extra].width=Math.max(this[n.$extra].width,i+s),this[n.$extra].height=Math.max(this[n.$extra].height,r+o),this[n.$extra].children.push(t)}[n.$getAvailableSpace](){return this[n.$extra].availableSpace}[n.$toHTML](t){const e=(0,o.toStyle)(this,"position"),i={style:e,id:this[n.$uid],class:["xfaArea"]};(0,o.isPrintOnly)(this)&&i.class.push("xfaPrintOnly"),this.name&&(i.xfaName=this.name);const r=[];this[n.$extra]={children:r,width:0,height:0,availableSpace:t};const s=this[n.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!s.success)return s.isBreak()?s:(delete this[n.$extra],a.HTMLResult.FAILURE);e.width=(0,o.measureToString)(this[n.$extra].width),e.height=(0,o.measureToString)(this[n.$extra].height);const l={name:"div",attributes:i,children:r},c=[this.x,this.y,this[n.$extra].width,this[n.$extra].height];return delete this[n.$extra],a.HTMLResult.success(l,c)}}class I extends n.XFAObject{constructor(t){super(p,"assist",!0),this.id=t.id||"",this.role=t.role||"",this.use=t.use||"",this.usehref=t.usehref||"",this.speak=null,this.toolTip=null}[n.$toHTML](){return this.toolTip&&this.toolTip[n.$content]?this.toolTip[n.$content]:null}}class F extends n.XFAObject{constructor(t){super(p,"barcode",!0),this.charEncoding=(0,a.getKeyword)({data:t.charEncoding?t.charEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.checksum=(0,a.getStringOption)(t.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,a.getInteger)({data:t.dataColumnCount,defaultValue:-1,validate:t=>t>=0}),this.dataLength=(0,a.getInteger)({data:t.dataLength,defaultValue:-1,validate:t=>t>=0}),this.dataPrep=(0,a.getStringOption)(t.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,a.getInteger)({data:t.dataRowCount,defaultValue:-1,validate:t=>t>=0}),this.endChar=t.endChar||"",this.errorCorrectionLevel=(0,a.getInteger)({data:t.errorCorrectionLevel,defaultValue:-1,validate:t=>t>=0&&t<=8}),this.id=t.id||"",this.moduleHeight=(0,a.getMeasurement)(t.moduleHeight,"5mm"),this.moduleWidth=(0,a.getMeasurement)(t.moduleWidth,"0.25mm"),this.printCheckDigit=(0,a.getInteger)({data:t.printCheckDigit,defaultValue:0,validate:t=>1===t}),this.rowColumnRatio=(0,a.getRatio)(t.rowColumnRatio),this.startChar=t.startChar||"",this.textLocation=(0,a.getStringOption)(t.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,a.getInteger)({data:t.truncate,defaultValue:0,validate:t=>1===t}),this.type=(0,a.getStringOption)(t.type?t.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,a.getStringOption)(t.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=t.use||"",this.usehref=t.usehref||"",this.wideNarrowRatio=(0,a.getRatio)(t.wideNarrowRatio),this.encrypt=null,this.extras=null}}class D extends n.XFAObject{constructor(t){super(p,"bind",!0),this.match=(0,a.getStringOption)(t.match,["once","dataRef","global","none"]),this.ref=t.ref||"",this.picture=null}}class R extends n.XFAObject{constructor(t){super(p,"bindItems"),this.connection=t.connection||"",this.labelRef=t.labelRef||"",this.ref=t.ref||"",this.valueRef=t.valueRef||""}}e.BindItems=R;class L extends n.XFAObject{constructor(t){super(p,"bookend"),this.id=t.id||"",this.leader=t.leader||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}}class N extends n.Option01{constructor(t){super(p,"boolean"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$toHTML](t){return C(1===this[n.$content]?"1":"0")}}class B extends n.XFAObject{constructor(t){super(p,"border",!0),this.break=(0,a.getStringOption)(t.break,["close","open"]),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new n.XFAObjectArray(4),this.edge=new n.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[n.$getExtra](){if(!this[n.$extra]){const t=this.edge.children.slice();if(t.length<4){const e=t[t.length-1]||new ct({});for(let i=t.length;i<4;i++)t.push(e)}const e=t.map((t=>t.thickness)),i=[0,0,0,0];this.margin&&(i[0]=this.margin.topInset,i[1]=this.margin.rightInset,i[2]=this.margin.bottomInset,i[3]=this.margin.leftInset),this[n.$extra]={widths:e,insets:i,edges:t}}return this[n.$extra]}[n.$toStyle](){const{edges:t}=this[n.$getExtra](),e=t.map((t=>{const e=t[n.$toStyle]();return e.color=e.color||"#000000",e})),i=Object.create(null);if(this.margin&&Object.assign(i,this.margin[n.$toStyle]()),this.fill&&"visible"===this.fill.presence&&Object.assign(i,this.fill[n.$toStyle]()),this.corner.children.some((t=>0!==t.radius))){const t=this.corner.children.map((t=>t[n.$toStyle]()));if(2===t.length||3===t.length){const e=t[t.length-1];for(let i=t.length;i<4;i++)t.push(e)}i.borderRadius=t.map((t=>t.radius)).join(" ")}switch(this.presence){case"invisible":case"hidden":i.borderStyle="";break;case"inactive":i.borderStyle="none";break;default:i.borderStyle=e.map((t=>t.style)).join(" ")}return i.borderWidth=e.map((t=>t.width)).join(" "),i.borderColor=e.map((t=>t.color)).join(" "),i}}class j extends n.XFAObject{constructor(t){super(p,"break",!0),this.after=(0,a.getStringOption)(t.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=t.afterTarget||"",this.before=(0,a.getStringOption)(t.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=t.beforeTarget||"",this.bookendLeader=t.bookendLeader||"",this.bookendTrailer=t.bookendTrailer||"",this.id=t.id||"",this.overflowLeader=t.overflowLeader||"",this.overflowTarget=t.overflowTarget||"",this.overflowTrailer=t.overflowTrailer||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class z extends n.XFAObject{constructor(t){super(p,"breakAfter",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,a.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}}class U extends n.XFAObject{constructor(t){super(p,"breakBefore",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,a.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,a.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}[n.$toHTML](t){return this[n.$extra]={},a.HTMLResult.FAILURE}}class $ extends n.XFAObject{constructor(t){super(p,"button",!0),this.highlight=(0,a.getStringOption)(t.highlight,["inverted","none","outline","push"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[n.$toHTML](t){const e=this[n.$getParent]()[n.$getParent](),i={name:"button",attributes:{id:this[n.$uid],class:["xfaButton"],style:{}},children:[]};for(const t of e.event.children){if("click"!==t.activity||!t.script)continue;const e=(0,h.recoverJsURL)(t.script[n.$content]);if(!e)continue;const r=(0,o.fixURL)(e.url);r&&i.children.push({name:"a",attributes:{id:"link"+this[n.$uid],href:r,newWindow:e.newWindow,class:["xfaLink"],style:{}},children:[]})}return a.HTMLResult.success(i)}}class H extends n.XFAObject{constructor(t){super(p,"calculate",!0),this.id=t.id||"",this.override=(0,a.getStringOption)(t.override,["disabled","error","ignore","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.script=null}}class V extends n.XFAObject{constructor(t){super(p,"caption",!0),this.id=t.id||"",this.placement=(0,a.getStringOption)(t.placement,["left","bottom","inline","right","top"]),this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,a.getMeasurement)(t.reserve)),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[n.$setValue](t){b(this,t)}[n.$getExtra](t){if(!this[n.$extra]){let{width:e,height:i}=t;switch(this.placement){case"left":case"right":case"inline":e=this.reserve<=0?e:this.reserve;break;case"top":case"bottom":i=this.reserve<=0?i:this.reserve}this[n.$extra]=(0,o.layoutNode)(this,{width:e,height:i})}return this[n.$extra]}[n.$toHTML](t){if(!this.value)return a.HTMLResult.EMPTY;this[n.$pushPara]();const e=this.value[n.$toHTML](t).html;if(!e)return this[n.$popPara](),a.HTMLResult.EMPTY;const i=this.reserve;if(this.reserve<=0){const{w:e,h:i}=this[n.$getExtra](t);switch(this.placement){case"left":case"right":case"inline":this.reserve=e;break;case"top":case"bottom":this.reserve=i}}const r=[];"string"==typeof e?r.push({name:"#text",value:e}):r.push(e);const s=(0,o.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(s.width=(0,o.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(s.height=(0,o.measureToString)(this.reserve))}return(0,o.setPara)(this,null,e),this[n.$popPara](),this.reserve=i,a.HTMLResult.success({name:"div",attributes:{style:s,class:["xfaCaption"]},children:r})}}class q extends n.StringObject{constructor(t){super(p,"certificate"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class W extends n.XFAObject{constructor(t){super(p,"certificates",!0),this.credentialServerPolicy=(0,a.getStringOption)(t.credentialServerPolicy,["optional","required"]),this.id=t.id||"",this.url=t.url||"",this.urlPolicy=t.urlPolicy||"",this.use=t.use||"",this.usehref=t.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class X extends n.XFAObject{constructor(t){super(p,"checkButton",!0),this.id=t.id||"",this.mark=(0,a.getStringOption)(t.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,a.getStringOption)(t.shape,["square","round"]),this.size=(0,a.getMeasurement)(t.size,"10pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[n.$toHTML](t){const e=(0,o.toStyle)("margin"),i=(0,o.measureToString)(this.size);let r,s,l;e.width=e.height=i;const c=this[n.$getParent]()[n.$getParent](),h=c.items.children.length&&c.items.children[0][n.$toHTML]().html||[],u={on:(void 0!==h[0]?h[0]:"on").toString(),off:(void 0!==h[1]?h[1]:"off").toString()},p=(c.value&&c.value[n.$text]()||"off")===u.on||void 0,d=c[n.$getSubformParent](),f=c[n.$uid];let g;d instanceof wt?(l=d[n.$uid],r="radio",s="xfaRadio",g=d[n.$data]&&d[n.$data][n.$uid]||d[n.$uid]):(r="checkbox",s="xfaCheckbox",g=c[n.$data]&&c[n.$data][n.$uid]||c[n.$uid]);const m={name:"input",attributes:{class:[s],style:e,fieldId:f,dataId:g,type:r,checked:p,xfaOn:u.on,xfaOff:u.off,"aria-label":k(c)}};return l&&(m.attributes.name=l),a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[m]})}}class G extends n.XFAObject{constructor(t){super(p,"choiceList",!0),this.commitOn=(0,a.getStringOption)(t.commitOn,["select","exit"]),this.id=t.id||"",this.open=(0,a.getStringOption)(t.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,a.getInteger)({data:t.textEntry,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[n.$toHTML](t){const e=(0,o.toStyle)(this,"border","margin"),i=this[n.$getParent]()[n.$getParent](),r={fontSize:`calc(${i.font&&i.font.size||10}px * var(--zoom-factor))`},s=[];if(i.items.children.length>0){const t=i.items;let e=0,o=0;2===t.children.length&&(e=t.children[0].save,o=1-e);const a=t.children[e][n.$toHTML]().html,l=t.children[o][n.$toHTML]().html;let c=!1;const h=i.value&&i.value[n.$text]()||"";for(let t=0,e=a.length;t<e;t++){const e={name:"option",attributes:{value:l[t]||a[t],style:r},value:a[t]};l[t]===h&&(e.attributes.selected=c=!0),s.push(e)}c||s.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const l={class:["xfaSelect"],fieldId:i[n.$uid],dataId:i[n.$data]&&i[n.$data][n.$uid]||i[n.$uid],style:e,"aria-label":k(i)};return"multiSelect"===this.open&&(l.multiple=!0),a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:s,attributes:l}]})}}class K extends n.XFAObject{constructor(t){super(p,"color",!0),this.cSpace=(0,a.getStringOption)(t.cSpace,["SRGB"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.value=t.value?(0,a.getColor)(t.value):"",this.extras=null}[n.$hasSettableValue](){return!1}[n.$toStyle](){return this.value?l.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Y extends n.XFAObject{constructor(t){super(p,"comb"),this.id=t.id||"",this.numberOfCells=(0,a.getInteger)({data:t.numberOfCells,defaultValue:0,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||""}}class J extends n.XFAObject{constructor(t){super(p,"connect",!0),this.connection=t.connection||"",this.id=t.id||"",this.ref=t.ref||"",this.usage=(0,a.getStringOption)(t.usage,["exportAndImport","exportOnly","importOnly"]),this.use=t.use||"",this.usehref=t.usehref||"",this.picture=null}}class Z extends n.XFAObject{constructor(t){super(p,"contentArea",!0),this.h=(0,a.getMeasurement)(t.h),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=(0,a.getMeasurement)(t.w),this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null}[n.$toHTML](t){const e={left:(0,o.measureToString)(this.x),top:(0,o.measureToString)(this.y),width:(0,o.measureToString)(this.w),height:(0,o.measureToString)(this.h)},i=["xfaContentarea"];return(0,o.isPrintOnly)(this)&&i.push("xfaPrintOnly"),a.HTMLResult.success({name:"div",children:[],attributes:{style:e,class:i,id:this[n.$uid]}})}}class Q extends n.XFAObject{constructor(t){super(p,"corner",!0),this.id=t.id||"",this.inverted=(0,a.getInteger)({data:t.inverted,defaultValue:0,validate:t=>1===t}),this.join=(0,a.getStringOption)(t.join,["square","round"]),this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,a.getMeasurement)(t.radius),this.stroke=(0,a.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,a.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](){const t=(0,o.toStyle)(this,"visibility");return t.radius=(0,o.measureToString)("square"===this.join?0:this.radius),t}}class tt extends n.ContentObject{constructor(t){super(p,"date"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=this[n.$content].trim();this[n.$content]=t?new Date(t):null}[n.$toHTML](t){return C(this[n.$content]?this[n.$content].toString():"")}}class et extends n.ContentObject{constructor(t){super(p,"dateTime"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=this[n.$content].trim();this[n.$content]=t?new Date(t):null}[n.$toHTML](t){return C(this[n.$content]?this[n.$content].toString():"")}}class it extends n.XFAObject{constructor(t){super(p,"dateTimeEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.picker=(0,a.getStringOption)(t.picker,["host","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[n.$toHTML](t){const e=(0,o.toStyle)(this,"border","font","margin"),i=this[n.$getParent]()[n.$getParent](),r={name:"input",attributes:{type:"text",fieldId:i[n.$uid],dataId:i[n.$data]&&i[n.$data][n.$uid]||i[n.$uid],class:["xfaTextfield"],style:e,"aria-label":k(i)}};return a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class nt extends n.ContentObject{constructor(t){super(p,"decimal"),this.fracDigits=(0,a.getInteger)({data:t.fracDigits,defaultValue:2,validate:t=>!0}),this.id=t.id||"",this.leadDigits=(0,a.getInteger)({data:t.leadDigits,defaultValue:-1,validate:t=>!0}),this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=parseFloat(this[n.$content].trim());this[n.$content]=isNaN(t)?null:t}[n.$toHTML](t){return C(null!==this[n.$content]?this[n.$content].toString():"")}}class rt extends n.XFAObject{constructor(t){super(p,"defaultUi",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class st extends n.XFAObject{constructor(t){super(p,"desc",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.time=new n.XFAObjectArray}}class ot extends n.OptionObject{constructor(t){super(p,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class at extends n.XFAObject{constructor(t){super(p,"digestMethods",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.digestMethod=new n.XFAObjectArray}}class lt extends n.XFAObject{constructor(t){super(p,"draw",!0),this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.rotate=(0,a.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new n.XFAObjectArray}[n.$setValue](t){b(this,t)}[n.$toHTML](t){if(x(this),"hidden"===this.presence||"inactive"===this.presence)return a.HTMLResult.EMPTY;(0,o.fixDimensions)(this),this[n.$pushPara]();const e=this.w,i=this.h,{w:r,h:l,isBroken:c}=(0,o.layoutNode)(this,t);if(r&&""===this.w){if(c&&this[n.$getSubformParent]()[n.$isThereMoreWidth]())return this[n.$popPara](),a.HTMLResult.FAILURE;this.w=r}if(l&&""===this.h&&(this.h=l),A(this),!(0,s.checkDimensions)(this,t))return this.w=e,this.h=i,this[n.$popPara](),a.HTMLResult.FAILURE;_(this);const h=(0,o.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,o.setMinMaxDimensions)(this,h),h.margin&&(h.padding=h.margin,delete h.margin);const u=["xfaDraw"];this.font&&u.push("xfaFont"),(0,o.isPrintOnly)(this)&&u.push("xfaPrintOnly");const p={style:h,id:this[n.$uid],class:u};this.name&&(p.xfaName=this.name);const d={name:"div",attributes:p,children:[]};S(this,p);const f=(0,o.computeBbox)(this,d,t),g=this.value?this.value[n.$toHTML](t).html:null;return null===g?(this.w=e,this.h=i,this[n.$popPara](),a.HTMLResult.success((0,o.createWrapper)(this,d),f)):(d.children.push(g),(0,o.setPara)(this,h,g),this.w=e,this.h=i,this[n.$popPara](),a.HTMLResult.success((0,o.createWrapper)(this,d),f))}}class ct extends n.XFAObject{constructor(t){super(p,"edge",!0),this.cap=(0,a.getStringOption)(t.cap,["square","butt","round"]),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,a.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,a.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](){const t=(0,o.toStyle)(this,"visibility");if(Object.assign(t,{linecap:this.cap,width:(0,o.measureToString)(this.thickness),color:this.color?this.color[n.$toStyle]():"#000000",style:""}),"visible"!==this.presence)t.style="none";else switch(this.stroke){case"solid":t.style="solid";break;case"dashDot":case"dashDotDot":case"dashed":t.style="dashed";break;case"dotted":t.style="dotted";break;case"embossed":t.style="ridge";break;case"etched":t.style="groove";break;case"lowered":t.style="inset";break;case"raised":t.style="outset"}return t}}class ht extends n.OptionObject{constructor(t){super(p,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ut extends n.XFAObject{constructor(t){super(p,"encodings",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encoding=new n.XFAObjectArray}}class pt extends n.XFAObject{constructor(t){super(p,"encrypt",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=null}}class dt extends n.XFAObject{constructor(t){super(p,"encryptData",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["encrypt","decrypt"]),this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class ft extends n.XFAObject{constructor(t){super(p,"encryption",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new n.XFAObjectArray}}class gt extends n.OptionObject{constructor(t){super(p,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class mt extends n.XFAObject{constructor(t){super(p,"encryptionMethods",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encryptionMethod=new n.XFAObjectArray}}class yt extends n.XFAObject{constructor(t){super(p,"event",!0),this.activity=(0,a.getStringOption)(t.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=t.id||"",this.listen=(0,a.getStringOption)(t.listen,["refOnly","refAndDescendents"]),this.name=t.name||"",this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class vt extends n.ContentObject{constructor(t){super(p,"exData"),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.maxLength=(0,a.getInteger)({data:t.maxLength,defaultValue:-1,validate:t=>t>=-1}),this.name=t.name||"",this.rid=t.rid||"",this.transferEncoding=(0,a.getStringOption)(t.transferEncoding,["none","base64","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[n.$isCDATAXml](){return"text/html"===this.contentType}[n.$onChild](t){return("text/html"===this.contentType&&t[n.$namespaceId]===r.NamespaceIds.xhtml.id||"text/xml"===this.contentType)&&(this[n.$content]=t,!0)}[n.$toHTML](t){return"text/html"===this.contentType&&this[n.$content]?this[n.$content][n.$toHTML](t):a.HTMLResult.EMPTY}}class bt extends n.XFAObject{constructor(t){super(p,"exObject",!0),this.archive=t.archive||"",this.classId=t.classId||"",this.codeBase=t.codeBase||"",this.codeType=t.codeType||"",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.boolean=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.exObject=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.time=new n.XFAObjectArray}}class wt extends n.XFAObject{constructor(t){super(p,"exclGroup",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,a.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new n.XFAObjectArray,this.event=new n.XFAObjectArray,this.field=new n.XFAObjectArray,this.setProperty=new n.XFAObjectArray}[n.$isBindable](){return!0}[n.$hasSettableValue](){return!0}[n.$setValue](t){for(const e of this.field.children){if(!e.value){const t=new Ie({});e[n.$appendChild](t),e.value=t}e.value[n.$setValue](t)}}[n.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[n.$extra].attempt&&this[n.$extra].numberInLine>0||this[n.$getParent]()[n.$isThereMoreWidth]()}[n.$isSplittable](){const t=this[n.$getSubformParent]();return!!t[n.$isSplittable]()&&(void 0!==this[n.$extra]._isSplittable?this[n.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")?(this[n.$extra]._isSplittable=!1,!1):!(t.layout&&t.layout.endsWith("-tb")&&0!==t[n.$extra].numberInLine||(this[n.$extra]._isSplittable=!0,0)))}[n.$flushHTML](){return(0,s.flushHTML)(this)}[n.$addHTML](t,e){(0,s.addHTML)(this,t,e)}[n.$getAvailableSpace](){return(0,s.getAvailableSpace)(this)}[n.$toHTML](t){if(x(this),"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return a.HTMLResult.EMPTY;(0,o.fixDimensions)(this);const e=[],i={id:this[n.$uid],class:[]};(0,o.setAccess)(this,i.class),this[n.$extra]||(this[n.$extra]=Object.create(null)),Object.assign(this[n.$extra],{children:e,attributes:i,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[n.$isSplittable]();if(r||A(this),!(0,s.checkDimensions)(this,t))return a.HTMLResult.FAILURE;const l=new Set(["field"]);if(this.layout.includes("row")){const t=this[n.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[n.$extra].columnWidths=t,this[n.$extra].currentColumn=0)}const c=(0,o.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),h=["xfaExclgroup"],u=(0,o.layoutClass)(this);u&&h.push(u),(0,o.isPrintOnly)(this)&&h.push("xfaPrintOnly"),i.style=c,i.class=h,this.name&&(i.xfaName=this.name),this[n.$pushPara]();const p="lr-tb"===this.layout||"rl-tb"===this.layout,d=p?2:1;for(;this[n.$extra].attempt<d;this[n.$extra].attempt++){p&&1===this[n.$extra].attempt&&(this[n.$extra].numberInLine=0);const t=this[n.$childrenToHTML]({filter:l,include:!0});if(t.success)break;if(t.isBreak())return this[n.$popPara](),t;if(p&&0===this[n.$extra].attempt&&0===this[n.$extra].numberInLine&&!this[n.$getTemplateRoot]()[n.$extra].noLayoutFailure){this[n.$extra].attempt=d;break}}if(this[n.$popPara](),r||_(this),this[n.$extra].attempt===d)return r||delete this[n.$extra],a.HTMLResult.FAILURE;let f=0,g=0;this.margin&&(f=this.margin.leftInset+this.margin.rightInset,g=this.margin.topInset+this.margin.bottomInset);const m=Math.max(this[n.$extra].width+f,this.w||0),y=Math.max(this[n.$extra].height+g,this.h||0),v=[this.x,this.y,m,y];""===this.w&&(c.width=(0,o.measureToString)(m)),""===this.h&&(c.height=(0,o.measureToString)(y));const b={name:"div",attributes:i,children:e};return S(this,i),delete this[n.$extra],a.HTMLResult.success((0,o.createWrapper)(this,b),v)}}class xt extends n.XFAObject{constructor(t){super(p,"execute"),this.connection=t.connection||"",this.executeType=(0,a.getStringOption)(t.executeType,["import","remerge"]),this.id=t.id||"",this.runAt=(0,a.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class St extends n.XFAObject{constructor(t){super(p,"extras",!0),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.extras=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.time=new n.XFAObjectArray}}class kt extends n.XFAObject{constructor(t){super(p,"field",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.rotate=(0,a.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new n.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new n.XFAObjectArray,this.connect=new n.XFAObjectArray,this.event=new n.XFAObjectArray,this.setProperty=new n.XFAObjectArray}[n.$isBindable](){return!0}[n.$setValue](t){b(this,t)}[n.$toHTML](t){if(x(this),!this.ui){let t;switch(this.ui=new Me({}),this.ui[n.$globalData]=this[n.$globalData],this[n.$appendChild](this.ui),this.items.children.length){case 0:t=new Ce({}),this.ui.textEdit=t;break;case 1:t=new X({}),this.ui.checkButton=t;break;case 2:t=new G({}),this.ui.choiceList=t}this.ui[n.$appendChild](t)}if(!this.ui||"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return a.HTMLResult.EMPTY;this.caption&&delete this.caption[n.$extra],this[n.$pushPara]();const e=this.caption?this.caption[n.$toHTML](t).html:null,i=this.w,r=this.h;let l=0,h=0;this.margin&&(l=this.margin.leftInset+this.margin.rightInset,h=this.margin.topInset+this.margin.bottomInset);let u=null;if(""===this.w||""===this.h){let e=null,i=null,r=0,s=0;if(this.ui.checkButton)r=s=this.ui.checkButton.size;else{const{w:e,h:i}=(0,o.layoutNode)(this,t);null!==e?(r=e,s=i):s=(0,c.getMetrics)(this.font,!0).lineNoGap}if(u=y(this.ui[n.$getExtra]()),r+=u.w,s+=u.h,this.caption){const{w:o,h:l,isBroken:c}=this.caption[n.$getExtra](t);if(c&&this[n.$getSubformParent]()[n.$isThereMoreWidth]())return this[n.$popPara](),a.HTMLResult.FAILURE;switch(e=o,i=l,this.caption.placement){case"left":case"right":case"inline":e+=r;break;case"top":case"bottom":i+=s}}else e=r,i=s;e&&""===this.w&&(e+=l,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<e?e:this.minW)),i&&""===this.h&&(i+=h,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<i?i:this.minH))}if(this[n.$popPara](),(0,o.fixDimensions)(this),A(this),!(0,s.checkDimensions)(this,t))return this.w=i,this.h=r,this[n.$popPara](),a.HTMLResult.FAILURE;_(this);const p=(0,o.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,o.setMinMaxDimensions)(this,p);const d=["xfaField"];this.font&&d.push("xfaFont"),(0,o.isPrintOnly)(this)&&d.push("xfaPrintOnly");const f={style:p,id:this[n.$uid],class:d};p.margin&&(p.padding=p.margin,delete p.margin),(0,o.setAccess)(this,d),this.name&&(f.xfaName=this.name);const g=[],m={name:"div",attributes:f,children:g};S(this,f);const v=this.border?this.border[n.$toStyle]():null,b=(0,o.computeBbox)(this,m,t),w=this.ui[n.$toHTML]().html;if(!w)return Object.assign(p,v),a.HTMLResult.success((0,o.createWrapper)(this,m),b);this[n.$tabIndex]&&(w.children&&w.children[0]?w.children[0].attributes.tabindex=this[n.$tabIndex]:w.attributes.tabindex=this[n.$tabIndex]),w.attributes.style||(w.attributes.style=Object.create(null));let k=null;if(this.ui.button?(1===w.children.length&&([k]=w.children.splice(0,1)),Object.assign(w.attributes.style,v)):Object.assign(p,v),g.push(w),this.value)if(this.ui.imageEdit)w.children.push(this.value[n.$toHTML]().html);else if(!this.ui.button){let t="";if(this.value.exData)t=this.value.exData[n.$text]();else if(this.value.text)t=this.value.text[n.$getExtra]();else{const e=this.value[n.$toHTML]().html;null!==e&&(t=e.children[0].value)}this.ui.textEdit&&this.value.text&&this.value.text.maxChars&&(w.children[0].attributes.maxLength=this.value.text.maxChars),t&&(this.ui.numericEdit&&(t=parseFloat(t),t=isNaN(t)?"":t.toString()),"textarea"===w.children[0].name?w.children[0].attributes.textContent=t:w.children[0].attributes.value=t)}if(!this.ui.imageEdit&&w.children&&w.children[0]&&this.h){u=u||y(this.ui[n.$getExtra]());let e=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){e=this.caption.reserve,e<=0&&(e=this.caption[n.$getExtra](t).h);const i=this.h-e-h-u.h;w.children[0].attributes.style.height=(0,o.measureToString)(i)}else w.children[0].attributes.style.height="100%"}if(k&&w.children.push(k),!e)return w.attributes.class&&w.attributes.class.push("xfaLeft"),this.w=i,this.h=r,a.HTMLResult.success((0,o.createWrapper)(this,m),b);if(this.ui.button)return p.padding&&delete p.padding,"div"===e.name&&(e.name="span"),w.children.push(e),a.HTMLResult.success(m,b);switch(this.ui.checkButton&&(e.attributes.class[0]="xfaCaptionForCheckButton"),w.attributes.class||(w.attributes.class=[]),w.children.splice(0,0,e),this.caption.placement){case"left":case"inline":w.attributes.class.push("xfaLeft");break;case"right":w.attributes.class.push("xfaRight");break;case"top":w.attributes.class.push("xfaTop");break;case"bottom":w.attributes.class.push("xfaBottom")}return this.w=i,this.h=r,a.HTMLResult.success((0,o.createWrapper)(this,m),b)}}e.Field=kt;class Ct extends n.XFAObject{constructor(t){super(p,"fill",!0),this.id=t.id||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[n.$toStyle](){const t=this[n.$getParent](),e=t[n.$getParent]()[n.$getParent](),i=Object.create(null);let r="color",s=r;t instanceof B&&(r="background-color",s="background",e instanceof Me&&(i.backgroundColor="white")),(t instanceof ae||t instanceof M)&&(r=s="fill",i.fill="white");for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"color"===t)continue;const e=this[t];if(!(e instanceof n.XFAObject))continue;const o=e[n.$toStyle](this.color);return o&&(i[o.startsWith("#")?r:s]=o),i}if(this.color&&this.color.value){const t=this.color[n.$toStyle]();i[t.startsWith("#")?r:s]=t}return i}}class At extends n.XFAObject{constructor(t){super(p,"filter",!0),this.addRevocationInfo=(0,a.getStringOption)(t.addRevocationInfo,["","required","optional","none"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.version=(0,a.getInteger)({data:this.version,defaultValue:5,validate:t=>t>=1&&t<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class _t extends n.ContentObject{constructor(t){super(p,"float"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=parseFloat(this[n.$content].trim());this[n.$content]=isNaN(t)?null:t}[n.$toHTML](t){return C(null!==this[n.$content]?this[n.$content].toString():"")}}class Tt extends n.XFAObject{constructor(t){super(p,"font",!0),this.baselineShift=(0,a.getMeasurement)(t.baselineShift),this.fontHorizontalScale=(0,a.getFloat)({data:t.fontHorizontalScale,defaultValue:100,validate:t=>t>=0}),this.fontVerticalScale=(0,a.getFloat)({data:t.fontVerticalScale,defaultValue:100,validate:t=>t>=0}),this.id=t.id||"",this.kerningMode=(0,a.getStringOption)(t.kerningMode,["none","pair"]),this.letterSpacing=(0,a.getMeasurement)(t.letterSpacing,"0"),this.lineThrough=(0,a.getInteger)({data:t.lineThrough,defaultValue:0,validate:t=>1===t||2===t}),this.lineThroughPeriod=(0,a.getStringOption)(t.lineThroughPeriod,["all","word"]),this.overline=(0,a.getInteger)({data:t.overline,defaultValue:0,validate:t=>1===t||2===t}),this.overlinePeriod=(0,a.getStringOption)(t.overlinePeriod,["all","word"]),this.posture=(0,a.getStringOption)(t.posture,["normal","italic"]),this.size=(0,a.getMeasurement)(t.size,"10pt"),this.typeface=t.typeface||"Courier",this.underline=(0,a.getInteger)({data:t.underline,defaultValue:0,validate:t=>1===t||2===t}),this.underlinePeriod=(0,a.getStringOption)(t.underlinePeriod,["all","word"]),this.use=t.use||"",this.usehref=t.usehref||"",this.weight=(0,a.getStringOption)(t.weight,["normal","bold"]),this.extras=null,this.fill=null}[n.$clean](t){super[n.$clean](t),this[n.$globalData].usedTypefaces.add(this.typeface)}[n.$toStyle](){const t=(0,o.toStyle)(this,"fill"),e=t.color;return e&&("#000000"===e?delete t.color:e.startsWith("#")||(t.background=e,t.backgroundClip="text",t.color="transparent")),this.baselineShift&&(t.verticalAlign=(0,o.measureToString)(this.baselineShift)),t.fontKerning="none"===this.kerningMode?"none":"normal",t.letterSpacing=(0,o.measureToString)(this.letterSpacing),0!==this.lineThrough&&(t.textDecoration="line-through",2===this.lineThrough&&(t.textDecorationStyle="double")),0!==this.overline&&(t.textDecoration="overline",2===this.overline&&(t.textDecorationStyle="double")),t.fontStyle=this.posture,t.fontSize=(0,o.measureToString)(.99*this.size),(0,o.setFontFamily)(this,this,this[n.$globalData].fontFinder,t),0!==this.underline&&(t.textDecoration="underline",2===this.underline&&(t.textDecorationStyle="double")),t.fontWeight=this.weight,t}}class Ot extends n.XFAObject{constructor(t){super(p,"format",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null}}class Et extends n.StringObject{constructor(t){super(p,"handler"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Mt extends n.XFAObject{constructor(t){super(p,"hyphenation"),this.excludeAllCaps=(0,a.getInteger)({data:t.excludeAllCaps,defaultValue:0,validate:t=>1===t}),this.excludeInitialCap=(0,a.getInteger)({data:t.excludeInitialCap,defaultValue:0,validate:t=>1===t}),this.hyphenate=(0,a.getInteger)({data:t.hyphenate,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.pushCharacterCount=(0,a.getInteger)({data:t.pushCharacterCount,defaultValue:3,validate:t=>t>=0}),this.remainCharacterCount=(0,a.getInteger)({data:t.remainCharacterCount,defaultValue:3,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||"",this.wordCharacterCount=(0,a.getInteger)({data:t.wordCharacterCount,defaultValue:7,validate:t=>t>=0})}}class Pt extends n.StringObject{constructor(t){super(p,"image"),this.aspect=(0,a.getStringOption)(t.aspect,["fit","actual","height","none","width"]),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.name=t.name||"",this.transferEncoding=(0,a.getStringOption)(t.transferEncoding,["base64","none","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[n.$toHTML](){if(this.contentType&&!g.has(this.contentType.toLowerCase()))return a.HTMLResult.EMPTY;let t=this[n.$globalData].images&&this[n.$globalData].images.get(this.href);if(!t&&(this.href||!this[n.$content]))return a.HTMLResult.EMPTY;if(t||"base64"!==this.transferEncoding||(t=(0,l.stringToBytes)(atob(this[n.$content]))),!t)return a.HTMLResult.EMPTY;if(!this.contentType){for(const[e,i]of m)if(t.length>e.length&&e.every(((e,i)=>e===t[i]))){this.contentType=i;break}if(!this.contentType)return a.HTMLResult.EMPTY}const e=new Blob([t],{type:this.contentType});let i;switch(this.aspect){case"fit":case"actual":break;case"height":i={height:"100%",objectFit:"fill"};break;case"none":i={width:"100%",height:"100%",objectFit:"fill"};break;case"width":i={width:"100%",objectFit:"fill"}}const r=this[n.$getParent]();return a.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:i,src:URL.createObjectURL(e),alt:r?k(r[n.$getParent]()):null}})}}class It extends n.XFAObject{constructor(t){super(p,"imageEdit",!0),this.data=(0,a.getStringOption)(t.data,["link","embed"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[n.$toHTML](t){return"embed"===this.data?a.HTMLResult.success({name:"div",children:[],attributes:{}}):a.HTMLResult.EMPTY}}class Ft extends n.ContentObject{constructor(t){super(p,"integer"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=parseInt(this[n.$content].trim(),10);this[n.$content]=isNaN(t)?null:t}[n.$toHTML](t){return C(null!==this[n.$content]?this[n.$content].toString():"")}}class Dt extends n.XFAObject{constructor(t){super(p,"issuers",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new n.XFAObjectArray}}class Rt extends n.XFAObject{constructor(t){super(p,"items",!0),this.id=t.id||"",this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.ref=t.ref||"",this.save=(0,a.getInteger)({data:t.save,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.time=new n.XFAObjectArray}[n.$toHTML](){const t=[];for(const e of this[n.$getChildren]())t.push(e[n.$text]());return a.HTMLResult.success(t)}}e.Items=Rt;class Lt extends n.XFAObject{constructor(t){super(p,"keep",!0),this.id=t.id||"";const e=["none","contentArea","pageArea"];this.intact=(0,a.getStringOption)(t.intact,e),this.next=(0,a.getStringOption)(t.next,e),this.previous=(0,a.getStringOption)(t.previous,e),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class Nt extends n.XFAObject{constructor(t){super(p,"keyUsage");const e=["","yes","no"];this.crlSign=(0,a.getStringOption)(t.crlSign,e),this.dataEncipherment=(0,a.getStringOption)(t.dataEncipherment,e),this.decipherOnly=(0,a.getStringOption)(t.decipherOnly,e),this.digitalSignature=(0,a.getStringOption)(t.digitalSignature,e),this.encipherOnly=(0,a.getStringOption)(t.encipherOnly,e),this.id=t.id||"",this.keyAgreement=(0,a.getStringOption)(t.keyAgreement,e),this.keyCertSign=(0,a.getStringOption)(t.keyCertSign,e),this.keyEncipherment=(0,a.getStringOption)(t.keyEncipherment,e),this.nonRepudiation=(0,a.getStringOption)(t.nonRepudiation,e),this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Bt extends n.XFAObject{constructor(t){super(p,"line",!0),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.slope=(0,a.getStringOption)(t.slope,["\\","/"]),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null}[n.$toHTML](){const t=this[n.$getParent]()[n.$getParent](),e=this.edge?this.edge:new ct({}),i=e[n.$toStyle](),r=Object.create(null),s="visible"===e.presence?e.thickness:0;let l,c,h,u;r.strokeWidth=(0,o.measureToString)(s),r.stroke=i.color;let p="100%",f="100%";t.w<=s?([l,c,h,u]=["50%",0,"50%","100%"],p=r.strokeWidth):t.h<=s?([l,c,h,u]=[0,"50%","100%","50%"],f=r.strokeWidth):"\\"===this.slope?[l,c,h,u]=[0,0,"100%","100%"]:[l,c,h,u]=[0,"100%","100%",0];const g={name:"svg",children:[{name:"line",attributes:{xmlns:d,x1:l,y1:c,x2:h,y2:u,style:r}}],attributes:{xmlns:d,width:p,height:f,style:{overflow:"visible"}}};return v(t)?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[g]}):(g.attributes.style.position="absolute",a.HTMLResult.success(g))}}class jt extends n.XFAObject{constructor(t){super(p,"linear",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["toRight","toBottom","toLeft","toTop"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](t){return t=t?t[n.$toStyle]():"#FFFFFF",`linear-gradient(${this.type.replace(/([RBLT])/," $1").toLowerCase()}, ${t}, ${this.color?this.color[n.$toStyle]():"#000000"})`}}class zt extends n.ContentObject{constructor(t){super(p,"lockDocument"),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){this[n.$content]=(0,a.getStringOption)(this[n.$content],["auto","0","1"])}}class Ut extends n.XFAObject{constructor(t){super(p,"manifest",!0),this.action=(0,a.getStringOption)(t.action,["include","all","exclude"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.ref=new n.XFAObjectArray}}class $t extends n.XFAObject{constructor(t){super(p,"margin",!0),this.bottomInset=(0,a.getMeasurement)(t.bottomInset,"0"),this.id=t.id||"",this.leftInset=(0,a.getMeasurement)(t.leftInset,"0"),this.rightInset=(0,a.getMeasurement)(t.rightInset,"0"),this.topInset=(0,a.getMeasurement)(t.topInset,"0"),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[n.$toStyle](){return{margin:(0,o.measureToString)(this.topInset)+" "+(0,o.measureToString)(this.rightInset)+" "+(0,o.measureToString)(this.bottomInset)+" "+(0,o.measureToString)(this.leftInset)}}}class Ht extends n.XFAObject{constructor(t){super(p,"mdp"),this.id=t.id||"",this.permissions=(0,a.getInteger)({data:t.permissions,defaultValue:2,validate:t=>1===t||3===t}),this.signatureType=(0,a.getStringOption)(t.signatureType,["filler","author"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Vt extends n.XFAObject{constructor(t){super(p,"medium"),this.id=t.id||"",this.imagingBBox=(0,a.getBBox)(t.imagingBBox),this.long=(0,a.getMeasurement)(t.long),this.orientation=(0,a.getStringOption)(t.orientation,["portrait","landscape"]),this.short=(0,a.getMeasurement)(t.short),this.stock=t.stock||"",this.trayIn=(0,a.getStringOption)(t.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,a.getStringOption)(t.trayOut,["auto","delegate"]),this.use=t.use||"",this.usehref=t.usehref||""}}class qt extends n.XFAObject{constructor(t){super(p,"message",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.text=new n.XFAObjectArray}}class Wt extends n.XFAObject{constructor(t){super(p,"numericEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[n.$toHTML](t){const e=(0,o.toStyle)(this,"border","font","margin"),i=this[n.$getParent]()[n.$getParent](),r={name:"input",attributes:{type:"text",fieldId:i[n.$uid],dataId:i[n.$data]&&i[n.$data][n.$uid]||i[n.$uid],class:["xfaTextfield"],style:e,"aria-label":k(i)}};return a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class Xt extends n.XFAObject{constructor(t){super(p,"occur",!0),this.id=t.id||"",this.initial=""!==t.initial?(0,a.getInteger)({data:t.initial,defaultValue:"",validate:t=>!0}):"",this.max=""!==t.max?(0,a.getInteger)({data:t.max,defaultValue:1,validate:t=>!0}):"",this.min=""!==t.min?(0,a.getInteger)({data:t.min,defaultValue:1,validate:t=>!0}):"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[n.$clean](){const t=this[n.$getParent](),e=this.min;""===this.min&&(this.min=t instanceof Jt||t instanceof Zt?0:1),""===this.max&&(this.max=""===e?t instanceof Jt||t instanceof Zt?-1:1:this.min),-1!==this.max&&this.max<this.min&&(this.max=this.min),""===this.initial&&(this.initial=t instanceof Se?1:this.min)}}class Gt extends n.StringObject{constructor(t){super(p,"oid"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Kt extends n.XFAObject{constructor(t){super(p,"oids",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.oid=new n.XFAObjectArray}}class Yt extends n.XFAObject{constructor(t){super(p,"overflow"),this.id=t.id||"",this.leader=t.leader||"",this.target=t.target||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$getExtra](){if(!this[n.$extra]){const t=this[n.$getParent](),e=this[n.$getTemplateRoot](),i=e[n.$searchNode](this.target,t),r=e[n.$searchNode](this.leader,t),s=e[n.$searchNode](this.trailer,t);this[n.$extra]={target:i&&i[0]||null,leader:r&&r[0]||null,trailer:s&&s[0]||null,addLeader:!1,addTrailer:!1}}return this[n.$extra]}}class Jt extends n.XFAObject{constructor(t){super(p,"pageArea",!0),this.blankOrNotBlank=(0,a.getStringOption)(t.blankOrNotBlank,["any","blank","notBlank"]),this.id=t.id||"",this.initialNumber=(0,a.getInteger)({data:t.initialNumber,defaultValue:1,validate:t=>!0}),this.name=t.name||"",this.numbered=(0,a.getInteger)({data:t.numbered,defaultValue:1,validate:t=>!0}),this.oddOrEven=(0,a.getStringOption)(t.oddOrEven,["any","even","odd"]),this.pagePosition=(0,a.getStringOption)(t.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new n.XFAObjectArray,this.contentArea=new n.XFAObjectArray,this.draw=new n.XFAObjectArray,this.exclGroup=new n.XFAObjectArray,this.field=new n.XFAObjectArray,this.subform=new n.XFAObjectArray}[n.$isUsable](){return this[n.$extra]?!this.occur||-1===this.occur.max||this[n.$extra].numberOfUse<this.occur.max:(this[n.$extra]={numberOfUse:0},!0)}[n.$cleanPage](){delete this[n.$extra]}[n.$getNextPage](){this[n.$extra]||(this[n.$extra]={numberOfUse:0});const t=this[n.$getParent]();return"orderedOccurrence"===t.relation&&this[n.$isUsable]()?(this[n.$extra].numberOfUse+=1,this):t[n.$getNextPage]()}[n.$getAvailableSpace](){return this[n.$extra].space||{width:0,height:0}}[n.$toHTML](){this[n.$extra]||(this[n.$extra]={numberOfUse:1});const t=[];this[n.$extra].children=t;const e=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(e.width=(0,o.measureToString)(this.medium.short),e.height=(0,o.measureToString)(this.medium.long),this[n.$extra].space={width:this.medium.short,height:this.medium.long},"landscape"===this.medium.orientation){const t=e.width;e.width=e.height,e.height=t,this[n.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,l.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[n.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[n.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),a.HTMLResult.success({name:"div",children:t,attributes:{class:["xfaPage"],id:this[n.$uid],style:e,xfaName:this.name}})}}class Zt extends n.XFAObject{constructor(t){super(p,"pageSet",!0),this.duplexImposition=(0,a.getStringOption)(t.duplexImposition,["longEdge","shortEdge"]),this.id=t.id||"",this.name=t.name||"",this.relation=(0,a.getStringOption)(t.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.occur=null,this.pageArea=new n.XFAObjectArray,this.pageSet=new n.XFAObjectArray}[n.$cleanPage](){for(const t of this.pageArea.children)t[n.$cleanPage]();for(const t of this.pageSet.children)t[n.$cleanPage]()}[n.$isUsable](){return!this.occur||-1===this.occur.max||this[n.$extra].numberOfUse<this.occur.max}[n.$getNextPage](){if(this[n.$extra]||(this[n.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),"orderedOccurrence"===this.relation){if(this[n.$extra].pageIndex+1<this.pageArea.children.length)return this[n.$extra].pageIndex+=1,this.pageArea.children[this[n.$extra].pageIndex][n.$getNextPage]();if(this[n.$extra].pageSetIndex+1<this.pageSet.children.length)return this[n.$extra].pageSetIndex+=1,this.pageSet.children[this[n.$extra].pageSetIndex][n.$getNextPage]();if(this[n.$isUsable]())return this[n.$extra].numberOfUse+=1,this[n.$extra].pageIndex=-1,this[n.$extra].pageSetIndex=-1,this[n.$getNextPage]();const t=this[n.$getParent]();return t instanceof Zt?t[n.$getNextPage]():(this[n.$cleanPage](),this[n.$getNextPage]())}const t=this[n.$getTemplateRoot]()[n.$extra].pageNumber,e=t%2==0?"even":"odd",i=0===t?"first":"rest";let r=this.pageArea.children.find((t=>t.oddOrEven===e&&t.pagePosition===i));return r||(r=this.pageArea.children.find((t=>"any"===t.oddOrEven&&t.pagePosition===i)),r||(r=this.pageArea.children.find((t=>"any"===t.oddOrEven&&"any"===t.pagePosition)),r||this.pageArea.children[0]))}}class Qt extends n.XFAObject{constructor(t){super(p,"para",!0),this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.lineHeight=t.lineHeight?(0,a.getMeasurement)(t.lineHeight,"0pt"):"",this.marginLeft=t.marginLeft?(0,a.getMeasurement)(t.marginLeft,"0pt"):"",this.marginRight=t.marginRight?(0,a.getMeasurement)(t.marginRight,"0pt"):"",this.orphans=(0,a.getInteger)({data:t.orphans,defaultValue:0,validate:t=>t>=0}),this.preserve=t.preserve||"",this.radixOffset=t.radixOffset?(0,a.getMeasurement)(t.radixOffset,"0pt"):"",this.spaceAbove=t.spaceAbove?(0,a.getMeasurement)(t.spaceAbove,"0pt"):"",this.spaceBelow=t.spaceBelow?(0,a.getMeasurement)(t.spaceBelow,"0pt"):"",this.tabDefault=t.tabDefault?(0,a.getMeasurement)(this.tabDefault):"",this.tabStops=(t.tabStops||"").trim().split(/\s+/).map(((t,e)=>e%2==1?(0,a.getMeasurement)(t):t)),this.textIndent=t.textIndent?(0,a.getMeasurement)(t.textIndent,"0pt"):"",this.use=t.use||"",this.usehref=t.usehref||"",this.vAlign=(0,a.getStringOption)(t.vAlign,["top","bottom","middle"]),this.widows=(0,a.getInteger)({data:t.widows,defaultValue:0,validate:t=>t>=0}),this.hyphenation=null}[n.$toStyle](){const t=(0,o.toStyle)(this,"hAlign");return""!==this.marginLeft&&(t.paddingLeft=(0,o.measureToString)(this.marginLeft)),""!==this.marginRight&&(t.paddingight=(0,o.measureToString)(this.marginRight)),""!==this.spaceAbove&&(t.paddingTop=(0,o.measureToString)(this.spaceAbove)),""!==this.spaceBelow&&(t.paddingBottom=(0,o.measureToString)(this.spaceBelow)),""!==this.textIndent&&(t.textIndent=(0,o.measureToString)(this.textIndent),(0,o.fixTextIndent)(t)),this.lineHeight>0&&(t.lineHeight=(0,o.measureToString)(this.lineHeight)),""!==this.tabDefault&&(t.tabSize=(0,o.measureToString)(this.tabDefault)),this.tabStops.length,this.hyphenatation&&Object.assign(t,this.hyphenatation[n.$toStyle]()),t}}class te extends n.XFAObject{constructor(t){super(p,"passwordEdit",!0),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.passwordChar=t.passwordChar||"*",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}}class ee extends n.XFAObject{constructor(t){super(p,"pattern",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](t){t=t?t[n.$toStyle]():"#FFFFFF";const e=this.color?this.color[n.$toStyle]():"#000000",i="repeating-linear-gradient",r=`${t},${t} 5px,${e} 5px,${e} 10px`;switch(this.type){case"crossHatch":return`${i}(to top,${r}) ${i}(to right,${r})`;case"crossDiagonal":return`${i}(45deg,${r}) ${i}(-45deg,${r})`;case"diagonalLeft":return`${i}(45deg,${r})`;case"diagonalRight":return`${i}(-45deg,${r})`;case"horizontal":return`${i}(to top,${r})`;case"vertical":return`${i}(to right,${r})`}return""}}class ie extends n.StringObject{constructor(t){super(p,"picture"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ne extends n.XFAObject{constructor(t){super(p,"proto",!0),this.appearanceFilter=new n.XFAObjectArray,this.arc=new n.XFAObjectArray,this.area=new n.XFAObjectArray,this.assist=new n.XFAObjectArray,this.barcode=new n.XFAObjectArray,this.bindItems=new n.XFAObjectArray,this.bookend=new n.XFAObjectArray,this.boolean=new n.XFAObjectArray,this.border=new n.XFAObjectArray,this.break=new n.XFAObjectArray,this.breakAfter=new n.XFAObjectArray,this.breakBefore=new n.XFAObjectArray,this.button=new n.XFAObjectArray,this.calculate=new n.XFAObjectArray,this.caption=new n.XFAObjectArray,this.certificate=new n.XFAObjectArray,this.certificates=new n.XFAObjectArray,this.checkButton=new n.XFAObjectArray,this.choiceList=new n.XFAObjectArray,this.color=new n.XFAObjectArray,this.comb=new n.XFAObjectArray,this.connect=new n.XFAObjectArray,this.contentArea=new n.XFAObjectArray,this.corner=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.dateTimeEdit=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.defaultUi=new n.XFAObjectArray,this.desc=new n.XFAObjectArray,this.digestMethod=new n.XFAObjectArray,this.digestMethods=new n.XFAObjectArray,this.draw=new n.XFAObjectArray,this.edge=new n.XFAObjectArray,this.encoding=new n.XFAObjectArray,this.encodings=new n.XFAObjectArray,this.encrypt=new n.XFAObjectArray,this.encryptData=new n.XFAObjectArray,this.encryption=new n.XFAObjectArray,this.encryptionMethod=new n.XFAObjectArray,this.encryptionMethods=new n.XFAObjectArray,this.event=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.exObject=new n.XFAObjectArray,this.exclGroup=new n.XFAObjectArray,this.execute=new n.XFAObjectArray,this.extras=new n.XFAObjectArray,this.field=new n.XFAObjectArray,this.fill=new n.XFAObjectArray,this.filter=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.font=new n.XFAObjectArray,this.format=new n.XFAObjectArray,this.handler=new n.XFAObjectArray,this.hyphenation=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.imageEdit=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.issuers=new n.XFAObjectArray,this.items=new n.XFAObjectArray,this.keep=new n.XFAObjectArray,this.keyUsage=new n.XFAObjectArray,this.line=new n.XFAObjectArray,this.linear=new n.XFAObjectArray,this.lockDocument=new n.XFAObjectArray,this.manifest=new n.XFAObjectArray,this.margin=new n.XFAObjectArray,this.mdp=new n.XFAObjectArray,this.medium=new n.XFAObjectArray,this.message=new n.XFAObjectArray,this.numericEdit=new n.XFAObjectArray,this.occur=new n.XFAObjectArray,this.oid=new n.XFAObjectArray,this.oids=new n.XFAObjectArray,this.overflow=new n.XFAObjectArray,this.pageArea=new n.XFAObjectArray,this.pageSet=new n.XFAObjectArray,this.para=new n.XFAObjectArray,this.passwordEdit=new n.XFAObjectArray,this.pattern=new n.XFAObjectArray,this.picture=new n.XFAObjectArray,this.radial=new n.XFAObjectArray,this.reason=new n.XFAObjectArray,this.reasons=new n.XFAObjectArray,this.rectangle=new n.XFAObjectArray,this.ref=new n.XFAObjectArray,this.script=new n.XFAObjectArray,this.setProperty=new n.XFAObjectArray,this.signData=new n.XFAObjectArray,this.signature=new n.XFAObjectArray,this.signing=new n.XFAObjectArray,this.solid=new n.XFAObjectArray,this.speak=new n.XFAObjectArray,this.stipple=new n.XFAObjectArray,this.subform=new n.XFAObjectArray,this.subformSet=new n.XFAObjectArray,this.subjectDN=new n.XFAObjectArray,this.subjectDNs=new n.XFAObjectArray,this.submit=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.textEdit=new n.XFAObjectArray,this.time=new n.XFAObjectArray,this.timeStamp=new n.XFAObjectArray,this.toolTip=new n.XFAObjectArray,this.traversal=new n.XFAObjectArray,this.traverse=new n.XFAObjectArray,this.ui=new n.XFAObjectArray,this.validate=new n.XFAObjectArray,this.value=new n.XFAObjectArray,this.variables=new n.XFAObjectArray}}class re extends n.XFAObject{constructor(t){super(p,"radial",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["toEdge","toCenter"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](t){t=t?t[n.$toStyle]():"#FFFFFF";const e=this.color?this.color[n.$toStyle]():"#000000";return`radial-gradient(circle at center, ${"toEdge"===this.type?`${t},${e}`:`${e},${t}`})`}}class se extends n.StringObject{constructor(t){super(p,"reason"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class oe extends n.XFAObject{constructor(t){super(p,"reasons",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.reason=new n.XFAObjectArray}}class ae extends n.XFAObject{constructor(t){super(p,"rectangle",!0),this.hand=(0,a.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new n.XFAObjectArray(4),this.edge=new n.XFAObjectArray(4),this.fill=null}[n.$toHTML](){const t=this.edge.children.length?this.edge.children[0]:new ct({}),e=t[n.$toStyle](),i=Object.create(null);this.fill&&"visible"===this.fill.presence?Object.assign(i,this.fill[n.$toStyle]()):i.fill="transparent",i.strokeWidth=(0,o.measureToString)("visible"===t.presence?t.thickness:0),i.stroke=e.color;const r=(this.corner.children.length?this.corner.children[0]:new Q({}))[n.$toStyle](),s={name:"svg",children:[{name:"rect",attributes:{xmlns:d,width:"100%",height:"100%",x:0,y:0,rx:r.radius,ry:r.radius,style:i}}],attributes:{xmlns:d,style:{overflow:"visible"},width:"100%",height:"100%"}};return v(this[n.$getParent]()[n.$getParent]())?a.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[s]}):(s.attributes.style.position="absolute",a.HTMLResult.success(s))}}class le extends n.StringObject{constructor(t){super(p,"ref"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ce extends n.StringObject{constructor(t){super(p,"script"),this.binding=t.binding||"",this.contentType=t.contentType||"",this.id=t.id||"",this.name=t.name||"",this.runAt=(0,a.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class he extends n.XFAObject{constructor(t){super(p,"setProperty"),this.connection=t.connection||"",this.ref=t.ref||"",this.target=t.target||""}}e.SetProperty=he;class ue extends n.XFAObject{constructor(t){super(p,"signData",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["sign","clear","verify"]),this.ref=t.ref||"",this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class pe extends n.XFAObject{constructor(t){super(p,"signature",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["PDF1.3","PDF1.6"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class de extends n.XFAObject{constructor(t){super(p,"signing",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new n.XFAObjectArray}}class fe extends n.XFAObject{constructor(t){super(p,"solid",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[n.$toStyle](t){return t?t[n.$toStyle]():"#FFFFFF"}}class ge extends n.StringObject{constructor(t){super(p,"speak"),this.disable=(0,a.getInteger)({data:t.disable,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.priority=(0,a.getStringOption)(t.priority,["custom","caption","name","toolTip"]),this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class me extends n.XFAObject{constructor(t){super(p,"stipple",!0),this.id=t.id||"",this.rate=(0,a.getInteger)({data:t.rate,defaultValue:50,validate:t=>t>=0&&t<=100}),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[n.$toStyle](t){const e=this.rate/100;return l.Util.makeHexColor(Math.round(t.value.r*(1-e)+this.value.r*e),Math.round(t.value.g*(1-e)+this.value.g*e),Math.round(t.value.b*(1-e)+this.value.b*e))}}class ye extends n.XFAObject{constructor(t){super(p,"subform",!0),this.access=(0,a.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,a.getInteger)({data:t.allowMacro,defaultValue:0,validate:t=>1===t}),this.anchorType=(0,a.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,a.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.columnWidths=(t.columnWidths||"").trim().split(/\s+/).map((t=>"-1"===t?-1:(0,a.getMeasurement)(t))),this.h=t.h?(0,a.getMeasurement)(t.h):"",this.hAlign=(0,a.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,a.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=t.locale||"",this.maxH=(0,a.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,a.getMeasurement)(t.maxW,"0pt"),this.mergeMode=(0,a.getStringOption)(t.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,a.getMeasurement)(t.minH,"0pt"),this.minW=(0,a.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,a.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,a.getRelevant)(t.relevant),this.restoreState=(0,a.getStringOption)(t.restoreState,["manual","auto"]),this.scope=(0,a.getStringOption)(t.scope,["name","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,a.getMeasurement)(t.w):"",this.x=(0,a.getMeasurement)(t.x,"0pt"),this.y=(0,a.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new n.XFAObjectArray,this.breakAfter=new n.XFAObjectArray,this.breakBefore=new n.XFAObjectArray,this.connect=new n.XFAObjectArray,this.draw=new n.XFAObjectArray,this.event=new n.XFAObjectArray,this.exObject=new n.XFAObjectArray,this.exclGroup=new n.XFAObjectArray,this.field=new n.XFAObjectArray,this.proto=new n.XFAObjectArray,this.setProperty=new n.XFAObjectArray,this.subform=new n.XFAObjectArray,this.subformSet=new n.XFAObjectArray}[n.$getSubformParent](){const t=this[n.$getParent]();return t instanceof ve?t[n.$getSubformParent]():t}[n.$isBindable](){return!0}[n.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[n.$extra].attempt&&this[n.$extra].numberInLine>0||this[n.$getParent]()[n.$isThereMoreWidth]()}*[n.$getContainedChildren](){yield*w(this)}[n.$flushHTML](){return(0,s.flushHTML)(this)}[n.$addHTML](t,e){(0,s.addHTML)(this,t,e)}[n.$getAvailableSpace](){return(0,s.getAvailableSpace)(this)}[n.$isSplittable](){const t=this[n.$getSubformParent]();return!!t[n.$isSplittable]()&&(void 0!==this[n.$extra]._isSplittable?this[n.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")||this.keep&&"none"!==this.keep.intact?(this[n.$extra]._isSplittable=!1,!1):!(t.layout&&t.layout.endsWith("-tb")&&0!==t[n.$extra].numberInLine||(this[n.$extra]._isSplittable=!0,0)))}[n.$toHTML](t){if(x(this),this.break){if("auto"!==this.break.after||""!==this.break.afterTarget){const t=new z({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});t[n.$globalData]=this[n.$globalData],this[n.$appendChild](t),this.breakAfter.push(t)}if("auto"!==this.break.before||""!==this.break.beforeTarget){const t=new U({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});t[n.$globalData]=this[n.$globalData],this[n.$appendChild](t),this.breakBefore.push(t)}if(""!==this.break.overflowTarget){const t=new Yt({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});t[n.$globalData]=this[n.$globalData],this[n.$appendChild](t),this.overflow.push(t)}this[n.$removeChild](this.break),this.break=null}if("hidden"===this.presence||"inactive"===this.presence)return a.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,l.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const t=this.breakBefore.children[0];if(T(t))return a.HTMLResult.breakNode(t)}if(this[n.$extra]&&this[n.$extra].afterBreakAfter)return a.HTMLResult.EMPTY;(0,o.fixDimensions)(this);const e=[],i={id:this[n.$uid],class:[]};(0,o.setAccess)(this,i.class),this[n.$extra]||(this[n.$extra]=Object.create(null)),Object.assign(this[n.$extra],{children:e,line:null,attributes:i,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[n.$getTemplateRoot](),c=r[n.$extra].noLayoutFailure,h=this[n.$isSplittable]();if(h||A(this),!(0,s.checkDimensions)(this,t))return a.HTMLResult.FAILURE;const u=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const t=this[n.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[n.$extra].columnWidths=t,this[n.$extra].currentColumn=0)}const p=(0,o.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),d=["xfaSubform"],f=(0,o.layoutClass)(this);if(f&&d.push(f),i.style=p,i.class=d,this.name&&(i.xfaName=this.name),this.overflow){const e=this.overflow[n.$getExtra]();e.addLeader&&(e.addLeader=!1,O(this,e.leader,t))}this[n.$pushPara]();const g="lr-tb"===this.layout||"rl-tb"===this.layout,m=g?2:1;for(;this[n.$extra].attempt<m;this[n.$extra].attempt++){g&&1===this[n.$extra].attempt&&(this[n.$extra].numberInLine=0);const t=this[n.$childrenToHTML]({filter:u,include:!0});if(t.success)break;if(t.isBreak())return this[n.$popPara](),t;if(g&&0===this[n.$extra].attempt&&0===this[n.$extra].numberInLine&&!r[n.$extra].noLayoutFailure){this[n.$extra].attempt=m;break}}if(this[n.$popPara](),h||_(this),r[n.$extra].noLayoutFailure=c,this[n.$extra].attempt===m)return this.overflow&&(this[n.$getTemplateRoot]()[n.$extra].overflowNode=this.overflow),h||delete this[n.$extra],a.HTMLResult.FAILURE;if(this.overflow){const e=this.overflow[n.$getExtra]();e.addTrailer&&(e.addTrailer=!1,O(this,e.trailer,t))}let y=0,v=0;this.margin&&(y=this.margin.leftInset+this.margin.rightInset,v=this.margin.topInset+this.margin.bottomInset);const b=Math.max(this[n.$extra].width+y,this.w||0),w=Math.max(this[n.$extra].height+v,this.h||0),k=[this.x,this.y,b,w];if(""===this.w&&(p.width=(0,o.measureToString)(b)),""===this.h&&(p.height=(0,o.measureToString)(w)),("0px"===p.width||"0px"===p.height)&&0===e.length)return a.HTMLResult.EMPTY;const C={name:"div",attributes:i,children:e};S(this,i);const E=a.HTMLResult.success((0,o.createWrapper)(this,C),k);if(this.breakAfter.children.length>=1){const t=this.breakAfter.children[0];if(T(t))return this[n.$extra].afterBreakAfter=E,a.HTMLResult.breakNode(t)}return delete this[n.$extra],E}}class ve extends n.XFAObject{constructor(t){super(p,"subformSet",!0),this.id=t.id||"",this.name=t.name||"",this.relation=(0,a.getStringOption)(t.relation,["ordered","choice","unordered"]),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new n.XFAObjectArray,this.breakBefore=new n.XFAObjectArray,this.subform=new n.XFAObjectArray,this.subformSet=new n.XFAObjectArray}*[n.$getContainedChildren](){yield*w(this)}[n.$getSubformParent](){let t=this[n.$getParent]();for(;!(t instanceof ye);)t=t[n.$getParent]();return t}[n.$isBindable](){return!0}}class be extends n.ContentObject{constructor(t){super(p,"subjectDN"),this.delimiter=t.delimiter||",",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){this[n.$content]=new Map(this[n.$content].split(this.delimiter).map((t=>((t=t.split("=",2))[0]=t[0].trim(),t))))}}class we extends n.XFAObject{constructor(t){super(p,"subjectDNs",!0),this.id=t.id||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.subjectDN=new n.XFAObjectArray}}class xe extends n.XFAObject{constructor(t){super(p,"submit",!0),this.embedPDF=(0,a.getInteger)({data:t.embedPDF,defaultValue:0,validate:t=>1===t}),this.format=(0,a.getStringOption)(t.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=t.id||"",this.target=t.target||"",this.textEncoding=(0,a.getKeyword)({data:t.textEncoding?t.textEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.use=t.use||"",this.usehref=t.usehref||"",this.xdpContent=t.xdpContent||"",this.encrypt=null,this.encryptData=new n.XFAObjectArray,this.signData=new n.XFAObjectArray}}class Se extends n.XFAObject{constructor(t){super(p,"template",!0),this.baseProfile=(0,a.getStringOption)(t.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new n.XFAObjectArray}[n.$finalize](){0===this.subform.children.length&&(0,l.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,l.warn)("XFA - Several subforms in template node: please file a bug."),this[n.$tabIndex]=5e3}[n.$isSplittable](){return!0}[n.$searchNode](t,e){return t.startsWith("#")?[this[n.$ids].get(t.slice(1))]:(0,u.searchNode)(this,e,t,!0,!0)}*[n.$toPages](){if(!this.subform.children.length)return a.HTMLResult.success({name:"div",children:[]});this[n.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const t=this.subform.children[0];t.pageSet[n.$cleanPage]();const e=t.pageSet.pageArea.children,i={name:"div",children:[]};let r=null,s=null,o=null;if(t.breakBefore.children.length>=1?(s=t.breakBefore.children[0],o=s.target):t.subform.children.length>=1&&t.subform.children[0].breakBefore.children.length>=1?(s=t.subform.children[0].breakBefore.children[0],o=s.target):t.break&&t.break.beforeTarget?(s=t.break,o=s.beforeTarget):t.subform.children.length>=1&&t.subform.children[0].break&&t.subform.children[0].break.beforeTarget&&(s=t.subform.children[0].break,o=s.beforeTarget),s){const t=this[n.$searchNode](o,s[n.$getParent]());t instanceof Jt&&(r=t,s[n.$extra]={})}r||(r=e[0]),r[n.$extra]={numberOfUse:1};const c=r[n.$getParent]();let h;c[n.$extra]={numberOfUse:1,pageIndex:c.pageArea.children.indexOf(r),pageSetIndex:0};let u=null,p=null,d=!0,f=0,g=0;for(;;){if(d)f=0;else if(i.children.pop(),3==++f)return(0,l.warn)("XFA - Something goes wrong: please file a bug."),i;h=null,this[n.$extra].currentPageArea=r;const e=r[n.$toHTML]().html;i.children.push(e),u&&(this[n.$extra].noLayoutFailure=!0,e.children.push(u[n.$toHTML](r[n.$extra].space).html),u=null),p&&(this[n.$extra].noLayoutFailure=!0,e.children.push(p[n.$toHTML](r[n.$extra].space).html),p=null);const s=r.contentArea.children,o=e.children.filter((t=>t.attributes.class.includes("xfaContentarea")));d=!1,this[n.$extra].firstUnsplittable=null,this[n.$extra].noLayoutFailure=!1;const a=e=>{const i=t[n.$flushHTML]();i&&(d=d||i.children&&0!==i.children.length,o[e].children.push(i))};for(let e=g,r=s.length;e<r;e++){const r=this[n.$extra].currentContentArea=s[e],l={width:r.w,height:r.h};g=0,u&&(o[e].children.push(u[n.$toHTML](l).html),u=null),p&&(o[e].children.push(p[n.$toHTML](l).html),p=null);const c=t[n.$toHTML](l);if(c.success)return c.html?(d=d||c.html.children&&0!==c.html.children.length,o[e].children.push(c.html)):!d&&i.children.length>1&&i.children.pop(),i;if(c.isBreak()){const t=c.breakNode;if(a(e),"auto"===t.targetType)continue;t.leader&&(u=this[n.$searchNode](t.leader,t[n.$getParent]()),u=u?u[0]:null),t.trailer&&(p=this[n.$searchNode](t.trailer,t[n.$getParent]()),p=p?p[0]:null),"pageArea"===t.targetType?(h=t[n.$extra].target,e=1/0):t[n.$extra].target?(h=t[n.$extra].target,g=t[n.$extra].index+1,e=1/0):e=t[n.$extra].index}else if(this[n.$extra].overflowNode){const t=this[n.$extra].overflowNode;this[n.$extra].overflowNode=null;const i=t[n.$getExtra](),r=i.target;i.addLeader=null!==i.leader,i.addTrailer=null!==i.trailer,a(e);const o=e;if(e=1/0,r instanceof Jt)h=r;else if(r instanceof Z){const t=s.findIndex((t=>t===r));-1!==t?t>o?e=t-1:g=t:(h=r[n.$getParent](),g=h.contentArea.children.findIndex((t=>t===r)))}}else a(e)}this[n.$extra].pageNumber+=1,h&&(h[n.$isUsable]()?h[n.$extra].numberOfUse+=1:h=null),r=h||r[n.$getNextPage](),yield null}}}e.Template=Se;class ke extends n.ContentObject{constructor(t){super(p,"text"),this.id=t.id||"",this.maxChars=(0,a.getInteger)({data:t.maxChars,defaultValue:0,validate:t=>t>=0}),this.name=t.name||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$acceptWhitespace](){return!0}[n.$onChild](t){return t[n.$namespaceId]===r.NamespaceIds.xhtml.id?(this[n.$content]=t,!0):((0,l.warn)(`XFA - Invalid content in Text: ${t[n.$nodeName]}.`),!1)}[n.$onText](t){this[n.$content]instanceof n.XFAObject||super[n.$onText](t)}[n.$finalize](){"string"==typeof this[n.$content]&&(this[n.$content]=this[n.$content].replace(/\r\n/g,"\n"))}[n.$getExtra](){return"string"==typeof this[n.$content]?this[n.$content].split(/[\u2029\u2028\n]/).reduce(((t,e)=>(e&&t.push(e),t)),[]).join("\n"):this[n.$content][n.$text]()}[n.$toHTML](t){if("string"==typeof this[n.$content]){const t=C(this[n.$content]).html;return this[n.$content].includes("\u2029")?(t.name="div",t.children=[],this[n.$content].split("\u2029").map((t=>t.split(/[\u2028\n]/).reduce(((t,e)=>(t.push({name:"span",value:e},{name:"br"}),t)),[]))).forEach((e=>{t.children.push({name:"p",children:e})}))):/[\u2028\n]/.test(this[n.$content])&&(t.name="div",t.children=[],this[n.$content].split(/[\u2028\n]/).forEach((e=>{t.children.push({name:"span",value:e},{name:"br"})}))),a.HTMLResult.success(t)}return this[n.$content][n.$toHTML](t)}}e.Text=ke;class Ce extends n.XFAObject{constructor(t){super(p,"textEdit",!0),this.allowRichText=(0,a.getInteger)({data:t.allowRichText,defaultValue:0,validate:t=>1===t}),this.hScrollPolicy=(0,a.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.multiLine=(0,a.getInteger)({data:t.multiLine,defaultValue:"",validate:t=>0===t||1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.vScrollPolicy=(0,a.getStringOption)(t.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[n.$toHTML](t){const e=(0,o.toStyle)(this,"border","font","margin");let i;const r=this[n.$getParent]()[n.$getParent]();return""===this.multiLine&&(this.multiLine=r instanceof lt?1:0),i=1===this.multiLine?{name:"textarea",attributes:{dataId:r[n.$data]&&r[n.$data][n.$uid]||r[n.$uid],fieldId:r[n.$uid],class:["xfaTextfield"],style:e,"aria-label":k(r)}}:{name:"input",attributes:{type:"text",dataId:r[n.$data]&&r[n.$data][n.$uid]||r[n.$uid],fieldId:r[n.$uid],class:["xfaTextfield"],style:e,"aria-label":k(r)}},a.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[i]})}}class Ae extends n.StringObject{constructor(t){super(p,"time"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[n.$finalize](){const t=this[n.$content].trim();this[n.$content]=t?new Date(t):null}[n.$toHTML](t){return C(this[n.$content]?this[n.$content].toString():"")}}class _e extends n.XFAObject{constructor(t){super(p,"timeStamp"),this.id=t.id||"",this.server=t.server||"",this.type=(0,a.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Te extends n.StringObject{constructor(t){super(p,"toolTip"),this.id=t.id||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Oe extends n.XFAObject{constructor(t){super(p,"traversal",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.traverse=new n.XFAObjectArray}}class Ee extends n.XFAObject{constructor(t){super(p,"traverse",!0),this.id=t.id||"",this.operation=(0,a.getStringOption)(t.operation,["next","back","down","first","left","right","up"]),this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[n.$isTransparent](){return!1}}class Me extends n.XFAObject{constructor(t){super(p,"ui",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[n.$getExtra](){if(void 0===this[n.$extra]){for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"picture"===t)continue;const e=this[t];if(e instanceof n.XFAObject)return this[n.$extra]=e,e}this[n.$extra]=null}return this[n.$extra]}[n.$toHTML](t){const e=this[n.$getExtra]();return e?e[n.$toHTML](t):a.HTMLResult.EMPTY}}class Pe extends n.XFAObject{constructor(t){super(p,"validate",!0),this.formatTest=(0,a.getStringOption)(t.formatTest,["warning","disabled","error"]),this.id=t.id||"",this.nullTest=(0,a.getStringOption)(t.nullTest,["disabled","error","warning"]),this.scriptTest=(0,a.getStringOption)(t.scriptTest,["error","disabled","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Ie extends n.XFAObject{constructor(t){super(p,"value",!0),this.id=t.id||"",this.override=(0,a.getInteger)({data:t.override,defaultValue:0,validate:t=>1===t}),this.relevant=(0,a.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[n.$setValue](t){const e=this[n.$getParent]();if(e instanceof kt&&e.ui&&e.ui.imageEdit)return this.image||(this.image=new Pt({}),this[n.$appendChild](this.image)),void(this.image[n.$content]=t[n.$content]);const i=t[n.$nodeName];if(null===this[i]){for(const t of Object.getOwnPropertyNames(this)){const e=this[t];e instanceof n.XFAObject&&(this[t]=null,this[n.$removeChild](e))}this[t[n.$nodeName]]=t,this[n.$appendChild](t)}else this[i][n.$content]=t[n.$content]}[n.$text](){if(this.exData)return"string"==typeof this.exData[n.$content]?this.exData[n.$content].trim():this.exData[n.$content][n.$text]().trim();for(const t of Object.getOwnPropertyNames(this)){if("image"===t)continue;const e=this[t];if(e instanceof n.XFAObject)return(e[n.$content]||"").toString().trim()}return null}[n.$toHTML](t){for(const e of Object.getOwnPropertyNames(this)){const i=this[e];if(i instanceof n.XFAObject)return i[n.$toHTML](t)}return a.HTMLResult.EMPTY}}e.Value=Ie;class Fe extends n.XFAObject{constructor(t){super(p,"variables",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new n.XFAObjectArray,this.date=new n.XFAObjectArray,this.dateTime=new n.XFAObjectArray,this.decimal=new n.XFAObjectArray,this.exData=new n.XFAObjectArray,this.float=new n.XFAObjectArray,this.image=new n.XFAObjectArray,this.integer=new n.XFAObjectArray,this.manifest=new n.XFAObjectArray,this.script=new n.XFAObjectArray,this.text=new n.XFAObjectArray,this.time=new n.XFAObjectArray}[n.$isTransparent](){return!0}}class De{static[r.$buildXFAObject](t,e){if(De.hasOwnProperty(t)){const i=De[t](e);return i[n.$setSetAttributes](e),i}}static appearanceFilter(t){return new E(t)}static arc(t){return new M(t)}static area(t){return new P(t)}static assist(t){return new I(t)}static barcode(t){return new F(t)}static bind(t){return new D(t)}static bindItems(t){return new R(t)}static bookend(t){return new L(t)}static boolean(t){return new N(t)}static border(t){return new B(t)}static break(t){return new j(t)}static breakAfter(t){return new z(t)}static breakBefore(t){return new U(t)}static button(t){return new $(t)}static calculate(t){return new H(t)}static caption(t){return new V(t)}static certificate(t){return new q(t)}static certificates(t){return new W(t)}static checkButton(t){return new X(t)}static choiceList(t){return new G(t)}static color(t){return new K(t)}static comb(t){return new Y(t)}static connect(t){return new J(t)}static contentArea(t){return new Z(t)}static corner(t){return new Q(t)}static date(t){return new tt(t)}static dateTime(t){return new et(t)}static dateTimeEdit(t){return new it(t)}static decimal(t){return new nt(t)}static defaultUi(t){return new rt(t)}static desc(t){return new st(t)}static digestMethod(t){return new ot(t)}static digestMethods(t){return new at(t)}static draw(t){return new lt(t)}static edge(t){return new ct(t)}static encoding(t){return new ht(t)}static encodings(t){return new ut(t)}static encrypt(t){return new pt(t)}static encryptData(t){return new dt(t)}static encryption(t){return new ft(t)}static encryptionMethod(t){return new gt(t)}static encryptionMethods(t){return new mt(t)}static event(t){return new yt(t)}static exData(t){return new vt(t)}static exObject(t){return new bt(t)}static exclGroup(t){return new wt(t)}static execute(t){return new xt(t)}static extras(t){return new St(t)}static field(t){return new kt(t)}static fill(t){return new Ct(t)}static filter(t){return new At(t)}static float(t){return new _t(t)}static font(t){return new Tt(t)}static format(t){return new Ot(t)}static handler(t){return new Et(t)}static hyphenation(t){return new Mt(t)}static image(t){return new Pt(t)}static imageEdit(t){return new It(t)}static integer(t){return new Ft(t)}static issuers(t){return new Dt(t)}static items(t){return new Rt(t)}static keep(t){return new Lt(t)}static keyUsage(t){return new Nt(t)}static line(t){return new Bt(t)}static linear(t){return new jt(t)}static lockDocument(t){return new zt(t)}static manifest(t){return new Ut(t)}static margin(t){return new $t(t)}static mdp(t){return new Ht(t)}static medium(t){return new Vt(t)}static message(t){return new qt(t)}static numericEdit(t){return new Wt(t)}static occur(t){return new Xt(t)}static oid(t){return new Gt(t)}static oids(t){return new Kt(t)}static overflow(t){return new Yt(t)}static pageArea(t){return new Jt(t)}static pageSet(t){return new Zt(t)}static para(t){return new Qt(t)}static passwordEdit(t){return new te(t)}static pattern(t){return new ee(t)}static picture(t){return new ie(t)}static proto(t){return new ne(t)}static radial(t){return new re(t)}static reason(t){return new se(t)}static reasons(t){return new oe(t)}static rectangle(t){return new ae(t)}static ref(t){return new le(t)}static script(t){return new ce(t)}static setProperty(t){return new he(t)}static signData(t){return new ue(t)}static signature(t){return new pe(t)}static signing(t){return new de(t)}static solid(t){return new fe(t)}static speak(t){return new ge(t)}static stipple(t){return new me(t)}static subform(t){return new ye(t)}static subformSet(t){return new ve(t)}static subjectDN(t){return new be(t)}static subjectDNs(t){return new we(t)}static submit(t){return new xe(t)}static template(t){return new Se(t)}static text(t){return new ke(t)}static textEdit(t){return new Ce(t)}static time(t){return new Ae(t)}static timeStamp(t){return new _e(t)}static toolTip(t){return new Te(t)}static traversal(t){return new Oe(t)}static traverse(t){return new Ee(t)}static ui(t){return new Me(t)}static validate(t){return new Pe(t)}static value(t){return new Ie(t)}static variables(t){return new Fe(t)}}e.TemplateNamespace=De},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addHTML=function(t,e,i){const o=t[n.$extra],a=o.availableSpace,[l,c,h,u]=i;switch(t.layout){case"position":o.width=Math.max(o.width,l+h),o.height=Math.max(o.height,c+u),o.children.push(e);break;case"lr-tb":case"rl-tb":o.line&&1!==o.attempt||(o.line=s(t,[]),o.children.push(o.line),o.numberInLine=0),o.numberInLine+=1,o.line.children.push(e),0===o.attempt?(o.currentWidth+=h,o.height=Math.max(o.height,o.prevHeight+u)):(o.currentWidth=h,o.prevHeight=o.height,o.height+=u,o.attempt=0),o.width=Math.max(o.width,o.currentWidth);break;case"rl-row":case"row":{o.children.push(e),o.width+=h,o.height=Math.max(o.height,u);const t=(0,r.measureToString)(o.height);for(const e of o.children)e.attributes.style.height=t;break}case"table":case"tb":o.width=Math.min(a.width,Math.max(o.width,h)),o.height+=u,o.children.push(e)}},e.checkDimensions=function(t,e){if(null===t[n.$getTemplateRoot]()[n.$extra].firstUnsplittable)return!0;if(0===t.w||0===t.h)return!0;const i=t[n.$getSubformParent](),r=i[n.$extra]&&i[n.$extra].attempt||0,[,s,o,a]=function(t){let e,i,n=""===t.w?NaN:t.w,r=""===t.h?NaN:t.h,[s,o]=[0,0];switch(t.anchorType||""){case"bottomCenter":[s,o]=[n/2,r];break;case"bottomLeft":[s,o]=[0,r];break;case"bottomRight":[s,o]=[n,r];break;case"middleCenter":[s,o]=[n/2,r/2];break;case"middleLeft":[s,o]=[0,r/2];break;case"middleRight":[s,o]=[n,r/2];break;case"topCenter":[s,o]=[n/2,0];break;case"topRight":[s,o]=[n,0]}switch(t.rotate||0){case 0:[e,i]=[-s,-o];break;case 90:[e,i]=[-o,s],[n,r]=[r,-n];break;case 180:[e,i]=[s,o],[n,r]=[-n,-r];break;case 270:[e,i]=[o,-s],[n,r]=[-r,n]}return[t.x+e+Math.min(0,n),t.y+i+Math.min(0,r),Math.abs(n),Math.abs(r)]}(t);switch(i.layout){case"lr-tb":case"rl-tb":return 0===r?t[n.$getTemplateRoot]()[n.$extra].noLayoutFailure?""!==t.w?Math.round(o-e.width)<=2:e.width>2:!(""!==t.h&&Math.round(a-e.height)>2)&&(""!==t.w?Math.round(o-e.width)<=2||0===i[n.$extra].numberInLine&&e.height>2:e.width>2):!!t[n.$getTemplateRoot]()[n.$extra].noLayoutFailure||!(""!==t.h&&Math.round(a-e.height)>2)&&(""===t.w||Math.round(o-e.width)<=2||!i[n.$isThereMoreWidth]())&&e.height>2;case"table":case"tb":return!!t[n.$getTemplateRoot]()[n.$extra].noLayoutFailure||(""===t.h||t[n.$isSplittable]()?(""===t.w||Math.round(o-e.width)<=2||!i[n.$isThereMoreWidth]())&&e.height>2:Math.round(a-e.height)<=2);case"position":if(t[n.$getTemplateRoot]()[n.$extra].noLayoutFailure)return!0;if(""===t.h||Math.round(a+s-e.height)<=2)return!0;const l=t[n.$getTemplateRoot]()[n.$extra].currentContentArea;return a+s>l.h;case"rl-row":case"row":return!!t[n.$getTemplateRoot]()[n.$extra].noLayoutFailure||""===t.h||Math.round(a-e.height)<=2;default:return!0}},e.flushHTML=function(t){if(!t[n.$extra])return null;const e={name:"div",attributes:t[n.$extra].attributes,children:t[n.$extra].children};if(t[n.$extra].failingNode){const i=t[n.$extra].failingNode[n.$flushHTML]();i&&(t.layout.endsWith("-tb")?e.children.push(s(t,[i])):e.children.push(i))}return 0===e.children.length?null:e},e.getAvailableSpace=function(t){const e=t[n.$extra].availableSpace,i=t.margin?t.margin.topInset+t.margin.bottomInset:0,r=t.margin?t.margin.leftInset+t.margin.rightInset:0;switch(t.layout){case"lr-tb":case"rl-tb":return 0===t[n.$extra].attempt?{width:e.width-r-t[n.$extra].currentWidth,height:e.height-i-t[n.$extra].prevHeight}:{width:e.width-r,height:e.height-i-t[n.$extra].height};case"rl-row":case"row":return{width:t[n.$extra].columnWidths.slice(t[n.$extra].currentColumn).reduce(((t,e)=>t+e)),height:e.height-r};case"table":case"tb":return{width:e.width-r,height:e.height-i-t[n.$extra].height};default:return e}};var n=i(77),r=i(84);function s(t,e){return{name:"div",attributes:{class:["lr-tb"===t.layout?"xfaLr":"xfaRl"]},children:e}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.computeBbox=function(t,e,i){let r;if(""!==t.w&&""!==t.h)r=[t.x,t.y,t.w,t.h];else{if(!i)return null;let s=t.w;if(""===s){if(0===t.maxW){const e=t[n.$getSubformParent]();s="position"===e.layout&&""!==e.w?0:t.minW}else s=Math.min(t.maxW,i.width);e.attributes.style.width=l(s)}let o=t.h;if(""===o){if(0===t.maxH){const e=t[n.$getSubformParent]();o="position"===e.layout&&""!==e.h?0:t.minH}else o=Math.min(t.maxH,i.height);e.attributes.style.height=l(o)}r=[t.x,t.y,s,o]}return r},e.createWrapper=function(t,e){const{attributes:i}=e,{style:r}=i,s={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(i.class.push("xfaWrapped"),t.border){const{widths:i,insets:o}=t.border[n.$extra];let a,l,c=o[0],h=o[3];const p=o[0]+o[2],d=o[1]+o[3];switch(t.border.hand){case"even":c-=i[0]/2,h-=i[3]/2,a=`calc(100% + ${(i[1]+i[3])/2-d}px)`,l=`calc(100% + ${(i[0]+i[2])/2-p}px)`;break;case"left":c-=i[0],h-=i[3],a=`calc(100% + ${i[1]+i[3]-d}px)`,l=`calc(100% + ${i[0]+i[2]-p}px)`;break;case"right":a=d?`calc(100% - ${d}px)`:"100%",l=p?`calc(100% - ${p}px)`:"100%"}const f=["xfaBorder"];u(t.border)&&f.push("xfaPrintOnly");const g={name:"div",attributes:{class:f,style:{top:`${c}px`,left:`${h}px`,width:a,height:l}},children:[]};for(const t of["border","borderWidth","borderColor","borderRadius","borderStyle"])void 0!==r[t]&&(g.attributes.style[t]=r[t],delete r[t]);s.children.push(g,e)}else s.children.push(e);for(const t of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])void 0!==r[t]&&(s.attributes.style[t]=r[t],delete r[t]);return"absolute"===r.position?s.attributes.style.position="absolute":s.attributes.style.position="relative",delete r.position,r.alignSelf&&(s.attributes.style.alignSelf=r.alignSelf,delete r.alignSelf),s},e.fixDimensions=function(t){const e=t[n.$getSubformParent]();if(e.layout&&e.layout.includes("row")){const i=e[n.$extra],r=t.colSpan;let s;s=-1===r?i.columnWidths.slice(i.currentColumn).reduce(((t,e)=>t+e),0):i.columnWidths.slice(i.currentColumn,i.currentColumn+r).reduce(((t,e)=>t+e),0),isNaN(s)||(t.w=s)}e.layout&&"position"!==e.layout&&(t.x=t.y=0),"table"===t.layout&&""===t.w&&Array.isArray(t.columnWidths)&&(t.w=t.columnWidths.reduce(((t,e)=>t+e),0))},e.fixTextIndent=function(t){const e=(0,s.getMeasurement)(t.textIndent,"0px");if(e>=0)return;const i="padding"+("left"==("right"===t.textAlign?"right":"left")?"Left":"Right"),n=(0,s.getMeasurement)(t[i],"0px");t[i]=n-e+"px"},e.fixURL=function(t){const e=(0,r.createValidAbsoluteUrl)(t,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return e?e.href:null},e.isPrintOnly=u,e.layoutClass=function(t){switch(t.layout){case"position":default:return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb"}},e.layoutNode=function(t,e){let i=null,r=null,s=!1;if((!t.w||!t.h)&&t.value){let o=0,a=0;t.margin&&(o=t.margin.leftInset+t.margin.rightInset,a=t.margin.topInset+t.margin.bottomInset);let l=null,c=null;t.para&&(c=Object.create(null),l=""===t.para.lineHeight?null:t.para.lineHeight,c.top=""===t.para.spaceAbove?0:t.para.spaceAbove,c.bottom=""===t.para.spaceBelow?0:t.para.spaceBelow,c.left=""===t.para.marginLeft?0:t.para.marginLeft,c.right=""===t.para.marginRight?0:t.para.marginRight);let u=t.font;if(!u){const e=t[n.$getTemplateRoot]();let i=t[n.$getParent]();for(;i&&i!==e;){if(i.font){u=i.font;break}i=i[n.$getParent]()}}const p=(t.w?t.w:e.width)-o,d=t[n.$globalData].fontFinder;if(t.value.exData&&t.value.exData[n.$content]&&"text/html"===t.value.exData.contentType){const e=h(t.value.exData[n.$content],u,c,l,d,p);r=e.width,i=e.height,s=e.isBroken}else{const e=t.value[n.$text]();if(e){const t=h(e,u,c,l,d,p);r=t.width,i=t.height,s=t.isBroken}}null===r||t.w||(r+=o),null===i||t.h||(i+=a)}return{w:r,h:i,isBroken:s}},e.measureToString=l,e.setAccess=function(t,e){switch(t.access){case"nonInteractive":e.push("xfaNonInteractive");break;case"readOnly":e.push("xfaReadOnly");break;case"protected":e.push("xfaDisabled")}},e.setFontFamily=function(t,e,i,n){if(!i)return void delete n.fontFamily;const r=(0,s.stripQuotes)(t.typeface);n.fontFamily=`"${r}"`;const a=i.find(r);if(a){const{fontFamily:i}=a.regular.cssFontInfo;i!==r&&(n.fontFamily=`"${i}"`);const s=p(e);if(s&&""!==s.lineHeight)return;if(n.lineHeight)return;const l=(0,o.selectFont)(t,a);l&&(n.lineHeight=Math.max(1.2,l.lineHeight))}},e.setMinMaxDimensions=function(t,e){"position"===t[n.$getSubformParent]().layout&&(t.minW>0&&(e.minWidth=l(t.minW)),t.maxW>0&&(e.maxWidth=l(t.maxW)),t.minH>0&&(e.minHeight=l(t.minH)),t.maxH>0&&(e.maxHeight=l(t.maxH)))},e.setPara=function(t,e,i){if(i.attributes.class&&i.attributes.class.includes("xfaRich")){e&&(""===t.h&&(e.height="auto"),""===t.w&&(e.width="auto"));const r=p(t);if(r){const t=i.attributes.style;switch(t.display="flex",t.flexDirection="column",r.vAlign){case"top":t.justifyContent="start";break;case"bottom":t.justifyContent="end";break;case"middle":t.justifyContent="center"}const e=r[n.$toStyle]();for(const[i,n]of Object.entries(e))i in t||(t[i]=n)}}},e.toStyle=function(t,...e){const i=Object.create(null);for(const s of e){const e=t[s];if(null!==e)if(c.hasOwnProperty(s))c[s](t,i);else if(e instanceof n.XFAObject){const t=e[n.$toStyle]();t?Object.assign(i,t):(0,r.warn)(`(DEBUG) - XFA - style for ${s} not implemented yet`)}}return i};var n=i(77),r=i(2),s=i(78),o=i(85),a=i(86);function l(t){return"string"==typeof t?"0px":Number.isInteger(t)?`${t}px`:`${t.toFixed(2)}px`}const c={anchorType(t,e){const i=t[n.$getSubformParent]();if(i&&(!i.layout||"position"===i.layout))switch("transform"in e||(e.transform=""),t.anchorType){case"bottomCenter":e.transform+="translate(-50%, -100%)";break;case"bottomLeft":e.transform+="translate(0,-100%)";break;case"bottomRight":e.transform+="translate(-100%,-100%)";break;case"middleCenter":e.transform+="translate(-50%,-50%)";break;case"middleLeft":e.transform+="translate(0,-50%)";break;case"middleRight":e.transform+="translate(-100%,-50%)";break;case"topCenter":e.transform+="translate(-50%,0)";break;case"topRight":e.transform+="translate(-100%,0)"}},dimensions(t,e){const i=t[n.$getSubformParent]();let r=t.w;const s=t.h;if(i.layout&&i.layout.includes("row")){const e=i[n.$extra],s=t.colSpan;let o;-1===s?(o=e.columnWidths.slice(e.currentColumn).reduce(((t,e)=>t+e),0),e.currentColumn=0):(o=e.columnWidths.slice(e.currentColumn,e.currentColumn+s).reduce(((t,e)=>t+e),0),e.currentColumn=(e.currentColumn+t.colSpan)%e.columnWidths.length),isNaN(o)||(r=t.w=o)}e.width=""!==r?l(r):"auto",e.height=""!==s?l(s):"auto"},position(t,e){const i=t[n.$getSubformParent]();i&&i.layout&&"position"!==i.layout||(e.position="absolute",e.left=l(t.x),e.top=l(t.y))},rotate(t,e){t.rotate&&("transform"in e||(e.transform=""),e.transform+=`rotate(-${t.rotate}deg)`,e.transformOrigin="top left")},presence(t,e){switch(t.presence){case"invisible":e.visibility="hidden";break;case"hidden":case"inactive":e.display="none"}},hAlign(t,e){if("para"===t[n.$nodeName])switch(t.hAlign){case"justifyAll":e.textAlign="justify-all";break;case"radix":e.textAlign="left";break;default:e.textAlign=t.hAlign}else switch(t.hAlign){case"left":e.alignSelf="start";break;case"center":e.alignSelf="center";break;case"right":e.alignSelf="end"}},margin(t,e){t.margin&&(e.margin=t.margin[n.$toStyle]().margin)}};function h(t,e,i,r,s,o){const l=new a.TextMeasure(e,i,r,s);return"string"==typeof t?l.addString(t):t[n.$pushGlyphs](l),l.compute(o)}function u(t){return t.relevant.length>0&&!t.relevant[0].excluded&&"print"===t.relevant[0].viewname}function p(t){const e=t[n.$getTemplateRoot]()[n.$extra].paraStack;return e.length?e[e.length-1]:null}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontFinder=void 0,e.getMetrics=function(t,e=!1){let i=null;if(t){const e=(0,r.stripQuotes)(t.typeface),s=t[n.$globalData].fontFinder.find(e);i=o(t,s)}if(!i)return{lineHeight:12,lineGap:2,lineNoGap:10};const s=t.size||10,a=i.lineHeight?Math.max(e?0:1.2,i.lineHeight):1.2,l=void 0===i.lineGap?.2:i.lineGap;return{lineHeight:a*s,lineGap:l*s,lineNoGap:Math.max(1,a-l)*s}},e.selectFont=o;var n=i(77),r=i(78),s=i(2);function o(t,e){return"italic"===t.posture?"bold"===t.weight?e.bolditalic:e.italic:"bold"===t.weight?e.bold:e.regular}e.FontFinder=class{constructor(t){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(t)}add(t,e=null){for(const e of t)this.addPdfFont(e);for(const t of this.fonts.values())t.regular||(t.regular=t.italic||t.bold||t.bolditalic);if(!e||0===e.size)return;const i=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const t of e)this.fonts.set(t,i)}addPdfFont(t){const e=t.cssFontInfo,i=e.fontFamily;let n=this.fonts.get(i);n||(n=Object.create(null),this.fonts.set(i,n),this.defaultFont||(this.defaultFont=n));let r="";const s=parseFloat(e.fontWeight);0!==parseFloat(e.italicAngle)?r=s>=700?"bolditalic":"italic":s>=700&&(r="bold"),r||((t.name.includes("Bold")||t.psName&&t.psName.includes("Bold"))&&(r="bold"),(t.name.includes("Italic")||t.name.endsWith("It")||t.psName&&(t.psName.includes("Italic")||t.psName.endsWith("It")))&&(r+="italic")),r||(r="regular"),n[r]=t}getDefault(){return this.defaultFont}find(t,e=!0){let i=this.fonts.get(t)||this.cache.get(t);if(i)return i;const n=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let r=t.replace(n,"");if(i=this.fonts.get(r),i)return this.cache.set(t,i),i;r=r.toLowerCase();const o=[];for(const[t,e]of this.fonts.entries())t.replace(n,"").toLowerCase().startsWith(r)&&o.push(e);if(0===o.length)for(const[,t]of this.fonts.entries())t.regular.name&&t.regular.name.replace(n,"").toLowerCase().startsWith(r)&&o.push(t);if(0===o.length){r=r.replace(/psmt|mt/gi,"");for(const[t,e]of this.fonts.entries())t.replace(n,"").toLowerCase().startsWith(r)&&o.push(e)}if(0===o.length)for(const t of this.fonts.values())t.regular.name&&t.regular.name.replace(n,"").toLowerCase().startsWith(r)&&o.push(t);return o.length>=1?(1!==o.length&&e&&(0,s.warn)(`XFA - Too many choices to guess the correct font: ${t}`),this.cache.set(t,o[0]),o[0]):(e&&!this.warned.has(t)&&(this.warned.add(t),(0,s.warn)(`XFA - Cannot find the font: ${t}`)),null)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextMeasure=void 0;var n=i(85);class r{constructor(t,e,i,r){if(this.lineHeight=i,this.paraMargin=e||{top:0,bottom:0,left:0,right:0},!t)return void([this.pdfFont,this.xfaFont]=this.defaultFont(r));this.xfaFont={typeface:t.typeface,posture:t.posture,weight:t.weight,size:t.size,letterSpacing:t.letterSpacing};const s=r.find(t.typeface);s?(this.pdfFont=(0,n.selectFont)(t,s),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(r))):[this.pdfFont,this.xfaFont]=this.defaultFont(r)}defaultFont(t){const e=t.find("Helvetica",!1)||t.find("Myriad Pro",!1)||t.find("Arial",!1)||t.getDefault();if(e&&e.regular){const t=e.regular;return[t,{typeface:t.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0}]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class s{constructor(t,e,i,n){this.fontFinder=n,this.stack=[new r(t,e,i,n)]}pushData(t,e,i){const n=this.stack[this.stack.length-1];for(const e of["typeface","posture","weight","size","letterSpacing"])t[e]||(t[e]=n.xfaFont[e]);for(const t of["top","bottom","left","right"])isNaN(e[t])&&(e[t]=n.paraMargin[t]);const s=new r(t,e,i||n.lineHeight,this.fontFinder);s.pdfFont||(s.pdfFont=n.pdfFont),this.stack.push(s)}popFont(){this.stack.pop()}topFont(){return this.stack[this.stack.length-1]}}e.TextMeasure=class{constructor(t,e,i,n){this.glyphs=[],this.fontSelector=new s(t,e,i,n),this.extraHeight=0}pushData(t,e,i){this.fontSelector.pushData(t,e,i)}popFont(t){return this.fontSelector.popFont()}addPara(){const t=this.fontSelector.topFont();this.extraHeight+=t.paraMargin.top+t.paraMargin.bottom}addString(t){if(!t)return;const e=this.fontSelector.topFont(),i=e.xfaFont.size;if(e.pdfFont){const n=e.xfaFont.letterSpacing,r=e.pdfFont,s=r.lineHeight||1.2,o=e.lineHeight||Math.max(1.2,s)*i,a=s-(void 0===r.lineGap?.2:r.lineGap),l=Math.max(1,a)*i,c=i/1e3,h=r.defaultWidth||r.charsToGlyphs(" ")[0].width;for(const e of t.split(/[\u2029\n]/)){const t=r.encodeString(e).join(""),i=r.charsToGlyphs(t);for(const t of i){const e=t.width||h;this.glyphs.push([e*c+n,o,l,t.unicode,!1])}this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}else{for(const e of t.split(/[\u2029\n]/)){for(const t of e.split(""))this.glyphs.push([i,1.2*i,i,t,!1]);this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}}compute(t){let e=-1,i=0,n=0,r=0,s=0,o=0,a=!1,l=!0;for(let c=0,h=this.glyphs.length;c<h;c++){const[h,u,p,d,f]=this.glyphs[c],g=" "===d,m=l?p:u;f?(n=Math.max(n,s),s=0,r+=o,o=m,e=-1,i=0,l=!1):g?s+h>t?(n=Math.max(n,s),s=0,r+=o,o=m,e=-1,i=0,a=!0,l=!1):(o=Math.max(m,o),i=s,s+=h,e=c):s+h>t?(r+=o,o=m,-1!==e?(c=e,n=Math.max(n,i),s=0,e=-1,i=0):(n=Math.max(n,s),s=h),a=!0,l=!1):(s+=h,o=Math.max(m,o))}return n=Math.max(n,s),r+=o+this.extraHeight,{width:1.02*n,height:r,isBroken:a}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataHandler=void 0;var n=i(77);e.DataHandler=class{constructor(t,e){this.data=e,this.dataset=t.datasets||null}serialize(t){const e=[[-1,this.data[n.$getChildren]()]];for(;e.length>0;){const i=e[e.length-1],[r,s]=i;if(r+1===s.length){e.pop();continue}const o=s[++i[0]],a=t.get(o[n.$uid]);if(a)o[n.$setValue](a);else{const e=o[n.$getAttributes]();for(const i of e.values()){const e=t.get(i[n.$uid]);if(e){i[n.$setValue](e);break}}}const l=o[n.$getChildren]();l.length>0&&e.push([-1,l])}const i=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const t of this.dataset[n.$getChildren]())"data"!==t[n.$nodeName]&&t[n.$toString](i);return this.data[n.$toString](i),i.push("</xfa:datasets>"),i.join("")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAParser=void 0;var n=i(77),r=i(70),s=i(89),o=i(2);class a extends r.XMLParserBase{constructor(t=null,e=!1){super(),this._builder=new s.Builder(t),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=r.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=e}parse(t){if(this.parseXml(t),this._errorCode===r.XMLParserErrorCode.NoError)return this._current[n.$finalize](),this._current.element}onText(t){t=t.replace(this._nbsps,(t=>t.slice(1)+" ")),this._richText||this._current[n.$acceptWhitespace]()?this._current[n.$onText](t,this._richText):this._whiteRegex.test(t)||this._current[n.$onText](t.trim())}onCdata(t){this._current[n.$onText](t)}_mkAttributes(t,e){let i=null,r=null;const s=Object.create({});for(const{name:a,value:l}of t)if("xmlns"===a)i?(0,o.warn)(`XFA - multiple namespace definition in <${e}>`):i=l;else if(a.startsWith("xmlns:")){const t=a.substring("xmlns:".length);r||(r=[]),r.push({prefix:t,value:l})}else{const t=a.indexOf(":");if(-1===t)s[a]=l;else{let e=s[n.$nsAttributes];e||(e=s[n.$nsAttributes]=Object.create(null));const[i,r]=[a.slice(0,t),a.slice(t+1)];let o=e[i];o||(o=e[i]=Object.create(null)),o[r]=l}}return[i,r,s]}_getNameAndPrefix(t,e){const i=t.indexOf(":");return-1===i?[t,null]:[t.substring(i+1),e?"":t.substring(0,i)]}onBeginElement(t,e,i){const[r,s,o]=this._mkAttributes(e,t),[a,l]=this._getNameAndPrefix(t,this._builder.isNsAgnostic()),c=this._builder.build({nsPrefix:l,name:a,attributes:o,namespace:r,prefixes:s});if(c[n.$globalData]=this._globalData,i)return c[n.$finalize](),this._current[n.$onChild](c)&&c[n.$setId](this._ids),void c[n.$clean](this._builder);this._stack.push(this._current),this._current=c}onEndElement(t){const e=this._current;if(e[n.$isCDATAXml]()&&"string"==typeof e[n.$content]){const t=new a;t._globalData=this._globalData;const i=t.parse(e[n.$content]);e[n.$content]=null,e[n.$onChild](i)}e[n.$finalize](),this._current=this._stack.pop(),this._current[n.$onChild](e)&&e[n.$setId](this._ids),e[n.$clean](this._builder)}onError(t){this._errorCode=t}}e.XFAParser=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var n=i(79),r=i(77),s=i(90),o=i(82),a=i(99),l=i(2);class c extends r.XFAObject{constructor(t){super(-1,"root",Object.create(null)),this.element=null,this[r.$ids]=t}[r.$onChild](t){return this.element=t,!0}[r.$finalize](){super[r.$finalize](),this.element.template instanceof o.Template&&(this[r.$ids].set(r.$root,this.element),this.element.template[r.$resolvePrototypes](this[r.$ids]),this.element.template[r.$ids]=this[r.$ids])}}class h extends r.XFAObject{constructor(){super(-1,"",Object.create(null))}[r.$onChild](t){return!1}}e.Builder=class{constructor(t=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(n.NamespaceIds).map((({id:t})=>t))),this._currentNamespace=t||new a.UnknownNamespace(++this._nextNsId)}buildRoot(t){return new c(t)}build({nsPrefix:t,name:e,attributes:i,namespace:o,prefixes:a}){const l=null!==o;if(l&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(o)),a&&this._addNamespacePrefix(a),i.hasOwnProperty(r.$nsAttributes)){const t=s.NamespaceSetUp.datasets,e=i[r.$nsAttributes];let n=null;for(const[i,r]of Object.entries(e))if(this._getNamespaceToUse(i)===t){n={xfa:r};break}n?i[r.$nsAttributes]=n:delete i[r.$nsAttributes]}const c=this._getNamespaceToUse(t),u=c&&c[n.$buildXFAObject](e,i)||new h;return u[r.$isNsAgnostic]()&&this._nsAgnosticLevel++,(l||a||u[r.$isNsAgnostic]())&&(u[r.$cleanup]={hasNamespace:l,prefixes:a,nsAgnostic:u[r.$isNsAgnostic]()}),u}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(t){let e=this._namespaces.get(t);if(e)return e;for(const[i,{check:r}]of Object.entries(n.NamespaceIds))if(r(t)){if(e=s.NamespaceSetUp[i],e)return this._namespaces.set(t,e),e;break}return e=new a.UnknownNamespace(++this._nextNsId),this._namespaces.set(t,e),e}_addNamespacePrefix(t){for(const{prefix:e,value:i}of t){const t=this._searchNamespace(i);let n=this._namespacePrefixes.get(e);n||(n=[],this._namespacePrefixes.set(e,n)),n.push(t)}}_getNamespaceToUse(t){if(!t)return this._currentNamespace;const e=this._namespacePrefixes.get(t);return e&&e.length>0?e[e.length-1]:((0,l.warn)(`Unknown namespace prefix: ${t}.`),null)}clean(t){const{hasNamespace:e,prefixes:i,nsAgnostic:n}=t;e&&(this._currentNamespace=this._namespaceStack.pop()),i&&i.forEach((({prefix:t})=>{this._namespacePrefixes.get(t).pop()})),n&&this._nsAgnosticLevel--}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceSetUp=void 0;var n=i(91),r=i(92),s=i(93),o=i(94),a=i(95),l=i(96),c=i(82),h=i(97),u=i(98);const p={config:n.ConfigNamespace,connection:r.ConnectionSetNamespace,datasets:s.DatasetsNamespace,localeSet:o.LocaleSetNamespace,signature:a.SignatureNamespace,stylesheet:l.StylesheetNamespace,template:c.TemplateNamespace,xdp:h.XdpNamespace,xhtml:u.XhtmlNamespace};e.NamespaceSetUp=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigNamespace=void 0;var n=i(79),r=i(77),s=i(78),o=i(2);const a=n.NamespaceIds.config.id;class l extends r.XFAObject{constructor(t){super(a,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new r.XFAObjectArray}}class c extends r.XFAObject{constructor(t){super(a,"acrobat7",!0),this.dynamicRender=null}}class h extends r.OptionObject{constructor(t){super(a,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class u extends r.OptionObject{constructor(t){super(a,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class p extends r.Option01{constructor(t){super(a,"addSilentPrint")}}class d extends r.Option01{constructor(t){super(a,"addViewerPreferences")}}class f extends r.Option10{constructor(t){super(a,"adjustData")}}class g extends r.IntegerObject{constructor(t){super(a,"adobeExtensionLevel",0,(t=>t>=1&&t<=8))}}class m extends r.XFAObject{constructor(t){super(a,"agent",!0),this.name=t.name?t.name.trim():"",this.common=new r.XFAObjectArray}}class y extends r.ContentObject{constructor(t){super(a,"alwaysEmbed")}}class v extends r.StringObject{constructor(t){super(a,"amd")}}class b extends r.XFAObject{constructor(t){super(a,"area"),this.level=(0,s.getInteger)({data:t.level,defaultValue:0,validate:t=>t>=1&&t<=3}),this.name=(0,s.getStringOption)(t.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class w extends r.OptionObject{constructor(t){super(a,"attributes",["preserve","delegate","ignore"])}}class x extends r.OptionObject{constructor(t){super(a,"autoSave",["disabled","enabled"])}}class S extends r.StringObject{constructor(t){super(a,"base")}}class k extends r.XFAObject{constructor(t){super(a,"batchOutput"),this.format=(0,s.getStringOption)(t.format,["none","concat","zip","zipCompress"])}}class C extends r.ContentObject{constructor(t){super(a,"behaviorOverride")}[r.$finalize](){this[r.$content]=new Map(this[r.$content].trim().split(/\s+/).filter((t=>t.includes(":"))).map((t=>t.split(":",2))))}}class A extends r.XFAObject{constructor(t){super(a,"cache",!0),this.templateCache=null}}class _ extends r.Option01{constructor(t){super(a,"change")}}class T extends r.XFAObject{constructor(t){super(a,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new r.XFAObjectArray}}class O extends r.XFAObject{constructor(t){super(a,"compress"),this.scope=(0,s.getStringOption)(t.scope,["imageOnly","document"])}}class E extends r.Option01{constructor(t){super(a,"compressLogicalStructure")}}class M extends r.Option10{constructor(t){super(a,"compressObjectStream")}}class P extends r.XFAObject{constructor(t){super(a,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}}class I extends r.XFAObject{constructor(t){super(a,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new r.XFAObjectArray}}class F extends r.OptionObject{constructor(t){super(a,"conformance",["A","B"])}}class D extends r.Option01{constructor(t){super(a,"contentCopy")}}class R extends r.IntegerObject{constructor(t){super(a,"copies",1,(t=>t>=1))}}class L extends r.StringObject{constructor(t){super(a,"creator")}}class N extends r.IntegerObject{constructor(t){super(a,"currentPage",0,(t=>t>=0))}}class B extends r.XFAObject{constructor(t){super(a,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new r.XFAObjectArray,this.transform=new r.XFAObjectArray}}class j extends r.XFAObject{constructor(t){super(a,"debug",!0),this.uri=null}}class z extends r.ContentObject{constructor(t){super(a,"defaultTypeface"),this.writingScript=(0,s.getStringOption)(t.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class U extends r.OptionObject{constructor(t){super(a,"destination",["pdf","pcl","ps","webClient","zpl"])}}class $ extends r.Option01{constructor(t){super(a,"documentAssembly")}}class H extends r.XFAObject{constructor(t){super(a,"driver",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class V extends r.OptionObject{constructor(t){super(a,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class q extends r.OptionObject{constructor(t){super(a,"dynamicRender",["forbidden","required"])}}class W extends r.Option01{constructor(t){super(a,"embed")}}class X extends r.Option01{constructor(t){super(a,"encrypt")}}class G extends r.XFAObject{constructor(t){super(a,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}}class K extends r.OptionObject{constructor(t){super(a,"encryptionLevel",["40bit","128bit"])}}class Y extends r.StringObject{constructor(t){super(a,"enforce")}}class J extends r.XFAObject{constructor(t){super(a,"equate"),this.force=(0,s.getInteger)({data:t.force,defaultValue:1,validate:t=>0===t}),this.from=t.from||"",this.to=t.to||""}}class Z extends r.XFAObject{constructor(t){super(a,"equateRange"),this.from=t.from||"",this.to=t.to||"",this._unicodeRange=t.unicodeRange||""}get unicodeRange(){const t=[],e=/U\+([0-9a-fA-F]+)/,i=this._unicodeRange;for(let n of i.split(",").map((t=>t.trim())).filter((t=>!!t)))n=n.split("-",2).map((t=>{const i=t.match(e);return i?parseInt(i[1],16):0})),1===n.length&&n.push(n[0]),t.push(n);return(0,o.shadow)(this,"unicodeRange",t)}}class Q extends r.ContentObject{constructor(t){super(a,"exclude")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>t&&["calculate","close","enter","exit","initialize","ready","validate"].includes(t)))}}class tt extends r.StringObject{constructor(t){super(a,"excludeNS")}}class et extends r.OptionObject{constructor(t){super(a,"flipLabel",["usePrinterSetting","on","off"])}}class it extends r.XFAObject{constructor(t){super(a,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new r.XFAObjectArray,this.defaultTypeface=new r.XFAObjectArray,this.neverEmbed=new r.XFAObjectArray}}class nt extends r.Option01{constructor(t){super(a,"formFieldFilling")}}class rt extends r.StringObject{constructor(t){super(a,"groupParent")}}class st extends r.OptionObject{constructor(t){super(a,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class ot extends r.StringObject{constructor(t){super(a,"includeXDPContent")}}class at extends r.OptionObject{constructor(t){super(a,"incrementalLoad",["none","forwardOnly"])}}class lt extends r.Option01{constructor(t){super(a,"incrementalMerge")}}class ct extends r.Option01{constructor(t){super(a,"interactive")}}class ht extends r.OptionObject{constructor(t){super(a,"jog",["usePrinterSetting","none","pageSet"])}}class ut extends r.XFAObject{constructor(t){super(a,"labelPrinter",!0),this.name=(0,s.getStringOption)(t.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class pt extends r.OptionObject{constructor(t){super(a,"layout",["paginate","panel"])}}class dt extends r.IntegerObject{constructor(t){super(a,"level",0,(t=>t>0))}}class ft extends r.Option01{constructor(t){super(a,"linearized")}}class gt extends r.StringObject{constructor(t){super(a,"locale")}}class mt extends r.StringObject{constructor(t){super(a,"localeSet")}}class yt extends r.XFAObject{constructor(t){super(a,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}}class vt extends r.XFAObject{constructor(t){super(a,"map",!0),this.equate=new r.XFAObjectArray,this.equateRange=new r.XFAObjectArray}}class bt extends r.XFAObject{constructor(t){super(a,"mediumInfo",!0),this.map=null}}class wt extends r.XFAObject{constructor(t){super(a,"message",!0),this.msgId=null,this.severity=null}}class xt extends r.XFAObject{constructor(t){super(a,"messaging",!0),this.message=new r.XFAObjectArray}}class St extends r.OptionObject{constructor(t){super(a,"mode",["append","overwrite"])}}class kt extends r.Option01{constructor(t){super(a,"modifyAnnots")}}class Ct extends r.IntegerObject{constructor(t){super(a,"msgId",1,(t=>t>=1))}}class At extends r.StringObject{constructor(t){super(a,"nameAttr")}}class _t extends r.ContentObject{constructor(t){super(a,"neverEmbed")}}class Tt extends r.IntegerObject{constructor(t){super(a,"numberOfCopies",null,(t=>t>=2&&t<=5))}}class Ot extends r.XFAObject{constructor(t){super(a,"openAction",!0),this.destination=null}}class Et extends r.XFAObject{constructor(t){super(a,"output",!0),this.to=null,this.type=null,this.uri=null}}class Mt extends r.StringObject{constructor(t){super(a,"outputBin")}}class Pt extends r.XFAObject{constructor(t){super(a,"outputXSL",!0),this.uri=null}}class It extends r.OptionObject{constructor(t){super(a,"overprint",["none","both","draw","field"])}}class Ft extends r.StringObject{constructor(t){super(a,"packets")}[r.$finalize](){"*"!==this[r.$content]&&(this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>["config","datasets","template","xfdf","xslt"].includes(t))))}}class Dt extends r.XFAObject{constructor(t){super(a,"pageOffset"),this.x=(0,s.getInteger)({data:t.x,defaultValue:"useXDCSetting",validate:t=>!0}),this.y=(0,s.getInteger)({data:t.y,defaultValue:"useXDCSetting",validate:t=>!0})}}class Rt extends r.StringObject{constructor(t){super(a,"pageRange")}[r.$finalize](){const t=this[r.$content].trim().split(/\s+/).map((t=>parseInt(t,10))),e=[];for(let i=0,n=t.length;i<n;i+=2)e.push(t.slice(i,i+2));this[r.$content]=e}}class Lt extends r.OptionObject{constructor(t){super(a,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class Nt extends r.OptionObject{constructor(t){super(a,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class Bt extends r.IntegerObject{constructor(t){super(a,"part",1,(t=>!1))}}class jt extends r.XFAObject{constructor(t){super(a,"pcl",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}}class zt extends r.XFAObject{constructor(t){super(a,"pdf",!0),this.name=t.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}}class Ut extends r.XFAObject{constructor(t){super(a,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}}class $t extends r.XFAObject{constructor(t){super(a,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}}class Ht extends r.Option01{constructor(t){super(a,"pickTrayByPDFSize")}}class Vt extends r.StringObject{constructor(t){super(a,"picture")}}class qt extends r.Option01{constructor(t){super(a,"plaintextMetadata")}}class Wt extends r.OptionObject{constructor(t){super(a,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class Xt extends r.XFAObject{constructor(t){super(a,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new r.XFAObjectArray,this.labelPrinter=new r.XFAObjectArray,this.pcl=new r.XFAObjectArray,this.pdf=new r.XFAObjectArray,this.ps=new r.XFAObjectArray,this.submitUrl=new r.XFAObjectArray,this.webClient=new r.XFAObjectArray,this.zpl=new r.XFAObjectArray}}class Gt extends r.Option01{constructor(t){super(a,"print")}}class Kt extends r.Option01{constructor(t){super(a,"printHighQuality")}}class Yt extends r.OptionObject{constructor(t){super(a,"printScaling",["appdefault","noScaling"])}}class Jt extends r.StringObject{constructor(t){super(a,"printerName")}}class Zt extends r.StringObject{constructor(t){super(a,"producer")}}class Qt extends r.XFAObject{constructor(t){super(a,"ps",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}}class te extends r.ContentObject{constructor(t){super(a,"range")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s*,\s*/,2).map((t=>t.split("-").map((t=>parseInt(t.trim(),10))))).filter((t=>t.every((t=>!isNaN(t))))).map((t=>(1===t.length&&t.push(t[0]),t)))}}class ee extends r.ContentObject{constructor(t){super(a,"record")}[r.$finalize](){this[r.$content]=this[r.$content].trim();const t=parseInt(this[r.$content],10);!isNaN(t)&&t>=0&&(this[r.$content]=t)}}class ie extends r.ContentObject{constructor(t){super(a,"relevant")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/)}}class ne extends r.ContentObject{constructor(t){super(a,"rename")}[r.$finalize](){this[r.$content]=this[r.$content].trim(),(this[r.$content].toLowerCase().startsWith("xml")||this[r.$content].match(new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u")))&&(0,o.warn)("XFA - Rename: invalid XFA name")}}class re extends r.OptionObject{constructor(t){super(a,"renderPolicy",["server","client"])}}class se extends r.OptionObject{constructor(t){super(a,"runScripts",["both","client","none","server"])}}class oe extends r.XFAObject{constructor(t){super(a,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}}class ae extends r.OptionObject{constructor(t){super(a,"scriptModel",["XFA","none"])}}class le extends r.OptionObject{constructor(t){super(a,"severity",["ignore","error","information","trace","warning"])}}class ce extends r.XFAObject{constructor(t){super(a,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}}class he extends r.XFAObject{constructor(t){super(a,"staple"),this.mode=(0,s.getStringOption)(t.mode,["usePrinterSetting","on","off"])}}class ue extends r.StringObject{constructor(t){super(a,"startNode")}}class pe extends r.IntegerObject{constructor(t){super(a,"startPage",0,(t=>!0))}}class de extends r.OptionObject{constructor(t){super(a,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class fe extends r.StringObject{constructor(t){super(a,"submitUrl")}}class ge extends r.IntegerObject{constructor(t){super(a,"subsetBelow",100,(t=>t>=0&&t<=100))}}class me extends r.Option01{constructor(t){super(a,"suppressBanner")}}class ye extends r.Option01{constructor(t){super(a,"tagged")}}class ve extends r.XFAObject{constructor(t){super(a,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}}class be extends r.OptionObject{constructor(t){super(a,"threshold",["trace","error","information","warning"])}}class we extends r.OptionObject{constructor(t){super(a,"to",["null","memory","stderr","stdout","system","uri"])}}class xe extends r.XFAObject{constructor(t){super(a,"templateCache"),this.maxEntries=(0,s.getInteger)({data:t.maxEntries,defaultValue:5,validate:t=>t>=0})}}class Se extends r.XFAObject{constructor(t){super(a,"trace",!0),this.area=new r.XFAObjectArray}}class ke extends r.XFAObject{constructor(t){super(a,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}}class Ce extends r.OptionObject{constructor(t){super(a,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class Ae extends r.StringObject{constructor(t){super(a,"uri")}}class _e extends r.OptionObject{constructor(t){super(a,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class Te extends r.ContentObject{constructor(t){super(a,"validateApprovalSignatures")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>["docReady","postSign"].includes(t)))}}class Oe extends r.OptionObject{constructor(t){super(a,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class Ee extends r.OptionObject{constructor(t){super(a,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class Me extends r.XFAObject{constructor(t){super(a,"VersionControl"),this.outputBelow=(0,s.getStringOption)(t.outputBelow,["warn","error","update"]),this.sourceAbove=(0,s.getStringOption)(t.sourceAbove,["warn","error"]),this.sourceBelow=(0,s.getStringOption)(t.sourceBelow,["update","maintain"])}}class Pe extends r.XFAObject{constructor(t){super(a,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}}class Ie extends r.XFAObject{constructor(t){super(a,"webClient",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class Fe extends r.OptionObject{constructor(t){super(a,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class De extends r.ContentObject{constructor(t){super(a,"window")}[r.$finalize](){const t=this[r.$content].trim().split(/\s*,\s*/,2).map((t=>parseInt(t,10)));t.some((t=>isNaN(t)))?this[r.$content]=[0,0]:(1===t.length&&t.push(t[0]),this[r.$content]=t)}}class Re extends r.XFAObject{constructor(t){super(a,"xdc",!0),this.uri=new r.XFAObjectArray,this.xsl=new r.XFAObjectArray}}class Le extends r.XFAObject{constructor(t){super(a,"xdp",!0),this.packets=null}}class Ne extends r.XFAObject{constructor(t){super(a,"xsl",!0),this.debug=null,this.uri=null}}class Be extends r.XFAObject{constructor(t){super(a,"zpl",!0),this.name=t.name?t.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class je{static[n.$buildXFAObject](t,e){if(je.hasOwnProperty(t))return je[t](e)}static acrobat(t){return new l(t)}static acrobat7(t){return new c(t)}static ADBE_JSConsole(t){return new h(t)}static ADBE_JSDebugger(t){return new u(t)}static addSilentPrint(t){return new p(t)}static addViewerPreferences(t){return new d(t)}static adjustData(t){return new f(t)}static adobeExtensionLevel(t){return new g(t)}static agent(t){return new m(t)}static alwaysEmbed(t){return new y(t)}static amd(t){return new v(t)}static area(t){return new b(t)}static attributes(t){return new w(t)}static autoSave(t){return new x(t)}static base(t){return new S(t)}static batchOutput(t){return new k(t)}static behaviorOverride(t){return new C(t)}static cache(t){return new A(t)}static change(t){return new _(t)}static common(t){return new T(t)}static compress(t){return new O(t)}static compressLogicalStructure(t){return new E(t)}static compressObjectStream(t){return new M(t)}static compression(t){return new P(t)}static config(t){return new I(t)}static conformance(t){return new F(t)}static contentCopy(t){return new D(t)}static copies(t){return new R(t)}static creator(t){return new L(t)}static currentPage(t){return new N(t)}static data(t){return new B(t)}static debug(t){return new j(t)}static defaultTypeface(t){return new z(t)}static destination(t){return new U(t)}static documentAssembly(t){return new $(t)}static driver(t){return new H(t)}static duplexOption(t){return new V(t)}static dynamicRender(t){return new q(t)}static embed(t){return new W(t)}static encrypt(t){return new X(t)}static encryption(t){return new G(t)}static encryptionLevel(t){return new K(t)}static enforce(t){return new Y(t)}static equate(t){return new J(t)}static equateRange(t){return new Z(t)}static exclude(t){return new Q(t)}static excludeNS(t){return new tt(t)}static flipLabel(t){return new et(t)}static fontInfo(t){return new it(t)}static formFieldFilling(t){return new nt(t)}static groupParent(t){return new rt(t)}static ifEmpty(t){return new st(t)}static includeXDPContent(t){return new ot(t)}static incrementalLoad(t){return new at(t)}static incrementalMerge(t){return new lt(t)}static interactive(t){return new ct(t)}static jog(t){return new ht(t)}static labelPrinter(t){return new ut(t)}static layout(t){return new pt(t)}static level(t){return new dt(t)}static linearized(t){return new ft(t)}static locale(t){return new gt(t)}static localeSet(t){return new mt(t)}static log(t){return new yt(t)}static map(t){return new vt(t)}static mediumInfo(t){return new bt(t)}static message(t){return new wt(t)}static messaging(t){return new xt(t)}static mode(t){return new St(t)}static modifyAnnots(t){return new kt(t)}static msgId(t){return new Ct(t)}static nameAttr(t){return new At(t)}static neverEmbed(t){return new _t(t)}static numberOfCopies(t){return new Tt(t)}static openAction(t){return new Ot(t)}static output(t){return new Et(t)}static outputBin(t){return new Mt(t)}static outputXSL(t){return new Pt(t)}static overprint(t){return new It(t)}static packets(t){return new Ft(t)}static pageOffset(t){return new Dt(t)}static pageRange(t){return new Rt(t)}static pagination(t){return new Lt(t)}static paginationOverride(t){return new Nt(t)}static part(t){return new Bt(t)}static pcl(t){return new jt(t)}static pdf(t){return new zt(t)}static pdfa(t){return new Ut(t)}static permissions(t){return new $t(t)}static pickTrayByPDFSize(t){return new Ht(t)}static picture(t){return new Vt(t)}static plaintextMetadata(t){return new qt(t)}static presence(t){return new Wt(t)}static present(t){return new Xt(t)}static print(t){return new Gt(t)}static printHighQuality(t){return new Kt(t)}static printScaling(t){return new Yt(t)}static printerName(t){return new Jt(t)}static producer(t){return new Zt(t)}static ps(t){return new Qt(t)}static range(t){return new te(t)}static record(t){return new ee(t)}static relevant(t){return new ie(t)}static rename(t){return new ne(t)}static renderPolicy(t){return new re(t)}static runScripts(t){return new se(t)}static script(t){return new oe(t)}static scriptModel(t){return new ae(t)}static severity(t){return new le(t)}static silentPrint(t){return new ce(t)}static staple(t){return new he(t)}static startNode(t){return new ue(t)}static startPage(t){return new pe(t)}static submitFormat(t){return new de(t)}static submitUrl(t){return new fe(t)}static subsetBelow(t){return new ge(t)}static suppressBanner(t){return new me(t)}static tagged(t){return new ye(t)}static template(t){return new ve(t)}static templateCache(t){return new xe(t)}static threshold(t){return new be(t)}static to(t){return new we(t)}static trace(t){return new Se(t)}static transform(t){return new ke(t)}static type(t){return new Ce(t)}static uri(t){return new Ae(t)}static validate(t){return new _e(t)}static validateApprovalSignatures(t){return new Te(t)}static validationMessaging(t){return new Oe(t)}static version(t){return new Ee(t)}static versionControl(t){return new Me(t)}static viewerPreferences(t){return new Pe(t)}static webClient(t){return new Ie(t)}static whitespace(t){return new Fe(t)}static window(t){return new De(t)}static xdc(t){return new Re(t)}static xdp(t){return new Le(t)}static xsl(t){return new Ne(t)}static zpl(t){return new Be(t)}}e.ConfigNamespace=je},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionSetNamespace=void 0;var n=i(79),r=i(77);const s=n.NamespaceIds.connectionSet.id;class o extends r.XFAObject{constructor(t){super(s,"connectionSet",!0),this.wsdlConnection=new r.XFAObjectArray,this.xmlConnection=new r.XFAObjectArray,this.xsdConnection=new r.XFAObjectArray}}class a extends r.XFAObject{constructor(t){super(s,"effectiveInputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class l extends r.XFAObject{constructor(t){super(s,"effectiveOutputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class c extends r.StringObject{constructor(t){super(s,"operation"),this.id=t.id||"",this.input=t.input||"",this.name=t.name||"",this.output=t.output||"",this.use=t.use||"",this.usehref=t.usehref||""}}class h extends r.StringObject{constructor(t){super(s,"rootElement"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class u extends r.StringObject{constructor(t){super(s,"soapAction"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class p extends r.StringObject{constructor(t){super(s,"soapAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class d extends r.StringObject{constructor(t){super(s,"uri"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class f extends r.StringObject{constructor(t){super(s,"wsdlAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class g extends r.XFAObject{constructor(t){super(s,"wsdlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}}class m extends r.XFAObject{constructor(t){super(s,"xmlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.uri=null}}class y extends r.XFAObject{constructor(t){super(s,"xsdConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.rootElement=null,this.uri=null}}class v{static[n.$buildXFAObject](t,e){if(v.hasOwnProperty(t))return v[t](e)}static connectionSet(t){return new o(t)}static effectiveInputPolicy(t){return new a(t)}static effectiveOutputPolicy(t){return new l(t)}static operation(t){return new c(t)}static rootElement(t){return new h(t)}static soapAction(t){return new u(t)}static soapAddress(t){return new p(t)}static uri(t){return new d(t)}static wsdlAddress(t){return new f(t)}static wsdlConnection(t){return new g(t)}static xmlConnection(t){return new m(t)}static xsdConnection(t){return new y(t)}}e.ConnectionSetNamespace=v},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetsNamespace=void 0;var n=i(77),r=i(79);const s=r.NamespaceIds.datasets.id;class o extends n.XmlObject{constructor(t){super(s,"data",t)}[n.$isNsAgnostic](){return!0}}class a extends n.XFAObject{constructor(t){super(s,"datasets",!0),this.data=null,this.Signature=null}[n.$onChild](t){const e=t[n.$nodeName];("data"===e&&t[n.$namespaceId]===s||"Signature"===e&&t[n.$namespaceId]===r.NamespaceIds.signature.id)&&(this[e]=t),this[n.$appendChild](t)}}class l{static[r.$buildXFAObject](t,e){if(l.hasOwnProperty(t))return l[t](e)}static datasets(t){return new a(t)}static data(t){return new o(t)}}e.DatasetsNamespace=l},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocaleSetNamespace=void 0;var n=i(79),r=i(77),s=i(78);const o=n.NamespaceIds.localeSet.id;class a extends r.XFAObject{constructor(t){super(o,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new r.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new r.XFAObjectArray(2)}}class l extends r.StringObject{constructor(t){super(o,"currencySymbol"),this.name=(0,s.getStringOption)(t.name,["symbol","isoname","decimal"])}}class c extends r.XFAObject{constructor(t){super(o,"currencySymbols",!0),this.currencySymbol=new r.XFAObjectArray(3)}}class h extends r.StringObject{constructor(t){super(o,"datePattern"),this.name=(0,s.getStringOption)(t.name,["full","long","med","short"])}}class u extends r.XFAObject{constructor(t){super(o,"datePatterns",!0),this.datePattern=new r.XFAObjectArray(4)}}class p extends r.ContentObject{constructor(t){super(o,"dateTimeSymbols")}}class d extends r.StringObject{constructor(t){super(o,"day")}}class f extends r.XFAObject{constructor(t){super(o,"dayNames",!0),this.abbr=(0,s.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.day=new r.XFAObjectArray(7)}}class g extends r.StringObject{constructor(t){super(o,"era")}}class m extends r.XFAObject{constructor(t){super(o,"eraNames",!0),this.era=new r.XFAObjectArray(2)}}class y extends r.XFAObject{constructor(t){super(o,"locale",!0),this.desc=t.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}}class v extends r.XFAObject{constructor(t){super(o,"localeSet",!0),this.locale=new r.XFAObjectArray}}class b extends r.StringObject{constructor(t){super(o,"meridiem")}}class w extends r.XFAObject{constructor(t){super(o,"meridiemNames",!0),this.meridiem=new r.XFAObjectArray(2)}}class x extends r.StringObject{constructor(t){super(o,"month")}}class S extends r.XFAObject{constructor(t){super(o,"monthNames",!0),this.abbr=(0,s.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.month=new r.XFAObjectArray(12)}}class k extends r.StringObject{constructor(t){super(o,"numberPattern"),this.name=(0,s.getStringOption)(t.name,["full","long","med","short"])}}class C extends r.XFAObject{constructor(t){super(o,"numberPatterns",!0),this.numberPattern=new r.XFAObjectArray(4)}}class A extends r.StringObject{constructor(t){super(o,"numberSymbol"),this.name=(0,s.getStringOption)(t.name,["decimal","grouping","percent","minus","zero"])}}class _ extends r.XFAObject{constructor(t){super(o,"numberSymbols",!0),this.numberSymbol=new r.XFAObjectArray(5)}}class T extends r.StringObject{constructor(t){super(o,"timePattern"),this.name=(0,s.getStringOption)(t.name,["full","long","med","short"])}}class O extends r.XFAObject{constructor(t){super(o,"timePatterns",!0),this.timePattern=new r.XFAObjectArray(4)}}class E extends r.XFAObject{constructor(t){super(o,"typeFace",!0),this.name=""|t.name}}class M extends r.XFAObject{constructor(t){super(o,"typeFaces",!0),this.typeFace=new r.XFAObjectArray}}class P{static[n.$buildXFAObject](t,e){if(P.hasOwnProperty(t))return P[t](e)}static calendarSymbols(t){return new a(t)}static currencySymbol(t){return new l(t)}static currencySymbols(t){return new c(t)}static datePattern(t){return new h(t)}static datePatterns(t){return new u(t)}static dateTimeSymbols(t){return new p(t)}static day(t){return new d(t)}static dayNames(t){return new f(t)}static era(t){return new g(t)}static eraNames(t){return new m(t)}static locale(t){return new y(t)}static localeSet(t){return new v(t)}static meridiem(t){return new b(t)}static meridiemNames(t){return new w(t)}static month(t){return new x(t)}static monthNames(t){return new S(t)}static numberPattern(t){return new k(t)}static numberPatterns(t){return new C(t)}static numberSymbol(t){return new A(t)}static numberSymbols(t){return new _(t)}static timePattern(t){return new T(t)}static timePatterns(t){return new O(t)}static typeFace(t){return new E(t)}static typeFaces(t){return new M(t)}}e.LocaleSetNamespace=P},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SignatureNamespace=void 0;var n=i(79),r=i(77);const s=n.NamespaceIds.signature.id;class o extends r.XFAObject{constructor(t){super(s,"signature",!0)}}class a{static[n.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static signature(t){return new o(t)}}e.SignatureNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StylesheetNamespace=void 0;var n=i(79),r=i(77);const s=n.NamespaceIds.stylesheet.id;class o extends r.XFAObject{constructor(t){super(s,"stylesheet",!0)}}class a{static[n.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static stylesheet(t){return new o(t)}}e.StylesheetNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XdpNamespace=void 0;var n=i(79),r=i(77);const s=n.NamespaceIds.xdp.id;class o extends r.XFAObject{constructor(t){super(s,"xdp",!0),this.uuid=t.uuid||"",this.timeStamp=t.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new r.XFAObjectArray,this.template=null}[r.$onChildCheck](t){const e=n.NamespaceIds[t[r.$nodeName]];return e&&t[r.$namespaceId]===e.id}}class a{static[n.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static xdp(t){return new o(t)}}e.XdpNamespace=a},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XhtmlNamespace=void 0;var n=i(77),r=i(79),s=i(84),o=i(78);const a=r.NamespaceIds.xhtml.id,l=Symbol(),c=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),h=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",t=>"none"===t?"none":"normal"],["xfa-font-horizontal-scale",t=>`scaleX(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-font-vertical-scale",t=>`scaleY(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(t,e)=>(t=e.fontSize=(0,o.getMeasurement)(t),(0,s.measureToString)(.99*t))],["letter-spacing",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["line-height",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["margin",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["margin-bottom",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["margin-left",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["margin-right",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["margin-top",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["text-indent",t=>(0,s.measureToString)((0,o.getMeasurement)(t))],["font-family",t=>t],["vertical-align",t=>(0,s.measureToString)((0,o.getMeasurement)(t))]]),u=/\s+/g,p=/[\r\n]+/g,d=/\r\n?/g;function f(t,e,i){const r=Object.create(null);if(!t)return r;const a=Object.create(null);for(const[e,i]of t.split(";").map((t=>t.split(":",2)))){const t=h.get(e);if(""===t)continue;let n=i;t&&(n="string"==typeof t?t:t(i,a)),e.endsWith("scale")?r.transform?r.transform=`${r[e]} ${n}`:r.transform=n:r[e.replaceAll(/-([a-zA-Z])/g,((t,e)=>e.toUpperCase()))]=n}if(r.fontFamily&&(0,s.setFontFamily)({typeface:r.fontFamily,weight:r.fontWeight||"normal",posture:r.fontStyle||"normal",size:a.fontSize||0},e,e[n.$globalData].fontFinder,r),i&&r.verticalAlign&&"0px"!==r.verticalAlign&&r.fontSize){const t=.583,e=.333,i=(0,o.getMeasurement)(r.fontSize);r.fontSize=(0,s.measureToString)(i*t),r.verticalAlign=(0,s.measureToString)(Math.sign((0,o.getMeasurement)(r.verticalAlign))*i*e)}return(0,s.fixTextIndent)(r),r}const g=new Set(["body","html"]);class m extends n.XmlObject{constructor(t,e){super(a,e),this[l]=!1,this.style=t.style||""}[n.$clean](t){var e;super[n.$clean](t),this.style=(e=this).style?e.style.trim().split(/\s*;\s*/).filter((t=>!!t)).map((t=>t.split(/\s*:\s*/,2))).filter((([t,i])=>("font-family"===t&&e[n.$globalData].usedTypefaces.add(i),c.has(t)))).map((t=>t.join(":"))).join(";"):""}[n.$acceptWhitespace](){return!g.has(this[n.$nodeName])}[n.$onText](t,e=!1){e?this[l]=!0:(t=t.replace(p,""),this.style.includes("xfa-spacerun:yes")||(t=t.replace(u," "))),t&&(this[n.$content]+=t)}[n.$pushGlyphs](t,e=!0){const i=Object.create(null),r={top:NaN,bottom:NaN,left:NaN,right:NaN};let s=null;for(const[t,e]of this.style.split(";").map((t=>t.split(":",2))))switch(t){case"font-family":i.typeface=(0,o.stripQuotes)(e);break;case"font-size":i.size=(0,o.getMeasurement)(e);break;case"font-weight":i.weight=e;break;case"font-style":i.posture=e;break;case"letter-spacing":i.letterSpacing=(0,o.getMeasurement)(e);break;case"margin":const t=e.split(/ \t/).map((t=>(0,o.getMeasurement)(t)));switch(t.length){case 1:r.top=r.bottom=r.left=r.right=t[0];break;case 2:r.top=r.bottom=t[0],r.left=r.right=t[1];break;case 3:r.top=t[0],r.bottom=t[2],r.left=r.right=t[1];break;case 4:r.top=t[0],r.left=t[1],r.bottom=t[2],r.right=t[3]}break;case"margin-top":r.top=(0,o.getMeasurement)(e);break;case"margin-bottom":r.bottom=(0,o.getMeasurement)(e);break;case"margin-left":r.left=(0,o.getMeasurement)(e);break;case"margin-right":r.right=(0,o.getMeasurement)(e);break;case"line-height":s=(0,o.getMeasurement)(e)}if(t.pushData(i,r,s),this[n.$content])t.addString(this[n.$content]);else for(const e of this[n.$getChildren]())"#text"!==e[n.$nodeName]?e[n.$pushGlyphs](t):t.addString(e[n.$content]);e&&t.popFont()}[n.$toHTML](t){const e=[];if(this[n.$extra]={children:e},this[n.$childrenToHTML]({}),0===e.length&&!this[n.$content])return o.HTMLResult.EMPTY;let i;return i=this[l]?this[n.$content]?this[n.$content].replace(d,"\n"):void 0:this[n.$content]||void 0,o.HTMLResult.success({name:this[n.$nodeName],attributes:{href:this.href,style:f(this.style,this,this[l])},children:e,value:i})}}class y extends m{constructor(t){super(t,"a"),this.href=(0,s.fixURL)(t.href)||""}}class v extends m{constructor(t){super(t,"b")}[n.$pushGlyphs](t){t.pushFont({weight:"bold"}),super[n.$pushGlyphs](t),t.popFont()}}class b extends m{constructor(t){super(t,"body")}[n.$toHTML](t){const e=super[n.$toHTML](t),{html:i}=e;return i?(i.name="div",i.attributes.class=["xfaRich"],e):o.HTMLResult.EMPTY}}class w extends m{constructor(t){super(t,"br")}[n.$text](){return"\n"}[n.$pushGlyphs](t){t.addString("\n")}[n.$toHTML](t){return o.HTMLResult.success({name:"br"})}}class x extends m{constructor(t){super(t,"html")}[n.$toHTML](t){const e=[];if(this[n.$extra]={children:e},this[n.$childrenToHTML]({}),0===e.length)return o.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[n.$content]||""});if(1===e.length){const t=e[0];if(t.attributes&&t.attributes.class.includes("xfaRich"))return o.HTMLResult.success(t)}return o.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:e})}}class S extends m{constructor(t){super(t,"i")}[n.$pushGlyphs](t){t.pushFont({posture:"italic"}),super[n.$pushGlyphs](t),t.popFont()}}class k extends m{constructor(t){super(t,"li")}}class C extends m{constructor(t){super(t,"ol")}}class A extends m{constructor(t){super(t,"p")}[n.$pushGlyphs](t){super[n.$pushGlyphs](t,!1),t.addString("\n"),t.addPara(),t.popFont()}[n.$text](){const t=this[n.$getParent]()[n.$getChildren]();return t[t.length-1]===this?super[n.$text]():super[n.$text]()+"\n"}}class _ extends m{constructor(t){super(t,"span")}}class T extends m{constructor(t){super(t,"sub")}}class O extends m{constructor(t){super(t,"sup")}}class E extends m{constructor(t){super(t,"ul")}}class M{static[r.$buildXFAObject](t,e){if(M.hasOwnProperty(t))return M[t](e)}static a(t){return new y(t)}static b(t){return new v(t)}static body(t){return new b(t)}static br(t){return new w(t)}static html(t){return new x(t)}static i(t){return new S(t)}static li(t){return new k(t)}static ol(t){return new C(t)}static p(t){return new A(t)}static span(t){return new _(t)}static sub(t){return new T(t)}static sup(t){return new O(t)}static ul(t){return new E(t)}}e.XhtmlNamespace=M},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnknownNamespace=void 0;var n=i(79),r=i(77);class s{constructor(t){this.namespaceId=t}[n.$buildXFAObject](t,e){return new r.XmlObject(this.namespaceId,t,e)}}e.UnknownNamespace=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetReader=void 0;var n=i(2),r=i(8),s=i(70);function o(t){try{return(0,n.stringToUTF8String)(t)}catch(e){return(0,n.warn)(`UTF-8 decoding failed: "${e}".`),t}}class a extends s.SimpleXMLParser{constructor(t){super(t),this.node=null}onEndElement(t){const e=super.onEndElement(t);if(e&&"xfa:datasets"===t)throw this.node=e,new Error("Aborting DatasetXMLParser.")}}e.DatasetReader=class{constructor(t){if(t.datasets)this.node=new s.SimpleXMLParser({hasAttributes:!0}).parseFromString(t.datasets).documentElement;else{const e=new a({hasAttributes:!0});try{e.parseFromString(t["xdp:xdp"])}catch(t){}this.node=e.node}}getValue(t){if(!this.node||!t)return"";const e=this.node.searchNode((0,r.parseXFAPath)(t),0);if(!e)return"";const i=e.firstChild;return i&&"value"===i.nodeName?e.children.map((t=>o(t.textContent))):o(e.textContent)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRef=void 0;var n=i(2),r=i(5),s=i(8),o=i(27),a=i(9),l=i(74);e.XRef=class{constructor(t,e){this.stream=t,this.pdfManager=e,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new r.RefSet,this.stats=new s.DocStats(e.msgHandler),this._newRefNum=null}getNewRef(){return null===this._newRefNum&&(this._newRefNum=this.entries.length),r.Ref.get(this._newRefNum++,0)}resetNewRef(){this._newRefNum=null}setStartXRef(t){this.startXRefQueue=[t]}parse(t=!1){let e,i,o;t?((0,n.warn)("Indexing all PDF objects"),e=this.indexObjects()):e=this.readXRef(),e.assignXref(this),this.trailer=e;try{i=e.get("Encrypt")}catch(t){if(t instanceof s.MissingDataException)throw t;(0,n.warn)(`XRef.parse - Invalid "Encrypt" reference: "${t}".`)}if(i instanceof r.Dict){const t=e.get("ID"),n=t&&t.length?t[0]:"";i.suppressEncryption=!0,this.encrypt=new l.CipherTransformFactory(i,n,this.pdfManager.password)}try{o=e.get("Root")}catch(t){if(t instanceof s.MissingDataException)throw t;(0,n.warn)(`XRef.parse - Invalid "Root" reference: "${t}".`)}if(o instanceof r.Dict)try{if(o.get("Pages")instanceof r.Dict)return void(this.root=o)}catch(t){if(t instanceof s.MissingDataException)throw t;(0,n.warn)(`XRef.parse - Invalid "Pages" reference: "${t}".`)}if(!t)throw new s.XRefParseException;throw new n.InvalidPDFException("Invalid Root reference.")}processXRefTable(t){"tableState"in this||(this.tableState={entryNum:0,streamPos:t.lexer.stream.pos,parserBuf1:t.buf1,parserBuf2:t.buf2});const e=this.readXRefTable(t);if(!(0,r.isCmd)(e,"trailer"))throw new n.FormatError("Invalid XRef table: could not find trailer dictionary");let i=t.getObj();if(i instanceof r.Dict||!i.dict||(i=i.dict),!(i instanceof r.Dict))throw new n.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,i}readXRefTable(t){const e=t.lexer.stream,i=this.tableState;let s;for(e.pos=i.streamPos,t.buf1=i.parserBuf1,t.buf2=i.parserBuf2;;){if(!("firstEntryNum"in i)||!("entryCount"in i)){if((0,r.isCmd)(s=t.getObj(),"trailer"))break;i.firstEntryNum=s,i.entryCount=t.getObj()}let o=i.firstEntryNum;const a=i.entryCount;if(!Number.isInteger(o)||!Number.isInteger(a))throw new n.FormatError("Invalid XRef table: wrong types in subsection header");for(let s=i.entryNum;s<a;s++){i.streamPos=e.pos,i.entryNum=s,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2;const l={};l.offset=t.getObj(),l.gen=t.getObj();const c=t.getObj();if(c instanceof r.Cmd)switch(c.cmd){case"f":l.free=!0;break;case"n":l.uncompressed=!0}if(!Number.isInteger(l.offset)||!Number.isInteger(l.gen)||!l.free&&!l.uncompressed)throw new n.FormatError(`Invalid entry in XRef subsection: ${o}, ${a}`);0===s&&l.free&&1===o&&(o=0),this.entries[s+o]||(this.entries[s+o]=l)}i.entryNum=0,i.streamPos=e.pos,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2,delete i.firstEntryNum,delete i.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new n.FormatError("Invalid XRef table: unexpected first object");return s}processXRefStream(t){if(!("streamState"in this)){const e=t.dict,i=e.get("W");let n=e.get("Index");n||(n=[0,e.get("Size")]),this.streamState={entryRanges:n,byteWidths:i,entryNum:0,streamPos:t.pos}}return this.readXRefStream(t),delete this.streamState,t.dict}readXRefStream(t){const e=this.streamState;t.pos=e.streamPos;const[i,r,s]=e.byteWidths,o=e.entryRanges;for(;o.length>0;){const[a,l]=o;if(!Number.isInteger(a)||!Number.isInteger(l))throw new n.FormatError(`Invalid XRef range fields: ${a}, ${l}`);if(!Number.isInteger(i)||!Number.isInteger(r)||!Number.isInteger(s))throw new n.FormatError(`Invalid XRef entry fields length: ${a}, ${l}`);for(let o=e.entryNum;o<l;++o){e.entryNum=o,e.streamPos=t.pos;let l=0,c=0,h=0;for(let e=0;e<i;++e){const e=t.getByte();if(-1===e)throw new n.FormatError("Invalid XRef byteWidths 'type'.");l=l<<8|e}0===i&&(l=1);for(let e=0;e<r;++e){const e=t.getByte();if(-1===e)throw new n.FormatError("Invalid XRef byteWidths 'offset'.");c=c<<8|e}for(let e=0;e<s;++e){const e=t.getByte();if(-1===e)throw new n.FormatError("Invalid XRef byteWidths 'generation'.");h=h<<8|e}const u={};switch(u.offset=c,u.gen=h,l){case 0:u.free=!0;break;case 1:u.uncompressed=!0;break;case 2:break;default:throw new n.FormatError(`Invalid XRef entry type: ${l}`)}this.entries[a+o]||(this.entries[a+o]=u)}e.entryNum=0,e.streamPos=t.pos,o.splice(0,2)}}indexObjects(){function t(t,e){let i="",n=t[e];for(;10!==n&&13!==n&&60!==n&&!(++e>=t.length);)i+=String.fromCharCode(n),n=t[e];return i}function e(t,e,i){const n=i.length,r=t.length;let s=0;for(;e<r;){let r=0;for(;r<n&&t[e+r]===i[r];)++r;if(r>=n)break;e++,s++}return s}const i=/^(\d+)\s+(\d+)\s+obj\b/,a=/\bendobj[\b\s]$/,l=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,c=new Uint8Array([116,114,97,105,108,101,114]),h=new Uint8Array([115,116,97,114,116,120,114,101,102]),u=new Uint8Array([111,98,106]),p=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const d=this.stream;d.pos=0;const f=d.getBytes(),g=f.length;let m=d.start;const y=[],v=[];for(;m<g;){let r=f[m];if(9===r||10===r||13===r||32===r){++m;continue}if(37===r){do{if(++m,m>=g)break;r=f[m]}while(10!==r&&13!==r);continue}const b=t(f,m);let w;if(b.startsWith("xref")&&(4===b.length||/\s/.test(b[4])))m+=e(f,m,c),y.push(m),m+=e(f,m,h);else if(w=i.exec(b)){const t=0|w[1],i=0|w[2];let r,c=m+b.length,h=!1;if(this.entries[t]){if(this.entries[t].gen===i)try{new o.Parser({lexer:new o.Lexer(d.makeSubStream(c))}).getObj(),h=!0}catch(t){t instanceof s.ParserEOFException?(0,n.warn)(`indexObjects -- checking object (${b}): "${t}".`):h=!0}}else h=!0;for(h&&(this.entries[t]={offset:m-d.start,gen:i,uncompressed:!0});c<f.length;){const t=c+e(f,c,u)+4;r=t-m;const i=Math.max(t-25,c),s=(0,n.bytesToString)(f.subarray(i,t));if(a.test(s))break;{const t=l.exec(s);if(t&&t[1]){(0,n.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),r-=t[1].length;break}}c=t}const g=f.subarray(m,m+r),y=e(g,0,p);y<r&&g[y+5]<64&&(v.push(m-d.start),this.xrefstms[m-d.start]=1),m+=r}else b.startsWith("trailer")&&(7===b.length||/\s/.test(b[7]))?(y.push(m),m+=e(f,m,h)):m+=b.length+1}for(let t=0,e=v.length;t<e;++t)this.startXRefQueue.push(v[t]),this.readXRef(!0);let b;for(let t=0,e=y.length;t<e;++t){d.pos=y[t];const e=new o.Parser({lexer:new o.Lexer(d),xref:this,allowStreams:!0,recoveryMode:!0}),i=e.getObj();if(!(0,r.isCmd)(i,"trailer"))continue;const n=e.getObj();if(n instanceof r.Dict){try{const t=n.get("Root");if(!(t instanceof r.Dict))continue;const e=t.get("Pages");if(!(e instanceof r.Dict))continue;const i=e.get("Count");if(!Number.isInteger(i))continue}catch(t){continue}if(n.has("ID"))return n;b=n}}if(b)return b;if(this.topDict)return this.topDict;throw new n.InvalidPDFException("Invalid PDF structure.")}readXRef(t=!1){const e=this.stream,i=new Set;try{for(;this.startXRefQueue.length;){const t=this.startXRefQueue[0];if(i.has(t)){(0,n.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}i.add(t),e.pos=t+e.start;const s=new o.Parser({lexer:new o.Lexer(e),xref:this,allowStreams:!0});let l,c=s.getObj();if((0,r.isCmd)(c,"xref")){if(l=this.processXRefTable(s),this.topDict||(this.topDict=l),c=l.get("XRefStm"),Number.isInteger(c)){const t=c;t in this.xrefstms||(this.xrefstms[t]=1,this.startXRefQueue.push(t))}}else{if(!Number.isInteger(c))throw new n.FormatError("Invalid XRef stream header");if(!(Number.isInteger(s.getObj())&&(0,r.isCmd)(s.getObj(),"obj")&&(c=s.getObj())instanceof a.BaseStream))throw new n.FormatError("Invalid XRef stream");if(l=this.processXRefStream(c),this.topDict||(this.topDict=l),!l)throw new n.FormatError("Failed to read XRef stream")}c=l.get("Prev"),Number.isInteger(c)?this.startXRefQueue.push(c):c instanceof r.Ref&&this.startXRefQueue.push(c.num),this.startXRefQueue.shift()}return this.topDict}catch(t){if(t instanceof s.MissingDataException)throw t;(0,n.info)("(while reading XRef): "+t),this.startXRefQueue.shift()}if(!t)throw new s.XRefParseException}getEntry(t){const e=this.entries[t];return e&&!e.free&&e.offset?e:null}fetchIfRef(t,e=!1){return t instanceof r.Ref?this.fetch(t,e):t}fetch(t,e=!1){if(!(t instanceof r.Ref))throw new Error("ref object is not a reference");const i=t.num,s=this._cacheMap.get(i);if(void 0!==s)return s instanceof r.Dict&&!s.objId&&(s.objId=t.toString()),s;let o=this.getEntry(i);if(null===o)return this._cacheMap.set(i,o),o;if(this._pendingRefs.has(t))return this._pendingRefs.remove(t),(0,n.warn)(`Ignoring circular reference: ${t}.`),r.CIRCULAR_REF;this._pendingRefs.put(t);try{o=o.uncompressed?this.fetchUncompressed(t,o,e):this.fetchCompressed(t,o,e),this._pendingRefs.remove(t)}catch(e){throw this._pendingRefs.remove(t),e}return o instanceof r.Dict?o.objId=t.toString():o instanceof a.BaseStream&&(o.dict.objId=t.toString()),o}fetchUncompressed(t,e,i=!1){const n=t.gen;let l=t.num;if(e.gen!==n)throw new s.XRefEntryException(`Inconsistent generation in XRef: ${t}`);const c=this.stream.makeSubStream(e.offset+this.stream.start),h=new o.Parser({lexer:new o.Lexer(c),xref:this,allowStreams:!0}),u=h.getObj(),p=h.getObj(),d=h.getObj();if(u!==l||p!==n||!(d instanceof r.Cmd))throw new s.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`);if("obj"!==d.cmd){if(d.cmd.startsWith("obj")&&(l=parseInt(d.cmd.substring(3),10),!Number.isNaN(l)))return l;throw new s.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`)}return(e=this.encrypt&&!i?h.getObj(this.encrypt.createCipherTransform(l,n)):h.getObj())instanceof a.BaseStream||this._cacheMap.set(l,e),e}fetchCompressed(t,e,i=!1){const l=e.offset,c=this.fetch(r.Ref.get(l,0));if(!(c instanceof a.BaseStream))throw new n.FormatError("bad ObjStm stream");const h=c.dict.get("First"),u=c.dict.get("N");if(!Number.isInteger(h)||!Number.isInteger(u))throw new n.FormatError("invalid first and n parameters for ObjStm stream");let p=new o.Parser({lexer:new o.Lexer(c),xref:this,allowStreams:!0});const d=new Array(u),f=new Array(u);for(let t=0;t<u;++t){const e=p.getObj();if(!Number.isInteger(e))throw new n.FormatError(`invalid object number in the ObjStm stream: ${e}`);const i=p.getObj();if(!Number.isInteger(i))throw new n.FormatError(`invalid object offset in the ObjStm stream: ${i}`);d[t]=e,f[t]=i}const g=(c.start||0)+h,m=new Array(u);for(let t=0;t<u;++t){const e=t<u-1?f[t+1]-f[t]:void 0;if(e<0)throw new n.FormatError("Invalid offset in the ObjStm stream.");p=new o.Parser({lexer:new o.Lexer(c.makeSubStream(g+f[t],e,c.dict)),xref:this,allowStreams:!0});const i=p.getObj();if(m[t]=i,i instanceof a.BaseStream)continue;const r=d[t],s=this.entries[r];s&&s.offset===l&&s.gen===t&&this._cacheMap.set(r,i)}if(void 0===(e=m[e.gen]))throw new s.XRefEntryException(`Bad (compressed) XRef entry: ${t}`);return e}async fetchIfRefAsync(t,e){return t instanceof r.Ref?this.fetchAsync(t,e):t}async fetchAsync(t,e){try{return this.fetch(t,e)}catch(i){if(!(i instanceof s.MissingDataException))throw i;return await this.pdfManager.requestRange(i.begin,i.end),this.fetchAsync(t,e)}}getCatalogObj(){return this.root}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=i(2);const r=1,s=2,o=1,a=2,l=3,c=4,h=5,u=6,p=7,d=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new n.AbortException(t.message);case"MissingPDFException":return new n.MissingPDFException(t.message);case"PasswordException":return new n.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new n.UnknownErrorException(t.message,t.details);default:return new n.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===r)i.resolve(e.data);else{if(e.callback!==s)throw new Error("Unexpected callback case");i.reject(f(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,o=e.sourceName;new Promise((function(t){t(n(e.data))})).then((function(n){i.postMessage({sourceName:t,targetName:o,callback:r,callbackId:e.callbackId,data:n})}),(function(n){i.postMessage({sourceName:t,targetName:o,callback:s,callbackId:e.callbackId,reason:f(n)})}))}else e.streamId?this._createStreamSink(e):n(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,s=(0,n.createPromiseCapability)();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(t){s.reject(t)}return s.promise}sendWithStream(t,e,i,r){const s=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const o=(0,n.createPromiseCapability)();return this.streamControllers[s]={controller:i,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:s,data:e,desiredSize:i.desiredSize},r),o.promise},pull:t=>{const e=(0,n.createPromiseCapability)();return this.streamControllers[s].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,n.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,n.createPromiseCapability)();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:o,streamId:s,reason:f(t)}),e.promise}},i)}_createStreamSink(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,o=this,a=this.actionHandler[t.action],u={enqueue(t,o=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=o,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:l,streamId:e}),delete o.streamSinks[e])},error(t){(0,n.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:h,streamId:e,reason:f(t)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:d,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:d,streamId:e,reason:f(t)})}))}_processStreamMessage(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case d:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case p:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,reason:f(t)})}));break;case c:if((0,n.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,n.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,e);break;case h:(0,n.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this._deleteStreamController(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this._deleteStreamController(g,e);break;case o:if(!m)break;new Promise((function(e){e(m.onCancel&&m.onCancel(f(t.reason)))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:a,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:r,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFWorkerStream=void 0;var n=i(2);e.PDFWorkerStream=class{constructor(t){this._msgHandler=t,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new r(this._msgHandler),this._fullRequestReader}getRangeReader(t,e){const i=new s(t,e,this._msgHandler);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class r{constructor(t){this._msgHandler=t,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const e=this._msgHandler.sendWithStream("GetReader");this._reader=e.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((t=>{this._isStreamingSupported=t.isStreamingSupported,this._isRangeSupported=t.isRangeSupported,this._contentLength=t.contentLength}))}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}class s{constructor(t,e,i){this._msgHandler=i,this.onProgress=null;const n=this._msgHandler.sendWithStream("GetRangeReader",{begin:t,end:e});this._reader=n.getReader()}get isStreamingSupported(){return!1}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}}],e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WorkerMessageHandler",{enumerable:!0,get:function(){return e.WorkerMessageHandler}});var e=i(1)})(),n})(),t.exports=e()},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Component:()=>H,FormKeyTrap:()=>Ce,GridBase:()=>Ii,Key:()=>fe,KeyCode:()=>de,KeyModifiers:()=>ge,NavigationService:()=>ve,Platform:()=>Ae,ResizeService:()=>Bi,ScrollSync:()=>Me,Shortcut:()=>me,TabKeyTrap:()=>we,addClass:()=>J,addComponentSuffix:()=>ae,appendChildren:()=>$t,areElementsOverlapping:()=>Ft,childrenWidth:()=>Ut,clamp:()=>he,closestAll:()=>Kt,closestDivisibleTo:()=>ue,columnResizableAutoFitAllColumns:()=>DP,columnResizableAutoFitColumns:()=>FP,columnResizableSetColumns:()=>RP,converToKeyboardEventArgs:()=>P,convertToHtml:()=>j,convertToMouseEventArgs:()=>I,createCancellableTimerPromise:()=>A,deepExtend:()=>g,delay:()=>C,destroyChart:()=>_E,destroyColumnDraggable:()=>pP,destroyColumnReorderable:()=>vP,destroyColumnResizable:()=>IP,destroyComponent:()=>Qt,destroyGrid:()=>dV,destroyGroupable:()=>tP,destroyTileLayout:()=>LG,destroyTreeList:()=>eK,destroyVirtualColumnScroller:()=>zK,disableFormTabKeyTrap:()=>ke,enableFormTabKeyTrap:()=>Se,extend:()=>u,findEditable:()=>ut,findFocusable:()=>ht,findNextSiblings:()=>mt,findPreviousSiblings:()=>gt,firstVisibleItem:()=>It,focusElement:()=>st,focusElementInNextFrame:()=>rt,focusFirstFocusableChild:()=>pt,focusInNextFrameAsync:()=>nt,focusTimePickerInput:()=>_M,getComponentInstance:()=>ie,getComponentInstanceBySelector:()=>ne,getElementByDataId:()=>G,getElementById:()=>X,getElementIndex:()=>Nt,getElementScrollHeight:()=>W,getIntersectionRect:()=>Dt,getLocationHost:()=>h,getMaxScrollLeft:()=>Pt,getScrollBarHeight:()=>kt,getScrollBarWidth:()=>St,getSiblings:()=>vt,getSlotMetrics:()=>iG,groupBy:()=>z,guid:()=>m,hasAncestor:()=>at,hasAnyClass:()=>tt,hasClass:()=>Q,hasValue:()=>k,haveSameParent:()=>Lt,hideAnimationGroup:()=>an,hideAnimationGroupAsync:()=>on,hideElement:()=>Y,htmlEncode:()=>_,initActionSheet:()=>Hi,initAnimationGroup:()=>rn,initAutoComplete:()=>JP,initBreadcrumb:()=>pE,initCalendar:()=>NM,initCheckBox:()=>vV,initColorGradient:()=>NE,initColorPalette:()=>ME,initColorPicker:()=>FE,initColumnDraggable:()=>uP,initColumnMenu:()=>VE,initColumnReorderable:()=>yP,initColumnResizable:()=>PP,initComboBox:()=>tI,initComponent:()=>Zt,initComponentLoaderContainer:()=>Ri,initContextMenu:()=>XE,initDateInput:()=>mM,initDatePicker:()=>xM,initDateRangePicker:()=>VM,initDateTimePicker:()=>jM,initDayTable:()=>QX,initDialog:()=>XM,initDrawer:()=>zP,initDropDownGroupHeader:()=>wI,initDropDownList:()=>oI,initEditor:()=>PH,initFileManager:()=>FH,initFileSelect:()=>DK,initFilterMenu:()=>BH,initFilterRow:()=>WH,initFlatColorPicker:()=>zE,initGantt:()=>JH,initGanttTimeline:()=>ZH,initGrid:()=>pV,initGroupable:()=>QM,initListFilter:()=>yI,initMaskedTextBox:()=>zV,initMediaQuery:()=>iW,initMenuItem:()=>gq,initMonthTable:()=>tG,initMultiColumnComboBox:()=>pI,initMultiSelect:()=>cI,initNumericTextBox:()=>WV,initOrUpdateArcGauge:()=>rV,initOrUpdateBarcode:()=>aE,initOrUpdateChart:()=>AE,initOrUpdateCircularGauge:()=>oV,initOrUpdateLinearGauge:()=>lV,initOrUpdateMap:()=>Yq,initOrUpdateQRCode:()=>cE,initOrUpdateRadialGauge:()=>hV,initOrUpdateSignature:()=>aG,initPager:()=>cW,initPanelBar:()=>dW,initPdfViewer:()=>KW,initPopup:()=>jX,initRangeSlider:()=>hq,initScheduler:()=>ZX,initSlider:()=>oq,initSplitButton:()=>yG,initSplitter:()=>PG,initStepper:()=>wq,initSwitch:()=>eq,initTabStrip:()=>Pq,initTextArea:()=>JV,initTextBox:()=>ZV,initTileLayout:()=>RG,initTimeCarousel:()=>TM,initTimePicker:()=>AM,initTimelineTable:()=>eG,initToggleButton:()=>zG,initToolBar:()=>Wq,initTooltip:()=>ZG,initTreeList:()=>tK,initTreeView:()=>Nq,initUpload:()=>FK,initVirtualColumnScroller:()=>jK,initVirtualScroller:()=>HK,initWindow:()=>QK,invokeComponentMethod:()=>ce,isArray:()=>b,isChild:()=>et,isDefined:()=>x,isDomElement:()=>f,isFocusable:()=>ct,isFunction:()=>y,isHtmlElement:()=>d,isNotNull:()=>S,isObject:()=>p,isString:()=>v,isTargetAfterElement:()=>Rt,isVisible:()=>lt,isWholeElementInView:()=>Mt,mousewheelDelta:()=>$,noop:()=>T,offsetWidth:()=>zt,ownsElement:()=>V,ownsElementOrSelf:()=>q,parseAttrToInt:()=>N,parseStyleAttrToInt:()=>B,removeChildren:()=>Ht,removeClass:()=>Z,removeComponentInstance:()=>se,removeComponentSuffix:()=>le,roughlyEqual:()=>pe,runInNextFrameAsync:()=>it,saveFile:()=>O,scrollListToItem:()=>xt,setCarouselSelectedIndex:()=>OM,setComponentInstance:()=>re,setComponentOptions:()=>te,setElementValue:()=>ot,setIndeterminate:()=>bt,setOptions:()=>ee,setPosition:()=>wt,setScrollbarSizeCssVariables:()=>Bt,showAnimationGroup:()=>ln,showAnimationGroupAsync:()=>sn,showElement:()=>K,stringifyToStyle:()=>E,supportsTouchEvents:()=>c,toArray:()=>w,toAttrQuerySelector:()=>D,toAttrValueQuerySelector:()=>R,toClassSelector:()=>L,toDataAttr:()=>F,toPixel:()=>U,unwrapElement:()=>Xt,unwrapElements:()=>Gt,updateDateInputValue:()=>yM,wrapElement:()=>Vt,wrapElements:()=>qt,wrapInnerElement:()=>Wt});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{IntlError:()=>pn,cldr:()=>mn,currencyDisplay:()=>hr,currencyDisplays:()=>cr,currencyFractionOptions:()=>ur,dateFieldName:()=>Jn,dateFormatNames:()=>Zn,errors:()=>gn,firstDay:()=>yr,format:()=>to,formatDate:()=>_s,formatNumber:()=>$r,load:()=>Kn,localeCurrency:()=>dr,localeInfo:()=>vn,numberSymbols:()=>wr,parseDate:()=>Ws,parseNumber:()=>Xr,setData:()=>Yn,splitDateFormat:()=>Js,territoryCurrencyCode:()=>pr,toIntlErrors:()=>fn,toString:()=>Qs,weekendRange:()=>br});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{DEG_TO_RAD:()=>Pa,LRUCache:()=>ll,MAX_NUM:()=>Ia,MIN_NUM:()=>Fa,TextMetrics:()=>ml,append:()=>Aa,arabicToRoman:()=>Ta,bindEvents:()=>Ga,createPromise:()=>Oa,defined:()=>zo,definitionId:()=>Ma,deg:()=>Da,elementOffset:()=>Ka,elementPadding:()=>tl,elementScale:()=>ol,elementSize:()=>Za,elementStyles:()=>Ya,encodeBase64:()=>Na,eventCoordinates:()=>Ba,eventElement:()=>ja,hashKey:()=>pl,isTransparent:()=>za,last:()=>Ua,limitValue:()=>$a,measureText:()=>yl,mergeSort:()=>Ha,normalizeText:()=>hl,now:()=>Va,objectKey:()=>ul,promiseAll:()=>qa,rad:()=>Wa,round:()=>fa,unbindEvents:()=>Qa,valueOrDefault:()=>Xa});var i={};function n(t,e,i){void 0===i&&(i={});var n=l;if(i.forceProxy&&!i.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");i.forceProxy||(s()&&(n=a),navigator.msSaveBlob&&(n=o)),n(t,e,i)}__webpack_require__.r(i),__webpack_require__.d(i,{easeOutElastic:()=>uu,linear:()=>hu,swing:()=>cu});var r=function(){return document.createElement("a")},s=function(){return"download"in r()};function o(t,e){var i=t;if("string"==typeof t){for(var n=t.split(";base64,"),r=n[0],s=atob(n[1]),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);i=new Blob([o.buffer],{type:r})}navigator.msSaveBlob(i,e)}function a(t,e){var i=t;window.Blob&&t instanceof Blob&&(i=URL.createObjectURL(t));var n=r();n.download=e,n.href=i;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(s),setTimeout((function(){return URL.revokeObjectURL(i)}))}function l(t,e,i){if(i.proxyURL){var n=document.createElement("form");n.setAttribute("action",i.proxyURL),n.setAttribute("method","POST"),n.setAttribute("target",i.proxyTarget||"_self");var r=i.proxyData||{};r.fileName=e;var s=t.split(";base64,");for(var o in r.contentType=s[0].replace("data:",""),r.base64=s[1],r)if(r.hasOwnProperty(o)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",o),a.setAttribute("value",r[o]),n.appendChild(a)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)}}String.fromCharCode;var c=()=>{var t="ontouchstart"in window;return Boolean(t)},h=()=>window.location.host,u=function(){return Object.assign(...arguments)},p=t=>t&&"object"==typeof t&&!Array.isArray(t),d=t=>t instanceof HTMLElement,f=t=>t instanceof Element,g=function t(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(!n.length)return e;var s=n.shift();if(p(e)&&p(s))for(var o in s)d(s[o])?e[o]=s[o]:p(s[o])?(e[o]||u(e,{[o]:{}}),t(e[o],s[o])):u(e,{[o]:s[o]});return t(e,...n)},m=()=>{var t,e,i="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(i+="-"),i+=(12===t?4:16===t?3&e|8:e).toString(16);return i},y=t=>"function"==typeof t,v=t=>"string"==typeof t,b=t=>Array.isArray(t),w=t=>Array.from(t),x=t=>void 0!==t,S=t=>null!==t,k=t=>x(t)&&S(t),C=t=>new Promise((e=>setTimeout(e,t))),A=t=>{var e,i;return{promise:new Promise((function(n,r){i=r,e=setTimeout((function(){n("timer done")}),t)})),cancel:function(){clearTimeout(e),i()}}},_=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),T=function(){},O=(t,e)=>{n(e,t)},E=t=>{var e=[],i=Object.entries(t);for(var[n,r]of i)if(x(r)){var s="".concat(M(n),": ").concat(r);e.push(s.toLowerCase())}return e.join("; ")},M=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2"),P=t=>({type:t.type,key:t.key,code:(t.keyCode||"").toString(),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),I=t=>({type:t.type,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),F=t=>"data-".concat(t),D=t=>"[".concat(t,"]"),R=(t,e)=>"[".concat(t,'="').concat(e,'"]'),L=t=>".".concat(t),N=(t,e)=>{if(!e)return-1;var i=e.getAttribute(t),n=parseInt(i,10);return Number.isNaN(n)?-1:n},B=(t,e)=>{if(!e)return 0;var i=e.style[t],n=parseInt(i,10);return Number.isNaN(n)?0:n},j=(t,e)=>{var i=(e||document).createElement("template");i.innerHTML=t.trim();var n=i.content;return n.childNodes.length>1?n.childNodes:n.firstChild},z=(t,e)=>t.reduce((function(t,i){var n=e instanceof Function?e(i):i[e];return(t[n]=t[n]||[]).push(i),t}),{}),U=t=>parseFloat(t)+"px",$=t=>{var e=0;return t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)};class H{constructor(t,e){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,events:{}}),this.element=t,this.dotNetInstance=e.dotNetInstance}destroy(){this.element=null,this.dotNetInstance=null}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}invokeMethodAsync(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.dotNetInstance;if(i&&i.invokeMethodAsync&&t)return i.invokeMethodAsync(t,e)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={defaultPrevented:!1,preventDefault:()=>{i.defaultPrevented=!0}};if(y(this.options.events[t]))return this.options.events[t](u(i,e,{sender:this})),i.defaultPrevented}}function V(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}function q(t,e){return t===e||V(t,e)}function W(t){return(G(t)||document.getElementById(t)).scrollHeight.toString()}function X(t,e){var i=R("id",t);return(e||document).querySelector(i)}function G(t,e){return(e||document).querySelector('[data-id="'.concat(t,'"]'))}var K=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t instanceof HTMLElement&&(t.style.display=e)},Y=t=>{t instanceof HTMLElement&&(t.style.display="none")},J=(t,e)=>{e.classList.add(t)},Z=(t,e)=>{e.classList.remove(t)},Q=(t,e)=>{if(e instanceof HTMLElement)return e.classList.contains(t)},tt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=0;i<t.length;i++)if(Q(t[i],e))return!0},et=(t,e)=>{for(var i=t;i&&i!==document;){if(e.indexOf(i)>=0)return!0;i=i.parentElement}return!1},it=t=>C(33).then((()=>t())),nt=(t,e)=>it((()=>{t&&t.focus&&t.focus({preventScroll:e})})),rt=(t,e)=>{var i=G(t);i&&nt(i,e)},st=(t,e)=>{var i=G(t);i instanceof HTMLElement&&i.focus({preventScroll:e})},ot=(t,e)=>{var i=G(t);i instanceof HTMLElement&&(i.value=e)},at=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t instanceof HTMLElement&&t.closest(e);return i?Boolean(n):n&&!t.matches(e)},lt=t=>"none"!==window.getComputedStyle(t).display,ct=t=>{var e=t.nodeName.toLowerCase(),i=/input|^a$|area|iframe|select|textarea|button|object/.test(e),n=t.tabIndex>-1;return(i||n)&&lt(t)&&!t.disabled},ht=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ft(t,ct,e);return i},ut=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ft(t,dt,e);return i},pt=(t,e)=>{var i=G(t)||document.getElementById(t);if(i){var n=ht(i,!1);n instanceof HTMLElement&&setTimeout((()=>{n.focus({preventScroll:e})}),33)}},dt=t=>{var e=ct(t),i=(t.tagName||"").toLowerCase(),n="span"===i,r=n&&t.classList.contains("k-switch"),s=n&&t.classList.contains("k-dropdownlist");return e&&i&&(/input|^a$|area|select|textarea|button/.test(i)||r||s)},ft=function t(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;if(n&&i(e))return e;for(e=e.firstElementChild;e;){var r=t(e,i,!0);if(r)return r;e=e.nextElementSibling}},gt=(t,e)=>yt(t,e,"previousElementSibling"),mt=(t,e)=>yt(t,e,"nextElementSibling"),yt=(t,e,i)=>{if(!t)return null;for(var n=[],r=t[i];r;)(!e||y(e)&&e(r))&&n.push(r),r=r[i];return n},vt=t=>t&&t.parentNode?Array.from(t.parentNode.children):[],bt=(t,e)=>{var i=G(t)||document.getElementById(t);i&&(i.indeterminate=e)},wt=(t,e,i)=>{var n=G(t)||document.getElementById(t);n&&(n.style.top=e,n.style.left=i)},xt=(t,e,i)=>{var n=G(t)||document.getElementById(t),r="UL"===n.tagName?n:n.getElementsByTagName("ul")[0],s=r.getElementsByTagName("li")[e],o=i&&_t(r.parentElement)?r.parentElement:null,a=o||r.offsetParent;if(s&&a){var l=a.scrollTop,c=l+a.offsetHeight,h=s.offsetTop,u=h+s.offsetHeight;u>c?a.scrollTop+=u-c:h<l&&(a.scrollTop=h)}},St=t=>!t||t&&_t(t)?Ct().width:0,kt=t=>!t||t&&At(t)?Ct().height:0,Ct=()=>{var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth,n=t.offsetHeight-e.offsetHeight;return t.parentNode.removeChild(t),{width:i,height:n}},At=t=>Tt(t)&&t.clientWidth<t.scrollWidth,_t=t=>Ot(t)&&t.clientHeight<t.scrollHeight,Tt=t=>Et(t,"overflow-x"),Ot=t=>Et(t,"overflow-y"),Et=(t,e)=>{var i=window.getComputedStyle(t)[e];return i.indexOf("auto")>-1||i.indexOf("scroll")>-1},Mt=(t,e)=>{if(!t||!e)return!1;var i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.top+i.height>=n.top&&i.bottom<=n.bottom&&i.left+i.width>=n.left&&i.right<=n.right},Pt=t=>d(t)?t.scrollWidth-t.clientWidth:0,It=(t,e)=>{for(var i,n=t.scrollTop,r=t.querySelectorAll(e),s=0;s<r.length;s++)if(r[s].offsetTop+r[s].clientHeight>n){i=r[s];break}return i},Ft=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t||!e||t===e)return!1;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=n.top+i<=r.bottom&&n.bottom-i>=r.top&&n.left+i<=r.right&&n.right-i>=r.left;return s},Dt=(t,e)=>{var i=Ft(t,e);if(!t||!e||t===e||!i)return{width:0,height:0};var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=Math.max(n.left,r.left),o=Math.max(n.top,r.top),a=Math.min(n.right,r.right),l=Math.min(n.bottom,r.bottom);return{x:s,y:o,top:o,left:s,right:a,bottom:l,width:a-s,height:l-o}},Rt=(t,e)=>!(!t||!e)&&(Lt(t,e)&&Nt(t)>Nt(e)),Lt=(t,e)=>!(!d(t)||!d(e))&&t.parentNode===e.parentNode,Nt=(t,e)=>{if(!t)return[].indexOf(t);var i=Array.from(t.parentElement.children);return e&&(i=i.filter((t=>t.matches(e)))),Array.from(i).indexOf(t)},Bt=()=>{var t=Ct();jt("--kendo-scrollbar-width","".concat(t.width,"px")),jt("--kendo-scrollbar-height","".concat(t.height,"px"))},jt=(t,e)=>{var i=document.documentElement;i&&i.style.setProperty(t,e)},zt=t=>{var e=window.getComputedStyle(t),i=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return t.offsetWidth+i},Ut=t=>{if(t)return[...t.children].reduce(((t,e)=>t+zt(e)),0)},$t=(t,e)=>{if(e)for(var i=0;i<t.length;i++)e.appendChild(t[i])},Ht=t=>{if(t)for(;t.firstChild;)t.removeChild(t.firstChild)},Vt=(t,e)=>{var i;t&&t.parentNode&&e&&(v(e)?i=j(e):f(e)&&(i=e),t.parentNode.insertBefore(i,t),i.appendChild(t))},qt=(t,e)=>{if(t&&t.length&&!(t.length<=0)&&e)for(var i=0;i<t.length;i++)Vt(t[i],e)},Wt=(t,e)=>{var i;if(t&&t.parentNode&&e)for(v(e)?i=j(e):f(e)&&(i=e),t.appendChild(i);t.firstChild!==i;)i.appendChild(t.firstChild)},Xt=t=>{var e=t.parentElement;t&&e.replaceWith(...e.childNodes)},Gt=t=>{if(t&&t.length&&!(t.length<=0))for(var e=0;e<t.length;e++)Xt(t[e])},Kt=(t,e)=>{for(var i=[],n=t.parentNode;n&&n!==document;)e?(n.matches(e)&&i.push(n),n=n.parentNode):(i.push(n),n=n.parentNode);return i},Yt="telerik",Jt=new RegExp("-".concat(Yt,"-.*$"),"ig");function Zt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=le(e),r=G(n),s=ie(e);if(!s){var o=new t(r,i);re(e,o)}}function Qt(t){var e=ie(t);e&&e.destroy&&(e.destroy(),e=null),se(t)}function te(t,e){t&&t.setOptions&&t.setOptions(e)}function ee(t,e){te(oe()[t],e)}function ie(t){return oe()[t]}function ne(t,e){var i=t&&t.closest(e);return i?ie(i.getAttribute("data-id")):null}function re(t,e){oe()[t]=e}function se(t){delete(window.TelerikBlazor._instances||{})[t]}var oe=()=>{if(void 0===window.TelerikBlazor)throw new Error("The telerik-blazor.js script is not loaded");return window.TelerikBlazor._instances=window.TelerikBlazor._instances||{},window.TelerikBlazor._instances},ae=(t,e)=>"".concat(t,"-").concat(Yt,"-").concat(e),le=t=>t.replace(Jt,"");function ce(t,e,i){var n=ie(e);if(n&&y(n[t]))return n[t](i)}var he=(t,e,i)=>Math.min(i,Math.max(e,t));function ue(t,e){var i=t%e,n=t-i,r=t+e-i;return n+r<2*t?r:n}function pe(t,e,i){var{decimals:n=0}=i;if(t&&e)return t.toFixed(n)===e.toFixed(n)}var de={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34,PAGEUP:33,PAGEDOWN:34},fe={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESC:"Escape",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SPACE:"Space",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},ge={CTRL:"CTRL",ALT:"ALT",SHIFT:"SHIFT"};class me{static equals(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift&&t.code===e.code}constructor(t){"string"==typeof t?this._initFromString(t):t instanceof KeyboardEvent&&this._initFromEvent(t)}_initFromString(t){var e=t.toUpperCase().split(/[\t-\r \+\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/);for(var i of e)switch(i){case ge.CTRL:this.ctrl=!0;break;case ge.ALT:this.alt=!0;break;case ge.SHIFT:this.shift=!0;break;default:this.code=this._toNormalizedCode(i)}this.name=t}_initFromEvent(t){this.name="",t.ctrlKey&&(this.ctrl=t.ctrlKey,this.name+="".concat(ge.CTRL," ")),t.shiftKey&&(this.shift=t.shiftKey,this.name+="".concat(ge.SHIFT," ")),t.altKey&&(this.alt=t.altKey,this.name+="".concat(ge.ALT," ")),this.code=t.keyCode,this.name+=t.key}_toNormalizedCode(t){return de[t.toUpperCase()]}}var ye="keydown";class ve{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onNavigate",(t=>{var e=new me(t),i=1===e.name.length,n=this.shortcuts.find((t=>me.equals(t,e)))||i&&this.shortcuts.find((t=>"printableKey"===t.name));n&&this.callbacks[n.name].forEach((i=>{i(e,t)||(t.preventDefault(),t.stopPropagation())}))})),this.element=t,this.callbacks={},this.shortcuts=[],this.bindEvents()}destroy(){this.unbindEvents(),this.element=this.callbacks=this.shortcuts=null}bindEvents(){this.element.addEventListener(ye,this.onNavigate)}unbindEvents(){this.element.removeEventListener(ye,this.onNavigate)}bind(t,e){var i=Array.isArray(t)?t:[t];for(var n of i){var r=new me(n);this.callbacks[r.name]=this.callbacks[r.name]||[],this.shortcuts.push(r),this.callbacks[r.name].push(e)}}}function be(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class we{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]";be(this,"disableTabKeyTrap",(()=>{this.element&&this.element.removeEventListener("keydown",this.onKeyDown)})),be(this,"onKeyDown",(t=>{this.tryFindEdgeElements()?t.keyCode===de.TAB&&(t.shiftKey?document.activeElement===this.firstElement&&(this.lastElement.focus(),t.preventDefault()):document.activeElement===this.lastElement&&(this.firstElement.focus(),t.preventDefault())):this.element.removeEventListener("keydown",this.onKeyDown)})),this.element=t,this.focusableElementsSelector=e}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}tryFindEdgeElements(){return this.findEdgeElements(),this.firstElement&&this.lastElement}findEdgeElements(){var t=this.element.querySelectorAll(this.focusableElementsSelector);this.firstElement=t[0],this.lastElement=t[t.length-1]}}function xe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Se=t=>{Ce&&Ce.instanceMap&&it((()=>{var e=G(t);if(e&&!Ce.instanceMap[t]){var i=new Ce(e);Ce.instanceMap[t]=i,i.enableKeyTrap()}}))},ke=t=>{if(Ce&&Ce.instanceMap){var e=Ce.instanceMap[t];e&&e.disableTabKeyTrap()}};class Ce{constructor(t){xe(this,"disableTabKeyTrap",(()=>{this.firstElement&&this.firstElement.removeEventListener("keydown",this.onFirstElementKeyDown),this.lastElement&&this.lastElement.removeEventListener("keydown",this.onLastElementKeyDown)})),xe(this,"onFirstElementKeyDown",(t=>{t.keyCode===de.TAB&&t.shiftKey&&(t.preventDefault(),this.lastElement&&this.lastElement.focus())})),xe(this,"onLastElementKeyDown",(t=>{t.keyCode!==de.TAB||t.shiftKey||(t.preventDefault(),this.firstElement&&this.firstElement.focus())})),t&&(this.element=t,this.firstElement=ht(t,!1),this.lastElement=(t=>{if(t.length)return t[t.length-1]})(t.querySelectorAll("button, .k-button")))}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.firstElement&&this.lastElement&&(this.firstElement.addEventListener("keydown",this.onFirstElementKeyDown),this.lastElement.addEventListener("keydown",this.onLastElementKeyDown))}}xe(Ce,"instanceMap",{});class Ae{static get webAssembly(){return Boolean(window.Blazor&&window.Blazor.platform)}static get serverSideBlazor(){return Boolean(window.Blazor&&window.Blazor.reconnect)}static get firefox(){return Boolean(/Firefox/i.test(navigator.userAgent))}}function _e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Te="scroll",Oe="scrollLeft",Ee="horizontal";class Me extends H{constructor(t,e){super(t,e),_e(this,"options",{horizontal:!0,vertical:!0,minScrollDelta:1,syncFromConnections:!1,connections:[]}),_e(this,"onScroll",(t=>{var e=t.currentTarget;(this.options.syncFromConnections?this.scrollableElements:this.connections).filter((t=>t!==e)).forEach((t=>{this.syncScroll(e,t,{orientation:Ee}),this.syncScroll(e,t,{orientation:"vertical"})}))})),this.extendOptions(e),this.connections=this.options.connections.filter(d),this.scrollableElements=this.getScrollableElements(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.forEachScrollableElement((t=>{t.addEventListener(Te,this.onScroll)}))}unbindEvents(){this.forEachScrollableElement((t=>{t.removeEventListener(Te,this.onScroll)}))}syncScroll(t,e,i){var{orientation:n=Ee}=i,r=n===Ee?Oe:"scrollTop",s=r===Oe?"dataScrollLeft":"dataScrollTop",o=t[r],a=t[s]||0,l=e[r],c=e[s],h=a!==o||c!==o,u=Pt(this.element)>0;if(this.options[n]&&h&&u){var p=Math.abs(a-o),d=Math.abs(l-o),f=this.options.minScrollDelta;(p>=f||d>=10*f)&&(e[s]=o,e[r]=o)}}getScrollableElements(){var t=[];return this.options.syncFromConnections&&(t=this.connections),[this.element,...t]}forEachScrollableElement(t){this.forEachElement(this.scrollableElements,t)}forEachConnection(t){this.forEachElement(this.connections,t)}forEachElement(){var t=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{d(e)&&y(t)&&t(e)}))}}var Pe=t=>tt(["k-grid-content-sticky","k-grid-header-sticky","k-grid-footer-sticky"],t);function Ie(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Fe="data-col-index",De="data-render-row-index",Re="nearest",Le=Array.from,Ne="right",Be="left";class je extends H{constructor(t,e){super(t,e),Ie(this,"options",{navigable:!1,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,events:{removeFocus:null,blur:null,incellEditBlur:null},rowSelector:t=>"tr[data-render-row-index='".concat(t,"']"),columnSelector:t=>"[".concat(Fe,"='").concat(t,"']"),cellNavigationSelector:t=>"[".concat("data-cell-navigation-id","='").concat(t,"']"),groupRowClass:"k-grouping-row",headerClass:"k-grid-header",contentClass:"k-grid-content",editRowClass:"k-grid-edit-row",filterRowClass:"k-filter-row",lockedHeaderClass:"k-grid-header-sticky"}),Ie(this,"onClick",(t=>{"input"===t.target.tagName.toLowerCase()&&t.stopPropagation()})),Ie(this,"onKeyDown",(t=>{var e=this.options.navigable&&[de.ARROWRIGHT,de.ARROWLEFT,de.ARROWUP,de.ARROWDOWN,de.PAGE_DOWN,de.PAGE_UP,de.HOME,de.END,de.SPACE].includes(t.keyCode),i=t.keyCode===de.SPACE&&Q("k-checkbox",t.target),n=e&&!i&&(t.target.matches("td")||t.target.matches("th")),r=t.keyCode===de.TAB&&this.options.incellEdit&&t.target.closest(".k-grid-edit-row");(n||r)&&t.preventDefault()})),Ie(this,"onFocusOut",(t=>{var e=t.target.closest("[".concat(Fe,"]")),i=e?e.closest("tr"):null,n=i&&i.hasAttribute(De)?parseInt(i.getAttribute(De)):null,r=e&&e.hasAttribute(Fe)?parseInt(e.getAttribute(Fe)):null,s={originalEvent:t};null!==n&&null!==r&&(s.rowIndex=n,s.columnIndex=r,s.isChildFocused=e&&!t.target.hasAttribute(Fe)),this.options.incellEdit&&t.target&&t.target.closest(".k-grid-edit-cell")&&(!t.relatedTarget&&document.activeElement===document.body||t.relatedTarget&&!this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-popup")||t.relatedTarget&&t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")&&this.element.contains(t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")))&&this.triggerIncellEditBlur(s),this.options.navigable&&(!t.relatedTarget||this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-detail-row,.k-grid-toolbar")||t.relatedTarget.closest(".k-window")||t.relatedTarget.closest(".k-grid-filter-popup")?this.triggerBlur(s):this.triggerRemoveFocus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.removeEventListener("click",this.onClick)}focusCell(t){var{rowIndex:e,columnIndex:i,isChildFocused:n,cellNavigationId:r,keyboardEventArgs:s}=t,o=this.getRow(e),a=r>=0?this.element.querySelector(this.options.cellNavigationSelector(r)):null;if(a)this.focusElement(a);else if(o){if(Q("k-grouping-row",o))a=o.querySelector("td[role='gridcell']");else if(!(a=o.querySelector(this.options.columnSelector(i)))){if(this.hasNavigableVirtualColumns())return;var l=o.querySelector("[".concat(Fe,"]"));parseInt(l.attributes["".concat(Fe)].value)>i&&(a=l)}if(a)if(this.hasNavigableVirtualColumns()){var c=this.hasEditRow(),h=this.isCellInFilterRow(e,i);if(n&&(c||h))this.focusEditable({rowIndex:e,columnIndex:i});else{var u=this.getKeyboardDirection(s);this.scrollIntoView(a,u),this.focusElement(a)}}else this.focusElement(a)}}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}selectElement(t){t instanceof HTMLElement&&y(t.select)&&t.select()}selectAndFocusElement(t){t!==document.activeElement&&(this.selectElement(t),this.focusElement(t))}focusEditable(t){var{rowIndex:e,columnIndex:i}=t;clearTimeout(this.selectAndFocusTimeout),setTimeout((()=>{var t=this.getCell(e,i),n=ut(t,!1);if(d(n)&&n.tabIndex<0){var r=ht(t,!1);n=r||t}this.scrollIntoView(t),this.options.columnVirtualization?this.selectAndFocusTimeout=setTimeout((()=>{this.selectAndFocusElement(n)}),2*this.options.virtualScrollDelay):this.selectAndFocusElement(n)}),1)}focusFirstFocusable(t){var{rowIndex:e,columnIndex:i}=t;setTimeout((()=>{this.focusCellChild(e,i,ht)}),1)}focusCellChild(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht,n=this.getCell(t,e),r=n?i(n,!1):null;this.focusElement(r)}getRow(t){var e=this.element.parentElement.closest(".k-grid");return e&&e!==this.element?this.element.querySelector(this.options.rowSelector(t)):Array.from(this.element.querySelectorAll(this.options.rowSelector(t))).filter((t=>null===t.closest(".k-detail-row")))[0]}getCell(t,e){var i=this.getRow(t);if(i)return i.querySelector(this.options.columnSelector(e))}triggerRemoveFocus(){this.trigger("removeFocus")}triggerBlur(t){this.trigger("blur",t)}triggerIncellEditBlur(t){this.trigger("incellEditBlur",t)}scrollIntoView(t,e){if(this.preventScrollIntoView)this.preventScrollIntoView=!1;else{var i=t.closest(D(Fe)),n=i?i.closest("tr"):null;if(t&&i&&!Pe(i)&&n){var r=this.getClosestOverlappingLockedCell(i),s=this.hasSpaceToScrollIntoView(i),o=Mt(i,this.getContentElement());r&&s?(o||this.scrollElementIntoView(i),this.scrollToLockedCell(r,i,e)):!this.hasLockedColumns()||o||s?r||!s?this.scrollToCell(i):this.scrollElementIntoView(t):this.scrollToCell(i)}}}scrollToCell(t){var e=this.getContentElement(),i=gt(t,(t=>!Pe(t))),n=this.getTotalCellsWidth(i);n!==e.scrollLeft&&(this.preventScrollIntoView=!0,e.scrollLeft=n)}scrollToLockedCell(t,e,i){var n=this.getContentElement(),r=this.getIntersectionOffset(e,t,i);0!==r&&(this.preventScrollIntoView=!0,n.scrollLeft+=r)}scrollElementIntoView(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{horizontalAlign:Re,verticalAlign:Re};t&&t.scrollIntoView&&t.scrollIntoView({inline:e.horizontalAlign||Re,block:e.verticalAlign||Re})}scrollAndFocusFirstCell(t){this.scrollAndFocusCell({scrollLeft:0,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusLastCell(t){var e=this.getContentElement(),i=Pt(e);this.scrollAndFocusCell({scrollLeft:i,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusCell(t){var{scrollLeft:e,rowIndex:i,columnIndex:n}=t;this.getContentElement().scrollLeft=e,setTimeout((()=>{this.focusCell({rowIndex:i,columnIndex:n})}),2*this.options.virtualScrollDelay)}getHeaderElement(){return this.element.querySelector(L(this.options.headerClass))}getContentElement(){return this.element.querySelector(L(this.options.contentClass))}hasEditRow(){var t=this.getContentElement();return t&&t.querySelector(L(this.options.editRowClass))}isCellInFilterRow(t,e){var i=this.getHeaderElement(),n=i?i.querySelector(L(this.options.filterRowClass)):null;if(!k(n))return!1;if(N(De,n)===t){var r=Le(n.querySelectorAll("th[".concat(Fe,"]")));return k(r[e])}return!1}hasLockedColumns(){var t=this.getHeaderElement();return t&&t.querySelector(L(this.options.lockedHeaderClass))}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}hasSpaceToScrollIntoView(t){var e=vt(t).filter(Pe),i=this.getContentElement();return this.getTotalCellsWidth(e)+t.getBoundingClientRect().width<i.clientWidth}getTotalCellsWidth(t){return t.reduce(((t,e)=>t+e.getBoundingClientRect().width),0)}getClosestOverlappingLockedCell(t){if(!this.hasLockedColumns())return null;var e=gt(t),i=mt(t),n=e.concat(i).filter(Pe),r=null;for(var s of n)if(Ft(t,s)){r=s;break}return r}getKeyboardDirection(t){if(!t)return null;var e=t.key;return e===fe.ARROWRIGHT||e===fe.END?Ne:e===fe.ARROWLEFT||e===fe.HOME?Be:null}getIntersectionOffset(t,e,i){if(!Lt(t,e))return 0;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.left<=n.left&&r.right<=n.right,o=n.left<=r.left&&n.right<=r.right,a=r.left<n.left&&r.right>n.right,l=n.left<r.left&&n.right>r.right,c=n.left===r.left&&n.right===r.right,h=Dt(t,e).width,u=n.width,p=r.width,d=0;return c?i===Be?d=-1*h:i===Ne&&(d=h):s?d=-1*h:o?d=-1*(u-h+p):a?d=r.right-n.right+u:l&&(d=-1*(r.right-n.left)),d}}var ze="col-initialization-index",Ue="cell-navigation-id",$e=t=>R(F(ze),t),He=t=>{if(t.length)return t[t.length-1]},Ve=t=>{var{clientX:e,clientY:i}=t;if(x(e)&&x(i))return document.elementFromPoint(e,i)},qe=t=>{var e=N(F("level"),t);return e>=0?e:1},We=t=>(t.getAttribute(F("has-children"))||"").toLowerCase()===(!0).toString(),Xe=t=>Ke(t,F(ze)),Ge=t=>Ke(t,F("parent-col-initialization-index")),Ke=(t,e)=>t?N(e,t):[].indexOf(t),Ye=(t,e)=>{for(var i=Xe(t),n=Je(e),r=[],s=0;s<e.length;s++){var o=e[s],a=Ge(o),l=Xe(o),c=n.indexOf(o);if(a===i){r.push({parentIndex:a,index:l,leafIndex:c,element:o});var h=Ye(o,e);r=r.concat(h)}}return r},Je=t=>t.filter((e=>t.every((t=>!ti(e,t))))),Ze=(t,e)=>{var i=N(F(Ue),t),n=N(F(Ue),e);return i>n?1:i<n?-1:0},Qe=(t,e)=>{var i=Xe(t),n=Xe(e);return i>n?1:i<n?-1:0},ti=(t,e)=>Xe(t)===Ge(e),ei=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()},ii=t=>{var{clientTop:e,clientLeft:i}=(t=>t.ownerDocument.documentElement)(t),{pageYOffset:n,pageXOffset:r}=(t=>t.ownerDocument.defaultView)(t),{top:s,left:o}=t.getBoundingClientRect();return{top:s+n-e,left:o+r-i}},ni=t=>".".concat(t),ri=function(t,e){return function(i){return e(t(i))}},si=function(t,e,i){return t.addEventListener&&t.addEventListener(e,i)},oi=function(t,e,i){return t&&t.removeEventListener&&t.removeEventListener(e,i)},ai=function(){},li=function(t){return t.preventDefault()},ci=/touch/;function hi(t){return t.type.match(ci)?{pageX:t.changedTouches[0].pageX,pageY:t.changedTouches[0].pageY,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,type:t.type,originalEvent:t,isTouch:!0}:{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,type:t.type,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,originalEvent:t}}var ui=function(t){var e=this,i=t.press;void 0===i&&(i=ai);var n=t.drag;void 0===n&&(n=ai);var r=t.release;void 0===r&&(r=ai);var s=t.mouseOnly;void 0===s&&(s=!1),this._pressHandler=ri(hi,i),this._dragHandler=ri(hi,n),this._releaseHandler=ri(hi,r),this._ignoreMouse=!1,this._mouseOnly=s,this._touchstart=function(t){1===t.touches.length&&e._pressHandler(t)},this._touchmove=function(t){1===t.touches.length&&e._dragHandler(t)},this._touchend=function(t){0===t.touches.length&&1===t.changedTouches.length&&(e._releaseHandler(t),e._ignoreMouse=!0,setTimeout(e._restoreMouse,2e3))},this._restoreMouse=function(){e._ignoreMouse=!1},this._mousedown=function(t){var i=t.which;i&&i>1||e._ignoreMouse||(si(e.document,"mousemove",e._mousemove),si(e.document,"mouseup",e._mouseup),e._pressHandler(t))},this._mousemove=function(t){e._dragHandler(t)},this._mouseup=function(t){oi(e.document,"mousemove",e._mousemove),oi(e.document,"mouseup",e._mouseup),e._releaseHandler(t)},this._pointerdown=function(t){t.isPrimary&&0===t.button&&(si(e.document,"pointermove",e._pointermove),si(e.document,"pointerup",e._pointerup),si(e.document,"pointercancel",e._pointerup),si(e.document,"contextmenu",li),e._pressHandler(t))},this._pointermove=function(t){t.isPrimary&&e._dragHandler(t)},this._pointerup=function(t){t.isPrimary&&(oi(e.document,"pointermove",e._pointermove),oi(e.document,"pointerup",e._pointerup),oi(e.document,"pointercancel",e._pointerup),oi(e.document,"contextmenu",li),e._releaseHandler(t))}},pi={document:{configurable:!0}};ui.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},pi.document.get=function(){return this._element?this._element.ownerDocument:document},ui.prototype.bindTo=function(t){t!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=t,this._bindToCurrent())},ui.prototype._bindToCurrent=function(){var t=this._element;this._usePointers()?si(t,"pointerdown",this._pointerdown):(si(t,"mousedown",this._mousedown),this._mouseOnly||(si(t,"touchstart",this._touchstart),si(t,"touchmove",this._touchmove),si(t,"touchend",this._touchend)))},ui.prototype._unbindFromCurrent=function(){var t=this._element;if(this._usePointers())return oi(t,"pointerdown",this._pointerdown),oi(this.document,"pointermove",this._pointermove),oi(this.document,"pointerup",this._pointerup),oi(this.document,"contextmenu",li),void oi(this.document,"pointercancel",this._pointerup);oi(t,"mousedown",this._mousedown),this._mouseOnly||(oi(t,"touchstart",this._touchstart),oi(t,"touchmove",this._touchmove),oi(t,"touchend",this._touchend))},ui.prototype._usePointers=function(){return!this._mouseOnly&&ui.supportPointerEvent()},ui.prototype.update=function(t){var e=t.press;void 0===e&&(e=ai);var i=t.drag;void 0===i&&(i=ai);var n=t.release;void 0===n&&(n=ai);var r=t.mouseOnly;void 0===r&&(r=!1),this._pressHandler=ri(hi,e),this._dragHandler=ri(hi,i),this._releaseHandler=ri(hi,n),this._mouseOnly=r},ui.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Object.defineProperties(ui.prototype,pi),ui.default=ui;function di(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class fi extends H{constructor(t,e){super(t,e),di(this,"options",{id:m(),group:null,itemSelector:"",allowsDragFrom:()=>!0,allowsDropFrom:()=>!0,events:{dragEnter:null,dragLeave:null,dragOver:null,drop:null}}),this.extendOptions(e),re(this.options.id,this),fi.InstancesByGroup[this.options.group]||(fi.InstancesByGroup[this.options.group]=new Set),fi.InstancesByGroup[this.options.group].add(this)}destroy(){fi.InstancesByGroup[this.options.group]&&fi.InstancesByGroup[this.options.group].delete(this),se(this.options.id),super.destroy()}triggerDragEnter(t){this.trigger("dragEnter",t)}triggerDragLeave(t){this.trigger("dragLeave",t)}triggerDragOver(t){this.trigger("dragOver",t)}triggerDrop(t){this.trigger("drop",t)}allowsDragFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDragFrom(t,e)}allowsDropFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDropFrom(t,e)}}function gi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}di(fi,"InstancesByGroup",{}),di(fi,"forEachInstanceInGroup",((t,e)=>{var i=fi.InstancesByGroup[t]||new Set;for(var n of i)n&&n instanceof fi&&e(n)}));var mi=(t,e)=>!(!e||!t||!t.closest(e)&&!t.matches(e));class yi extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),gi(this,"options",{events:{dragStart:null,drag:null,dragEnd:null,dropTargetEnter:null},offset:{x:0,y:0},filter:null,ignore:"",hint:null,group:null,ignoreElementUnderCursor:()=>!1,touchAction:"none"}),gi(this,"onPress",(t=>{this.dragStarted=!1,mi(t.originalEvent.target,this.options.ignore)?this.originalCurrentTarget=null:mi(t.originalEvent.target,this.options.filter)?(ei(t),this.originalCurrentTarget=t.originalEvent.target.closest(this.options.filter),this.dragStarted=!0,this.triggerDragStart(t)):this.originalCurrentTarget=null})),gi(this,"onDrag",(t=>{var e=u(t,{originalCurrentTarget:this.originalCurrentTarget});if(this.originalCurrentTarget&&(ei(e),this.dragStarted&&(this.processDropTargetIntersection(e),!this.triggerDrag(u(e,{dropTarget:this.getLastDropTarget()}))))){!this.hint&&this.options.hint&&(this.createHint(this.originalCurrentTarget),this.appendHint());var i=this.getOffset();this.dragHint({top:e.pageY+i.y,left:e.pageX+i.x}),this.triggerDropTargetDragOver(e)}})),gi(this,"onRelease",(t=>{this.originalCurrentTarget&&(ei(t),this.processDropTargetDrop(t),this.destroyHint(),this.triggerDragEnd(t))})),this.extendOptions(e),this.initDraggableEvents(t)}destroy(){this.destroyDraggableEvents(),this.destroyHint(),this.lastDropTargetId=null,this.originalCurrentTarget=null,super.destroy()}initDraggableEvents(){this.destroyDraggableEvents(),this.draggableEvents=new ui({press:this.onPress,drag:this.onDrag,release:this.onRelease}),this.draggableEvents.bindTo(this.element),this.element.style.touchAction=this.options.touchAction}destroyDraggableEvents(){this.draggableEvents&&this.draggableEvents.destroy&&this.draggableEvents.destroy()}triggerDragStart(t){this.trigger("dragStart",t)}triggerDrag(t){return this.trigger("drag",t)}triggerDragEnd(t){this.trigger("dragEnd",t)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{originalCurrentTarget:this.originalCurrentTarget,elementUnderCursor:this.getElementUnderCursor(e)}))}triggerDropTargetDragEnter(t,e){t&&(t.triggerDragEnter(u(e,{draggable:this})),this.triggerDropTargetEnter(u(e,{dropTarget:t})))}triggerDropTargetEnter(t){this.trigger("dropTargetEnter",t)}triggerDropTargetDragLeave(t,e){t&&(t.triggerDragLeave(u(e,{draggable:this})),this.triggerDropTargetLeave(u(e,{dropTarget:t})))}triggerDropTargetLeave(t){this.trigger("dropTargetLeave",u(t,{dropTarget:this.dropTarget}))}triggerDropTargetDragOver(t){if(this.lastDropTargetId){var e=this.getLastDropTarget();if(!e)return;e.triggerDragOver(u(t,{draggable:this})),this.triggerDropTargetOver(u(t,{dropTarget:e}))}}triggerDropTargetOver(t){this.trigger("dropTargetOver",t)}triggerDropTargetDrop(t,e){var i=u(e,{elementUnderCursor:this.getElementUnderCursor(e)});t&&(t.allowsDropFrom(this,i)&&t.triggerDrop(u(i,{draggable:this})),this.triggerDrop(u(i,{dropTarget:t})))}triggerDrop(t){this.trigger("drop",t)}processDropTargetIntersection(t){var e=this.getElementUnderCursor(t),i=!1;this.forEachDropTarget((n=>{var r=n.element.contains(e);i=i||r,r&&this.lastDropTargetId!==n.options.id&&(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=n.options.id,this.triggerDropTargetDragEnter(n,t))})),i||(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=null)}processDropTargetDrop(t){this.forEachDropTarget((e=>{var i=this.getElementUnderCursor(t);e.element.contains(i)&&(this.lastDropTargetId=null,this.triggerDropTargetDrop(e,t))}))}getOffset(){return y(this.options.offset)?this.options.offset(this.hint):this.options.offset}createHint(t){this.hint=y(this.options.hint)?this.options.hint(t):this.options.hint}destroyHint(){this.hint&&(this.removeHint(),this.hint=null)}showHint(){K(this.hint)}hideHint(){Y(this.hint)}appendHint(){document.body.appendChild(this.hint)}removeHint(){document.body.removeChild(this.hint)}dragHint(t){var{top:e,left:i}=t;this.setHintState({top:e,left:i})}setHintState(t){var{top:e,left:i}=t;this.hint&&this.setHintPosition({top:e,left:i})}setHintPosition(t){var{top:e=0,left:i=0}=t,{width:n,height:r}=this.hint.getBoundingClientRect(),s=e-r/2,o=i-n/2;this.hint.style.top="".concat(s,"px"),this.hint.style.left="".concat(o,"px")}getElementUnderCursor(t){var e=Ve(t);if(this.hint&&this.hint.contains(e)){if(this.hideHint(),e=Ve(t),this.options.ignoreElementUnderCursor(e)){var i=e;Y(i);var n=Ve(t);n&&(e=n),K(i)}this.showHint()}return e}forEachDropTarget(t){fi.forEachInstanceInGroup(this.options.group,t)}getLastDropTarget(){return ie(this.lastDropTargetId)}}class vi{constructor(t){var e;!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{appendTo:document.body,template:(e=E({position:"absolute","z-index":1e4}),'<div class="k-grouping-dropclue" style="'.concat(e,'" />'))}),this.extendOptions(t),this.initElement(),this.append()}destroy(){this.remove()}extendOptions(t){this.options=u(this.options,t)}initElement(){this.element=j(this.options.template)}append(){this.hide(),this.options.appendTo.appendChild(this.element)}remove(){this.options.appendTo.removeChild(this.element),this.element=null}show(){K(this.element)}hide(){Y(this.element)}setState(t){var{top:e,left:i,height:n,visible:r}=t;this.setPosition({top:e,left:i}),this.setVisibility(r),this.setSize({height:n})}setSize(t){var{height:e}=t;this.element.style.height="".concat(e,"px")}getIsVisible(){return lt(this.element)}getSize(){var t=this.element.style.display,e=this.element.style.visibility;this.element.style.visibility="hidden",this.element.style.display="block";var i=this.element.offsetWidth,n=this.element.offsetHeight;return this.element.style.display=t,this.element.style.visibility=e,{width:i,height:n}}setVisibility(t){t?this.show():this.hide()}setPosition(t){var{top:e=0,left:i=0}=t;this.element.style.top="".concat(e,"px"),this.element.style.left="".concat(i,"px")}getOffsetState(t,e){var i=ii(t),{offsetWidth:n,offsetHeight:r}=t;return{top:i.top,left:i.left+(e?n:0),height:r}}}function bi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var wi={forbidden:"k-i-cancel",before:"k-i-insert-middle",after:"k-i-insert-middle",over:"k-i-plus"},xi="forbidden",Si="before",ki="after",Ci="over",Ai="[data-draggable]";class _i extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),bi(this,"options",{group:"",filter:"",itemSelector:"",dropClueTemplate:'<div class="k-drop-hint k-drop-hint-h" style="position: absolute; z-index: 10000;">\n                               <div class="k-drop-hint-start"></div>\n                               <div class="k-drop-hint-line"></div>\n                           </div>',hint:null,allowDropOver:!0,events:{itemDragStart:null,itemDrop:null}}),bi(this,"onDragStart",(t=>{var e=this.getItem(t.originalCurrentTarget);e.closest(Ai)===this.element?(this.dragging=!0,this.trigger("itemDragStart",u(t,{sourceItem:e})),this.createDropClue()):this.dragging=!1})),bi(this,"onDrag",(t=>{if(this.dragging){var e,i,n=this.getElementUnderCursor(t),r=ne(n,Ai);r&&r.getDropSettings?(e=r.getDropSettings(),r.getDropPosition?this.lastDropPosition=r.getDropPosition(t):this.lastDropPosition=this.getDropPosition(t,e)):this.lastDropPosition=xi,this.updateDragClueState(this.draggable.hint);var s=e&&e.offsetDropClue;e&&e.dropClueTargetSelector&&(i=n&&n.closest(e.dropClueTargetSelector)),this.updateDropClueState(i,s)}})),bi(this,"onDragEnd",(t=>{if(this.dragging&&(this.destroyDropClue(),this.lastDropPosition!==xi)){var e=this.getItem(t.originalCurrentTarget),i=this.getElementUnderCursor(t),n=this.getItem(i),r="",s="",o=ne(i,Ai);o&&(r=o.getId(),s=o.getDropItemIndex(i,t)),e&&e!==n&&this.trigger("itemDrop",u(t,{sourceItem:e,destinationIndex:s,destinationElement:i,destinationComponentId:r,dropPosition:this.lastDropPosition}))}})),this.extendOptions(e),this.createDraggable()}destroy(){this.draggable&&this.draggable.destroy(),super.destroy()}createDraggable(){if(this.element){var t=this.options.hint;this.draggable=new yi(this.element,g(this.options,{offset:t=>{var e=t.getBoundingClientRect();return{x:e.width/2+10,y:e.height/2+10}},hint:e=>{var i=t(e);return this.updateDragClueState(i),i},events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}}getItem(t){return t.closest(this.options.itemSelector)}createDropClue(){this.dropClue||(this.dropClue=new vi({template:this.options.dropClueTemplate}))}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}getDropPosition(t,e){var i=this.getElementUnderCursor(t),n=i&&i.closest(e.dropClueTargetSelector);if(e.dropClueEmptySelector&&i&&i.closest(e.dropClueEmptySelector))return Ci;if(!e.dropClueTargetSelector||!n||n===t.originalCurrentTarget.closest(e.dropClueTargetSelector))return xi;var r=n.getBoundingClientRect(),s=e.allowDropOver?4:2,o=r.height/s,a=t.clientY,l=r.top;return a<l+o?Si:a>=l+r.height-o?ki:Ci}updateDragClueState(t){if(t){var e=t.querySelector(".k-icon");Z(this.dropStatusClass,e),this.dropStatusClass=wi[this.lastDropPosition],J(this.dropStatusClass,e)}}updateDropClueState(t,e){if(!this.shouldHideDropClue()&&t){this.dropClue.show();var i=ii(t),n=i.top,r=i.left;this.lastDropPosition===ki&&(n+=t.offsetHeight),e||(r+=this.dropClue.element.offsetWidth/2),this.dropClue.setPosition({top:n,left:r})}else this.dropClue.hide()}shouldHideDropClue(){return this.lastDropPosition===Ci||this.lastDropPosition===xi}getElementUnderCursor(t){var e,i=this.dropClue&&this.dropClue.getIsVisible();return i&&this.dropClue.hide(),e=document.elementFromPoint(t.clientX,t.clientY),i&&this.dropClue.show(),e}}function Ti(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Oi="k-grid-header-wrap",Ei="k-grid-footer-wrap",Mi="k-grid-content",Pi="mousedown";class Ii extends H{constructor(t,e){super(t,e),Ti(this,"options",{dotNetInstance:null,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,rowDraggable:!1,draggedItemsHint:"",componentSelector:"",jsinterop:{removeFocus:"",blur:"",incellEditBlur:"",rowDragStart:"",rowDrop:""}}),Ti(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),Ti(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),Ti(this,"onNavigationBlur",(t=>{this.blur(t)})),Ti(this,"onIncellEditBlur",(t=>{this.incellEditBlur(t)})),Ti(this,"createHint",(t=>{var e=this.getDragHintText(t);return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),Ti(this,"getDragHintText",(t=>{if(Q("k-selected",t.closest("tr"))){var e=this.element.querySelectorAll("tr.k-master-row.k-selected").length;if(e>1)return e+" "+this.options.draggedItemsHint}return t.closest("td").getAttribute("data-drag-clue-text")})),Ti(this,"onItemDragStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDragStart,{sourceIndex:this.getDropItemIndex(t.sourceItem)})})),Ti(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDrop,{destinationIndex:t.destinationIndex,destinationComponentId:t.destinationComponentId,dotNetInstance:this.getDestinationComponent(t.destinationElement),dropPosition:t.dropPosition})})),Ti(this,"setSearchBoxValue",(t=>{var e=this.element.querySelector(".k-grid-search input");e&&(e.value=t)})),this.extendOptions(e),this.content=this.getChildElement(Mi),this.header=this.getChildElement(Oi),this.adjustScrollbarPadding(),this.bindEvents(),this.createNavigationService(),this.setSearchBoxValue(e.searchString),this.setRowDraggable(e.rowDraggable)}setRowDraggable(t){t?this.createRowDraggable():this.destroyRowDraggable()}setOptions(t){this.options.rowDraggable!==t.rowDraggable&&this.setRowDraggable(t.rowDraggable),this.extendOptions(t)}getChildElement(t){return this.element.getElementsByClassName(t)[0]}destroy(){this.destroyRowDraggable(),this.unbindEvents(),this.destroyNavigationService(),this.content=null,this.header=null,super.destroy()}adjustScrollbarPadding(){Bt()}bindEvents(){this.createContentScrollSync(),this.content.addEventListener(Pi,this.onMouseDown)}unbindEvents(){this.destroyContentScrollSync(),this.content.removeEventListener(Pi,this.onMouseDown)}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync();var t=this.element.querySelector(ni(Ei));this.contentScrollSync=new Me(this.content,{horizontal:!0,vertical:!1,syncFromConnections:this.hasNavigableVirtualColumns(),connections:[this.header,t]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null)}createNavigationService(){this.navigationService=new je(this.element,{navigable:this.options.navigable,incellEdit:this.options.incellEdit,columnVirtualization:this.options.columnVirtualization,virtualScrollDelay:this.options.virtualScrollDelay,events:{removeFocus:this.onNavigationRemoveFocus,blur:this.onNavigationBlur,incellEditBlur:this.onIncellEditBlur}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}focusCell(t){this.navigationService.focusCell(t)}focusEditable(t){this.navigationService.focusEditable(t)}focusFirstFocusable(t){this.navigationService.focusFirstFocusable(t)}scrollAndFocusFirstCell(t){this.navigationService.scrollAndFocusFirstCell(t)}scrollAndFocusLastCell(t){this.navigationService.scrollAndFocusLastCell(t)}scrollContent(t){this.content.scrollLeft=t}removeFocus(){this.invokeMethodAsync(this.options.jsinterop.removeFocus)}blur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.blur,t)}incellEditBlur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.incellEditBlur,t)}invokeDefferedMethodAsync(t,e){Ae.webAssembly?setTimeout((()=>{e.deferred=!0,document.body.contains(e.originalEvent.target)&&this.invokeMethodAsync(t,e)}),1):this.invokeMethodAsync(t,e)}createRowDraggable(){this.element&&(this.rowDraggable=new _i(this.element,{group:".k-grid-table",filter:".k-i-reorder",itemSelector:"tr.k-master-row",hint:this.createHint,events:{itemDragStart:this.onItemDragStart,itemDrop:this.onItemDrop}}))}destroyRowDraggable(){this.rowDraggable&&this.rowDraggable.destroy()}getDestinationComponent(t){var e=ne(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropItemIndex(t){return t?t.closest(this.options.dropOptions.dropClueEmptySelector)?"-1":t.closest("tr.k-master-row").getAttribute("data-render-row-index"):""}getId(){return this.element.id}getDropSettings(){return this.options.dropOptions}}function Fi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Di extends H{constructor(t,e){super(t,e),Fi(this,"options",{showDelay:600}),Fi(this,"_loaderIntervals",[]),this.extendOptions(e)}startLoaderShowTimer(){this.addShowTimer()}showLoader(){K(this.element)}hideLoader(){this.removeShowTimer(),this._loaderIntervals.length||Y(this.element)}addShowTimer(){this._loaderIntervals.push(setTimeout((()=>this.showLoader()),this.options.showDelay))}removeShowTimer(){clearTimeout(this._loaderIntervals.shift())}}function Ri(t,e){Zt(Di,t,e)}var Li=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function n(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=this;n.context=this,n.args=s,n.pending=!0,clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),n.pending=!1,t.call(a,...s)}),i)};return n.pending=!1,n.callback=t,n.stop=function(){clearTimeout(e)},n.runCallback=function(){t.call(n.context,n.args)},n},Ni=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;return!i||i<=0?t:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=this,l=0,c=()=>{t.call(a,...s),n=performance.now()};if(n||(n=performance.now(),e=setTimeout(c,i)),(l=performance.now()-n)>3*i)return clearTimeout(e),void(n=0);clearTimeout(e),l>i?c():e=setTimeout(c,i-l)}};class Bi{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onResize",(t=>{t[0].target===this.element&&this.resizeCallback()})),this.element=t.element,this.resizeCallback=t.onResize,this.initResizeObserver()}destroy(){this.destroyResizeObserver(),this.element=null}initResizeObserver(){this.debounceResize=Li(this.onResize,50),this.resizeObserver=new ResizeObserver(this.debounceResize),this.resizeObserver.observe(this.element)}destroyResizeObserver(){this.resizeObserver&&this.resizeObserver.unobserve(this.element),this.resizeObserver=this.debounceResize=this.resizeCallback=null}}function ji(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zi="keydown",Ui=[de.ARROWLEFT,de.ARROWRIGHT,de.ARROWUP,de.ARROWDOWN];class $i extends H{constructor(t,e){super(t,e),ji(this,"options",{dotNetInstance:null,toggleElementSelector:"",toggleOn:"click",jsinterop:{openAsync:null,closeAsync:null,keydown:null}}),ji(this,"onKeyDown",(t=>{"input"!==t.target.tagName.toLowerCase()&&(Ui.includes(t.keyCode)&&t.preventDefault(),this.invokeKeyDown(t))})),ji(this,"toggle",(t=>{t.target.closest(".k-clear-value")||t.target.closest(".k-chip")||(this.visible?this.closeAsync():this.openAsync())})),this.extendOptions(e),this.toggleElement=this.getToggleElement(),this.visible=!1,this.bindEvents(),this.bindToggleElementEvents()}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),this.unbindToggleElementEvents(),super.destroy()}bindEvents(){this.element.addEventListener(zi,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(zi,this.onKeyDown)}bindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.addEventListener(this.options.toggleOn,this.toggle)}unbindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.removeEventListener(this.options.toggleOn,this.toggle)}enableTabKeyTrap(){this.formKeyTrap=new Ce(this.element),this.formKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}onOpen(){this.visible=!0}onClose(){this.visible=!1}getToggleElement(){return document.querySelector(this.options.toggleElementSelector)}openAsync(){this.invokeMethodAsync(this.options.jsinterop.openAsync)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}onAfterOpen(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.restoreFocus()}focusElement(){var t=this.element.querySelector("input");t&&ct(t)?nt(t):pt(this.element.id)}restoreFocus(){if(this.toggleElement)if(ct(this.toggleElement))nt(this.toggleElement);else{var t=ht(this.toggleElement,!0);nt(t)}}}function Hi(t,e){Zt($i,t,e)}function Vi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function qi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vi(Object(i),!0).forEach((function(e){Wi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Wi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Xi="none",Gi="k-animation-container-shown",Ki="reveal-vertical",Yi="reveal-horizontal",Ji={"slide-down":"slide-up","push-down":"push-up"},Zi={appear:"appear",exit:"exit"},Qi=()=>C(20),tn=(t,e)=>"k-".concat(t,"-").concat(e),en=t=>Object.keys(Zi).reduce(((e,i)=>qi(qi({},e),{},{[i]:{base:tn(t,i),active:tn(t,"".concat(i,"-active"))}})),{});class nn extends H{constructor(t,e){super(t,e),Wi(this,"options",{dotNetInstance:null,animationName:"slide-down",duration:300,showDelay:10,hideDelay:10,parentMethodsToInvokeBeforeShow:"",parentMethodsToInvokeDuringShow:"",parentMethodsToInvokeAfterShow:"",parentMethodsToInvokeBeforeHide:"",parentMethodsToInvokeDuringHide:"",parentMethodsToInvokeAfterHide:"",jsinterop:{showStart:null,hideStart:null}}),this.extendOptions(e),this.element.parentElement.style.display=Xi,this.animationClasses=en(this.options.animationName)}setOptions(t){super.setOptions(t),this.animationClasses=en(this.options.animationName)}destroy(){this.cancelCallback(),this.parentComponent=null,super.destroy()}showAsync(){return this.cancelCallback(),this.onAppearStart().then((()=>this.onAppearing())).then((()=>this.onTransitionEnd(this.onAppearEnd.bind(this))))}hideAsync(){return this.cancelCallback(),this.onExitStart().then(this.onExiting()).then((()=>this.onTransitionEnd(this.onExitEnd.bind(this))))}show(){this.cancelCallback(),this.removeClasses(Zi.exit),this.removeClasses(Zi.appear),this.element.style.display=null,this.element.parentElement.style.display=null,this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow)}hide(){this.cancelCallback(),this.removeClasses(Zi.exit),this.removeClasses(Zi.appear),this.element.style.display=Xi,this.element.parentElement.style.display=Xi,this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide)}onAppearStart(){return this.updateAppearStartState().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeShow);var t=this.getParentPosition(),e=this.options.animationName;return this.maxDimensions(),t&&t.flipped&&Ji[e]?(this.element.style.display=Xi,this.element.parentElement.style.display=Xi,Qi().then((()=>(this.removeClasses(Zi.appear),this.animationClasses=en(Ji[e]),this.updateAppearStartState())))):Promise.resolve()}))}updateAppearStartState(){return this.removeClasses(Zi.exit),this.addClasses(this.animationClasses[Zi.appear].base),Qi().then((()=>{this.element&&(this.element.style.display=null,this.element.parentElement.style.display=null)}))}onAppearing(){return this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow),Qi().then((()=>{this.addClasses(this.animationClasses[Zi.appear].active)}))}onAppearEnd(){var t=Zi.appear;this.callParentMethods(this.options.parentMethodsToInvokeAfterShow),Qi().then((()=>{this.removeClasses(t),this.removeMaxDimensions(),this.isPopup()&&J(Gi,this.element.parentElement)}))}onExitStart(){return Qi().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeHide);var t=this.getParentPosition(),e=this.options.animationName;t&&t.flipped&&Ji[e]&&(this.animationClasses=en(Ji[e])),this.removeClasses(Zi.appear),this.addClasses(this.animationClasses[Zi.exit].base)}))}onExiting(){return this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide),this.maxDimensions(),Qi().then((()=>{this.addClasses(this.animationClasses[Zi.exit].active),this.isPopup()&&Z(Gi,this.element.parentElement)}))}onExitEnd(){this.callParentMethods(this.options.parentMethodsToInvokeAfterHide),this.removeClasses(Zi.exit),this.removeMaxDimensions(),this.element.style.display=Xi,this.element.parentElement.style.display=Xi}onTransitionEnd(t){var e=this.options,i=e.duration+e.showDelay;return this.timer=A(i),this.timer.promise.then(t)}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}getParentComponent(){if(this.parentComponent)return this.parentComponent;if(!this.element)return null;var t=this.element.closest(".k-animation-container");if(!t)return null;var e=t.getAttribute("data-id");return this.parentComponent=ie(e),this.parentComponent}callParentMethods(t){t&&t.forEach((t=>{this.callParentMethod(t)}))}callParentMethod(t,e){var i=this.getParentComponent();if(i&&y(i[t]))return i[t](e)}getParentPosition(){return this.callParentMethod("getElementPosition")}triggerOpen(){this.invokeMethodAsync(this.options.jsinterop.showStart)}triggerClose(){this.invokeMethodAsync(this.options.jsinterop.hideStart)}removeClasses(t){var e=this.animationClasses[t];this.element&&(this.element.classList.remove(e.base),this.element.classList.remove(e.active))}addClasses(t){var e=this;t&&t.split(/\s+/).forEach((t=>{e.element&&e.element.classList.add(t)}))}maxDimensions(){var t=this.options,e=this.element,i="".concat(e.scrollHeight,"px"),n="".concat(e.scrollWidth,"px");return t.animationName.includes(Ki)?(e.style.maxHeight=i,"max-height: ".concat(i)):t.animationName.includes(Yi)?(e.style.maxWidth=n,"max-width: ".concat(n)):""}removeMaxDimensions(){var t=this.options.animationName.includes(Ki)||this.options.animationName.includes(Yi);this.element&&t&&(this.element.style.maxHeight=null,this.element.style.maxWidth=null)}isPopup(){return this.element&&this.element.firstElementChild&&Q("k-popup",this.element.firstElementChild)&&this.element.parentElement}isAnimationInProgress(){return this.element&&Array.from(this.element.classList).some((t=>t.endsWith("-".concat(Zi.appear))))}}function rn(t,e){Zt(nn,t,e)}function sn(t,e){var i=ie(t);return i?(i.setOptions(e),i.showAsync().catch(T)):null}function on(t,e){var i=ie(t);return i?(i.setOptions(e),i.hideAsync().catch(T)):null}function an(t){var e=ie(t);e&&e.hide()}function ln(t){var e=ie(t);e&&e.show()}const cn={en:{name:"en",identity:{version:{_number:"$Revision: 12418 $",_cldrVersion:"29"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"€","symbol-alt-narrow":"€"},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},day:{wide:"day",short:"day",narrow:"day"},weekday:{wide:"day of the week"},dayperiod:{wide:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function hn(t){return"string"==typeof t}var un=/\{(\d+)}?\}/g,pn=function(t){var e=t.name,i=t.message;if(!e||!i)throw new Error("{ name: string, message: string } object is required!");this.name=e,this.message=i};pn.prototype.formatMessage=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=dn(t),n=this.message.replace(un,(function(t,e){return i[parseInt(e,10)]}));return this.name+": "+n},pn.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Error(this.formatMessage(t))};var dn=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},fn=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new pn({name:i,message:t[i]}),e}),{})},gn=fn({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."});var mn=cn;function yn(t){return hn(t)?vn(t):t}function vn(t){if(mn[t])return mn[t];if(mn.supplemental.likelySubtags){var e=t.split("-"),i=e[0],n=e.slice(1),r=function(t,e){for(var i=mn.supplemental.likelySubtags,n=0;n<e.length;n++){var r=i[t+"-"+e[n]];if(r)return r}if(i[t])return i[t]}(i,n),s=r?function(t,e){var i=t.split("-"),n=i[0],r=i[1],s=i[2];return mn[t]||-1!==e.indexOf(s)&&mn[n+"-"+s]||-1!==e.indexOf(r)&&mn[n+"-"+r]||mn[n]}(r,n):null;if(s)return s}throw gn.NoLocale.error(t)}var bn="decimal",wn="currency",xn="accounting",Sn="percent",kn="scientific",Cn="$",An="n",_n=".",Tn="",On="en",En="Formats-numberSystem-latn",Mn=/([#,0.]+)/g,Pn=/¤/g;function In(t){return Mn.lastIndex=0,t.replace(Pn,Cn).replace(Mn,An).split(";")}function Fn(t){return Mn.lastIndex=0,Mn.exec(t.split(";")[0])[0].split(_n)[0].split(",").slice(1).map((function(t){return t.length})).reverse()}function Dn(t,e){for(var i in e)i.startsWith("unitPattern")&&(t[i]=e[i].replace("{0}",An).replace("{1}",Cn))}function Rn(t,e){var i=mn[t],n=i.numbers=i.numbers||{};for(var r in n.symbols=n.symbols||{},e)if("symbols-numberSystem-latn"===r)Object.assign(n.symbols,e[r]);else if(r.includes(En)){var s=r.substr(0,r.indexOf(En)),o=e[r].standard;n[s]={patterns:In(o)},s===wn?(n[s].groupSize=Fn((e[bn+En]||e[r]).standard),Dn(n[s],e[r]),n.accounting={patterns:In(e[r].accounting),groupSize:n[s].groupSize}):n[s].groupSize=Fn(o)}else"currencies"===r&&(n.currencies=e[r])}var Ln={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},Nn=/y+/g,Bn=[["dateFormats","short"]],jn={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function zn(t){for(var e=[],i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=t[i[n]];e.push(r)}return e}function Un(t,e){var i={};for(var n in t){var r=i[n]={};for(var s in t[n]){var o=t[n][s];r[s]=e?o:zn(o)}}return i}function $n(t,e){var i=mn[t].calendar;i.days=Un(e.days),i.months=Un(e.months),i.quarters=Un(e.quarters),i.dayPeriods=Un(e.dayPeriods,!0),i.eras=function(t){var e={},i=e.format={},n={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(var r in t)i[n[r]]=t[r];return e}(e.eras)}function Hn(t,e){var i=mn[t].calendar,n={};for(var r in e){var s=r.split("-"),o=s[0],a=s[1];void 0===a&&(a="wide");var l=n[o]||{},c=e[r].displayName;c&&(l[a]=c,n[o]=l)}i.dateFields=n}function Vn(t,e){for(var i=[],n=0;n<t.length;n++){for(var r=t[n],s=e,o=0;o<r.length;o++)s=s[r[o]];i.push(s)}return i.join(" ")}function qn(t,e){var i=mn[t].calendar,n=i.patterns={};for(var r in n.d=Vn(Bn,e).replace(Nn,"y"),jn)n[r]=Vn(jn[r],e);for(var s in Ln)n[s]=Ln[s];var o=e.dateTimeFormats;i.dateTimeFormats={full:o.full,long:o.long,medium:o.medium,short:o.short,availableFormats:o.availableFormats},i.timeFormats=e.timeFormats,i.dateFormats=e.dateFormats}function Wn(t,e){var i=mn[t].calendar=mn[t].calendar||{};for(var n in e)"timeZoneNames"===n?(i.gmtFormat=e[n].gmtFormat,i.gmtZeroFormat=e[n].gmtZeroFormat):"calendars"===n&&e[n].gregorian?(qn(t,e[n].gregorian),$n(t,e[n].gregorian)):"fields"===n&&Hn(t,e.fields)}function Xn(t){if(t.territory)return t.territory;var e,i=t.name,n=t.identity;return e=n&&n.territory?n.territory:function(t,e){var i=mn.supplemental.likelySubtags,n=t.split("-");if(i){var r=i[t]||i[n[0]];r&&(n=r.split("-"))}if(e)for(var s=n.length-1;s>=1;s--){var o=n[s];o!==e.variant&&o!==e.script||n.splice(s,1)}var a=n.length;if(a>1)return n[a-1].toUpperCase()}(i,n),t.territory=e,e}function Gn(t,e){for(var i in e)"numbers"===i?Rn(t,e[i]):"dates"===i&&Wn(t,e[i])}function Kn(){for(var t=arguments,e=arguments.length,i=0;i<e;i++){var n=t[i];if(n.main){var r=Object.keys(n.main)[0],s=n.main[r],o=mn[r]=mn[r]||{};o.name=o.name||r,o.identity=o.identity||s.identity,Xn(o),Gn(r,s)}else n.supplemental&&(n.supplemental.weekData?mn.supplemental.weekData={firstDay:n.supplemental.weekData.firstDay,weekendStart:n.supplemental.weekData.weekendStart,weekendEnd:n.supplemental.weekData.weekendEnd}:Object.assign(mn.supplemental,n.supplemental))}}function Yn(t){var e=t.name,i=mn[e]=mn[e]||{};if(t.likelySubtags){var n=mn.supplemental=mn.supplemental||{};n.likelySubtags=Object.assign(n.likelySubtags||{},t.likelySubtags)}var r=i.numbers;Object.assign(i,t),r&&t.numbers&&(i.numbers=Object.assign({},r,t.numbers))}function Jn(t,e){void 0===e&&(e=On);var i=vn(e).calendar.dateFields;if(!i)throw gn.NoDateFieldNames.error();var n=i[t.type]||{};return n[t.nameType]||n.wide}function Zn(t,e){var i=e.type,n=e.nameType,r=e.standAlone,s=e.lower,o=yn(t),a=r?"stand-alone":"format",l=(s?"lower-":Tn)+n,c=o.calendar[i][a],h=c[l];return!h&&s&&(h=c[l]=function(t){var e=Array.isArray(t)?function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toLowerCase());return e}(t):function(t){var e={};for(var i in t)e[i]=t[i].toLowerCase();return e}(t);return e}(c[n])),h}function Qn(t){var e=t.split("-"),i=parseInt(e[0],10),n=parseInt(e[1],10)-1,r=parseInt(e[2],10);return new Date(i,n,r)}var tr=gn.NoCurrency,er=gn.NoCurrencyDisplay,ir=gn.NoSupplementalCurrency,nr=gn.NoCurrencyRegion,rr=gn.NoValidCurrency,sr="symbol",or={"001":"USD",150:"EUR"};function ar(t,e,i){var n=yn(t).numbers.currencies;if(n){var r=n[e];if(r)return r;if(i)throw er.error()}else if(i)throw tr.error()}function lr(t,e){return e.length-t.length}function cr(t,e,i){void 0===i&&(i=!0);var n=ar(t,e,i);if(n){if(!n.displays){var r=[e];for(var s in n)r.push(n[s]);r.sort(lr),n.displays=r}return n.displays}}function hr(t,e){var i=e.value,n=e.currency,r=e.currencyDisplay;if(void 0===r&&(r=sr),"code"===r)return n;var s=ar(t,n,!0);return r===sr?s["symbol-alt-narrow"]||s.symbol:void 0===typeof i||1!==i?s["displayName-count-other"]:s["displayName-count-one"]}function ur(t){var e=2,i=2,n=((mn.supplemental.currencyData||{}).fractions||{})[t];return n&&n._digits&&(i=e=parseInt(n._digits,10)),{minimumFractionDigits:e,maximumFractionDigits:i}}function pr(t,e){if(void 0===e&&(e=!0),or[t])return or[t];var i=mn.supplemental.currencyData;if(i){var n=i.region[t];if(n){var r=function(t){for(var e,i,n,r,s=0;s<t.length;s++){var o=t[s],a=Object.keys(o)[0],l=o[a];if("XXX"!==a&&"false"!==l._tender&&l._from)if(l._to){if(!n){var c=Qn(l._from),h=Qn(l._to);(!i||i.to<h||i.from<c)&&(e=a,i={from:c,to:h})}}else{var u=Qn(l._from);(!r||r<u)&&(n=a,r=u)}}return n||e}(n);return r}if(e)throw nr.error(t)}else if(e)throw ir.error()}function dr(t,e){var i=yn(t),n=i.numbers;if(!n.localeCurrency){var r=pr(Xn(i),e);if(!r&&e)throw rr.error(i.name);n.localeCurrency=r}return n.localeCurrency}var fr=["sun","mon","tue","wed","thu","fri","sat"],gr=gn.NoWeekData,mr=gn.NoFirstDay;function yr(t){var e=yn(t);if(!isNaN(e.firstDay))return e.firstDay;var i=mn.supplemental.weekData;if(!i)throw gr.error();var n=i.firstDay[Xn(e)]||i.firstDay["001"];if(!n)throw mr.error();return e.firstDay=fr.indexOf(n),e.firstDay}var vr=gn.NoWeekData;function br(t){var e=yn(t);if(e.weekendRange)return e.weekendRange;var i=mn.supplemental.weekData;if(!i)throw vr.error();var n=Xn(e),r=i.weekendStart[n]||i.weekendStart["001"],s=i.weekendEnd[n]||i.weekendEnd["001"];return e.weekendRange={start:fr.indexOf(r),end:fr.indexOf(s)},e.weekendRange}function wr(t){return yn(t).numbers.symbols}function xr(t,e){return void 0===e&&(e={}),e.currency||(e.currency=dr(t,!0)),hr(t,e)}function Sr(t,e,i,n,r){var s=r.numbers.symbols,o=t.indexOf(s.decimal),a=n.groupSize.slice(),l=a.shift(),c=-1!==o?o:i+1,h=t.substring(e,c),u=t,p=h.length;if(p>=l){for(var d=p,f=[];d>-1;){var g=h.substring(d-l,d);g&&f.push(g),d-=l;var m=a.shift();if(0===(l=void 0!==m?m:l)){(g=h.substring(0,d))&&f.push(g);break}}h=f.reverse().join(s.group),u=t.substring(0,e)+h+t.substring(c)}return u}function kr(t){return t===wn||t===xn}function Cr(t,e,i){void 0===e&&(e=2),void 0===i&&(i=!1);var n=e-String(t).length,r=t;if(n>0){var s=new Array(n+1).join("0");r=i?t+s:s+t}return r}function Ar(t,e){var i=t,n=e||0;return i=i.toString().split("e"),i=(i=Math.round(Number(i[0]+"e"+(i[1]?Number(i[1])+n:n)))).toString().split("e"),(i=Number(i[0]+"e"+(i[1]?Number(i[1])-n:-n))).toFixed(Math.min(n,20))}var _r=/0+$/;function Tr(t,e,i){var n=i.numbers.symbols,r=e.style,s=kr(r);if(r===kn)return(void 0!==e.minimumFractionDigits?t.toExponential(e.minimumFractionDigits):t.toExponential()).replace(_n,n.decimal);var o,a=t;s&&(e.value=a,o=xr(i,e)),r===Sn&&(a*=100,o=n.percentSign);var l=function(t){var e,i=t.minimumFractionDigits,n=t.maximumFractionDigits,r=t.style,s=kr(r);return s&&(e=ur(t.currency)),void 0===i&&(i=s?e.minimumFractionDigits:0),void 0===n&&(n=r===Sn?Math.max(i,0):s?Math.max(i,e.maximumFractionDigits):Math.max(i,3)),{minimumFractionDigits:i,maximumFractionDigits:n}}(e),c=l.minimumFractionDigits,h=(a=Ar(a,l.maximumFractionDigits))<0,u=a.split(_n),p=u[0],d=Cr(u[1]?u[1].replace(_r,Tn):Tn,c,!0);h&&(p=p.substring(1)),e.minimumIntegerDigits&&(p=Cr(p,e.minimumIntegerDigits));var f,g=!1!==e.useGrouping?Sr(p,0,p.length,e,i):p;if(d&&(g+=n.decimal+d),s&&"name"===e.currencyDisplay)f=function(t,e){var i=t.numbers.currency,n=1!==e?i["unitPattern-count-other"]:i["unitPattern-count-one"];return e<0&&(n=n.replace(An,"-n")),n}(i,t);else{var m=e.patterns;f=h?m[1]||"-"+m[0]:m[0]}if(f===An&&!h)return g;var y=function(t,e,i){for(var n=Tn,r=0,s=e.length;r<s;r++){var o=e.charAt(r);n+=o===An?t:o===Cn||"%"===o?i:o}return n}(g,f,o);return y}var Or="__??__",Er="#",Mr="0",Pr=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,Ir=/(\.(?:[0-9]*[1-9])?)0+$/g,Fr=/\.$/,Dr=/\,/g;function Rr(t){var e,i,n,r=t.number,s=t.format,o=s.indexOf(_n);if(-1!==o){var a=s.lastIndexOf(Mr)-o,l=s.lastIndexOf(Er)-o,c=a>-1,h=l>-1,u=r.toString().split("e"),p=(u=(u=u[1]?Ar(r,Math.abs(u[1])):u[0]).split(_n)[1]||Tn).length,d=-1;c||h?c&&a>l?p=a:l>a&&(h&&p>l?p=l:c&&p<a&&(p=a),d=c?a:0):(t.format=s.substring(0,o)+s.substring(o+1),o=-1,p=0),p>-1&&(r=Ar(r,p),d>-1&&(e=r,n=0===(i=d)?Ir:new RegExp("(\\.[0-9]{"+i+"}[1-9]*)0+$","g"),r=e.replace(n,"$1").replace(Fr,Tn)))}else r=Ar(r);t.negative&&-1*r>=0&&(t.negative=!1),t.number=r,t.decimalIndex=o}function Lr(t){var e=t.number,i=t.format;if(i=i.split(";"),t.negative&&i[1])i=i[1],t.hasNegativeFormat=!0;else if(0===e){var n=i[2];i=n||i[0],n&&function(t){return-1===t.indexOf(Er)&&-1===t.indexOf(Mr)}(n)&&(t.constant=n)}else i=i[0];t.format=i}function Nr(t,e,i){return-1===t&&-1!==e?e:-1!==t&&-1===e?t:i?Math.min(t,e):Math.max(t,e)}function Br(t,e){var i=t.number;return-1!==t.start&&(i=function(t,e){var i=t.start,n=t.end,r=t.negative,s=t.format,o=t.decimalIndex,a=t.lastZeroIndex,l=t.hasNegativeFormat,c=t.hasGroup,h=t.number,u=h.toString().split(_n),p=s.length,d=u[0],f=u[1]||Tn,g=d.length,m=Tn;h=s.substring(0,i),r&&!l&&(h+="-");for(var y=i;y<p;y++){var v=s.charAt(y);if(-1===o){if(n-y<g){h+=d;break}}else if(-1!==a&&a<y&&(m=Tn),o-y<=g&&o-y>-1&&(h+=d,y=o),o===y){h+=(f?e.numbers.symbols.decimal:Tn)+f,y+=n-o+1;continue}v===Mr?(h+=v,m=v):v===Er&&(h+=m)}return c&&(h=Sr(h,i+(r&&!l?1:0),Math.max(n,g+i),e.numbers.decimal,e)),n>=i&&(h+=s.substring(n+1)),h}(t,e),i=function(t,e,i){var n=t;if(e===wn||e===Sn){n=Tn;for(var r=0,s=t.length;r<s;r++){var o=t.charAt(r);n+=o===Cn||"%"===o?i:o}}return n}(i,t.style,t.symbol),i=function(t,e){var i=t;if(e)for(var n=e.length,r=0;r<n;r++)i=i.replace(Or,e[r]);return i}(i,t.literals)),i}function jr(t,e,i){var n={negative:t<0,number:Math.abs(t),format:e};return Lr(n),n.constant?n.constant:(function(t){var e=t.format;if(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1){var i=t.literals=[];t.format=e.replace(Pr,(function(t){var e=t.charAt(0).replace("\\",Tn),n=t.slice(1).replace(e,Tn);return i.push(n),Or}))}}(n),function(t,e){var i=t.format;-1!==i.indexOf("%")&&(t.style=Sn,t.symbol=e.numbers.symbols.percentSign,t.number*=100),-1!==i.indexOf(Cn)&&(t.style=wn,t.symbol=xr(e))}(n,i),function(t){t.hasGroup=t.format.indexOf(",")>-1,t.hasGroup&&(t.format=t.format.replace(Dr,Tn))}(n),Rr(n),function(t){var e=t.format,i=e.indexOf(Er),n=e.indexOf(Mr),r=Nr(i,n,!0),s=Nr(i=e.lastIndexOf(Er),n=e.lastIndexOf(Mr));r===e.length&&(s=r),t.start=r,t.end=s,t.lastZeroIndex=n}(n),Br(n,i))}var zr=/^(n|c|p|e|a)(\d*)$/i;function Ur(t){var e;return e=hn(t)?function(t){var e=zr.exec(t);if(e){var i={style:bn},n=e[1].toLowerCase();return"c"===n?i.style=wn:"a"===n?i.style=xn:"p"===n?i.style=Sn:"e"===n&&(i.style=kn),e[2]&&(i.minimumFractionDigits=i.maximumFractionDigits=parseInt(e[2],10)),i}}(t):t,e}function $r(t,e,i){if(void 0===e&&(e=An),void 0===i&&(i=On),null==t)return Tn;if(!isFinite(t))return String(t);var n,r=vn(i),s=Ur(e);if(s){var o=s.style||bn;n=Tr(t,Object.assign({},r.numbers[o],s),r)}else n=jr(t,e,r);return n}function Hr(t){return"number"==typeof t}var Vr=/[eE][\-+]?[0-9]+/,qr=/\u00A0/g;function Wr(t,e){if(e.length>1){var i=(e[1]||Tn).replace(Cn,Tn).split(An);if(t.indexOf(i[0])>-1&&t.indexOf(i[1])>-1)return t.replace(i[0],Tn).replace(i[1],Tn)}}function Xr(t,e,i){if(void 0===e&&(e=On),void 0===i&&(i={}),!t&&0!==t)return null;if(Hr(t))return t;var n,r=vn(e),s=r.numbers.symbols,o=t.toString();if(Vr.test(o))return o=parseFloat(o.replace(s.decimal,_n)),isNaN(o)?null:o;var a=o.indexOf("-");if(a>0)return null;var l=a>-1,c=function(t,e,i){var n,r=Ur(i)||{},s=kr(r.style),o=t,a=r.currency||dr(e,s);if(a){var l=cr(e,a,s);if(l)for(var c=0;c<l.length;c++){var h=l[c];if(o.includes(h)){o=o.replace(h,Tn),s=!0;break}}if(s){var u=Wr(o,e.numbers.currency.patterns)||Wr(o,e.numbers.accounting.patterns);u&&(n=!0,o=u)}}return{number:o,negative:n}}(o,r,i),h=c.negative;return o=c.number,l=void 0!==h?h:l,(i.style===Sn||o.indexOf(s.percentSign)>-1)&&(o=o.replace(s.percentSign,Tn),n=!0),o=o.replace("-",Tn).replace(qr," ").split(s.group.replace(qr," ")).join(Tn).replace(s.decimal,_n),o=parseFloat(o),isNaN(o)?o=null:l&&(o*=-1),o&&n&&(o/=100),o}var Gr=/\{(\d+)}/g;function Kr(t){var e=arguments;return t.replace(Gr,(function(t,i){return e[parseInt(i,10)+1]}))}var Yr=[2,1,5,3,4],Jr={};Jr[(-2).toString()]=8,Jr[(-1).toString()]=6,Jr[2..toString()]=6,Jr[1..toString()]=3;var Zr={numeric:1,"2-digit":2,short:3,long:4,narrow:5},Qr=/[hHmsSzZoOvVxX]/;var ts=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(t){return t.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],es={e:"c",E:"c",M:"L",Q:"q"},is={},ns={};function rs(t){return is[t]||(is[t]=new RegExp(t+"+")),is[t]}function ss(t){for(var e=[],i=t.charAt(0),n=i,r=1;r<t.length;r++){var s=t.charAt(r);s===n?i+=s:(e.push(i),i=n=s)}return e.push(i),e}function as(t,e){var i,n,r=t.length,s=-Number.MAX_VALUE;for(var o in e){for(var a=[],l=o.replace("v","z"),c=0,h=0;h<r;h++){var u=t[h],p=(rs(u[0]).exec(l)||[])[0];if(p){if(l=l.replace(p,Tn),p.length!==u.length){var d=Math.max(Math.min(Yr[p.length]-Yr[u.length],2),-2);c-=Jr[d]}}else c-=120;if(a.push(p),c<s)break}l.length&&(c-=20*ss(l).length),c>s&&(s=c,i=a,n=e[o])}n=n.replace("v","z");for(var f=0;f<r;f++){var g=i[f];if(g&&g!==t[f]){var m=i[f][0];n=n.replace(rs(m),t[f]),es[m]&&(n=n.replace(rs(es[m]),t[f]))}}return n}function ls(t,e){var i=e.calendar.dateTimeFormats.availableFormats;if(i[t])return i[t];if(ns[e.name]&&ns[e.name][t])return ns[e.name][t];var n,r=t.search(Qr);if(r>0){var s=t.substr(0,r),o=t.substr(r);n=Kr(e.calendar.dateTimeFormats.short,i[o]||as(ss(o),i),i[s]||as(ss(s),i))}else n=as(ss(t),i);return function(t,e,i){ns[i]||(ns[i]={}),ns[i][t]=e}(t,n,e.name),n}function cs(t,e){var i,n=e.calendar;if(hn(t))i=n.patterns[t]?n.patterns[t]:t;else if(t){if(t.pattern)return t.pattern;var r=t.skeleton;r||(t.datetime?i=Kr(n.dateTimeFormats[t.datetime],n.timeFormats[t.datetime],n.dateFormats[t.datetime]):t.date?i=n.dateFormats[t.date]:t.time?i=n.timeFormats[t.time]:r=function(t){for(var e=[],i=0;i<ts.length;i++){var n=ts[i],r=t[n.key];if(r){var s=n.specifier||n.getSpecifier(t);e.push(s.repeat(Zr[r]))}}return e.join(Tn)}(t)),r&&(i=ls(r,e))}return i||(i=n.patterns.d),i}function hs(t){var e;return t<=3?e="abbreviated":4===t?e="wide":5===t?e="narrow":6===t&&(e="short"),e}function us(t,e,i,n,r){return Zn(t,{type:e,nameType:hs(i),standAlone:n,lower:r})}function ps(t){return"function"==typeof t}function ds(t){return Boolean(t)&&ps(t.getTime)&&ps(t.getMonth)}var fs="month",gs="hour",ms="zone",ys="weekday",vs="quarter",bs={G:"era",y:"year",q:vs,Q:vs,M:fs,L:fs,d:"day",E:ys,c:ys,e:ys,h:gs,H:gs,k:gs,K:gs,m:"minute",s:"second",a:"dayperiod",x:ms,X:ms,z:ms,Z:ms},ws=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function xs(t,e,i,n){return e<=2?Cr(t+1,e):us(i,"months",e,n)[t]}function Ss(t,e,i,n){var r=Math.floor(t.getMonth()/3);return e<3?r+1:us(i,"quarters",e,n)[r]}function ks(t,e,i){var n=i.shortHours,r=i.optionalMinutes,s=i.separator,o=i.localizedName,a=i.zZeroOffset,l=t.getTimezoneOffset()/60;if(0===l&&a)return"Z";var c=l<=0?"+":"-",h=Math.abs(l).toString().split("."),u=h[1]||0,p=c+(n?h[0]:Cr(h[0],2));(!u&&r||(p+=(s?":":Tn)+Cr(u,2)),o)&&(p=Kr(0===l?e.calendar.gmtZeroFormat:e.calendar.gmtFormat,p));return p}function Cs(t,e,i,n){var r;return r=e<3?function(t,e,i){var n=yr(i);return(t<n?7-n+t:t-n)+1}(t.getDay(),0,i):us(i,"days",e,n)[t.getDay()],r}var As={};function _s(t,e,i){if(void 0===i&&(i=On),!ds(t))return null==t?Tn:t;var n=vn(i);return cs(e,n).replace(ws,(function(e){var i=e.length;return e.includes("'")||e.includes('"')?e.slice(1,i-1):As[e[0]](t,i,n)}))}function Ts(t,e,i){var n=t.getTimezoneOffset(),r=new Date(t.getTime()+6e4*(e-i)),s=r.getTimezoneOffset();return new Date(r.getTime()+6e4*(s-n))}As.d=function(t,e){return Cr(t.getDate(),e)},As.E=function(t,e,i){return us(i,"days",e)[t.getDay()]},As.M=function(t,e,i){return xs(t.getMonth(),e,i,!1)},As.L=function(t,e,i){return xs(t.getMonth(),e,i,!0)},As.y=function(t,e){var i=t.getFullYear();return 2===e&&(i%=100),Cr(i,e)},As.h=function(t,e){return Cr(t.getHours()%12||12,e)},As.H=function(t,e){return Cr(t.getHours(),e)},As.k=function(t,e){return Cr(t.getHours()||24,e)},As.K=function(t,e){return Cr(t.getHours()%12,e)},As.m=function(t,e){return Cr(t.getMinutes(),e)},As.s=function(t,e){return Cr(t.getSeconds(),e)},As.S=function(t,e){return 0!==t.getMilliseconds()?String(t.getMilliseconds()/1e3).split(".")[1].substr(0,e):Cr(Tn,e)},As.a=function(t,e,i){return us(i,"dayPeriods",e)[t.getHours()<12?"am":"pm"]},As.z=function(t,e,i){return ks(t,i,{shortHours:e<4,optionalMinutes:e<4,separator:!0,localizedName:!0})},As.Z=function(t,e,i){return ks(t,i,{separator:e>3,localizedName:4===e,zZeroOffset:5===e})},As.x=function(t,e,i){return ks(t,i,{optionalMinutes:1===e,separator:3===e||5===e})},As.X=function(t,e,i){return ks(t,i,{optionalMinutes:1===e,separator:3===e||5===e,zZeroOffset:!0})},As.G=function(t,e,i){var n=t.getFullYear()>=0?1:0;return us(i,"eras",e)[n]},As.e=Cs,As.c=function(t,e,i){return Cs(t,e,i,!0)},As.q=function(t,e,i){return Ss(t,e,i,!0)},As.Q=Ss;var Os=/([+|\-]\d{1,2})(:?)(\d{2})?/,Es=/^\/Date\((.*?)\)\/$/,Ms=/[+-]\d*/,Ps={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},Is=/\d+/,Fs=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],Ds=["G","g","F","Y","y","M","m","D","d","y","T","t"];function Rs(t,e,i){return!(t>=e&&t<=i)}function Ls(t,e){for(var i=e.format,n=e.idx,r=0;i[n]===t;)r++,n++;return r>0&&(n-=1),e.idx=n,r}function Ns(t,e){var i=t?Ps[t]||new RegExp("^\\d{1,"+t+"}"):Is,n=e.value.substr(e.valueIdx,t).match(i);return n?(n=n[0],e.valueIdx+=n.length,parseInt(n,10)):null}function Bs(t,e,i){for(var n,r,s,o=0,a=t.length,l=0,c=0;o<a;o++)r=(n=t[o]).length,s=e.value.substr(e.valueIdx,r),i&&(s=s.toLowerCase()),s===n&&r>l&&(l=r,c=o);return l?(e.valueIdx+=l,c+1):null}function js(t){var e=!1;return t.value.charAt(t.valueIdx)===t.format[t.idx]&&(t.valueIdx++,e=!0),e}function zs(t,e,i){var n=i.shortHours,r=i.noSeparator,s=i.optionalMinutes,o=i.localizedName,a=i.zLiteral;if(t.UTC=!0,a&&"Z"===t.value.charAt(t.valueIdx))return t.valueIdx++,!1;if(o&&!Bs(function(t){var e=t.gmtFormat,i=t.gmtZeroFormat;if(!e)throw gn.NoGMTInfo.error();return[e.replace("{0}",Tn).toLowerCase(),i.replace("{0}",Tn).toLowerCase()]}(e.calendar),t,!0))return!0;var l=Os.exec(t.value.substr(t.valueIdx,6));if(!l)return!o;var c=l[1],h=l[3],u=parseInt(c,10),p=l[2],d=parseInt(h,10);return!!(isNaN(u)||!n&&3!==c.length||!s&&isNaN(d)||r&&p)||(isNaN(d)&&(d=null),!!(Rs(u,-12,13)||d&&Rs(d,0,59))||(t.valueIdx+=l[0].length,t.hoursOffset=u,void(t.minutesOffset=d)))}function Us(t,e,i){var n=Ls(t,e),r=us(i,"months",n,"L"===t,!0),s=n<3?Ns(2,e):Bs(r,e,!0);if(null===s||Rs(s,1,12))return!0;e.month=s-1}function $s(t,e,i){var n=Ls(t,e),r=us(i,"days",n,"c"===t,!0),s=n<3?Ns(1,e):Bs(r,e,!0);if(!s&&0!==s||Rs(s,1,7))return!0}var Hs={};function Vs(t,e,i){for(var n=cs(e,i).split(Tn),r={format:n,idx:0,value:t,valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},s=n.length,o=!1;r.idx<s;r.idx++){var a=n[r.idx];if(o)"'"===a&&(o=!1),js(r);else if(Hs[a]){if(Hs[a](r,i))return null}else if("'"===a)o=!0,js(r);else if(!js(r))return null}return r.valueIdx<t.length?null:function(t){var e,i=t.year,n=t.month,r=t.day,s=t.hours,o=t.minutes,a=t.seconds,l=t.milliseconds,c=t.pmHour,h=t.UTC,u=t.hoursOffset,p=t.minutesOffset,d=null!==s||null!==o||a||null,f=new Date;return null===i&&null===n&&null===r&&d?(i=f.getFullYear(),n=f.getMonth(),r=f.getDate()):(null===i&&(i=f.getFullYear()),null===r&&(r=1)),c&&s<12&&(s+=12),h?(u&&(s+=-u),p&&(o+=-p*(u<0?-1:1)),e=new Date(Date.UTC(i,n,r,s,o,a,l))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(e=new Date(i,n,r,s,o,a,l),s),i<100&&e.setFullYear(i),e.getDate()!==r&&void 0===h?null:e}(r)||null}function qs(t){if(t&&0===t.indexOf("/D")){var e=Es.exec(t);if(e){e=e[1];var i=Ms.exec(e.substring(1));return e=new Date(parseInt(e,10)),i&&(i=function(t){var e="-"===t.substr(0,1)?-1:1,i=t.substring(1);return e*(60*parseInt(i.substr(0,2),10)+parseInt(i.substring(2),10))}(i[0]),e=Ts(e,e.getTimezoneOffset(),0),e=Ts(e,0,-1*i)),e}}}function Ws(t,e,i){if(void 0===i&&(i=On),!t)return null;if(ds(t))return t;var n=String(t).trim(),r=qs(n);if(r)return r;for(var s=vn(i),o=e||function(t){for(var e=[],i=t.patterns,n=Ds.length,r=0;r<n;r++)e.push(i[Ds[r]]);return e.concat(Fs)}(s.calendar),a=(o=Array.isArray(o)?o:[o]).length,l=0;l<a;l++)if(r=Vs(n,o[l],s))return r;return r}Hs.d=function(t){Ls("d",t);var e=Ns(2,t);if(null===e||Rs(e,1,31))return!0;null===t.day&&(t.day=e)},Hs.E=function(t,e){if(null===Bs(us(e,"days",Ls("E",t),!1,!0),t,!0))return!0},Hs.M=function(t,e){return Us("M",t,e)},Hs.L=function(t,e){return Us("L",t,e)},Hs.y=function(t){var e=Ls("y",t),i=Ns(1===e?void 0:e,t);if(null===i)return!0;if(2===e){var n=(new Date).getFullYear();(i=n-n%100+i)>2029&&(i-=100)}t.year=i},Hs.h=function(t){Ls("h",t);var e=Ns(2,t);if(12===e&&(e=0),null===e||Rs(e,0,11))return!0;t.hours=e},Hs.K=function(t){Ls("K",t);var e=Ns(2,t);if(null===e||Rs(e,0,11))return!0;t.hours=e},Hs.a=function(t,e){var i=us(e,"dayPeriods",Ls("a",t),!1,!0),n=Bs([i.pm],t,!0);if(!n&&!Bs([i.am],t,!0))return!0;t.pmHour=n},Hs.H=function(t){Ls("H",t);var e=Ns(2,t);if(null===e||Rs(e,0,23))return!0;t.hours=e},Hs.k=function(t){Ls("k",t);var e=Ns(2,t);if(null===e||Rs(e,1,24))return!0;t.hours=24===e?0:e},Hs.m=function(t){Ls("m",t);var e=Ns(2,t);if(null===e||Rs(e,0,59))return!0;t.minutes=e},Hs.s=function(t){Ls("s",t);var e=Ns(2,t);if(null===e||Rs(e,0,59))return!0;t.seconds=e},Hs.S=function(t){var e=Ls("S",t),i=t.value.substr(t.valueIdx,e),n=null;if(isNaN(parseInt(i,10))||(n=Ar(n=parseFloat("0."+i,10),3),n*=1e3,t.valueIdx+=e),null===n||Rs(n,0,999))return!0;t.milliseconds=n},Hs.z=function(t,e){var i=Ls("z",t)<4,n=zs(t,e,{shortHours:i,optionalMinutes:i,localizedName:!0});if(n)return n},Hs.Z=function(t,e){var i=Ls("Z",t),n=zs(t,e,{noSeparator:i<4,zLiteral:5===i,localizedName:4===i});if(n)return n},Hs.x=function(t,e){var i=Ls("x",t),n=zs(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i});if(n)return n},Hs.X=function(t,e){var i=Ls("X",t),n=zs(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i,zLiteral:!0});if(n)return n},Hs.G=function(t,e){var i=us(e,"eras",Ls("G",t),!1,!0);if(null===Bs([i[0],i[1]],t,!0))return!0},Hs.e=function(t,e){return $s("e",t,e)},Hs.c=function(t,e){return $s("c",t,e)};var Xs={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},Gs="literal";function Ks(t,e){var i=t[t.length-1];i&&i.type===Gs?i.pattern+=e:t.push({type:Gs,pattern:e})}function Ys(t){return"h"===t||"K"===t}function Js(t,e){void 0===e&&(e=On);for(var i=cs(t,vn(e)),n=[],r=ws.lastIndex=0,s=ws.exec(i);s;){var o=s[0];if(r<s.index&&Ks(n,i.substring(r,s.index)),o.startsWith('"')||o.startsWith("'"))Ks(n,o);else{var a=o[0],l=bs[a],c={type:l,pattern:o};"hour"===l&&(c.hour12=Ys(o));var h=Xs[l];if(h){var u=Hr(h.minLength)?h.minLength:h.minLength[a],p=o.length;p>=u&&(c.names={type:h.type,nameType:hs(p),standAlone:h.standAlone===a})}n.push(c)}r=ws.lastIndex,s=ws.exec(i)}return r<i.length&&Ks(n,i.substring(r)),n}var Zs=/\{(\d+)(:[^\}]+)?\}/g;function Qs(t,e,i){if(e){if(ds(t))return _s(t,e,i);if(Hr(t))return $r(t,e,i)}return null!=t?t:Tn}function to(t,e,i){return t.replace(Zs,(function(t,n,r){return Qs(e[parseInt(n,10)],r?r.substring(1):Tn,i)}))}class eo{static setLocale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yn(g({},vn("en"),t)),this.localeId=t.name}static format(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return to(t,i,this.localeId)}static toString(t,e,i){var n=t;return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(t)&&(n=new Date(t)),Qs(n,e,this.localeId||i)}static parseDate(t,e,i){return Ws(t,e,this.localeId||i)}}var io=/\$\{([^}]*)\}/g,no=/\\\}/g,ro=/__CURLY__/g,so=/\\#/g,oo=/__SHARP__/g;class ao{static htmlEncode(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static render(t,e){var i,n,r="";for(i=0,n=e.length;i<n;i++)r+=t(e[i]);return r}static compile(t){var e,i,n="var $kendoOutput, $kendoHtmlEncode = htmlEncode;",r=ao.options.paramName,s=ao.options.useWithBlock;if("function"==typeof t)return t;for(n+=s?"with("+r+"){":"",n+="$kendoOutput=",e=t.replace(no,"__CURLY__").replace(io,"#=$kendoHtmlEncode($1)#").replace(ro,"}").replace(so,"__SHARP__").split("#"),i=0;i<e.length;i++)n+=ao.compilePart(e[i],i%2==0);n+=s?";}":";",n=(n+="return $kendoOutput;").replace(oo,"#");try{var o=new Function(r,"htmlEncode",n);return function(t){return o(t,ao.htmlEncode)}}catch(e){throw new Error("Invalid template:'"+t+"' Generated code:'"+n+"'")}}static compilePart(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),n=t.substring(1);return"="===i?"+("+n+")+":":"===i?"+$kendoHtmlEncode("+n+")+":";"+t+";$kendoOutput+="}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(ao,"options",{useWithBlock:!0,paramName:"dataItem"});class lo{static compile(t){return ao.compile(t)}}var co="arc",ho="#000",uo="bottom",po="center",fo="circle",go="cross",mo="date",yo="12px sans-serif",vo=10,bo=/\{\d+:?/,wo="height",xo="inside",So="left",ko=Number.MAX_VALUE,Co=-Number.MAX_VALUE,Ao="none",_o="object",To="outside",Oo="right",Eo="roundedRect",Mo="string",Po="top",Io="value",Fo="#fff",Do="width",Ro="x",Lo="y";function No(t){return Array.isArray(t)}function Bo(t,e){for(var i=No(e)?e:[e],n=0;n<i.length;n++){var r=i[n];-1===t.className.indexOf(r)&&(t.className+=" "+r)}}var jo=/\s+/g;function zo(t){return void 0!==t}function Uo(t){var e=.5;t.options.stroke&&zo(t.options.stroke.width)&&t.options.stroke.width%2==0&&(e=0);for(var i=0;i<t.segments.length;i++)t.segments[i].anchor().round(0).translate(e,e);return t}function $o(t,e){return-t.x*e.y+t.y*e.x<0}function Ho(t){return"number"==typeof t&&!isNaN(t)}function Vo(t){return typeof t===Mo}function qo(t){return Ho(t)||Vo(t)&&isFinite(t)}function Wo(t){return"function"==typeof t}var Xo="object";function Go(t,e){for(var i in e){var n=e[i],r=typeof n,s=void 0;if((s=r===Xo&&null!==n?n.constructor:null)&&s!==Array)if(n instanceof Date)t[i]=new Date(n.getTime());else if(Wo(n.clone))t[i]=n.clone();else{var o=t[i];t[i]=typeof o===Xo&&o||{},Go(t[i],n)}else"undefined"!==r&&(t[i]=n)}return t}function Ko(t){for(var e=arguments,i=arguments.length,n=1;n<i;n++)Go(t,e[n]);return t}function Yo(t){return"object"==typeof t}function Jo(t){return Ho(t)?t+"px":t}var Zo=/width|height|top|left|bottom|right/i;function Qo(t){return Zo.test(t)}function ta(t,e){var i=Vo(e)?[e]:e;if(No(i)){for(var n={},r=window.getComputedStyle(t),s=0;s<i.length;s++){var o=i[s];n[o]=Qo(o)?parseFloat(r[o]):r[o]}return n}if(Yo(e))for(var a in e)t.style[a]=Jo(e[a])}function ea(t,e){void 0===e&&(e=0);var i={top:0,right:0,bottom:0,left:0};return"number"==typeof t?i.top=i.right=i.bottom=i.left=t:(i.top=t.top||e,i.right=t.right||e,i.bottom=t.bottom||e,i.left=t.left||e),i}var ia={compile:function(t){return t}},na=function(){};na.register=function(t){ia=t},na.compile=function(t){return ia.compile(t)};const ra=na;function sa(t){var e;return void 0===t&&(t={}),t.template?t.template=e=ra.compile(t.template):Wo(t.content)&&(e=t.content),e}var oa=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,aa={};function la(t){if(aa[t])return aa[t];var e=[];return t.replace(oa,(function(t,i,n,r){e.push(zo(i)?i:n||r)})),aa[t]=function(t){for(var i=t,n=0;n<e.length&&i;n++)i=i[e[n]];return i},aa[t]}function ca(t,e){for(var i=t.length,n=[],r=0;r<i;r++)e(t[r])&&n.push(t[r]);return n}function ha(t,e){if(t.className)for(var i=e.split(" "),n=0;n<i.length;n++)if(-1!==t.className.indexOf(i[n]))return!0}aa[void 0]=function(t){return t};var ua=function(){this._map={}};ua.prototype.get=function(t){return this._map[this._key(t)]},ua.prototype.set=function(t,e){this._map[this._key(t)]=e},ua.prototype._key=function(t){return t instanceof Date?t.getTime():t};const pa=ua;function da(t,e){if(e)return-1!==e.indexOf(t)}function fa(t,e){var i,n=(i=e)?Math.pow(10,i):1;return Math.round(t*n)/n}function ga(t,e,i){return fa(t+(e-t)*i,3)}var ma="trigger",ya=function(t,e){this.observer=t,this.handlerMap=Ko({},this.handlerMap,e)};ya.prototype.trigger=function(t,e){var i,n=this.observer,r=this.handlerMap;return r[t]?i=this.callObserver(r[t],e):n.trigger&&(i=this.callObserver(ma,t,e)),i},ya.prototype.callObserver=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return this.observer[t].apply(this.observer,e)},ya.prototype.requiresHandlers=function(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(var e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0};const va=ya;function ba(t,e){for(var i=t.length,n=[],r=0;r<i;r++){var s=e(t[r]);zo(s)&&n.push(s)}return n}var wa=null,xa={get browser(){return"undefined"==typeof window||wa||(wa=function(t){var e={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+))/i},i={};for(var n in e)if(e.hasOwnProperty(n)){var r=t.match(e[n]);if(r){i[n]=!0,i[r[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,i.version=parseInt(document.documentMode||r[2],10);break}}return i}(window.navigator.userAgent)),wa}};const Sa=xa;var ka=Sa.browser||{};function Ca(t){var e=0;return t.wheelDelta?(e=-t.wheelDelta/120,ka.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)}function Aa(t,e){return t.push.apply(t,e),t}var _a={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function Ta(t){for(var e=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";t>0;)t<e[0]?e.shift():(i+=_a[e[0]],t-=e[0]);return i}function Oa(){var t,e,i=new Promise((function(n,r){t=function(t){return i._state="resolved",n(t),i},e=function(t){return i._state="rejected",r(t),i}}));return i._state="pending",i.resolve=t,i.reject=e,i.state=function(){return i._state},i}var Ea=1;function Ma(){return"kdef"+Ea++}var Pa=Math.PI/180,Ia=Number.MAX_VALUE,Fa=-Number.MAX_VALUE;function Da(t){return t/Pa}var Ra=String.fromCharCode;var La="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Na(t){for(var e="",i=0,n=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);if(55296<=n&&n<=56319){var r=n,s=t.charCodeAt(++i);isNaN(s)||(n=1024*(r-55296)+(s-56320)+65536)}n<128?e+=Ra(n):n<2048?(e+=Ra(192|n>>>6),e+=Ra(128|63&n)):n<65536?(e+=Ra(224|n>>>12),e+=Ra(128|n>>>6&63),e+=Ra(128|63&n)):n<1114111&&(e+=Ra(240|n>>>18),e+=Ra(128|n>>>12&63),e+=Ra(128|n>>>6&63),e+=Ra(128|63&n))}return e}(t);i<n.length;){var r=n.charCodeAt(i++),s=n.charCodeAt(i++),o=n.charCodeAt(i++),a=r>>2,l=(3&r)<<4|s>>4,c=(15&s)<<2|o>>6,h=63&o;isNaN(s)?c=h=64:isNaN(o)&&(h=64),e=e+La.charAt(a)+La.charAt(l)+La.charAt(c)+La.charAt(h)}return e}function Ba(t){return zo((t.x||{}).location)?{x:t.x.location,y:t.y.location}:{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}}function ja(t){return void 0===t&&(t={}),t.touch?t.touch.initialTouch:t.target}function za(t){return""===t||null===t||"none"===t||"transparent"===t||!zo(t)}function Ua(t){if(t)return t[t.length-1]}function $a(t,e,i){return Math.max(Math.min(t,i),e)}function Ha(t,e){if(t.length<2)return t.slice();return function t(i){if(i.length<=1)return i;var n=Math.floor(i.length/2),r=i.slice(0,n),s=i.slice(n);return function(t,i){for(var n=[],r=0,s=0,o=0;r<t.length&&s<i.length;)e(t[r],i[s])<=0?n[o++]=t[r++]:n[o++]=i[s++];return r<t.length&&n.push.apply(n,t.slice(r)),s<i.length&&n.push.apply(n,i.slice(s)),n}(r=t(r),s=t(s))}(t)}const Va=Date.now||function(){return(new Date).getTime()};function qa(t){return Promise.all(t)}function Wa(t){return t*Pa}function Xa(t,e){return zo(t)?t:e}function Ga(t,e){for(var i in e)for(var n=i.trim().split(" "),r=0;r<n.length;r++)t.addEventListener(n[r],e[i],!1)}function Ka(t){var e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:e.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function Ya(t,e){for(var i={},n=window.getComputedStyle(t)||{},r=Array.isArray(e)?e:[e],s=0;s<r.length;s++){var o=r[s];i[o]=n[o]}return i}function Ja(t){return isNaN(t)?t:t+"px"}function Za(t,e){if(!e){var i=Ya(t,["width","height"]);return{width:parseInt(i.width,10),height:parseInt(i.height,10)}}var n=e.width,r=e.height;zo(n)&&(t.style.width=Ja(n)),zo(r)&&(t.style.height=Ja(r))}function Qa(t,e){for(var i in void 0===e&&(e={}),e)for(var n=i.trim().split(" "),r=0;r<n.length;r++)t.removeEventListener(n[r],e[i],!1)}function tl(t){var e=Ya(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,n=e.paddingTop;return{top:parseFloat(n),left:parseFloat(i)}}const el=function(){};var il=function(t){function e(e,i,n,r,s,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),t.call(this),this.a=e,this.b=i,this.c=n,this.d=r,this.e=s,this.f=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.multiplyCopy=function(t){return new e(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},e.prototype.invert=function(){var t=this,i=t.a,n=t.b,r=t.c,s=t.d,o=t.e,a=t.f,l=i*s-n*r;return 0===l?null:new e(s/l,-n/l,-r/l,i/l,(r*a-s*o)/l,(n*o-i*a)/l)},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.equals=function(t){return!!t&&(this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f)},e.prototype.round=function(t){return this.a=fa(this.a,t),this.b=fa(this.b,t),this.c=fa(this.c,t),this.d=fa(this.d,t),this.e=fa(this.e,t),this.f=fa(this.f,t),this},e.prototype.toArray=function(t){var e=[this.a,this.b,this.c,this.d,this.e,this.f];if(zo(t))for(var i=0;i<e.length;i++)e[i]=fa(e[i],t);return e},e.prototype.toString=function(t,e){return void 0===e&&(e=","),this.toArray(t).join(e)},e.translate=function(t,i){return new e(1,0,0,1,t,i)},e.unit=function(){return new e(1,0,0,1,0,0)},e.rotate=function(t,i,n){var r=new e;return r.a=Math.cos(Wa(t)),r.b=Math.sin(Wa(t)),r.c=-r.b,r.d=r.a,r.e=i-i*r.a+n*r.b||0,r.f=n-n*r.a-i*r.b||0,r},e.scale=function(t,i){return new e(t,0,0,i,0,0)},e}(el);il.IDENTITY=il.unit();const nl=il;var rl=/matrix\((.*)\)/;function sl(t){var e=getComputedStyle(t).transform;return"none"===e?nl.unit():function(t){var e=t.match(rl);if(null===e||2!==e.length)return nl.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(nl,[null].concat(i)))}(e)}function ol(t){if(!t)return nl.unit();for(var e=sl(t),i=t.parentElement;i;){var n=sl(i);e=e.multiplyCopy(n),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}var al=function(t){function e(e){t.call(this),this._size=e,this._length=0,this._map={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e){var i=this._map,n={key:t,value:e};i[t]=n,this._head?(this._tail.newer=n,n.older=this._tail,this._tail=n):this._head=this._tail=n,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},e.prototype.get=function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value},e}(el);const ll=al;var cl=/\r?\n|\r|\t/g;function hl(t){return String(t).replace(cl," ")}function ul(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join("")}function pl(t){for(var e=2166136261,i=0;i<t.length;++i)e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e^=t.charCodeAt(i);return e>>>0}var dl,fl={baselineMarkerSize:1};"undefined"!=typeof document&&((dl=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var gl=function(t){function e(e){t.call(this),this._cache=new ll(1e3),this.options=Object.assign({},fl,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.measure=function(t,e,i){if(void 0===i&&(i={}),null==t)return{width:0,height:0,baseline:0};var n=pl(t+ul(e)),r=this._cache.get(n);if(r)return r;var s={width:0,height:0,baseline:0},o=i.box||dl,a=this._baselineMarker().cloneNode(!1);for(var l in e){var c=e[l];void 0!==c&&(o.style[l]=c)}var h=!1!==i.normalizeText?hl(t):String(t);return o.textContent=h,o.appendChild(a),document.body.appendChild(o),h.length&&(s.width=o.offsetWidth-this.options.baselineMarkerSize,s.height=o.offsetHeight,s.baseline=a.offsetTop+this.options.baselineMarkerSize),s.width>0&&s.height>0&&this._cache.put(n,s),o.parentNode.removeChild(o),s},e.prototype._baselineMarker=function(){var t=document.createElement("div");return t.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",t},e}(el);gl.current=new gl;const ml=gl;function yl(t,e,i){return ml.current.measure(t,e,i)}function vl(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}var bl=e.append,wl=e.bindEvents,xl=e.defined,Sl=e.deg,kl=e.elementOffset,Cl=e.elementSize,Al=e.eventCoordinates,_l=e.eventElement,Tl=e.hashKey,Ol=e.last,El=e.limitValue,Ml=e.objectKey,Pl=e.rad,Il=e.round,Fl=e.unbindEvents,Dl=e.valueOrDefault,Rl=function(){};Rl.fetchFonts=function(t,e,i){void 0===i&&(i={depth:0});!t||i.depth>5||!document.fonts||Object.keys(t).forEach((function(n){var r=t[n];"dataSource"!==n&&"$"!==n[0]&&r&&("font"===n?e.push(r):"object"==typeof r&&(i.depth++,Rl.fetchFonts(r,e,i),i.depth--))}))},Rl.loadFonts=function(t,e){var i=[];if(t.length>0&&document.fonts){try{i=t.map((function(t){return document.fonts.load(t)}))}catch(t){vl(t)}Promise.all(i).then(e,e)}else e()},Rl.preloadFonts=function(t,e){var i=[];Rl.fetchFonts(t,i),Rl.loadFonts(i,e)};const Ll=Rl;function Nl(t,e){var i=t.prototype;i.options?i.options=Ko({},i.options,e):i.options=e}function Bl(t){for(var e=ko,i=Co,n=0,r=t.length;n<r;n++){var s=t[n];null!==s&&isFinite(s)&&(e=Math.min(e,s),i=Math.max(i,s))}return{min:e===ko?void 0:e,max:i===Co?void 0:i}}function jl(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(e(n,i,t))return n}}var zl=nl,Ul=/matrix\((.*)\)/;function $l(t){var e=getComputedStyle(t).transform;return"none"===e?zl.unit():function(t){var e=t.match(Ul);if(null===e||2!==e.length)return zl.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(zl,[null].concat(i)))}(e)}const Hl={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var Vl=Sa.browser,ql=function(t){var e=Object.keys(Hl);e.push("transparent");var i=new RegExp("^("+e.join("|")+")(\\W|$)","i");return ql=function(t){return i.exec(t)},i.exec(t)},Wl=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){return this},e.prototype.toRGB=function(){return this},e.prototype.toHex=function(t){return this.toBytes().toHex(t)},e.prototype.toBytes=function(){return this},e.prototype.toCss=function(t){return"#"+this.toHex(t)},e.prototype.toCssRgba=function(){var t=this.toBytes();return"rgba("+t.r+", "+t.g+", "+t.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},e.prototype.toDisplay=function(){return Vl.msie&&Vl.version<9?this.toCss():this.toCssRgba()},e.prototype.equals=function(t){return t===this||null!=t&&this.toCssRgba()===tc(t).toCssRgba()},e.prototype.diff=function(t){if(null===t)return NaN;var e=this.toBytes(),i=t.toBytes();return Math.sqrt(Math.pow(.3*(e.r-i.r),2)+Math.pow(.59*(e.g-i.g),2)+Math.pow(.11*(e.b-i.b),2))},e.prototype.clone=function(){var t=this.toBytes();return t===this&&(t=new Gl(t.r,t.g,t.b,t.a)),t},e}(el),Xl=function(t){function e(e,i,n,r){t.call(this),this.r=e,this.g=i,this.b=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){var t,e,i=this,n=i.r,r=i.g,s=i.b,o=Math.min(n,r,s),a=Math.max(n,r,s),l=a-o,c=a;return 0===l?new Yl(0,0,c,this.a):(0!==a?(e=l/a,t=n===a?(r-s)/l:r===a?2+(s-n)/l:4+(n-r)/l,(t*=60)<0&&(t+=360)):(e=0,t=-1),new Yl(t,e,c,this.a))},e.prototype.toHSL=function(){var t,e,i=this,n=i.r,r=i.g,s=i.b,o=Math.max(n,r,s),a=Math.min(n,r,s),l=(o+a)/2;if(o===a)t=e=0;else{var c=o-a;switch(e=l>.5?c/(2-o-a):c/(o+a),o){case n:t=(r-s)/c+(r<s?6:0);break;case r:t=(s-n)/c+2;break;case s:t=(n-r)/c+4}}return new Jl(60*t,100*e,100*l,this.a)},e.prototype.toBytes=function(){return new Gl(255*this.r,255*this.g,255*this.b,this.a)},e}(Wl),Gl=function(t){function e(e,i,n,r){t.call(this,Math.round(e),Math.round(i),Math.round(n),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){return new t(this.r/255,this.g/255,this.b/255,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toHex=function(t){var e=Kl(this.r,2)+Kl(this.g,2)+Kl(this.b,2);return t&&t.alpha&&(e+=Kl(Math.round(255*this.a),2)),e},e.prototype.toBytes=function(){return this},e}(Xl);function Kl(t,e,i){void 0===i&&(i="0");for(var n=t.toString(16);e>n.length;)n=i+n;return n}var Yl=function(t){function e(e,i,n,r){t.call(this),this.h=e,this.s=i,this.v=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,n=this,r=n.h,s=n.s,o=n.v;if(0===s)t=e=i=o;else{r/=60;var a=Math.floor(r),l=r-a,c=o*(1-s),h=o*(1-s*l),u=o*(1-s*(1-l));switch(a){case 0:t=o,e=u,i=c;break;case 1:t=h,e=o,i=c;break;case 2:t=c,e=o,i=u;break;case 3:t=c,e=h,i=o;break;case 4:t=u,e=c,i=o;break;default:t=o,e=c,i=h}}return new Xl(t,e,i,this.a)},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(Wl),Jl=function(t){function e(e,i,n,r){t.call(this),this.h=e,this.s=i,this.l=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,n=this.h/360,r=this.s/100,s=this.l/100;if(0===r)t=e=i=s;else{var o=s<.5?s*(1+r):s+r-s*r,a=2*s-o;t=Zl(a,o,n+1/3),e=Zl(a,o,n),i=Zl(a,o,n-1/3)}return new Xl(t,e,i,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(Wl);function Zl(t,e,i){var n=i;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ql(t){return parseFloat(parseFloat(parseInt(t,16)/255).toFixed(3))}function tc(t,e){var i,n;if(null==t||"none"===t)return null;if(t instanceof Wl)return t;var r=t.toLowerCase();if(i=ql(r))return(r="transparent"===i[1]?new Xl(1,1,1,0):tc(Hl[i[1]],e)).match=[i[1]],r;if((i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?n=new Gl(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?n=new Gl(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?n=new Gl(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),Ql(i[4]+i[4])):(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?n=new Gl(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Ql(i[4])):(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r))?n=new Gl(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1):(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r))?n=new Gl(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4])):(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r))?n=new Xl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1):(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r))&&(n=new Xl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))),n)n.match=i;else if(!e)throw new Error("Cannot parse color: "+r);return n}var ec=function(t){function e(i){var n=this;if(t.call(this),1===arguments.length)for(var r=e.formats,s=this.resolveColor(i),o=0;o<r.length;o++){var a=r[o].re,l=r[o].process,c=a.exec(s);if(c){var h=l(c);n.r=h[0],n.g=h[1],n.b=h[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHex=function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+t(e)+t(i)+t(n)},e.prototype.resolveColor=function(t){var i=t||"black";return"#"===i.charAt(0)&&(i=i.substr(1,6)),i=(i=i.replace(/ /g,"")).toLowerCase(),i=e.namedColors[i]||i},e.prototype.normalizeByte=function(t){return t<0||isNaN(t)?0:t>255?255:t},e.prototype.padDigit=function(t){return 1===t.length?"0"+t:t},e.prototype.brightness=function(t){var e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},e.prototype.percBrightness=function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},e.prototype.isDark=function(){return this.percBrightness()<180},e.fromBytes=function(t,e,i,n){return new Gl(t,e,i,null!=n?n:1)},e.fromRGB=function(t,e,i,n){return new Xl(t,e,i,null!=n?n:1)},e.fromHSV=function(t,e,i,n){return new Yl(t,e,i,null!=n?n:1)},e.fromHSL=function(t,e,i,n){return new Jl(t,e,i,null!=n?n:1)},e}(el);ec.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],ec.namedColors=Hl;const ic=ec;const nc=function(t){return new ic(t).isDark()?Fo:ho};var rc={},sc=function(t){this._index={},this._values=t?t.slice(0):[];for(var e=0;e<this._values.length;e++)this._index[this._values[e]]=e},oc={size:{configurable:!0}};sc.prototype.values=function(){return this._values.filter((function(t){return t!==rc}))},sc.prototype.has=function(t){return void 0!==this._index[t]},sc.prototype.add=function(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))},sc.prototype.delete=function(t){var e=this._index[t];void 0!==e&&(this._values[e]=rc,delete this._index[t])},sc.prototype.clear=function(){this._index={},this._values=[]},oc.size.get=function(){return this._values.length},Object.defineProperties(sc.prototype,oc);var ac=function(t){this._set=new Set(t)},lc={size:{configurable:!0}};ac.prototype.values=function(){return Array.from(this._set)},ac.prototype.has=function(t){return this._set.has(t)},ac.prototype.add=function(t){this._set.add(t)},ac.prototype.delete=function(t){this._set.delete(t)},ac.prototype.clear=function(){this._set.clear()},lc.size.get=function(){return this._set.size},Object.defineProperties(ac.prototype,lc);function cc(t){return e=!1,"function"==typeof Set&&(e=new Set([1]).has(1)),e?new ac(t):new sc(t);var e}function hc(t){throw t}const uc={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function pc(t,e){var i=Il(e-t,9);if(0===i){if(0===e)return.1;i=Math.abs(e)}var n=Math.pow(10,Math.floor(Math.log(i)/Math.log(10))),r=Il(i/n,vo);return Il(n*(r<1.904762?.2:r<4.761904?.5:r<9.523809?1:2),vo)}var dc=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.rotate=function(t,e){var i=Pl(e),n=Math.cos(i),r=Math.sin(i),s=t.x,o=t.y,a=this.x,l=this.y;return this.x=Il(s+(a-s)*n+(l-o)*r,3),this.y=Il(o+(l-o)*n-(a-s)*r,3),this},e.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.onCircle=function(t,i,n){var r=Pl(i);return new e(t.x-n*Math.cos(r),t.y-n*Math.sin(r))},e}(el);const fc=dc;var gc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observers=function(){return this._observers=this._observers||[],this._observers},e.prototype.addObserver=function(t){return this._observers?this._observers.push(t):this._observers=[t],this},e.prototype.removeObserver=function(t){var e=this.observers(),i=e.indexOf(t);return-1!==i&&e.splice(i,1),this},e.prototype.trigger=function(t,e){var i=this._observers;if(i&&!this._suspended)for(var n=0;n<i.length;n++){var r=i[n];r[t]&&r[t](e)}return this},e.prototype.optionsChange=function(t){void 0===t&&(t={}),t.element=this,this.trigger("optionsChange",t)},e.prototype.geometryChange=function(){this.trigger("geometryChange",{element:this})},e.prototype.suspend=function(){return this._suspended=(this._suspended||0)+1,this},e.prototype.resume=function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},e.prototype._observerField=function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)},e}(el);const mc=gc;function yc(t){return function(e){return this[t]!==e&&(this[t]=e,this.geometryChange()),this}}function vc(t){return function(){return this[t]}}const bc=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.charAt(0).toUpperCase()+n.substring(1,n.length);t["set"+r]=yc(n),t["get"+r]=vc(n)}}(i.prototype,e),i};function wc(t){return t&&"function"==typeof t.matrix?t.matrix():t}var xc=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.x===this.x&&t.y===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(t,i){var n=e.create(i)||e.ZERO;return this.transform(nl.rotate(t,n.x,n.y))},e.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this},e.prototype.translateWith=function(t){return this.translate(t.x,t.y)},e.prototype.move=function(t,e){return this.x=this.y=0,this.translate(t,e)},e.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this.geometryChange(),this},e.prototype.scaleCopy=function(t,e){return this.clone().scale(t,e)},e.prototype.transform=function(t){var e=wc(t),i=this.x,n=this.y;return this.x=e.a*i+e.c*n+e.e,this.y=e.b*i+e.d*n+e.f,this.geometryChange(),this},e.prototype.transformCopy=function(t){var e=this.clone();return t&&e.transform(t),e},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.prototype.round=function(t){return this.x=fa(this.x,t),this.y=fa(this.y,t),this.geometryChange(),this},e.prototype.toArray=function(t){var e=zo(t);return[e?fa(this.x,t):this.x,e?fa(this.y,t):this.y]},e.prototype.toString=function(t,e){void 0===e&&(e=" ");var i=this.x,n=this.y;return zo(t)&&(i=fa(i,t),n=fa(n,t)),i+e+n},e.create=function(t,i){if(zo(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},e.min=function(){for(var t=arguments,i=Ia,n=Ia,r=0;r<arguments.length;r++){var s=t[r];i=Math.min(s.x,i),n=Math.min(s.y,n)}return new e(i,n)},e.max=function(){for(var t=arguments,i=Fa,n=Fa,r=0;r<arguments.length;r++){var s=t[r];i=Math.max(s.x,i),n=Math.max(s.y,n)}return new e(i,n)},e.minPoint=function(){return new e(Fa,Fa)},e.maxPoint=function(){return new e(Ia,Ia)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(bc(mc,["x","y"]));const Sc=xc;var kc=function(t){function e(e,i){t.call(this),this.width=e||0,this.height=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.width===this.width&&t.height===this.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toArray=function(t){var e=zo(t);return[e?fa(this.width,t):this.width,e?fa(this.height,t):this.height]},e.create=function(t,i){if(zo(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(bc(mc,["width","height"]));const Cc=kc;var Ac=function(t){function e(e,i,n){void 0===e&&(e=new Sc),void 0===i&&(i=new Cc),void 0===n&&(n=0),t.call(this),this.setOrigin(e),this.setSize(i),this.setCornerRadius(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.origin.clone(),this.size.clone())},e.prototype.equals=function(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)},e.prototype.setOrigin=function(t){return this._observerField("origin",Sc.create(t)),this.geometryChange(),this},e.prototype.getOrigin=function(){return this.origin},e.prototype.setCornerRadius=function(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this},e.prototype.getCornerRadius=function(){return this.cornerRadius},e.prototype.setSize=function(t){return this._observerField("size",Cc.create(t)),this.geometryChange(),this},e.prototype.getSize=function(){return this.size},e.prototype.width=function(){return this.size.width},e.prototype.height=function(){return this.size.height},e.prototype.topLeft=function(){return this.origin.clone()},e.prototype.bottomRight=function(){return this.origin.clone().translate(this.width(),this.height())},e.prototype.topRight=function(){return this.origin.clone().translate(this.width(),0)},e.prototype.bottomLeft=function(){return this.origin.clone().translate(0,this.height())},e.prototype.center=function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},e.prototype.bbox=function(t){var i=this.topLeft().transformCopy(t),n=this.topRight().transformCopy(t),r=this.bottomRight().transformCopy(t),s=this.bottomLeft().transformCopy(t);return e.fromPoints(i,n,r,s)},e.prototype.transformCopy=function(t){return e.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))},e.prototype.expand=function(t,e){return void 0===e&&(e=t),this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this},e.prototype.expandCopy=function(t,e){return this.clone().expand(t,e)},e.prototype.containsPoint=function(t){var e=this.origin,i=this.bottomRight();return!(t.x<e.x||t.y<e.y||i.x<t.x||i.y<t.y)},e.prototype._isOnPath=function(t,e){var i=this.expandCopy(e,e),n=this.expandCopy(-e,-e);return i.containsPoint(t)&&!n.containsPoint(t)},e.fromPoints=function(){var t=Sc.min.apply(null,arguments),i=Sc.max.apply(null,arguments),n=new Cc(i.x-t.x,i.y-t.y);return new e(t,n)},e.union=function(t,i){return e.fromPoints(Sc.min(t.topLeft(),i.topLeft()),Sc.max(t.bottomRight(),i.bottomRight()))},e.intersect=function(t,i){var n={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},r={left:i.topLeft().x,top:i.topLeft().y,right:i.bottomRight().x,bottom:i.bottomRight().y};if(n.left<=r.right&&r.left<=n.right&&n.top<=r.bottom&&r.top<=n.bottom)return e.fromPoints(new Sc(Math.max(n.left,r.left),Math.max(n.top,r.top)),new Sc(Math.min(n.right,r.right),Math.min(n.bottom,r.bottom)))},e}(mc);const _c=Ac;var Tc=function(t){function e(e,i,n,r){t.call(this),this.x1=e||0,this.y1=i||0,this.x2=n||0,this.y2=r||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.equals=function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},e.prototype.width=function(){return this.x2-this.x1},e.prototype.height=function(){return this.y2-this.y1},e.prototype.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},e.prototype.move=function(t,e){var i=this.height(),n=this.width();return xl(t)&&(this.x1=t,this.x2=this.x1+n),xl(e)&&(this.y1=e,this.y2=this.y1+i),this},e.prototype.wrap=function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},e.prototype.wrapPoint=function(t){var i=No(t),n=i?t[0]:t.x,r=i?t[1]:t.y;return this.wrap(new e(n,r,n,r)),this},e.prototype.snapTo=function(t,e){return e!==Ro&&e||(this.x1=t.x1,this.x2=t.x2),e!==Lo&&e||(this.y1=t.y1,this.y2=t.y2),this},e.prototype.alignTo=function(t,e){var i=this.height(),n=this.width(),r=e===Po||e===uo?Lo:Ro,s=r===Lo?i:n;if(e===po){var o=t.center(),a=this.center();this.x1+=o.x-a.x,this.y1+=o.y-a.y}else this[r+1]=e===Po||e===So?t[r+1]-s:t[r+2];return this.x2=this.x1+n,this.y2=this.y1+i,this},e.prototype.shrink=function(t,e){return this.x2-=t,this.y2-=e,this},e.prototype.expand=function(t,e){return this.shrink(-t,-e),this},e.prototype.pad=function(t){var e=ea(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},e.prototype.unpad=function(t){var e=ea(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},e.prototype.clone=function(){return new e(this.x1,this.y1,this.x2,this.y2)},e.prototype.center=function(){return new fc(this.x1+this.width()/2,this.y1+this.height()/2)},e.prototype.containsPoint=function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},e.prototype.points=function(){return[new fc(this.x1,this.y1),new fc(this.x2,this.y1),new fc(this.x2,this.y2),new fc(this.x1,this.y2)]},e.prototype.getHash=function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},e.prototype.overlaps=function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},e.prototype.rotate=function(t){var e=this.width(),i=this.height(),n=this.center(),r=n.x,s=n.y,o=Oc(0,0,r,s,t),a=Oc(e,0,r,s,t),l=Oc(e,i,r,s,t),c=Oc(0,i,r,s,t);return e=Math.max(o.x,a.x,l.x,c.x)-Math.min(o.x,a.x,l.x,c.x),i=Math.max(o.y,a.y,l.y,c.y)-Math.min(o.y,a.y,l.y,c.y),this.x2=this.x1+e,this.y2=this.y1+i,this},e.prototype.toRect=function(){return new _c([this.x1,this.y1],[this.width(),this.height()])},e.prototype.hasSize=function(){return 0!==this.width()&&0!==this.height()},e.prototype.align=function(t,e,i){var n=e+1,r=e+2,s=e===Ro?Do:wo,o=this[s]();da(i,[So,Po])?(this[n]=t[n],this[r]=this[n]+o):da(i,[Oo,uo])?(this[r]=t[r],this[n]=this[r]-o):i===po&&(this[n]=t[n]+(t[s]()-o)/2,this[r]=this[n]+o)},e}(el);function Oc(t,e,i,n,r){var s=Pl(r);return new fc(i+(t-i)*Math.cos(s)+(e-n)*Math.sin(s),n-(t-i)*Math.sin(s)+(e-n)*Math.cos(s))}const Ec=Tc;var Mc=function(t){function e(e,i,n,r,s){t.call(this),this.center=e,this.innerRadius=i,this.radius=n,this.startAngle=r,this.angle=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},e.prototype.middle=function(){return this.startAngle+this.angle/2},e.prototype.setRadius=function(t,e){return e?this.innerRadius=t:this.radius=t,this},e.prototype.point=function(t,e){var i=Pl(t),n=Math.cos(i),r=Math.sin(i),s=e?this.innerRadius:this.radius,o=Il(this.center.x-n*s,3),a=Il(this.center.y-r*s,3);return new fc(o,a)},e.prototype.adjacentBox=function(t,e,i){var n=this.clone().expand(t),r=n.middle(),s=n.point(r),o=e/2,a=i/2,l=Math.sin(Pl(r)),c=Math.cos(Pl(r)),h=s.x-o,u=s.y-a;return Math.abs(l)<.9&&(h+=o*-c/Math.abs(c)),Math.abs(c)<.9&&(u+=a*-l/Math.abs(l)),new Ec(h,u,h+e,u+i)},e.prototype.containsPoint=function(t){var e=this.center,i=this.innerRadius,n=this.radius,r=this.startAngle,s=this.startAngle+this.angle,o=t.x-e.x,a=t.y-e.y,l=new fc(o,a),c=this.point(r),h=new fc(c.x-e.x,c.y-e.y),u=this.point(s),p=new fc(u.x-e.x,u.y-e.y),d=Il(o*o+a*a,3);return(h.equals(l)||$o(h,l))&&!$o(p,l)&&d>=i*i&&d<=n*n},e.prototype.getBBox=function(){var t,e=new Ec(ko,ko,Co,Co),i=Il(this.startAngle%360),n=Il((i+this.angle)%360),r=this.innerRadius,s=[0,90,180,270,i,n].sort(Pc),o=s.indexOf(i),a=s.indexOf(n);t=i===n?s:o<a?s.slice(o,a+1):[].concat(s.slice(0,a+1),s.slice(o,s.length));for(var l=0;l<t.length;l++){var c=this.point(t[l]);e.wrapPoint(c),e.wrapPoint(c,r)}return r||e.wrapPoint(this.center),e},e.prototype.expand=function(t){return this.radius+=t,this},e}(el);function Pc(t,e){return t-e}const Ic=Mc;!function(t){function e(e,i,n,r){t.call(this,e,0,i,n,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expand=function(e){return t.prototype.expand.call(this,e)},e.prototype.clone=function(){return new e(this.center,this.radius,this.startAngle,this.angle)},e.prototype.setRadius=function(t){return this.radius=t,this}}(Ic);var Fc=10;function Dc(t,e,i){return void 0===i&&(i=Fc),0===fa(Math.abs(t-e),i)}function Rc(t,e,i){return t<e||Dc(t,e,i)}function Lc(t,e,i,n){var r=0,s=0;return n&&(r=Math.atan2(n.c*i,n.a*e),0!==n.b&&(s=Math.atan2(n.d*i,n.b*e))),{x:r,y:s}}var Nc=function(t){function e(e){void 0===e&&(e=nl.unit()),t.call(this),this._matrix=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this._matrix.clone())},e.prototype.equals=function(t){return t&&t._matrix.equals(this._matrix)},e.prototype.translate=function(t,e){return this._matrix=this._matrix.multiplyCopy(nl.translate(t,e)),this._optionsChange(),this},e.prototype.scale=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=null);var n=i;return n&&(n=Sc.create(n),this._matrix=this._matrix.multiplyCopy(nl.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(nl.scale(t,e)),n&&(this._matrix=this._matrix.multiplyCopy(nl.translate(-n.x,-n.y))),this._optionsChange(),this},e.prototype.rotate=function(t,e){var i=Sc.create(e)||Sc.ZERO;return this._matrix=this._matrix.multiplyCopy(nl.rotate(t,i.x,i.y)),this._optionsChange(),this},e.prototype.multiply=function(t){var e=wc(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this},e.prototype.matrix=function(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix},e.prototype._optionsChange=function(){this.optionsChange({field:"transform",value:this})},e}(mc);const Bc=Nc;function jc(t){return null===t?null:t instanceof Bc?t:new Bc(t)}var zc=Math.pow,Uc=function(t){function e(e,i){void 0===e&&(e=new Sc),void 0===i&&(i={}),t.call(this),this.setCenter(e),this.radiusX=i.radiusX,this.radiusY=i.radiusY||i.radiusX,this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.anticlockwise=i.anticlockwise||!1,this.xRotation=i.xRotation}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},e.prototype.setCenter=function(t){return this._observerField("center",Sc.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.pointAt=function(t){var e=this.center,i=Wa(t);return new Sc(e.x+this.radiusX*Math.cos(i),e.y+this.radiusY*Math.sin(i))},e.prototype.curvePoints=function(){var t,e=this.startAngle,i=this.anticlockwise?-1:1,n=[this.pointAt(e)],r=this._arcInterval(),s=r.endAngle-r.startAngle,o=Math.ceil(s/45),a=s/o,l=e;this.xRotation&&(t=jc().rotate(this.xRotation,this.center));for(var c=1;c<=o;c++){var h=l+i*a,u=this._intervalCurvePoints(l,h,t);n.push(u.cp1,u.cp2,u.p2),l=h}return n},e.prototype.bbox=function(t){for(var e=this._arcInterval(),i=e.startAngle,n=e.endAngle,r=Lc(this.center,this.radiusX,this.radiusY,t),s=Da(r.x),o=Da(r.y),a=this.pointAt(n).transformCopy(t),l=Hc(s,i),c=Hc(o,i),h=this.pointAt(i).transformCopy(t),u=Sc.min(h,a),p=Sc.max(h,a);l<n||c<n;){var d=void 0;l<n&&(d=this.pointAt(l).transformCopy(t),l+=90);var f=void 0;c<n&&(f=this.pointAt(c).transformCopy(t),c+=90),h=new Sc(d.x,f.y),u=Sc.min(u,h),p=Sc.max(p,h)}return _c.fromPoints(u,p)},e.prototype._arcInterval=function(){var t=this,e=t.startAngle,i=t.endAngle,n=t.anticlockwise;if(n){var r=e;e=i,i=r}return(e>i||n&&e===i)&&(i+=360),{startAngle:e,endAngle:i}},e.prototype._intervalCurvePoints=function(t,e,i){var n=this.pointAt(t),r=this.pointAt(e),s=this._derivativeAt(t),o=this._derivativeAt(e),a=(Wa(e)-Wa(t))/3,l=new Sc(n.x+a*s.x,n.y+a*s.y),c=new Sc(r.x-a*o.x,r.y-a*o.y);return i&&(n.transform(i),r.transform(i),l.transform(i),c.transform(i)),{p1:n,cp1:l,cp2:c,p2:r}},e.prototype._derivativeAt=function(t){var e=Wa(t);return new Sc(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))},e.prototype.containsPoint=function(t){var e,i=this._arcInterval(),n=i.endAngle-i.startAngle,r=this,s=r.center,o=r.radiusX,a=r.radiusY,l=s.distanceTo(t),c=Math.atan2(t.y-s.y,t.x-s.x),h=o*a/Math.sqrt(zc(o,2)*zc(Math.sin(c),2)+zc(a,2)*zc(Math.cos(c),2)),u=this.pointAt(this.startAngle).round(Fc),p=this.pointAt(this.endAngle).round(Fc),d=function(t,e,i,n){var r=e.x-t.x,s=n.x-i.x,o=e.y-t.y,a=n.y-i.y,l=t.x-i.x,c=t.y-i.y,h=r*a-s*o,u=(r*c-o*l)/h,p=(s*c-a*l)/h;if(u>=0&&u<=1&&p>=0&&p<=1)return new Sc(t.x+p*r,t.y+p*o)}(s,t.round(Fc),u,p);if(n<180)e=d&&Rc(s.distanceTo(d),l)&&Rc(l,h);else{var f=$c(s.x,s.y,o,a,t.x,t.y);360!==f&&(f=(360+f)%360);var g=i.startAngle<=f&&f<=i.endAngle;e=g&&Rc(l,h)||!g&&(!d||d.equals(t))}return e},e.prototype._isOnPath=function(t,e){var i=this._arcInterval(),n=this.center,r=$c(n.x,n.y,this.radiusX,this.radiusY,t.x,t.y);return 360!==r&&(r=(360+r)%360),i.startAngle<=r&&r<=i.endAngle&&this.pointAt(r).distanceTo(t)<=e},e.fromPoints=function(t,i,n,r,s,o,a){var l=function(t){var e=t.x1,i=t.y1,n=t.x2,r=t.y2,s=t.rx,o=t.ry,a=t.largeArc,l=t.swipe,c=t.rotation;void 0===c&&(c=0);var h=Wa(c),u=Math.cos(h),p=Math.sin(h),d=u*(e-n)/2+p*(i-r)/2,f=-p*(e-n)/2+u*(i-r)/2,g=a!==l?1:-1,m=Math.pow(d,2),y=Math.pow(f,2),v=Math.pow(s,2),b=Math.pow(o,2),w=m/v+y/b;w>1&&(s*=w=Math.sqrt(m/v+y/b),v=Math.pow(s,2),o*=w,b=Math.pow(o,2));var x=g*Math.sqrt((v*b-v*y-b*m)/(v*y+b*m));isNaN(x)&&(x=0);var S=x*(s*f)/o,k=o*d*-x/s,C=u*S-p*k+(e+n)/2,A=p*S+u*k+(i+r)/2,_=(d-S)/s,T=(f-k)/o,O=-(d+S)/s,E=-(f+k)/o,M=(T>=0?1:-1)*Da(Math.acos(_/Math.sqrt(_*_+T*T))),P=fa((_*O+T*E)/(Math.sqrt(_*_+T*T)*Math.sqrt(O*O+E*E)),10),I=(_*E-T*O>=0?1:-1)*Da(Math.acos(P));!l&&I>0&&(I-=360);l&&I<0&&(I+=360);var F=M+I,D=F>=0?1:-1;return F=Math.abs(F)%360*D,{center:new Sc(C,A),startAngle:M,endAngle:F,radiusX:s,radiusY:o,xRotation:c}}({x1:t.x,y1:t.y,x2:i.x,y2:i.y,rx:n,ry:r,largeArc:s,swipe:o,rotation:a});return new e(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:0===o})},e}(bc(mc,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]));function $c(t,e,i,n,r,s){var o=fa((r-t)/i,3),a=fa((s-e)/n,3);return fa(Da(Math.atan2(a,o)))}function Hc(t,e){for(var i=t;i<e;)i+=90;return i}const Vc=Uc;var qc=[].push,Wc=[].pop,Xc=[].splice,Gc=[].shift,Kc=[].slice,Yc=[].unshift,Jc=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.length=0,this._splice(0,e.length,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.elements=function(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)},e.prototype.push=function(){var t=arguments,e=qc.apply(this,t);return this._add(t),e},e.prototype.slice=function(){return Kc.call(this)},e.prototype.pop=function(){var t=this.length,e=Wc.apply(this);return t&&this._remove([e]),e},e.prototype.splice=function(t,e){var i=Kc.call(arguments,2),n=this._splice(t,e,i);return this._change(),n},e.prototype.shift=function(){var t=this.length,e=Gc.apply(this);return t&&this._remove([e]),e},e.prototype.unshift=function(){var t=arguments,e=Yc.apply(this,t);return this._add(t),e},e.prototype.indexOf=function(t){for(var e=this.length,i=0;i<e;i++)if(this[i]===t)return i;return-1},e.prototype._splice=function(t,e,i){var n=Xc.apply(this,[t,e].concat(i));return this._clearObserver(n),this._setObserver(i),n},e.prototype._add=function(t){this._setObserver(t),this._change()},e.prototype._remove=function(t){this._clearObserver(t),this._change()},e.prototype._setObserver=function(t){for(var e=0;e<t.length;e++)t[e].addObserver(this)},e.prototype._clearObserver=function(t){for(var e=0;e<t.length;e++)t[e].removeObserver(this)},e.prototype._change=function(){},e}(mc);const Zc=Jc;var Qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.geometryChange()},e}(Zc);const th=Qc;var eh={}.toString,ih=function(t){function e(e,i){for(var n in void 0===i&&(i=""),t.call(this),this.prefix=i,e){var r=e[n];r=this._wrap(r,n),this[n]=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){for(var e=t.split("."),i=this;e.length&&i;){i=i[e.shift()]}return i},e.prototype.set=function(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))},e.prototype._set=function(t,i){var n=t.indexOf(".")>=0,r=this,s=t;if(n){for(var o=s.split("."),a=this.prefix;o.length>1;){a+=(s=o.shift())+".";var l=r[s];l||((l=new e({},a)).addObserver(this),r[s]=l),r=l}s=o[0]}r._clear(s),r[s]=i},e.prototype._clear=function(t){var e=this[t];e&&e.removeObserver&&e.removeObserver(this)},e.prototype._wrap=function(t,i){var n=eh.call(t),r=t;return null!==r&&zo(r)&&"[object Object]"===n&&(t instanceof e||t instanceof el||(r=new e(r,this.prefix+i+".")),r.addObserver(this)),r},e}(mc);const nh=ih;var rh=function(t){function e(e){t.call(this),this._initOptions(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Rect"},e.prototype._initOptions=function(t){void 0===t&&(t={});var e=t.clip,i=t.transform;i&&(t.transform=jc(i)),e&&!e.id&&(e.id=Ma()),this.options=new nh(t),this.options.addObserver(this)},e.prototype.transform=function(t){if(!zo(t))return this.options.get("transform");this.options.set("transform",jc(t))},e.prototype.parentTransform=function(){for(var t,e=this;e.parent;){var i=(e=e.parent).transform();i&&(t=i.matrix().multiplyCopy(t||nl.unit()))}if(t)return jc(t)},e.prototype.currentTransform=function(t){void 0===t&&(t=this.parentTransform());var e,i=wc(this.transform()),n=wc(t);if(e=i&&n?n.multiplyCopy(i):i||n)return jc(e)},e.prototype.visible=function(t){return zo(t)?(this.options.set("visible",t),this):!1!==this.options.get("visible")},e.prototype.clip=function(t){var e=this.options;return zo(t)?(t&&!t.id&&(t.id=Ma()),e.set("clip",t),this):e.get("clip")},e.prototype.opacity=function(t){return zo(t)?(this.options.set("opacity",t),this):Xa(this.options.get("opacity"),1)},e.prototype.clippedBBox=function(t){var e=this._clippedBBox(t);if(e){var i=this.clip();return i?_c.intersect(e,i.bbox(t)):e}},e.prototype.containsPoint=function(t,e){if(this.visible()){var i=this.currentTransform(e),n=t;return i&&(n=t.transformCopy(i.matrix().invert())),this._hasFill()&&this._containsPoint(n)||this._isOnPath&&this._hasStroke()&&this._isOnPath(n)}return!1},e.prototype._hasFill=function(){var t=this.options.fill;return t&&!za(t.color)},e.prototype._hasStroke=function(){var t=this.options.stroke;return t&&t.width>0&&!za(t.color)},e.prototype._clippedBBox=function(t){return this.bbox(t)},Object.defineProperties(e.prototype,i),e}(mc);const sh=rh;function oh(t,e,i){var n=Da(Math.atan2(e.y-t.y,e.x-t.x));return i.transformCopy(jc().rotate(-n,t)).x<t.x}function ah(t,e,i){var n=1-t;return Math.pow(n,3)*i[0][e]+3*Math.pow(n,2)*t*i[1][e]+3*Math.pow(t,2)*n*i[2][e]+Math.pow(t,3)*i[3][e]}function lh(t,e){return[-t[0][e]+3*t[1][e]-3*t[2][e]+t[3][e],3*(t[0][e]-2*t[1][e]+t[2][e]),3*(-t[0][e]+t[1][e]),t[0][e]]}var ch=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.real=e,this.img=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return new e(fa(this.real+t.real,Fc),fa(this.img+t.img,Fc))},e.prototype.addConstant=function(t){return new e(this.real+t,this.img)},e.prototype.negate=function(){return new e(-this.real,-this.img)},e.prototype.multiply=function(t){return new e(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)},e.prototype.multiplyConstant=function(t){return new e(this.real*t,this.img*t)},e.prototype.nthRoot=function(t){var i=Math.atan2(this.img,this.real),n=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),r=Math.pow(n,1/t);return new e(r*Math.cos(i/t),r*Math.sin(i/t))},e.prototype.equals=function(t){return this.real===t.real&&this.img===t.img},e.prototype.isReal=function(){return 0===this.img},e}(el);const hh=ch;function uh(t){return t<0?-1:1}function ph(t,e,i,n){if(0===t)return function(t,e,i){var n=Math.sqrt(Math.pow(e,2)-4*t*i);return[(-e+n)/(2*t),(-e-n)/(2*t)]}(e,i,n);var r,s,o,a,l,c,h,u=(3*t*i-Math.pow(e,2))/(3*Math.pow(t,2)),p=(2*Math.pow(e,3)-9*t*e*i+27*Math.pow(t,2)*n)/(27*Math.pow(t,3)),d=Math.pow(u/3,3)+Math.pow(p/2,2),f=new hh(0,1),g=-e/(3*t);d<0?(r=new hh(-p/2,Math.sqrt(-d)).nthRoot(3),s=new hh(-p/2,-Math.sqrt(-d)).nthRoot(3)):(r=-p/2+Math.sqrt(d),r=new hh(uh(r)*Math.pow(Math.abs(r),1/3)),s=-p/2-Math.sqrt(d),s=new hh(uh(s)*Math.pow(Math.abs(s),1/3))),o=r.add(s),c=r.add(s).multiplyConstant(-.5),h=r.add(s.negate()).multiplyConstant(Math.sqrt(3)/2),a=c.add(f.multiply(h)),l=c.add(f.negate().multiply(h));var m=[];return o.isReal()&&m.push(fa(o.real+g,Fc)),a.isReal()&&m.push(fa(a.real+g,Fc)),l.isReal()&&m.push(fa(l.real+g,Fc)),m}function dh(t,e,i,n,r){for(var s,o=lh(t,n),a=ph(o[0],o[1],o[2],o[3]-e[n]),l=0;l<a.length;l++)if(0<=a[l]&&a[l]<=1&&(s=ah(a[l],i,t),Math.abs(s-e[i])<=r))return!0}function fh(t,e,i){var n;if(t.x!==e.x){var r=Math.min(t.x,e.x),s=Math.max(t.x,e.x),o=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=r<=i.x&&i.x<s;n=o===a?i.y<=o&&l:l&&(a-o)*((t.x-e.x)*(t.y-e.y)>0?i.x-r:s-i.x)/(s-r)+o-i.y>=0}return n?1:0}function gh(t){var e="_"+t;return function(t){return zo(t)?(this._observerField(e,Sc.create(t)),this.geometryChange(),this):this[e]}}const mh=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=gh(e[i])}(i.prototype,e),i};var yh=function(t){function e(e,i,n){t.call(this),this.anchor(e||new Sc),this.controlIn(i),this.controlOut(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bboxTo=function(t,e){var i=this.anchor().transformCopy(e),n=t.anchor().transformCopy(e);return this.controlOut()&&t.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),n):this._lineBoundingBox(i,n)},e.prototype._lineBoundingBox=function(t,e){return _c.fromPoints(t,e)},e.prototype._curveBoundingBox=function(t,e,i,n){var r=[t,e,i,n],s=this._curveExtremesFor(r,"x"),o=this._curveExtremesFor(r,"y"),a=vh([s.min,s.max,t.x,n.x]),l=vh([o.min,o.max,t.y,n.y]);return _c.fromPoints(new Sc(a.min,l.min),new Sc(a.max,l.max))},e.prototype._curveExtremesFor=function(t,e){var i=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:ah(i.min,e,t),max:ah(i.max,e,t)}},e.prototype._curveExtremes=function(t,e,i,n){var r=t-3*e+3*i-n,s=-2*(t-2*e+i),o=t-e,a=Math.sqrt(s*s-4*r*o),l=0,c=1;0===r?0!==s&&(l=c=-o/s):isNaN(a)||(l=(-s+a)/(2*r),c=(-s-a)/(2*r));var h=Math.max(Math.min(l,c),0);(h<0||h>1)&&(h=0);var u=Math.min(Math.max(l,c),1);return(u>1||u<0)&&(u=1),{min:h,max:u}},e.prototype._intersectionsTo=function(t,e){var i;return i=this.controlOut()&&t.controlIn()?function(t,e,i){for(var n,r=lh(t,"x"),s=ph(r[0],r[1],r[2],r[3]-e.x),o=0,a=0;a<s.length;a++)(Dc(n=ah(s[a],"y",t),e.y)||n>e.y)&&((0===s[a]||1===s[a])&&i.bottomRight().x>e.x||0<s[a]&&s[a]<1)&&o++;return o}([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):fh(this.anchor(),t.anchor(),e),i},e.prototype._isOnCurveTo=function(t,e,i,n){if(this.bboxTo(t).expand(i,i).containsPoint(e)){var r=this.anchor(),s=this.controlOut(),o=t.controlIn(),a=t.anchor();if("start"===n&&r.distanceTo(e)<=i)return!oh(r,s,e);if("end"===n&&a.distanceTo(e)<=i)return!oh(a,o,e);var l=[r,s,o,a];if(dh(l,e,"x","y",i)||dh(l,e,"y","x",i))return!0;var c=jc().rotate(45,e),h=[r.transformCopy(c),s.transformCopy(c),o.transformCopy(c),a.transformCopy(c)];return dh(h,e,"x","y",i)||dh(h,e,"y","x",i)}},e.prototype._isOnLineTo=function(t,e,i){var n=this.anchor(),r=t.anchor(),s=Da(Math.atan2(r.y-n.y,r.x-n.x));return new _c([n.x,n.y-i/2],[n.distanceTo(r),i]).containsPoint(e.transformCopy(jc().rotate(-s,n)))},e.prototype._isOnPathTo=function(t,e,i,n){return this.controlOut()&&t.controlIn()?this._isOnCurveTo(t,e,i/2,n):this._isOnLineTo(t,e,i)},e}(mh(mc,["anchor","controlIn","controlOut"]));function vh(t){for(var e=t.length,i=Ia,n=Fa,r=0;r<e;r++)n=Math.max(n,t[r]),i=Math.min(i,t[r]);return{min:i,max:n}}const bh=yh;var wh="x",xh="y";function Sh(t,e){var i=t.slice(0),n=[],r=i.length;if(r>2&&(kh(0,i),r=i.length),r<2||2===r&&i[0].equals(i[1]))return n;var s,o,a=i[0],l=i[1],c=i[2];for(n.push(new bh(a));a.equals(i[r-1]);)e=!0,i.pop(),r--;if(2===r){var h=Th(a,l,wh,xh);return Ua(n).controlOut(Eh(h,a,l,wh,xh)),n.push(new bh(l,Mh(h,a,l,wh,xh))),n}if(e){var u=Ah(a=i[r-1],l=i[0],c=i[1]);s=u[1],o=u[0]}else{s=Eh(Th(a,l,wh,xh),a,l,wh,xh)}for(var p=s,d=0;d<=r-3;d++)if(kh(d,i),d+3<=(r=i.length)){var f=Ah(a=i[d],l=i[d+1],c=i[d+2]);Ua(n).controlOut(p),p=f[1];var g=f[0];n.push(new bh(l,g))}if(e){var m=Ah(a=i[r-2],l=i[r-1],c=i[0]);Ua(n).controlOut(p),n.push(new bh(l,m[0])),Ua(n).controlOut(m[1]),n.push(new bh(c,o))}else{var y=Th(l,c,wh,xh);Ua(n).controlOut(p),n.push(new bh(c,Mh(y,l,c,wh,xh)))}return n}function kh(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}function Ch(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]}function Ah(t,e,i){var n,r=wh,s=xh,o=!1,a=!1;if(function(t,e,i){var n=Ih(Ch(t,e),i.x);return t.x===e.x&&e.x===i.x||fa(n,1)===fa(i.y,1)}(t,e,i))n=Th(t,e,wh,xh);else{var l={x:Oh(t,e,i,wh),y:Oh(t,e,i,xh)};if(l.x&&l.y)n=Th(t,i,wh,xh),o=!0;else if(function(t,e,i){var n=!1;if(t.x===e.x)n=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(n=!0);else{var r=Ih(Ch(t,e),i.x);t.y<=e.y&&i.y<=r||e.y<=t.y&&i.y>=r||(n=!0)}return n}(t,e,i)&&(r=xh,s=wh),l[r])n=0;else n=.01*(i[s]<t[s]&&t[s]<=e[s]||t[s]<i[s]&&e[s]<=t[s]?Fh((i[s]-t[s])*(e[r]-t[r])):-Fh((i[r]-t[r])*(e[s]-t[s]))),a=!0}var c=Mh(n,t,e,r,s);if(a){var h=r;r=s,s=h}var u=Eh(n,e,i,r,s);return o&&(_h(t,e,c,n),_h(e,i,u,n)),[c,u]}function _h(t,e,i,n){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/n,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/n,i.y=t.y)}function Th(t,e,i,n){var r=e[i]-t[i],s=e[n]-t[n];return 0===r?0:s/r}function Oh(t,e,i,n){return i[n]>e[n]&&e[n]>t[n]||i[n]<e[n]&&e[n]<t[n]}function Eh(t,e,i,n,r){var s=e[n],o=.333*(i[n]-s);return Ph(s+o,e[r]+o*t,n,r)}function Mh(t,e,i,n,r){var s=e[n],o=i[n],a=.333*(o-s);return Ph(o-a,i[r]-a*t,n,r)}function Ph(t,e,i,n){var r=new Sc;return r[i]=t,r[n]=e,r}function Ih(t,e){for(var i=t.length,n=0,r=0;r<i;r++)n+=Math.pow(e,r)*t[r];return n}function Fh(t){return t<=0?-1:1}const Dh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fill=function(t,e){var i=this.options;if(zo(t)){if(t&&"Gradient"!==t.nodeType){var n={color:t};zo(e)&&(n.opacity=e),i.set("fill",n)}else i.set("fill",t);return this}return i.get("fill")},e.prototype.stroke=function(t,e,i){return zo(t)?(this.options.set("stroke.color",t),zo(e)&&this.options.set("stroke.width",e),zo(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")},e}(t)};var Rh=nl.IDENTITY.toString();const Lh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bbox=function(t){var e,i=wc(this.currentTransform(t)),n=i?i.toString():Rh;this._bboxCache&&this._matrixHash===n?e=this._bboxCache.clone():(e=this._bbox(i),this._bboxCache=e?e.clone():null,this._matrixHash=n);var r=this.options.get("stroke.width");return r&&e&&e.expand(r/2),e},e.prototype.geometryChange=function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})},e}(t)};var Nh={l:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=2){var s=new Sc(i[r],i[r+1]);e.isRelative&&s.translateWith(n),t.lineTo(s.x,s.y),n.x=s.x,n.y=s.y}},c:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=6){var s=new Sc(i[r],i[r+1]),o=new Sc(i[r+2],i[r+3]),a=new Sc(i[r+4],i[r+5]);e.isRelative&&(o.translateWith(n),s.translateWith(n),a.translateWith(n)),t.curveTo(s,o,a),n.x=a.x,n.y=a.y}},v:function(t,e){var i=e.isRelative?0:e.position.x;Bh(e.parameters,!0,i),this.l(t,e)},h:function(t,e){var i=e.isRelative?0:e.position.y;Bh(e.parameters,!1,i),this.l(t,e)},a:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=7){var s=i[r],o=i[r+1],a=i[r+2],l=i[r+3],c=i[r+4],h=new Sc(i[r+5],i[r+6]);e.isRelative&&h.translateWith(n),n.x===h.x&&n.y===h.y||(t.arcTo(h,s,o,l,c,a),n.x=h.x,n.y=h.y)}},s:function(t,e){var i,n=e.parameters,r=e.position,s=e.previousCommand;"s"!==s&&"c"!==s||(i=Ua(Ua(t.paths).segments).controlIn());for(var o=0;o<n.length;o+=4){var a=new Sc(n[o],n[o+1]),l=new Sc(n[o+2],n[o+3]),c=void 0;e.isRelative&&(a.translateWith(r),l.translateWith(r)),c=i?jh(i,r):r.clone(),i=a,t.curveTo(c,a,l),r.x=l.x,r.y=l.y}},q:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=4){var s=new Sc(i[r],i[r+1]),o=new Sc(i[r+2],i[r+3]);e.isRelative&&(s.translateWith(n),o.translateWith(n));var a=Uh(n,s,o);t.curveTo(a.controlOut,a.controlIn,o),n.x=o.x,n.y=o.y}},t:function(t,e){var i,n=e.parameters,r=e.position,s=e.previousCommand;"q"!==s&&"t"!==s||(i=Ua(Ua(t.paths).segments).controlIn().clone().translateWith(r.scaleCopy(-1/3)).scale(1.5));for(var o=0;o<n.length;o+=2){var a=new Sc(n[o],n[o+1]);e.isRelative&&a.translateWith(r),i=i?jh(i,r):r.clone();var l=Uh(r,i,a);t.curveTo(l.controlOut,l.controlIn,a),r.x=a.x,r.y=a.y}}};function Bh(t,e,i){for(var n=e?0:1,r=0;r<t.length;r+=2)t.splice(r+n,0,i)}function jh(t,e){if(t&&e)return e.scaleCopy(2).translate(-t.x,-t.y)}var zh=1/3;function Uh(t,e,i){var n=e.clone().scale(2/3);return{controlOut:n.clone().translateWith(t.scaleCopy(zh)),controlIn:n.translateWith(i.scaleCopy(zh))}}const $h=Nh;var Hh=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,Vh=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;const qh=function(t,e){var i,n=new Sc;return e.replace(Hh,(function(e,r,s,o){var a=r.toLowerCase(),l=a===r,c=function(t){var e=[];return t.replace(Vh,(function(t,i){e.push(parseFloat(i))})),e}(s.trim());if("m"===a&&(l?(n.x+=c[0],n.y+=c[1]):(n.x=c[0],n.y=c[1]),t.moveTo(n.x,n.y),c.length>2&&(a="l",c.splice(0,2))),$h[a])$h[a](t,{parameters:c,position:n,isRelative:l,previousCommand:i}),o&&"z"===o.toLowerCase()&&t.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);i=a})),t};function Wh(t,e,i){for(var n,r=0;r<t.length;r++){var s=t[r];if(s.visible()){var o=e?s.bbox(i):s.rawBBox();o&&(n=n?_c.union(n,o):o)}}return n}function Xh(t,e){for(var i,n=0;n<t.length;n++){var r=t[n];if(r.visible()){var s=r.clippedBBox(e);s&&(i=i?_c.union(i,s):s)}}return i}var Gh=" ",Kh=function(t){function e(e){t.call(this,e),this.segments=new th,this.segments.addObserver(this),zo(this.options.stroke)||(this.stroke("#000"),zo(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Path"},e.prototype.moveTo=function(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this},e.prototype.lineTo=function(t,e){var i=zo(e)?new Sc(t,e):t,n=new bh(i);return this.segments.push(n),this},e.prototype.curveTo=function(t,e,i){if(this.segments.length>0){var n=Ua(this.segments),r=new bh(i,e);this.suspend(),n.controlOut(t),this.resume(),this.segments.push(r)}return this},e.prototype.arc=function(t,e,i,n,r){if(this.segments.length>0){var s=Ua(this.segments).anchor(),o=Wa(t),a=new Sc(s.x-i*Math.cos(o),s.y-n*Math.sin(o)),l=new Vc(a,{startAngle:t,endAngle:e,radiusX:i,radiusY:n,anticlockwise:r});this._addArcSegments(l)}return this},e.prototype.arcTo=function(t,e,i,n,r,s){if(this.segments.length>0){var o=Ua(this.segments).anchor(),a=Vc.fromPoints(o,Sc.create(t),e,i,n,r,s);this._addArcSegments(a)}return this},e.prototype._addArcSegments=function(t){this.suspend();for(var e=t.curvePoints(),i=1;i<e.length;i+=3)this.curveTo(e[i],e[i+1],e[i+2]);this.resume(),this.geometryChange()},e.prototype.close=function(){return this.options.closed=!0,this.geometryChange(),this},e.prototype.rawBBox=function(){return this._bbox()},e.prototype.toString=function(t){var e,i,n,r="",s=this.segments,o=s.length;if(o>0){for(var a,l=[],c=(n=t,function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map((function(t){return t.toString(n)})).join(Gh)}),h=1;h<o;h++){var u=(e=s[h-1],i=s[h],e.controlOut()&&i.controlIn()?"C":"L");u!==a&&(a=u,l.push(u)),"L"===u?l.push(c(s[h].anchor())):l.push(c(s[h-1].controlOut(),s[h].controlIn(),s[h].anchor()))}r="M"+c(s[0].anchor())+Gh+l.join(Gh),this.options.closed&&(r+="Z")}return r},e.prototype._containsPoint=function(t){for(var e,i,n=this.segments,r=n.length,s=0,o=1;o<r;o++)e=n[o-1],i=n[o],s+=e._intersectionsTo(i,t);return!this.options.closed&&n[0].anchor().equals(n[r-1].anchor())||(s+=fh(n[0].anchor(),n[r-1].anchor(),t)),s%2!=0},e.prototype._isOnPath=function(t,e){var i=this.segments,n=i.length,r=e||this.options.stroke.width;if(n>1){if(i[0]._isOnPathTo(i[1],t,r,"start"))return!0;for(var s=2;s<=n-2;s++)if(i[s-1]._isOnPathTo(i[s],t,r))return!0;if(i[n-2]._isOnPathTo(i[n-1],t,r,"end"))return!0}return!1},e.prototype._bbox=function(t){var e,i=this.segments,n=i.length;if(1===n){var r=i[0].anchor().transformCopy(t);e=new _c(r,Cc.ZERO)}else if(n>0)for(var s=1;s<n;s++){var o=i[s-1].bboxTo(i[s],t);e=e?_c.union(e,o):o}return e},e.parse=function(t,e){return Yh.parse(t,e)},e.fromRect=function(t,i){var n=new e(i),r=t.cornerRadius,s=r[0],o=r[1];if(0===s&&0===o)n.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{var a=t.origin,l=a.x,c=a.y,h=t.width(),u=t.height();s=$a(s,0,h/2),o=$a(o,0,u/2),n.moveTo(l+s,c).lineTo(l+h-s,c).arcTo([l+h,c+o],s,o,!1).lineTo(l+h,c+u-o).arcTo([l+h-s,c+u],s,o,!1).lineTo(l+s,c+u).arcTo([l,c+u-o],s,o,!1).lineTo(l,c+o).arcTo([l+s,c],s,o,!1)}return n},e.fromPoints=function(t,i){if(t){for(var n=new e(i),r=0;r<t.length;r++){var s=Sc.create(t[r]);s&&(0===r?n.moveTo(s):n.lineTo(s))}return n}},e.curveFromPoints=function(t,i){if(t){var n=Sh(t),r=new e(i);return r.segments.push.apply(r.segments,n),r}},e.fromArc=function(t,i){var n=new e(i),r=t.startAngle,s=t.pointAt(r);return n.moveTo(s.x,s.y),n.arc(r,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),n},Object.defineProperties(e.prototype,i),e}(Dh(Lh(sh))),Yh=function(t){function e(e){t.call(this,e),this.paths=new th,this.paths.addObserver(this),zo(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,i){var n=new e(i);return qh(n,t)},e.prototype.toString=function(t){var e=this.paths,i="";if(e.length>0){for(var n=[],r=0;r<e.length;r++)n.push(e[r].toString(t));i=n.join(Gh)}return i},i.nodeType.get=function(){return"MultiPath"},e.prototype.moveTo=function(t,e){var i=new Kh;return i.moveTo(t,e),this.paths.push(i),this},e.prototype.lineTo=function(t,e){return this.paths.length>0&&Ua(this.paths).lineTo(t,e),this},e.prototype.curveTo=function(t,e,i){return this.paths.length>0&&Ua(this.paths).curveTo(t,e,i),this},e.prototype.arc=function(t,e,i,n,r){return this.paths.length>0&&Ua(this.paths).arc(t,e,i,n,r),this},e.prototype.arcTo=function(t,e,i,n,r,s){return this.paths.length>0&&Ua(this.paths).arcTo(t,e,i,n,r,s),this},e.prototype.close=function(){return this.paths.length>0&&Ua(this.paths).close(),this},e.prototype._bbox=function(t){return Wh(this.paths,!0,t)},e.prototype.rawBBox=function(){return Wh(this.paths,!1)},e.prototype._containsPoint=function(t){for(var e=this.paths,i=0;i<e.length;i++)if(e[i]._containsPoint(t))return!0;return!1},e.prototype._isOnPath=function(t){for(var e=this.paths,i=this.options.stroke.width,n=0;n<e.length;n++)if(e[n]._isOnPath(t,i))return!0;return!1},e.prototype._clippedBBox=function(t){return Xh(this.paths,this.currentTransform(t))},Object.defineProperties(e.prototype,i),e}(Dh(Lh(sh))),Jh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRing=function(t,e){var i=t.startAngle+180,n=t.angle+i;t.angle>0&&i===n&&(n+=.001);var r=new Sc(t.center.x,t.center.y),s=Math.max(t.radius,0),o=Math.max(t.innerRadius,0),a=new Vc(r,{startAngle:i,endAngle:n,radiusX:s,radiusY:s}),l=Kh.fromArc(a,e).close();if(o){a.radiusX=a.radiusY=o;var c=a.pointAt(n);l.lineTo(c.x,c.y),l.arc(n,i,o,o,!0)}else l.lineTo(r.x,r.y);return l},e}(el);Jh.current=new Jh;const Zh=Jh;var Qh=Math.PI/2,tu=function(t){function e(e,i){void 0===e&&(e=new Sc),void 0===i&&(i=0),t.call(this),this.setCenter(e),this.setRadius(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setCenter=function(t){return this._observerField("center",Sc.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.equals=function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},e.prototype.clone=function(){return new e(this.center.clone(),this.radius)},e.prototype.pointAt=function(t){return this._pointAt(Wa(t))},e.prototype.bbox=function(t){for(var e=Lc(this.center,this.radius,this.radius,t),i=Sc.maxPoint(),n=Sc.minPoint(),r=0;r<4;r++){var s=this._pointAt(e.x+r*Qh).transformCopy(t),o=this._pointAt(e.y+r*Qh).transformCopy(t),a=new Sc(s.x,o.y);i=Sc.min(i,a),n=Sc.max(n,a)}return _c.fromPoints(i,n)},e.prototype._pointAt=function(t){var e=this.center,i=this.radius;return new Sc(e.x+i*Math.cos(t),e.y+i*Math.sin(t))},e.prototype.containsPoint=function(t){var e=this.center,i=this.radius;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)},e.prototype._isOnPath=function(t,e){var i=this.center,n=this.radius,r=i.distanceTo(t);return n-e<=r&&r<=n+e},e}(bc(mc,["radius"]));const eu=tu;function iu(t){var e="_"+t;return function(t){return zo(t)?(this._observerField(e,t),this.geometryChange(),this):this[e]}}const nu=function(t,e){void 0===e&&(e=["geometry"]);var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=iu(e[i])}(i.prototype,e),i};var ru=function(t){function e(e,i){void 0===e&&(e=new eu),void 0===i&&(i={}),t.call(this,i),this.geometry(e),zo(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Circle"},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Dh(Lh(nu(sh))));const su=ru;const ou=function(t,e){return function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.traverse=function(t){for(var i=this[e],n=0;n<i.length;n++){var r=i[n];r.traverse?r.traverse(t):t(r)}return this},i}(t)};var au=function(t){function e(e){t.call(this,e),this.children=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Group"},e.prototype.childrenChange=function(t,e,i){this.trigger("childrenChange",{action:t,items:e,index:i})},e.prototype.append=function(){return Aa(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},e.prototype.insert=function(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},e.prototype.insertAt=function(t,e){return this.insert(e,t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this},e.prototype.removeAt=function(t){if(0<=t&&t<this.children.length){var e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this},e.prototype.clear=function(){var t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this},e.prototype.bbox=function(t){return Wh(this.children,!0,this.currentTransform(t))},e.prototype.rawBBox=function(){return Wh(this.children,!1)},e.prototype._clippedBBox=function(t){return Xh(this.children,this.currentTransform(t))},e.prototype.currentTransform=function(t){return sh.prototype.currentTransform.call(this,t)||null},e.prototype.containsPoint=function(t,e){if(this.visible())for(var i=this.children,n=this.currentTransform(e),r=0;r<i.length;r++)if(i[r].containsPoint(t,n))return!0;return!1},e.prototype._reparent=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=n.parent;r&&r!==this&&r.remove&&r.remove(n),n.parent=e}},Object.defineProperties(e.prototype,i),e}(ou(sh,"children"));const lu=au;function cu(t){return.5-Math.cos(t*Math.PI)/2}function hu(t){return t}function uu(t,e,i,n){var r=1.70158,s=0,o=n;return 0===t?i:1===t?i+n:(s||(s=.5),o<Math.abs(n)?(o=n,r=s/4):r=s/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin((Number(t)-r)*(1.1*Math.PI)/s)+n+i)}var pu=function(t){var e="undefined"!=typeof window?window:{},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};pu=function(t){return i.call(e,t)},pu(t)};const du=pu;var fu,gu=function(t){function e(){t.call(this),this._items=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={current:{configurable:!0}};return i.current.get=function(){return fu||(fu=new e),fu},e.prototype.register=function(t,e){this._items.push({name:t,type:e})},e.prototype.create=function(t,e){var i,n=this._items;if(e&&e.type)for(var r=e.type.toLowerCase(),s=0;s<n.length;s++)if(n[s].name.toLowerCase()===r){i=n[s];break}if(i)return new i.type(t,e)},Object.defineProperties(e,i),e}(el);const mu=gu;var yu=function(t){function e(e,i){t.call(this),this.options=Object.assign({},this.options,i),this.element=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={options:{configurable:!0}};return e.create=function(t,e,i){return mu.current.create(t,e,i)},n.options.get=function(){return this._options||{duration:500,easing:"swing"}},n.options.set=function(t){this._options=t},e.prototype.setup=function(){},e.prototype.step=function(){},e.prototype.play=function(){var t=this,e=this.options,n=e.duration,r=e.delay;void 0===r&&(r=0);var s=i[e.easing],o=Va()+r,a=o+n;0===n?(this.step(1),this.abort()):setTimeout((function(){var e=function(){if(!t._stopped){var i=Va(),r=$a(i-o,0,n),l=s(r/n,r,0,1,n);t.step(l),i<a?du(e):t.abort()}};e()}),r)},e.prototype.abort=function(){this._stopped=!0},e.prototype.destroy=function(){this.abort()},Object.defineProperties(e.prototype,n),e}(el);const vu=yu;var bu=function(t){function e(e){t.call(this),this.children=[],this.options=Ko({},this.options,this.initUserOptions(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){return t},e.prototype.reflow=function(t){for(var e,i=this.children,n=0;n<i.length;n++){var r=i[n];r.reflow(t),e=e?e.wrap(r.box):r.box.clone()}this.box=e||t},e.prototype.destroy=function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},e.prototype.getRoot=function(){var t=this.parent;return t?t.getRoot():null},e.prototype.getSender=function(){var t=this.getService();if(t)return t.sender},e.prototype.getService=function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},e.prototype.translateChildren=function(t,e){for(var i=this.children,n=i.length,r=0;r<n;r++)i[r].box.translate(t,e)},e.prototype.append=function(){for(var t=arguments,e=this,i=0;i<arguments.length;i++){var n=t[i];e.children.push(n),n.parent=e}},e.prototype.renderVisual=function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},e.prototype.addVisual=function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},e.prototype.renderChildren=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].renderVisual()},e.prototype.createVisual=function(){this.visual=new lu({zIndex:this.options.zIndex,visible:Dl(this.options.visible,!0)})},e.prototype.createAnimation=function(){this.visual&&this.options.animation&&(this.animation=vu.create(this.visual,this.options.animation))},e.prototype.appendVisual=function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):xl(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},e.prototype.clipRoot=function(){return this.parent?this.parent.clipRoot():this},e.prototype.stackRoot=function(){return this.parent?this.parent.stackRoot():this},e.prototype.stackVisual=function(t){var e,i=t.options.zIndex||0,n=this.visual.children,r=n.length;for(e=0;e<r;e++){var s=n[e];if(Dl(s.options.zIndex,0)>i)break}this.visual.insert(e,t)},e.prototype.traverse=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++){var r=e[n];t(r),r.traverse&&r.traverse(t)}},e.prototype.closest=function(t){for(var e=this,i=!1;e&&!i;)(i=t(e))||(e=e.parent);if(i)return e},e.prototype.renderComplete=function(){},e.prototype.hasHighlight=function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible)},e.prototype.toggleHighlight=function(t,e){var i=this,n=(this.options||{}).highlight||{},r=n.visual,s=this._highlight;if(!s){var o={fill:{color:Fo,opacity:e||.2},stroke:{color:Fo,width:1,opacity:e||.2}};if(r){if(!(s=this._highlight=r(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(o)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else s=this._highlight=this.createHighlight(o);xl(s.options.zIndex)||(s.options.zIndex=Dl(n.zIndex,this.options.zIndex)),this.appendVisual(s)}s.visible(t)},e.prototype.createGradientOverlay=function(t,e,i){var n=new Kh(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},e));return n.segments.elements(t.segments.elements()),n},e.prototype.createGradient=function(t){if(this.parent)return this.parent.createGradient(t)},e.prototype.supportsPointInactiveOpacity=function(){return!0},e}(el);bu.prototype.options={};const wu=bu;var xu=function(t){function e(e){t.call(this,e),this.options.margin=ea(this.options.margin),this.options.padding=ea(this.options.padding)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){var i,n=this,r=this.options,s=r.width,o=r.height,a=r.shrinkToFit,l=s&&o,c=r.margin,h=r.padding,u=r.border.width,p=function(){n.align(e,Ro,r.align),n.align(e,Lo,r.vAlign),n.paddingBox=i.clone().unpad(c).unpad(u)},d=e.clone();l&&(d.x2=d.x1+s,d.y2=d.y1+o),a&&d.unpad(c).unpad(u).unpad(h),t.prototype.reflow.call(this,d),i=l?this.box=new Ec(0,0,s,o):this.box,a&&l?(p(),d=this.contentBox=this.paddingBox.clone().unpad(h)):(d=this.contentBox=i.clone(),i.pad(h).pad(u).pad(c),p()),this.translateChildren(i.x1-d.x1+c.left+u+h.left,i.y1-d.y1+c.top+u+h.top);for(var f=this.children,g=0;g<f.length;g++){var m=f[g];m.reflow(m.box)}},e.prototype.align=function(t,e,i){this.box.align(t,e,i)},e.prototype.hasBox=function(){var t=this.options;return t.border.width||t.background},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(Kh.fromRect(this.paddingBox.toRect(),this.visualStyle()))},e.prototype.visualStyle=function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:Dl(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e}(wu);Nl(xu,{align:So,vAlign:Po,margin:{},padding:{},border:{color:ho,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const Su=xu;var ku=function(t){function e(e,i){t.call(this,e),this.pointData=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=this.paddingBox,i=t.type,n=t.rotation,r=e.center(),s=e.width()/2,o=e.height()/2;if(!t.visible||!this.hasBox())return null;var a,l=this.visualStyle();if(i===fo)a=new su(new eu([Il(e.x1+s,3),Il(e.y1+o,3)],Math.min(s,o)),l);else if("triangle"===i)a=Kh.fromPoints([[e.x1+s,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(i===go)(a=new Yh(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),a.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var c=e.toRect();if(i===Eo){var h=Dl(t.borderRadius,c.width()/5);c.setCornerRadius(h)}a=Kh.fromRect(c,l)}return n&&a.transform(jc().rotate(-n,[r.x,r.y])),a.options.zIndex=t.zIndex,a},e.prototype.createElement=function(){var t=this,e=this.options.visual,i=this.pointData||{};return e?e({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.visualOptions=function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},e.prototype.createVisual=function(){this.visual=this.createElement()},e}(Su);Nl(ku,{type:fo,align:po,vAlign:po});const Cu=ku;var Au=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.optionsChange({field:"stops"})},e}(Zc);const _u=Au;function Tu(t){return function(e){return zo(e)?(this.options.set(t,e),this):this.options.get(t)}}const Ou=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Tu(e[i])}(i.prototype,e),i};var Eu=function(t){function e(e,i,n){t.call(this),this.options=new nh({offset:e,color:i,opacity:zo(n)?n:1}),this.options.addObserver(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(zo(t))return t instanceof e?t:t.length>1?new e(t[0],t[1],t[2]):new e(t.offset,t.color,t.opacity)},e}(Ou(mc,["offset","color","opacity"]));const Mu=Eu;var Pu=function(t){function e(e){void 0===e&&(e={}),t.call(this),this.stops=new _u(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=Ma()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Gradient"},e.prototype.userSpace=function(t){return zo(t)?(this._userSpace=t,this.optionsChange(),this):this._userSpace},e.prototype._createStops=function(t){void 0===t&&(t=[]);for(var e=[],i=0;i<t.length;i++)e.push(Mu.create(t[i]));return e},e.prototype.addStop=function(t,e,i){this.stops.push(new Mu(t,e,i))},e.prototype.removeStop=function(t){var e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)},e.prototype.optionsChange=function(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})},e.prototype.geometryChange=function(){this.optionsChange()},Object.defineProperties(e.prototype,i),e}(mc);const Iu=Pu;var Fu=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.start(e.start||new Sc),this.end(e.end||new Sc(1,0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mh(Iu,["start","end"]));const Du=Fu;var Ru=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.center(e.center||new Sc),this._radius=zo(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radius=function(t){return zo(t)?(this._radius=t,this.geometryChange(),this):this._radius},e.prototype.fallbackFill=function(t){return zo(t)?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill},e}(mh(Iu,["center"]));const Lu=Ru;var Nu="radial";const Bu={glass:{type:"linear",rotation:0,stops:[{offset:0,color:Fo,opacity:0},{offset:.25,color:Fo,opacity:.3},{offset:1,color:Fo,opacity:0}]},sharpBevel:{type:Nu,stops:[{offset:0,color:Fo,opacity:.55},{offset:.65,color:Fo,opacity:0},{offset:.95,color:Fo,opacity:.25}]},roundedBevel:{type:Nu,stops:[{offset:.33,color:Fo,opacity:.06},{offset:.83,color:Fo,opacity:.2},{offset:.95,color:Fo,opacity:0}]},roundedGlass:{type:Nu,supportVML:!1,stops:[{offset:0,color:Fo,opacity:0},{offset:.5,color:Fo,opacity:.3},{offset:.99,color:Fo,opacity:0}]},sharpGlass:{type:Nu,supportVML:!1,stops:[{offset:0,color:Fo,opacity:.2},{offset:.15,color:Fo,opacity:.15},{offset:.17,color:Fo,opacity:.35},{offset:.85,color:Fo,opacity:.05},{offset:.87,color:Fo,opacity:.15},{offset:.99,color:Fo,opacity:0}]},bubbleShadow:{type:Nu,center:[.5,.5],radius:.5}};function ju(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;var i=Math.min(t.x1,e.x1),n=Math.max(t.x1,e.x1),r=Math.min(t.x2,e.x2),s=Math.max(t.x2,e.x2),o=Math.min(t.y1,e.y1),a=Math.max(t.y1,e.y1),l=Math.min(t.y2,e.y2),c=Math.max(t.y2,e.y2),h=[];return h[0]=new Ec(n,o,r,a),h[1]=new Ec(i,a,n,l),h[2]=new Ec(r,a,s,l),h[3]=new Ec(n,l,r,c),t.x1===i&&t.y1===o||e.x1===i&&e.y1===o?(h[4]=new Ec(i,o,n,a),h[5]=new Ec(r,l,s,c)):(h[4]=new Ec(r,o,s,a),h[5]=new Ec(i,l,n,c)),ca(h,(function(t){return t.height()>0&&t.width()>0}))[0]}var zu=function(t){function e(e){t.call(this,e);var i=this.options;i.width=parseInt(i.width,10),i.height=parseInt(i.height,10),this.gradients={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t=this.options,e=this.children,i=new Ec(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var n=0;n<e.length;n++)e[n].reflow(i),i=ju(i,e[n].box)||new Ec},e.prototype.createVisual=function(){this.visual=new lu,this.createBackground()},e.prototype.createBackground=function(){var t=this.options,e=t.border||{},i=this.box.clone().pad(t.margin).unpad(e.width),n=Kh.fromRect(i.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(n)},e.prototype.getRoot=function(){return this},e.prototype.createGradient=function(t){var e,i=this.gradients,n=Ml(t),r=Bu[t.gradient];if(i[n])e=i[n];else{var s=Object.assign({},r,t);"linear"===r.type?e=new Du(s):(t.innerRadius&&(s.stops=function(t){for(var e=t.stops,i=t.innerRadius/t.radius*100,n=e.length,r=[],s=0;s<n;s++){var o=Object.assign({},e[s]);o.offset=(o.offset*(100-i)+i)/100,r.push(o)}return r}(s)),(e=new Lu(s)).supportVML=!1!==r.supportVML),i[n]=e}return e},e.prototype.cleanGradients=function(){var t=this.gradients;for(var e in t)t[e]._observers=[]},e.prototype.size=function(){var t=this.options;return new Ec(0,0,t.width,t.height)},e}(wu);Nl(zu,{width:600,height:400,background:Fo,border:{color:ho,width:0},margin:ea(5),zIndex:-2});const Uu=zu;var $u=function(t){function e(e){t.call(this,e),this._initDirection()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initDirection=function(){var t=this.options;t.vertical?(this.groupAxis=Ro,this.elementAxis=Lo,this.groupSizeField=Do,this.elementSizeField=wo,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=Lo,this.elementAxis=Ro,this.groupSizeField=wo,this.elementSizeField=Do,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)},e.prototype.reflow=function(t){this.box=t.clone(),this.reflowChildren()},e.prototype.reflowChildren=function(){var t=this,e=this,i=e.box,n=e.elementAxis,r=e.groupAxis,s=e.elementSizeField,o=e.groupSizeField,a=this.groupOptions(),l=a.groups,c=a.groupsSize,h=a.maxGroupElementsSize,u=l.length,p=i[r+1]+this.alignStart(c,i[o]());if(u){for(var d=p,f=0;f<u;f++){for(var g=l[f],m=g.groupElements,y=i[n+1],v=m.length,b=0;b<v;b++){var w=m[b],x=t.elementSize(w),S=d+t.alignStart(x[o],g.groupSize),k=new Ec;k[r+1]=S,k[r+2]=S+x[o],k[n+1]=y,k[n+2]=y+x[s],w.reflow(k),y+=x[s]+t.elementSpacing}d+=g.groupSize+t.groupSpacing}i[r+1]=p,i[r+2]=p+c,i[n+2]=i[n+1]+h}},e.prototype.alignStart=function(t,e){var i=0,n=this.options.align;return n===Oo||n===uo?i=e-t:n===po&&(i=(e-t)/2),i},e.prototype.groupOptions=function(){for(var t=this,e=t.box,i=t.children,n=t.elementSizeField,r=t.groupSizeField,s=t.elementSpacing,o=t.groupSpacing,a=Il(e[n]()),l=i.length,c=[],h=0,u=0,p=0,d=0,f=[],g=0;g<l;g++){var m=i[g];m.box||m.reflow(e);var y=this.elementSize(m);this.options.wrap&&Il(u+s+y[n])>a&&(c.push({groupElements:f,groupSize:h,groupElementsSize:u}),d=Math.max(d,u),p+=o+h,h=0,u=0,f=[]),h=Math.max(h,y[r]),u>0&&(u+=s),u+=y[n],f.push(m)}return c.push({groupElements:f,groupSize:h,groupElementsSize:u}),{groups:c,groupsSize:p+=h,maxGroupElementsSize:d=Math.max(d,u)}},e.prototype.elementSize=function(t){return{width:t.box.width(),height:t.box.height()}},e.prototype.createVisual=function(){},e}(wu);Nl($u,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const Hu=$u;var Vu=function(t){function e(e,i,n){void 0===i&&(i=new Sc),void 0===n&&(n={}),t.call(this,n),this.content(e),this.position(i),this.options.font||(this.options.font="12px sans-serif"),zo(this.options.fill)||this.fill("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Text"},e.prototype.content=function(t){return zo(t)?(this.options.set("content",t),this):this.options.get("content")},e.prototype.measure=function(){return yl(this.content(),{font:this.options.get("font")})},e.prototype.rect=function(){var t=this.measure(),e=this.position().clone();return new _c(e,[t.width,t.height])},e.prototype.bbox=function(t){var e=wc(this.currentTransform(t));return this.rect().bbox(e)},e.prototype.rawBBox=function(){return this.rect().bbox()},e.prototype._containsPoint=function(t){return this.rect().containsPoint(t)},Object.defineProperties(e.prototype,i),e}(Dh(mh(sh,["position"])));const qu=Vu;var Wu=qu,Xu=function(t){function e(e,i){t.call(this,i),this.content=e,this.reflow(new Ec)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.size=yl(this.content,{font:e.font});this.baseline=i.baseline,this.box=new Ec(t.x1,t.y1,t.x1+i.width,t.y1+i.height)},e.prototype.createVisual=function(){var t=this.options,e=t.font,i=t.color,n=t.opacity,r=t.cursor;this.visual=new Wu(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:i,opacity:n},cursor:r})},e}(wu);Nl(Xu,{font:yo,color:ho});const Gu=Xu;function Ku(t){var e=t.origin,i=t.bottomRight();return new Ec(e.x,e.y,i.x,i.y)}var Yu=/\n/m,Ju=function(t){function e(e,i,n){t.call(this,i),this.content=e,this.data=n,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new Ec)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initContainer=function(){var t=this.options,e=String(this.content).split(Yu),i=new Hu({vertical:!0,align:t.align,wrap:!1}),n=Ko({},t,{opacity:1,animation:null});this.container=i,this.append(i);for(var r=0;r<e.length;r++){var s=new Gu(e[r].trim(),n);i.append(s)}},e.prototype.reflow=function(e){var i=this.options,n=i.visual;if(this.container.options.align=i.align,n&&!this._boxReflow){var r=e;r.hasSize()||(this._boxReflow=!0,this.reflow(r),this._boxReflow=!1,r=this.box);var s=this.visual=n(this.visualContext(r));s&&(r=Ku(s.clippedBBox()||new _c),s.options.zIndex=i.zIndex),this.box=this.contentBox=this.paddingBox=r}else if(t.prototype.reflow.call(this,e),i.rotation){var o=ea(i.margin),a=this.box.unpad(o);this.targetBox=e,this.normalBox=a.clone(),(a=this.rotate()).translate(o.left-o.right,o.top-o.bottom),this.rotatedBox=a.clone(),a.pad(o)}},e.prototype.createVisual=function(){var t=this.options;if(this.visual=new lu({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){var e=Kh.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}},e.prototype.renderVisual=function(){if(this.options.visible)if(this.options.visual){var e=this.visual;e&&!xl(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else t.prototype.renderVisual.call(this)},e.prototype.visualContext=function(t){var e=this,i={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return e._boxReflow=!0,e.reflow(t),e._boxReflow=!1,e.getDefaultVisual()}};return this.data&&Object.assign(i,this.data),i},e.prototype.getDefaultVisual=function(){this.createVisual(),this.renderChildren();var t=this.visual;return delete this.visual,t},e.prototype.rotate=function(){var t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,Ro,t.align),this.align(this.targetBox,Lo,t.vAlign),this.box},e.prototype.rotationTransform=function(){var t=this.options.rotation;if(!t)return null;var e=this.normalBox.center(),i=e.x,n=e.y,r=this.rotatedBox.center();return jc().translate(r.x-i,r.y-n).rotate(t,[i,n])},e}(Su);const Zu=Ju;var Qu=function(t){function e(e){t.call(this,e),this._textBox=new Zu(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){t.prototype.reflow.call(this,e),this.box.snapTo(e,Ro)},e.buildTitle=function(t,i){var n,r=t;return"string"==typeof t&&(r={text:t}),(r=Object.assign({visible:!0},i,r))&&r.visible&&r.text&&(n=new e(r)),n},e.orderTitles=function(t){var e=[].concat(t),i=e.filter((function(t){return t&&t.options.position!==uo})),n=e.filter((function(t){return t&&t.options.position===uo}));return tp(i),tp(n),n.reverse(),i.concat(n)},e}(wu);function tp(t){for(var e=1;e<t.length;e++){var i=t[e]._textBox,n=t[e-1]._textBox;n.options.margin=Object.assign(ea(n.options.margin),{bottom:0}),i.options.margin=Object.assign(ea(i.options.margin),{top:0})}}Nl(Qu,{color:ho,position:Po,align:po,margin:ea(5),padding:ea(5)});const ep=Qu;var ip=function(t){function e(e,i,n,r,s){t.call(this,i,s),this.text=i,this.value=e,this.index=n,this.dataItem=r,this.reflow(new Ec)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualContext=function(e){var i=t.prototype.visualContext.call(this,e);return i.value=this.value,i.dataItem=this.dataItem,i.format=this.options.format,i.culture=this.options.culture,i},e.prototype.click=function(t,e){t.trigger("axisLabelClick",{element:_l(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},e.prototype.rotate=function(){if(this.options.alignRotation!==po){var e=this.normalBox.toRect(),i=this.rotationTransform();this.box=Ku(e.bbox(i.matrix()))}else t.prototype.rotate.call(this);return this.box},e.prototype.rotationTransform=function(){var e=this.options,i=e.rotation;if(!i)return null;if(e.alignRotation===po)return t.prototype.rotationTransform.call(this);var n=jc().rotate(i).matrix(),r=this.normalBox.toRect(),s=this.targetBox.toRect(),o=e.rotationOrigin||Po,a=o===Po||o===uo?Ro:Lo,l=o===Po||o===uo?Lo:Ro,c=o===Po||o===So?s.origin:s.bottomRight(),h=r.topLeft().transformCopy(n),u=r.topRight().transformCopy(n),p=r.bottomRight().transformCopy(n),d=r.bottomLeft().transformCopy(n),f=_c.fromPoints(h,u,p,d),g={};g[l]=s.origin[l]-f.origin[l];var m,y,v=Math.abs(h[l]+g[l]-c[l]),b=Math.abs(u[l]+g[l]-c[l]);Il(v,vo)===Il(b,vo)?(m=h,y=u):b<v?(m=u,y=p):(m=h,y=d);var w=m[a]+(y[a]-m[a])/2;return g[a]=s.center()[a]-w,jc().translate(g.x,g.y).rotate(i)},e}(Zu);Nl(ip,{_autoReflow:!1});const np=ip;var rp=function(t){function e(e,i,n){t.call(this,i),this.fields=e,this.chartService=n,this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hide=function(){this.options.visible=!1},e.prototype.show=function(){this.options.visible=!0},e.prototype.render=function(){var t=this,e=this.options;if(e.visible){var i,n,r=e.label,s=e.icon,o=new Ec,a=function(){return t},l=s.size,c=this.fields.text;if(xl(r)&&r.visible){var h=sa(r);h?c=h(this.fields):r.format&&(c=this.chartService.format.auto(r.format,c)),r.color||(r.color=r.position===xo?"#fff":s.background),this.label=new Zu(c,Ko({},r)),this.label.aliasFor=a,r.position!==xo||xl(l)||(s.type===fo?l=Math.max(this.label.box.width(),this.label.box.height()):(i=this.label.box.width(),n=this.label.box.height()),o.wrap(this.label.box))}s.width=i||l||7,s.height=n||l||7;var u=new Cu(Ko({},s));u.aliasFor=a,this.marker=u,this.append(u),this.label&&this.append(this.label),u.reflow(new Ec),this.wrapperBox=o.wrap(u.box)}},e.prototype.reflow=function(t){var e,i,n,r=this,s=r.options,o=r.label,a=r.marker,l=r.wrapperBox,c=t.center(),h=s.line.length,u=s.position;s.visible&&(da(u,[So,Oo])?u===So?(n=l.alignTo(t,u).translate(-h,t.center().y-l.center().y),s.line.visible&&(e=[t.x1,c.y],this.linePoints=[e,[n.x2,c.y]],i=n.clone().wrapPoint(e))):(n=l.alignTo(t,u).translate(h,t.center().y-l.center().y),s.line.visible&&(e=[t.x2,c.y],this.linePoints=[e,[n.x1,c.y]],i=n.clone().wrapPoint(e))):u===uo?(n=l.alignTo(t,u).translate(t.center().x-l.center().x,h),s.line.visible&&(e=[c.x,t.y2],this.linePoints=[e,[c.x,n.y1]],i=n.clone().wrapPoint(e))):(n=l.alignTo(t,u).translate(t.center().x-l.center().x,-h),s.line.visible&&(e=[c.x,t.y1],this.linePoints=[e,[c.x,n.y2]],i=n.clone().wrapPoint(e))),a&&a.reflow(n),o&&(o.reflow(n),a&&(s.label.position===To&&o.box.alignTo(a.box,u),o.reflow(o.box))),this.contentBox=n,this.targetBox=t,this.box=i||n)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},e.prototype.renderVisual=function(){var e=this,i=this.options,n=i.visual;i.visible&&n?(this.visual=n(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:i.background,border:i.background,icon:i.icon,label:i.label,line:i.line,position:i.position,visible:i.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}})),this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createLine=function(){var t=this.options.line;if(this.linePoints){var e=Kh.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});Uo(e),this.visual.append(e)}},e.prototype.click=function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},e.prototype.out=function(t,e){var i=this.eventArgs(e);t.trigger("noteLeave",i)},e.prototype.eventArgs=function(t){var e=this.options;return Object.assign(this.fields,{element:_l(t),text:xl(e.label)?e.label.text:"",visual:this.visual})},e}(Su);Nl(rp,{icon:{visible:!0,type:fo},label:{position:xo,visible:!0,align:po,vAlign:po},line:{visible:!0},visible:!0,position:Po,zIndex:2});const sp=rp;var op={format:function(t,e){return e},toString:function(t){return t},parseDate:function(t){return new Date(t)},firstDay:function(){return 0}},ap=function(){},lp={implementation:{configurable:!0}};ap.register=function(t){op=t},lp.implementation.get=function(){return op},Object.defineProperties(ap,lp);const cp=ap;var hp=/\{(\d+)(:[^\}]+)?\}/g,up=function(t){this._intlService=t},pp={intl:{configurable:!0}};pp.intl.get=function(){return this._intlService||cp.implementation},pp.intl.set=function(t){this._intlService=t},up.prototype.auto=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=this.intl;return Vo(t)&&t.match(bo)?n.format.apply(n,[t].concat(e)):n.toString(e[0],t)},up.prototype.localeAuto=function(t,e,i){var n=this.intl;return Vo(t)&&t.match(bo)?t.replace(hp,(function(t,r,s){var o=e[parseInt(r,10)];return n.toString(o,s?s.substring(1):"",i)})):n.toString(e[0],t,i)},Object.defineProperties(up.prototype,pp);const dp=up;var fp=function(t,e){void 0===e&&(e={}),this._intlService=e.intlService,this.sender=e.sender||t,this.format=new dp(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)},gp={intl:{configurable:!0}};gp.intl.get=function(){return this._intlService||cp.implementation},gp.intl.set=function(t){this._intlService=t,this.format.intl=t},fp.prototype.notify=function(t,e){this.chart&&this.chart.trigger(t,e)},fp.prototype.isPannable=function(t){var e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t},Object.defineProperties(fp.prototype,gp);const mp=fp;var yp,vp=function(){};vp.register=function(t){yp=t},vp.create=function(t,e){if(yp)return yp.create(t,e)};const bp=vp;function wp(t,e){var i=t.tickX,n=t.tickY,r=t.position,s=new Kh({stroke:{width:e.width,color:e.color}});return t.vertical?s.moveTo(i,r).lineTo(i+e.size,r):s.moveTo(r,n).lineTo(r,n+e.size),Uo(s),s}function xp(t,e){var i=t.lineStart,n=t.lineEnd,r=t.position,s=new Kh({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return t.vertical?s.moveTo(i,r).lineTo(n,r):s.moveTo(r,i).lineTo(r,n),Uo(s),s}var Sp=function(t){function e(e,i){void 0===i&&(i=new mp),t.call(this,e),this.chartService=i,this.options.visible||(this.options=Ko({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=Ko({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==Ao},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=Ko({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==Ao},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.labelsCount()}},e.prototype.normalizeLabelRotation=function(t){var e=t.rotation;Yo(e)&&(t.alignRotation=e.align,t.rotation=e.angle)},e.prototype.createLabels=function(){var t=this,e=this.options,i=e.vertical?Oo:po,n=Ko({},e.labels,{align:i,zIndex:e.zIndex}),r=Math.max(1,n.step);if(this.clearLabels(),n.visible){this.normalizeLabelRotation(n),"auto"===n.rotation&&(n.rotation=0,e.autoRotateLabels=!0);for(var s=this.labelsRange(),o=s.min;o<s.max;o+=r){var a={index:o,count:s.max},l=t.createAxisLabel(o,n,a);l&&(t.append(l),t.labels.push(l))}}},e.prototype.clearLabels=function(){this.children=ca(this.children,(function(t){return!(t instanceof np)})),this.labels=[]},e.prototype.clearTitle=function(){var t=this;this.title&&(this.children=ca(this.children,(function(e){return e!==t.title})),this.title=void 0)},e.prototype.clear=function(){this.clearLabels(),this.clearTitle()},e.prototype.lineBox=function(){var t=this.options,e=this.box,i=t.vertical,n=t.labels.mirror,r=n?e.x1:e.x2,s=n?e.y2:e.y1,o=t.line.width||0;return i?new Ec(r,e.y1,r,e.y2-o):new Ec(e.x1,s,e.x2-o,s)},e.prototype.createTitle=function(){var t=this.options,e=Ko({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){var i=new Zu(e.text,e);this.append(i),this.title=i}},e.prototype.createNotes=function(){var t=this,e=this.options,i=e.notes,n=i.data||[];this.notes=[];for(var r=0;r<n.length;r++){var s=Ko({},i,n[r]);s.value=t.parseNoteValue(s.value);var o=new sp({value:s.value,text:s.label.text,dataItem:s},s,t.chartService);o.options.visible&&(xl(o.options.position)?e.vertical&&!da(o.options.position,[So,Oo])?o.options.position=e.reverse?So:Oo:e.vertical||da(o.options.position,[Po,uo])||(o.options.position=e.reverse?uo:Po):e.vertical?o.options.position=e.reverse?So:Oo:o.options.position=e.reverse?uo:Po,t.append(o),t.notes.push(o))}},e.prototype.parseNoteValue=function(t){return t},e.prototype.renderVisual=function(){t.prototype.renderVisual.call(this),this.createPlotBands()},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.createBackground(),this.createLine()},e.prototype.gridLinesVisual=function(){var t=this._gridLines;return t||(t=this._gridLines=new lu({zIndex:-2}),this.appendVisual(this._gridLines)),t},e.prototype.createTicks=function(t){var e=this.options,i=this.lineBox(),n=e.labels.mirror,r=e.majorTicks.visible?e.majorUnit:0,s={vertical:e.vertical};function o(e,r,o){var a=e.length,l=Math.max(1,r.step);if(r.visible)for(var c=r.skip;c<a;c+=l)xl(o)&&c%o==0||(s.tickX=n?i.x2:i.x2-r.size,s.tickY=n?i.y1-r.size:i.y1,s.position=e[c],t.append(wp(s,r)))}o(this.getMajorTickPositions(),e.majorTicks),o(this.getMinorTickPositions(),e.minorTicks,r/e.minorUnit)},e.prototype.createLine=function(){var t=this.options,e=t.line,i=this.lineBox();if(e.width>0&&e.visible){var n=new Kh({stroke:{width:e.width,color:e.color,dashType:e.dashType}});n.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&Uo(n);var r=this._lineGroup=new lu;r.append(n),this.visual.append(r),this.createTicks(r)}},e.prototype.getActualTickSize=function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},e.prototype.createBackground=function(){var t=this.options,e=this.box,i=t.background;i&&(this._backgroundPath=Kh.fromRect(e.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))},e.prototype.createPlotBands=function(){var t=this,e=this.options,i=e.plotBands||[],n=e.vertical,r=this.plotArea;if(0!==i.length){for(var s=this._plotbandGroup=new lu({zIndex:-1}),o=ca(this.pane.axes,(function(e){return e.options.vertical!==t.options.vertical}))[0],a=0;a<i.length;a++){var l=i[a],c=void 0,h=void 0,u=l.label,p=void 0;if(n?(c=(o||r.axisX).lineBox(),h=t.getSlot(l.from,l.to,!0)):(c=t.getSlot(l.from,l.to,!0),h=(o||r.axisY).lineBox()),u&&(u.vAlign=u.position||So,p=t.createPlotBandLabel(u,l,new Ec(c.x1,h.y1,c.x2,h.y2))),0!==c.width()&&0!==h.height()){var d=new _c([c.x1,h.y1],[c.width(),h.height()]),f=Kh.fromRect(d,{fill:{color:l.color,opacity:l.opacity},stroke:null});s.append(f),p&&s.append(p)}}this.appendVisual(s)}},e.prototype.createPlotBandLabel=function(t,e,i){if(!1===t.visible)return null;var n,r=t.text;if(xl(t)&&t.visible){var s=sa(t);s?r=s({text:r,item:e}):t.format&&(r=this.chartService.format.auto(t.format,r)),t.color||(t.color=this.options.labels.color)}return(n=new Zu(r,t)).reflow(i),n.renderVisual(),n.visual},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,n=e.majorGridLines,r=e.minorUnit,s=e.vertical,o=t.options.line.visible,a=n.visible?e.majorUnit:0,l=t.lineBox(),c=l[s?"y1":"x1"],h={lineStart:l[s?"x1":"y1"],lineEnd:l[s?"x2":"y2"],vertical:s},u=[],p=this.gridLinesVisual();function d(t,e,i){var n=t.length,r=Math.max(1,e.step);if(e.visible)for(var s=e.skip;s<n;s+=r){var a=Il(t[s]);da(a,u)||s%i==0||o&&c===a||(h.position=a,p.append(xp(h,e)),u.push(a))}}return d(this.getMajorTickPositions(),n),d(this.getMinorTickPositions(),i,a/r),p.children},e.prototype.reflow=function(t){for(var e=this,i=e.options,n=e.labels,r=e.title,s=i.vertical,o=n.length,a=s?Do:wo,l=r?r.box[a]():0,c=this.getActualTickSize()+i.margin+l,h=((this.getRoot()||{}).box||t)[a](),u=0,p=0;p<o;p++){var d=n[p].box[a]();d+c<=h&&(u=Math.max(u,d))}this.box=s?new Ec(t.x1,t.y1,t.x1+u+c,t.y2):new Ec(t.x1,t.y1,t.x2,t.y1+u+c),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},e.prototype.getLabelsTickPositions=function(){return this.getMajorTickPositions()},e.prototype.labelTickIndex=function(t){return t.index},e.prototype.arrangeLabels=function(){for(var t=this.options,e=this.labels,i=this.labelsBetweenTicks(),n=t.vertical,r=t.labels.mirror,s=this.getLabelsTickPositions(),o=0;o<e.length;o++){var a=e[o],l=this.labelTickIndex(a),c=n?a.box.height():a.box.width(),h=s[l],u=s[l+1],p=void 0,d=void 0;if(n){if(i)p=h+(u-h)/2-c/2;else p=h-c/2;d=p}else i?(p=h,d=u):d=(p=h-c/2)+c;this.positionLabel(a,r,p,d)}},e.prototype.positionLabel=function(t,e,i,n){void 0===n&&(n=i);var r,s=this.options,o=s.vertical,a=this.lineBox(),l=this.getActualTickSize()+s.margin;if(o){var c=a.x2;e?(c+=l,t.options.rotationOrigin=So):(c-=l+t.box.width(),t.options.rotationOrigin=Oo),r=t.box.move(c,i)}else{var h=a.y1;e?(h-=l+t.box.height(),t.options.rotationOrigin=uo):(h+=l,t.options.rotationOrigin=Po),r=new Ec(i,h,n,h+t.box.height())}t.reflow(r)},e.prototype.autoRotateLabelAngle=function(t,e){return t.width()<e?0:t.height()>e?-90:-45},e.prototype.autoRotateLabels=function(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var t=this.getMajorTickPositions(),e=this.labels,i=Math.min(e.length,t.length-1),n=0,r=0;r<i;r++){var s=Math.abs(t[r+1]-t[r]),o=e[r].box,a=this.autoRotateLabelAngle(o,s);if(0!==a&&(n=a),-90===n)break}if(0!==n){for(var l=0;l<e.length;l++)e[l].options.rotation=n,e[l].reflow(new Ec);return!0}},e.prototype.arrangeTitle=function(){var t=this.options,e=this.title,i=t.labels.mirror,n=t.vertical;e&&(n?(e.options.align=i?Oo:So,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=i?Po:uo),e.reflow(this.box))},e.prototype.arrangeNotes=function(){for(var t=this,e=0;e<this.notes.length;e++){var i=t.notes[e],n=i.options.value,r=void 0;xl(n)?(t.shouldRenderNote(n)?i.show():i.hide(),r=t.noteSlot(n)):i.hide(),i.reflow(r||t.lineBox())}},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.alignTo=function(t){var e=t.lineBox(),i=this.options.vertical,n=i?Lo:Ro;this.box.snapTo(e,n),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[n+1]-=this.lineBox()[n+1]-e[n+1],this.box[n+2]-=this.lineBox()[n+2]-e[n+2]},e.prototype.axisLabelText=function(t,e,i){var n,r=this,s=sa(e),o=function(){return e.format?r.chartService.format.localeAuto(e.format,[t],e.culture):t};s?n=s(Object.assign({},i,{get text(){return o()},value:t,format:e.format,culture:e.culture})):n=o();return n},e.prototype.slot=function(t,e,i){var n=this.getSlot(t,e,i);if(n)return n.toRect()},e.prototype.contentBox=function(){var t=this.box.clone(),e=this.labels;if(e.length){var i=this.options.vertical?Lo:Ro;if(this.chartService.isPannable(i)){var n=this.maxLabelOffset();t[i+1]-=n.start,t[i+2]+=n.end}else{e[0].options.visible&&t.wrap(e[0].box);var r=e[e.length-1];r.options.visible&&t.wrap(r.box)}}return t},e.prototype.maxLabelOffset=function(){for(var t=this.options,e=t.vertical,i=t.reverse,n=this.labelsBetweenTicks(),r=this.getLabelsTickPositions(),s=e?Lo:Ro,o=this.labels,a=i?1:0,l=i?0:1,c=0,h=0,u=0;u<o.length;u++){var p=o[u],d=this.labelTickIndex(p),f=void 0,g=void 0;n?(f=r[d+a],g=r[d+l]):f=g=r[d],c=Math.max(c,f-p.box[s+1]),h=Math.max(h,p.box[s+2]-g)}return{start:c,end:h}},e.prototype.limitRange=function(t,e,i,n,r){var s=this.options;if(t<i&&r<0&&(!xl(s.min)||s.min<=i)||n<e&&r>0&&(!xl(s.max)||n<=s.max))return null;if(e<i&&r>0||n<t&&r<0)return{min:t,max:e};var o=e-t,a=t,l=e;return t<i&&r<0?(a=El(t,i,n),l=El(t+o,i+o,n)):e>n&&r>0&&(l=El(e,i,n),a=El(e-o,i,n-o)),{min:a,max:l}},e.prototype.valueRange=function(){return{min:this.seriesMin,max:this.seriesMax}},e.prototype.lineDir=function(){var t=this.options;return(t.vertical?-1:1)*(t.reverse?-1:1)},e.prototype.lineInfo=function(){var t=this.options.vertical,e=this.lineBox(),i=t?e.height():e.width(),n=t?Lo:Ro,r=this.lineDir(),s=n+(1===r?1:2).toString();return{axis:n,axisOrigin:s,axisDir:r,lineBox:e,lineSize:i,lineStart:e[s]}},e.prototype.pointOffset=function(t){var e=this.lineInfo(),i=e.axis,n=e.axisDir,r=e.axisOrigin,s=e.lineBox,o=e.lineSize;return(n>0?t[i]-s[r]:s[r]-t[i])/o},e.prototype.scaleToDelta=function(t,e){var i=El(t,-.999,.999);return i>0?e*Math.min(1,i):e-e/(1+i)},e.prototype.labelsBetweenTicks=function(){return!this.options.justified},e.prototype.prepareUserOptions=function(){},e}(wu);Nl(Sp,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:ho,visible:!0},title:{visible:!0,position:po},majorTicks:{align:To,size:4,skip:0,step:1},minorTicks:{align:To,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:To,minorTickType:Ao,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:ho,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const kp=Sp;var Cp="milliseconds",Ap="seconds",_p="minutes",Tp="hours",Op="days",Ep="weeks",Mp="months",Pp="years",Ip=1e3,Fp=6e4,Dp=36e5,Rp=864e5,Lp=6048e5,Np=26784e5,Bp=31536e6,jp={years:Bp,months:Np,weeks:Lp,days:Rp,hours:Dp,minutes:Fp,seconds:Ip,milliseconds:1};function zp(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fp}function Up(t,e){return new Date(t.getTime()+e)}function $p(t){var e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function Hp(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function Vp(t,e,i,n){var r=t;if(t){var s=$p(t),o=s.getHours();i===Pp?Hp(r=new Date(s.getFullYear()+e,0,1),0):i===Mp?Hp(r=new Date(s.getFullYear(),s.getMonth()+e,1),o):i===Ep?(r=Vp(function(t,e){void 0===e&&(e=0);var i=0,n=t.getDay();if(!isNaN(n))for(;n!==e;)0===n?n=6:n--,i++;return Up(t,-i*Rp)}(s,n),7*e,Op),Hp(r,o)):i===Op?Hp(r=new Date(s.getFullYear(),s.getMonth(),s.getDate()+e),o):i===Tp?r=function(t,e){var i=new Date(t);i.setMinutes(0,0,0);var n=(t.getTimezoneOffset()-i.getTimezoneOffset())*Fp;return Up(i,n+e*Dp)}(s,e):i===_p?(r=Up(s,e*Fp)).getSeconds()>0&&r.setSeconds(0):i===Ap?r=Up(s,e*Ip):i===Cp&&(r=Up(s,e)),i!==Cp&&r.getMilliseconds()>0&&r.setMilliseconds(0)}return r}function qp(t,e,i){return Vp($p(t),0,e,i)}function Wp(t,e,i){var n=$p(t);return n&&qp(n,e,i).getTime()===n.getTime()?n:Vp(n,1,e,i)}function Xp(t,e){return t&&e?t.getTime()-e.getTime():-1}function Gp(t,e){return t.getTime()-e}function Kp(t){if(No(t)){for(var e=[],i=0;i<t.length;i++)e.push(Kp(t[i]));return e}if(t)return $p(t).getTime()}function Yp(t,e){return t&&e?Kp(t)===Kp(e):t===e}function Jp(t,e,i){return zp(t,e)/jp[i]}function Zp(t,e,i,n){var r=$p(t),s=$p(e);return(i===Mp?r.getMonth()-s.getMonth()+12*(r.getFullYear()-s.getFullYear())+Jp(r,new Date(r.getFullYear(),r.getMonth()),Op)/new Date(r.getFullYear(),r.getMonth()+1,0).getDate():i===Pp?r.getFullYear()-s.getFullYear()+Zp(r,new Date(r.getFullYear(),0),Mp,1)/12:i===Op||i===Ep?Jp(r,s,i):Gp(r,e)/jp[i])/n}function Qp(t,e,i){return i===Pp?e.getFullYear()-t.getFullYear():i===Mp?12*Qp(t,e,Pp)+e.getMonth()-t.getMonth():i===Op?Math.floor(Gp(e,t)/Rp):Math.floor(Gp(e,t)/jp[i])}function td(t,e){return Vo(e)&&t.parseDate(e)||$p(e)}function ed(t,e){if(No(e)){for(var i=[],n=0;n<e.length;n++)i.push(td(t,e[n]));return i}return td(t,e)}function id(t,e){return Ho(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}var nd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this._ticks={}},e.prototype.categoriesHash=function(){return""},e.prototype.clone=function(){var t=new e(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t},e.prototype.initUserOptions=function(t){var e=t.categories||[],i=xl(t.min),n=xl(t.max);if(t.srcCategories=t.categories=e,(i||n)&&e.length){var r,s=i?Math.floor(t.min):0;r=n?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(s,r)}return t},e.prototype.rangeIndices=function(){var t=this.options,e=t.categories.length||1;return{min:Ho(t.min)?t.min%1:0,max:Ho(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0)}},e.prototype.totalRangeIndices=function(t){var e,i=this.options,n=Ho(i.min)?i.min:0;if(e=Ho(i.max)?i.max:Ho(i.min)?n+i.categories.length:this.totalRange().max||1,t){var r=this.totalRange();n=El(n,0,r.max),e=El(e,0,r.max)}return{min:n,max:e}},e.prototype.range=function(){var t=this.options;return{min:Ho(t.min)?t.min:0,max:Ho(t.max)?t.max:this.totalRange().max}},e.prototype.roundedRange=function(){return this.range()},e.prototype.totalRange=function(){var t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}},e.prototype.scaleOptions=function(){var t=this.rangeIndices(),e=t.min,i=t.max,n=this.lineBox();return{scale:(this.options.vertical?n.height():n.width())/(i-e||1)*(this.options.reverse?-1:1),box:n,min:e,max:i}},e.prototype.arrangeLabels=function(){t.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){var t=this.box,e=this.labels;if(e.length>0){var i=this.options.vertical?Lo:Ro,n=t[i+1],r=t[i+2],s=e[0],o=Ol(e);(s.box[i+1]>r||s.box[i+2]<n)&&(s.options.visible=!1),(o.box[i+1]>r||o.box[i+2]<n)&&(o.options.visible=!1)}},e.prototype.getMajorTickPositions=function(){return this.getTicks().majorTicks},e.prototype.getMinorTickPositions=function(){return this.getTicks().minorTicks},e.prototype.getLabelsTickPositions=function(){return this.getTicks().labelTicks},e.prototype.tickIndices=function(t){for(var e=this.rangeIndices(),i=e.min,n=e.max,r=Math.ceil(n),s=Math.floor(i),o=[];s<=r;)o.push(s),s+=t;return o},e.prototype.getTickPositions=function(t){for(var e=this.options,i=e.vertical,n=e.reverse,r=this.scaleOptions(),s=r.scale,o=r.box,a=r.min,l=o[(i?Lo:Ro)+(n?2:1)],c=this.tickIndices(t),h=[],u=0;u<c.length;u++)h.push(l+Il(s*(c[u]-a),3));return h},e.prototype.getTicks=function(){var t=this.options,e=this._ticks,i=this.rangeIndices(),n=this.lineBox(),r=n.getHash()+i.min+","+i.max+t.reverse+t.justified;if(e._hash!==r){var s=t.minorTicks.visible||t.minorGridLines.visible;e._hash=r,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,n),e.minorTicks=s?this.filterOutOfRangePositions(this.getTickPositions(.5),n):[]}return e},e.prototype.filterOutOfRangePositions=function(t,e){if(!t.length)return t;for(var i=this.options.vertical?Lo:Ro,n=function(t){return e[i+1]<=t&&t<=e[i+2]},r=t.length-1,s=0;!n(t[s])&&s<=r;)s++;for(var o=r;!n(t[o])&&o>=0;)o--;return t.slice(s,o+1)},e.prototype.lineInfo=function(){var t=this.options,e=t.vertical,i=t.reverse,n=this.lineBox(),r=e?n.height():n.width(),s=e?Lo:Ro,o=i?-1:1,a=s+(1===o?1:2).toString();return{axis:s,axisOrigin:a,axisDir:o,lineBox:n,lineSize:r,lineStart:n[a]}},e.prototype.lineDir=function(){return this.options.reverse?-1:1},e.prototype.getSlot=function(t,e,i){var n=this.options,r=n.reverse,s=n.justified,o=this.scaleOptions(),a=o.scale,l=o.box,c=o.min,h=this.lineInfo(),u=h.axis,p=h.lineStart,d=l.clone(),f=!xl(e),g=Dl(t,0),m=Dl(e,g);m=Math.max(m-1,g);var y=p+(g-c)*a,v=p+((m=Math.max(g,m))+1-c)*a;return f&&s&&(v=y),i&&(y=El(y,l[u+1],l[u+2]),v=El(v,l[u+1],l[u+2])),d[u+1]=r?v:y,d[u+2]=r?y:v,d},e.prototype.limitSlot=function(t){var e=this.options.vertical?Lo:Ro,i=this.lineBox(),n=t.clone();return n[e+1]=El(t[e+1],i[e+1],i[e+2]),n[e+2]=El(t[e+2],i[e+1],i[e+2]),n},e.prototype.slot=function(e,i,n){var r=Math.floor(this.options.min||0),s=e,o=i;return"string"==typeof s?s=this.categoryIndex(s):Ho(s)&&(s-=r),"string"==typeof o?o=this.categoryIndex(o):Ho(o)&&(o-=r),t.prototype.slot.call(this,s,o,n)},e.prototype.pointCategoryIndex=function(t){var e=this.options,i=e.reverse,n=e.justified,r=e.vertical?Lo:Ro,s=this.scaleOptions(),o=s.scale,a=s.box,l=s.min,c=s.max,h=i?c:l,u=a[r+1],p=a[r+2],d=t[r];if(d<u||d>p)return null;var f=h+(d-u)/o,g=f%1;return n?f=Math.round(f):0===g&&f>0&&f--,Math.floor(f)},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},e.prototype.categoryIndex=function(t){return this.totalIndex(t)-Math.floor(this.options.min||0)},e.prototype.categoryAt=function(t,e){var i=this.options;return(e?i.srcCategories:i.categories)[t]},e.prototype.categoriesCount=function(){return(this.options.categories||[]).length},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),r=e.categories.length,s=Il(t/(n/r),vo);return{min:s,max:r+s}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.totalRangeIndices(),r=n.max-n.min,s=this.scaleToDelta(t,r),o=i*s,a=(1-i)*s,l=n.min+o,c=n.max-a;return c-l<.1&&(c=l+.1),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var i=this.totalRange(),n=i.min,r=i.max,s=this.scaleRange(t,e);return{min:El(s.min,n,r),max:El(s.max,n,r)}},e.prototype.labelsCount=function(){var t=this.labelsRange();return t.max-t.min},e.prototype.labelsRange=function(){var t=this.options,e=t.justified,i=t.labels,n=this.totalRangeIndices(!0),r=n.min,s=n.max,o=Math.floor(r);return e?(r=Math.ceil(r),s=Math.floor(s)):(r=Math.floor(r),s=Math.ceil(s)),{min:(r>i.skip?i.skip+i.step*Math.ceil((r-i.skip)/i.step):i.skip)-o,max:(t.categories.length?s+(e?1:0):0)-o}},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=n.dataItems?n.dataItems[t]:null,s=Dl(n.categories[t],"");i.dataItem=r;var o=this.axisLabelText(s,e,i);return new np(s,o,t,r,e)},e.prototype.shouldRenderNote=function(t){var e=this.totalRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)},e.prototype.noteSlot=function(t){var e=this.options,i=t-Math.floor(e.min||0);return this.getSlot(i)},e.prototype.arrangeNotes=function(){t.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},e.prototype.hideOutOfRangeNotes=function(){var t=this.notes,e=this.box;if(t&&t.length)for(var i=this.options.vertical?Lo:Ro,n=e[i+1],r=e[i+2],s=0;s<t.length;s++){var o=t[s];o.box&&(r<o.box[i+1]||o.box[i+2]<n)&&o.hide()}},e.prototype.pan=function(t){var e=this.totalRangeIndices(!0),i=this.scaleOptions().scale,n=Il(t/i,vo),r=this.totalRange(),s=e.min+n,o=e.max+n;return this.limitRange(s,o,0,r.max,n)},e.prototype.pointsRange=function(t,e){var i=this.options,n=i.reverse,r=i.vertical?Lo:Ro,s=this.totalRangeIndices(!0),o=this.scaleOptions(),a=o.scale,l=o.box[r+(n?2:1)],c=t[r]-l,h=e[r]-l,u=s.min+c/a,p=s.min+h/a,d=Math.min(u,p),f=Math.max(u,p);if(f-d>=.01)return{min:d,max:f}},e.prototype.valueRange=function(){return this.range()},e.prototype.totalIndex=function(t){var e=this.options,i=this._categoriesMap?this._categoriesMap.get(t):function(t,e){if(t instanceof Date){for(var i=e.length,n=0;n<i;n++)if(Yp(e[n],t))return n;return-1}return e.indexOf(t)}(t,e.srcCategories);return i},e.prototype.currentRangeIndices=function(){var t=this.options,e=0;return Ho(t.min)&&(e=Math.floor(t.min)),{min:e,max:Ho(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1}},e.prototype.mapCategories=function(){if(!this._categoriesMap)for(var t=this._categoriesMap=new pa,e=this.options.srcCategories,i=0;i<e.length;i++)t.set(e[i],i)},e.prototype.totalCount=function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},e}(kp);Nl(nd,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:ho},labels:{zIndex:1},justified:!1,_deferLabels:!0});const rd=nd;var sd=3e5,od={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},ad=[Cp,Ap,_p,Tp,Op,Ep,Mp,Pp],ld="fit";function cd(t){var e=t._range;return e||((e=t._range=Bl(t)).min=$p(e.min),e.max=$p(e.max)),e}var hd=function(t){this.options=t};hd.prototype.displayIndices=function(){return{min:0,max:1}},hd.prototype.displayRange=function(){return{}},hd.prototype.total=function(){return{}},hd.prototype.valueRange=function(){return{}},hd.prototype.valueIndex=function(){return-1},hd.prototype.values=function(){return[]},hd.prototype.totalIndex=function(){return-1},hd.prototype.valuesCount=function(){return 0},hd.prototype.totalCount=function(){return 0},hd.prototype.dateAt=function(){return null};var ud=function(t,e,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;var n=i.roundToBaseUnit,r=i.justified;this.start=Vp(t,0,i.baseUnit,i.weekStartDay);var s=this.roundToTotalStep(e),o=!r&&Yp(e,s)&&!i.justifyEnd;this.end=this.roundToTotalStep(e,!r,o?1:0);var a=i.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=n?this.valueStart:a;var l=i.max;if(l){var c=!r&&Yp(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,c),this.displayEnd=n?this.roundToTotalStep(l,!r):i.max}else this.valueEnd=s,this.displayEnd=n||o?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function pd(t,e,i){for(var n,r,s,o=cd(t.categories),a=(t.max||o.max)-(t.min||o.min),l=t.autoBaseUnitSteps,c=t.maxDateGroups,h=t.baseUnit===ld,u=e?ad.indexOf(e):0,p=h?ad[u++]:t.baseUnit,d=a/jp[p],f=d;!r||d>=c;){n=n||l[p].slice(0);do{s=n.shift()}while(s&&e===p&&s<i);if(s)d=f/(r=s);else{if(p===Ol(ad)){r=Math.ceil(f/c);break}if(!h){d>c&&(r=Math.ceil(f/c));break}p=ad[u++]||Ol(ad),f=a/jp[p],n=null}}t.baseUnitStep=r,t.baseUnit=p}function dd(t){var e=(t.baseUnit||"").toLowerCase();return e!==ld&&!da(e,ad)&&function(t){for(var e,i,n=t.categories,r=xl(n)?n.length:0,s=ko,o=0;o<r;o++){var a=n[o];if(a&&e){var l=zp(a,e);l>0&&(i=(s=Math.min(s,l))>=Bp?Pp:s>=24192e5?Mp:s>=Lp?Ep:s>=Rp?Op:s>=Dp?Tp:s>=Fp?_p:Ap)}e=a}t.baseUnit=i||Op}(t),e!==ld&&"auto"!==t.baseUnitStep||pd(t),t}ud.prototype.displayRange=function(){return{min:this.displayStart,max:this.displayEnd}},ud.prototype.displayIndices=function(){if(!this._indices){var t=this.options,e=t.baseUnit,i=t.baseUnitStep,n=Zp(this.displayStart,this.valueStart,e,i),r=Zp(this.displayEnd,this.valueStart,e,i);this._indices={min:n,max:r}}return this._indices},ud.prototype.total=function(){return{min:this.start,max:this.end}},ud.prototype.totalCount=function(){return this.totalIndex(this.end)+(this.options.justified?1:0)},ud.prototype.valueRange=function(){return{min:this.valueStart,max:this.valueEnd}},ud.prototype.valueIndex=function(t){var e=this.options;return Math.floor(Zp(t,this.valueStart,e.baseUnit,e.baseUnitStep))},ud.prototype.totalIndex=function(t){var e=this.options;return Math.floor(Zp(t,this.start,e.baseUnit,e.baseUnitStep))},ud.prototype.dateIndex=function(t){var e=this.options;return Zp(t,this.valueStart,e.baseUnit,e.baseUnitStep)},ud.prototype.valuesCount=function(){return this.valueIndex(this.valueEnd)+1},ud.prototype.values=function(){var t=this._values;if(!t){var e=this.options,i=this.valueRange();this._values=t=[];for(var n=i.min;n<=i.max;)t.push(n),n=Vp(n,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t},ud.prototype.dateAt=function(t,e){var i=this.options;return Vp(e?this.start:this.valueStart,i.baseUnitStep*t,i.baseUnit,i.weekStartDay)},ud.prototype.roundToTotalStep=function(t,e,i){var n=this.options,r=n.baseUnit,s=n.baseUnitStep,o=n.weekStartDay,a=this.start,l=Zp(t,a,r,s),c=e?Math.ceil(l):Math.floor(l);return i&&(c+=i),Vp(a,c*s,r,o)};var fd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(Object.assign({},this.options),this.chartService);return t.createLabels(),t},e.prototype.categoriesHash=function(){var t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t},e.prototype.initUserOptions=function(t){return t},e.prototype.initFields=function(){t.prototype.initFields.call(this);var e=this.chartService,i=e.intl,n=this.options,r=n.categories||[];if(r._parsed||((r=ed(i,r))._parsed=!0),n=Ko({roundToBaseUnit:!0},n,{categories:r,min:td(i,n.min),max:td(i,n.max),weekStartDay:id(n,i)}),e.panning&&e.isPannable(n.vertical?Lo:Ro)&&(n.roundToBaseUnit=!1),n.userSetBaseUnit=n.userSetBaseUnit||n.baseUnit,n.userSetBaseUnitStep=n.userSetBaseUnitStep||n.baseUnitStep,this.options=n,n.srcCategories=r,r.length>0){var s=cd(r),o=n.maxDivisions;if(this.dataRange=new ud(s.min,s.max,dd(n)),o){var a=this.dataRange.displayRange(),l=Object.assign({},n,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:a.min,max:a.max,maxDateGroups:o}),c=this.dataRange.options;pd(l,c.baseUnit,c.baseUnitStep),this.divisionRange=new ud(s.min,s.max,l)}else this.divisionRange=this.dataRange}else n.baseUnit=n.baseUnit||Op,this.dataRange=this.divisionRange=new hd(n);this.rangeLabels=[]},e.prototype.tickIndices=function(e){var i=this.dataRange,n=this.divisionRange,r=n.valuesCount();if(!this.options.maxDivisions||!r)return t.prototype.tickIndices.call(this,e);var s=[],o=n.values(),a=0;this.options.justified||(o=o.concat(n.dateAt(r)),a=.5);for(var l=0;l<o.length;l++)if(s.push(i.dateIndex(o[l])+a),1!==e&&l>=1){var c=s.length-1;s.splice(l,0,s[c-1]+(s[c]-s[c-1])*e)}return s},e.prototype.shouldRenderNote=function(t){var e=this.range(),i=this.options.categories||[];return Xp(t,e.min)>=0&&Xp(t,e.max)<=0&&i.length},e.prototype.parseNoteValue=function(t){return td(this.chartService.intl,t)},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.translateRange=function(t){var e=this.options,i=e.baseUnit,n=e.weekStartDay,r=e.vertical,s=this.lineBox(),o=r?s.height():s.width(),a=this.range(),l=o/(a.max-a.min),c=Il(t/l,vo);if(a.min&&a.max){var h=Up(e.min||a.min,c),u=Up(e.max||a.max,c);a={min:Vp(h,0,i,n),max:Vp(u,0,i,n)}}return a},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},e.prototype.pan=function(t){if(this.isEmpty())return null;var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),r=this.dataRange.displayRange(),s=r.min,o=r.max,a=this.dataRange.total(),l=Il(t/(n/(o-s)),vo)*(e.reverse?-1:1),c=Up(s,l),h=Up(o,l),u=this.limitRange(Kp(c),Kp(h),Kp(a.min),Kp(a.max),l);return u?(u.min=$p(u.min),u.max=$p(u.max),u.baseUnit=e.baseUnit,u.baseUnitStep=e.baseUnitStep||1,u.userSetBaseUnit=e.userSetBaseUnit,u.userSetBaseUnitStep=e.userSetBaseUnitStep,u):void 0},e.prototype.pointsRange=function(e,i){if(this.isEmpty())return null;var n=t.prototype.pointsRange.call(this,e,i),r=this.dataRange.displayRange(),s=this.dataRange.displayIndices(),o=Gp(r.max,r.min)/(s.max-s.min),a=this.options;return{min:Up(r.min,n.min*o),max:Up(r.min,n.max*o),baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}},e.prototype.scaleRange=function(t,e){if(this.isEmpty())return{};var i=this.options,n=i.userSetBaseUnit===ld,r=this.dataRange.total(),s=this.dataRange.displayRange(),o=s.min,a=s.max,l=Math.abs(this.pointOffset(e)),c=a-o,h=this.scaleToDelta(t,c),u=Math.round(l*h),p=Math.round((1-l)*h),d=this.dataRange.options.baseUnit,f=new Date(o.getTime()+u),g=new Date(a.getTime()-p);if(n){var m,y,v=i.autoBaseUnitSteps,b=i.maxDateGroups,w=Ol(v[d])*b*jp[d],x=Gp(a,o),S=Gp(g,f),k=ad.indexOf(d);if(S<jp[d]&&d!==Cp)d=ad[k-1],f=Up(o,y=(x-(b-1)*(m=Ol(v[d]))*jp[d])/2),g=Up(a,-y);else if(S>w&&d!==Pp){var C=0;do{k++,d=ad[k],C=0,y=2*jp[d];do{m=v[d][C],C++}while(C<v[d].length&&y*m<x)}while(d!==Pp&&y*m<x);(y=(y*m-x)/2)>0&&(f=Up(o,-y),g=Up(a,y),f=Up(f,El(g,r.min,r.max)-g),g=Up(g,El(f,r.min,r.max)-f))}}return f&&g&&Gp(g,f)>0?{min:f,max:g,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0},e.prototype.zoomRange=function(t,e){var i=this.dataRange.total(),n=this.scaleRange(t,e);return n&&(n.min<i.min&&(n.min=i.min),n.max>i.max&&(n.max=i.max)),n},e.prototype.range=function(){return this.dataRange.displayRange()},e.prototype.createLabels=function(){t.prototype.createLabels.call(this),this.createRangeLabels()},e.prototype.clearLabels=function(){t.prototype.clearLabels.call(this),this.rangeLabels=[]},e.prototype.arrangeLabels=function(){this.arrangeRangeLabels(),t.prototype.arrangeLabels.call(this)},e.prototype.arrangeRangeLabels=function(){var t=this.options,e=this.rangeLabels;if(0!==e.length){var i=this.lineBox(),n=t.vertical,r=t.rangeLabels.mirror||t.labels.mirror,s=e[0];if(s){var o=n?i.y1-s.box.height()/2:i.x1;this.positionLabel(s,r,o)}var a=e[1];if(a){var l=n?i.y2-a.box.height()/2:i.x2;this.positionLabel(a,r,l)}}},e.prototype.autoRotateLabels=function(){t.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){t.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},e.prototype.hideOverlappingLabels=function(){var t=this.rangeLabels,e=this.labels;if(0!==t.length){var i=t[0];if(i&&i.options.visible)for(var n=0;n<e.length;n++){if(!o(i,e[n]))break}var r=t[1];if(r&&r.options.visible)for(var s=e.length-1;s>0;--s){if(!o(r,e[s]))break}}function o(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}},e.prototype.contentBox=function(){for(var e=t.prototype.contentBox.call(this),i=this.rangeLabels,n=0;n<i.length;n++){var r=i[n];r.options.visible&&e.wrap(r.box)}return e},e.prototype.createAxisLabel=function(t,e,i){void 0===i&&(i={});var n=this.options,r=n.dataItems&&!n.maxDivisions?n.dataItems[t]:null,s=this.divisionRange.dateAt(t),o=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||o,i.dataItem=r;var a=this.axisLabelText(s,e,i);if(a)return new np(s,a,t,r,e)},e.prototype.createRangeLabels=function(){var t=this,e=this.divisionRange,i=e.displayStart,n=e.displayEnd,r=this.options,s=Object.assign({},r.labels,r.rangeLabels,{align:po,zIndex:r.zIndex});if(!0===s.visible){this.normalizeLabelRotation(s),s.alignRotation=po,"auto"===s.rotation&&(s.rotation=0,r.autoRotateRangeLabels=!0);var o=s.dateFormats[this.divisionRange.options.baseUnit];s.format=s.format||o;var a=function(e,i,n){if(n){var r=new np(i,n,e,null,s);t.append(r),t.rangeLabels.push(r)}};a(0,i,this.axisLabelText(i,s,{index:0,count:2})),a(1,n,this.axisLabelText(n,s,{index:1,count:2}))}},e.prototype.autoRotateRangeLabels=function(){var t=this,e=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===e.length){var i=function(e,i,n){var r=2*Math.abs(i[n+1]-i[n]),s=t.autoRotateLabelAngle(e.box,r);0!==s&&(e.options.rotation=s,e.reflow(new Ec))},n=this.getMajorTickPositions();i(e[0],n,0),i(e[1],n,n.length-2)}},e.prototype.categoryIndex=function(t){return this.dataRange.valueIndex(t)},e.prototype.slot=function(t,e,i){var n=this.dataRange,r=t,s=e;r instanceof Date&&(r=n.dateIndex(r)),s instanceof Date&&(s=n.dateIndex(s));var o=this.getSlot(r,s,i);if(o)return o.toRect()},e.prototype.getSlot=function(e,i,n){var r=e,s=i;return typeof r===_o&&(r=this.categoryIndex(r)),typeof s===_o&&(s=this.categoryIndex(s)),t.prototype.getSlot.call(this,r,s,n)},e.prototype.valueRange=function(){var t=cd(this.options.srcCategories);return{min:$p(t.min),max:$p(t.max)}},e.prototype.categoryAt=function(t,e){return this.dataRange.dateAt(t,e)},e.prototype.categoriesCount=function(){return this.dataRange.valuesCount()},e.prototype.rangeIndices=function(){return this.dataRange.displayIndices()},e.prototype.labelsBetweenTicks=function(){return!this.divisionRange.options.justified},e.prototype.prepareUserOptions=function(){this.isEmpty()||(this.options.categories=this.dataRange.values())},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)},e.prototype.totalIndex=function(t){return this.dataRange.totalIndex(t)},e.prototype.currentRangeIndices=function(){var t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalRange=function(){return this.dataRange.total()},e.prototype.totalCount=function(){return this.dataRange.totalCount()},e.prototype.isEmpty=function(){return!this.options.srcCategories.length},e.prototype.roundedRange=function(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var t=this.options,e=cd(t.srcCategories);return new ud(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:t.justified})).displayRange()},e}(rd);Nl(fd,{type:mo,labels:{dateFormats:od},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const gd=fd;function md(t,e){return Il(Math.floor(t/e)*e,vo)}function yd(t,e){return Il(Math.ceil(t/e)*e,vo)}function vd(t){return Math.max(Math.min(t,sd),-3e5)}var bd=Math.pow(10,-9),wd=function(t){function e(e,i,n,r){t.call(this,Object.assign({},n,{seriesMin:e,seriesMax:i}),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=function(t,e,i){var n=i.narrowRange,r=function(t,e,i){if(!t&&!e)return 0;var n;if(t>=0&&e>=0){var r=t===e?0:t;if(!1===i||!i&&(e-r)/e>.2)return 0;n=Math.max(0,r-(e-r)/2)}else n=t;return n}(t,e,n),s=function(t,e,i){if(!t&&!e)return 1;var n;if(t<=0&&e<=0){var r=t===e?0:e,s=Math.abs((r-t)/r);if(!1===i||!i&&s>.2)return 0;n=Math.min(0,r-(t-r)/2)}else n=e;return n}(t,e,n),o=pc(r,s),a={majorUnit:o};!1!==i.roundToMajorUnit&&(r<0&&xd(r,o,1/3)&&(r-=o),s>0&&xd(s,o,1/3)&&(s+=o));return a.min=md(r,o),a.max=yd(s,o),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:xl(e.min)?Math.min(t.min,e.min):t.min,max:xl(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){var i,n,r=e;if(e){!function(t,e){for(var i=0;i<e.length;i++){var n=e[i];null===t[n]&&(t[n]=void 0)}}(e,["min","max"]),i=xl(e.min),n=xl(e.max);var s=i||n;s&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=md(t.min,e.majorUnit),t.max=yd(t.max,e.majorUnit)):s&&(r=Ko(t,e),t.majorUnit=pc(r.min,r.max))}t.minorUnit=(r.majorUnit||t.majorUnit)/5;var o=Ko(t,r);o.min>=o.max&&(i&&!n?o.max=o.min+o.majorUnit:!i&&n&&(o.min=o.max-o.majorUnit));return o}(e,t)},e.prototype.initFields=function(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return 0},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){if(0===t)return 1;var e=this.options,i=e.max-e.min;return Math.floor(Il(i/t,3))+1},e.prototype.getTickPositions=function(t,e){var i=this.options,n=this.lineInfo(),r=n.axisDir,s=n.axisOrigin,o=n.lineBox,a=t*(n.lineSize/(i.max-i.min)),l=this.getDivisions(t),c=[],h=o[s],u=0;e&&(u=e/t);for(var p=0;p<l;p++)p%u!=0&&c.push(Il(h,3)),h+=a*r;return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){void 0===i&&(i=!1);var n=this.options,r=this.lineInfo(),s=r.axis,o=r.axisDir,a=r.lineBox,l=r.lineSize,c=r.lineStart,h=o*(l/(n.max-n.min)),u=Dl(t,e||0),p=Dl(e,t||0);i&&(u=El(u,n.min,n.max),p=El(p,n.min,n.max));var d=Math.min(u,p)-n.min,f=Math.max(u,p)-n.min,g=new Ec(a.x1,a.y1,a.x1,a.y1);return g[s+1]=vd(c+h*(o>0?d:f)),g[s+2]=vd(c+h*(o>0?f:d)),g},e.prototype.getValue=function(t){var e=this.options,i=Number(e.max),n=Number(e.min),r=this.pointOffset(t);return r<0||r>1?null:Il(n+r*(i-n),vo)},e.prototype.translateRange=function(t){var e=this.options,i=e.vertical,n=e.reverse,r=e.max,s=e.min,o=this.lineInfo().lineSize,a=Il(t/(o/(r-s)),vo);return!i&&!n||i&&n||(a=-a),{min:s+a,max:r+a,offset:a}},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=Il(n.min+t*n.majorUnit,vo),s=this.axisLabelText(r,e,i);return new np(r,s,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e),r=Math.min(i,n),s=Math.max(i,n);if(this.isValidRange(r,s))return{min:r,max:s}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.options.max-this.options.min,r=this.scaleToDelta(t,n),s=i*r,o=(1-i)*r,a=Il(this.options.min+s,vo),l=Il(this.options.max-o,vo);return l-a<bd&&(l=a+bd),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.totalMin,n=this.totalMax,r=this.scaleRange(t,e);return{min:El(r.min,i,n),max:El(r.max,i,n),narrowRange:!1}},e.prototype.isValidRange=function(t,e){return e-t>bd},e}(kp);function xd(t,e,i){var n=Il(Math.abs(t%e),vo);return 0===n||n>e*(1-i)}Nl(wd,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:ho},labels:{format:"#.####################"},zIndex:1});const Sd=wd;var kd=function(t){function e(e,i,n,r){var s=$p(e),o=$p(i),a=r.intl,l=n||{};l=function(t,e,i){var n=i.min||t,r=i.max||e,s=i.baseUnit||(r&&n?function(t){var e=Tp;t>=Bp?e=Pp:t>=Np?e=Mp:t>=Lp?e=Ep:t>=Rp&&(e=Op);return e}(zp(r,n)):Tp),o=jp[s],a=i.weekStartDay||0,l=qp(Kp(n)-1,s,a)||$p(r),c=Wp(Kp(r)+1,s,a),h=(i.majorUnit?i.majorUnit:void 0)||yd(pc(l.getTime(),c.getTime()),o)/o,u=Qp(l,c,s),p=yd(u,h)-u,d=Math.floor(p/2),f=p-d;i.baseUnit||delete i.baseUnit;return i.baseUnit=i.baseUnit||s,i.min=i.min||Vp(l,-d,s,a),i.max=i.max||Vp(c,f,s,a),i.minorUnit=i.minorUnit||h/5,i.majorUnit=h,i}(s,o,l=Ko(l||{},{min:td(a,l.min),max:td(a,l.max),axisCrossingValue:ed(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:id(l,a)})),t.call(this,l,r),this.intlService=a,this.seriesMin=s,this.seriesMax=o;var c=l.weekStartDay||0;this.totalMin=Kp(qp(Kp(s)-1,l.baseUnit,c)),this.totalMax=Kp(Wp(Kp(o)+1,l.baseUnit,c))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){var e=this.options;return Math.floor(Qp(e.min,e.max,e.baseUnit)/t+1)},e.prototype.getTickPositions=function(t){for(var e=this.options,i=this.lineInfo(),n=i.axisDir,r=i.lineSize,s=i.lineStart,o=this.getDivisions(t),a=r/Gp(e.max,e.min),l=e.weekStartDay||0,c=[s],h=1;h<o;h++){var u=s+Gp(Vp(e.min,h*t,e.baseUnit,l),e.min)*a*n;c.push(Il(u,3))}return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){return Sd.prototype.getSlot.call(this,td(this.intlService,t),td(this.intlService,e),i)},e.prototype.getValue=function(t){var e=Sd.prototype.getValue.call(this,t);return null!==e?$p(e):null},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=t*n.majorUnit,s=n.weekStartDay||0,o=n.min;r>0&&(o=Vp(o,r,n.baseUnit,s));var a=e.dateFormats[n.baseUnit];e.format=e.format||a;var l=this.axisLabelText(o,e,i);return new np(o,l,t,null,e)},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),n=e.vertical,r=e.reverse,s=n?i.height():i.width(),o=this.range(),a=s/Gp(o.max,o.min),l=Il(t/a,vo);return!n&&!r||n&&r||(l=-l),{min:Up(e.min,l),max:Up(e.max,l),offset:l}},e.prototype.shouldRenderNote=function(t){var e=this.range();return Xp(t,e.min)>=0&&Xp(t,e.max)<=0},e.prototype.pan=function(t){var e=this.translateRange(t,!0),i=this.limitRange(Kp(e.min),Kp(e.max),this.totalMin,this.totalMax,e.offset);if(i)return{min:$p(i.min),max:$p(i.max)}},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e),r=Math.min(i,n),s=Math.max(i,n);return{min:$p(r),max:$p(s)}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.options.max-this.options.min,r=this.scaleToDelta(t,n),s=i*r,o=(1-i)*r,a=$p(Kp(this.options.min)+s),l=$p(Kp(this.options.max)-o);return l-a<1e3&&(l=$p(Kp(a)+1e3)),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e);return{min:$p(El(Kp(i.min),this.totalMin,this.totalMax)),max:$p(El(Kp(i.max),this.totalMin,this.totalMax))}},e}(kp);Nl(kd,{type:mo,majorGridLines:{visible:!0,width:1,color:ho},labels:{dateFormats:od}});const Cd=kd;var Ad=1e-6,_d=function(t){function e(e,i,n,r){var s=Ko({majorUnit:10,min:e,max:i},n),o=s.majorUnit,a=function(t,e){var i,n=Il(Od(t,e),vo)%1;i=t<=0?e:0!==n&&(n<.3||n>.9)?Math.pow(e,Od(t,e)+.2):Math.pow(e,Math.ceil(Od(t,e)));return i}(i,o),l=function(t,e,i){var n=i.majorUnit,r=t;t<=0?r=e<=1?Math.pow(n,-2):1:i.narrowRange||(r=Math.pow(n,Math.floor(Od(t,n))));return r}(e,i,s),c=function(t,e,i,n){var r=i.min,s=i.max;xl(i.axisCrossingValue)&&i.axisCrossingValue<=0&&Td();xl(n.max)?n.max<=0&&Td():s=e;xl(n.min)?n.min<=0&&Td():r=t;return{min:r,max:s}}(l,a,s,n);s.max=c.max,s.min=c.min,s.minorUnit=n.minorUnit||Il(o-1,vo),t.call(this,s,r),this.totalMin=xl(n.min)?Math.min(l,n.min):l,this.totalMax=xl(n.max)?Math.max(a,n.max):a,this.logMin=Il(Od(c.min,o),vo),this.logMax=Il(Od(c.max,o),vo),this.seriesMin=e,this.seriesMax=i,this.createLabels()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return this.options.min},e.prototype.getSlot=function(t,e,i){var n=this,r=n.options,s=n.logMin,o=n.logMax,a=r.majorUnit,l=r.min,c=r.max,h=this.lineInfo(),u=h.axis,p=h.axisDir,d=h.lineBox,f=h.lineSize,g=h.lineStart,m=p*(f/(o-s)),y=Dl(t,e||1),v=Dl(e,t||1);if(y<=0||v<=0)return null;i&&(y=El(y,l,c),v=El(v,l,c)),y=Od(y,a),v=Od(v,a);var b=Math.min(y,v)-s,w=Math.max(y,v)-s,x=new Ec(d.x1,d.y1,d.x1,d.y1);return x[u+1]=vd(g+m*(p>0?b:w)),x[u+2]=vd(g+m*(p>0?w:b)),x},e.prototype.getValue=function(t){var e=this,i=e.options,n=e.logMin,r=e.logMax,s=i.majorUnit,o=this.lineInfo(),a=o.axis,l=o.axisDir,c=o.lineStart,h=o.lineSize,u=(r-n)/h,p=l*(t[a]-c);if(p<0||p>h)return null;var d=n+p*u;return Il(Math.pow(s,d),vo)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.translateRange=function(t){var e=this,i=e.options,n=e.logMin,r=e.logMax,s=i.reverse,o=i.vertical,a=i.majorUnit,l=this.lineBox(),c=o?l.height():l.width(),h=Il(t/(c/(r-n)),vo);return!o&&!s||o&&s||(h=-h),{min:Math.pow(a,n+h),max:Math.pow(a,r+h),offset:h}},e.prototype.labelsCount=function(){var t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1},e.prototype.getMajorTickPositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},e.prototype.createTicks=function(t){var e=this.options,i=e.majorTicks,n=e.minorTicks,r=e.vertical,s=e.labels.mirror,o=this.lineBox(),a={vertical:r};function l(e,i){a.tickX=s?o.x2:o.x2-i.size,a.tickY=s?o.y1-i.size:o.y1,a.position=e,t.append(wp(a,i))}return i.visible&&this.traverseMajorTicksPositions(l,i),n.visible&&this.traverseMinorTicksPositions(l,n),[]},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,n=e.majorGridLines,r=e.vertical,s=t.lineBox(),o={lineStart:s[r?"x1":"y1"],lineEnd:s[r?"x2":"y2"],vertical:r},a=[],l=this.gridLinesVisual();function c(t,e){da(t,a)||(o.position=t,l.append(xp(o,e)),a.push(t))}return n.visible&&this.traverseMajorTicksPositions(c,n),i.visible&&this.traverseMinorTicksPositions(c,i),l.children},e.prototype.traverseMajorTicksPositions=function(t,e){for(var i=this.lineInfo(),n=i.lineStart,r=i.step,s=this.logMin,o=this.logMax,a=Math.ceil(s)+e.skip;a<=o;a+=e.step){t(Il(n+r*(a-s),vo),e)}},e.prototype.traverseMinorTicksPositions=function(t,e){for(var i=this.options,n=i.min,r=i.max,s=i.minorUnit,o=i.majorUnit,a=this.lineInfo(),l=a.lineStart,c=a.step,h=this.logMin,u=this.logMax,p=Math.floor(h);p<u;p++)for(var d=this._minorIntervalOptions(p),f=e.skip;f<s;f+=e.step){var g=d.value+f*d.minorStep;if(g>r)break;if(g>=n)t(Il(l+c*(Od(g,o)-h),vo),e)}},e.prototype.createAxisLabel=function(t,e,i){var n=Math.ceil(this.logMin+t),r=Math.pow(this.options.majorUnit,n),s=this.axisLabelText(r,e,i);return new np(r,s,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e);return{min:Math.min(i,n),max:Math.max(i,n)}},e.prototype.scaleRange=function(t,e){var i=this.options.majorUnit,n=Od(this.options.min,i),r=Od(this.options.max,i),s=Math.abs(this.pointOffset(e)),o=r-n,a=this.scaleToDelta(t,o),l=Math.pow(i,n+s*a),c=Math.pow(i,r-(1-s)*a);return c-l<Ad&&(c=l+Ad),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e),n=this.totalMin,r=this.totalMax;return{min:El(i.min,n,r),max:El(i.max,n,r)}},e.prototype._minorIntervalOptions=function(t){var e=this.options,i=e.minorUnit,n=e.majorUnit,r=Math.pow(n,t);return{value:r,minorStep:(Math.pow(n,t+1)-r)/i}},e.prototype.lineInfo=function(){var e=t.prototype.lineInfo.call(this);return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e},e}(kp);function Td(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function Od(t,e){return Math.log(t)/Math.log(e)}Nl(_d,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:ho},zIndex:1,_deferLabels:!0});const Ed=_d;var Md={createGridLines:function(t){var e,i,n=this.options,r=Math.abs(this.box.center().y-t.lineBox().y1),s=[],o=!1;return n.majorGridLines.visible&&(e=this.majorGridLineAngles(t),o=!0,s=this.renderMajorGridLines(e,r,n.majorGridLines)),n.minorGridLines.visible&&(i=this.minorGridLineAngles(t,o),bl(s,this.renderMinorGridLines(i,r,n.minorGridLines,t,o))),s},renderMajorGridLines:function(t,e,i){return this.renderGridLines(t,e,i)},renderMinorGridLines:function(t,e,i,n,r){var s=this.radiusCallback&&this.radiusCallback(e,n,r);return this.renderGridLines(t,e,i,s)},renderGridLines:function(t,e,i,n){for(var r={stroke:{width:i.width,color:i.color,dashType:i.dashType}},s=this.box.center(),o=new eu([s.x,s.y],e),a=this.gridLinesVisual(),l=0;l<t.length;l++){var c=new Kh(r);n&&(o.radius=n(t[l])),c.moveTo(o.center).lineTo(o.pointAt(t[l]+180)),a.append(c)}return a.children},gridLineAngles:function(t,e,i,n,r){var s=this,o=this.intervals(e,i,n,r),a=t.options,l=a.visible&&!1!==(a.line||{}).visible;return ba(o,(function(t){var e=s.intervalAngle(t);if(!l||90!==e)return e}))}};const Pd=Md;var Id=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.range=function(){return{min:0,max:this.options.categories.length}},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.lineBox=function(){return this.box},e.prototype.reflowLabels=function(){for(var t=this.labels,e=this.options.labels,i=e.skip||0,n=e.step||1,r=new Ec,s=0;s<t.length;s++){t[s].reflow(r);var o=t[s].box;t[s].reflow(this.getSlot(i+s*n).adjacentBox(0,o.width(),o.height()))}},e.prototype.intervals=function(t,e,i,n){void 0===n&&(n=!1);for(var r=this.options,s=r.categories.length/t||1,o=360/s,a=i||1,l=[],c=0,h=e||0;h<s;h+=a)c=r.reverse?360-h*o:h*o,c=Il(c,3)%360,n&&da(c,n)||l.push(c);return l},e.prototype.majorIntervals=function(){return this.intervals(1)},e.prototype.minorIntervals=function(){return this.intervals(.5)},e.prototype.intervalAngle=function(t){return(360+t+this.options.startAngle)%360},e.prototype.majorAngles=function(){var t=this;return ba(this.majorIntervals(),(function(e){return t.intervalAngle(e)}))},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,n=i.minorGridLines,r=i.majorGridLines,s=e?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(t,.5,n.skip,n.step,s)},e.prototype.radiusCallback=function(t,e,i){if(e.options.type!==co){var n=Pl(360/(2*this.options.categories.length)),r=Math.cos(n)*t,s=this.majorAngles(),o=function(e){return!i&&da(e,s)?t:r};return o}},e.prototype.createPlotBands=function(){for(var t=this.options.plotBands||[],e=this._plotbandGroup=new lu({zIndex:-1}),i=0;i<t.length;i++){var n=t[i],r=this.plotBandSlot(n),s=this.getSlot(n.from),o=n.from-Math.floor(n.from);r.startAngle+=o*s.angle;var a=Math.ceil(n.to)-n.to;r.angle-=(a+o)*s.angle;var l=Zh.current.createRing(r,{fill:{color:n.color,opacity:n.opacity},stroke:{opacity:n.opacity}});e.append(l)}this.appendVisual(e)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to-1)},e.prototype.getSlot=function(t,e){var i=this.options,n=i.justified,r=this.box,s=this.majorAngles(),o=s.length,a=360/o,l=t;i.reverse&&!n&&(l=(l+1)%o);var c=s[l=El(Math.floor(l),0,o-1)];n&&(c-=a/2)<0&&(c+=360);var h=a*(El(Math.ceil(e||l),l,o-1)-l+1);return new Ic(r.center(),0,r.height()/2,c,h)},e.prototype.slot=function(t,e){var i=this.getSlot(t,e),n=i.startAngle+180,r=n+i.angle;return new Vc([i.center.x,i.center.y],{startAngle:n,endAngle:r,radiusX:i.radius,radiusY:i.radius})},e.prototype.pointCategoryIndex=function(t){for(var e=this.options.categories.length,i=null,n=0;n<e;n++){if(this.getSlot(n).containsPoint(t)){i=n;break}}return i},e}(rd);Nl(Id,{startAngle:90,labels:{margin:ea(10)},majorGridLines:{visible:!0},justified:!0}),Ko(Id.prototype,Pd);const Fd=Id;var Dd=function(t){function e(e,i){t.call(this,e,i);var n=this.options;n.minorUnit=n.minorUnit||n.majorUnit/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDivisions=function(t){return Sd.prototype.getDivisions.call(this,t)-1},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.reflowLabels=function(){for(var t=this,e=t.options,i=t.labels,n=t.options.labels,r=n.skip||0,s=n.step||1,o=new Ec,a=this.intervals(e.majorUnit,r,s),l=0;l<i.length;l++){i[l].reflow(o);var c=i[l].box;i[l].reflow(this.getSlot(a[l]).adjacentBox(0,c.width(),c.height()))}},e.prototype.lineBox=function(){return this.box},e.prototype.intervals=function(t,e,i,n){void 0===n&&(n=!1);for(var r=this.options.min,s=this.getDivisions(t),o=[],a=i||1,l=e||0;l<s;l+=a){var c=(360+r+l*t)%360;n&&da(c,n)||o.push(c)}return o},e.prototype.majorIntervals=function(){return this.intervals(this.options.majorUnit)},e.prototype.minorIntervals=function(){return this.intervals(this.options.minorUnit)},e.prototype.intervalAngle=function(t){return(540-t-this.options.startAngle)%360},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,n=i.minorGridLines,r=i.majorGridLines,s=e?this.intervals(i.majorUnit,r.skip,r.step):null;return this.gridLineAngles(t,i.minorUnit,n.skip,n.step,s)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to)},e.prototype.getSlot=function(t,e){var i=this.options,n=this.box,r=i.startAngle,s=El(t,i.min,i.max),o=El(e||s,s,i.max);if(i.reverse&&(s*=-1,o*=-1),(o=(540-o-r)%360)<(s=(540-s-r)%360)){var a=s;s=o,o=a}return new Ic(n.center(),0,n.height()/2,s,o-s)},e.prototype.slot=function(t,e){void 0===e&&(e=t);var i,n,r=this.options,s=360-r.startAngle,o=this.getSlot(t,e),a=Math.min(t,e),l=Math.max(t,e);return r.reverse?(i=a,n=l):(i=360-l,n=360-a),i=(i+s)%360,n=(n+s)%360,new Vc([o.center.x,o.center.y],{startAngle:i,endAngle:n,radiusX:o.radius,radiusY:o.radius})},e.prototype.getValue=function(t){var e=this.options,i=this.box.center(),n=t.x-i.x,r=t.y-i.y,s=Math.round(Sl(Math.atan2(r,n))),o=e.startAngle;return e.reverse||(s*=-1,o*=-1),(s+o+360)%360},e.prototype.valueRange=function(){return{min:0,max:2*Math.PI}},e}(kp);Nl(Dd,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:ea(10)},majorGridLines:{color:ho,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),Ko(Dd.prototype,Pd,{createPlotBands:Fd.prototype.createPlotBands,majorAngles:Fd.prototype.majorAngles,range:Sd.prototype.range,labelsCount:Sd.prototype.labelsCount,createAxisLabel:Sd.prototype.createAxisLabel});const Rd=Dd;var Ld={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var t=this.options,e=t.majorGridLines.type,i=t.plotBands;void 0===i&&(i=[]);for(var n=this.plotArea.polarAxis,r=n.majorAngles(),s=n.box.center(),o=this._plotbandGroup=new lu({zIndex:-1}),a=0;a<i.length;a++){var l=i[a],c={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},h=this.getSlot(l.from,l.to,!0),u=new Ic(s,s.y-h.y2,s.y-h.y1,0,360),p=void 0;p=e===co?Zh.current.createRing(u,c):Kh.fromPoints(this.plotBandPoints(u,r),c).close(),o.append(p)}this.appendVisual(o)},plotBandPoints:function(t,e){for(var i=[],n=[],r=[t.center.x,t.center.y],s=new eu(r,t.innerRadius),o=new eu(r,t.radius),a=0;a<e.length;a++)i.push(s.pointAt(e[a]+180)),n.push(o.pointAt(e[a]+180));return i.reverse(),i.push(i[0]),n.push(n[0]),n.concat(i)},createGridLines:function(t){var e=this.options,i=this.radarMajorGridLinePositions(),n=t.majorAngles(),r=t.box.center(),s=[];if(e.majorGridLines.visible&&(s=this.renderGridLines(r,i,n,e.majorGridLines)),e.minorGridLines.visible){var o=this.radarMinorGridLinePositions();bl(s,this.renderGridLines(r,o,n,e.minorGridLines))}return s},renderGridLines:function(t,e,i,n){var r={stroke:{width:n.width,color:n.color,dashType:n.dashType}},s=n.skip;void 0===s&&(s=0);var o=n.step;void 0===o&&(o=0);for(var a=this.gridLinesVisual(),l=s;l<e.length;l+=o){var c=t.y-e[l];if(c>0){var h=new eu([t.x,t.y],c);if(n.type===co)a.append(new su(h,r));else{for(var u=new Kh(r),p=0;p<i.length;p++)u.lineTo(h.pointAt(i[p]+180));u.close(),a.append(u)}}}return a.children},getValue:function(t){var e=this.lineBox(),i=this.plotArea.polarAxis,n=i.majorAngles(),r=i.box.center(),s=t.distanceTo(r),o=s;if(this.options.majorGridLines.type!==co&&n.length>1){var a=t.x-r.x,l=t.y-r.y,c=(Sl(Math.atan2(l,a))+540)%360;n.sort((function(t,e){return Nd(t,c)-Nd(e,c)}));var h=90-Nd(n[0],n[1])/2,u=180-Nd(c,n[0])-h;o=s*(Math.sin(Pl(u))/Math.sin(Pl(h)))}return this.axisType().prototype.getValue.call(this,new fc(e.x1,e.y2-o))}};function Nd(t,e){return 180-Math.abs(Math.abs(t-e)-180)}const Bd=Ld;var jd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.radarMinorGridLinePositions=function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},e.prototype.axisType=function(){return t},e}(Sd);Ko(jd.prototype,Bd);const zd=jd;var Ud=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},e.prototype.radarMinorGridLinePositions=function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},e.prototype.axisType=function(){return t},e}(Ed);Ko(Ud.prototype,Bd);const $d=Ud;var Hd=function(t){function e(e){t.call(this),this.closed=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){var e=t.slice(0),i=[],n=this.closed,r=e.length;if(r>2&&(this.removeDuplicates(0,e),r=e.length),r<2||2===r&&e[0].equals(e[1]))return i;var s,o,a=e[0],l=e[1],c=e[2];for(i.push(new bh(a));a.equals(e[r-1]);)n=!0,e.pop(),r--;if(2===r){var h=this.tangent(a,l,Ro,Lo);return Ol(i).controlOut(this.firstControlPoint(h,a,l,Ro,Lo)),i.push(new bh(l,this.secondControlPoint(h,a,l,Ro,Lo))),i}if(n){a=e[r-1],l=e[0],c=e[1];var u=this.controlPoints(a,l,c);s=u[1],o=u[0]}else{var p=this.tangent(a,l,Ro,Lo);s=this.firstControlPoint(p,a,l,Ro,Lo)}for(var d=s,f=0;f<=r-3;f++)if(this.removeDuplicates(f,e),f+3<=(r=e.length)){a=e[f],l=e[f+1],c=e[f+2];var g=this.controlPoints(a,l,c);Ol(i).controlOut(d),d=g[1];var m=g[0];i.push(new bh(l,m))}if(n){a=e[r-2],l=e[r-1],c=e[0];var y=this.controlPoints(a,l,c);Ol(i).controlOut(d),i.push(new bh(l,y[0])),Ol(i).controlOut(y[1]),i.push(new bh(c,o))}else{var v=this.tangent(l,c,Ro,Lo);Ol(i).controlOut(d),i.push(new bh(c,this.secondControlPoint(v,l,c,Ro,Lo)))}return i},e.prototype.removeDuplicates=function(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)},e.prototype.invertAxis=function(t,e,i){var n=!1;if(t.x===e.x)n=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(n=!0);else{var r=this.lineFunction(t,e),s=this.calculateFunction(r,i.x);t.y<=e.y&&i.y<=s||e.y<=t.y&&i.y>=s||(n=!0)}return n},e.prototype.isLine=function(t,e,i){var n=this.lineFunction(t,e),r=this.calculateFunction(n,i.x);return t.x===e.x&&e.x===i.x||Il(r,1)===Il(i.y,1)},e.prototype.lineFunction=function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},e.prototype.controlPoints=function(t,e,i){var n,r=Ro,s=Lo,o=!1,a=!1;if(this.isLine(t,e,i))n=this.tangent(t,e,Ro,Lo);else{var l={x:this.isMonotonicByField(t,e,i,Ro),y:this.isMonotonicByField(t,e,i,Lo)};if(l.x&&l.y)n=this.tangent(t,i,Ro,Lo),o=!0;else if(this.invertAxis(t,e,i)&&(r=Lo,s=Ro),l[r])n=0;else n=.01*(i[s]<t[s]&&t[s]<=e[s]||t[s]<i[s]&&e[s]<=t[s]?Vd((i[s]-t[s])*(e[r]-t[r])):-Vd((i[r]-t[r])*(e[s]-t[s]))),a=!0}var c=this.secondControlPoint(n,t,e,r,s);if(a){var h=r;r=s,s=h}var u=this.firstControlPoint(n,e,i,r,s);return o&&(this.restrictControlPoint(t,e,c,n),this.restrictControlPoint(e,i,u,n)),[c,u]},e.prototype.restrictControlPoint=function(t,e,i,n){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/n,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/n,i.y=t.y)},e.prototype.tangent=function(t,e,i,n){var r,s=e[i]-t[i],o=e[n]-t[n];return r=0===s?0:o/s,r},e.prototype.isMonotonicByField=function(t,e,i,n){return i[n]>e[n]&&e[n]>t[n]||i[n]<e[n]&&e[n]<t[n]},e.prototype.firstControlPoint=function(t,e,i,n,r){var s=e[n],o=.333*(i[n]-s);return this.point(s+o,e[r]+o*t,n,r)},e.prototype.secondControlPoint=function(t,e,i,n,r){var s=e[n],o=i[n],a=.333*(o-s);return this.point(o-a,i[r]-a*t,n,r)},e.prototype.point=function(t,e,i,n){var r=new Sc;return r[i]=t,r[n]=e,r},e.prototype.calculateFunction=function(t,e){for(var i=t.length,n=0,r=0;r<i;r++)n+=Math.pow(e,r)*t[r];return n},e}(el);function Vd(t){return t<=0?-1:1}const qd=Hd;var Wd=function(t){function e(e){t.call(this),this._axis=e,this.options=e.options}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this._axis,i=e.getCategory?e.getCategory(t):e.getValue(t);return i},e.prototype.slot=function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},e.prototype.range=function(){return this._axis.range()},e.prototype.valueRange=function(){return this._axis.valueRange()},e}(el);const Xd=Wd;function Gd(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new Xd(e[i])}var Kd=function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t};Kd.prototype.findAxisByName=function(t){return Gd(t,this._pane.axes)};const Yd=Kd;var Jd=function(t){function e(e){t.call(this),this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(el);const Zd=Jd;function Qd(t){for(var e=t.length,i=0,n=0;n<e;n++){Ho(t[n])&&i++}return i}var tf={min:function(t){for(var e=t.length,i=ko,n=0;n<e;n++){var r=t[n];Ho(r)&&(i=Math.min(i,r))}return i===ko?t[0]:i},max:function(t){for(var e=t.length,i=Co,n=0;n<e;n++){var r=t[n];Ho(r)&&(i=Math.max(i,r))}return i===Co?t[0]:i},sum:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];Ho(r)&&(i+=r)}return i},sumOrNull:function(t){var e=null;return Qd(t)&&(e=tf.sum(t)),e},count:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];null!==r&&xl(r)&&i++}return i},avg:function(t){var e=Qd(t),i=t[0];return e>0&&(i=tf.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];if(null!==n&&xl(n))return n}return t[0]}};const ef=tf;function nf(t,e){return null===e?e:la(t)(e)}var rf=function(t){function e(){t.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e,i){var n=this;void 0===e&&(e=[Io]),void 0===i&&(i={});for(var r=0;r<t.length;r++){var s=t[r];n._valueFields[s]=e,n._otherFields[s]=i,n._nullValue[s]=n._makeValue(e,null),n._undefinedValue[s]=n._makeValue(e,void 0)}},e.prototype.canonicalFields=function(t){return this.valueFields(t).concat(this.otherFields(t))},e.prototype.valueFields=function(t){return this._valueFields[t.type]||[Io]},e.prototype.otherFields=function(t){return this._otherFields[t.type]||[Io]},e.prototype.bindPoint=function(t,e,i){var n,r,s=t.data,o=xl(i)?i:s[e],a={valueFields:{value:o}},l=this.valueFields(t),c=this._otherFields[t.type];if(null===o)r=this._nullValue[t.type];else if(xl(o)){if(Array.isArray(o)){var h=o.slice(l.length);r=this._bindFromArray(o,l),n=this._bindFromArray(h,c)}else if("object"==typeof o){var u=this.sourceFields(t,l),p=this.sourceFields(t,c);r=this._bindFromObject(o,l,u),n=this._bindFromObject(o,c,p)}}else r=this._undefinedValue[t.type];return xl(r)&&(1===l.length?a.valueFields.value=r[l[0]]:a.valueFields=r),a.fields=n||{},a},e.prototype._makeValue=function(t,e){for(var i={},n=t.length,r=0;r<n;r++){i[t[r]]=e}return i},e.prototype._bindFromArray=function(t,e){var i={};if(e)for(var n=Math.min(e.length,t.length),r=0;r<n;r++)i[e[r]]=t[r];return i},e.prototype._bindFromObject=function(t,e,i){void 0===i&&(i=e);var n={};if(e)for(var r=e.length,s=0;s<r;s++){var o=e[s],a=i[s];null!==a&&(n[o]=nf(a,t))}return n},e.prototype.sourceFields=function(t,e){var i=[];if(e)for(var n=e.length,r=0;r<n;r++){var s=e[r],o=s===Io?"field":s+"Field";i.push(null!==t[o]?t[o]||s:null)}return i},e}(el);rf.current=new rf;const sf=rf;var of=/percent(?:\w*)\((\d+)\)/,af=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),lf=function(t){function e(e,i,n){t.call(this),this.initGlobalRanges(e,i,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initGlobalRanges=function(t,e,i){var n=e.data,r=af.exec(t);if(r){this.valueGetter=this.createValueGetter(e,i);var s=this.getAverage(n),o=this.getStandardDeviation(n,s,!1),a=r[1]?parseFloat(r[1]):1,l={low:s.value-o*a,high:s.value+o*a};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var c=this.getStandardError(n,this.getAverage(n));this.globalRange=function(t){return{low:t-c,high:t+c}}}},e.prototype.createValueGetter=function(t,e){var i,n=t.data,r=sf.current,s=r.valueFields(t),o=xl(n[0])?n[0]:{};if(No(o))i=la("["+(e?s.indexOf(e):0)+"]");else if(Ho(o))i=la();else if(typeof o===_o){i=la(r.sourceFields(t,s)[s.indexOf(e)])}return i},e.prototype.getErrorRange=function(t,e){var i,n,r;if(!xl(e))return null;if(this.globalRange)return this.globalRange(t);if(No(e))i=t-e[0],n=t+e[1];else if(Ho(r=parseFloat(e)))i=t-r,n=t+r;else{if(!(r=of.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var s=t*(parseFloat(r[1])/100);i=t-Math.abs(s),n=t+Math.abs(s)}return{low:i,high:n}},e.prototype.getStandardError=function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},e.prototype.getStandardDeviation=function(t,e,i){for(var n=t.length,r=i?e.count-1:e.count,s=0,o=0;o<n;o++){var a=this.valueGetter(t[o]);Ho(a)&&(s+=Math.pow(a-e.value,2))}return Math.sqrt(s/r)},e.prototype.getAverage=function(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++){var s=this.valueGetter(t[r]);Ho(s)&&(i+=s,n++)}return{value:i/n,count:n}},e}(el);const cf=lf;var hf=Sa.browser||{},uf=600,pf="fadeIn",df=.8,ff=hf.msie?.001:0,gf="errorLow",mf="errorHigh",yf="zero",vf="interpolate",bf="above",wf="below",xf="smooth",Sf="step",kf="area",Cf="bar",Af="boxPlot",_f="bubble",Tf="bullet",Of="candlestick",Ef="column",Mf="donut",Pf="funnel",If="heatmap",Ff="horizontalWaterfall",Df="line",Rf="ohlc",Lf="pie",Nf="polarArea",Bf="polarLine",jf="polarScatter",zf="radarArea",Uf="radarColumn",$f="radarLine",Hf="rangeArea",Vf="rangeBar",qf="rangeColumn",Wf="scatter",Xf="scatterLine",Gf="verticalArea",Kf="verticalBoxPlot",Yf="verticalBullet",Jf="verticalLine",Zf="verticalRangeArea",Qf="waterfall",tg=[Cf,Ef,Rf,Of,Af,Kf,Tf,qf,Vf,Qf,Ff],eg="seriesHover",ig="plotAreaHover",ng="plotAreaLeave",rg="drag",sg="dragEnd",og="dragStart",ag="zoomStart",lg="zoom",cg="zoomEnd",hg="selectStart",ug="select",pg="selectEnd",dg="showTooltip",fg="hideTooltip",gg="log",mg="category",yg="insideEnd",vg="outsideEnd",bg="DOMMouseScroll mousewheel",wg=function(t){function e(e,i,n,r,s,o){t.call(this,o),this.low=e,this.high=i,this.isVertical=n,this.chart=r,this.series=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i=this.options.endCaps,n=this.isVertical,r=this.getAxis().getSlot(this.low,this.high),s=t.center(),o=this.getCapsWidth(t,n),a=n?s.x:s.y,l=a-o,c=a+o;n?(e=[new fc(s.x,r.y1),new fc(s.x,r.y2)],i&&e.push(new fc(l,r.y1),new fc(c,r.y1),new fc(l,r.y2),new fc(c,r.y2)),this.box=new Ec(l,r.y1,c,r.y2)):(e=[new fc(r.x1,s.y),new fc(r.x2,s.y)],i&&e.push(new fc(r.x1,l),new fc(r.x1,c),new fc(r.x2,l),new fc(r.x2,c)),this.box=new Ec(r.x1,l,r.x2,c)),this.linePoints=e},e.prototype.getCapsWidth=function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},e.prototype.createVisual=function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},e.prototype.createDefaultVisual=function(){var e=this.options,i=this.linePoints,n={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};t.prototype.createVisual.call(this);for(var r=0;r<i.length;r+=2){var s=new Kh(n).moveTo(i[r].x,i[r].y).lineTo(i[r+1].x,i[r+1].y);Uo(s),this.visual.append(s)}},e}(wu);Nl(wg,{animation:{type:pf,delay:uf},endCaps:!0,line:{width:2},zIndex:1});const xg=wg;var Sg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){return this.chart.seriesValueAxis(this.series)},e}(xg);const kg=Sg;function Cg(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n=!1);var r=i.defaults=i.defaults||{},s=i.depth=i.depth||0,o=!1;if(i.excluded=i.excluded||[],s>5)return null;for(var a in t)if(!da(a,i.excluded)&&t.hasOwnProperty(a)){var l=t[a];Wo(l)?(o=!0,n||(t[a]=Dl(l(e),r[a]))):Yo(l)&&(n||(i.defaults=r[a]),i.depth++,o=Cg(l,e,i,n)||o,i.depth--)}return o}function Ag(t){for(var e=t.length,i=0,n=0;n<e;n++)i=Math.max(i,t[n].data.length);return i}var _g=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(i.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=Ko({},n,{vertical:!this.options.invertAxes},t)}return i},e.prototype.plotValue=function(t){if(!t)return 0;if(this.options.isStacked100&&Ho(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],n=[],r=0,s=0;s<i.length;s++){var o=i[s];if(o){var a=t.series.stack,l=o.series.stack;if(a&&l&&a.group!==l.group)continue;Ho(o.value)&&(r+=Math.abs(o.value),n.push(Math.abs(o.value)))}}if(r>0)return t.value/r}return t.value},e.prototype.plotRange=function(t,e){void 0===e&&(e=0);var i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){for(var n=this.plotValue(t),r=n>=0,s=e,o=!1,a=0;a<i.length;a++){var l=i[a];if(t===l)break;var c=t.series.stack,h=l.series.stack;if(c&&h){if(typeof c===Mo&&c!==h)continue;if(c.group&&c.group!==h.group)continue}var u=this.plotValue(l);(u>=0&&r||u<0&&!r)&&(s+=u,n+=u,o=!0,this.options.isStacked100&&(n=Math.min(n,1)))}return o&&(s-=e),[s,n]}var p=t.series,d=this.seriesValueAxis(p),f=this.categoryAxisCrossingValue(d);return[f,qo(t.value)?t.value:f]},e.prototype.stackLimits=function(t,e){for(var i=ko,n=Co,r=0;r<this.categoryPoints.length;r++){var s=this.categoryPoints[r];if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a&&(a.series.stack===e||a.series.axis===t)){var l=this.plotRange(a,0)[1];xl(l)&&isFinite(l)&&(n=Math.max(n,l),i=Math.min(i,l))}}}return{min:i,max:n}},e.prototype.updateStackRange=function(){var t=this,e=this.options,i=e.isStacked,n=e.series,r={};if(i)for(var s=0;s<n.length;s++){var o=n[s],a=o.axis,l=a+o.stack,c=r[l];if(!c){c=t.stackLimits(a,o.stack);var h=t.errorTotals;h&&(h.negative.length&&(c.min=Math.min(c.min,Bl(h.negative).min)),h.positive.length&&(c.max=Math.max(c.max,Bl(h.positive).max))),c.min!==ko||c.max!==Co?r[l]=c:c=null}c&&(t.valueAxisRanges[a]=c)}},e.prototype.addErrorBar=function(t,e,i){var n,r=t.value,s=t.series,o=t.seriesIx,a=t.options.errorBars,l=e.fields.errorLow,c=e.fields.errorHigh;Ho(l)&&Ho(c)?n={low:l,high:c}:a&&xl(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[o]=this.seriesErrorRanges[o]||new cf(a.value,s,Io),n=this.seriesErrorRanges[o].getErrorRange(r,a.value)),n&&(t.low=n.low,t.high=n.high,this.addPointErrorBar(t,i))},e.prototype.addPointErrorBar=function(t,e){var i=!this.options.invertAxes,n=t.options.errorBars,r=t.series,s=t.low,o=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);s=a.low,o=a.high}else{var l={categoryIx:e,series:r};this.updateRange({value:s},l),this.updateRange({value:o},l)}var c=new kg(s,o,i,this,r,n);t.errorBars=[c],t.append(c)},e.prototype.stackedErrorRange=function(t,e){var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,r=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,n)),r>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,r)),{low:n,high:r}},e.prototype.addValue=function(t,e){var i=e.categoryIx,n=e.series,r=e.seriesIx,s=this.categoryPoints[i];s||(this.categoryPoints[i]=s=[]);var o=this.seriesPoints[r];o||(this.seriesPoints[r]=o=[]);var a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,xl(a.dataItem)||(a.dataItem=n.data[i]),this.addErrorBar(a,t,i)),this.points.push(a),o.push(a),s.push(a),this.updateRange(t.valueFields,e)},e.prototype.evalPointOptions=function(t,e,i,n,r,s){var o={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},a=this._evalSeries[s];xl(a)||(this._evalSeries[s]=a=Cg(t,{},o,!0));var l=t;return a&&Cg(l=Ko({},l),{value:e,category:i,index:n,series:r,dataItem:r.data[n]},o),l},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=t.value,r=this.valueAxisRanges[i];isFinite(n)&&null!==n&&((r=this.valueAxisRanges[i]=r||{min:ko,max:Co}).min=Math.min(r.min,n),r.max=Math.max(r.max,n))},e.prototype.seriesValueAxis=function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},e.prototype.reflow=function(t){var e=this,i=this.categorySlots=[],n=this.points,r=this.categoryAxis,s=0;this.traverseDataPoints((function(t,o){var a=o.categoryIx,l=o.series,c=e.seriesValueAxis(l),h=n[s++],u=i[a];if(u||(i[a]=u=e.categorySlot(r,a,c)),h){var p=e.plotRange(h,c.startValue()),d=e.valueSlot(c,p);if(d){var f=e.pointSlot(u,d);h.aboveAxis=e.aboveAxis(h,c),h.stackValue=p[1],e.options.isStacked100&&(h.percentage=e.plotValue(h)),e.reflowPoint(h,f)}else h.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},e.prototype.valueSlot=function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},e.prototype.limitPoints=function(){for(var t=this.categoryPoints,e=t[0].concat(Ol(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},e.prototype.limitPoint=function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},e.prototype.aboveAxis=function(t,e){var i=this.categoryAxisCrossingValue(e),n=t.value;return e.options.reverse?n<i:n>=i},e.prototype.categoryAxisCrossingValue=function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},e.prototype.reflowPoint=function(t,e){t.reflow(e)},e.prototype.reflowCategories=function(){},e.prototype.pointSlot=function(t,e){var i=this.options.invertAxes,n=i?e:t,r=i?t:e;return new Ec(n.x1,r.y1,n.x2,r.y2)},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,n=Ag(i),r=i.length,s=0;s<r;s++)e._outOfRangeCallback(i[s],"_outOfRangeMinPoint",s,t);for(var o=0;o<n;o++)for(var a=0;a<r;a++){var l=i[a],c=e.categoryAxis.categoryAt(o);t(e._bindPoint(l,a,o),{category:c,categoryIx:o,categoriesCount:n,series:l,seriesIx:a})}for(var h=0;h<r;h++)e._outOfRangeCallback(i[h],"_outOfRangeMaxPoint",h,t)},e.prototype._outOfRangeCallback=function(t,e,i,n){var r=t[e];if(r){var s=r.categoryIx;n(this._bindPoint(t,i,s,r.item),{category:r.category,categoryIx:s,series:t,seriesIx:i,dataItem:r.item})}},e.prototype._bindPoint=function(t,e,i,n){this._bindCache||(this._bindCache=[]);var r=this._bindCache[e];r||(r=this._bindCache[e]=[]);var s=r[i];return s||(s=r[i]=sf.current.bindPoint(t,i,n)),s},e.prototype.formatPointValue=function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},e.prototype.pointValue=function(t){return t.valueFields.value},e}(wu);Nl(_g,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Tg=_g;var Og={click:function(t,e){return t.trigger("seriesClick",this.eventArgs(e))},hover:function(t,e){return t.trigger(eg,this.eventArgs(e))},over:function(t,e){return t.trigger("seriesOver",this.eventArgs(e))},out:function(t,e){return t.trigger("seriesLeave",this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:_l(t),originalEvent:t,point:this}}};const Eg=Og;var Mg={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&xl(e)&&null!==e&&(this.note=new sp({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};const Pg=Mg;var Ig=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=Dl(this.options.aboveAxis,!0),this.tooltipTracking=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options,e=t.markers,i=t.labels;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),i.visible){var n=sa(i),r=this.pointData(),s=this.value;n?s=n(r):i.format&&(s=this.formatValue(i.format)),this.label=new Zu(s,Ko({align:po,vAlign:po,margin:{left:5,right:5},zIndex:Dl(i.zIndex,this.series.zIndex)},i),r),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},e.prototype.markerBorder=function(){var t=this.options.markers,e=t.background,i=Ko({color:this.color},t.border);return xl(i.color)||(i.color=new ic(e).brightness(df).toHex()),i},e.prototype.createVisual=function(){},e.prototype.createMarker=function(){var t=this.options.markers;return new Cu({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:Dl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},e.prototype.markerBox=function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},e.prototype.reflow=function(t){var e=this.options,i=this.aboveAxis,n=e.vertical;this.render(),this.box=t;var r=t.clone();if(n?i?r.y1-=r.height():r.y2+=r.height():i?r.x1+=r.width():r.x2-=r.width(),this._childBox=r,this.marker&&this.marker.reflow(r),this.reflowLabel(r),this.errorBars)for(var s=0;s<this.errorBars.length;s++)this.errorBars[s].reflow(r);if(this.note){var o=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=o.center();o=new Ec(a.x,a.y,a.x,a.y)}this.note.reflow(o)}},e.prototype.reflowLabel=function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n=(n=n===bf?Po:n)===wf?uo:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},e.prototype.createHighlight=function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,n=i.size+(i.border.width||0)+(t.border.width||0),r=new Cu({type:i.type,width:n,height:n,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:Dl(t.border.opacity,1)},opacity:Dl(t.opacity,1)});return r.reflow(this._childBox),r.getElement()},e.prototype.highlightVisual=function(){return(this.marker||{}).visual},e.prototype.highlightVisualArgs=function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var n=this.options.markers.size,r=n/2,s=this.box.center();e=new _c([s.x-r,s.y-r],[n,n])}return{options:this.options,rect:e,visual:t}},e.prototype.tooltipAnchor=function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,n,r=t.x2+5;return this.aboveAxis?(i=t.y1,n=uo):(i=t.y2,n=Po),{point:new fc(r,i),align:{horizontal:"left",vertical:n}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.markerBox().overlaps(t)},e.prototype.unclipElements=function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},e}(wu);Ig.prototype.defaults={vertical:!0,markers:{visible:!0,background:Fo,size:8,type:fo,border:{width:2},opacity:1},labels:{visible:!1,position:bf,margin:ea(3),padding:ea(4),animation:{type:pf,delay:uf}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}}},Ko(Ig.prototype,Eg),Ko(Ig.prototype,Pg);const Fg=Ig;var Dg=function(t){function e(e,i,n){t.call(this),this.linePoints=e,this.series=i,this.seriesIx=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.toGeometryPoints(this.linePoints)},e.prototype.toGeometryPoints=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},e.prototype.createVisual=function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!xl(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},e.prototype.segmentVisual=function(){var t=this.options,e=this.series,i=e.color,n=e._defaults;Wo(i)&&n&&(i=n.color);var r=Kh.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&r.close(),this.visual=r},e.prototype.aliasFor=function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)},e}(wu);Nl(Dg,{closed:!1});const Rg=Dg;var Lg={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,n=e.vertical,r=e.reverse,s=n?Ro:Lo,o=n?Lo:Ro,a=r?2:1,l=a,c=Ng(t[0],s,a,o,l),h=[c],u=1;u<t.length;u++){var p=Ng(t[u],s,a,o,l);if(c[s]!==p[s]){var d=new Sc;d[s]=c[s],d[o]=p[o],h.push(d,p)}c=p}return i?c!==Ol(h)&&h.push(c):h.push(Ng(Ol(t),s,a,o,r?1:2)),h}};function Ng(t,e,i,n,r){var s=t.box,o=new Sc;return o[e]=s[e+i],o[n]=s[n+r],o}const Bg=Lg;var jg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.calculateStepPoints(this.linePoints)},e}(Rg);Ko(jg.prototype,Bg);const zg=jg;var Ug=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.segmentVisual=function(){var t=this.series,e=t._defaults,i=t.color;Wo(i)&&e&&(i=e.color);var n=new qd(this.options.closed).process(this.points()),r=new Kh({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});r.segments.push.apply(r.segments,n),this.visual=r},e}(Rg);const $g=Ug;var Hg={renderSegments:function(){var t,e=this,i=this.options,n=this.seriesPoints,r=i.series,s=n.length;this._segments=[];for(var o=0;o<s;o++){for(var a=r[o],l=e.sortPoints(n[o]),c=l.length,h=[],u=0;u<c;u++){var p=l[u];p?h.push(p):e.seriesMissingValues(a)!==vf&&(h.length>1&&(t=e.createSegment(h,a,o,t),e._addSegment(t)),h=[])}h.length>1&&(t=e.createSegment(h,a,o,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?yf:e||vf},getNearestPoint:function(t,e,i){for(var n,r=new fc(t,e),s=this.seriesPoints[i],o=ko,a=0;a<s.length;a++){var l=s[a];if(l&&xl(l.value)&&null!==l.value&&!1!==l.visible){var c=l.box.center().distanceTo(r);c<o&&(n=l,o=c)}}return n}};const Vg=Hg;var qg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._setEnd(this.options.box.x1)},e.prototype.step=function(t){var e=this.options.box;this._setEnd(ga(e.x1,e.x2,t))},e.prototype._setEnd=function(t){var e=this.element,i=e.segments,n=i[1].anchor(),r=i[2].anchor();e.suspend(),n.setX(t),e.resume(),r.setX(t)},e}(vu);Nl(qg,{duration:uf}),mu.current.register("clip",qg);const Wg=qg;function Xg(t){for(var e=0;e<t.length;e++)if(xl(t[e].zIndex))return!0}var Gg={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=Kh.fromRect(e.toRect());this.visual.clip(i),this.animation=new Wg(i,{box:e}),Xg(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var n=e[i];n&&n.visual&&xl(n.visual.options.zIndex)&&n.visual.clip(t)}}};const Kg=Gg;var Yg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},e.prototype.pointType=function(){return Fg},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,s=e.seriesIx,o=this.seriesMissingValues(r),a=t.valueFields.value;if(!xl(a)||null===a){if(o!==yf)return null;a=0}var l=this.pointOptions(r,s);l=this.evalPointOptions(l,a,n,i,r,s);var c=t.fields.color||r.color;Wo(r.color)&&(c=l.color);var h=new Fg(a,l);return h.color=c,this.append(h),h},e.prototype.plotRange=function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,n=this.categoryPoints[i],r=0;r<n.length;r++){var s=n[r];if(t===s)break;e+=this.plotValue(s),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},e.prototype.createSegment=function(t,e,i){var n=e.style;return new(n===Sf?zg:n===xf?$g:Rg)(t,e,i)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Tg);Ko(Yg.prototype,Vg,Kg);const Jg=Yg;var Zg=function(t){function e(e,i,n,r,s){t.call(this,e,i,n),this.prevSegment=r,this.stackPoints=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){var t=this.series,e=t._defaults,i=t.line||{},n=t.color;Wo(n)&&e&&(n=e.color),this.visual=new lu({zIndex:t.zIndex}),this.createFill({fill:{color:n,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:Ko({color:n,opacity:t.opacity,lineCap:"butt"},i)})},e.prototype.strokeSegments=function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.points())},e.prototype.stackSegments=function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},e.prototype.segmentsFromPoints=function(t){return t.map((function(t){return new bh(t)}))},e.prototype.createStroke=function(t){var e=new Kh(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},e.prototype.hasStackSegment=function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},e.prototype.createFill=function(t){var e=this.strokeSegments(),i=e.slice(0),n=this.hasStackSegment();if(n){var r=this.stackSegments();bl(i,r)}var s=new Kh(t);s.segments.push.apply(s.segments,i),!n&&e.length>1&&this.fillToAxes(s),this.visual.append(s)},e.prototype.fillToAxes=function(t){var e=this.parent,i=e.options.invertAxes,n=e.seriesValueAxis(this.series),r=e.categoryAxisCrossingValue(n),s=n.getSlot(r,r,!0),o=this.strokeSegments(),a=o[0].anchor(),l=Ol(o).anchor(),c=i?s.x1:s.y1;i?t.lineTo(c,l.y).lineTo(c,a.y):t.lineTo(l.x,c).lineTo(a.x,c)},e}(Rg);const Qg=Zg;var tm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()},e}(Qg);Ko(tm.prototype,Bg);const em=tm;var im=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){var t=new qd(this.options.closed),e=this.points();return t.process(e)},e.prototype.createStackSegments=function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var n=t[i];e.push(new bh(n.anchor(),n.controlOut(),n.controlIn()))}return e},e}(Qg);const nm=im;var rm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,n){var r,s,o=this.options.isStacked,a=(e.line||{}).style;o&&i>0&&n&&("gap"!==this.seriesMissingValues(e)?(s=n.linePoints,r=n):s=this._gapStackPoints(t,i,a));return new(a===Sf?em:a===xf?nm:Qg)(t,e,i,r,s)},e.prototype.reflow=function(e){t.prototype.reflow.call(this,e);var i=this._stackPoints;if(i)for(var n=0;n<i.length;n++){var r=i[n],s=this.categoryAxis.getSlot(r.categoryIx);r.reflow(s)}},e.prototype._gapStackPoints=function(t,e,i){var n=this,r=this.seriesPoints,s=t[0].categoryIx,o=t.length;s<0&&(s=0,o--);var a=s+o,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,c=[];this._stackPoints=this._stackPoints||[];for(var h=s;h<a;h++){var u=h+l,p=e,d=void 0;do{d=r[--p][u]}while(p>0&&!d);if(d)i!==Sf&&h>s&&!r[p][u-1]&&c.push(n._previousSegmentPoint(h,u,u-1,p)),c.push(d),i!==Sf&&h+1<a&&!r[p][u+1]&&c.push(n._previousSegmentPoint(h,u,u+1,p));else{var f=n._createGapStackPoint(h);n._stackPoints.push(f),c.push(f)}}return c},e.prototype._previousSegmentPoint=function(t,e,i,n){for(var r,s=this.seriesPoints,o=n;o>0&&!r;)r=s[--o][i];return r?r=s[o][e]:(r=this._createGapStackPoint(t),this._stackPoints.push(r)),r},e.prototype._createGapStackPoint=function(t){var e=this.pointOptions({},0),i=new Fg(0,e);return i.categoryIx=t,i.series={},i},e.prototype.seriesMissingValues=function(t){return t.missingValues||yf},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Jg);const sm=rm;var om=function(t){function e(){t.call(this),this.axisRanges={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){var e=this.axisRanges;for(var i in t){var n=t[i],r=e[i];e[i]=r=r||{min:ko,max:Co},r.min=Math.min(r.min,n.min),r.max=Math.max(r.max,n.max)}},e.prototype.reset=function(t){this.axisRanges[t]=void 0},e.prototype.query=function(t){return this.axisRanges[t]},e}(el);const am=om;var lm=function(t){function e(e,i,n){t.call(this,i),this.textBox=new Zu(e,this.options,n),this.append(this.textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.textBox.options.noclip=this.options.noclip},e.prototype.reflow=function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,r=this.children[0],s=r.options,o=r.box,a=r.options.padding,l=t;s.align=i?po:So,s.vAlign=i?Po:po,e.position===yg?i?(s.vAlign=Po,!n&&o.height()<t.height()&&(s.vAlign=uo)):s.align=n?Oo:So:e.position===po?(s.vAlign=po,s.align=po):"insideBase"===e.position?i?s.vAlign=n?uo:Po:s.align=n?So:Oo:e.position===vg&&(i?l=n?new Ec(t.x1,t.y1-o.height(),t.x2,t.y1):new Ec(t.x1,t.y2,t.x2,t.y2+o.height()):(s.align=po,l=n?new Ec(t.x2,t.y1,t.x2+o.width(),t.y2):new Ec(t.x1-o.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(l.width()-r.contentBox.width())/2:a.top=a.bottom=(l.height()-r.contentBox.height())/2),r.reflow(l)},e.prototype.alignToClipBox=function(t){var e=this.options.vertical?Lo:Ro,i=e+"1",n=e+"2",r=this.children[0],s=this.parent.box;if(s[i]<t[i]||t[n]<s[n]){var o=r.paddingBox.clone();o[i]=Math.max(s[i],t[i]),o[n]=Math.min(s[n],t[n]),this.reflow(o)}},e}(wu);Nl(lm,{position:vg,margin:ea(3),padding:ea(4),color:ho,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:pf,delay:uf},zIndex:2});const cm=lm;function hm(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}var um=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||Fo,this.aboveAxis=Dl(this.options.aboveAxis,!0),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options,e=t.labels;if(e.visible){var i,n=this.pointData(),r=sa(e);i=r?r(n):this.formatValue(e.format),this.label=new cm(i,Ko({vertical:t.vertical},e),n),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},e.prototype.createVisual=function(){var e=this,i=this.box,n=this.options,r=n.visual;if(!1!==this.visible)if(t.prototype.createVisual.call(this),r){var s=this.rectVisual=r({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var t=new lu;return e.createRect(t),t},options:n});s&&this.visual.append(s)}else i.width()>0&&i.height()>0&&this.createRect(this.visual)},e.prototype.createRect=function(t){var e=this.options,i=e.border,n=xl(i.opacity)?i.opacity:e.opacity,r=this.box.toRect();r.size.width=Math.round(r.size.width);var s=this.rectVisual=Kh.fromRect(r,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}}),o=this.box.width(),a=this.box.height();if((e.vertical?o:a)>6&&(Uo(s),(o<1||a<1)&&(s.options.stroke.lineJoin="round")),t.append(s),hm(e)){var l=this.createGradientOverlay(s,{baseColor:this.color},Ko({end:e.vertical?void 0:[0,1]},e.overlay));t.append(l)}},e.prototype.createHighlight=function(t){return Uo(Kh.fromRect(this.box.toRect(),t))},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.getBorderColor=function(){var t=this.color,e=this.options.border,i=e._brightness||df,n=e.color;return xl(n)||(n=new ic(t).brightness(i).toHex()),n},e.prototype.tooltipAnchor=function(){var t,e,i=this,n=i.options,r=i.box,s=i.aboveAxis,o=this.owner.pane.clipBox()||r,a=So,l=Po;if(n.vertical)t=Math.min(r.x2,o.x2)+5,s?e=Math.max(r.y1,o.y1):(e=Math.min(r.y2,o.y2),l=uo);else{var c=Math.max(r.x1,o.x1),h=Math.min(r.x2,o.x2);n.isStacked?(l=uo,s?(a=Oo,t=h):t=c,e=Math.max(r.y1,o.y1)-5):(s?t=h+5:(t=c-5,a=Oo),e=Math.max(r.y1,o.y1))}return{point:new fc(t,e),align:{horizontal:a,vertical:l}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},e}(wu);Ko(um.prototype,Eg),Ko(um.prototype,Pg),um.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};const pm=um;function dm(t,e){t.forEach(e)}function fm(t,e){for(var i=t.length,n=i-1;n>=0;n--)e(t[n],n-i-1)}var gm=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?fm:dm}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.vertical,n=e.gap,r=e.spacing,s=this.children,o=s.length,a=i?Lo:Ro,l=o+n+r*(o-1),c=(i?t.height():t.width())/l,h=t[a+1]+c*(n/2);this.forEach(s,(function(e,i){var n=(e.box||t).clone();n[a+1]=h,n[a+2]=h+c,e.reflow(n),i<o-1&&(h+=c*r),h+=c}))},e}(wu);Nl(gm,{vertical:!1,gap:0,spacing:0});const mm=gm;var ym=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){for(var e=this.options.vertical?Ro:Lo,i=this.children,n=i.length,r=this.box=new Ec,s=0;s<n;s++){var o=i[s];if(!1!==o.visible){var a=o.box.clone();a.snapTo(t,e),0===s&&(r=this.box=a.clone()),o.reflow(a),r.wrap(a)}}},e}(wu);Nl(ym,{vertical:!0});const vm=ym;var bm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange()},e.prototype.pointType=function(){return pm},e.prototype.clusterType=function(){return mm},e.prototype.stackType=function(){return vm},e.prototype.stackLimits=function(e,i){return t.prototype.stackLimits.call(this,e,i)},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,s=e.seriesIx,o=this.options,a=this.children,l=o.isStacked,c=this.pointValue(t),h=this.pointOptions(r,s),u=h.labels;l&&u.position===vg&&(u.position=yg),h.isStacked=l;var p=t.fields.color||r.color;c<0&&h.negativeColor&&(p=h.negativeColor),h=this.evalPointOptions(h,c,n,i,r,s),Wo(r.color)&&(p=h.color);var d=new(this.pointType())(c,h);d.color=p;var f=a[i];f||(f=new(this.clusterType())({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(f));l?this.getStackWrap(r,f).append(d):f.append(d);return d},e.prototype.getStackWrap=function(t,e){var i,n=t.stack,r=n&&n.group||n,s=e.children;if(typeof r===Mo){for(var o=0;o<s.length;o++)if(s[o]._stackGroup===r){i=s[o];break}}else i=s[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=r,e.append(i));return i},e.prototype.categorySlot=function(t,e,i){var n=this.options,r=t.getSlot(e),s=i.startValue();if(n.isStacked){var o=i.getSlot(s,s,!0),a=n.invertAxes?Ro:Lo;r[a+1]=r[a+2]=o[a+1]}return r},e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.createAnimation=function(){this._setAnimationOptions(),t.prototype.createAnimation.call(this),Xg(this.options.series)&&this._setChildrenAnimation()},e.prototype._setChildrenAnimation=function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],n=i.visual;n&&xl(n.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},e.prototype._setAnimationOptions=function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);t=n.getSlot(n.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new Sc(t.x1,t.y1),i.vertical=!e.invertAxes},e}(Tg);Nl(bm,{animation:{type:Cf}});const wm=bm;var xm=function(t){function e(e,i){t.call(this,i),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,n=e.value,r=e.owner.seriesValueAxis(i),s=r.getSlot(n.open,n.close),o=r.getSlot(n.low,n.high);s.x1=o.x1=t.x1,s.x2=o.x2=t.x2,this.realBody=s;var a=o.center().x,l=[];l.push([[a,o.y1],[a,s.y1]]),l.push([[a,s.y2],[a,o.y2]]),this.lines=l,this.box=o.clone().wrap(s),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},e.prototype.reflowNote=function(){this.note&&this.note.reflow(this.box)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},e.prototype.mainVisual=function(t){var e=new lu;return this.createBody(e,t),this.createLines(e,t),e},e.prototype.createBody=function(t,e){var i=Kh.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:Dl(e.border.opacity,e.opacity)}),Uo(i),t.append(i),hm(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},Ko({end:e.vertical?void 0:[0,1]},e.overlay)))},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.lines,e.line)},e.prototype.drawLines=function(t,e,i,n){if(i)for(var r={stroke:{color:n.color||this.color,opacity:Dl(n.opacity,e.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}},s=0;s<i.length;s++){var o=Kh.fromPoints(i[s],r);Uo(o),t.append(o)}},e.prototype.getBorderColor=function(){var t=this.options.border,e=t.color;return xl(e)||(e=new ic(this.color).brightness(t._brightness).toHex()),e},e.prototype.createOverlay=function(){var t=Kh.fromRect(this.box.toRect(),{fill:{color:Fo,opacity:0},stroke:null});this.visual.append(t)},e.prototype.createHighlight=function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(Ko({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},e.prototype.highlightVisual=function(){return this._mainVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},e.prototype.tooltipAnchor=function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new fc(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:So,vertical:Po}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e}(wu);Nl(xm,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),Ko(xm.prototype,Eg),Ko(xm.prototype,Pg);const Sm=xm;function km(t){return Qd(t)===t.length}var Cm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.addValue=function(t,e){var i,n=e.categoryIx,r=e.category,s=e.series,o=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=km(this.splitValue(c)),u=s.data[n],p=this.categoryPoints[n];p||(this.categoryPoints[n]=p=[]),h&&(i=this.createPoint(t,e));var d=a[n];d||(d=new mm({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(c,e),d.append(i),i.categoryIx=n,i.category=r,i.series=s,i.seriesIx=o,i.owner=this,i.dataItem=u,i.noteText=t.fields.noteText),this.points.push(i),p.push(i)},e.prototype.pointType=function(){return Sm},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,s=e.seriesIx,o=this.pointType(),a=t.valueFields,l=Ko({},r),c=t.fields.color||r.color;l=this.evalPointOptions(l,a,n,i,r,s),r.type===Of&&a.open>a.close&&(c=t.fields.downColor||r.downColor||r.color),Wo(r.color)&&(c=l.color),l.vertical=!this.options.invertAxes;var h=new o(a,l);return h.color=c,h},e.prototype.splitValue=function(t){return[t.low,t.open,t.close,t.high]},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=this.splitValue(t),r=this.valueAxisRanges[i];r=this.valueAxisRanges[i]=r||{min:ko,max:Co},r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},e.prototype.animationPoints=function(){return this.points},e}(Tg);Ko(Cm.prototype,Kg);const Am=Cm;var _m=function(t){function e(e,i){t.call(this,e,i),this.createNote()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i,n=this,r=n.options,s=n.value,o=n.owner.seriesValueAxis(r);this.boxSlot=i=o.getSlot(s.q1,s.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=o.getSlot(s.lower,s.upper),this.reflowWhiskerSlot(t);var a=o.getSlot(s.median);if(s.mean){var l=o.getSlot(s.mean);this.meanPoints=this.calcMeanPoints(t,l)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},e.prototype.reflowBoxSlot=function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},e.prototype.calcMeanPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},e.prototype.calcMedianPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.renderOutliers=function(t){for(var e=this.value,i=e.outliers||[],n=3*Math.abs(e.q3-e.q1),r=[],s=t.markers||{},o=0;o<i.length;o++){var a=i[o],l=Ko({},(s=a<e.q3+n&&a>e.q1-n?t.outliers:t.extremes).border);xl(l.color)||(xl(this.color)?l.color=this.color:l.color=new ic(s.background).brightness(df).toHex());var c=new Cu({type:s.type,width:s.size,height:s.size,rotation:s.rotation,background:s.background,border:l,opacity:s.opacity});c.value=a,r.push(c)}return this.reflowOutliers(r),r},e.prototype.reflowOutliers=function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),n=this.box.center(),r=0;r<t.length;r++){var s=t[r].value,o=i.getSlot(s);e.options.vertical?o.move(n.x):o.move(void 0,n.y),e.box=e.box.wrap(o),t[r].reflow(o)}},e.prototype.mainVisual=function(e){for(var i=t.prototype.mainVisual.call(this,e),n=this.renderOutliers(e),r=0;r<n.length;r++){var s=n[r].getElement();s&&i.append(s)}return i},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},e.prototype.getBorderColor=function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:t.prototype.getBorderColor.call(this)},e}(Sm);Nl(_m,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:go,background:Fo,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:fo,background:Fo,border:{width:2,opacity:1},opacity:0}}),Ko(_m.prototype,Eg);const Tm=_m;var Om=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowBoxSlot=function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},e.prototype.calcMeanPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},e.prototype.calcMedianPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e}(Tm);const Em=Om;var Mm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e){var i,n=e.categoryIx,r=e.category,s=e.series,o=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=km(this.splitValue(c)),u=s.data[n],p=this.categoryPoints[n];p||(this.categoryPoints[n]=p=[]),h&&(i=this.createPoint(t,e));var d=a[n];d||(d=new mm({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(c,e),d.append(i),i.categoryIx=n,i.category=r,i.series=s,i.seriesIx=o,i.owner=this,i.dataItem=u),this.points.push(i),p.push(i)},e.prototype.pointType=function(){return this.options.invertAxes?Em:Tm},e.prototype.splitValue=function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=this.valueAxisRanges[i],r=this.splitValue(t).concat(this.filterOutliers(t.outliers));xl(t.mean)&&(r=r.concat(t.mean)),n=this.valueAxisRanges[i]=n||{min:ko,max:Co},n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},e.prototype.filterOutliers=function(t){for(var e=(t||[]).length,i=[],n=0;n<e;n++){var r=t[n];xl(r)&&null!==r&&i.push(r)}return i},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Am);const Pm=Mm;var Im=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x},e}(xg);const Fm=Im;function Dm(t){return xl(t)&&null!==t}var Rm=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.addErrorBar=function(t,e,i){var n,r=t.value[e],s=e+"Value",o=e+"ErrorLow",a=e+"ErrorHigh",l=i.seriesIx,c=i.series,h=t.options.errorBars,u=i[o],p=i[a];Ho(r)&&(Ho(u)&&Ho(p)&&(n={low:u,high:p}),h&&xl(h[s])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new cf(h[s],c,e),n=this.seriesErrorRanges[e][l].getErrorRange(r,h[s])),n&&this.addPointErrorBar(n,t,e))},e.prototype.addPointErrorBar=function(t,e,i){var n=t.low,r=t.high,s=e.series,o=e.options.errorBars,a=i===Lo,l={};e[i+"Low"]=n,e[i+"High"]=r,e.errorBars=e.errorBars||[];var c=new Fm(n,r,a,this,s,o);e.errorBars.push(c),e.append(c),l[i]=n,this.updateRange(l,s),l[i]=r,this.updateRange(l,s)},e.prototype.addValue=function(t,e){var i,n=t.x,r=t.y,s=e.seriesIx,o=this.options.series[s],a=this.seriesMissingValues(o),l=this.seriesPoints[s],c=t;Dm(n)&&Dm(r)||(c=this.createMissingValue(c,a)),c&&((i=this.createPoint(c,e))&&(Object.assign(i,e),this.addErrorBar(i,Ro,e),this.addErrorBar(i,Lo,e)),this.updateRange(c,e.series)),this.points.push(i),l.push(i)},e.prototype.seriesMissingValues=function(t){return t.missingValues},e.prototype.createMissingValue=function(){},e.prototype.updateRange=function(t,e){var i=this.chartService.intl,n=e.xAxis,r=e.yAxis,s=t.x,o=t.y,a=this.xAxisRanges[n],l=this.yAxisRanges[r];Dm(s)&&(a=this.xAxisRanges[n]=a||{min:ko,max:Co},Vo(s)&&(s=td(i,s)),a.min=Math.min(a.min,s),a.max=Math.max(a.max,s)),Dm(o)&&(l=this.yAxisRanges[r]=l||{min:ko,max:Co},Vo(o)&&(o=td(i,o)),l.min=Math.min(l.min,o),l.max=Math.max(l.max,o))},e.prototype.evalPointOptions=function(t,e,i){var n=i.series,r=i.seriesIx,s={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},o=this._evalSeries[r];xl(o)||(this._evalSeries[r]=o=Cg(t,{},s,!0));var a=t;return o&&Cg(a=Ko({},t),{value:e,series:n,dataItem:i.dataItem},s),a},e.prototype.pointType=function(){return Fg},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=Ko({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),r=e.color||i.color;n=this.evalPointOptions(n,t,e),Wo(i.color)&&(r=n.color);var s=new Fg(t,n);return s.color=r,this.append(s),s},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,r=e?n.namedXAxes[e]:n.axisX,s=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!s)throw new Error("Unable to locate Y axis with name "+i);return{x:r,y:s}},e.prototype.reflow=function(t){var e=this,i=this.points,n=!this.options.clip,r=0;this.traverseDataPoints((function(t,s){var o=i[r++],a=e.seriesAxes(s.series),l=a.x.getSlot(t.x,t.x,n),c=a.y.getSlot(t.y,t.y,n);if(o)if(l&&c){var h=e.pointSlot(l,c);o.reflow(h)}else o.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Ec(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=this.seriesPoints,n=0;n<e.length;n++){var r=e[n];i[n]||(i[n]=[]);for(var s=0;s<r.data.length;s++){var o=this._bindPoint(r,n,s),a=o.valueFields,l=o.fields;t(a,Ko({pointIx:s,series:r,seriesIx:n,dataItem:r.data[s],owner:this},l))}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(wu);Nl(Rm,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),Ko(Rm.prototype,Kg,{_bindPoint:Tg.prototype._bindPoint});const Lm=Rm;var Nm=function(t){function e(e,i){t.call(this,e,i),this.category=e.category}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var t=this.options.highlight,e=t.border,i=this.options.markers,n=this.box.center(),r=(i.size+i.border.width+e.width)/2,s=new lu,o=new su(new eu([n.x,n.y+r/5+e.width/2],r+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new su(new eu([n.x,n.y],r),{stroke:{color:e.color||new ic(i.background).brightness(df).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return s.append(o,a),s},e}(Fg);Nm.prototype.defaults=Ko({},Nm.prototype.defaults,{labels:{position:po},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Nm.prototype.defaults.highlight.zIndex=void 0;const Bm=Nm;var jm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this._maxSize=Co,t.prototype._initFields.call(this)},e.prototype.addValue=function(e,i){null!==e.size&&(e.size>0||e.size<0&&i.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),t.prototype.addValue.call(this,e,i)):(this.points.push(null),this.seriesPoints[i.seriesIx].push(null))},e.prototype.reflow=function(e){this.updateBubblesSize(e),t.prototype.reflow.call(this,e)},e.prototype.pointType=function(){return Bm},e.prototype.createPoint=function(t,e){var i=e.series,n=i.data.length,r=e.pointIx*(uf/n),s={delay:r,duration:uf-r,type:_f},o=e.color||i.color;t.size<0&&i.negativeValues.visible&&(o=Dl(i.negativeValues.color,o));var a=Ko({labels:{animation:{delay:r,duration:uf-r}}},this.pointOptions(i,e.seriesIx),{markers:{type:fo,border:i.border,opacity:i.opacity,animation:s}});a=this.evalPointOptions(a,t,e),Wo(i.color)&&(o=a.color),a.markers.background=o;var l=new Bm(t,a);return l.color=o,this.append(l),l},e.prototype.updateBubblesSize=function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),n=0;n<e.length;n++)for(var r=e[n],s=this.seriesPoints[n],o=(r.minSize||Math.max(.02*i,10))/2,a=(r.maxSize||.2*i)/2,l=Math.PI*o*o,c=(Math.PI*a*a-l)/this._maxSize,h=0;h<s.length;h++){var u=s[h];if(u){var p=Math.abs(u.value.size)*c,d=Math.sqrt((l+p)/Math.PI),f=Dl(u.options.zIndex,0)+(1-d/a);Ko(u.options,{zIndex:f,markers:{size:2*d,zIndex:f},labels:{zIndex:f+1}})}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},e.prototype.createAnimation=function(){},e.prototype.createVisual=function(){},e}(Lm);Nl(jm,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const zm=jm;var Um=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Cu);Ko(Um.prototype,Eg);const $m=Um;var Hm=function(t){function e(e,i){t.call(this,i),this.aboveAxis=this.options.aboveAxis,this.color=i.color||Fo,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options;this._rendered||(this._rendered=!0,xl(this.value.target)&&(this.target=new $m({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:Po,align:Oo}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createNote())},e.prototype.reflow=function(t){this.render();var e=this,i=e.options,n=e.target,r=e.owner,s=i.invertAxes,o=r.seriesValueAxis(this.options),a=r.categorySlot(r.categoryAxis,i.categoryIx,o),l=o.getSlot(this.value.target),c=s?l:a,h=s?a:l;if(n){var u=new Ec(c.x1,h.y1,c.x2,h.y2);n.options.height=s?u.height():i.target.line.width,n.options.width=s?i.target.line.width:u.width(),n.reflow(u)}this.note&&this.note.reflow(t),this.box=t},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options,i=Kh.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:Dl(e.border.opacity,e.opacity)}),this.bodyVisual=i,Uo(i),this.visual.append(i)},e.prototype.createAnimation=function(){this.bodyVisual&&(this.animation=vu.create(this.bodyVisual,this.options.animation))},e.prototype.createHighlight=function(t){return Kh.fromRect(this.box.toRect(),t)},e.prototype.highlightVisual=function(){return this.bodyVisual},e.prototype.highlightVisualArgs=function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(wu);Hm.prototype.tooltipAnchor=pm.prototype.tooltipAnchor,Nl(Hm,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}}),Ko(Hm.prototype,Eg),Ko(Hm.prototype,Pg);const Vm=Hm;var qm=function(t){function e(e,i){!function(t){for(var e=t.series,i=0;i<e.length;i++){var n=e[i],r=n.data;!r||No(r[0])||Yo(r[0])||(n.data=[r])}}(i),t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.plotRange=function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,s=e.seriesIx,o=this.options,a=this.children,l=t.valueFields,c=Ko({vertical:!o.invertAxes,overlay:r.overlay,categoryIx:i,invertAxes:o.invertAxes},r),h=t.fields.color||r.color;c=this.evalPointOptions(c,l,n,i,r,s),Wo(r.color)&&(h=c.color);var u=new Vm(l,c);u.color=h;var p=a[i];return p||(p=new mm({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),p.append(u),u},e.prototype.updateRange=function(t,e){var i=t.current,n=t.target,r=e.series.axis,s=this.valueAxisRanges[r];xl(i)&&!isNaN(i)&&xl(n&&!isNaN(n))&&((s=this.valueAxisRanges[r]=s||{min:ko,max:Co}).min=Math.min(s.min,i,n),s.max=Math.max(s.max,i,n))},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},e.prototype.pointValue=function(t){return t.valueFields.current},e.prototype.aboveAxis=function(t){return t.value.current>0},e.prototype.createAnimation=function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}},e}(Tg);qm.prototype._setAnimationOptions=wm.prototype._setAnimationOptions,Nl(qm,{animation:{type:Cf}});const Wm=qm;var Xm=function(t){function e(e,i){t.call(this),this.chartService=e,this.options=Ko({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStyle=function(t,e){var i=t.background,n=t.border.color;if(e){var r=e.color||e.options.color;i=Dl(i,r),n=Dl(n,r)}var s=ea(t.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Jo(t.border.width),paddingTop:Jo(s.top),paddingBottom:Jo(s.bottom),paddingLeft:Jo(s.left),paddingRight:Jo(s.right)}},e.prototype.show=function(t,e,i){t.format=e.format;var n=this.getStyle(e,i);t.style=n;var r=new ic(n.backgroundColor);xl(e.color)||r.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(dg,t),this.visible=!0},e.prototype.hide=function(){this.chartService&&this.chartService.notify(fg),this.visible=!1},e.prototype.destroy=function(){delete this.chartService},e}(el);Nl(Xm,{border:{width:1},opacity:1});const Gm=Xm;var Km=function(t){function e(e,i,n){t.call(this,e,n),this.crosshair=i,this.formatService=e.format,this.initAxisName()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAxisName=function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},e.prototype.showAt=function(t){var e=this.crosshair.axis,i=this.options,n=e[i.stickyMode?"getCategory":"getValue"](t),r=n;i.format?r=this.formatService.auto(i.format,n):e.options.type===mo&&(r=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],n)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:r,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},e.prototype.hide=function(){this.chartService.notify(fg,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},e.prototype.getAnchor=function(){var t,e,i,n=this.crosshair,r=this.options,s=r.position,o=r.padding,a=!n.axis.options.vertical,l=n.line.bbox();return a?(t=po,s===uo?(e=Po,i=l.bottomLeft().translate(0,o)):(e=uo,i=l.topLeft().translate(0,-o))):(e=po,s===So?(t=Oo,i=l.topLeft().translate(-o,0)):(t=So,i=l.topRight().translate(o,0))),{point:i,align:{horizontal:t,vertical:e}}},e}(Gm);Nl(Km,{padding:10});const Ym=Km;var Jm=function(t){function e(e,i,n){t.call(this,n),this.axis=i,this.stickyMode=i instanceof rd;var r=this.options.tooltip;r.visible&&(this.tooltip=new Ym(e,this,Ko({},r,{stickyMode:this.stickyMode})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},e.prototype.hide=function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},e.prototype.moveLine=function(){var t,e=this.axis,i=this.point,n=e.options.vertical,r=this.getBox(),s=n?Lo:Ro,o=new Sc(r.x1,r.y1);if(t=n?new Sc(r.x2,r.y1):new Sc(r.x1,r.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));o[s]=t[s]=a.center()[s]}else o[s]=t[s]=i[s];this.box=r,this.line.moveTo(o).lineTo(t)},e.prototype.getBox=function(){for(var t,e=this.axis,i=e.pane.axes,n=i.length,r=e.options.vertical,s=e.lineBox().clone(),o=r?Ro:Lo,a=0;a<n;a++){var l=i[a];l.options.vertical!==r&&(t?t.wrap(l.lineBox()):t=l.lineBox().clone())}return s[o+1]=t[o+1],s[o+2]=t[o+2],s},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;this.line=new Kh({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),t.prototype.destroy.call(this)},e}(wu);Nl(Jm,{color:ho,width:2,zIndex:-1,tooltip:{visible:!1}});const Zm=Jm;var Qm=function(t){function e(e,i){t.call(this,e),this.pane=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldClip=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},e.prototype._clipBox=function(){return this.pane.chartsBox()},e.prototype.createVisual=function(){if(this.visual=new lu({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=Kh.fromRect(t);Uo(e),this.visual.clip(e),this.unclipLabels()}},e.prototype.stackRoot=function(){return this},e.prototype.unclipLabels=function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var n=t[i].points||{},r=n.length,s=0;s<r;s++){var o=n[s];if(o&&!1!==o.visible&&o.overlapsBox&&o.overlapsBox(e))if(o.unclipElements)o.unclipElements();else{var a=o.label,l=o.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),l&&l.options.visible&&(l.options.noclip=!0)}}},e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this.parent},e}(wu);Qm.prototype.isStackRoot=!0;const ty=Qm;var ey=function(t){function e(e){t.call(this,e),this.id="pane"+iy++,this.createTitle(),this.content=new wu,this.chartContainer=new ty({},this),this.append(this.content),this.axes=[],this.charts=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTitle=function(){var t=this.options.title;Yo(t)&&(t=Ko({},t,{align:t.position,position:Po})),this.title=ep.buildTitle(t,e.prototype.options.title),this.title&&this.append(this.title)},e.prototype.appendAxis=function(t){this.content.append(t),this.axes.push(t),t.pane=this},e.prototype.appendAxisAt=function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},e.prototype.appendChart=function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},e.prototype.empty=function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},e.prototype.reflow=function(e){var i;Ol(this.children)===this.content&&(i=this.children.pop()),t.prototype.reflow.call(this,e),i&&this.children.push(i),this.title&&(this.contentBox.y1+=this.title.box.height())},e.prototype.visualStyle=function(){var e=t.prototype.visualStyle.call(this);return e.zIndex=-10,e},e.prototype.renderComplete=function(){this.options.visible&&this.createGridLines()},e.prototype.stackRoot=function(){return this},e.prototype.clipRoot=function(){return this},e.prototype.createGridLines=function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],n=[],r=0;r<t.length;r++)for(var s=t[r],o=s.options.vertical,a=o?i:n,l=0;l<e.length;l++)if(0===a.length){var c=e[l];o!==c.options.vertical&&bl(a,s.createGridLines(c))}},e.prototype.refresh=function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},e.prototype.chartsBox=function(){for(var t=this.axes,e=t.length,i=new Ec,n=0;n<e;n++){var r=t[n],s=r.options.vertical?Lo:Ro,o=r.lineBox();i[s+1]=o[s+1],i[s+2]=o[s+2]}if(0===i.x2)for(var a=this.parent.axes,l=a.length,c=0;c<l;c++){var h=a[c];if(!h.options.vertical){var u=h.lineBox();i.x1=u.x1,i.x2=u.x2}}return i},e.prototype.clipBox=function(){return this.chartContainer.clipBox},e.prototype.notifyRender=function(){var t=this.getService();t&&t.notify("paneRender",{pane:new Yd(this),index:this.paneIndex,name:this.options.name})},e}(Su),iy=1;ey.prototype.isStackRoot=!0,Nl(ey,{zIndex:-1,shrinkToFit:!0,title:{align:So},visible:!0});const ny=ey;function ry(t,e){null!==e&&t.push(e)}function sy(t,e,i){var n=e.visible;if(xl(n))return n;var r=t.pointVisibility;return r?r[i]:void 0}function oy(t){for(var e=t.data,i=[],n=0,r=0,s=0;s<e.length;s++){var o=sf.current.bindPoint(t,s),a=o.valueFields.value;Vo(a)&&(a=parseFloat(a)),Ho(a)?(o.visible=!1!==sy(t,o.fields,s),o.value=Math.abs(a),i.push(o),o.visible&&(n+=o.value),0!==a&&r++):i.push(null)}return{total:n,points:i,count:r}}function ay(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function ly(t,e){for(var i=[],n=[].concat(e),r=0;r<t.length;r++){var s=t[r];da(s.type,n)&&i.push(s)}return i}function cy(t,e,i){if(null===e)return e;var n="_date_"+t,r=e[n];return r||(r=td(i,la(t)(e)),e[n]=r),r}function hy(t,e){var i=t.type,n=e instanceof Date;return!i&&n||ay(i,mo)}function uy(t){return 1===t.length?t[0]:t}var py=/area/i;function dy(t,e){var i=sf.current.bindPoint(t,null,e).valueFields;for(var n in i)if(qo(i[n]))return!0}function fy(t){var e,i,n=t.start,r=t.dir,s=t.min,o=t.max,a=t.getter,l=t.hasItem,c=t.series,h=n;do{l(h+=r)&&(e=dy(c,(i=a(h)).item))}while(s<=h&&h<=o&&!e);if(e)return i}function gy(t,e,i,n,r){var s=e.min,o=e.max,a=s>0&&s<i,l=o+1<i;if(a||l){var c,h,u,p=function(t){return t.missingValues?t.missingValues:py.test(t.type)||t.stack?yf:vf}(t);if(p!==vf)a&&(c=n(s-1)),l&&(h=n(o+1));else a&&(c=dy(t,(u=n(s-1)).item)?u:fy({start:s,dir:-1,min:0,max:i-1,getter:n,hasItem:r,series:t})),l&&(h=dy(t,(u=n(o+1)).item)?u:fy({start:o,dir:1,min:0,max:i-1,getter:n,hasItem:r,series:t}));c&&(t._outOfRangeMinPoint=c),h&&(t._outOfRangeMaxPoint=h)}}var my=function(t){function e(e,i,n){t.call(this,i),this.initFields(e,i),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=n,this.originalOptions=i,this.createPanes(),this.render(),this.createCrosshairs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.initSeries=function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},e.prototype.createPanes=function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],n=Math.max(i.length,1),r=[],s=Ko({title:{color:t.color}},e),o=0;o<n;o++){var a=Ko({},s,i[o]);Vo(a.title)&&(a.title=Ko({text:a.title},s.title));var l=new ny(a);l.paneIndex=o,r.push(l),this.append(l)}this.panes=r},e.prototype.crosshairOptions=function(t){return t.options.crosshair},e.prototype.createCrosshairs=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<n.axes.length;r++){var s=n.axes[r],o=e.crosshairOptions(s);if(o&&o.visible){var a=new Zm(e.chartService,s,o);e.crosshairs.push(a),n.content.append(a)}}},e.prototype.removeCrosshairs=function(t){for(var e=this.crosshairs,i=t.axes,n=e.length-1;n>=0;n--)for(var r=0;r<i.length;r++)if(e[n].axis===i[r]){e.splice(n,1);break}},e.prototype.hideCrosshairs=function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},e.prototype.findPane=function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].options.name===t){e=i[n];break}return e||i[0]},e.prototype.findPointPane=function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].box.containsPoint(t)){e=i[n];break}return e},e.prototype.appendAxis=function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},e.prototype.removeAxis=function(t){for(var e=[],i=0;i<this.axes.length;i++){var n=this.axes[i];t!==n?e.push(n):n.destroy()}this.axes=e},e.prototype.appendChart=function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},e.prototype.removeChart=function(t){for(var e=[],i=0;i<this.charts.length;i++){var n=this.charts[i];n!==t?e.push(n):n.destroy()}this.charts=e},e.prototype.addToLegend=function(t){for(var e=t.length,i=this.options.legend,n=i.labels||{},r=i.inactiveItems||{},s=r.labels||{},o=[],a=0;a<e;a++){var l=t[a],c=!1!==l.visible;if(!1!==l.visibleInLegend){var h=l.name,u=c?sa(n):sa(s)||sa(n);u&&(h=u({text:Dm(h)?h:"",series:l}));var p=l._defaults,d=l.color;Wo(d)&&p&&(d=p.color);var f=void 0,g=void 0;c?(f={},g=d):(f={color:s.color,font:s.font},g=r.markers.color),Dm(h)&&""!==h&&o.push({text:h,labels:f,markerColor:g,series:l,active:c})}}bl(i.items,o)},e.prototype.groupAxes=function(t){for(var e=[],i=[],n=0;n<t.length;n++)for(var r=t[n].axes,s=0;s<r.length;s++){var o=r[s];o.options.vertical?i.push(o):e.push(o)}return{x:e,y:i,any:e.concat(i)}},e.prototype.groupSeriesByPane=function(){for(var t=this.series,e={},i=0;i<t.length;i++){var n=t[i],r=this.seriesPaneName(n);e[r]?e[r].push(n):e[r]=[n]}return e},e.prototype.filterVisibleSeries=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];!1!==n.visible&&e.push(n)}return e},e.prototype.reflow=function(t){var e=this.options.plotArea,i=this.panes,n=ea(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},e.prototype.redraw=function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var n=0;n<e.length;n++)this.removeCrosshairs(e[n]),e[n].empty();this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var r=0;r<e.length;r++)e[r].refresh()},e.prototype.axisCrossingValues=function(t,e){for(var i=t.options,n=[].concat(i.axisCrossingValues||i.axisCrossingValue),r=e.length-n.length,s=n[0]||0,o=0;o<r;o++)n.push(s);return n},e.prototype.alignAxisTo=function(t,e,i,n){var r=t.getSlot(i,i,!0),s=t.options.reverse?2:1,o=e.getSlot(n,n,!0),a=e.options.reverse?2:1,l=t.box.translate(o[Ro+a]-r[Ro+s],o[Lo+a]-r[Lo+s]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},e.prototype.alignAxes=function(t,e){for(var i=this,n=t[0],r=e[0],s=this.axisCrossingValues(n,e),o=this.axisCrossingValues(r,t),a={},l={},c={},h={},u=0;u<e.length;u++){var p=e[u],d=p.pane,f=d.id,g=!1!==p.options.visible,m=by(t,d)||n,y=s;m!==n&&(y=i.axisCrossingValues(m,e)),i.alignAxisTo(p,m,o[u],y[u]),p.options._overlap||(Il(p.lineBox().x1)===Il(m.lineBox().x1)&&(a[f]&&p.reflow(p.box.alignTo(a[f].box,So).translate(-p.options.margin,0)),g&&(a[f]=p)),Il(p.lineBox().x2)===Il(m.lineBox().x2)&&(p._mirrored||(p.options.labels.mirror=!p.options.labels.mirror,p._mirrored=!0),i.alignAxisTo(p,m,o[u],y[u]),l[f]&&p.reflow(p.box.alignTo(l[f].box,Oo).translate(p.options.margin,0)),g&&(l[f]=p)),0!==u&&r.pane===p.pane&&(p.alignTo(r),p.reflow(p.box)))}for(var v=0;v<t.length;v++){var b=t[v],w=b.pane,x=w.id,S=!1!==b.options.visible,k=by(e,w)||r,C=o;k!==r&&(C=i.axisCrossingValues(k,t)),i.alignAxisTo(b,k,s[v],C[v]),b.options._overlap||(Il(b.lineBox().y1)===Il(k.lineBox().y1)&&(b._mirrored||(b.options.labels.mirror=!b.options.labels.mirror,b._mirrored=!0),i.alignAxisTo(b,k,s[v],C[v]),c[x]&&b.reflow(b.box.alignTo(c[x].box,Po).translate(0,-b.options.margin)),S&&(c[x]=b)),Il(b.lineBox().y2,3)===Il(k.lineBox().y2,3)&&(h[x]&&b.reflow(b.box.alignTo(h[x].box,uo).translate(0,b.options.margin)),S&&(h[x]=b)),0!==v&&(b.alignTo(n),b.reflow(b.box)))}},e.prototype.shrinkAxisWidth=function(t){for(var e=this.groupAxes(t).any,i=vy(e),n=0,r=0;r<t.length;r++){var s=t[r];s.axes.length>0&&(n=Math.max(n,i.width()-s.contentBox.width()))}if(0!==n)for(var o=0;o<e.length;o++){var a=e[o];a.options.vertical||a.reflow(a.box.shrink(n,0))}},e.prototype.shrinkAxisHeight=function(t){for(var e,i=0;i<t.length;i++){var n=t[i],r=n.axes,s=Math.max(0,vy(r).height()-n.contentBox.height());if(0!==s){for(var o=0;o<r.length;o++){var a=r[o];a.options.vertical&&a.reflow(a.box.shrink(0,s))}e=!0}}return e},e.prototype.fitAxes=function(t){for(var e=this.groupAxes(t).any,i=0,n=0;n<t.length;n++){var r=t[n],s=r.axes,o=r.contentBox;if(s.length>0){var a=vy(s),l=Math.max(o.y1-a.y1,o.y2-a.y2);i=Math.max(i,o.x1-a.x1);for(var c=0;c<s.length;c++){var h=s[c];h.reflow(h.box.translate(0,l))}}}for(var u=0;u<e.length;u++){var p=e[u];p.reflow(p.box.translate(i,0))}},e.prototype.reflowAxes=function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},e.prototype.autoRotateAxisLabels=function(t){for(var e,i=this.panes,n=wy(i),r=0;r<n.length;r++){n[r].autoRotateLabels()&&(e=!0)}if(e){for(var s=0;s<i.length;s++)this.reflowPaneAxes(i[s]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},e.prototype.reflowPaneAxes=function(t){var e=t.axes,i=e.length;if(i>0)for(var n=0;n<i;n++)e[n].reflow(t.contentBox)},e.prototype.reflowCharts=function(t){for(var e=this.charts,i=e.length,n=this.box,r=0;r<i;r++){var s=e[r].pane;s&&!da(s,t)||e[r].reflow(n)}},e.prototype.reflowPanes=function(){for(var t=this.box,e=this.panes,i=e.length,n=t.height(),r=0,s=t.y1,o=0;o<i;o++){var a=e[o],l=a.options.height;if(a.options.width=t.width(),a.options.height){if(l.indexOf&&l.indexOf("%")){var c=parseInt(l,10)/100;a.options.height=c*t.height()}a.reflow(t.clone()),n-=a.options.height}else r++}for(var h=0;h<i;h++){var u=e[h];u.options.height||(u.options.height=n/r)}for(var p=0;p<i;p++){var d=e[p],f=t.clone().move(t.x1,s);d.reflow(f),s+=d.options.height}},e.prototype.backgroundBox=function(){for(var t,e=this.axes,i=e.length,n=0;n<i;n++)for(var r=e[n],s=0;s<i;s++){var o=e[s];if(r.options.vertical!==o.options.vertical){var a=r.lineBox().clone().wrap(o.lineBox());t=t?t.wrap(a):a}}return t||this.box},e.prototype.chartsBoxes=function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},e.prototype.addBackgroundPaths=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(Kh.fromRect(e[i].toRect()))},e.prototype.backgroundContainsPoint=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e,i=this.options.plotArea,n=i.opacity,r=i.background,s=i.border;void 0===s&&(s={}),""!==(e=r)&&null!==e&&"none"!==e&&"transparent"!==e&&xl(e)||(r=Fo,n=0);var o=this._bgVisual=new Yh({fill:{color:r,opacity:n},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},zIndex:-1});this.addBackgroundPaths(o),this.appendVisual(o)},e.prototype.pointsByCategoryIndex=function(t){var e=this.charts,i=[];if(null!==t)for(var n=0;n<e.length;n++){if("_navigator"!==e[n].pane.options.name){var r=e[n].categoryPoints[t];if(r&&r.length)for(var s=0;s<r.length;s++){var o=r[s];o&&xl(o.value)&&null!==o.value&&i.push(o)}}}return i},e.prototype.pointsBySeriesIndex=function(t){return this.filterPoints((function(e){return e.series.index===t}))},e.prototype.pointsBySeriesName=function(t){return this.filterPoints((function(e){return e.series.name===t}))},e.prototype.filterPoints=function(t){for(var e=this.charts,i=[],n=0;n<e.length;n++)for(var r=e[n].points,s=0;s<r.length;s++){var o=r[s];o&&!1!==o.visible&&t(o)&&i.push(o)}return i},e.prototype.findPoint=function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var n=e[i].points,r=0;r<n.length;r++){var s=n[r];if(s&&!1!==s.visible&&t(s))return s}},e.prototype.paneByPoint=function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.box.containsPoint(t))return n}},e.prototype.detachLabels=function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},e.prototype.detachAxisGroupLabels=function(t,e){for(var i=0,n=0;n<t.length;n++){var r=t[n],s=r.pane,o=by(e,s)||e[0],a=n+i,l=this.createLabelAxis(r,a,o);if(l){i++;var c=s.axes.indexOf(r)+i;s.appendAxisAt(l,c)}}},e.prototype.createLabelAxis=function(t,e,i){var n=t.options.labels,r=n.position,s="end"!==r&&"start"!==r,o=n.visible;if(s||!1===o)return null;var a=this.groupAxes(this.panes),l=i.options.vertical?a.x:a.y,c=this.axisCrossingValues(i,l),h="end"===r,u=i.range(),p=h?u.max:u.min;if(El(c[e],u.min,u.max)-p==0)return null;c.splice(e+1,0,p),i.options.axisCrossingValues=c;var d=t.clone();return t.clear(),d.options.name=void 0,d.options.line.visible=!1,d.options.crosshair=void 0,d.options.notes=void 0,d.options.plotBands=void 0,d},e}(wu);function yy(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function vy(t){for(var e,i=t.length,n=0;n<i;n++){var r=t[n],s=!1!==r.options.visible;if(s||yy(r)){var o=s?r.contentBox():r.lineBox();e?e.wrap(o):e=o.clone()}}return e||new Ec}function by(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.pane===e)return n}}var wy=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};Nl(my,{series:[],plotArea:{margin:{}},background:"",border:{color:ho,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const xy=my;var Sy={hover:function(t,e){this._dispatchEvent(t,e,ig)},click:function(t,e){this._dispatchEvent(t,e,"plotAreaClick")}};const ky=Sy;var Cy=function(t){function e(e,i,n){t.call(this);var r=i.canonicalFields(e),s=i.valueFields(e),o=i.sourceFields(e,r),a=this._seriesFields=[],l=n.query(e.type),c=e.aggregate||l;this._series=e,this._binder=i;for(var h=0;h<r.length;h++){var u=r[h],p=void 0;if(Yo(c))p=c[u];else{if(0!==h&&!da(u,s))break;p=c}p&&a.push({canonicalName:u,name:o[h],transform:Wo(p)?p:ef[p]})}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aggregatePoints=function(t,e){var i=this._series,n=this._seriesFields,r=this._bindPoints(t||[]),s=r.dataItems[0],o={};if(s&&!Ho(s)&&!No(s)){var a=function(){};a.prototype=s,o=new a}for(var l=0;l<n.length;l++){var c=n[l],h=this._bindField(r.values,c.canonicalName),u=c.transform(h,i,r.dataItems,e);if(!(null===u||!Yo(u)||xl(u.length)||u instanceof Date)){o=u;break}xl(u)&&Ay(c.name,o,u)}return o},e.prototype._bindPoints=function(t){for(var e=this._binder,i=this._series,n=[],r=[],s=0;s<t.length;s++){var o=t[s];n.push(e.bindPoint(i,o)),r.push(i.data[o])}return{values:n,dataItems:r}},e.prototype._bindField=function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var s=t[r],o=s.valueFields,a=void 0;a=xl(o[e])?o[e]:s.fields[e],i.push(a)}return i},e}(el);function Ay(t,e,i){var n=e,r=t;if(t.indexOf(".")>-1){for(var s=t.split(".");s.length>1;)r=s.shift(),xl(n[r])||(n[r]={}),n=n[r];r=s.shift()}n[r]=i}const _y=Cy;var Ty=function(t){function e(){t.call(this),this._defaults={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},e.prototype.query=function(t){return this._defaults[t]},e}(el);Ty.current=new Ty;const Oy=Ty;var Ey=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLabel=function(){var t=this.options.labels,e=Ko({},t,t.from),i=Ko({},t,t.to);e.visible&&(this.labelFrom=this._createLabel(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},e.prototype._createLabel=function(t){var e,i=sa(t),n=this.pointData();return e=i?i(n):this.formatValue(t.format),new cm(e,Ko({vertical:this.options.vertical},t),n)},e.prototype.reflow=function(t){this.render();var e=this,i=e.labelFrom,n=e.labelTo,r=e.value;this.box=t,i&&(i.options.aboveAxis=r.from>r.to,i.reflow(t)),n&&(n.options.aboveAxis=r.to>r.from,n.reflow(t)),this.note&&this.note.reflow(t)},e}(pm);Ey.prototype.defaults=Ko({},Ey.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const My=Ey;var Py=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return My},e.prototype.pointValue=function(t){return t.valueFields},e.prototype.formatPointValue=function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},e.prototype.plotRange=function(t){return t?[t.value.from,t.value.to]:0},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=t.from,r=t.to,s=this.valueAxisRanges[i];null!==t&&Ho(n)&&Ho(r)&&((s=this.valueAxisRanges[i]=s||{min:ko,max:Co}).min=Math.min(s.min,n),s.max=Math.max(s.max,n),s.min=Math.min(s.min,r),s.max=Math.max(s.max,r))},e.prototype.aboveAxis=function(t){var e=t.value;return e.from<e.to},e}(wm);Py.prototype.plotLimits=Tg.prototype.plotLimits;const Iy=Py;var Fy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aliasFor=function(){return this.parent},e}(Fg);const Dy=Fy;var Ry="auto",Ly=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=Dl(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,n=this.value,r=this.fromPoint=new Dy(n,Ko({},this.options,{labels:i.from,markers:e.from})),s=this.toPoint=new Dy(n,Ko({},this.options,{labels:i.to,markers:e.to}));this.copyFields(r),this.copyFields(s),this.append(r),this.append(s)}},e.prototype.reflow=function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},e.prototype.createHighlight=function(){var t=new lu;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},e.prototype.highlightVisual=function(){return this.visual},e.prototype.highlightVisualArgs=function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},e.prototype.tooltipAnchor=function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,n,r=this.box,s=r.center();return this.options.vertical?(e=s.x,i=r.y1-5,n=uo):(e=r.x2+5,i=s.y,n=po),{point:new fc(e,i),align:{horizontal:"left",vertical:n}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},e.prototype.initLabelsFormat=function(){var t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))},e.prototype.positionLabels=function(t,e){var i,n,r=this.options,s=r.labels,o=r.vertical;s.position===Ry&&(o?e.y1<=t.y1?(n=bf,i=wf):(n=wf,i=bf):e.x1<=t.x1?(n=So,i=Oo):(n=Oo,i=So),s.from&&s.from.position||(this.fromPoint.options.labels.position=i),s.to&&s.to.position||(this.toPoint.options.labels.position=n))},e.prototype.copyFields=function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},e}(wu);Ko(Ly.prototype,Eg),Ko(Ly.prototype,Pg),Ly.prototype.defaults={markers:{visible:!1,background:Fo,size:8,type:fo,border:{width:2},opacity:1},labels:{visible:!1,margin:ea(3),padding:ea(4),animation:{type:pf,delay:uf},position:Ry},notes:{label:{}},highlight:{markers:{border:{color:Fo,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"}};const Ny=Ly;var By=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},e.prototype.createStroke=function(t){var e=new Kh(t),i=new Kh(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},e.prototype.hasStackSegment=function(){return!0},e.prototype.fromPoints=function(){return this.linePoints.map((function(t){return t.fromPoint}))},e.prototype.toPoints=function(){return this.linePoints.map((function(t){return t.toPoint}))},e}(Qg);const jy=By;var zy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.createCurveSegments(this.toPoints())},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},e.prototype.createCurveSegments=function(t){return(new qd).process(this.toGeometryPoints(t))},e}(jy);const Uy=zy;var $y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t},e}(jy);Ko($y.prototype,Bg);const Hy=$y;var Vy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.pointType=function(){return Ny},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,s=e.seriesIx,o=t.valueFields;if(!Dm(o.from)&&!Dm(o.to)){if(this.seriesMissingValues(r)!==yf)return null;o={from:0,to:0}}var a=this.pointOptions(r,s);a=this.evalPointOptions(a,o,n,i,r,s);var l=t.fields.color||r.color;Wo(r.color)&&(l=a.color);var c=new Ny(o,a);return c.color=l,this.append(c),c},e.prototype.createSegment=function(t,e,i){var n=(e.line||{}).style;return new("smooth"===n?Uy:"step"===n?Hy:jy)(t,e,i)},e.prototype.plotRange=function(t,e){return t?[t.value.from,t.value.to]:[e,e]},e.prototype.valueSlot=function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),n=t.getSlot(e[1],e[1],!this.options.clip);if(i&&n)return{from:i,to:n}},e.prototype.pointSlot=function(t,e){var i,n,r=e.from,s=e.to;return this.options.invertAxes?(i=new Ec(r.x1,t.y1,r.x2,t.y2),n=new Ec(s.x1,t.y1,s.x2,t.y2)):(i=new Ec(t.x1,r.y1,t.x2,r.y2),n=new Ec(t.x1,s.y1,t.x2,s.y2)),{from:i,to:n}},e.prototype.addValue=function(e,i){var n=e.valueFields;Ho(n.from)||(n.from=n.to),Ho(n.to)||(n.to=n.from),t.prototype.addValue.call(this,e,i)},e.prototype.updateRange=function(t,e){if(null!==t&&Ho(t.from)&&Ho(t.to)){var i=e.series.axis,n=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:ko,max:Co},r=t.from,s=t.to;n.min=Math.min(n.min,r,s),n.max=Math.max(n.max,r,s)}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var n=t[i];n&&(e.push((n.fromPoint||{}).marker),e.push((n.toPoint||{}).marker))}return e.concat(this._segments)},e}(Tg);Ko(Vy.prototype,Vg,Kg);const qy=Vy;var Wy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,n=e.value,r=e.owner.seriesValueAxis(i),s=[],o=[],a=[],l=r.getSlot(n.low,n.high),c=r.getSlot(n.open,n.open),h=r.getSlot(n.close,n.close);c.x1=h.x1=l.x1=t.x1,c.x2=h.x2=l.x2=t.x2;var u=l.center().x;s.push([c.x1,c.y1]),s.push([u,c.y1]),o.push([u,h.y1]),o.push([h.x2,h.y1]),a.push([u,l.y1]),a.push([u,l.y2]),this.lines=[s,o,a],this.box=l.clone().wrap(c.clone().wrap(h)),this.reflowNote()},e.prototype.createBody=function(){},e}(Sm);const Xy=Wy;var Gy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Xy},e}(Am);const Ky=Gy;var Yy=function(t){function e(e,i,n){t.call(this),this.from=e,this.to=i,this.series=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linePoints=function(){var t=this.from,e=this.from.box,i=this.to.box,n=[];if(t.isVertical){var r=t.aboveAxis?e.y1:e.y2;n.push([e.x1,r],[i.x2,r])}else{var s=t.aboveAxis?e.x2:e.x1;n.push([s,e.y1],[s,i.y2])}return n},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.series.line||{},i=Kh.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});Uo(i),this.visual.append(i)},e}(wu);Nl(Yy,{animation:{type:pf,delay:uf}});const Jy=Yy;var Zy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.createSegments()},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=Ag(e),n=!this.options.invertAxes,r=0;r<e.length;r++)for(var s=e[r],o=0,a=0,l=0;l<i;l++){var c=sf.current.bindPoint(s,l),h=c.valueFields.value,u=c.fields.summary,p=o,d=void 0;u?"total"===u.toLowerCase()?(c.valueFields.value=o,p=0,d=o):(c.valueFields.value=a,d=p-a,a=0):Ho(h)&&(a+=h,d=o+=h),t(c,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:s,seriesIx:r,total:o,runningTotal:a,from:p,to:d,isVertical:n})}},e.prototype.updateRange=function(e,i){t.prototype.updateRange.call(this,{value:i.to},i)},e.prototype.aboveAxis=function(t){return t.value>=0},e.prototype.plotRange=function(t){return[t.from,t.to]},e.prototype.createSegments=function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],n=0;n<t.length;n++){var r=t[n],s=e[n];if(s)for(var o=void 0,a=0;a<s.length;a++){var l=s[a];if(l&&o){var c=new Jy(o,l,r);i.push(c),this.append(c)}o=l}}},e}(wm);const Qy=Zy;var tv=[kf,Gf,Hf,Zf],ev=[Df,Jf].concat(tv),iv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new am,t.length>0){this.invertAxes=da(t[0].type,[Cf,Tf,Jf,Gf,Zf,Vf,Ff,Kf]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.createCategoryAxes(t),this.aggregateCategories(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e instanceof rd?delete this.namedCategoryAxes[i]:(this.valueAxisRangeTracker.reset(i),delete this.namedValueAxes[i]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],s=i[r.options.name||"default"]||[];e.addToLegend(s);var o=e.filterVisibleSeries(s);if(o)for(var a=e.groupSeriesByCategoryAxis(o),l=0;l<a.length;l++)e.createChartGroup(a[l],r)}},e.prototype.createChartGroup=function(t,e){this.createAreaChart(ly(t,[kf,Gf]),e),this.createRangeAreaChart(ly(t,[Hf,Zf]),e),this.createBarChart(ly(t,[Ef,Cf]),e),this.createRangeBarChart(ly(t,[qf,Vf]),e),this.createBulletChart(ly(t,[Tf,Yf]),e),this.createCandlestickChart(ly(t,Of),e),this.createBoxPlotChart(ly(t,[Af,Kf]),e),this.createOHLCChart(ly(t,Rf),e),this.createWaterfallChart(ly(t,[Qf,Ff]),e),this.createLineChart(ly(t,[Df,Jf]),e)},e.prototype.aggregateCategories=function(t){var e=this,i=this.srcSeries||this.series,n=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var r=0;r<i.length;r++){var s=i[r],o=e.seriesCategoryAxis(s),a=e.findPane(o.options.pane);s=(ay(o.options.type,mo)||s.categoryField)&&da(a,t)?e.aggregateSeries(s,o):e.filterSeries(s,o),n.push(s)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=n},e.prototype.filterSeries=function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!Ho(e.options.min)&&!Ho(e.options.max))return t;var n=e.currentRangeIndices(),r=da(t.type,ev),s=Ko({},t);return s.data=(s.data||[]).slice(n.min,n.max+1),r&&gy(s,n,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-n.min}}),(function(e){return xl(t.data[e])})),s},e.prototype.clearSeriesPointsCache=function(){this._seriesPointsCache={}},e.prototype.seriesSourcePoints=function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var n=e.options,r=n.srcCategories,s=ay(n.type,mo),o=t.data,a=s?cy:nf,l=[];s||e.mapCategories();for(var c=0;c<o.length;c++){var h=void 0;if(h=t.categoryField?a(t.categoryField,o[c],this.chartService.intl):r[c],xl(h)&&null!==h){var u=e.totalIndex(h);l[u]=l[u]||{items:[],category:h},l[u].items.push(c)}}return this._currentPointsCache[i]=l,l},e.prototype.aggregateSeries=function(t,e){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),n=Ko({},t),r=new _y(Ko({},t),sf.current,Oy.current),s=n.data=[],o=e.options.dataItems||[],a=e.currentRangeIndices(),l=function(t){var n=t-a.min,s=i[t];if(s||(s=i[t]={}),s.categoryIx=n,!s.item){var o=e.categoryAt(t,!0);s.category=o,s.item=r.aggregatePoints(s.items,o)}return s},c=a.min;c<=a.max;c++){var h=l(c);s[h.categoryIx]=h.item,h.items&&h.items.length&&(o[h.categoryIx]=h.item)}return da(n.type,ev)&&gy(n,a,e.totalCount(),l,(function(t){return i[t]})),e.options.dataItems=o,n},e.prototype.appendChart=function(e,i){var n=e.options.series,r=this.seriesCategoryAxis(n[0]),s=r.options.categories,o=Math.max(0,Ag(n)-s.length);if(o>0)for(s=r.options.categories=r.options.categories.slice(0);o--;)s.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.axis,n=ca([].concat(e.valueAxis),(function(t){return t.name===i}))[0],r=((e.panes||[{}])[0]||{}).name||"default";return(n||{}).pane||r},e.prototype.seriesCategoryAxis=function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},e.prototype.stackableChartOptions=function(t,e){var i=t.stack;return{isStacked:i,isStacked100:i&&"100%"===i.type,clip:e.options.clip}},e.prototype.groupSeriesByCategoryAxis=function(t){for(var e=[],i={},n=0;n<t.length;n++){var r=t[n].categoryAxis||"$$default$$";i.hasOwnProperty(r)||(i[r]=!0,e.push(r))}for(var s=[],o=0;o<e.length;o++){var a=rv(t,e[o],o);0!==a.length&&s.push(a)}return s},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],n=new wm(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createRangeBarChart=function(t,e){if(0!==t.length){var i=t[0],n=new Iy(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},e.prototype.createBulletChart=function(t,e){if(0!==t.length){var i=t[0],n=new Wm(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=t[0],n=new Jg(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=t[0],n=new sm(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createRangeAreaChart=function(t,e){if(0!==t.length){var i=new qy(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createOHLCChart=function(t,e){if(0!==t.length){var i=t[0],n=new Ky(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createCandlestickChart=function(t,e){if(0!==t.length){var i=t[0],n=new Am(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createBoxPlotChart=function(t,e){if(0!==t.length){var i=t[0],n=new Pm(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createWaterfallChart=function(t,e){if(0!==t.length){var i=t[0],n=new Qy(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},e.prototype.axisRequiresRounding=function(t,e){for(var i=ly(this.series,tg),n=0;n<this.series.length;n++){var r=this.series[n];if(da(r.type,tv)){var s=r.line;s&&s.style===Sf&&i.push(r)}}for(var o=0;o<i.length;o++){var a=i[o].categoryAxis||"";if(a===t||!a&&0===e)return!0}},e.prototype.aggregatedAxis=function(t,e){for(var i=this.series,n=0;n<i.length;n++){var r=i[n].categoryAxis||"";if((r===t||!r&&0===e)&&i[n].categoryField)return!0}},e.prototype.createCategoryAxesLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof rd&&t[e].createLabels()},e.prototype.createCategoryAxes=function(t){for(var e=this,i=this.invertAxes,n=[].concat(this.options.categoryAxis),r=[],s=0;s<n.length;s++){var o=n[s];if(da(e.findPane(o.pane),t)){var a=o.name,l=o.categories;void 0===l&&(l=[]),o=Ko({vertical:i,reverse:!i&&e.chartService.rtl,axisCrossingValue:i?ko:0},o),xl(o.justified)||(o.justified=e.isJustified()),e.axisRequiresRounding(a,s)&&(o.justified=!1);var c=void 0;if(c=hy(o,l[0])?new gd(o,e.chartService):new rd(o,e.chartService),n[s].categories=c.options.srcCategories,a){if(e.namedCategoryAxes[a])throw new Error("Category axis with name "+a+" is already defined");e.namedCategoryAxes[a]=c}c.axisIndex=s,r.push(c),e.appendAxis(c)}}var h=this.categoryAxis||r[0];this.categoryAxis=h,i?this.axisY=h:this.axisX=h},e.prototype.isJustified=function(){for(var t=this.series,e=0;e<t.length;e++){if(!da(t[e].type,tv))return!1}return!0},e.prototype.createValueAxes=function(t){var e=this,i=this.valueAxisRangeTracker,n=i.query(),r=[].concat(this.options.valueAxis),s=this.invertAxes,o={vertical:!s,reverse:s&&this.chartService.rtl},a=[];this.stack100&&(o.roundToMajorUnit=!1,o.labels={format:"P0"});for(var l=0;l<r.length;l++){var c=r[l];if(da(e.findPane(c.pane),t)){var h=c.name,u=ay(c.type,gg)?{min:.1,max:1}:{min:0,max:1},p=i.query(h)||n||u;0===l&&p&&n&&(p.min=Math.min(p.min,n.min),p.max=Math.max(p.max,n.max));var d=new(ay(c.type,gg)?Ed:Sd)(p.min,p.max,Ko({},o,c),e.chartService);if(h){if(e.namedValueAxes[h])throw new Error("Value axis with name "+h+" is already defined");e.namedValueAxes[h]=d}d.axisIndex=l,a.push(d),e.appendAxis(d)}}var f=this.valueAxis||a[0];this.valueAxis=f,s?this.axisX=f:this.axisY=f},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new fc(n.x,n.y),s=this.pointPane(r),o=[],a=[];if(s){for(var l=s.axes,c=0;c<l.length;c++){var h=l[c];h.getValue?ry(a,h.getValue(r)):ry(o,h.getCategory(r))}0===o.length&&ry(o,this.categoryAxis.getCategory(r)),o.length>0&&a.length>0&&t.trigger(i,{element:_l(e),originalEvent:e,category:uy(o),value:uy(a)})}},e.prototype.pointPane=function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.contentBox.containsPoint(t))return n}},e.prototype.updateAxisOptions=function(t,e){nv(this.options,t,e),nv(this.originalOptions,t,e)},e}(xy);function nv(t,e,i){Ko([].concat(e instanceof rd?t.categoryAxis:t.valueAxis)[e.axisIndex],i)}function rv(t,e,i){return ca(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}Nl(iv,{categoryAxis:{},valueAxis:{}}),Ko(iv.prototype,ky);const sv=iv;var ov=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){var n=arguments,r=this,s=lv(t),o=av(e),a=s.length;if(void 0===e){for(var l in t)r.bind(l,t[l]);return this}for(var c=function(t){var a=s[t],l=o?e:e[a];if(l){if(i){var c=l;(l=function(){r.unbind(a,l),c.apply(r,n)}).original=c}(r._events[a]=r._events[a]||[]).push(l)}},h=0;h<a;h++)c(h);return this},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){for(var i=lv(t),n=av(e),r=0,s=i.length;r<s;r++){var o=i[r],a=n?e:e[o];if(a)(this._events[o]=this._events[o]||[]).unshift(a)}return this},e.prototype.trigger=function(t,e){void 0===e&&(e={});var i=this._events[t];if(i){var n=i.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=cv,e.isDefaultPrevented=hv,i=i.slice();for(var r=0;r<n;r++)i[r].call(this,e);return!0===e._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i=this._events[t];if(void 0===t)this._events={};else if(i)if(e)for(var n=i.length-1;n>=0;n--)i[n]!==e&&i[n].original!==e||i.splice(n,1);else this._events[t]=[];return this},e}(el);function av(t){return"function"==typeof t}function lv(t){return"string"==typeof t?[t]:t}function cv(){this._defaultPrevented=!0}function hv(){return!0===this._defaultPrevented}var uv=["click","mouseenter","mouseleave","mousemove","resize"],pv=function(t){function e(e,i){t.call(this),this.options=Object.assign({},i),this.element=e,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new lu,Za(e,this.options),this.bind(uv,this.options),this._enableTracking()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t){this._visual.children.push(t)},e.prototype.clear=function(){this._visual.children=[]},e.prototype.destroy=function(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()},e.prototype.eventTarget=function(t){for(var e,i=ja(t);!e&&i&&(e=i._kendoNode,i!==this.element);)i=i.parentElement;if(e)return e.srcElement},e.prototype.exportVisual=function(){return this._visual},e.prototype.getSize=function(){return Za(this.element)},e.prototype.currentSize=function(t){if(!t)return this._size;this._size=t},e.prototype.setSize=function(t){Za(this.element,t),this.currentSize(t),this._resize()},e.prototype.resize=function(t){var e=this.getSize(),i=this.currentSize();(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))},e.prototype.size=function(t){if(!t)return this.getSize();this.setSize(t)},e.prototype.suspendTracking=function(){this._suspendedTracking=!0},e.prototype.resumeTracking=function(){this._suspendedTracking=!1},e.prototype._enableTracking=function(){},e.prototype._resize=function(){},e.prototype._handler=function(t){var e=this;return function(i){var n=e.eventTarget(i);n&&!e._suspendedTracking&&e.trigger(t,{element:n,originalEvent:i,type:t})}},e.prototype._elementOffset=function(){var t=this.element,e=tl(t),i=Ka(t),n=i.left,r=i.top;return{left:n+e.left,top:r+e.top}},e.prototype._surfacePoint=function(t){var e=this._elementOffset(),i=Ba(t),n=i.x-e.left,r=i.y-e.top,s=ol(this.element).invert();return new Sc(n,r).transform(s)},e}(ov);const dv=pv;var fv=function(t){function e(e){t.call(this),this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.srcElement&&this.srcElement.removeObserver(this);for(var t=this.childNodes,e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null},e.prototype.load=function(){},e.prototype.observe=function(){this.srcElement&&this.srcElement.addObserver(this)},e.prototype.append=function(t){this.childNodes.push(t),t.parent=this},e.prototype.insertAt=function(t,e){this.childNodes.splice(e,0,t),t.parent=this},e.prototype.remove=function(t,e){for(var i=t+e,n=t;n<i;n++)this.childNodes[n].removeSelf();this.childNodes.splice(t,e)},e.prototype.removeSelf=function(){this.clear(),this.destroy()},e.prototype.clear=function(){this.remove(0,this.childNodes.length)},e.prototype.invalidate=function(){this.parent&&this.parent.invalidate()},e.prototype.geometryChange=function(){this.invalidate()},e.prototype.optionsChange=function(){this.invalidate()},e.prototype.childrenChange=function(t){"add"===t.action?this.load(t.items,t.index):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()},e}(el);const gv=fv;function mv(t,e){return zo(e)&&null!==e?" "+t+'="'+e+'" ':""}function yv(t){for(var e="",i=0;i<t.length;i++)e+=mv(t[i][0],t[i][1]);return e}function vv(t){for(var e="",i=0;i<t.length;i++){var n=t[i][1];zo(n)&&(e+=t[i][0]+":"+n+";")}if(""!==e)return e}const bv={};var wv="http://www.w3.org/2000/svg",xv="none",Sv=function(t,e){t.innerHTML=e};if("undefined"!=typeof document){var kv=document.createElement("div"),Cv="undefined"!=typeof DOMParser;kv.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",Cv&&kv.firstChild.namespaceURI!==wv&&(Sv=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),n=document.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(n)})}const Av=Sv;var _v="transform",Tv={clip:"clip-path",fill:"fill"};function Ov(t,e){return"clip"===t||"fill"===t&&(!e||"Gradient"===e.nodeType)}var Ev=function(t){function e(e,i){t.call(this,e),this.definitions={},this.options=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),t.prototype.destroy.call(this)},e.prototype.load=function(t,e){for(var i=this,n=0;n<t.length;n++){var r=t[n],s=r.children,o=new bv[r.nodeType](r,i.options);zo(e)?i.insertAt(o,e):i.append(o),o.createDefinitions(),s&&s.length>0&&o.load(s);var a=i.element;a&&o.attachTo(a,e)}},e.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.attachTo=function(t,e){var i=document.createElement("div");Av(i,"<svg xmlns='"+wv+"' version='1.1'>"+this.render()+"</svg>");var n=i.firstChild.firstChild;n&&(zo(e)?t.insertBefore(n,t.childNodes[e]||null):t.appendChild(n),this.setElement(n))},e.prototype.setElement=function(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;for(var e=this.childNodes,i=0;i<e.length;i++){var n=t.childNodes[i];e[i].setElement(n)}},e.prototype.clear=function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var t=this.childNodes,e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]},e.prototype.removeSelf=function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}t.prototype.removeSelf.call(this)},e.prototype.template=function(){return this.renderChildren()},e.prototype.render=function(){return this.template()},e.prototype.renderChildren=function(){for(var t=this.childNodes,e="",i=0;i<t.length;i++)e+=t[i].render();return e},e.prototype.optionsChange=function(e){var i=e.field,n=e.value;"visible"===i?this.css("display",n?"":xv):Tv[i]&&Ov(i,n)?this.updateDefinition(i,n):"opacity"===i?this.attr("opacity",n):"cursor"===i?this.css("cursor",n):"id"===i&&(n?this.attr("id",n):this.removeAttr("id")),t.prototype.optionsChange.call(this,e)},e.prototype.attr=function(t,e){this.element&&this.element.setAttribute(t,e)},e.prototype.allAttr=function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},e.prototype.css=function(t,e){this.element&&(this.element.style[t]=e)},e.prototype.allCss=function(t){for(var e=0;e<t.length;e++)this.css(t[e][0],t[e][1])},e.prototype.removeAttr=function(t){this.element&&this.element.removeAttribute(t)},e.prototype.mapTransform=function(t){var e=[];return t&&e.push([_v,"matrix("+t.matrix().toString(6)+")"]),e},e.prototype.renderTransform=function(){return yv(this.mapTransform(this.srcElement.transform()))},e.prototype.transformChange=function(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(_v)},e.prototype.mapStyle=function(){var t=this.srcElement.options,e=[["cursor",t.cursor]];return!1===t.visible&&e.push(["display",xv]),e},e.prototype.renderStyle=function(){return mv("style",vv(this.mapStyle(!0)))},e.prototype.renderOpacity=function(){return mv("opacity",this.srcElement.options.opacity)},e.prototype.renderId=function(){return mv("id",this.srcElement.options.id)},e.prototype.createDefinitions=function(){var t=this.srcElement,e=this.definitions;if(t){var i,n=t.options;for(var r in Tv){var s=n.get(r);s&&Ov(r,s)&&(e[r]=s,i=!0)}i&&this.definitionChange({action:"add",definitions:e})}},e.prototype.definitionChange=function(t){this.parent&&this.parent.definitionChange(t)},e.prototype.updateDefinition=function(t,e){var i=this.definitions,n=i[t],r=Tv[t],s={};n&&(s[t]=n,this.definitionChange({action:"remove",definitions:s}),delete i[t]),e?(s[t]=e,this.definitionChange({action:"add",definitions:s}),i[t]=e,this.attr(r,this.refUrl(e.id))):n&&this.removeAttr(r)},e.prototype.clearDefinitions=function(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}},e.prototype.renderDefinitions=function(){return yv(this.mapDefinitions())},e.prototype.mapDefinitions=function(){var t=this.definitions,e=[];for(var i in t)e.push([Tv[i],this.refUrl(t[i].id)]);return e},e.prototype.refUrl=function(t){var e=(this.options||{}).skipBaseHref,i=this.baseUrl().replace(/'/g,"\\'");return"url("+(e?"":i)+"#"+t+")"},e.prototype.baseUrl=function(){return function(){var t=document.getElementsByTagName("base")[0],e=document.location.href,i="";if(t&&!(Sa.browser||{}).msie){var n=e.indexOf("#");-1!==n&&(e=e.substring(0,n)),i=e}return i}()},e}(gv);const Mv=Ev;const Pv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},e.prototype.renderOffset=function(){return mv("offset",this.srcElement.offset())},e.prototype.mapStyle=function(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]},e.prototype.optionsChange=function(t){"offset"===t.field?this.attr(t.field,t.value):"color"!==t.field&&"opacity"!==t.field||this.css("stop-"+t.field,t.value)},e}(Mv);const Iv=function(t){function e(e){t.call(this,e),this.id=e.id,this.loadStops()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadStops=function(){for(var t=this.srcElement.stops,e=this.element,i=0;i<t.length;i++){var n=new Pv(t[i]);this.append(n),e&&n.attachTo(e)}},e.prototype.optionsChange=function(t){"gradient.stops"===t.field?(gv.prototype.clear.call(this),this.loadStops()):"gradient"===t.field&&this.allAttr(this.mapCoordinates())},e.prototype.renderCoordinates=function(){return yv(this.mapCoordinates())},e.prototype.mapSpace=function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]},e}(Mv);var Fv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.start(),i=t.end();return[["x1",e.x],["y1",e.y],["x2",i.x],["y2",i.y],this.mapSpace()]},e}(Iv);const Dv=Fv;var Rv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.center(),i=t.radius();return[["cx",e.x],["cy",e.y],["r",i],this.mapSpace()]},e}(Iv);const Lv=Rv;const Nv=function(t){function e(e){t.call(this),this.srcElement=e,this.id=e.id,this.load([e])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"},e}(Mv);var Bv=function(t){function e(){t.call(this),this.definitionMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t},e.prototype.template=function(){return"<defs>"+this.renderChildren()+"</defs>"},e.prototype.definitionChange=function(t){var e=t.definitions,i=t.action;"add"===i?this.addDefinitions(e):"remove"===i&&this.removeDefinitions(e)},e.prototype.createDefinition=function(t,e){var i;return"clip"===t?i=Nv:"fill"===t&&(e instanceof Du?i=Dv:e instanceof Lu&&(i=Lv)),new i(e)},e.prototype.addDefinitions=function(t){for(var e in t)this.addDefinition(e,t[e])},e.prototype.addDefinition=function(t,e){var i=this.element,n=this.definitionMap,r=e.id,s=n[r];if(s)s.count++;else{var o=this.createDefinition(t,e);n[r]={element:o,count:1},this.append(o),i&&o.attachTo(this.element)}},e.prototype.removeDefinitions=function(t){for(var e in t)this.removeDefinition(t[e])},e.prototype.removeDefinition=function(t){var e=this.definitionMap,i=t.id,n=e[i];n&&(n.count--,0===n.count&&(this.remove(this.childNodes.indexOf(n.element),1),delete e[i]))},e}(Mv);const jv=Bv;var zv=function(t){function e(e){t.call(this),this.options=e,this.defs=new jv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t,this.defs.attachTo(t.firstElementChild)},e.prototype.clear=function(){gv.prototype.clear.call(this)},e.prototype.template=function(){return this.defs.render()+this.renderChildren()},e.prototype.definitionChange=function(t){this.defs.definitionChange(t)},e}(Mv);const Uv=zv;var $v={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Hv="solid",Vv="butt",qv={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},Wv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.attr("d",this.renderData()),this.invalidate()},e.prototype.optionsChange=function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:var i=qv[e.field];i&&this.attr(i,e.value)}t.prototype.optionsChange.call(this,e)},e.prototype.content=function(){this.element&&(this.element.textContent=this.srcElement.content())},e.prototype.renderData=function(){return this.srcElement.toString(3)||void 0},e.prototype.mapStroke=function(t){var e=[];return t&&!za(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),zo(t.opacity)&&e.push(["stroke-opacity",t.opacity]),zo(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",xv]),e},e.prototype.renderStroke=function(){return yv(this.mapStroke(this.srcElement.options.stroke))},e.prototype.renderDashType=function(t){var e=t.dashType,i=t.width;if(void 0===i&&(i=1),e&&e!==Hv){for(var n=$v[e.toLowerCase()],r=[],s=0;s<n.length;s++)r.push(n[s]*i);return r.join(" ")}},e.prototype.renderLinecap=function(t){var e=t.dashType,i=t.lineCap;return e&&"solid"!==e?Vv:i},e.prototype.mapFill=function(t){var e=[];return t&&"Gradient"===t.nodeType||(t&&!za(t.color)?(e.push(["fill",t.color]),zo(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill",xv])),e},e.prototype.renderFill=function(){return yv(this.mapFill(this.srcElement.options.fill))},e.prototype.template=function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+mv("d",this.renderData())+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"},e}(Mv);const Xv=Wv;var Gv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toPath().toString(3)},e}(Xv);const Kv=Gv;var Yv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()},e.prototype.center=function(){return this.srcElement.geometry().center},e.prototype.radius=function(){return this.srcElement.geometry().radius},e.prototype.template=function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"},e}(Xv);const Jv=Yv;const Zv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},e.prototype.optionsChange=function(e){"transform"===e.field&&this.transformChange(e.value),t.prototype.optionsChange.call(this,e)},e}(Mv);var Qv=/&/g,tb=/</g,eb=/"/g,ib=/'/g,nb=/>/g;function rb(t){return String(t).replace(Qv,"&amp;").replace(tb,"&lt;").replace(nb,"&gt;").replace(eb,"&quot;").replace(ib,"&#39;")}var sb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.allAttr(this.mapPosition()),this.invalidate()},e.prototype.optionsChange=function(e){"src"===e.field&&this.allAttr(this.mapSource()),t.prototype.optionsChange.call(this,e)},e.prototype.mapPosition=function(){var t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]},e.prototype.renderPosition=function(){return yv(this.mapPosition())},e.prototype.mapSource=function(t){var e=this.srcElement.src();return t&&(e=rb(e)),[["xlink:href",e]]},e.prototype.renderSource=function(){return yv(this.mapSource(!0))},e.prototype.template=function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+"></image>"},e}(Xv);const ob=sb;var ab=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toString(3)||"undefined"},e}(Xv);const lb=ab;var cb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()},e.prototype.size=function(){return this.srcElement.geometry().size},e.prototype.origin=function(){return this.srcElement.geometry().origin},e.prototype.rx=function(){return this.srcElement.geometry().cornerRadius[0]},e.prototype.ry=function(){return this.srcElement.geometry().cornerRadius[1]},e.prototype.template=function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' rx='"+this.rx()+"' ry='"+this.ry()+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"},e}(Xv);const hb=cb;var ub=/&(?:[a-zA-Z]+|#\d+);/g;function pb(t){if(!t||"string"!=typeof t||!ub.test(t))return t;var e=pb._element;return ub.lastIndex=0,t.replace(ub,(function(t){return e.innerHTML=t,e.textContent||e.innerText}))}"undefined"!=typeof document&&(pb._element=document.createElement("span"));var db=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()},e.prototype.optionsChange=function(e){"font"===e.field?(this.attr("style",vv(this.mapStyle())),this.geometryChange()):"content"===e.field&&t.prototype.content.call(this,this.srcElement.content()),t.prototype.optionsChange.call(this,e)},e.prototype.mapStyle=function(e){var i=t.prototype.mapStyle.call(this,e),n=this.srcElement.options.font;return e&&(n=rb(n)),i.push(["font",n],["white-space","pre"]),i},e.prototype.pos=function(){var t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)},e.prototype.renderContent=function(){var t=this.srcElement.content();return hl(t=rb(t=pb(t)))},e.prototype.renderTextAnchor=function(){var t;return!(this.options||{}).rtl||Sa.browser.msie||Sa.browser.edge||(t="end"),mv("text-anchor",t)},e.prototype.template=function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"},e}(Xv);const fb=db;bv.Arc=Kv,bv.Circle=Jv,bv.Group=Zv,bv.Image=ob,bv.MultiPath=lb,bv.Path=Xv,bv.Rect=hb,bv.Text=fb;var gb=function(t){function e(e,i){t.call(this,e,i),this._root=new Uv(Object.assign({rtl:"rtl"===Ya(e,"direction").direction},this.options)),Av(this.element,this._template()),this._rootElement=this.element.firstElementChild,function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,r=t.style;0===i&&0===n||(r.left=i+"px",r.top=n+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),Ga(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"svg"},e.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,Qa(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t,this._rootElement.setAttribute("viewBox",e)},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear()},e.prototype.svg=function(){return"<?xml version='1.0' ?>"+this._template()},e.prototype.exportVisual=function(){var t=this._visual,e=this._offset;if(e){var i=new lu;i.children.push(t),i.transform(jc().translate(-e.x,-e.y)),t=i}return t},e.prototype._resize=function(){this._offset&&this.translate(this._offset)},e.prototype._template=function(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+wv+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"},Object.defineProperties(e.prototype,i),e}(dv);const mb=gb;const yb={};function vb(t,e){var i=e.segments;if(0!==i.length){var n=i[0],r=n.anchor();t.moveTo(r.x,r.y);for(var s=1;s<i.length;s++){r=(n=i[s]).anchor();var o=i[s-1].controlOut(),a=n.controlIn();o&&a?t.bezierCurveTo(o.x,o.y,a.x,a.y,r.x,r.y):t.lineTo(r.x,r.y)}e.options.closed&&t.closePath()}}var bb=function(t){function e(e){t.call(this,e),e&&this.initClip()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initClip=function(){var t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))},e.prototype.clear=function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),t.prototype.clear.call(this)},e.prototype.clearClip=function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},e.prototype.setClip=function(t){this.clip&&(t.beginPath(),vb(t,this.clip),t.clip())},e.prototype.optionsChange=function(e){"clip"===e.field&&(this.clearClip(),this.initClip()),t.prototype.optionsChange.call(this,e)},e.prototype.setTransform=function(t){if(this.srcElement){var e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}},e.prototype.loadElements=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],s=r.children,o=new yb[r.nodeType](r,i);s&&s.length>0&&o.load(s,e,i),zo(e)?this.insertAt(o,e):this.append(o)}},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this.invalidate()},e.prototype.setOpacity=function(t){if(this.srcElement){var e=this.srcElement.opacity();zo(e)&&this.globalAlpha(t,e)}},e.prototype.globalAlpha=function(t,e){var i=e;i&&t.globalAlpha&&(i*=t.globalAlpha),t.globalAlpha=i},e.prototype.visible=function(){var t=this.srcElement;return!t||t&&!1!==t.options.visible},e}(gv);const wb=bb;var xb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){if(this.visible()){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);for(var e=this.childNodes,i=0;i<e.length;i++){var n=e[i];n.visible()&&n.renderTo(t)}t.restore()}},e}(ou(wb,"childNodes"));const Sb=xb;function kb(t,e){var i,n=0;if(!e||e<=0)return t;var r=function(){var r=Va()-n,s=arguments,o=function(){t.apply(null,s),n=Va()};if(!n)return o();i&&clearTimeout(i),r>e?o():i=setTimeout(o,e-r)};return r.cancel=function(){clearTimeout(i)},r}var Cb=function(t){function e(e,i){t.call(this),this.canvas=e,this.size=i,this.ctx=e.getContext("2d");var n=this._invalidate.bind(this);this.invalidate=kb((function(){du(n)}),16.666666666666668)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas=null,this.ctx=null},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this._invalidate()},e.prototype._rescale=function(t){var e=this.canvas,i=this.size;e.width=i.width*t,e.height=i.height*t,this.ctx.scale(t,t)},e.prototype._devicePixelRatio=function(){return"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.prototype._invalidate=function(t){if(this.ctx){var e=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}},e}(ou(Sb,"childNodes"));const Ab=Cb;var _b=function(t){function e(){t.call(this),this.shapes=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._add=function(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this},e.prototype.pointShapes=function(t){for(var e=this.shapes,i=e.length,n=[],r=0;r<i;r++)e[r].bbox.containsPoint(t)&&n.push(e[r].shape);return n},e.prototype.insert=function(t,e){this._add(t,e)},e.prototype.remove=function(t){for(var e=this.shapes,i=e.length,n=0;n<i;n++)if(e[n].shape===t){e.splice(n,1);break}},e}(el);const Tb=_b;var Ob=function(t){function e(e){t.call(this),this.children=[],this.rect=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.inBounds=function(t){var e=this.rect,i=e.bottomRight(),n=t.bottomRight(),r=e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&n.x<=i.x&&n.y<=i.y;return r},e.prototype.pointShapes=function(e){for(var i=this.children,n=i.length,r=t.prototype.pointShapes.call(this,e),s=0;s<n;s++)Aa(r,i[s].pointShapes(e));return r},e.prototype.insert=function(t,e){var i=this.children,n=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{i.length||this._initChildren();for(var r=0;r<i.length;r++)if(i[r].insert(t,e)){n=!0;break}n||this._add(t,e)}n=!0}return n},e.prototype._initChildren=function(){var t=this.rect,i=this.children,n=t.center(),r=t.width()/2,s=t.height()/2;i.push(new e(new _c([t.origin.x,t.origin.y],[r,s])),new e(new _c([n.x,t.origin.y],[r,s])),new e(new _c([t.origin.x,n.y],[r,s])),new e(new _c([n.x,n.y],[r,s])))},e}(Tb);const Eb=Ob;var Mb=3e3,Pb=function(t){function e(){t.call(this),this.initRoots()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initRoots=function(){this.rootMap={},this.root=new Tb,this.rootElements=[]},e.prototype.clear=function(){for(var t=this.rootElements,e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()},e.prototype.pointShape=function(t){var e=(this.rootMap[Math.floor(t.x/Mb)]||{})[Math.floor(t.y/Mb)],i=this.root.pointShapes(t);e&&(i=i.concat(e.pointShapes(t))),this.assignZindex(i),i.sort(Ib);for(var n=0;n<i.length;n++)if(i[n].containsPoint(t))return i[n]},e.prototype.assignZindex=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=0,r=Math.pow(1e4,75),s=[];i;)s.push(i),i=i.parent;for(;s.length;)n+=(((i=s.pop()).parent?i.parent.children:this.rootElements).indexOf(i)+1)*r,r/=1e4;t[e]._zIndex=n}},e.prototype.optionsChange=function(t){"transform"!==t.field&&"stroke.width"!==t.field||this.bboxChange(t.element)},e.prototype.geometryChange=function(t){this.bboxChange(t.element)},e.prototype.bboxChange=function(t){if("Group"===t.nodeType)for(var e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)},e.prototype.add=function(t){var e=Array.isArray(t)?t.slice(0):[t];Aa(this.rootElements,e),this._insert(e)},e.prototype.childrenChange=function(t){if("remove"===t.action)for(var e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))},e.prototype._insert=function(t){for(var e;t.length>0;)(e=t.pop()).addObserver(this),"Group"===e.nodeType?Aa(t,e.children):this._insertShape(e)},e.prototype._insertShape=function(t){var e=t.bbox();if(e){var i=this.getSectors(e),n=i[0][0],r=i[1][0];if(this.inRoot(i))this.root.insert(t,e);else{var s=this.rootMap;s[n]||(s[n]={}),s[n][r]||(s[n][r]=new Eb(new _c([n*Mb,r*Mb],[Mb,Mb]))),s[n][r].insert(t,e)}}},e.prototype.remove=function(t){if(t.removeObserver(this),"Group"===t.nodeType)for(var e=t.children,i=0;i<e.length;i++)this.remove(e[i]);else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)},e.prototype.inRoot=function(t){return t[0].length>1||t[1].length>1},e.prototype.getSectors=function(t){for(var e=t.bottomRight(),i=Math.floor(e.x/Mb),n=Math.floor(e.y/Mb),r=[[],[]],s=Math.floor(t.origin.x/Mb);s<=i;s++)r[0].push(s);for(var o=Math.floor(t.origin.y/Mb);o<=n;o++)r[1].push(o);return r},e}(el);function Ib(t,e){return t._zIndex<e._zIndex?1:t._zIndex>e._zIndex?-1:0}const Fb=Pb;var Db=function(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element};Db.prototype.clear=function(){this._resetCursor()},Db.prototype.destroy=function(){this._resetCursor(),delete this.element},Db.prototype._mouseenter=function(t){var e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()},Db.prototype._mouseleave=function(){this._resetCursor()},Db.prototype._shapeCursor=function(t){for(var e=t.element;e&&!zo(e.options.cursor);)e=e.parent;if(e)return e.options.cursor},Db.prototype._getCursor=function(){if(this.element)return this.element.style.cursor},Db.prototype._setCursor=function(t){this.element&&(this.element.style.cursor=t,this._current=t)},Db.prototype._resetCursor=function(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)};const Rb=Db;var Lb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()},e.prototype.setFill=function(t){var e=this.srcElement.options.fill,i=!1;return e&&("Gradient"===e.nodeType?(this.setGradientFill(t,e),i=!0):za(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),i=!0)),i},e.prototype.setGradientFill=function(t,e){var i,n=this.srcElement.rawBBox();if(e instanceof Du){var r=e.start(),s=e.end();i=t.createLinearGradient(r.x,r.y,s.x,s.y)}else if(e instanceof Lu){var o=e.center();i=t.createRadialGradient(o.x,o.y,0,o.x,o.y,e.radius())}!function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=tc(n.color());r.a*=n.opacity(),t.addColorStop(n.offset(),r.toCssRgba())}}(i,e.stops),t.save(),e.userSpace()||t.transform(n.width(),0,0,n.height(),n.origin.x,n.origin.y),t.fillStyle=i,t.fill(),t.restore()},e.prototype.setStroke=function(t){var e=this.srcElement.options.stroke;if(e&&!za(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=Xa(e.width,1),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0},e.prototype.dashType=function(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()},e.prototype.setLineDash=function(t){var e=this.dashType();if(e&&e!==Hv){var i=$v[e];t.setLineDash?t.setLineDash(i):(t.mozDash=i,t.webkitLineDash=i)}},e.prototype.setLineCap=function(t){var e=this.dashType(),i=this.srcElement.options.stroke;e&&e!==Hv?t.lineCap=Vv:i&&i.lineCap&&(t.lineCap=i.lineCap)},e.prototype.setLineJoin=function(t){var e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)},e.prototype.renderPoints=function(t,e){vb(t,e)},e}(wb);const Nb=Lb;var Bb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){vb(t,this.srcElement.toPath())},e}(Nb);const jb=Bb;var zb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){var e=this.srcElement.geometry(),i=e.center,n=e.radius;t.arc(i.x,i.y,n,0,2*Math.PI)},e}(Nb);const Ub=zb;var $b=function(t){function e(e,i){t.call(this,e),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=Oa();var n=this.img=new Image,r=e.src();i&&!/^data:/i.test(r)&&(n.crossOrigin=i),r&&(n.src=r),n.complete?this.onLoad():(n.onload=this.onLoad,n.onerror=this.onError)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){"resolved"===this.loading.state()&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())},e.prototype.optionsChange=function(e){"src"===e.field?(this.loading=Oa(),this.img.src=this.srcElement.src()):t.prototype.optionsChange.call(this,e)},e.prototype.onLoad=function(){this.loading.resolve(),this.invalidate()},e.prototype.onError=function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},e.prototype.drawImage=function(t){var e=this.srcElement.rect(),i=e.topLeft();t.drawImage(this.img,i.x,i.y,e.width(),e.height())},e}(Nb);const Hb=$b;var Vb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){for(var e=this.srcElement.paths,i=0;i<e.length;i++)vb(t,e[i])},e}(Nb);const qb=Vb;var Wb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(e){var i=this.srcElement.geometry(),n=i.cornerRadius,r=n[0],s=n[1];if(0===r&&0===s){var o=i.origin,a=i.size;e.rect(o.x,o.y,a.width,a.height)}else t.prototype.renderPoints.call(this,e,Kh.fromRect(i))},e}(Nb);const Xb=Wb;var Gb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){var e=this.srcElement,i=e.position(),n=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left",this.setFill(t)&&t.fillText(e.content(),i.x,i.y+n.baseline),this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),i.x,i.y+n.baseline)),t.restore()},e}(Nb);const Kb=Gb;yb.Arc=jb,yb.Circle=Ub,yb.Group=Sb,yb.Image=Hb,yb.MultiPath=qb,yb.Path=Nb,yb.Rect=Xb,yb.Text=Kb;var Yb=function(t){function e(e,i){t.call(this,e,i),this.element.innerHTML=this._template(this);var n=this.element.firstElementChild,r=Za(e);n.width=r.width,n.height=r.height,this._rootElement=n,this._root=new Ab(n,r),this._mouseTrackHandler=this._trackMouse.bind(this),Ga(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"canvas"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),Qa(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()},e.prototype.eventTarget=function(t){if(this._searchTree){var e=this._surfacePoint(t);return this._searchTree.pointShape(e)}},e.prototype.image=function(){var t=this._root,e=this._rootElement,i=[];t.traverse((function(t){t.loading&&i.push(t.loading)}));var n=Oa(),r=function(){t._invalidate({fixedScale:!0});try{var i=e.toDataURL();n.resolve(i)}catch(t){n.reject(t)}};return qa(i).then(r,r),n},e.prototype.suspendTracking=function(){t.prototype.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},e.prototype.resumeTracking=function(){if(t.prototype.resumeTracking.call(this),!this._searchTree){this._searchTree=new Fb;for(var e=this._root.childNodes,i=[],n=0;n<e.length;n++)i.push(e[n].srcElement);this._searchTree.add(i)}},e.prototype._resize=function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()},e.prototype._template=function(){return"<canvas style='width: 100%; height: 100%;'></canvas>"},e.prototype._enableTracking=function(){this._searchTree=new Fb,this._cursor=new Rb(this),t.prototype._enableTracking.call(this)},e.prototype._trackMouse=function(t){if(!this._suspendedTracking){var e=this.eventTarget(t);if("click"!==t.type){var i=this._currentShape;i&&i!==e&&this.trigger("mouseleave",{element:i,originalEvent:t,type:"mouseleave"}),e&&i!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Object.defineProperties(e.prototype,i),e}(dv);const Jb=Yb;var Zb,Qb,tw=function(){return"undefined"!=typeof document},ew=function(t){function e(){t.call(this),this._items=[{name:"svg",type:mb},{name:"canvas",type:Jb}]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0},current:{configurable:!0}};return i.support.get=function(){return Qb||(Qb={canvas:tw()&&document.createElement("canvas").getContext,svg:tw()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}),Qb},i.current.get=function(){return Zb||(Zb=new e),Zb},e.prototype.create=function(t,e){var i=this._items,n=i[0];if(e&&e.type)for(var r=e.type.toLowerCase(),s=0;s<i.length;s++)if(i[s].name===r){n=i[s];break}if(n)return new n.type(t,e);vl("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)},Object.defineProperties(e,i),e}(el);const iw=ew;var nw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0}};return i.support.get=function(){return iw.support},e.create=function(t,e){return iw.current.create(t,e)},Object.defineProperties(e,i),e}(dv);const rw=nw;var sw=function(t){function e(){t.call(this),this._points=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._points=[]},e.prototype.show=function(t,e){var i=[].concat(t);this.hide();for(var n=0;n<i.length;n++){var r=i[n];r&&r.toggleHighlight&&r.hasHighlight()&&(this.togglePointHighlight(r,!0,e),this._points.push(r))}},e.prototype.togglePointHighlight=function(t,e,i){var n=(t.options.highlight||{}).toggle;if(n){var r={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:ow,visual:t.highlightVisual(),show:e};n(r),r._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},e.prototype.hide=function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},e.prototype.isHighlighted=function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1},e}(el);function ow(){this._defaultPrevented=!0}const aw=sw;function lw(t,e){var i=(e||"").toLowerCase(),n=t.event;return"none"===i&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"]}function cw(t){for(var e={},i=0;i<t.length;i++){var n=t[i];n.axis.options.name&&(e[n.axis.options.name]={min:n.range.min,max:n.range.max})}return e}var hw=function(t){function e(e,i){t.call(this),this.plotArea=e,this.options=Ko({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(t){return this._active=lw(t,this.options.key),this._active},e.prototype.move=function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,Ro).concat(this._panAxes(t,Lo));if(e.length)return this.axisRanges=e,cw(e)}},e.prototype.end=function(){var t=this._active;return this._active=!1,t},e.prototype.pan=function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},e.prototype.destroy=function(){delete this.plotArea},e.prototype._panAxes=function(t,e){var i=this.plotArea,n=-t[e].delta,r=(this.options.lock||"").toLowerCase(),s=[];if(0!==n&&(r||"").toLowerCase()!==e)for(var o=i.axes,a=0;a<o.length;a++){var l=o[a];if(e===Ro&&!l.options.vertical||e===Lo&&l.options.vertical){var c=l.pan(n);c&&(c.limitRange=!0,s.push({axis:l,range:c}))}}return s},e}(el);hw.prototype.options={key:"none",lock:"none"};const uw=hw;var pw=function(t){function e(e,i){t.call(this),this.chart=e,this.options=Ko({},this.options,i),this.createElement()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElement=function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},e.prototype.removeElement=function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},e.prototype.setStyles=function(t){ta(this._marquee,t)},e.prototype.start=function(t){if(lw(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),n=this._zoomPane=e._plotArea.paneByPoint(i),r=n?n.chartsBox().clone():null;if(n&&r){var s=this._elementOffset();return r.translate(s.left,s.top),this._zoomPaneClipBox=r,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},e.prototype._elementOffset=function(){var t=this.chart.element,e=ta(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,n=e.paddingTop,r=kl(t);return{left:i+r.left,top:n+r.top}},e.prototype.move=function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},e.prototype.end=function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var n={x:i.left,y:i.top},r={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(n,r),this.removeElement(),delete this._zoomPane,cw(this.axisRanges)}},e.prototype.zoom=function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){this.removeElement(),delete this._marquee,delete this.chart},e.prototype._updateAxisRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],r=this._zoomPane.axes,s=0;s<r.length;s++){var o=r[s],a=o.options.vertical;if((i!==Ro||a)&&(i!==Lo||!a)&&xl(o.axisIndex)){var l=o.pointsRange(t,e);l&&n.push({axis:o,range:l})}}this.axisRanges=n},e.prototype._selectionPosition=function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},n=t.x.location,r=t.y.location,s=(this.options.lock||"").toLowerCase(),o=Math.min(i.x,n),a=Math.min(i.y,r),l=Math.abs(i.x-n),c=Math.abs(i.y-r);return s===Ro&&(o=e.x1,l=e.width()),s===Lo&&(a=e.y1,c=e.height()),n>e.x2&&(l=e.x2-i.x),n<e.x1&&(l=i.x-e.x1),r>e.y2&&(c=e.y2-i.y),r<e.y1&&(c=i.y-e.y1),{left:Math.max(o,e.x1),top:Math.max(a,e.y1),width:l,height:c}},e}(el);pw.prototype.options={key:"shift",lock:"none"};const dw=pw;var fw=function(t){function e(e,i){t.call(this),this.chart=e,this.options=Ko({rate:.3},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],r=this.chart._plotArea.axes,s=0;s<r.length;s++){var o=r[s],a=o.options.vertical;if((i!==Ro||a)&&(i!==Lo||!a)&&o.zoomRange){var l=El(this.options.rate,.01,.9),c=o.zoomRange(-t*l,e);c&&n.push({axis:o,range:c})}}return this.axisRanges=n,cw(n)},e.prototype.zoom=function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){delete this.chart},e}(el);const gw=fw;function mw(t,e,i,n,r){return"start"===i?e.origin[n]:"end"===i?e.origin[n]+e.size[r]-t:e.origin[n]+(e.size[r]-t)/2}function yw(t,e,i,n,r){return"start"===i?e.origin[n]+e.size[r]-t:"end"===i?e.origin[n]:e.origin[n]+(e.size[r]-t)/2}var vw={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},bw=function(t,e){t.forEach(e)},ww=function(t,e){for(var i=t.length-1;i>=0;i--)e(t[i],i)},xw=function(t){function e(e,i){t.call(this,Object.assign({},vw,i)),this._rect=e,this._fieldMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(t){return t?(this._rect=t,this):this._rect},e.prototype._initMap=function(){var t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=ww,this.justifyAlign=yw):(this.forEach=bw,this.justifyAlign=mw)},e.prototype.reflow=function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var t,e,i,n=this.options,r=this._rect,s=this._initGroups(),o=s.groups,a=s.groupsSize,l=this._fieldMap,c=l.sizeField,h=l.groupsSizeField,u=l.groupAxis,p=l.groupsAxis,d=new Sc,f=new Sc,g=new Cc,m=mw(a,r,n.alignContent,p,h),y=function(r,s){var o=e.elements[s];f[u]=t,f[p]=mw(r.size[h],i,n.alignItems,p,h),function(t,e,i){var n=i.transform()||jc(),r=n.matrix();r.e+=t.x-e.origin.x,r.f+=t.y-e.origin.y,n.matrix(r),i.transform(n)}(f,r,o),t+=r.size[c]+n.spacing},v=0;v<o.length;v++)e=o[v],d[u]=t=this.justifyAlign(e.size,r,n.justifyContent,u,c),d[p]=m,g[c]=e.size,g[h]=e.lineSize,i=new _c(d,g),this.forEach(e.bboxes,y),m+=e.lineSize+n.lineSpacing;if(!n.wrap&&e.size>r.size[c]){var b=r.size[c]/i.size[c],w=i.topLeft().scale(b,b),x=mw(i.size[h]*b,r,n.alignContent,p,h),S=jc();"x"===u?S.translate(r.origin.x-w.x,x-w.y):S.translate(x-w.x,r.origin.y-w.y),S.scale(b,b),this.transform(S)}}},e.prototype._initGroups=function(){for(var t=this,e=this.options,i=this.children,n=e.lineSpacing,r=e.wrap,s=e.spacing,o=this._fieldMap.sizeField,a=this._newGroup(),l=[],c=function(){l.push(a),h+=a.lineSize+n},h=-n,u=0;u<i.length;u++){var p=i[u],d=i[u].clippedBBox();p.visible()&&d&&(r&&a.size+d.size[o]+s>t._rect.size[o]?0===a.bboxes.length?(t._addToGroup(a,d,p),c(),a=t._newGroup()):(c(),a=t._newGroup(),t._addToGroup(a,d,p)):t._addToGroup(a,d,p))}return a.bboxes.length&&c(),{groups:l,groupsSize:h}},e.prototype._addToGroup=function(t,e,i){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(i)},e.prototype._newGroup=function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},e}(lu);const Sw=xw;var kw=function(t){function e(e,i){t.call(this,e),this.chartService=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new Sw(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":"horizontal",reverse:e.rtl,alignItems:i?"start":"center"});for(var n=0;n<t.length;n++){var r=t[n];r.reflow(new Ec),r.renderVisual()}},e.prototype.reflow=function(t){this.visual.rect(t.toRect()),this.visual.reflow();var e=this.visual.clippedBBox();this.box=e?Ku(e):new Ec},e.prototype.renderVisual=function(){this.addVisual()},e.prototype.createVisual=function(){},e}(wu);const Cw=kw;var Aw=function(t){function e(e){t.call(this,e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainer=function(){this.container=new Hu({vertical:!1,wrap:!1,align:po,spacing:this.options.spacing}),this.append(this.container)},e.prototype.createMarker=function(){this.container.append(new Cu(this.markerOptions()))},e.prototype.markerOptions=function(){var t=this.options,e=t.markerColor;return Ko({},t.markers,{background:e,border:{color:e}})},e.prototype.createLabel=function(){var t=this.options,e=Ko({},t.labels);this.container.append(new Zu(t.text,e))},e.prototype.renderComplete=function(){t.prototype.renderComplete.call(this);var e=this.options.cursor||{},i=this._itemOverlay=Kh.fromRect(this.container.box.toRect(),{fill:{color:Fo,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(i)},e.prototype.click=function(t,e){var i=this.eventArgs(e);!t.trigger("legendItemClick",i)&&e&&"contextmenu"===e.type&&e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);return t.trigger("legendItemHover",i)||t._legendItemHover(i.seriesIndex,i.pointIndex),!0},e.prototype.out=function(t,e){t._unsetActivePoint(),t.trigger("legendItemLeave",this.eventArgs(e))},e.prototype.eventArgs=function(t){var e=this.options;return{element:_l(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},e.prototype.renderVisual=function(){var e=this,i=this.options,n=i.visual;n?(this.visual=n({active:i.active,series:i.series,sender:this.getSender(),pointIndex:i.pointIndex,options:{markers:this.markerOptions(),labels:i.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this.addVisual()):t.prototype.renderVisual.call(this)},e}(Su);const _w=Aw;var Tw="horizontal",Ow="custom",Ew=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,e),this.chartService=i,da(this.options.position,[Po,Oo,uo,So,Ow])||(this.options.position=Oo),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainers=function(){var t=this.options,e=t.position,i=t.align,n=e,r=po;e===Ow?n=So:da(e,[Po,uo])?(n="start"===i?So:"end"===i?Oo:po,r=e):i&&("start"===i?r=Po:"end"===i&&(r=uo)),this.container=new Su({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:r,align:n,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new Su({vAlign:r,align:n,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},e.prototype.createItems=function(){var t=this.getService(),e=this.options,i=this.isVertical(),n=new Cw({vertical:i,spacing:e.spacing,rtl:t.rtl},t),r=e.items;e.reverse&&(r=r.slice(0).reverse());for(var s=r.length,o=0;o<s;o++){var a=r[o];n.append(new _w(Ko({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,a)))}n.render(),this.itemsContainer.append(n)},e.prototype.isVertical=function(){var t=this.options,e=t.orientation,i=t.position;return i===Ow&&e!==Tw||(xl(e)?e!==Tw:da(i,[So,Oo]))},e.prototype.hasItems=function(){return this.container.children[0].children.length>0},e.prototype.reflow=function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===Ow?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new Ec(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},e.prototype.containerReflow=function(t){var e=this.options,i=this.container,n=e.position,r=e.width,s=e.height,o=n===Po||n===uo?Ro:Lo,a=this.isVertical(),l=t.clone(),c=t.clone();n!==So&&n!==Oo||(c.y1=l.y1=0),a&&s?(c.y2=c.y1+s,c.align(l,Lo,i.options.vAlign)):!a&&r&&(c.x2=c.x1+r,c.align(l,Ro,i.options.align)),i.reflow(c);var h=(c=i.box).clone();(e.offsetX||e.offsetY)&&(c.translate(e.offsetX,e.offsetY),i.reflow(c)),h[o+1]=t[o+1],h[o+2]=t[o+2],this.box=h},e.prototype.containerCustomReflow=function(t){var e=this.options,i=this.container,n=e.offsetX,r=e.offsetY,s=e.width,o=e.height,a=this.isVertical(),l=t.clone();a&&o?l.y2=l.y1+o:!a&&s&&(l.x2=l.x1+s),i.reflow(l),l=i.box,i.reflow(new Ec(n,r,n+l.width(),r+l.height()))},e.prototype.renderVisual=function(){this.hasItems()&&t.prototype.renderVisual.call(this)},e.prototype.createLegendTitle=function(t){var e=Ko({},{color:ho,position:Po,align:po},t),i=e.text;if(t&&!1!==t.visible){if(xl(e)&&e.visible){var n=sa(e);n?i=n({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new Zu(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},e.prototype.createTitleLayout=function(){this.layout=new Hu({vertical:!0,wrap:!1}),this.container.append(this.layout)},e.prototype.hasTitle=function(){return Boolean(this.options.title&&!1!==this.options.title.visible)},e.prototype.appendTitleLayoutContent=function(){this.options.title.position===uo?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},e}(wu);Nl(Ew,{position:Oo,items:[],offsetX:0,offsetY:0,margin:ea(5),padding:ea(5),border:{color:ho,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:So,vAlign:po}});const Mw=Ew;var Pw=function(t){function e(){t.call(this),this._registry=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){this._registry.push({type:t,seriesTypes:e})},e.prototype.create=function(t,e,i){for(var n,r=this._registry,s=r[0],o=0;o<r.length;o++){var a=r[o];if((n=ly(t,a.seriesTypes)).length>0){s=a;break}}return new s.type(n,e,i)},e}(el);Pw.current=new Pw;const Iw=Pw;function Fw(t){var e=document.createElement("div");return t&&(e.className=t),e}function Dw(t){for(var e=t;e&&!ha(e,"k-handle");)e=e.parentNode;return e}var Rw=function(t){function e(e,i,n,r){t.call(this);var s=e.element;this.options=Ko({},this.options,n),this.chart=e,this.observer=r,this.chartElement=s,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof gd,this.initOptions(),this.visible=this.options.visible&&s.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPane=function(t){return this.categoryAxis.pane===t},e.prototype.createElements=function(){var t=this.options,e=this.wrapper=Fw("k-selector");ta(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=Fw("k-selection");this.leftMask=Fw("k-mask"),this.rightMask=Fw("k-mask"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i),i.appendChild(Fw("k-selection-bg"));var n=this.leftHandle=Fw("k-handle k-left-handle"),r=this.rightHandle=Fw("k-handle k-right-handle");n.appendChild(Fw()),r.appendChild(Fw()),i.appendChild(n),i.appendChild(r),this.chartElement.appendChild(e);var s=ta(i,["borderLeftWidth","borderRightWidth","height"]),o=ta(n,"height").height,a=ta(r,"height").height;t.selection={border:{left:s.borderLeftWidth,right:s.borderRightWidth}},ta(n,{top:(s.height-o)/2}),ta(r,{top:(s.height-a)/2}),e.style.cssText=e.style.cssText},e.prototype.bindEvents=function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),wl(this.wrapper,((t={})[bg]=this._mousewheelHandler,t))),this._domEvents=bp.create(this.wrapper,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},e.prototype.initOptions=function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&Ko(t,{min:td(i,t.min),max:td(i,t.max),from:td(i,t.from),to:td(i,t.to)});var n=ta(this.chartElement,["paddingLeft","paddingTop"]),r=n.paddingLeft,s=n.paddingTop;this.options=Ko({},{width:e.width(),height:e.height()+.1,padding:{left:r,top:s},offset:{left:e.x1+r,top:e.y1+s},from:t.min,to:t.max},t)},e.prototype.destroy=function(){var t;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(Fl(this.wrapper,((t={})[bg]=this._mousewheelHandler,t)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},e.prototype._rangeEventArgs=function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},e.prototype._start=function(t){var e=this.options,i=_l(t);if(!this._state&&i){this.chart._unsetActivePoint(),this._state={moveTarget:Dw(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var n=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(hg,n)&&(this._state=null)}},e.prototype._press=function(t){var e;(e=this._state?this._state.moveTarget:Dw(_l(t)))&&Bo(e,"k-handle-active")},e.prototype._move=function(t){if(this._state){var e=this,i=e._state,n=e.options,r=e.categoryAxis,s=i.range,o=i.moveTarget,a=r.options.reverse,l=this._index(n.from),c=this._index(n.to),h=this._index(n.min),u=this._index(n.max),p=i.startLocation-t.x.location,d=s.from,f=s.to,g=s.to-s.from,m=ta(this.wrapper,"width").width/(r.categoriesCount()-1),y=Math.round(p/m)*(a?-1:1);if(o){var v=ha(o,"k-left-handle"),b=ha(o,"k-right-handle");ha(o,"k-selection k-selection-bg")?(s.from=Math.min(Math.max(h,l-y),u-g),s.to=Math.min(s.from+g,u)):v&&!a||b&&a?(s.from=Math.min(Math.max(h,l-y),u-1),s.to=Math.max(s.from+1,s.to)):(v&&a||b&&!a)&&(s.to=Math.min(Math.max(h+1,c-y),u),s.from=Math.min(s.to-1,s.from)),s.from===d&&s.to===f||(this.move(s.from,s.to),this.trigger(ug,this._rangeEventArgs(s)))}}},e.prototype._end=function(){if(this._state){var t=this._state.moveTarget;t&&(n="k-handle-active",(i=t)&&i.className&&(i.className=i.className.replace(n,"").replace(jo," ")));var e=this._state.range;this.set(e.from,e.to),this.trigger(pg,this._rangeEventArgs(e)),delete this._state}var i,n},e.prototype._tap=function(t){var e=this.options,i=this.categoryAxis,n=this.chart._eventCoordinates(t),r=i.pointCategoryIndex(new fc(n.x,i.box.y1)),s=this._index(e.from),o=this._index(e.to),a=this._index(e.min),l=this._index(e.max),c=o-s,h=s+c/2,u={},p=3===t.event.which,d=Math.round(h-r);this._state||p||(this.chart._unsetActivePoint(),i.options.justified||d--,u.from=Math.min(Math.max(a,s-d),l-c),u.to=Math.min(u.from+c,l),this._start(t),this._state&&(this._state.range=u,this.trigger(ug,this._rangeEventArgs(u)),this._end()))},e.prototype._mousewheel=function(t){var e=this,i=Ca(t);if(this._start({target:this.selection}),this._state){var n=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(i)>1&&(i*=3),this.options.mousewheel.reverse&&(i*=-1),this.expand(i)&&this.trigger(ug,{axis:this.categoryAxis.options,delta:i,originalEvent:t,from:this._value(n.from),to:this._value(n.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._end()}),150)}},e.prototype._gesturestart=function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(hg,i)?this._state=null:t.preventDefault()},e.prototype._gestureend=function(){this._state&&(this.trigger(pg,this._rangeEventArgs(this._state.range)),delete this._state)},e.prototype._gesturechange=function(t){var e=this,i=e.chart,n=e._state,r=e.options,s=e.categoryAxis,o=n.range,a=i._toModelCoordinates(t.touches[0].x.location).x,l=i._toModelCoordinates(t.touches[1].x.location).x,c=Math.min(a,l),h=Math.max(a,l);t.preventDefault(),o.from=s.pointCategoryIndex(new fc(c))||r.min,o.to=s.pointCategoryIndex(new fc(h))||r.max,this.move(o.from,o.to),this.trigger(ug,this._rangeEventArgs(o))},e.prototype._index=function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},e.prototype._value=function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},e.prototype._slot=function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},e.prototype.move=function(t,e){var i=this.options,n=this.categoryAxis.options.reverse,r=i.offset,s=i.padding,o=i.selection.border,a=n?e:t,l=n?t:e,c="x"+(n?2:1),h=this._slot(a),u=Il(h[c]-r.left+s.left);ta(this.leftMask,{width:u}),ta(this.selection,{left:u}),h=this._slot(l);var p=Il(i.width-(h[c]-r.left+s.left));ta(this.rightMask,{width:p});var d=i.width-p;d!==i.width&&(d+=o.right),ta(this.rightMask,{left:d}),ta(this.selection,{width:Math.max(i.width-(u+p)-o.right,0)})},e.prototype.set=function(t,e){var i=this.options,n=this._index(i.min),r=this._index(i.max),s=El(this._index(t),n,r),o=El(this._index(e),s+1,r);i.visible&&this.move(s,o),i.from=this._value(s),i.to=this._value(o)},e.prototype.expand=function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),r=e.mousewheel.zoom,s=this._index(e.from),o=this._index(e.to),a={from:s,to:o},l=Ko({},a);if(this._state&&(a=this._state.range),r!==Oo&&(a.from=El(El(s-t,0,o-1),i,n)),r!==So&&(a.to=El(El(o+t,a.from+1,n),i,n)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.zoom=function(t,e){var i=this.options,n=this._index(i.min),r=this._index(i.max),s=this._index(i.from),o=this._index(i.to),a={from:s,to:o},l=Ko({},a),c=this.categoryAxis.options.reverse,h=Ro+(c?"2":"1"),u=this.categoryAxis.lineBox(),p=Math.abs(u[h]-e.x),d=u.width(),f=Il(p/d,2),g=Il(f*t),m=Il((1-f)*t);if(this._state&&(a=this._state.range),a.from=El(El(s-g,0,o-1),n,r),a.to=El(El(o+m,a.from+1,r),n,r),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.trigger=function(t,e){return(this.observer||this.chart).trigger(t,e)},e}(el);Nl(Rw,{visible:!0,mousewheel:{zoom:"both"},min:Co,max:ko});const Lw=Rw;var Nw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(e){if(e&&e.tooltipAnchor&&(!this._current||this._current!==e)){var i=Ko({},this.options,e.options.tooltip),n=e.tooltipAnchor();n?(this._current=e,t.prototype.show.call(this,{point:e,anchor:n},i,e)):this.hide()}},e.prototype.hide=function(){delete this._current,t.prototype.hide.call(this)},e}(Gm);const Bw=Nw;var jw=function(t){function e(e,i){t.call(this,e.chartService,i),this.plotArea=e,this.formatService=e.chartService.format}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t,e){var i=ca(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var n=i[0],r=this.plotArea.categoryAxis.getSlot(n.categoryIx),s=e?this._slotAnchor(e,r):this._defaultAnchor(n,r);this.show({anchor:s,shared:!0,points:t,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},e.prototype._slotAnchor=function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},e.prototype._defaultAnchor=function(t,e){var i=t.owner.pane.chartsBox(),n=this.plotArea.categoryAxis.options.vertical,r=i.center(),s=e.center();return{point:n?new fc(r.x,s.y):new fc(s.x,r.y),align:{horizontal:"center",vertical:"center"}}},e}(Gm);Nl(jw,{categoryFormat:"{0:d}"});const zw=jw;var Uw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?Lo:Ro,n=this.fromScale=new Sc(1,1);n[i]=ff,t.transform(jc().scale(n.x,n.y))}else this.abort()},e.prototype.step=function(t){var e=ga(this.fromScale.x,1,t),i=ga(this.fromScale.y,1,t);this.element.transform(jc().scale(e,i,this.origin))},e.prototype.abort=function(){t.prototype.abort.call(this),this.element.transform(null)},e}(vu);Nl(Uw,{duration:uf}),mu.current.register(Cf,Uw);var $w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.center=this.element.bbox().center();this.element.transform(jc().scale(ff,ff,t))},e.prototype.step=function(t){this.element.transform(jc().scale(t,t,this.center))},e}(vu);Nl($w,{easing:"easeOutElastic"}),mu.current.register(_f,$w);var Hw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},e.prototype.step=function(t){this.element.opacity(t*this.fadeTo)},e}(vu);Nl(Hw,{duration:200,easing:"linear"}),mu.current.register(pf,Hw);var Vw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.element.transform(jc().scale(ff,ff,this.options.center))},e.prototype.step=function(t){this.element.transform(jc().scale(t,t,this.options.center))},e}(vu);Nl(Vw,{easing:"easeOutElastic",duration:uf}),mu.current.register(Lf,Vw);var qw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.createSegment=function(t,e,i){return new(e.style===xf?$g:Rg)(t,e,i)},e.prototype.animationPoints=function(){return t.prototype.animationPoints.call(this).concat(this._segments)},e.prototype.createMissingValue=function(t,e){if(e===yf){var i={x:t.x,y:t.y};return Dm(i.x)||(i.x=0),Dm(i.y)||(i.y=0),i}},e}(Lm);Ko(qw.prototype,Vg);const Ww=qw;var Xw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new am,this.yAxisRangeTracker=new am},e.prototype.render=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],s=i[r.options.name||"default"]||[];e.addToLegend(s);var o=e.filterVisibleSeries(s);o&&(e.createScatterChart(ly(o,Wf),r),e.createScatterLineChart(ly(o,Xf),r),e.createBubbleChart(ly(o,_f),r))}this.createAxes(t)},e.prototype.appendChart=function(e,i){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?(this.yAxisRangeTracker.reset(i),delete this.namedYAxes[i]):(this.xAxisRangeTracker.reset(i),delete this.namedXAxes[i]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,n=ca([].concat(e.xAxis),(function(t){return t.name===i}))[0],r=t.yAxis,s=ca([].concat(e.yAxis),(function(t){return t.name===r}))[0],o=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(s||{}).pane||o},e.prototype.createScatterChart=function(t,e){t.length>0&&this.appendChart(new Lm(this,{series:t,clip:e.options.clip}),e)},e.prototype.createScatterLineChart=function(t,e){t.length>0&&this.appendChart(new Ww(this,{series:t,clip:e.options.clip}),e)},e.prototype.createBubbleChart=function(t,e){t.length>0&&this.appendChart(new zm(this,{series:t,clip:e.options.clip}),e)},e.prototype.createXYAxis=function(t,e,i){for(var n,r=t.name,s=e?this.namedYAxes:this.namedXAxes,o=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=Ko({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=ay(a.type,gg),c=o.query(),h=l?{min:.1,max:1}:{min:0,max:1},u=o.query(r)||c||h,p=[a.min,a.max],d=this.series,f=0;f<d.length;f++){var g=d[f],m=g[e?"yAxis":"xAxis"];if(m===a.name||0===i&&!m){var y=sf.current.bindPoint(g,0).valueFields;p.push(y[e?"y":"x"]);break}}0===i&&c&&(u.min=Math.min(u.min,c.min),u.max=Math.max(u.max,c.max));for(var v=0;v<p.length;v++)if(p[v]instanceof Date){n=!0;break}var b=new(ay(a.type,mo)||!a.type&&n?Cd:l?Ed:Sd)(u.min,u.max,a,this.chartService);if(b.axisIndex=i,r){if(s[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");s[r]=b}return this.appendAxis(b),b},e.prototype.createAxes=function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),r=[],s=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){da(e.findPane(n[a].pane),t)&&r.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<s.length;l++){da(e.findPane(s[l].pane),t)&&o.push(e.createXYAxis(s[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||o[0]},e.prototype._dispatchEvent=function(t,e,i){for(var n=t._eventCoordinates(e),r=new fc(n.x,n.y),s=this.axes,o=s.length,a=[],l=[],c=0;c<o;c++){var h=s[c],u=h.options.vertical?l:a,p=h.getValue(r);null!==p&&u.push(p)}a.length>0&&l.length>0&&t.trigger(i,{element:_l(e),originalEvent:e,x:uy(a),y:uy(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),r=(i?n.y:n.x).indexOf(t);Gw(this.options,r,i,e),Gw(this.originalOptions,r,i,e)},e}(xy);function Gw(t,e,i,n){Ko([].concat(i?t.yAxis:t.xAxis)[e],n)}Nl(Xw,{xAxis:{},yAxis:{}}),Ko(Xw.prototype,ky);const Kw=Xw;var Yw=function(t){function e(e,i,n){t.call(this,n),this.value=e,this.sector=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options.labels,e=this.owner.chartService,i=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var n=sa(t),r=this.pointData();if(n?i=n(r):t.format&&(i=e.format.auto(t.format,i)),t.visible&&(i||0===i)){if(t.position===po||t.position===yg)t.color||(t.color=nc(this.options.color)),t.background||(t.background=this.options.color);else{var s=e.theme.seriesDefaults.labels;t.color=t.color||s.color,t.background=t.background||s.background}this.label=new Zu(i,Ko({},t,{align:po,vAlign:"",animation:{type:pf,delay:this.animationDelay}}),r),this.append(this.label)}}},e.prototype.reflow=function(t){this.render(),this.box=t,this.reflowLabel()},e.prototype.reflowLabel=function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=t.distance,r=i.middle();if(e){var s,o=e.box.height(),a=e.box.width();if(t.position===po)i.radius=Math.abs((i.radius-o)/2)+o,s=i.point(r),e.reflow(new Ec(s.x,s.y-o/2,s.x,s.y));else if(t.position===yg)i.radius=i.radius-o/2,s=i.point(r),e.reflow(new Ec(s.x,s.y-o/2,s.x,s.y));else{var l;(s=i.clone().expand(n).point(r)).x>=i.center.x?(l=s.x+a,e.orientation=Oo):(l=s.x-a,e.orientation=So),e.reflow(new Ec(l,s.y-o,s.x,s.y))}}},e.prototype.createVisual=function(){var e=this,i=this.sector,n=this.options;if(t.prototype.createVisual.call(this),this.value)if(n.visual){var r=(i.startAngle+180)%360,s=n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new Sc(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:r,endAngle:r+i.angle,options:n,sender:this.getSender(),createVisual:function(){var t=new lu;return e.createSegmentVisual(t),t}});s&&this.visual.append(s)}else this.createSegmentVisual(this.visual)},e.prototype.createSegmentVisual=function(t){var e=this.sector,i=this.options,n=i.border||{},r=n.width>0?{stroke:{color:n.color,width:n.width,opacity:n.opacity,dashType:n.dashType}}:{},s=i.color,o={color:s,opacity:i.opacity},a=this.createSegment(e,Ko({fill:o,stroke:{opacity:i.opacity},zIndex:i.zIndex},r));t.append(a),hm(i)&&t.append(this.createGradientOverlay(a,{baseColor:s,fallbackFill:o},Ko({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},e.prototype.createSegment=function(t,e){return e.singleSegment?new su(new eu(new Sc(t.center.x,t.center.y),t.radius),e):Zh.current.createRing(t,e)},e.prototype.createAnimation=function(){var e=this.options,i=this.sector.center;Ko(e,{animation:{center:[i.x,i.y],delay:this.animationDelay}}),t.prototype.createAnimation.call(this)},e.prototype.createHighlight=function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,Ko({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new Sc(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},e.prototype.tooltipAnchor=function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:Qw(e+180)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e}(wu),Jw=Il(Pl(30),vo),Zw=Il(Pl(60),vo);function Qw(t){var e=Pl(t),i=Il(Math.sin(e),vo),n=Il(Math.cos(e),vo);return{horizontal:Math.abs(i)>Zw?po:n<0?Oo:So,vertical:Math.abs(i)<Jw?po:i<0?uo:Po}}Nl(Yw,{color:Fo,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:yo,margin:ea(.5),align:fo,zIndex:1,position:vg},animation:{type:Lf},highlight:{visible:!0,border:{width:1}},visible:!0}),Ko(Yw.prototype,Eg);const tx=Yw;var ex={createLegendItem:function(t,e,i){var n=this.options.legend||{},r=n.labels||{},s=n.inactiveItems||{},o=s.labels||{};if(i&&!1!==i.visibleInLegend){var a,l,c=!1!==i.visible,h=c?sa(r):sa(o)||sa(r),u=i.category;h&&(u=h({text:u,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),c?(a={},l=e.color):(a={color:o.color,font:o.font},l=(s.markers||{}).color),Dm(u)&&""!==u&&this.legendItems.push({active:c,pointIndex:i.index,text:u,series:i.series,markerColor:l,labels:a})}}};const ix=ex;var nx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.traverseDataPoints=function(t){var e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);for(var n=i.length,r=e.series,s=r.length,o=0;o<s;o++){var a=r[o],l=a.data,c=oy(a),h=c.total,u=c.points,p=c.count,d=360/h,f=void 0;isFinite(d)||(f=360/p);var g=void 0;g=xl(a.startAngle)?a.startAngle:e.startAngle,o!==s-1&&a.labels.position===vg&&(a.labels.position=po);for(var m=0;m<u.length;m++){var y=u[m];if(y){var v=y.fields,b=y.value,w=y.visible,x=0!==b?f||b*d:0,S=1!==l.length&&Boolean(v.explode);Wo(a.color)||(a.color=v.color||i[m%n]),t(b,new Ic(null,0,0,g,x),{owner:this,category:xl(v.category)?v.category:"",index:m,series:a,seriesIx:o,dataItem:l[m],percentage:0!==h?b/h:0,explode:S,visibleInLegend:v.visibleInLegend,visible:w,zIndex:s-o,animationDelay:this.animationDelay(m,o,s)}),!1!==w&&(g+=x)}}}},e.prototype.evalSegmentOptions=function(t,e,i){var n=i.series;Cg(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle"]})},e.prototype.addValue=function(t,e,i){var n=Ko({},i.series,{index:i.index});if(this.evalSegmentOptions(n,t,i),this.createLegendItem(t,n,i),!1!==i.visible){var r=new tx(t,e,n);Object.assign(r,i),this.append(r),this.points.push(r)}},e.prototype.reflow=function(t){var e=this,i=e.options,n=e.points,r=e.seriesConfigs;void 0===r&&(r=[]);var s=n.length,o=t.clone(),a=Math.min(o.width(),o.height()),l=a/2,c=a-.85*a,h=new Ec(o.x1,o.y1,o.x1+a,o.y1+a),u=h.center(),p=o.center(),d=i.series.length,f=[],g=[],m=Dl(i.padding,c);this.targetBox=t,m=m>l-5?l-5:m,h.translate(p.x-u.x,p.y-u.y);for(var y=l-m,v=new fc(y+h.x1+m,y+h.y1+m),b=0;b<s;b++){var w=n[b],x=w.sector,S=w.seriesIx;if(x.radius=y,x.center=v,r.length){var k=r[S];x.innerRadius=k.innerRadius,x.radius=k.radius}S===d-1&&w.explode&&(x.center=x.clone().setRadius(.15*x.radius).point(x.middle())),w.reflow(h);var C=w.label;C&&C.options.position===vg&&S===d-1&&(C.orientation===Oo?g.push(C):f.push(C))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),g.length>0&&(g.sort(this.labelComparator(!1)),this.rightLabelsReflow(g)),this.box=h},e.prototype.leftLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.rightLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.distanceBetweenLabels=function(t){var e=Ol(this.points),i=e.sector,n=t.length-1,r=i.radius+e.options.labels.distance,s=[],o=t[0].box,a=Il(o.y1-(i.center.y-r-o.height()-o.height()/2));s.push(a);for(var l=0;l<n;l++){var c=t[l+1].box;o=t[l].box,a=Il(c.y1-o.y2),s.push(a)}return a=Il(i.center.y+r-t[n].box.y2-t[n].box.height()/2),s.push(a),s},e.prototype.distributeLabels=function(t,e){for(var i,n,r,s=t.length,o=0;o<s;o++)for(r=-t[o],i=n=o;r>0&&(i>=0||n<s);)r=this._takeDistance(t,o,--i,r),r=this._takeDistance(t,o,++n,r);this.reflowLabels(t,e)},e.prototype._takeDistance=function(t,e,i,n){var r=n;if(t[i]>0){var s=Math.min(t[i],r);r-=s,t[i]-=s,t[e]+=s}return r},e.prototype.reflowLabels=function(t,e){var i,n=Ol(this.points),r=n.sector,s=n.options.labels,o=e.length,a=s.distance,l=r.center.y-(r.radius+a)-e[0].box.height();t[0]+=2;for(var c=0;c<o;c++){var h=e[c],u=h.box;l+=t[c],i=this.hAlignLabel(u.x2,r.clone().expand(a),l,l+u.height(),h.orientation===Oo),h.orientation===Oo?(s.align!==fo&&(i=r.radius+r.center.x+a),h.reflow(new Ec(i+u.width(),l,i,l))):(s.align!==fo&&(i=r.center.x-r.radius-a),h.reflow(new Ec(i-u.width(),l,i,l))),l+=u.height()}},e.prototype.createVisual=function(){var e=this,i=this.options.connectors,n=this.points,r=n.length;t.prototype.createVisual.call(this),this._connectorLines=[];for(var s=0;s<r;s++){var o=n[s],a=o.sector,l=o.label,c=a.middle(),h=(o.options.connectors||{}).color||i.color;if(l){var u=new Kh({stroke:{color:h,width:i.width},animation:{type:pf,delay:o.animationDelay}});if(l.options.position===vg){var p=l.box,d=a.center,f=a.point(c),g=new fc(p.x1,p.center().y),m=void 0,y=void 0,v=void 0;f=a.clone().expand(i.padding).point(c),u.moveTo(f.x,f.y),l.orientation===Oo?(v=rx(d,f,g,y=new fc(p.x1-i.padding,p.center().y)),g=new fc(y.x-4,y.y),(v=v||g).x=Math.min(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x<a.center.x?(m=a.center.x+a.radius+4,o.options.labels.align!==Ef?m<g.x?u.lineTo(m,f.y):u.lineTo(f.x+8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))):(v=rx(d,f,g,y=new fc(p.x2+i.padding,p.center().y)),g=new fc(y.x+4,y.y),(v=v||g).x=Math.max(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x>a.center.x?(m=a.center.x-a.radius-4,o.options.labels.align!==Ef?m>g.x?u.lineTo(m,f.y):u.lineTo(f.x-8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))),u.lineTo(y.x,y.y),e._connectorLines.push(u),e.visual.append(u)}}}},e.prototype.renderVisual=function(){if(t.prototype.renderVisual.call(this),jl(this.options.series,(function(t){return t.autoFit}))){var e=this.targetBox,i=this.box.center(),n=this.visual.bbox();if(!n)return;var r=n.bottomRight(),s=Math.min((i.y-e.y1)/(i.y-n.origin.y),(e.y2-i.y)/(r.y-i.y),(i.x-e.x1)/(i.x-n.origin.x),(e.x2-i.x)/(r.x-i.x));s<1&&this.visual.transform(jc().scale(s,s,[i.x,i.y]))}},e.prototype.labelComparator=function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},e.prototype.hAlignLabel=function(t,e,i,n,r){var s=e.radius,o=e.center,a=o.x,l=o.y,c=Math.min(Math.abs(l-i),Math.abs(l-n));return c>s?t:a+Math.sqrt(s*s-c*c)*(r?1:-1)},e.prototype.pointInCircle=function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.animationDelay=function(t){return 70*t},e.prototype.stackRoot=function(){return this},e}(wu);function rx(t,e,i,n){var r,s=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==o){var a=s/o;r=new fc(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return r}Nl(nx,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),Ko(nx.prototype,ix),nx.prototype.isStackRoot=!0;const sx=nx;var ox=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createPieChart(this.series)},e.prototype.createPieChart=function(t){var e=t[0],i=new sx(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),bl(this.options.legend.items,e.legendItems)},e}(xy);const ax=ox;var lx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowLabel=function(){var e=this.options.labels,i=this.label,n=this.sector.clone(),r=n.middle();if(i){var s=i.box.height();if(e.position===po){n.radius-=(n.radius-n.innerRadius)/2;var o=n.point(r);i.reflow(new Ec(o.x,o.y-s/2,o.x,o.y))}else t.prototype.reflowLabel.call(this)}},e.prototype.createSegment=function(t,e){return Zh.current.createRing(t,e)},e}(tx);Nl(lx,{overlay:{gradient:"roundedGlass"},labels:{position:po},animation:{type:Lf}}),Ko(lx.prototype,Eg);const cx=lx;var hx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e,i){var n=Ko({},i.series,{index:i.index});if(this.evalSegmentOptions(n,t,i),this.createLegendItem(t,n,i),!1!==i.visible){var r=new cx(t,e,n);Object.assign(r,i),this.append(r),this.points.push(r)}},e.prototype.reflow=function(e){for(var i,n=this.options,r=e.clone(),s=Math.min(r.width(),r.height()),o=s/2,a=s-.85*s,l=n.series,c=l.length,h=Dl(n.padding,a),u=o-(h=h>o-5?o-5:h),p=0,d=0;d<c;d++){var f=l[d];0===d&&xl(f.holeSize)&&(i=f.holeSize,u-=f.holeSize),xl(f.size)?u-=f.size:p++,xl(f.margin)&&d!==c-1&&(u-=f.margin)}xl(i)||(u-=i=.75*((o-h)/(c+.75)));var g,m=i,y=0;this.seriesConfigs=[];for(var v=0;v<c;v++){var b=l[v];g=(m+=y)+Dl(b.size,u/p),this.seriesConfigs.push({innerRadius:m,radius:g}),y=b.margin||0,m=g}t.prototype.reflow.call(this,e)},e.prototype.animationDelay=function(t,e,i){return 50*t+uf*(e+1)/(i+1)},e}(sx);Nl(hx,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const ux=hx;var px=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createDonutChart(this.series)},e.prototype.createDonutChart=function(t){var e=t[0],i=new ux(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e}(ax);const dx=px;var fx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.valueAxisRangeTracker=new am},e.prototype.render=function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},e.prototype.alignAxes=function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,n=t.getSlot(i),r=this.polarAxis.getSlot(0).center,s=t.box.translate(r.x-n.x1,r.y-n.y1);t.reflow(s)},e.prototype.createValueAxis=function(){var t,e,i=this.valueAxisRangeTracker,n=i.query(),r=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});r.type===gg?(t=$d,e={min:.1,max:1}):(t=zd,e={min:0,max:1});var s=i.query(name)||n||e;s&&n&&(s.min=Math.min(s.min,n.min),s.max=Math.max(s.max,n.max));var o=new t(s.min,s.max,r,this.chartService);this.valueAxis=o,this.appendAxis(o)},e.prototype.reflowAxes=function(){var t=this,e=t.options.plotArea,i=t.valueAxis,n=t.polarAxis,r=t.box,s=.15*Math.min(r.width(),r.height()),o=ea(e.padding||{},s),a=r.clone().unpad(o),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,Lo,po);var c=l.clone().shrink(0,l.height()/2);n.reflow(l),i.reflow(c);var h=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:h})),this.axisBox=l,this.alignAxes(l)},e.prototype.backgroundBox=function(){return this.box},e.prototype.detachLabels=function(){},e}(xy);const gx=fx;var mx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,n=fc.onCircle(t.center,t.startAngle,i);return new Ec(n.x,n.y,n.x,n.y)},e}(Lm);Nl(mx,{clip:!1});const yx=mx;var vx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ww);vx.prototype.pointSlot=yx.prototype.pointSlot,Nl(vx,{clip:!1});const bx=vx;var wx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},e.prototype._polarAxisCenter=function(){return this.parent.plotArea.polarAxis.box.center()},e.prototype.strokeSegments=function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new qd(!1),n=this.points();n.push(e),(t=this._strokeSegments=i.process(n)).pop()}return t},e}(nm);const xx=wx;var Sx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new bh([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)},e}(Qg);const kx=Sx;var Cx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i){return(e.line||{}).style===xf?new xx(t,e,i):new kx(t,e,i)},e.prototype.createMissingValue=function(t,e){var i;return Dm(t.x)&&e!==vf&&(i={x:t.x,y:t.y},e===yf&&(i.y=0)),i},e.prototype.seriesMissingValues=function(t){return t.missingValues||yf},e.prototype._hasMissingValuesGap=function(){for(var t=this.options.series,e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},e.prototype.sortPoints=function(t){if(t.sort(Ax),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Dm(i.value.y)||"gap"!==this.seriesMissingValues(i.series)||delete t[e]}return t},e}(bx);function Ax(t,e){return t.value.x-e.value.x}const _x=Cx;var Tx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Rd(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},e.prototype.valueAxisOptions=function(t){return Ko(t,{majorGridLines:{type:co},minorGridLines:{type:co}},this.options.yAxis)},e.prototype.createValueAxis=function(){t.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},e.prototype.appendChart=function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),xy.prototype.appendChart.call(this,t,e)},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(ly(t,[Bf]),e),this.createScatterChart(ly(t,[jf]),e),this.createAreaChart(ly(t,[Nf]),e)},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new bx(this,{series:t});this.appendChart(i,e)}},e.prototype.createScatterChart=function(t,e){if(0!==t.length){var i=new yx(this,{series:t});this.appendChart(i,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new _x(this,{series:t});this.appendChart(i,e)}},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new fc(n.x,n.y),s=this.axisX.getValue(r),o=this.axisY.getValue(r);null!==s&&null!==o&&t.trigger(i,{element:_l(e),x:s,y:o})},e.prototype.createCrosshairs=function(){},e}(gx);Nl(Tx,{xAxis:{},yAxis:{}}),Ko(Tx.prototype,ky);const Ox=Tx;var Ex=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,n=fc.onCircle(t.center,t.middle(),i);return new Ec(n.x,n.y,n.x,n.y)},e.prototype.renderSegments=function(){if(t.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var e=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[n.seriesIx]=e[n.seriesIx]||[],e[n.seriesIx].push(n)}return e}(this._segments),i=0;i<e.length;i++){var n=e[i];if(n&&n.length>1){var r=n[0].linePoints[0],s=Ol(n),o=Ol(s.linePoints),a=0===r.categoryIx,l=o.categoryIx===o.categoriesCount-1;a&&l&&Ol(n).linePoints.push(r)}}},e.prototype.createSegment=function(t,e,i){var n=new(e.style===xf?$g:Rg)(t,e,i),r=this.seriesMissingValues(e);return t.length!==e.data.length&&r!==vf||(n.options.closed=!0),n},e}(Jg);Nl(Ex,{clip:!1,limitPoints:!1});const Mx=Ex;var Px=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(nm);const Ix=Px;var Fx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(Qg);const Dx=Fx;var Rx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,n){var r,s,o,a=this.options.isStacked,l=(e.line||{}).style;return a&&i>0&&n&&(s=n.linePoints.slice(0),r=n),l===xf?(o=new Ix(t,e,i,r,s)).options.closed=!0:(t.push(t[0]),o=new Dx(t,e,i,r,s)),o},e.prototype.seriesMissingValues=function(t){return t.missingValues||yf},e}(Mx);const Lx=Rx;var Nx=function(t){function e(e,i){t.call(this,e,null,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cx);Nl(Nx,{overlay:{gradient:"none"},labels:{distance:10}});const Bx=Nx;var jx=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?fm:dm}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=this.children,n=e.gap,r=e.spacing,s=i.length,o=s+n+r*(s-1),a=t.angle/o,l=t.startAngle+a*(n/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=l,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,l+=a+a*r}))},e}(wu);Nl(jx,{gap:1,spacing:0});const zx=jx;var Ux=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options.reverse,i=this.children,n=i.length,r=e?n-1:0,s=e?-1:1;this.box=new Ec;for(var o=r;o>=0&&o<n;o+=s){var a=i[o].sector;a.startAngle=t.startAngle,a.angle=t.angle}},e}(wu);const $x=Ux;var Hx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Bx},e.prototype.clusterType=function(){return zx},e.prototype.stackType=function(){return $x},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.pointSlot=function(t,e){var i=t.clone(),n=t.center.y;return i.radius=n-e.y1,i.innerRadius=n-e.y2,i},e.prototype.reflowPoint=function(t,e){t.sector=e,t.reflow()},e.prototype.createAnimation=function(){this.options.animation.center=this.box.toRect().center(),t.prototype.createAnimation.call(this)},e}(wm);Hx.prototype.reflow=Tg.prototype.reflow,Nl(Hx,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const Vx=Hx;var qx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Fd(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createCategoryAxesLabels()},e.prototype.valueAxisOptions=function(t){return this._hasBarCharts&&Ko(t,{majorGridLines:{type:co},minorGridLines:{type:co}}),this._isStacked100&&Ko(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),Ko(t,this.options.valueAxis)},e.prototype.aggregateCategories=function(){sv.prototype.aggregateCategories.call(this,this.panes)},e.prototype.createCategoryAxesLabels=function(){sv.prototype.createCategoryAxesLabels.call(this,this.panes)},e.prototype.filterSeries=function(t){return t},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(ly(t,[zf]),e),this.createLineChart(ly(t,[$f]),e),this.createBarChart(ly(t,[Uf]),e)},e.prototype.chartOptions=function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),r=i.stack;e.isStacked=r&&n.length>1,e.isStacked100=r&&"100%"===r.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Lx(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Mx(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t);n.gap=i.gap,n.spacing=i.spacing;var r=new Vx(this,n);this.appendChart(r,e),this._hasBarCharts=!0}},e.prototype.seriesCategoryAxis=function(){return this.categoryAxis},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new fc(n.x,n.y),s=this.categoryAxis.getCategory(r),o=this.valueAxis.getValue(r);null!==s&&null!==o&&t.trigger(i,{element:_l(e),category:s,value:o})},e.prototype.createCrosshairs=function(){},e}(gx);Ko(qx.prototype,ky,{appendChart:sv.prototype.appendChart,aggregateSeries:sv.prototype.aggregateSeries,seriesSourcePoints:sv.prototype.seriesSourcePoints}),Nl(qx,{categoryAxis:{categories:[]},valueAxis:{}});const Wx=qx;var Xx=function(t){function e(e,i,n){t.call(this,i),this.value=e,this.options.index=n.index}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.points,i=this.children[0];this.box=new Ec(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new Ec(t.x1,e[0].y,t.x2,e[2].y))},e.prototype.createVisual=function(){var e,i=this,n=this.options;t.prototype.createVisual.call(this),(e=n.visual?n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:n,sender:this.getSender(),createVisual:function(){return i.createPath()}}):this.createPath())&&this.visual.append(e)},e.prototype.createPath=function(){var t=this.options,e=t.border;return Kh.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},e.prototype.createHighlight=function(t){return Kh.fromPoints(this.points,t)},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=Kh.fromPoints(this.points).close();return{options:this.options,path:t}},e.prototype.tooltipAnchor=function(){var t=this.box;return{point:new fc(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(wu);Nl(Xx,{color:Fo,border:{width:1}}),Ko(Xx.prototype,Eg);const Gx=Xx;var Kx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.points=[],this.labels=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.render=function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var n=e.series[0],r=n.data;if(r)for(var s=oy(n),o=s.total,a=s.points,l=0;l<a.length;l++){var c=a[l];if(c){var h=c.fields;Wo(n.color)||(n.color=h.color||i[l%i.length]),h=Ko({index:l,owner:t,series:n,dataItem:r[l],percentage:c.value/o},h,{visible:c.visible});var u=c.valueFields.value,p=t.createSegment(u,h),d=t.createLabel(u,h);p&&d&&p.append(d)}}},e.prototype.evalSegmentOptions=function(t,e,i){var n=i.series;Cg(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual"]})},e.prototype.createSegment=function(t,e){var i=Ko({},e.series);if(this.evalSegmentOptions(i,t,e),this.createLegendItem(t,i,e),!1!==e.visible){var n=new Gx(t,i,e);return Object.assign(n,e),this.append(n),this.points.push(n),n}},e.prototype.createLabel=function(t,e){var i=e.series,n=e.dataItem,r=Ko({},this.options.labels,i.labels),s=t;if(r.visible){var o=sa(r),a={dataItem:n,value:t,percentage:e.percentage,category:e.category,series:i};o?s=o(a):r.format&&(s=this.plotArea.chartService.format.auto(r.format,s)),r.color||(r.color=nc(i.color),r.background||(r.background=i.color)),this.evalSegmentOptions(r,t,e);var l=new Zu(s,Ko({vAlign:r.position},r),a);return this.labels.push(l),l}},e.prototype.labelPadding=function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var n=t[i].options.align;if(n!==po){var r=t[i].box.width();n===So?e.left=Math.max(e.left,r):e.right=Math.max(e.right,r)}}return e},e.prototype.dynamicSlopeReflow=function(t,e,i){for(var n=this.options,r=this.points,s=r.length,o=r[0],a=o,l=0;l<r.length;l++)r[l].percentage>a.percentage&&(a=r[l]);for(var c=o.percentage/a.percentage*e,h=(e-c)/2,u=0,p=0;p<s;p++){var d=r[p].percentage,f=r[p+1],g=f?f.percentage:d,m=r[p].points=[],y=n.dynamicHeight?i*d:i/s,v=void 0;v=El(v=d?(e-c*(g/d))/2:g?0:e/2,0,e),m.push(new Sc(t.x1+h,t.y1+u)),m.push(new Sc(t.x1+e-h,t.y1+u)),m.push(new Sc(t.x1+e-v,t.y1+y+u)),m.push(new Sc(t.x1+v,t.y1+y+u)),h=v,u+=y+n.segmentSpacing,c=El(e-2*v,0,e)}},e.prototype.constantSlopeReflow=function(t,e,i){for(var n=this.options,r=this.points,s=r.length,o=n.neckRatio<=1,a=o?n.neckRatio*e:e,l=o?0:(e-e/n.neckRatio)/2,c=((o?e:e-2*l)-a)/2,h=0,u=0;u<s;u++){var p=r[u].points=[],d=r[u].percentage,f=n.dynamicHeight?c*d:c/s,g=n.dynamicHeight?i*d:i/s;p.push(new Sc(t.x1+l,t.y1+h)),p.push(new Sc(t.x1+e-l,t.y1+h)),p.push(new Sc(t.x1+e-l-f,t.y1+g+h)),p.push(new Sc(t.x1+l+f,t.y1+g+h)),l+=f,h+=g+n.segmentSpacing}},e.prototype.reflow=function(t){var e=this.points,i=e.length;if(i){var n=this.options,r=t.clone().unpad(this.labelPadding()),s=r.height()-n.segmentSpacing*(i-1),o=r.width();n.dynamicSlope?this.dynamicSlopeReflow(r,o,s):this.constantSlopeReflow(r,o,s);for(var a=0;a<i;a++)e[a].reflow(t)}},e}(wu);Nl(Kx,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:po,position:po,zIndex:1}}),Ko(Kx.prototype,ix);const Yx=Kx;var Jx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createFunnelChart(this.series)},e.prototype.createFunnelChart=function(t){var e=t[0],i=new Yx(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),bl(this.options.legend.items,e.legendItems)},e}(xy);const Zx=Jx;const Qx=function(t,e){void 0===e&&(e=.05);var i=tc(t),n=1-e;return function(t){var e=i.toHSL(),r=100-e.l,s=n-t;return e.l+=Math.min(s*r,r),e.toCss()}};var tS=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||Fo,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),n=sa(t),r=t.color;e=n?n(i):this.formatValue(t.format),r||(r=nc(this.color)),this.label=new Zu(e,Ko({align:po,vAlign:po,margin:{left:5,right:5},zIndex:Dl(t.zIndex,this.series.zIndex)},t,{color:r}),i),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},e.prototype.markerBox=function(){var t=this.options.markers,e=t.border,i=this.box.toRect(),n=Dl(t.type,"rect")===Eo,r=Dl(e.width,n?1:0),s=Math.round(r/2);if(t.size){var o=i.center();i.size.width=i.size.height=t.size,i.origin.x=Math.round(o.x-i.size.width/2),i.origin.y=Math.round(o.y-i.size.height/2)}return i.size.width-=r,i.size.height-=r,i.origin.y+=s+.5,i.origin.x+=s+.5,Ku(i)},e.prototype.markerBorder=function(){var t=this.options,e=t.markers.border,i=Dl(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},e.prototype.createMarker=function(){var t=this.options,e=t.markers,i=new Cu({type:Dl(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:Dl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},e.prototype.createHighlight=function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,n=new Cu({type:Dl(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:Dl(e.zIndex,this.series.zIndex)});n.reflow(this.markerBox());var r=n.getElement();return r.options.fill=t.fill,r.options.stroke=t.stroke,r},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.tooltipAnchor=function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new fc(t,e),align:{horizontal:po,vertical:uo}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){},e.prototype.pointData=function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},e}(wu);Ko(tS.prototype,Eg),Ko(tS.prototype,Pg),tS.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};const eS=tS;var iS=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.points=[],this.seriesOptions=[],this.valueRange={min:ko,max:Co},this._evalSeries=[]},e.prototype.render=function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},e.prototype.setRange=function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.data.length;r++){var s=t._bindPoint(n,i,r).valueFields;xl(s.value)&&null!==s.value&&(t.valueRange.min=Math.min(t.valueRange.min,s.value),t.valueRange.max=Math.max(t.valueRange.max,s.value))}},e.prototype.addValue=function(t,e){var i;t&&xl(t.value)&&null!==t.value&&(i=this.createPoint(t,e))&&Object.assign(i,e),this.points.push(i)},e.prototype.evalPointOptions=function(t,e,i){var n=i.series,r=i.seriesIx,s={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle"]},o=this._evalSeries[r];xl(o)||(this._evalSeries[r]=o=Cg(t,{},s,!0));var a=t;return o&&Cg(a=Ko({},t),{value:e,series:n,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},s),a},e.prototype.pointType=function(){return eS},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=Ko({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),r=e.color||i.color;if(n=this.evalPointOptions(n,t,e),Wo(i.color))r=n.color;else if(0!==this.valueRange.max){r=Qx(r)(t.value/this.valueRange.max)}var s=new eS(t,n);return s.color=r,this.append(s),s},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,r=e?n.namedXAxes[e]:n.axisX,s=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!s)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:r,yAxis:s}},e.prototype.reflow=function(t){var e=this,i=this.points,n=!this.options.clip,r=0;this.traverseDataPoints((function(t,s){var o=i[r++],a=e.seriesAxes(s.series),l=a.xAxis,c=a.yAxis,h=l.categoryIndex(t.x),u=c.categoryIndex(t.y),p=l.getSlot(h,h,n),d=c.getSlot(u,u,n);if(o)if(p&&d){var f=e.pointSlot(p,d);o.reflow(f)}else o.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Ec(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,n=0;n<i.length;n++)for(var r=i[n],s=e.seriesAxes(r),o=s.xAxis,a=s.yAxis,l=o.currentRangeIndices(),c=a.currentRangeIndices(),h=0;h<r.data.length;h++){var u=e._bindPoint(r,n,h),p=u.valueFields,d=u.fields,f=o.totalIndex(p.x),g=a.totalIndex(p.y),m=l.min<=f&&f<=l.max,y=c.min<=g&&g<=c.max;m&&y&&t(p,Ko({pointIx:h,series:r,seriesIx:n,dataItem:r.data[h],owner:e},d))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(wu);Nl(iS,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0}),Ko(iS.prototype,{_bindPoint:Tg.prototype._bindPoint});const nS=iS;var rS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},e.prototype.bindCategories=function(){for(var t=this.srcSeries||this.series,e=0;e<t.length;e++){for(var i=t[e],n=i.data||[],r=this.seriesAxes(i),s=r.xAxis,o=r.yAxis,a=cc(s.categories||[]),l=cc(o.categories||[]),c=0;c<n.length;c++){var h=sf.current.bindPoint(i,c).valueFields,u=h.x,p=h.y;a.has(u)||a.add(u),l.has(p)||l.add(p)}s.categories=a.values(),o.categories=l.values()}},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],s=i[r.options.name||"default"]||[];e.addToLegend(s);var o=e.filterVisibleSeries(s);o&&e.createHeatmapChart(ly(o,[If]),r)}},e.prototype.createHeatmapChart=function(t,e){var i=new nS(this,{series:t});this.appendChart(i,e)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,n=ca([].concat(e.xAxis),(function(t){return t.name===i}))[0],r=t.yAxis,s=ca([].concat(e.yAxis),(function(t){return t.name===r}))[0],o=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(s||{}).pane||o},e.prototype.seriesAxes=function(t){var e,i,n=this.options,r=[].concat(n.xAxis),s=t.xAxis;e=s?r.find((function(t){return t.name===s})):r[0];var o=[].concat(n.yAxis),a=t.yAxis;if(i=a?o.find((function(t){return t.name===a})):o[0],!e)throw new Error("Unable to locate X axis with name "+s);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},e.prototype.createAxisLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},e.prototype.createXYAxis=function(t,e,i){for(var n,r=t.name,s=e?this.namedYAxes:this.namedXAxes,o=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=o.categories?o.categories[0]:null,l=[o.min,o.max,a],c=this.series,h=0;h<c.length;h++){var u=c[h],p=u[e?"yAxis":"xAxis"];if(p===o.name||0===i&&!p){var d=sf.current.bindPoint(u,0).valueFields;l.push(d[e?"y":"x"]);break}}for(var f=0;f<l.length;f++)if(l[f]instanceof Date){n=!0;break}var g=new(ay(o.type,mo)||!o.type&&n?gd:rd)(o,this.chartService);if(g.axisIndex=i,r){if(s[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");s[r]=g}return this.appendAxis(g),g.mapCategories(),g},e.prototype.createAxes=function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),r=[],s=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){da(e.findPane(n[a].pane),t)&&r.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<s.length;l++){da(e.findPane(s[l].pane),t)&&o.push(e.createXYAxis(s[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||o[0]},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?delete this.namedYAxes[i]:delete this.namedXAxes[i],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype._dispatchEvent=function(t,e,i){for(var n=t._eventCoordinates(e),r=new fc(n.x,n.y),s=this.axes,o=s.length,a=[],l=[],c=0;c<o;c++){var h=s[c];ry(h.options.vertical?l:a,h.getCategory(r))}a.length>0&&l.length>0&&t.trigger(i,{element:_l(e),originalEvent:e,x:uy(a),y:uy(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),r=(i?n.y:n.x).indexOf(t);sS(this.options,r,i,e),sS(this.originalOptions,r,i,e)},e.prototype.crosshairOptions=function(t){return Object.assign({},t.options.crosshair,{zIndex:0})},e}(xy);function sS(t,e,i,n){Ko([].concat(i?t.yAxis:t.xAxis)[e],n)}Nl(rS,{xAxis:{},yAxis:{}}),Ko(rS.prototype,ky);const oS=rS;var aS="color",lS="first",cS="max",hS="min",uS="noteText";Iw.current.register(sv,[Cf,Ef,Df,Jf,kf,Gf,Of,Rf,Tf,Yf,Af,Kf,qf,Vf,Qf,Ff,Hf,Zf]),Iw.current.register(Kw,[Wf,Xf,_f]),Iw.current.register(ax,[Lf]),Iw.current.register(dx,[Mf]),Iw.current.register(Zx,[Pf]),Iw.current.register(Ox,[Nf,Bf,jf]),Iw.current.register(Wx,[zf,Uf,$f]),Iw.current.register(oS,[If]),sf.current.register([Cf,Ef,Df,Jf,kf,Gf],[Io],[mg,aS,uS,gf,mf]),sf.current.register([qf,Vf,Hf,Zf],["from","to"],[mg,aS,uS]),sf.current.register([Qf,Ff],[Io],[mg,aS,uS,"summary"]),sf.current.register([Nf,Bf,jf],[Ro,Lo],[aS]),sf.current.register([zf,Uf,$f],[Io],[aS]),sf.current.register([Pf],[Io],[mg,aS,"visibleInLegend","visible"]),Oy.current.register([Cf,Ef,Df,Jf,kf,Gf,Qf,Ff],{value:cS,color:lS,noteText:lS,errorLow:hS,errorHigh:cS}),Oy.current.register([qf,Vf,Hf,Zf],{from:hS,to:cS,color:lS,noteText:lS}),Oy.current.register([zf,Uf,$f],{value:cS,color:lS}),sf.current.register([Wf,Xf,_f],[Ro,Lo],[aS,uS,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),sf.current.register([_f],[Ro,Lo,"size"],[aS,mg,uS]),sf.current.register([If],[Ro,Lo,Io],[aS,uS]),sf.current.register([Of,Rf],["open","high","low","close"],[mg,aS,"downColor",uS]),Oy.current.register([Of,Rf],{open:cS,high:cS,low:hS,close:cS,color:lS,downColor:lS,noteText:lS}),sf.current.register([Af,Kf],["lower","q1","median","q3","upper","mean","outliers"],[mg,aS,uS]),Oy.current.register([Af,Kf],{lower:cS,q1:cS,median:cS,q3:cS,upper:cS,mean:cS,outliers:lS,color:lS,noteText:lS}),sf.current.register([Tf,Yf],["current","target"],[mg,aS,"visibleInLegend",uS]),Oy.current.register([Tf,Yf],{current:cS,target:cS,color:lS,noteText:lS}),sf.current.register([Lf,Mf],[Io],[mg,aS,"explode","visibleInLegend","visible"]);var pS=[mg,Io,Ro,Lo],dS=function(t){function e(e,i,n,r){var s=this;void 0===r&&(r={}),t.call(this),this.observers=[],this.addObserver(r.observer),this.chartService=new mp(this,r),this.chartService.theme=n,this._initElement(e);var o=Ko({},this.options,i);this._originalOptions=Ko({},o),this._theme=n,this._initTheme(o,n),this._initHandlers(),this._initSurface(),this.bindCategories(),Ll.preloadFonts(i,(function(){s.fontLoaded=!0,s._destroyed||(s.trigger("init"),s._redraw(),s._attachEvents())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initElement=function(t){for(this._setElementClass(t),t.style.position="relative";t.firstChild;)t.removeChild(t.firstChild);this.element=t},e.prototype._setElementClass=function(t){Bo(t,"k-chart")},e.prototype._initTheme=function(t,e){for(var i=[],n=t.series||[],r=0;r<n.length;r++)i.push(Object.assign({},n[r]));t.series=i,function(t){for(var e=pS,i=0;i<e.length;i++){var n=e[i]+"Axes";t[n]&&(t[e[i]+"Axis"]=t[n],delete t[n])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,this.options=Ko({},e,t),this.applySeriesColors()},e.prototype.getSize=function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},e.prototype.resize=function(t){var e=this.getSize(),i=this._size,n=e.width>0||e.height>0;t||n&&(!i||e.width!==i.width||e.height!==i.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):n&&this._selections&&jl(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},e.prototype._resize=function(){this._noTransitionsRedraw()},e.prototype.redraw=function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},e.prototype.getAxis=function(t){return Gd(t,this._plotArea.axes)},e.prototype.findAxisByName=function(t){return this.getAxis(t)},e.prototype.findPaneByName=function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new Yd(e[i])},e.prototype.findPaneByIndex=function(t){var e=this._plotArea.panes;if(e[t])return new Yd(e[t])},e.prototype.plotArea=function(){return new Zd(this._plotArea)},e.prototype.toggleHighlight=function(t,e){var i,n,r,s=this._plotArea,o=(s.srcSeries||s.series||[])[0];Wo(e)?i=s.filterPoints(e):(Yo(e)?(n=e.series,r=e.category):n=r=e,i=o.type===Mf?fS(s.pointsBySeriesName(n),r):o.type===Lf||o.type===Pf?fS((s.charts[0]||{}).points,r):s.pointsBySeriesName(n));i&&this.togglePointsHighlight(t,i)},e.prototype.togglePointsHighlight=function(t,e){for(var i=this._highlight,n=0;n<e.length;n++)i.togglePointHighlight(e[n],t)},e.prototype.showTooltip=function(t){var e,i,n=this._sharedTooltip(),r=this._tooltip,s=this._plotArea;if(Wo(t)?(e=s.findPoint(t))&&n&&(i=e.categoryIx):n&&xl(t)&&(i=s.categoryAxis.categoryIndex(t)),n){if(i>=0){var o=this._plotArea.pointsByCategoryIndex(i);r.showAt(o)}}else e&&r.show(e)},e.prototype.hideTooltip=function(){this._tooltip.hide()},e.prototype._initSurface=function(){var t=this.surface,e=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&Cl(e,{width:i.width}),i.height&&Cl(e,{height:i.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=rw.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},e.prototype._surfaceWrap=function(){return this.element},e.prototype._redraw=function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._model=t,this._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new aw,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),bS(this._plotArea.panes),this._navState||this._cancelDomEvents()},e.prototype.exportVisual=function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,n=Ko({},t.options,{chartArea:{width:t.width,height:t.height}});vS(this._originalOptions,n),this.options=Ko({},this._originalOptions,n),this._initTheme(this.options,this._theme),this.bindCategories();var r=this._getModel();r.renderVisual(),bS(r._plotArea.panes),e=r.visual,this.options=i}else e=this.surface.exportVisual();return e},e.prototype._sharedTooltip=function(){return this._plotArea instanceof sv&&this.options.tooltip&&this.options.tooltip.shared},e.prototype._createPannable=function(){var t=this.options;!1!==t.pannable&&(this._pannable=new uw(this._plotArea,t.pannable))},e.prototype._createZoomSelection=function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new dw(this,e))},e.prototype._createMousewheelZoom=function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new gw(this,e))},e.prototype._toggleDragZoomEvents=function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,n=(e||{}).mousewheel,r=!(t||!1!==e&&!1!==i||this.requiresHandlers([og,rg,sg])),s=(!1===e||!1===n)&&!this.requiresHandlers([ag,lg,cg]),o=this.element;this._dragZoomEnabled&&r&&s?(o.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||r&&s||(o.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!r,!s)},e.prototype._toggleDomEvents=function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},e.prototype._createTooltip=function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new Bw(this.chartService,t)},e.prototype._createSharedTooltip=function(t){return new zw(this._plotArea,t)},e.prototype.applyDefaults=function(t,e){!function(t,e){var i,n,r,s=(e||{}).axisDefaults||{};function o(t){var e=(t||{}).color||n.color,r=Ko({},s,s[i],n,n[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete r[i],r}for(var a=0;a<pS.length;a++)i=pS[a]+"Axis",n=t.axisDefaults||{},r=(r=[].concat(t[i])).map(o),t[i]=r.length>1?r:r[0]}(t,e),function(t,e){var i=t.series,n=i.length,r=t.seriesDefaults,s=Ko({},t.seriesDefaults),o=e?Ko({},e.seriesDefaults):{},a=Ko({},o);gS(s),gS(a);for(var l=0;l<n;l++){var c=i[l].type||t.seriesDefaults.type,h=Ko({data:[]},a,o[c],{tooltip:t.tooltip},s,r[c]);i[l]._defaults=h,i[l]=Ko({},h,i[l]),i[l].data=i[l].data||[]}}(t,e)},e.prototype.applySeriesColors=function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],n=0;n<e.length;n++){var r=e[n],s=i[n%i.length],o=r._defaults;r.color=r.color||s,o&&(o.color=o.color||s)}},e.prototype._getModel=function(){var t=this.options,e=this._createPlotArea(),i=new Uu(this._modelOptions());i.chart=this,i._plotArea=e;var n=ep.buildTitle(t.title),r=ep.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});return i.append.apply(i,ep.orderTitles([n,r])),t.legend&&t.legend.visible&&i.append(new Mw(e.options.legend,this.chartService)),i.append(e),i.reflow(),i},e.prototype._modelOptions=function(){var t=this.options,e=this.getSize();return Ko({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)},e.prototype._createPlotArea=function(t){var e=this.options;return Iw.current.create(t?[]:e.series,e,this.chartService)},e.prototype._setupSelection=function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var n=t[i],r=n.options;if(n instanceof rd&&r.select&&!r.vertical){var s=n.range(),o=new Lw(this,n,Ko({min:s.min,max:s.max},r.select));e.push(o)}}},e.prototype._selectStart=function(t){return this.trigger(hg,t)},e.prototype._select=function(t){return this.trigger(ug,t)},e.prototype._selectEnd=function(t){return this.trigger(pg,t)},e.prototype._initHandlers=function(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=kb(this._mousemove.bind(this),20)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(t,e){void 0===e&&(e={}),t===dg&&(e.anchor.point=this._toDocumentCoordinates(e.anchor.point)),e.sender=this;for(var i=this.observers,n=!1,r=0;r<i.length;r++)i[r].trigger(t,e)&&(n=!0);return n},e.prototype._attachEvents=function(){var t,e,i=this.element;this._touchAction=i.style.touchAction,wl(i,((t={}).contextmenu=this._clickHandler,t[bg]=this._mousewheelHandler,t.mouseleave=this._mouseleaveHandler,t)),this._shouldAttachMouseMove()&&wl(i,((e={}).mousemove=this._mousemove,e)),this.domEvents=bp.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},e.prototype._mouseleave=function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotArea.hovered&&(this.trigger(ng),this._plotArea.hovered=!1)},e.prototype._cancelDomEvents=function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},e.prototype._gesturestart=function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this.surface.suspendTracking())},e.prototype._gestureend=function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(cg,{}))},e.prototype._gesturechange=function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,n=-t.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(10*n),this._gestureDistance=t.distance;var r={delta:n,axisRanges:mS(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(ag,r)){var s=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(r.axisRanges=e.updateRanges(n,s))&&!this.trigger(lg,r)&&e.zoom()}}}},e.prototype._mouseout=function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},e.prototype._start=function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([og,rg,sg])&&this._startNavigation(t,e,og),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(ag,{axisRanges:mS(this._plotArea.axes),originalEvent:t}))},e.prototype._move=function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var n=i.move(t);n&&!this.trigger(rg,{axisRanges:n,originalEvent:t})&&i.pan()}else if(e){for(var r={},s=e.axes,o=0;o<s.length;o++){var a=s[o];if(a.options.name){var l=a.options.vertical?t.y:t.x,c=l.startLocation-l.location;0!==c&&(r[a.options.name]=a.translateRange(c))}}e.axisRanges=r,this.trigger(rg,{axisRanges:r,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},e.prototype._end=function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(sg,{axisRanges:mS(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,sg),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(lg,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(cg,{axisRanges:i,originalEvent:t}))}}},e.prototype._stopChartHandlers=function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),n=this._plotArea.paneByPoint(i);if(n)for(var r=0;r<e.length;r++)if(e[r].onPane(n))return!0},e.prototype._mousewheelZoomRate=function(){var t=(this.options.zoomable||{}).mousewheel||{};return Dl(t.rate,.3)},e.prototype._mousewheel=function(t){var e=this,i=Ca(t),n=this._mousewheelZoom,r=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(r))if(n){var s={delta:i,axisRanges:mS(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(ag,s)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),s.axisRanges=n.updateRanges(i,r),s.axisRanges&&!this.trigger(lg,s)&&n.zoom(),this._mwTimeout=setTimeout((function(){e.trigger(cg,s),e._zooming=!1,e.surface&&e.surface.resumeTracking()}),150))}else{var o=this._navState;if(!o)this._startNavigation(t,r,ag)||(o=this._navState);if(o){var a=o.totalDelta||i;o.totalDelta=a+i;for(var l=this._navState.axes,c={},h=0;h<l.length;h++){var u=l[h],p=u.options.name;p&&(c[p]=u.scaleRange(-a*e._mousewheelZoomRate(),r))}this.trigger(lg,{delta:i,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._endNavigation(t,cg)}),150)}}},e.prototype._startNavigation=function(t,e,i){var n=this._model._plotArea,r=n.findPointPane(e),s=n.axes.slice(0);if(r){var o=mS(s);this.trigger(i,{axisRanges:o,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:o,pane:r,axes:s})}},e.prototype._endNavigation=function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},e.prototype._getChartElement=function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},e.prototype._drawingChartElement=function(t,e,i){for(var n,r=t;r&&!n;)n=r.chartElement,r=r.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i))&&n.aliasFor&&(n=n.aliasFor()),n},e.prototype._eventCoordinates=function(t){var e=Al(t);return this._toModelCoordinates(e.x,e.y)},e.prototype._elementPadding=function(){if(!this._padding){var t=ta(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},e.prototype._toDocumentCoordinates=function(t){var e=this._elementPadding(),i=kl(this.element);return{left:Il(t.x+e.left+i.left),top:Il(t.y+e.top+i.top)}},e.prototype._toModelCoordinates=function(t,e){var i=this.element,n=kl(i),r=this._elementPadding(),s=function(t){if(!t)return zl.unit();for(var e=$l(t),i=t.parentElement;i;){var n=$l(i);e=e.multiplyCopy(n),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}(i).invert(),o=new Sc(t-n.left-r.left,e-n.top-r.top).transform(s);return new fc(o.x,o.y)},e.prototype._tap=function(t){var e=this,i=this.surface.eventTarget(t),n=this._drawingChartElement(i,t),r=this._sharedTooltip();this._startHover(i,t)||r||this._unsetActivePoint(),r&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(n,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},e.prototype._click=function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},e.prototype._propagateClick=function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},e.prototype._startHover=function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof xy)})),n=this._activePoint,r=this._plotArea.series.length>1,s=this._hasInactiveOpacity();return this._updateHoveredPoint(i,e),i&&n!==i&&i.hover?(this._activePoint=i,this._sharedTooltip()||i.hover(this,e)||(this._displayTooltip(i),s?this._displayInactiveOpacity(i,r):this._highlight.show(i))):!i&&s&&(r&&this._activeChartInstance&&(this._updateSeriesOpacity(i,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null),i},e.prototype._displayTooltip=function(t){Ko({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},e.prototype._displayInactiveOpacity=function(t,e,i){var n=this._activeChartInstance=this._chartInstanceFromPoint(t);if(n)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(n.children,null,!0),this._applySeriesOpacity(n.children,t.series),this._highlight.show(i||t);else{var r;if(!n.supportsPointInactiveOpacity())return void this._highlight.show(t);(r=this._getInactivePoints(t,n))&&r.length&&this._highlight.show(r,1-this._getInactiveOpacityForSeries(t.series))}},e.prototype._getInactivePoints=function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},e.prototype._getAllPointsOfType=function(t,e){for(var i=[],n=0;n<t.children.length;n++){var r=t.children[n];r.constructor===e?i.push(r):r.children&&r.children.length&&(i=i.concat(this._getAllPointsOfType(r,e)))}return i},e.prototype._updateHoveredPoint=function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},e.prototype._updateSeriesOpacity=function(t,e){for(var i=this._plotArea,n=i.series.length,r=0;r<n;r++){var s=i.series[r],o=this._getDefaultOpacityForSeries(s),a=this._getInactiveOpacityForSeries(s);e||s===t.series?(s.opacity=o,s.line&&(s.line.opacity=o)):(s.defaultOpacity=o,s.opacity=a,s.line&&(s.line.opacity=a))}},e.prototype._applySeriesOpacity=function(t,e,i,n){for(var r=0;r<t.length;r++){var s=t[r],o=s.series||n;if(o&&(o.highlight||{}).visible&&s.visual){var a=n?n.opacity:s.series.opacity;(o!==e||i)&&s.visual.opacity(i?1:a)}s.children&&s.children.length&&this._applySeriesOpacity(s.children,e,i,s.series)}},e.prototype._chartInstanceFromPoint=function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},e.prototype._hasInactiveOpacity=function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},e.prototype._getInactiveOpacityForSeries=function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1},e.prototype._getDefaultOpacityForSeries=function(t){return t.defaultOpacity||t.opacity||1},e.prototype._mouseover=function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),wl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)))},e.prototype._mouseMoveTracking=function(t){var e,i=this,n=i.options,r=i._tooltip,s=i._highlight,o=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(o&&o.tooltipTracking&&o.series&&o.parent.getNearestPoint){var l=o.parent.getNearestPoint(a.x,a.y,o.seriesIx);if(l&&l!==o)if(this._activePoint=l,!l.hover(this,t))Ko({},n.tooltip,l.options.tooltip).visible&&r.show(l),s.show(l)}}else Fl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null},e.prototype._mousemove=function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var n=i.backgroundContainsPoint(e);n?(i.hovered=!0,this._plotArea.hover(this,t)):i.hovered&&!n&&(this.trigger(ng),i.hovered=!1)}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},e.prototype._trackCrosshairs=function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var n=e[i];n.box.containsPoint(t)?n.showAt(t):n.hide()}},e.prototype._trackSharedTooltip=function(t,e,i){if(!this._suppressHover){var n=this,r=n.options.tooltip,s=n._plotArea,o=n._plotArea.categoryAxis,a=n._tooltip,l=n._highlight;if(s.backgroundContainsPoint(t)){var c=o.pointCategoryIndex(t);if(c!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var h=s.pointsByCategoryIndex(c),u=h.map((function(t){return t.eventArgs(e)})),p=u[0]||{};p.categoryPoints=u,h.length>0&&!this.trigger(eg,p)?(r.visible&&a.showAt(h,t),l.show(h),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=c}else i&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},e.prototype.hideElements=function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},e.prototype._unsetActivePoint=function(t){var e=this._tooltip,i=this._highlight;this._activePoint=null,this._hoveredPoint=null,!e||t&&t.keepTooltipOpen||e.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,i&&i.hide()},e.prototype._deferRedraw=function(){this._redraw()},e.prototype._clearRedrawTimeout=function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},e.prototype.bindCategories=function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var n=e[i];!1!==n.autoBind&&this.bindCategoryAxisFromSeries(n,i)}},e.prototype.bindCategoryAxisFromSeries=function(t,e){for(var i,n=this.options.series,r=n.length,s=new pa,o=[],a=!1,l=0;l<r;l++){var c=n[l],h=c.categoryAxis===t.name||!c.categoryAxis&&0===e,u=c.data,p=u.length,d=c.categoryField&&h;if(a=d||a,d&&p>0)for(var f=(i=hy(t,nf(c.categoryField,u[0])))?cy:nf,g=0;g<p;g++){var m=u[g],y=f(c.categoryField,m,this.chartService.intl);!i&&s.get(y)||(o.push([y,m]),i||s.set(y,!0))}}if(o.length>0){i&&(o=function(t,e){void 0===e&&(e=Xp);for(var i=function(t,e){void 0===e&&(e=Xp);for(var i=1,n=t.length;i<n;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}(t,e),n=i.length,r=n>0?[i[0]]:[],s=1;s<n;s++)0!==e(i[s],Ol(r))&&r.push(i[s]);return r}(o,(function(t,e){return Xp(t[0],e[0])})));var v=function(t){for(var e=t.length,i=[],n=0;n<e;n++)for(var r=t[n],s=r.length,o=0;o<s;o++)i[o]=i[o]||[],i[o].push(r[o]);return i}(o);t.categories=v[0]}else a&&(t.categories=[])},e.prototype._isBindable=function(t){for(var e=sf.current.valueFields(t),i=!0,n=0;n<e.length;n++){var r=e[n];if(r===Io?r="field":r+="Field",!xl(t[r])){i=!1;break}}return i},e.prototype._noTransitionsRedraw=function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},e.prototype._legendItemHover=function(t,e){var i,n=this._plotArea,r=this._highlight,s=(n.srcSeries||n.series)[t];if(i=da(s.type,[Lf,Mf,Pf])?n.findPoint((function(i){return i.series.index===t&&i.index===e})):n.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&s.visible&&i){var o=n.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,o,i)}else r.show(i)},e.prototype._shouldAttachMouseMove=function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([ig,ng])},e.prototype.updateMouseMoveHandler=function(){var t,e;Fl(this.element,((t={}).mousemove=this._mousemove,t)),this._shouldAttachMouseMove()&&wl(this.element,((e={}).mousemove=this._mousemove,e))},e.prototype.applyOptions=function(t,e){vS(this._originalOptions,t),this._originalOptions=Ko(this._originalOptions,t),this.options=Ko({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},e.prototype.setOptions=function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},e.prototype.setDirection=function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},e.prototype.setIntlService=function(t){this.chartService.intl=t},e.prototype.noTransitionsRedraw=function(){this._noTransitionsRedraw()},e.prototype.destroy=function(){var t,e;this._destroyed=!0,Fl(this.element,((t={}).contextmenu=this._clickHandler,t[bg]=this._mousewheelHandler,t.mousemove=this._mousemove,t.mouseleave=this._mouseleaveHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&Fl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},e.prototype._destroySurface=function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},e.prototype._destroySelections=function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},e.prototype._destroyView=function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},e}(el);function fS(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function gS(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function mS(t){for(var e={},i=0;i<t.length;i++){var n=t[i],r=n.options.name;r&&(e[r]=n.range())}return e}var yS=["data","categories"];function vS(t,e){for(var i in e)if(!da(i,yS)&&e.hasOwnProperty(i)){var n=e[i],r=t[i];if(xl(r)){var s=null===n;s||!xl(n)?(delete t[i],s&&delete e[i]):r&&Yo(n)&&Yo(r)&&vS(r,n)}}}function bS(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}Nl(dS,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:Ef,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const wS=dS;var xS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._slotAnchor=function(t,e){var i=this.plotArea.categoryAxis.options.vertical,n=i?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:i?new fc(this.plotArea.box.x2,e.center().y):new fc(e.center().x,-2),align:n}},e.prototype._defaultAnchor=function(t,e){return this._slotAnchor({},e)},e}(zw);const SS=xS;var kS=[Cf,Tf];function CS(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[i]=n.style.display,n.style.display="none"}return e}function AS(t,e){for(var i=0;i<t.length;i++)t[i].style.display=e[i]}function _S(t){return Ho(t)?[t]:t}var TS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._setElementClass=function(t){Bo(t,"k-sparkline")},e.prototype._initElement=function(e){t.prototype._initElement.call(this,e),this._initialWidth=Math.floor(Cl(e).width)},e.prototype._resize=function(){var e=this.element,i=CS(e.childNodes);this._initialWidth=Math.floor(Cl(e).width),AS(e.childNodes,i),t.prototype._resize.call(this)},e.prototype._modelOptions=function(){var t=this.options,e=this._surfaceWrap(),i=CS(e.childNodes),n=document.createElement("span");n.innerHTML="&nbsp;",e.appendChild(n);var r=Ko({width:this._autoWidth,height:Cl(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return Cl(e,{width:r.width,height:r.height}),e.removeChild(n),AS(e.childNodes,i),this.surface&&this.surface.resize(),r},e.prototype._surfaceWrap=function(){if(!this.stage){var t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage},e.prototype._createPlotArea=function(e){var i=t.prototype._createPlotArea.call(this,e);return this._autoWidth=this._initialWidth||this._calculateWidth(i),i},e.prototype._calculateWidth=function(t){for(var e=this.options,i=ea(e.chartArea.margin),n=t.charts,r=this._surfaceWrap(),s=0,o=0;o<n.length;o++){var a=n[o],l=(a.options.series||[])[0];if(l){if(l.type===Cf)return 150;if(l.type===Tf)return 150;if(l.type===Lf)return Cl(r).height;var c=a.categoryAxis;if(c){var h=c.categoriesCount()*(!a.options.isStacked&&da(l.type,[Ef,Yf])?a.seriesOptions.length:1);s=Math.max(s,h)}}}var u=s*e.pointWidth;return u>0&&(u+=i.left+i.right),u},e.prototype._createSharedTooltip=function(t){return new SS(this._plotArea,t)},e.normalizeOptions=function(t){var e=_S(t);return(e=No(e)?{seriesDefaults:{data:e}}:Ko({},e)).series||(e.series=[{data:_S(e.data)}]),Ko(e,{seriesDefaults:{type:e.type}}),(da(e.series[0].type,kS)||da(e.seriesDefaults.type,kS))&&(e=Ko({},{categoryAxis:{crosshair:{visible:!1}}},e)),e},e}(wS);Nl(TS,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const OS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._initialOpacity=parseFloat(ta(this.element,"opacity").opacity)},e.prototype.step=function(t){ta(this.element,{opacity:String(ga(this._initialOpacity,0,t))})},e.prototype.abort=function(){t.prototype.abort.call(this),ta(this.element,{display:"none",opacity:String(this._initialOpacity)})},e.prototype.cancel=function(){t.prototype.abort.call(this),ta(this.element,{opacity:String(this._initialOpacity)})},e}(vu);function ES(t,e){var i=document.createElement("div");return i.className=t,e&&(i.style.cssText=e),i}var MS=function(t){function e(e,i,n){t.call(this),this.options=Ko({},this.options,n),this.container=e,this.chartService=i;var r=ta(e,["paddingLeft","paddingTop"]);this.chartPadding={top:r.paddingTop,left:r.paddingLeft},this.createElements(),e.appendChild(this.element)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElements=function(){var t=this.element=ES("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=ES("k-tooltip k-chart-tooltip"),i=this.scroll=ES("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(i)},e.prototype.show=function(t,e,i){var n=this,r=n.element,s=n.options,o=n.scroll,a=n.tooltip,l=$p(Kp(t)+Kp(e-t)/2),c=.4*i.width(),h=i.center().x-c,u=(i.center().x-h)/(s.max-s.min),p=l-s.min,d=this.chartService.intl.format(s.format,t,e),f=sa(s);this.clearHideTimeout(),this._visible||(ta(r,{visibility:"hidden",display:"block"}),this._visible=!0),f&&(d=f({from:t,to:e})),a.innerHTML=d,ta(a,{left:i.center().x-a.offsetWidth/2,top:i.y1});var g=ta(a,["marginTop","borderTopWidth","height"]);ta(o,{width:c,left:h+p*u,top:i.y1+g.marginTop+g.borderTopWidth+g.height/2}),ta(r,{visibility:"visible"})},e.prototype.clearHideTimeout=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},e.prototype.hide=function(){var t=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){t._visible=!1,t._hideAnimation=new OS(t.element),t._hideAnimation.setup(),t._hideAnimation.play()}),this.options.hideDelay)},e.prototype.destroy=function(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},e}(el);Nl(MS,{format:"{0:d} - {1:d}",hideDelay:500});const PS=MS;var IS="_navigator",FS=IS,DS=function(t){function e(e){var i;t.call(this),this.chart=e;var n=this.options=Ko({},this.options,e.options.navigator),r=n.select;r&&(r.from=this.parseDate(r.from),r.to=this.parseDate(r.to)),xl(n.hint.visible)||(n.hint.visible=n.visible),this.chartObserver=new va(this,((i={}).drag="_drag",i.dragEnd="_dragEnd",i.zoom="_zoom",i.zoomEnd="_zoomEnd",i)),e.addObserver(this.chartObserver)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseDate=function(t){return td(this.chart.chartService.intl,t)},e.prototype.clean=function(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},e.prototype.destroy=function(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},e.prototype.redraw=function(){this._redrawSelf(),this.initSelection()},e.prototype.initSelection=function(){var t,e=this.chart,i=this.options,n=this.mainAxis(),r=n.roundedRange(),s=r.min,o=r.max,a=i.select,l=a.from,c=a.to,h=a.mousewheel,u=(t=n,RS.prototype=t,new RS);0!==n.categoriesCount()&&(this.clean(),u.box=n.box,this.selection=new Lw(e,u,{min:s,max:o,from:l||s,to:c||o,mousewheel:Dl(h,{zoom:"left"}),visible:i.visible},new va(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),i.hint.visible&&(this.hint=new PS(e.element,e.chartService,{min:s,max:o,template:sa(i.hint),format:i.hint.format})))},e.prototype.setRange=function(){var t=this.chart._createPlotArea(!0).namedCategoryAxes._navigator.roundedRange(),e=t.min,i=t.max,n=this.options.select||{},r=n.from||e;r<e&&(r=e);var s=n.to||i;s>i&&(s=i),this.options.select=Ko({},n,{from:r,to:s}),this.filterAxes()},e.prototype._redrawSelf=function(t){var e=this.chart._plotArea;e&&e.redraw(Ol(e.panes),t)},e.prototype.redrawSlaves=function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(i)},e.prototype._drag=function(t){var e,i=this.chart,n=this.selection,r=i._eventCoordinates(t.originalEvent),s=this.mainAxis(),o=s.roundedRange(),a=s.pane.box.containsPoint(r),l=i._plotArea.categoryAxis,c=t.axisRanges[l.options.name],h=this.options.select;if(c&&!a&&n){e=h.from&&h.to?Kp(h.to)-Kp(h.from):Kp(n.options.to)-Kp(n.options.from);var u=$p(El(Kp(c.min),o.min,Kp(o.max)-e)),p=$p(El(Kp(u)+e,Kp(o.min)+e,o.max));this.options.select={from:u,to:p},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),n.set(u,p),this.showHint(u,p)}},e.prototype._dragEnd=function(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},e.prototype.readSelection=function(){var t=this.selection.options,e=t.from,i=t.to,n=this.options.select;n.from=e,n.to=i},e.prototype.filterAxes=function(){var t=this.options.select;void 0===t&&(t={});for(var e=this.chart.options.categoryAxis,i=t.from,n=t.to,r=0;r<e.length;r++){var s=e[r];s.pane!==IS&&(s.min=i,s.max=n)}},e.prototype.filter=function(){var t=this.chart,e=this.options.select;if(t.requiresHandlers(["navigatorFilter"])){var i=this.mainAxis(),n={from:e.from,to:e.to};if("category"!==i.options.type){var r=new gd(Ko({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;n.from=Vp(r.min,-r.baseUnitStep,r.baseUnit),n.to=Vp(r.max,r.baseUnitStep,r.baseUnit)}this.chart.trigger("navigatorFilter",n)}},e.prototype._zoom=function(t){var e=this,i=e.chart._plotArea.categoryAxis,n=e.selection,r=e.options,s=r.select,o=r.liveDrag,a=this.mainAxis(),l=t.delta;if(n){var c=a.categoryIndex(n.options.from),h=a.categoryIndex(n.options.to),u=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),h-c>1?(n.zoom(l,u),this.readSelection()):(i.options.min=s.from,s.from=i.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),u).min),o&&(this.filterAxes(),this.redrawSlaves()),n.set(s.from,s.to),this.showHint(this.options.select.from,this.options.select.to)}},e.prototype._zoomEnd=function(t){this._dragEnd(t)},e.prototype.showHint=function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},e.prototype._selectStart=function(t){return this.chart._selectStart(t)},e.prototype._select=function(t){return this.showHint(t.from,t.to),this.chart._select(t)},e.prototype._selectEnd=function(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)},e.prototype.mainAxis=function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes._navigator},e.prototype.select=function(t,e){var i=this.options.select;return t&&e&&(i.from=this.parseDate(t),i.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:i.from,to:i.to}},e.setup=function(t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!t.__navi){t.__navi=!0;var n=Ko({},i.navigator,t.navigator),r=t.panes=[].concat(t.panes),s=Ko({},n.pane,{name:IS});n.visible||(s.visible=!1,s.height=.1),r.push(s),e.attachAxes(t,n),e.attachSeries(t,n,i)}},e.attachAxes=function(t,e){var i=e.series||[],n=t.categoryAxis=[].concat(t.categoryAxis),r=t.valueAxis=[].concat(t.valueAxis),s=0===ly(i,tg).length,o=Ko({type:"date",pane:IS,roundToBaseUnit:!s,justified:s,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),a=e.categoryAxis;n.push(Ko({},o,{maxDateGroups:200},a,{name:FS,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),Ko({},o,a,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),Ko({},o,a,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),r.push(Ko({name:FS,pane:IS,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},e.attachSeries=function(t,e,i){for(var n=t.series=t.series||[],r=[].concat(e.series||[]),s=i.seriesColors,o=e.seriesDefaults,a=0;a<r.length;a++)n.push(Ko({color:s[a%s.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},o,r[a],{axis:FS,categoryAxis:FS,autoBind:e.autoBindElements}))},e}(el);function RS(){}const LS=DS;var NS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyDefaults=function(e,i){var n=Cl(this.element).width||600,r=i,s={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(n/28)}}};r&&(r=Ko({},r,s)),LS.setup(e,r),t.prototype.applyDefaults.call(this,e,r)},e.prototype._setElementClass=function(t){Bo(t,"k-chart k-stockchart")},e.prototype.setOptions=function(e){this.destroyNavigator(),t.prototype.setOptions.call(this,e)},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},e.prototype._resize=function(){this.noTransitionsRedraw()},e.prototype._redraw=function(){var t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()},e.prototype._dirty=function(){var t=this.options,e=ca([].concat(t.series,t.navigator.series),(function(t){return t&&t.visible})).length,i=this._seriesCount!==e;return this._seriesCount=e,i},e.prototype._fullRedraw=function(){var e=this.navigator;e||(e=this.navigator=new LS(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),t.prototype._redraw.call(this),e.initSelection()},e.prototype._trackSharedTooltip=function(e){var i=this._plotArea.paneByPoint(e);i&&i.options.name===IS?this._unsetActivePoint():t.prototype._trackSharedTooltip.call(this,e)},e.prototype.bindCategories=function(){t.prototype.bindCategories.call(this),this.copyNavigatorCategories()},e.prototype.copyNavigatorCategories=function(){for(var t,e=[].concat(this.options.categoryAxis),i=0;i<e.length;i++){var n=e[i];n.name===FS?t=n.categories:t&&n.pane===IS&&(n.categories=t)}},e.prototype.destroyNavigator=function(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},e.prototype.destroy=function(){this.destroyNavigator(),t.prototype.destroy.call(this)},e.prototype._stopChartHandlers=function(e){var i=this._eventCoordinates(e),n=this._plotArea.paneByPoint(i);return t.prototype._stopChartHandlers.call(this,e)||n&&n.options.name===IS},e.prototype._toggleDragZoomEvents=function(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},e}(wS);Nl(NS,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const BS=NS;var jS=150,zS="arrowPointer",US="barPointer",$S=.5,HS=Math.PI/180,VS="inside",qS="linear",WS="outside",XS="radialPointer",GS="radialRangePointer";function KS(t,e){var i=t.getOrigin(),n=t.getSize(),r=ea(e);return t.setOrigin([i.x-r.left,i.y-r.top]),t.setSize([n.width+(r.left+r.right),n.height+(r.top+r.bottom)]),t}var YS=lu,JS=Kh,ZS=qu;function QS(t,e){var i=t.box,n=t.children[0].box,r=e.border||{},s=e.background||"",o=JS.fromRect(new _c([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}}),a=new ZS(t.text,new Sc(n.x1,n.y1),{font:e.font,fill:{color:e.color}}),l=KS(a.bbox().clone(),e.padding),c=JS.fromRect(l,{stroke:{color:r.width?r.color:"",width:r.width,opacity:r.opacity,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:s}}),h=new YS;return h.append(o),h.append(c),h.append(a),h}function tk(t,e,i){var n=xl(t.from)?t.from:Co,r=xl(t.to)?t.to:ko;return t.from=Math.max(Math.min(r,n),e),t.to=Math.min(Math.max(r,n),i),t}function ek(t,e){var i=ea(e);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,KS(t,i)}var ik=Kh,nk=rw,rk=function(t){function e(e,i,n,r){void 0===r&&(r={}),t.call(this),this.element=e,this.theme=n,this.contextService=new mp(this,r),this._originalOptions=Ko({},this.options,i),this.options=Ko({},this._originalOptions),this._initTheme(n),this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},e.prototype.value=function(t){var e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)},e.prototype._draw=function(){var t=this.surface;t.clear(),t.draw(this._visuals)},e.prototype.exportVisual=function(){return this._visuals},e.prototype.allValues=function(t){var e=this.pointers,i=[];if(0===arguments.length){for(var n=0;n<e.length;n++)i.push(e[n].value());return i}if(No(t))for(var r=0;r<t.length;r++)Ho(t[r])&&e[r].value(t[r]);this._setValueOptions(t)},e.prototype._setValueOptions=function(t){for(var e=[].concat(this.options.pointer),i=[].concat(t),n=0;n<i.length;n++)e[n].value=i[n]},e.prototype.resize=function(){this.noTransitionsRedraw()},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)},e.prototype.redraw=function(){var t=this._surfaceSize(),e=new _c([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var i=ek(e.bbox(),this._gaugeAreaMargin);this.reflow(i)},e.prototype.setOptions=function(t,e){this._originalOptions=Ko(this._originalOptions,t),this.options=Ko({},this._originalOptions),this._initTheme(e),this.redraw()},e.prototype.setDirection=function(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},e.prototype.setIntlService=function(t){this.contextService.intl=t},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=Ko({},e,this.options);var i=this.options,n=i.pointer;if(No(n)){for(var r=[],s=0;s<n.length;s++)r.push(Ko({},e.pointer,n[s]));i.pointer=r}},e.prototype._createGaugeArea=function(){var t=this.options.gaugeArea,e=this.surface.size(),i=t.border||{},n=new _c([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,i.width>0&&(n=ek(n,i.width)),ik.fromRect(n,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},e.prototype._initSurface=function(){var t=this.options,e=this.surface,i=this._surfaceElement(),n=this._surfaceSize();Cl(i,n),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=nk.create(i,{type:t.renderAs}))},e.prototype._surfaceSize=function(){var t=this.options,e=this._getSize();return t.gaugeArea&&Ko(e,t.gaugeArea),e},e.prototype._surfaceElement=function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},e.prototype.getSize=function(){return this._getSize()},e.prototype._getSize=function(){var t=this.element,e=this._defaultSize(),i=t.offsetWidth,n=t.offsetHeight;return i||(i=e.width),n||(n=e.height),{width:i,height:n}},e.prototype._defaultSize=function(){return{width:200,height:200}},e.prototype._toggleTransitions=function(t){this.options.transitions=t;for(var e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t},e}(el);Nl(rk,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const sk=rk;var ok=Kh,ak=lu,lk=Sc;function ck(t,e){var i,n,r=t.position,s=t.tickX,o=t.tickY;return t.vertical?(i=new lk(s,r),n=new lk(s+e.size,r)):(i=new lk(r,o),n=new lk(r,o+e.size)),new ok({stroke:{color:e.color,width:e.width}}).moveTo(i).lineTo(n)}function hk(t,e,i,n){var r=e.length;if(n.visible)for(var s=i.mirror,o=i.lineBox,a=n.skip;a<r;a+=n.step)a%n.skipUnit!=0&&(i.tickX=s?o.x2:o.x2-n.size,i.tickY=s?o.y1-n.size:o.y1,i.position=e[a],t.append(ck(i,n)))}var uk=function(t){function e(e,i){var n=e||{};!xl(n.reverse)&&!1===n.vertical&&(i||{}).rtl&&(n=Object.assign({},n,{reverse:!0})),t.call(this,0,1,n,i),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=Ko({},this.options,t);return(e=Ko({},e,{labels:{mirror:e.mirror}})).majorUnit=e.majorUnit||pc(e.min,e.max),e},e.prototype.initFields=function(){},e.prototype.render=function(){var t=this.elements=new ak,e=this.renderLabels(),i=this.renderLine(),n=this.renderTicks(),r=this.renderRanges();return t.append(i,e,n,r),t},e.prototype.renderRanges=function(){for(var t=this,e=this.options,i=e.min,n=e.max,r=e.vertical,s=e.labels.mirror,o=e.ranges||[],a=new ak,l=o.length,c=e.rangeSize||e.minorTicks.size/2,h=0;h<l;h++){var u=tk(o[h],i,n),p=t.getSlot(u.from,u.to),d=r?t.lineBox():p,f=r?p:t.lineBox();r?d.x1-=c*(s?-1:1):f.y2+=c*(s?-1:1),a.append(ok.fromRect(new _c([d.x1,f.y1],[d.x2-d.x1,f.y2-f.y1]),{fill:{color:u.color,opacity:u.opacity},stroke:{}}))}return a},e.prototype.renderLabels=function(){for(var t=this.labels,e=this.options,i=new ak,n=0;n<t.length;n++)i.append(QS(t[n],e.labels));return i},e.prototype.renderLine=function(){var t=this.options.line,e=this.lineBox(),i=new ak;if(t.width>0&&t.visible){var n=new ok({stroke:{color:t.color,dashType:t.dashType,width:t.width}});n.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),i.append(n)}return i},e.prototype.renderTicks=function(){var t=new ak,e=this.options,i=e.majorTicks.visible?e.majorUnit:0,n={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return hk(t,this.getMajorTickPositions(),n,e.majorTicks),hk(t,this.getMinorTickPositions(),n,Ko({},{skipUnit:i/e.minorUnit},e.minorTicks)),t},e}(Sd);Nl(uk,{min:0,max:50,majorTicks:{size:15,align:VS,color:ho,width:$S,visible:!0},minorTicks:{size:10,align:VS,color:ho,width:$S,visible:!0},line:{width:$S},labels:{position:VS,padding:2},mirror:!1,_alignLines:!1});const pk=uk;var dk=function(t){function e(e,i){t.call(this);var n=e.options,r=n.min,s=n.max,o=this.options=Ko({},this.options,i);o.fill=o.color,this.scale=e,xl(o.value)?o.value=El(o.value,r,s):o.value=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this.options,i=e.value;if(0===arguments.length)return i;var n=this.scale.options,r=n.min,s=n.max;e._oldValue=xl(e._oldValue)?e.value:r,e.value=El(t,r,s),this.elements&&this.repaint()},e}(el);Nl(dk,{color:ho});const fk=dk;var gk=function(t){function e(e,i){t.call(this,e,i),this.options=Ko({track:{visible:xl(i.track)}},this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t,e,i,n=this.options,r=this.scale,s=r.options,o=s.mirror,a=s.vertical,l=r.lineBox(),c=n.track.size||n.size,h=n.size/2,u=ea(n.margin),p=a?u[o?"left":"right"]:u[o?"bottom":"top"];p=o?-p:p,a?(i=new Ec(l.x1+p,l.y1,l.x1+p,l.y2),o?i.x1-=c:i.x2+=c,n.shape!==US&&(t=e=new Ec(l.x2+p,l.y1-h,l.x2+p,l.y2+h))):(i=new Ec(l.x1,l.y1-p,l.x2,l.y1-p),o?i.y2+=c:i.y1-=c,n.shape!==US&&(t=e=new Ec(l.x1-h,l.y1-p,l.x2+h,l.y1-p))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(n.border.width)},e.prototype.getElementOptions=function(){var t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:xl(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}},e.prototype._margin=function(){var t=this.scale,e=this.options,i=t.options,n=i.mirror,r=i.vertical,s=ea(e.margin);return r?s[n?"left":"right"]:s[n?"bottom":"top"]},e}(fk);Nl(gk,{shape:US,track:{border:{width:1}},color:ho,border:{width:1},opacity:1,margin:ea(3),animation:{type:US},visible:!0});const mk=gk;var yk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=t.margin,i=t.from,n=t.to,r=t.vertical,s=r?"x1":"y1";t.mirror===r?(i[s]-=e,n[s]-=e):(i[s]+=e,n[s]+=e);var o=this.fromScale=new Sc(i.x1,i.y1),a=this.toScale=new Sc(n.x1,n.y1);0!==t.duration&&(t.duration=Math.max(o.distanceTo(a)/t.duration*1e3,1))},e.prototype.step=function(t){var e=ga(this.fromScale.x,this.toScale.x,t),i=ga(this.fromScale.y,this.toScale.y,t);this.element.transform(jc().translate(e,i))},e}(vu);Nl(yk,{easing:qS,duration:250}),mu.current.register(zS,yk);const vk=yk;var bk=Sc,wk=Kh,xk=function(t){function e(e,i){t.call(this,e,i),xl(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(){var t=this.scale,e=this.options.size,i=e/2,n=t.options.mirror?-1:1;return t.options.vertical?[new bk(0,0-i),new bk(0-n*e,0),new bk(0,0+i)]:[new bk(0-i,0),new bk(0,0+n*e),new bk(0+i,0)]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=new vk(this.elements,Ko(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(i.options.duration=0),i.setup(),i.play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=this.getElementOptions(),n=this.pointerShape(e.value);e.animation.type=zS;var r=new wk({stroke:i.stroke,fill:i.fill}).moveTo(n[0]).lineTo(n[1]).lineTo(n[2]).close(),s=t.getSlot(e.value);return r.transform(jc().translate(s.x1,s.y1)),this.elements=r,r},e}(mk);const Sk=xk;var kk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=this.axis=t.vertical?Lo:Ro,i=this.to=t.newPoints[0][e],n=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(i-n)/t.speed*1e3,1)),this._set(n)},e.prototype.step=function(t){var e=ga(this.from,this.to,t);this._set(e)},e.prototype._set=function(t){var e="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][e](t),i[1][e](t)},e}(vu);Nl(kk,{easing:qS,speed:250}),mu.current.register(US,kk);const Ck=kk;var Ak=lu,_k=Kh,Tk=function(t){function e(e,i){t.call(this,e,i),xl(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(t){var e=this.scale,i=this.options,n=e.options,r=n.mirror,s=n.vertical,o=r===s?-1:1,a=i.size*o,l=e.getSlot(e.options.min),c=e.getSlot(t),h=s?Lo:Ro,u=s?Ro:Lo,p=this._margin()*o,d=new Sc;d[h]=l[h+"1"],d[u]=l[u+"1"];var f=new Sc;f[h]=c[h+"1"],f[u]=c[u+"1"],s?(d.translate(p,0),f.translate(p,0)):(d.translate(0,p),f.translate(0,p));var g=f.clone(),m=d.clone();return s?(g.translate(a,0),m.translate(a,0)):(g.translate(0,a),m.translate(0,a)),[d,f,g,m]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=this.pointerShape(e.value),n=this.pointerPath,r=this.pointerShape(e._oldValue);n.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();var s=new Ck(n,Ko(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[r[1],r[2]],newPoints:[i[1],i[2]]}));!1===e.animation.transitions&&(s.options.duration=0),s.setup(),s.play()},e.prototype.render=function(){var t=new Ak,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());var i=this.pointerPath=new _k({stroke:e.stroke,fill:e.fill});return t.append(i),this.elements=t,t},e.prototype.renderTrack=function(){var t=this.options.track,e=t.border||{},i=this.trackBox.clone().pad(e.width||0);return new _k.fromRect(i.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})},e}(mk);const Ok=Tk;var Ek=lu,Mk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.pointers,i=t.origin.x,n=t.origin.y,r=new Ec(i,n,i+t.width(),n+t.height());this.scale.reflow(r),this._shrinkScaleWidth(r);for(var s=0;s<e.length;s++)e[s].reflow();this.bbox=this._getBox(r),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},e.prototype._buildVisual=function(){var t=new Ek,e=this.scale.render(),i=this.pointers;t.append(this.gaugeArea),t.append(e);for(var n=0;n<i.length;n++){var r=i[n];t.append(r.render()),r.value(r.options.value)}this._visuals=t},e.prototype._createModel=function(){var t=this.options,e=this.scale=new pk(t.scale,this.contextService);this.pointers=[];var i=t.pointer;i=No(i)?i:[i];for(var n=0;n<i.length;n++){var r=Ko({},i[n],{animation:{transitions:t.transitions}}),s="arrow"===r.shape?Sk:Ok;this.pointers.push(new s(e,r))}},e.prototype._defaultSize=function(){var t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}},e.prototype._getBox=function(t){for(var e,i=this.scale,n=this.pointers,r=t.center(),s=n[0].box.clone().wrap(i.box),o=0;o<n.length;o++)s.wrap(n[o].box.clone());return i.options.vertical?(e=s.width()/2,s=new Ec(r.x-e,t.y1,r.x+e,t.y2)):(e=s.height()/2,s=new Ec(t.x1,r.y-e,t.x2,r.y+e)),s},e.prototype._alignElements=function(){for(var t,e=this.scale,i=this.pointers,n=e.box,r=i[0].box.clone().wrap(e.box),s=this.bbox,o=0;o<i.length;o++)r.wrap(i[o].box.clone());e.options.vertical?(t=s.center().x-r.center().x,e.reflow(new Ec(n.x1+t,s.y1,n.x2+t,s.y2))):(t=s.center().y-r.center().y,e.reflow(new Ec(n.x1,n.y1+t,n.x2,n.y2+t)));for(var a=0;a<i.length;a++)i[a].reflow(this.bbox)},e.prototype._shrinkScaleWidth=function(t){var e=this.scale;if(!e.options.vertical){var i=e.contentBox().width()-t.width();i>0&&(e.box.shrink(i,0),e.box.alignTo(t,"center"),e.reflow(e.box))}},e.prototype._shrinkElements=function(){for(var t=this.scale,e=this.pointers,i=t.box.clone(),n=t.options.vertical?"y":"x",r=e[0].box,s=0;s<e.length;s++)r.wrap(e[s].box.clone());i[n+1]+=Math.max(i[n+1]-r[n+1],0),i[n+2]-=Math.max(r[n+2]-i[n+2],0),t.reflow(i);for(var o=0;o<e.length;o++)e[o].reflow(this.bbox)},e}(sk);Nl(Mk,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const Pk=Mk;var Ik=function(t){function e(e,i){void 0===e&&(e=new Vc),void 0===i&&(i={}),t.call(this,i),this.geometry(e),zo(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Arc"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this.geometry().bbox()},e.prototype.toPath=function(){var t=new Kh,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i+=3)t.curveTo(e[i],e[i+1],e[i+2])}return t},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Dh(Lh(nu(sh))));var Fk=180,Dk=Ik,Rk=Kh,Lk=lu;function Nk(t,e,i,n){var r=new Lk,s=t.center,o=t.getRadiusX();if(n.visible)for(var a=0;a<e.length;a++){var l=t.pointAt(e[a]),c=new Sc(s.x+o-n.size,s.y).rotate(e[a],s);r.append(new Rk({stroke:{color:n.color,width:n.width}}).moveTo(l).lineTo(c))}return r}function Bk(t,e,i,n){return{from:t,to:e,color:i,opacity:n}}var jk=function(t){function e(e,i){t.call(this,0,1,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=Ko({},this.options,t);return e.majorUnit=e.majorUnit||pc(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e},e.prototype.initFields=function(){},e.prototype.render=function(t,e){var i=this.renderArc(t,e);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},e.prototype.reflow=function(t){var e=t.center(),i=Math.min(t.height(),t.width())/2;if(!xl(this.bbox))return this.render(e,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},e.prototype.slotAngle=function(t){var e=this.options,i=e.min,n=e.max,r=e.reverse,s=e.startAngle,o=e.endAngle,a=o-s;return(r?o-(t-i)/(n-i)*a:(t-i)/(n-i)*a+s)+Fk},e.prototype.hasRanges=function(){var t=this.options.ranges;return t&&t.length},e.prototype.ticksSize=function(){var t=this.options,e=t.majorTicks,i=t.minorTicks,n=0;return e.visible&&(n=e.size),i.visible&&(n=Math.max(i.size,n)),n},e.prototype.labelsCount=function(){var e=t.prototype.labelsCount.call(this),i=this.options;return i.endAngle-i.startAngle>=360&&i.max%i.majorUnit==0&&(e-=1),e},e.prototype.renderLabels=function(){var t=this,e=this.options,i=this.arc.clone(),n=i.getRadiusX(),r=this.tickAngles(i,e.majorUnit),s=e.rangeSize=e.rangeSize||.1*n,o=new Lk,a=.05*n;xl(e.rangeDistance)?a=e.rangeDistance:e.rangeDistance=a;var l=e.labels,c=l.position===VS,h=xl(this.labelElements);c&&(n-=this.ticksSize(),this.hasRanges()&&!h&&(n-=s+a),i.setRadiusX(n).setRadiusY(n));for(var u=this.labels,p=u.length,d=ea(l.padding),f=(d.left+d.right)/2,g=(d.top+d.bottom)/2,m=0;m<p;m++){var y=u[m],v=y.box.width()/2,b=y.box.height()/2,w=r[m],x=(w-Fk)*HS,S=i.pointAt(w),k=S.x+Math.cos(x)*(v+f)*(c?1:-1),C=S.y+Math.sin(x)*(b+g)*(c?1:-1);y.reflow(new Ec(k-v,C-b,k+v,C+b));var A=new Sc(y.box.x1,y.box.y1),_=void 0;if(h){var T=(_=t.labelElements.children[m]).bbox().origin,O=_.transform()||jc();O.translate(A.x-T.x,A.y-T.y),_.transform(O)}else _=QS(y,e.labels),o.append(_);t.bbox=_c.union(t.bbox,_.bbox())}return o},e.prototype.repositionRanges=function(){var t=this.ranges.children;if(t.length>0){var e=this.options,i=e.rangeDistance,n=e.rangeSize,r=this.getRangeRadius();this.options.labels.position===VS&&(r+=n+i);for(var s=r+n/2,o=0;o<t.length;o++)t[o]._geometry.setRadiusX(s).setRadiusY(s);this.bbox=_c.union(this.bbox,this.ranges.bbox())}},e.prototype.renderRanges=function(){var t=this,e=this.rangeSegments(),i=e.length,n=new Lk;if(i){var r=this.options,s=r.rangeSize,o=r.reverse,a=r.rangeDistance,l=this.getRangeRadius();this.radius(this.radius()-s-a);for(var c=0;c<i;c++){var h=e[c],u=t.slotAngle(h[o?"to":"from"]),p=t.slotAngle(h[o?"from":"to"]);p-u!=0&&n.append(t.createRange(u,p,l,h))}}return n},e.prototype.createRange=function(t,e,i,n){var r=this.options.rangeSize,s=new Vc(this.arc.center,{radiusX:i+r/2,radiusY:i+r/2,startAngle:t,endAngle:e});return new Dk(s,{stroke:{width:r,color:n.color,opacity:n.opacity,lineCap:n.lineCap}})},e.prototype.rangeSegments=function(){var t=this.options,e=t.ranges||[],i=e.length,n=[];if(i){var r=t.min,s=t.max,o=t.rangePlaceholderColor;n.push(Bk(r,s,o));for(var a=0;a<i;a++)for(var l=tk(e[a],r,s),c=n.length,h=0;h<c;h++){var u=n[h];if(u.from<=l.from&&l.from<=u.to){n.push(Bk(l.from,l.to,l.color,l.opacity)),u.from<=l.to&&l.to<=u.to&&n.push(Bk(l.to,u.to,o,l.opacity)),u.to=l.from;break}}}return n},e.prototype.getRangeRadius=function(){var t=this.arc,e=this.options,i=e.rangeSize,n=e.rangeDistance,r=e.majorTicks.size;return e.labels.position===WS?t.getRadiusX()-r-n-i:t.getRadiusX()-i},e.prototype.renderArc=function(t,e){var i=this.options;return this.arc=new Vc(t,{radiusX:e,radiusY:e,startAngle:i.startAngle+Fk,endAngle:i.endAngle+Fk})},e.prototype.renderTicks=function(){var t=this.arc,e=this.options,i=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=Nk(i,this.majorTickAngles,e.majorUnit,e.majorTicks);var n=new Lk;n.append(this.majorTicks);var r=e.majorTicks.size,s=e.minorTicks.size;if(this._tickDifference=r-s,e.labels.position===WS){var o=i.getRadiusX();i.setRadiusX(o-r+s).setRadiusY(o-r+s)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=Nk(i,this.minorTickAngles,e.minorUnit,e.minorTicks),n.append(this.minorTicks),n},e.prototype.normalizeTickAngles=function(t){for(var e=this.options,i=e.majorUnit/e.minorUnit,n=t.length-1;n>=0;n--)n%i==0&&t.splice(n,1);return t},e.prototype.tickAngles=function(t,e){var i=this.options,n=i.reverse,r=i.max-i.min,s=t.endAngle-t.startAngle,o=r/e,a=t.startAngle,l=s/o;n&&(a+=s,l=-l),s>=360&&i.max%e==0&&(o-=1);for(var c=[],h=0;h<o;h++)c.push(Il(a,3)),a+=l;return Il(a)<=t.endAngle&&c.push(a),c},e.prototype.radius=function(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},e.prototype.repositionTicks=function(t,e,i){var n=i&&this._tickDifference||0,r=this.arc,s=r.getRadiusX();i&&this.options.labels.position===WS&&0!==n&&(r=this.arc.clone()).setRadiusX(s-n).setRadiusY(s-n);for(var o=0;o<t.length;o++){var a=r.pointAt(e[o]),l=t[o].segments,c=a.x-l[0].anchor().x,h=a.y-l[0].anchor().y;t[o].transform((new jc).translate(c,h))}},e}(Sd);Nl(jk,{min:0,max:100,majorTicks:{size:15,align:VS,color:ho,width:$S,visible:!0},minorTicks:{size:10,align:VS,color:ho,width:$S,visible:!0},startAngle:-30,endAngle:210,labels:{position:VS,padding:2}});const zk=jk;var Uk=function(t){function e(e,i){t.call(this,e,i);var n=this.options;n.duration=Math.max(Math.abs(n.newAngle-n.oldAngle)/n.duration*1e3,1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this.options,i=ga(e.oldAngle,e.newAngle,t);this.element.transform(jc().rotate(i,e.center))},e}(vu);Nl(Uk,{easing:qS,duration:jS}),mu.current.register(XS,Uk);const $k=Uk;var Hk=su,Vk=lu,qk=Kh,Wk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAngle=function(t){this.elements.transform(jc().rotate(t,this.center))},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),n=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(n):new $k(this.elements,Ko(e.animation,{oldAngle:i,newAngle:n})).play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=new Vk;return!1!==e.animation&&Ko(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(HS),i},e.prototype.reflow=function(t){var e=this.center=t.center,i=El(this.options.length||1,.1,1.5),n=this.radius=t.getRadiusX()*i,r=this.capSize=Math.round(n*this.options.cap.size);this.bbox=_c.fromPoints(new Sc(e.x-r,e.y-r),new Sc(e.x+r,e.y+r))},e.prototype._renderNeedle=function(){var t=this.scale.options.minorTicks.size,e=this.center,i=this.options.color,n=new qk({fill:{color:i},stroke:{color:i,width:$S}});return n.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),n},e.prototype._renderCap=function(){var t=this.options,e=t.cap.color||t.color,i=new eu(this.center,this.capSize);return new Hk(i,{fill:{color:e},stroke:{color:e}})},e}(fk);Nl(Wk,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:XS,duration:jS}});const Xk=Wk;var Gk=lu,Kk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(var n=0;n<i.length;n++)i[n].reflow(e.scale.arc),e._initialPlotArea=_c.union(e._initialPlotArea,i[n].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,i,this.scale),this._draw()},e.prototype._buildVisual=function(t,e,i){var n=this._visuals=new Gk;n.append(t),n.append(i.ticks),n.append(i.ranges),this._buildPointers(e),n.append(i.labelElements)},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}},e.prototype.fitScale=function(t){for(var e,i,n,r,s,o=this,a=this.scale.arc,l=this._initialPlotArea,c=Math.abs(this.getDiff(l,t)),h=Il(c,3),u=Il(-c,3),p=0,d=0;!(!(d++<100)||(p=s===n?p+1:0)>5||h!==r&&0<=(e=o.getPlotBox(h,t,a))&&e<=2||u!==r&&0<=(n=o.getPlotBox(u,t,a))&&n<=2||(r=e>0&&n>0?2*h:e<0&&n<0?2*u:Il((h+u)/2||1,3),0<=(i=o.getPlotBox(r,t,a))&&i<=2));)s=n,i>0?(u=r,n=i):(h=r,e=i)},e.prototype.getPlotBox=function(t,e,i){var n=this.scale,r=this.pointers,s=i.getRadiusX(),o=i.clone();o.setRadiusX(s+t).setRadiusY(s+t),n.arc=o,n.reflow(e),this.plotBbox=n.bbox;for(var a=0;a<r.length;a++)r[a].reflow(o),this.plotBbox=_c.union(this.plotBbox,r[a].bbox);return this.getDiff(this.plotBbox,e)},e.prototype.getDiff=function(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())},e.prototype.alignScale=function(t){var e=this.plotBbox.center(),i=t.center(),n=e.x-i.x,r=e.y-i.y,s=this.scale,o=this.pointers;s.arc.center.x-=n,s.arc.center.y-=r,s.reflow(t);for(var a=0;a<o.length;a++)o[a].reflow(s.arc),this.plotBbox=_c.union(s.bbox,o[a].bbox)},e.prototype._createModel=function(){var t=this.options,e=t.pointer,i=this.scale=new zk(t.scale,this.contextService);this.pointers=[];for(var n=No(e)?e:[e],r=0;r<n.length;r++){var s=new Xk(i,Ko({},n[r],{animation:{transitions:t.transitions}}));this.pointers.push(s)}},e}(sk);Nl(Kk,{transitions:!0,gaugeArea:{background:""}});const Yk=Kk;var Jk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rangeSegments=function(){var t=this.options;return[{from:t.min,to:t.max,color:t.rangePlaceholderColor,lineCap:t.rangeLineCap}]},e.prototype.hasRanges=function(){return!0},e.prototype.placeholderRangeAngle=function(t){var e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)},e.prototype.addRange=function(t,e,i){var n=this.options.reverse,r=this.slotAngle(n?e:t),s=this.slotAngle(n?t:e),o=this.createRange(r,s,this.getRangeRadius(),i);return this.ranges.append(o),o},e}(zk);Nl(Jk,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const Zk=Jk;var Qk=function(t){function e(e,i){t.call(this,e,i);var n=this.options,r=Math.abs(n.newAngle-n.oldAngle)/n.duration*1e3;n.duration=El(r,jS,800);var s=e.elements.options.get("stroke.color"),o=e.currentColor();s!==o&&(this.startColor=new ic(s),this.color=new ic(o))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this,i=e.options,n=e.startColor,r=e.color,s=ga(i.oldAngle,i.newAngle,t);if(this.element.angle(s),r){var o=Il(ga(n.r,r.r,t)),a=Il(ga(n.g,r.g,t)),l=Il(ga(n.b,r.b,t));this.element.stroke(new ic(o,a,l).toHex())}},e}(vu);Nl(Qk,{easing:qS,duration:jS}),mu.current.register(GS,Qk);const tC=Qk;var eC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),n=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(n),this.stroke(this.currentColor())):(this.animation=new tC(this,Ko(e.animation,{oldAngle:i,newAngle:n})),this.animation.play())},e.prototype.angle=function(t){var e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)},e.prototype.stroke=function(t){this.elements.stroke(t)},e.prototype.render=function(){if(!this.elements){var t=this.scale,e=this.options;!1!==e.animation&&Ko(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}},e.prototype.currentColor=function(){var t=this.scale.options,e=t.min,i=t.max,n=this.options,r=n.colors,s=n.color,o=n.value,a=Ho(o)?o:e;if(r)for(var l=0;l<r.length;l++){var c=r[l],h=c.color,u=c.from;void 0===u&&(u=e);var p=c.to;if(void 0===p&&(p=i),u<=a&&a<=p)return h}return s},e.prototype.reflow=function(){this.render(),this.bbox=this.elements.bbox()},e}(fk);Nl(eC,{animation:{type:GS,duration:jS}});const iC=eC;var nC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initTheme=function(e){t.prototype._initTheme.call(this,e),this.options.color=this.options.color||(this.theme.pointer||{}).color},e.prototype._createModel=function(){var t=this.options,e=this.scale=new Zk(t.scale,this.contextService),i=new iC(e,Ko({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[i]},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),i.value(i.options.value)}},e.prototype._setValueOptions=function(t){this.options.value=t},e.prototype.currentColor=function(){var t=this.pointers[0];if(t)return t.currentColor()},e.prototype.centerLabelPosition=function(t,e){var i=this.getSize(),n=this.scale.arc.center,r=n.x-t/2,s=n.y-e/2;if(t<i.width){var o=r+t;r=Math.max(r,0),o>i.width&&(r-=o-i.width)}if(e<i.height){var a=this.scale.bbox,l=a.bottomRight().y,c=s+e;s=Math.max(s,a.origin.y),c>l&&(s-=c-l)}return{left:r,top:s}},e}(Yk);const rC=nC;var sC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createModel=function(){var e=this.options.scale;"number"!=typeof e.startAngle&&(e.startAngle=90),e.endAngle=e.startAngle+360,t.prototype._createModel.call(this)},e}(rC);const oC=sC;var aC=function(t){function e(e){t.call(this),this.setOptions(e),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.setOptions=function(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},e.prototype.encode=function(t,e,i){var n=xl(t)?String(t):t;return this.initValue(n,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},e.prototype.initValue=function(){},e.prototype.addQuietZone=function(){this.pattern.push(this.options.quietZoneLength||10)},e.prototype.addData=function(){},e.prototype.invalidCharacterError=function(t){throw new Error('Character "'+t+'" is not valid for symbology '+this.name+".")},e}(el);Nl(aC,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var lC=Object.assign,cC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),lC(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addCheckSum=function(){var t=this.value,e=t.length,i=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),++e>=this.kCheckSumMinLength){var n=(i+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=n,this.addPattern(this.characterMap[n])}},e.prototype.getWeightedSum=function(t,e,i){for(var n=0,r=0;r<t.length;r++)n+=this.weightedValue(this.getValue(t.charAt(r)),e,r,i);return n},e.prototype.weightedValue=function(t,e,i,n){return((e-i)%n||n)*t},e.prototype.getValue=function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},e.prototype.addCharacter=function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},e}(aC);Nl(cC,{addCheckSum:!0});var hC=Object.assign,uC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),hC(this,{minBaseUnitLength:.7})},e.prototype.addData=function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},e.prototype.addBase=function(){},e}(aC),pC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),hC(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},e.prototype.initValue=function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},e.prototype.prepareValues=function(){var t,e=this.minBaseUnitLength,i=this.minRatio,n=Math.ceil(Math.max(.15*this.width,24)),r=this.maxRatio;if(this.height<n)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+n+"px.");for(t=this.getBaseUnit(r);t<e&&r>i;)r=parseFloat((r-.1).toFixed(1)),t=this.getBaseUnit(r);if(t<e){var s=Math.ceil(this.getBaseWidth(i)*e);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+s+"px.")}this.ratio=r,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,r).split(this.splitCharacter))},e.prototype.getBaseUnit=function(t){return this.width/this.getBaseWidth(t)},e.prototype.getBaseWidth=function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},e.prototype.addStart=function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.addCharacterGap()},e.prototype.addStop=function(){this.addPattern(this.characterMap.START.pattern)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},e.prototype.addCharacterGap=function(){this.patternString+=this.gapWidth+this.splitCharacter},e}(uC);Nl(pC,{addCheckSum:!1});var dC={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=this,n=0;n<this.extendedMappings.length;n++)if(e=i.extendedMappings[n].call(i,t)){for(var r=0;r<e.length;r++){var s=e[r];i.addBase(s)}return void(i.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){var e,i,n=this;if(this.specialAsciiCodes[t]){e=[];for(var r=0;r<this.specialAsciiCodes[t].length;r++)e.push(n.characterMap[n.shiftCharacters[3]]),e.push(n.characterMap[n.specialAsciiCodes[t][r]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},fC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ko(this,dC,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},e}(pC),gC=Object.assign,mC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),gC(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},e.prototype.initValue=function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},e.prototype.prepareValues=function(){var t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+t+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+e+"px.")}},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},e.prototype.addStart=function(){var t=this.characterMap.START.pattern;this.addPattern(t)},e.prototype.addStop=function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.values.push(t.value)},e.prototype.pushCheckSum=function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var n=0;n<i.length;n++)t=e.characterMap[e._findCharacterByValue(i[n])],e.addPattern(t.pattern)},e.prototype._getCheckValues=function(){var t,e,i=this,n=this.values,r=n.length,s=0;for(e=r-1;e>=0;e--)s+=i.weightedValue(n[e],r-e,i.cCheckSumTotal);for(t=s%this.checkSumMod,s=this.weightedValue(t,1,this.kCheckSumTotal),e=r-1;e>=0;e--)s+=i.weightedValue(n[e],r-e+1,i.kCheckSumTotal);return[t,s%this.checkSumMod]},e.prototype._findCharacterByValue=function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},e.prototype.weightedValue=function(t,e,i){return(e%i||i)*t},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},e}(uC),yC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ko(this,dC,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var n=0;n<i.length;n++)if(t=i[n],e.shiftValuesAsciiCodes[t])e.addExtended(e.shiftValuesAsciiCodes[t]);else{var r=e._findCharacterByValue(t);e.addPattern(e.characterMap[r].pattern)}}})},e}(mC),vC=/^\d+$/,bC=Object.assign,wC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),bC(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},e.prototype.initValue=function(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},e.prototype.addCheckSum=function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},e.prototype.validate=function(t){if(vC.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!da(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},e.prototype.addPattern=function(t){for(var e,i=this,n=0;n<t.length;n++)e=i.height-i.baseHeight*t.charAt(n),i.pattern.push({width:1,y1:e,y2:i.height}),i.pattern.push(1)},e}(aC),xC=/^\d+$/,SC=/^[a-z0-9]+$/i,kC=Object.assign,CC=function(t){function e(e){t.call(this),this.encoding=e,this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.addStart=function(){},e.prototype.is=function(){},e.prototype.isCode=function(){return!1},e.prototype.move=function(){},e.prototype.pushState=function(){},e}(el),AC=function(t){function e(e,i){t.call(this,e),this.states=i,this._initMoves(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ko(this,{FNC4:"FNC4",SHIFT:98})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.move=function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},e.prototype.pushState=function(t){var e,i=this.states,n=t.value,r=n.length;if(da("C",i)){var s=n.substr(t.index).match(/\d{4,}/g);s&&(r=n.indexOf(s[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<r;)this.encoding.addPattern(this.getValue(e)),t.index++},e.prototype._initMoves=function(t){this._moves=[],da(this.FNC4,t)&&this._moves.push(this._moveFNC),da(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},e.prototype._moveFNC=function(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key},e.prototype._shiftState=function(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},e.prototype._moveState=function(){return this.encoding.addPattern(this.MOVE),!0},e}(CC),_C={};_C.A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},e.prototype.isCode=function(t){return 0<=t&&t<96},e.prototype.getValue=function(t){return t<32?t+64:t-32},e}(AC),_C.B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},e.prototype.isCode=function(t){return 32<=t&&t<128},e.prototype.getValue=function(t){return t-32},e}(AC),_C.C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{key:"C",MOVE:99,START:105})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=FC(t,e,4);return(e+4<=t.length||2===t.length)&&xC.test(i)},e.prototype.move=function(){this.encoding.addPattern(this.MOVE)},e.prototype.pushState=function(t){for(var e;(e=FC(t.value,t.index,2))&&xC.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},e.prototype.getValue=function(t){return t},e}(CC),_C.FNC4=function(t){function e(e,i){t.call(this,e),this._initSubStates(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{key:"FNC4",dependentStates:["A","B"]})},e.prototype.addStart=function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.isCode=function(t){return 128<=t&&t<256},e.prototype.pushState=function(t){var e,i=this._initSubState(t),n=this.encoding,r=i.value.length;if(t.index+=r,r<3)for(;i.index<r;i.index++)e=i.value.charCodeAt(i.index),i.state=this._getSubState(e),i.previousState!==i.state&&(i.previousState=i.state,n[i.state].move(i)),n.addPattern(n[i.state].MOVE),n.addPattern(n[i.state].getValue(e));else i.state!==i.previousState&&n[i.state].move(i),this._pushStart(i),n.pushData(i,this.subStates),t.index<t.value.length&&this._pushStart(i);t.fnc=!0,t.state=i.state},e.prototype._pushStart=function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},e.prototype._initSubState=function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e},e.prototype._initSubStates=function(t){this.subStates=[];for(var e=0;e<t.length;e++)da(t[e],this.dependentStates)&&this.subStates.push(t[e])},e.prototype._getSubState=function(t){for(var e=this,i=0;i<this.subStates.length;i++)if(e.encoding[e.subStates[i]].isCode(t))return e.subStates[i]},e.prototype._getAll=function(t,e){for(var i,n="",r=e;(i=t.charCodeAt(r++))&&this.isCode(i);)n+=String.fromCharCode(i-128);return n},e}(CC),_C.FNC1=function(t){function e(e,i){t.call(this,e),this.states=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},e.prototype.addStart=function(){this.encoding[this.startState].addStart()},e.prototype.is=function(){return da(this.key,this.states)},e.prototype.pushState=function(t){var e,i,n,r=this,s=this.encoding,o=t.value.replace(/\s/g,""),a=new RegExp("["+this.startAI+this.endAI+"]","g"),l=t.index,c={state:this.startState};s.addPattern(this.START);for(;;){if(c.index=0,(e=(n=o.charAt(l)===r.startAI?2:0)>0?r.getBySeparator(o,l):r.getByLength(o,l)).ai.length)i=l+n+e.id.length+e.ai.length;else if((i=o.indexOf(r.startAI,l+1))<0){if(l+e.ai.max+e.id.length+n<o.length)throw new Error("Separators are required after variable length identifiers");i=o.length}if(c.value=o.substring(l,i).replace(a,""),r.validate(e,c.value),s.pushData(c,r.dependentStates),i>=o.length)break;l=i,c.state!==r.startState&&(s[r.startState].move(c),c.state=r.startState),e.ai.length||s.addPattern(r.START)}t.index=t.value.length},e.prototype.validate=function(t,e){var i=e.substr(t.id.length),n=t.ai;if(!n.type&&!xC.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===n.type&&!SC.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+n.min+" characters long.");if(n.max&&n.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+n.max+" characters long.")},e.prototype.getByLength=function(t,e){for(var i,n,r=2;r<=4;r++)if(i=FC(t,e,r),n=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)))return{id:i,ai:n};this.unsupportedAIError(i)},e.prototype.unsupportedAIError=function(t){throw new Error("'"+t+"' is not a supported Application Identifier")},e.prototype.getBySeparator=function(t,e){var i=t.indexOf(this.startAI,e),n=t.indexOf(this.endAI,i),r=t.substring(i+1,n),s=this.getApplicationIdentifier(r)||this.getApplicationIdentifier(r.substr(r.length-1));return s||this.unsupportedAIError(r),{ai:s,id:r}},e.prototype.getApplicationIdentifier=function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var n=0;n<i.length;n++){if(i[n].ids&&da(t,i[n].ids))return i[n].type;if(i[n].ranges)for(var r=i[n].ranges,s=0;s<r.length;s++)if(r[s][0]<=t&&t<=r[s][1])return i[n].type}},e}(CC);var TC=function(t){function e(e){t.call(this,e),this._initStates()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},e.prototype._initStates=function(){for(var t=this,e=0;e<this.states.length;e++)t[t.states[e]]=new _C[t.states[e]](t,t.states)},e.prototype.initValue=function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},e.prototype.addData=function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},e.prototype.pushData=function(t,e){for(var i=this;i[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var n=t.state;t.state=t.previousState,t.previousState=n,t.shifted=!1}else t.previousState=t.state,t.state=i.getNextState(t,e),i[t.state].move(t)},e.prototype.addStart=function(t){this[t.state].addStart(t),this.position=1},e.prototype.addCheckSum=function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},e.prototype.addStop=function(){this.addPattern(this.STOP)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addPattern=function(t){for(var e,i=this.characterMap[t].toString(),n=0;n<i.length;n++)e=parseInt(i.charAt(n),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},e.prototype.getNextState=function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},e}(aC),OC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code 128 A",states:["A"]})},e}(TC),EC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code 128 B",states:["B"]})},e}(TC),MC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code 128 C",states:["C"]})},e}(TC),PC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code 128",states:["C","B","A","FNC4"]})},e}(TC),IC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kC(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},e}(TC);function FC(t,e,i){return t.substring(e,e+i)}var DC=Object.assign,RC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),DC(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:zC})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},e.prototype.addCheckSum=function(){var t=this,e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(var i=0;i<e.length;i++)t.checkSumLength++,t.addPattern(t.characterMap[e[i]])},e}(aC),LC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),DC(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},e}(RC),NC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),DC(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},e}(RC),BC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),DC(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},e}(RC),jC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),DC(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},e}(RC),zC={Modulo10:function(t){var e,i,n,r=[0,""],s=t.length%2;for(e=0;e<t.length;e++)r[(e+s)%2]+=parseInt(t.charAt(e),10);for(n=r[0],i=(2*r[1]).toString(),e=0;e<i.length;e++)n+=parseInt(i.charAt(e),10);return[(10-n%10)%10]},Modulo11:function(t){for(var e,i=0,n=t.length,r=0;r<n;r++)i+=(((n-r)%6||6)+1)*t.charAt(r);return 10!==(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},UC=Object.assign,$C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),UC(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},e.prototype.initValue=function(t,e,i){var n=String(t);if(12!==n.length||/\D/.test(n))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=n,this.checksum=this.calculateChecksum(),this.leftKey=n[0],this.leftPart=n.substr(1,6),this.rightPart=n.substr(7)+this.checksum},e.prototype.addData=function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},e.prototype.addSide=function(t,e){for(var i=this,n=0;n<t.length;n++)e&&parseInt(i.keyTable[e].charAt(n),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[t.charAt(n)]).reverse(),!0):i.addPieces(i.characterMap.digits[t.charAt(n)],!0)},e.prototype.addPieces=function(t,e){for(var i=this,n=0;n<t.length;n++)e?i.pattern.push({y1:0,y2:.95*i.options.height,width:t[n]}):i.pattern.push(t[n])},e.prototype.calculateChecksum=function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),n=0;n<i.length;n++)n%2?e+=parseInt(i.charAt(n),10):t+=parseInt(i.charAt(n),10);return(10-(3*t+e)%10)%10},e}(aC),HC=Object.assign,VC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),HC(this,{name:"EAN 8"})},e.prototype.initValue=function(t,e,i){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)},e}($C),qC={code11:cC,code39:pC,code39extended:fC,code93:mC,code93extended:yC,code128:PC,code128a:OC,code128b:EC,code128c:MC};function WC(t,e){var i=t.style.display;"canvas"===e&&(t.style.display="block");var n={width:t.clientWidth,height:t.clientHeight};return t.style.display=i,n}qC["gs1-128"]=IC,qC.msimod10=LC,qC.msimod11=NC,qC.msimod1010=BC,qC.msimod1110=jC,qC.postnet=wC,qC.ean8=VC,qC.ean13=$C;var XC=function(t){function e(e,i,n){void 0===n&&(n=hc),t.call(this),this.options=Ko({},this.options,i),this.element=e,this.onError=n,this._initElement(),this._initSurface(),this._setOptions(i),i&&xl(i.value)&&this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){Bo(this.element,"k-barcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return rw.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t){this._setOptions(t),this._initSurface(),this.redraw()},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype._render=function(){var t,e,i=this.options,n=i.value,r=i.text,s=ea(r.margin),o=this._getSize(),a=i.border||{},l=this.encoding,c=new Ec(0,0,o.width,o.height).unpad(a.width).unpad(i.padding),h=c.height(),u=new lu;this.contentBox=c,u.append(this._getBackground(o)),r.visible&&(h-=yl(n,{font:r.font}).height+s.top+s.bottom);try{t=l.encode(n,c.width(),h)}catch(t){return this.onError(t),u}return r.visible&&(e=n,i.checksum&&xl(l.checksum)&&(e+=" "+l.checksum),u.append(this._getText(e))),this.barHeight=h,this._bandsGroup=this._getBands(t.pattern,t.baseUnit),u.append(this._bandsGroup),u},e.prototype.exportVisual=function(){return this._render()},e.prototype._getSize=function(){var t=WC(this.element,this.options.renderAs),e=new Cc(300,100);return t.width>0&&(e.width=t.width),t.height>0&&(e.height=t.height),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},e.prototype.value=function(t){if(!xl(t))return this.options.value;this.options.value=String(t),this.redraw()},e.prototype._getBands=function(t,e){for(var i,n,r=this.contentBox,s=r.x1,o=new lu,a=0;a<t.length;a++){if(i=(n=Yo(t[a])?t[a]:{width:t[a],y1:0,y2:this.barHeight}).width*e,a%2){var l=_c.fromPoints(new Sc(s,n.y1+r.y1),new Sc(s+i,n.y2+r.y1)),c=Kh.fromRect(l,{fill:{color:this.options.color},stroke:null});o.append(c)}s+=i}return o},e.prototype._getBackground=function(t){var e=this.options,i=e.border||{},n=new Ec(0,0,t.width,t.height).unpad(i.width/2);return Kh.fromRect(n.toRect(),{fill:{color:e.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})},e.prototype._getText=function(t){var e=this.options.text,i=this._textbox=new Zu(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual},e.prototype._setOptions=function(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!qC[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new qC[this.type],this.options=Ko({},this.options,t)},e}(el);Nl(XC,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const GC=XC;var KC=function(t){function e(e,i,n){void 0===i&&(i=new _c),void 0===n&&(n={}),t.call(this,n),this.src(e),this.rect(i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Image"},e.prototype.src=function(t){return zo(t)?(this.options.set("src",t),this):this.options.get("src")},e.prototype.bbox=function(t){var e=wc(this.currentTransform(t));return this._rect.bbox(e)},e.prototype.rawBBox=function(){return this._rect.bbox()},e.prototype._containsPoint=function(t){return this._rect.containsPoint(t)},e.prototype._hasFill=function(){return this.src()},Object.defineProperties(e.prototype,i),e}(nu(sh,["rect"]));const YC=KC;var JC=Object.assign;function ZC(t,e){for(var i=[],n=0;n<t.length;)i.push(t.substring(n,n+e)),n+=e;return i}function QC(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function tA(t){return parseInt(t,2)}var eA=function(t){function e(e){t.call(this),this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},e.prototype.getNextCell=function(){for(var t=this;void 0!==this.matrix[this.row][this.column];)t.move(),(t.row<0||t.row>=t.matrix.length)&&(t.dir=-t.dir,t.startColumn-=8!==t.startColumn?2:3,t.column=t.startColumn,t.row=t.dir<0?t.matrix.length-1:0);return{row:this.row,column:this.column}},e.prototype.getNextRemainderCell=function(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},e}(el),iA=function(t){function e(e,i){t.call(this),this.dataString=e,this.version=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(el),nA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getEncodingResult=function(t,e){var i=function(t){var e,i=[],n=0,r=t;i.push(IA(r,8,5,8,e)),e=i[0].mode,r=r.substr(i[0].modeString.length);for(;r.length>0;){var s=IA(r,17,9,16,e);s.mode!==e?(e=s.mode,i.push(s),n++):i[n].modeString+=s.modeString,r=r.substr(s.modeString.length)}return i}(t),n=function(t){for(var e=0,i=0;i<t.length;i++)e+=lA[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)}(i),r=FA(n,e),s=function(t,e){for(var i="",n=0;n<t.length;n++)i+=lA[t[n].mode].encode(t[n].modeString,e);return i}(i,r);return new iA(s,r)},e}(el),rA=function(t){function e(){t.call(this),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){JC(this,{modeIndicator:"",bitsInCharacterCount:[]})},e.prototype.getVersionIndex=function(t){return t<10?0:t>26?2:1},e.prototype.getBitsCharacterCount=function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},e.prototype.getModeCountString=function(t,e){return this.modeIndicator+QC(t,this.getBitsCharacterCount(e))},e.prototype.encode=function(){},e.prototype.getStringBitsLength=function(){},e.prototype.getValue=function(){},e}(el),sA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),JC(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},e.prototype.getValue=function(t){return parseInt(t,10)},e.prototype.encode=function(t,e){var i,n=ZC(t,3),r=this.getModeCountString(t.length,e);for(i=0;i<n.length-1;i++)r+=QC(n[i],10);return r+QC(n[i],1+3*n[i].length)},e.prototype.getStringBitsLength=function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)},e}(rA),oA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),JC(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},e.prototype.getValue=function(t){return this.characters[t]},e.prototype.encode=function(t,e){var i,n=ZC(t,2),r=this.getModeCountString(t.length,e);for(i=0;i<n.length-1;i++)r+=QC(45*this.getValue(n[i].charAt(0))+this.getValue(n[i].charAt(1)),11);return r+QC(2===n[i].length?45*this.getValue(n[i].charAt(0))+this.getValue(n[i].charAt(1)):this.getValue(n[i].charAt(0)),1+5*n[i].length)},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6},e}(rA),aA=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),JC(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},e.prototype.getValue=function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error('Unsupported character in QR Code: "'+t+'".')},e.prototype.encode=function(t,e){for(var i=this.getModeCountString(t.length,e),n=0;n<t.length;n++)i+=QC(this.getValue(t.charAt(n)),8);return i},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+8*t},e}(rA),lA={};lA.numeric=new sA,lA.alphanumeric=new oA,lA.byte=new aA;var cA=function(t){function e(){t.call(this),this.initProperties(),this.mode=lA[this.encodingMode]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){JC(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},e.prototype.getEncodingResult=function(t,e){var i=this.encode(t),n=FA(this.getDataCodewordsCount(i),e),r=this.mode.getModeCountString(i.length/8,n)+i;return new iA(r,n)},e.prototype.getDataCodewordsCount=function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},e.prototype.encode=function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},e.prototype.encodeCharacter=function(t){var e=this.getBytesCount(t),i=e-1,n="";if(1===e)n=QC(t,8);else{for(var r=8-e,s=0;s<i;s++)n=QC(t>>6*s&63|128,8)+n;n=(t>>6*i|255>>r<<r).toString(2)+n}return n},e.prototype.getBytesCount=function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},e}(el),hA=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],uA="0000",pA="alphanumeric",dA={1:0},fA={0:1},gA={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},mA=[1,0,1,1,1],yA=[1,0,1],vA={L:"01",M:"00",Q:"11",H:"10"},bA=["11101100","00010001"],wA=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],xA=/^\d+/,SA=new RegExp("^[A-Z $%*+./:-]+"),kA=new RegExp("^[A-Z0-9 $%*+./:-]+"),CA=new RegExp("^[^A-Z0-9 $%*+./:-]+"),AA=[[1,0],[1,25,0]];function _A(t,e,i,n){for(var r=0;r<t.length;r++)t[r][i][n]=e}function TA(t,e,i,n){for(var r=0;r<wA.length;r++)t[r][i][n]=wA[r](i,n)?1^e:parseInt(e,10)}function OA(t,e){for(var i=[],n=t.length-2;n>=0;n--)i[n]=t[n]^e[n];return i}function EA(t,e){for(var i=[],n=0;n<t.length;n++)for(var r=0;r<e.length;r++)void 0===i[n+r]?i[n+r]=(t[n]+(e[r]>=0?e[r]:0))%255:i[n+r]=dA[fA[i[n+r]]^fA[(t[n]+e[r])%255]];return i}function MA(t,e){var i=[],n=t.length-1;do{i[n]=fA[(t[n]+e)%255],n--}while(void 0!==t[n]);return i}function PA(t,e){var i,n,r=AA[e-1],s=new Array(e).concat(t),o=new Array(s.length-r.length).concat(r),a=t.length,l=[];for(n=0;n<a;n++)i=MA(o,dA[s[s.length-1]]),o.splice(0,1),s=OA(i,s);for(n=s.length-1;n>=0;n--)l[e-1-n]=QC(s[n],8);return l}function IA(t,e,i,n,r){var s,o,a=xA.exec(t),l=a?a[0]:"",c=SA.exec(t),h=c?c[0]:"",u=kA.exec(t),p=u?u[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=i&&!kA.test(t.charAt(l.length)))?(s="numeric",o=l):p&&(t.length===p.length||p.length>=n||r===pA)?(s=pA,o=l||h):(s="byte",o=p?p+CA.exec(t.substring(p.length))[0]:CA.exec(t)[0]),{mode:s,modeString:o}}function FA(t,e){var i=0,n=hA.length-1,r=Math.floor(hA.length/2);do{t<hA[r][e].totalDataCodewords?n=r:i=r,r=i+Math.floor((n-i)/2)}while(n-i>1);return t<=hA[i][e].totalDataCodewords?r+1:n+1}function DA(t,e,i){var n=tA(e),r=e.length-1,s=t<<r,o=QC(t,i-r),a=function(t,e){var i=e.toString(2).length,n=t.toString(2).length,r=t;do{n=(r^=e<<n-i).toString(2).length}while(n>=i);return r}(s,n);return a=o+QC(a,r)}function RA(t,e){return parseInt(t.charAt(e),10)}function LA(t,e){var i,n,r=t[0],s=0,o=e.length;for(i=0,n=8;i<=8;i++)6!==i&&_A(t,RA(e,o-1-s++),i,n);for(i=8,n=7;n>=0;n--)6!==n&&_A(t,RA(e,o-1-s++),i,n);for(s=0,n=r.length-1,i=8;n>=r.length-8;n--)_A(t,RA(e,o-1-s++),i,n);for(_A(t,1,r.length-8,8),i=r.length-7,n=8;i<r.length;i++)_A(t,RA(e,o-1-s++),i,n)}function NA(t,e){for(var i,n,r,s=t[0].length,o=s-11,a=s-11,l=0;l<e.length;l++)i=Math.floor(l/3),n=l%3,_A(t,r=RA(e,e.length-l-1),0+i,o+n),_A(t,r,a+n,0+i)}function BA(t,e,i,n){for(var r,s=e.length+2,o=e.length+1,a=0;a<e.length;a++)for(var l=a;l<s-a;l++)_A(t,r=e[a],i+l,n+a),_A(t,r,i+a,n+l),_A(t,r,i+o-l,n+o-a),_A(t,r,i+o-a,n+o-l)}function jA(t,e,i,n){var r=i,s=n,o=t[0];do{_A(t,0,r,n),_A(t,0,i,s),r+=e[0],s+=e[1]}while(r>=0&&r<o.length)}function zA(t,e,i,n,r){e[t][n]=(e[t][n]<<1^r)%128,93===e[t][n]&&(i[t]+=40)}function UA(t,e,i,n,r,s){i[t][s]===n?r[t][s]++:(i[t][s]=n,r[t][s]>=5&&(e[t]+=3+r[t][s]-5),r[t][s]=1)}function $A(t,e){var i=Math.floor(t/e*100),n=i%5,r=Math.abs(i-n-50),s=Math.abs(i+5-n-50);return 10*Math.min(r/5,s/5)}function HA(t,e,i){var n=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new cA:new nA}(i),r=n.getEncodingResult(t,e),s=r.version,o=hA[s-1][e],a=function(t,e){for(var i,n,r,s,o,a=0,l=[],c=[],h=e.groups,u=0;u<h.length;u++){r=h[u][0];for(var p=0;p<r;p++){n=h[u][1],i=[],s=[];for(var d=1;d<=n;d++)o=t.substring(a,a+8),i.push(o),s[n-d]=tA(o),a+=8;l.push(i),c.push(PA(s,e.errorCodewordsPerBlock))}}return[l,c]}(function(t,e){for(var i=8*e,n=0,r=0,s=t;s.length<i&&n<uA.length;)s+=uA.charAt(n++);for(s.length%8!=0&&(s+=new Array(9-s.length%8).join("0"));s.length<i;)s+=bA[r],r^=1;return s}(r.dataString,o.totalDataCodewords),o),l=function(t){for(var e=[],i=17+4*t,n=0;n<wA.length;n++){e[n]=new Array(i);for(var r=0;r<i;r++)e[n][r]=new Array(i)}return e}(s);!function(t){var e=t[0].length;BA(t,mA,0,0),jA(t,[-1,-1],7,7),BA(t,mA,e-7,0),jA(t,[1,-1],e-8,7),BA(t,mA,0,e-7),jA(t,[-1,1],7,e-8)}(l),function(t,e){if(!(e<2)){var i,n,r=t[0],s=r.length,o=Math.floor(e/7),a=[6],l=0;for((i=gA[e])?n=(s-13-i)/o:i=n=(s-13)/(o+1),a.push(a[l++]+i);a[l]+n<s;)a.push(a[l++]+n);for(var c=0;c<a.length;c++)for(var h=0;h<a.length;h++)void 0===r[a[c]][a[h]]&&BA(t,yA,a[c]-2,a[h]-2)}}(l,s),function(t){for(var e=1,i=t[0].length,n=8;n<i-8;n++)_A(t,e,6,n),_A(t,e,n,6),e^=1}(l),s>=7&&NA(l,QC(0,18)),LA(l,QC(0,15)),function(t,e){for(var i,n,r,s=new eA(t[0]),o=0;o<e.length;o++)for(i=e[o],n=0;i.length>0;){for(var a=0;a<i.length;a++)for(var l=0;l<8;l++)r=s.getNextCell(),TA(t,i[a][n].charAt(l),r.row,r.column);for(n++;i[0]&&n===i[0].length;)i.splice(0,1)}for(;r=s.getNextRemainderCell();)TA(t,0,r.row,r.column)}(l,a);var c=function(t){var e,i,n=[],r=[],s=[],o=[],a=[],l=t[0].length;for(i=0;i<t.length;i++)n[i]=0,s[i]=0,a[i]=[0,0],o[i]=[0,0],r[i]=[];for(var c=0;c<l;c++)for(var h=0;h<l;h++)for(var u=0;u<t.length;u++)e=t[u],s[u]+=parseInt(e[c][h],10),r[u][0]===e[c][h]&&c+1<l&&h-1>=0&&e[c+1][h]===r[u][0]&&e[c+1][h-1]===r[u][0]&&(n[u]+=3),zA(u,o,n,0,e[c][h]),zA(u,o,n,1,e[h][c]),UA(u,n,r,e[c][h],a,0),UA(u,n,r,e[h][c],a,1);var p,d=l*l,f=Number.MAX_VALUE;for(i=0;i<n.length;i++)n[i]+=$A(s[i],d),n[i]<f&&(f=n[i],p=i);return p}(l),h=l[c];return s>=7&&NA([h],function(t){return DA(t,"1111100100101",18)}(s)),LA([h],function(t){var e,i="";if(0===tA(t))return"101010000010010";e=DA(tA(t),"10100110111",15);for(var n=0;n<e.length;n++)i+=e.charAt(n)^"101010000010010".charAt(n);return i}(vA[e]+QC(c,3))),h}!function(){var t,e;for(e=1;e<255;e++)(t=2*fA[e-1])>255&&(t^=285),fA[e]=t,dA[t]=e;t=2*fA[e-1]^285,fA[e]=t,fA[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=AA[t-1],i=[t,0];AA[t]=EA(e,i)}}();var VA=Math.round,qA=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],WA=[[0,1],[1,1],[1,0]],XA=200,GA="L",KA="#fff",YA="#000",JA=1,ZA=7,QA=function(t){function e(e,i,n){void 0===n&&(n=hc),t.call(this),this.options=Ko({},this.options,i),this.element=e,this.wrapper=this.element,this.onError=n,this._initElement(),this._initSurface(),this.setOptions(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){Bo(this.element,"k-qrcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return rw.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){var t=this.element,e=t.clientWidth,i=t.clientHeight,n={width:0,height:0};return e>0&&(n.width=e),i&&(n.height=i),n},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.exportVisual=function(){return this._render()},e.prototype._render=function(){var t,e,i,n,r,s=this._value,o=this.options.border||{},a=this.options.padding||0,l=o.width||0;o.width=l;var c=new lu;try{s&&(i=HA(s,this.options.errorCorrection,this.options.encoding),r=(n=this._getSize())-2*(l+a),t=this._calculateBaseUnit(r,i.length),e=l+a+(r-i.length*t)/2,c.append(this._renderBackground(n,o)),c.append(this._renderMatrix(i,t,e)),this._hasCustomLogo()?c.append(this._renderLogo(n,t)):this._isSwiss()&&c.append(this._renderSwissCode(n,t)))}catch(t){this.onError(t)}return c},e.prototype._renderLogo=function(t,e){var i,n=VA(t/2),r=this._getLogoSize(e*ZA),s=this.options.overlay.imageUrl,o={x:n-r.width/2,y:n-r.height/2};return i=new _c(new Sc(o.x,o.y),new Cc(r.width,r.height)),new YC(s,i)},e.prototype._renderSwissCode=function(t,e){var i=this._getLogoSize(e*ZA),n=(i=Math.max(i.width,i.height))/4,r=n/2,s=t/2,o={},a=new lu;return o.x=o.y=Math.ceil(s-e-i/2),a.append(this._renderShape(o,Math.ceil(i+2*e),WA,"#fff")),o.x=o.y=s-i/2,a.append(this._renderShape(o,i,WA,this.options.color)),o.x=s+r-i/2,o.y=s+r+n-i/2,a.append(this._renderShape(o,n,qA,"#fff")),a},e.prototype._renderShape=function(t,e,i,n){var r=new Yh({fill:{color:n},stroke:null});r.moveTo(t.x,t.y);for(var s=0;s<i.length;s++)r.lineTo(t.x+e*i[s][0],t.y+e*i[s][1]);return r.close(),r},e.prototype._getSize=function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=WC(this.element,this.options.renderAs),i=Math.min(e.width,e.height);t=i>0?i:XA}return t},e.prototype._calculateBaseUnit=function(t,e){var i=Math.floor(t/e);if(i<JA){var n=Math.ceil(e*JA);this.onError(new Error("Insufficient size for QR Code: the current size is "+t+"px and the minimum size is "+n+"px."))}else i*e>=t&&i-1>=JA&&i--;return i},e.prototype._renderMatrix=function(t,e,i){for(var n=new Yh({fill:{color:this.options.color},stroke:null}),r=0;r<t.length;r++)for(var s=i+r*e,o=0;o<t.length;){for(;0===t[r][o]&&o<t.length;)o++;if(o<t.length){for(var a=o;1===t[r][o];)o++;var l=VA(i+a*e),c=VA(s),h=VA(i+o*e),u=VA(s+e);n.moveTo(l,c).lineTo(l,u).lineTo(h,u).lineTo(h,c).close()}}return n},e.prototype._renderBackground=function(t,e){var i=new Ec(0,0,t,t).unpad(e.width/2);return Kh.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})},e.prototype.setOptions=function(t){var e=t||{};this.options=JC(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},e.prototype.value=function(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()},e.prototype._hasCustomLogo=function(){return Boolean(this.options.overlay.imageUrl)},e.prototype._isSwiss=function(){return"swiss"===this.options.overlay.type},e.prototype._getLogoSize=function(t){var e=this.options.overlay.width,i=this.options.overlay.height;return e||i?e&&!i?i=e:!e&&i&&(e=i):e=i=t,{width:e,height:i}},e}(el);Nl(QA,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:GA,background:KA,color:YA,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const t_=QA;var e_={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function i_(t){return t*t}var n_=Math,r_=n_.abs,s_=n_.atan,o_=n_.atan2,a_=n_.cos,l_=n_.sin,c_=n_.tan,h_=function(t){function e(e,i){t.call(this),this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){Ko(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},e.prototype.toArray=function(){return[this.lat,this.lng]},e.prototype.equals=function(t){return t&&t.lat===this.lat&&t.lng===this.lng},e.prototype.clone=function(){return new e(this.lat,this.lng)},e.prototype.round=function(t){return this.lng=Il(this.lng,t),this.lat=Il(this.lat,t),this},e.prototype.wrap=function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},e.prototype.distanceTo=function(t,e){return this.greatCircleTo(t,e).distance},e.prototype.destination=function(t,i,n){var r=Pl(i),s=n||e_.WGS84,o=Pl(this.lat),a=Pl(this.lng),l=t/s.a,c=n_.asin(l_(o)*a_(l)+a_(o)*l_(l)*a_(r)),h=a+o_(l_(r)*l_(l)*a_(o),a_(l)-l_(o)*l_(c));return new e(Sl(c),Sl(h))},e.prototype.greatCircleTo=function(t,i){var n=e.create(n),r=i||e_.WGS84;if(!n||this.clone().round(8).equals(n.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var s,o,a,l,c,h,u,p,d=r.a,f=r.b,g=r.f,m=Pl(n.lng-this.lng),y=s_((1-g)*c_(Pl(this.lat))),v=l_(y),b=a_(y),w=s_((1-g)*c_(Pl(n.lat))),x=l_(w),S=a_(w),k=m,C=this.DISTANCE_ITERATIONS,A=!1;!A&&C-- >0;){o=l_(k),a=a_(k),l=n_.sqrt(i_(S*o)+i_(b*x-v*S*a)),p=o_(l,h=v*x+b*S*a);var _=b*S*o/l;u=0,0!==(c=1-i_(_))&&(u=h-2*v*x/c),s=k;var T=g/16*c*(4+g*(4-3*c));k=m+(1-T)*g*_*(p+T*l*(u+T*h*(2*i_(u)-1))),A=r_(k-s)<=this.DISTANCE_CONVERGENCE}var O=c*(i_(d)-i_(f))/i_(f),E=1+O/16384*(4096+O*(O*(320-175*O)-768)),M=O/1024*(256+O*(O*(74-47*O)-128)),P=M*l*(u+M/4*(h*(2*i_(u)-1)-M/6*u*(4*i_(l)-3)*(4*i_(u)-3))),I=o_(S*o,b*x-v*S*a),F=o_(b*o,-v*S+b*x*a);return{distance:Il(f*E*(p-P),this.DISTANCE_PRECISION),azimuthFrom:Sl(I),azimuthTo:Sl(F)}},e.prototype.toString=function(){return String(this.lat)+","+String(this.lng)},e.fromLngLat=function(t){return new e(t[1],t[0])},e.fromLatLng=function(t){return new e(t[0],t[1])},e.create=function(t,i){if(xl(t))return t instanceof e?t.clone():1===arguments.length&&2===t.length?e.fromLatLng(t):new e(t,i)},e}(el),u_=Math,p_=u_.atan,d_=u_.exp,f_=u_.pow,g_=u_.sin,m_=u_.log,y_=u_.tan,v_=Sc,b_=u_.PI,w_=b_/2,x_=b_/4,S_=b_/180,k_=e_.WGS84,C_=function(t){function e(e){t.call(this),this.initProperties(),this._initOptions(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype.initProperties=function(){Ko(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},e.prototype.forward=function(t,e){var i=this,n=i.options,r=n.datum.a,s=n.centralMeridian,o=El(t.lat,-i.MAX_LAT,i.MAX_LAT),a=e?El(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,l=Pl(a-s)*r,c=i._projectLat(o);return new v_(l,c)},e.prototype._projectLat=function(t){var e=this.options.datum,i=e.e,n=e.a,r=Pl(t),s=y_(x_+r/2),o=i*g_(r),a=f_((1-o)/(1+o),i/2);return n*m_(s*a)},e.prototype.inverse=function(t,e){var i=this,n=i.options,r=n.datum.a,s=n.centralMeridian,o=t.x/(S_*r)+s,a=El(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);return e&&(o=El(o,-i.MAX_LNG,i.MAX_LNG)),new h_(a,o)},e.prototype._inverseY=function(t){var e,i=this,n=i.options.datum,r=n.a,s=n.e,o=s/2,a=d_(-t/r),l=w_-2*p_(a);for(e=0;e<=i.INVERSE_ITERATIONS;e++){var c=s*g_(l),h=f_((1-c)/(1+c),o),u=w_-2*p_(a*h)-l;if(l+=u,u_.abs(u)<=i.INVERSE_CONVERGENCE)break}return Sl(l)},e}(el);Nl(C_,{centralMeridian:0,datum:k_});var A_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ko(this,{MAX_LAT:85.0511287798})},e.prototype._projectLat=function(t){var e=this.options.datum.a,i=Pl(t),n=y_(x_+i/2);return e*m_(n)},e.prototype._inverseY=function(t){var e=this.options.datum.a,i=d_(-t/e);return Sl(w_-2*p_(i))},e}(C_),__=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forward=function(t){return new v_(t.lng,t.lat)},e.prototype.inverse=function(t){return new h_(t.y,t.x)},e}(el),T_=function(t){function e(){t.call(this);var e=this._proj=new A_,i=this.c=2*b_*e.options.datum.a;this._tm=jc().translate(.5,.5).scale(1/i,-1/i),this._itm=jc().scale(i,-i).translate(-.5,-.5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t,e,i){return this._proj.forward(t,i).transform(this._tm).scale(e||1)},e.prototype.toLocation=function(t,e,i){var n=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(n,i)},e}(el),O_=(function(t){function e(){t.call(this),this._proj=new C_}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(el),function(t){function e(){t.call(this),this._proj=new __}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(el),Object.defineProperty),E_=(Object.assign,function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}),M_=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},P_=function(t,e){e.insertBefore(t,e.firstChild)},I_=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},F_=function(t){return t&&String(t).endsWith("px")?t:String(t)+"px"},D_=function(t){var e,i=!1,n=[],r={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},o={tablet:/playbook|ipad|fire/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var l in r)if(r.hasOwnProperty(l)&&(n=t.match(r[l]))){if("windows"===l&&"plugins"in navigator)return!1;(i={}).device=l,i.tablet=R_(l,o,!1),i.browser=R_(t,a,"default"),i.name=R_(l,s),i[i.name]=!0,i.majorVersion=n[2],i.minorVersion=(n[3]||"0").replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0");break}return i};function R_(t,e,i){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(t))return n;return void 0!==i?i:t}var L_=function(){var t={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},e=N_();return e.touch&&(e.mobileOS.ios||e.mobileOS.android)?t={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:e.pointers?t={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:e.msPointers&&(t={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),t},N_=function(){var t=D_(navigator.userAgent),e=function(t){var e=!1,i=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in n)if(n.hasOwnProperty(r)&&(i=t.match(n[r]))){(e={})[r]=!0,e[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e}(navigator.userAgent),i=e.chrome,n=e.crios,r=e.mozilla,s=e.safari,o={};o.mobileOS=t,o.touch="ontouchstart"in window,o.pointers=!i&&!n&&!r&&!s&&window.PointerEvent,o.msPointers=!i&&window.MSPointerEvent,o.mouseAndTouchPresent=o.touch&&!(o.mobileOS.ios||o.mobileOS.android),o.eventCapture=document.documentElement.addEventListener;var a=document.createElement("table"),l=o.transitions=!1,c=o.transforms=!1,h="string";return["Moz","webkit","O","ms"].forEach((function(t){var e=typeof a.style[t+"Transition"]===h;if(e||typeof a.style[t+"Transform"]===h){var i=t.toLowerCase();return c={css:"ms"!==i?"-"+i+"-":"",prefix:t,event:"o"===i||"webkit"===i?i:""},e&&((l=c).event=l.event?l.event+"TransitionEnd":"transitionend"),!1}})),a=null,o.transforms=c,o.transitions=l,o.delayedClick=function(){if(o.touch){if(o.mobileOS.ios)return!0;if(o.mobileOS.android){if(!o.browser.chrome)return!0;if(o.browser.version<32)return!1;var t=document.querySelector("meta[name=viewport]");return!(t?t.getAttribute("content"):"").match(/user-scalable=no/i)}}return!1},o},B_=function(t,e){return t.bind(e)};var j_=function(t,e,i,n,r){z_(t,e,i,n,r)},z_=function(t,e,i,n,r){(No(e)?e:(e||"").split(" ")).forEach((function(e){U_(t,e,i,n,r)}))},U_=function(t,e,i,n,r){var s,o=n;i&&Wo(i)&&!n?o=i:i&&"string"==typeof i&&Wo(o)&&(s=i),t.addEventListener(e,(function(e){var i=e.target?e.target.closest(s):null;if(!s||s&&e.target&&i){var n=s?i:e.currentTarget;O_(e,"currentTarget",{value:n}),O_(e,"delegateTarget",{value:t}),o(e)}}),Boolean(r))},$_=function(t,e,i,n,r){H_(t,e,i,n,r)},H_=function(t,e,i,n){(No(e)?e:(e||"").split(" ")).forEach((function(e){V_(t,e,i,n)}))},V_=function(t,e,i,n){t.removeEventListener(e,i,Boolean(n))},q_=function(t){var e=L_(navigator.userAgent);return t.replace(/([^ ]+)/g,(function(t){return e[t]||t}))},W_=function(t,e){var i=t.prototype;i.events?e.forEach((function(t){i.events.indexOf(t)<0&&i.events.push(t)})):i.events=e},X_=function(){return Number(new Date)},G_=function(){},K_="string",Y_="function",J_=function(){this._defaultPrevented=!0},Z_=function(){return!0===this._defaultPrevented},Q_=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind()},e.prototype.bind=function(t,e,i){var n,r,s,o,a=this,l=typeof t===K_?[t]:t||[],c=typeof e===Y_;if(void 0===e){for(n in t)a.bind(n,t[n]);return a}var h=function(){var t=l[n];(o=c?e:e[t])&&(i&&(s=o,o=function(){a.unbind(t,o),s.apply(a,arguments)},o.original=s),(a._events[t]=a._events[t]||[]).push(o))};for(n=0,r=l.length;n<r;n++)h();return a},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){var i,n,r,s=this,o=typeof t===K_?[t]:t,a=typeof e===Y_;for(i=0,n=o.length;i<n;i++){var l=o[i];(r=a?e:e[l])&&(s._events[l]=s._events[l]||[]).unshift(r)}return s},e.prototype.trigger=function(t,e){var i,n,r=this,s=r._events[t];if(s){var o=e||{};for(o.sender=r,o._defaultPrevented=!1,o.preventDefault=J_,o.isDefaultPrevented=Z_,i=0,n=(s=s.slice()).length;i<n;i++)s[i].call(r,o);return!0===o._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i,n=this,r=n._events[t];if(void 0===t)n._events={};else if(r)if(e)for(i=r.length-1;i>=0;i--)r[i]!==e&&r[i].original!==e||r.splice(i,1);else n._events[t]=[];return n},e.prototype._setEvents=function(t){for(var e=this,i=(this.events||[]).length,n=0;n<i;n++){var r=e.events[n];e.options[r]&&t[r]&&(e.unbind(r,e.options[r]),e._events&&e._events[r]&&delete e._events[r])}this.bind(this.events,t)},e}(el),tT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.items=[],Bo(this.element,"k-widget k-attribution")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype.filter=function(t,e){this._extent=t,this._zoom=e,this._render()},e.prototype.add=function(t){var e=t;xl(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())},e.prototype.remove=function(t){for(var e=[],i=0;i<this.items.length;i++){var n=this.items[i];n.text!==t&&e.push(n)}this.items=e,this._render()},e.prototype.clear=function(){this.items=[],M_(this.element)},e.prototype._render=function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e],n=this._itemText(i);""!==n&&t.push(n)}t.length>0?(M_(this.element),function(t,e){var i=document.createElement("div");for(i.innerHTML=t;i.childNodes.length>0;)e.appendChild(i.childNodes[0])}(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()},e.prototype.hideElement=function(){this.element.style.display="none"},e.prototype.showElement=function(){this.element.style.display=""},e.prototype._itemText=function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),n=this._inArea(t.extent);return i&&n&&(e+=t.text),e},e.prototype._inZoomLevel=function(t,e){var i=Dl(t,-Number.MAX_VALUE),n=Dl(e,Number.MAX_VALUE);return this._zoom>i&&this._zoom<n},e.prototype._inArea=function(t){var e=!0;return t&&(e=t.contains(this._extent)),e},e}(Q_);Nl(tT,{name:"Attribution",separator:"&nbsp;|&nbsp;"});var eT={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function iT(t){var e='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+eT[t].className+'" aria-label="move '+t+'"><span class="k-icon '+eT[t].iconClass+'" /></button>';return E_(e)}var nT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var n=iT("up"),r=iT("right"),s=iT("down"),o=iT("left");this.element.appendChild(n),this.element.appendChild(r),this.element.appendChild(s),this.element.appendChild(o),Bo(this.element,"k-widget k-navigator"),j_(this.element,"click",".k-button",B_(this._click,this));var a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=B_(this._keydown,this),j_(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){$_(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,n="tabindex",r=e.getAttribute(n)||i.getAttribute(n);i.removeAttribute(n),e.setAttribute(n,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype._pan=function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},e.prototype._click=function(t){var e=0,i=0,n=t.currentTarget;n.matches(".k-navigator-n")?i=1:n.matches(".k-navigator-s")?i=-1:n.matches(".k-navigator-e")?e=1:n.matches(".k-navigator-w")&&(e=-1),this._pan(e,i),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case uc.UP:this._pan(0,1),t.preventDefault();break;case uc.DOWN:this._pan(0,-1),t.preventDefault();break;case uc.RIGHT:this._pan(1,0),t.preventDefault();break;case uc.LEFT:this._pan(-1,0),t.preventDefault()}},e}(Q_);function rT(t,e){return E_('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'"><span class="k-icon '+e+'"></span></button>')}Nl(nT,{name:"Navigator",panStep:1}),W_(nT,["pan"]);var sT="change",oT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var n=rT("in","k-i-plus"),r=rT("out","k-i-minus");this.element.appendChild(n),this.element.appendChild(r),Bo(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),j_(this.element,"click",".k-button",this._clickHandler);var s=this.element.parentNode.closest("[data-role]");this._keyroot=s||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),j_(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&$_(this.element,"click",this._clickHandler),this._keyroot&&$_(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,n="tabindex",r=e.getAttribute(n)||i.getAttribute(n);i.removeAttribute(n),e.setAttribute(n,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype._change=function(t){var e=this.options.zoomStep;this.trigger(sT,{delta:t*e})},e.prototype._click=function(t){var e=1;ha(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case uc.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case uc.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},e}(Q_);Nl(oT,{name:"ZoomControl",zoomStep:1}),W_(oT,[sT]);var aT=Math,lT=aT.max,cT=aT.min,hT=function(t){function e(e,i){t.call(this);var n=h_.create(e),r=h_.create(i);n.lng+180>r.lng+180&&n.lat+90<r.lat+90?(this.se=n,this.nw=r):(this.se=r,this.nw=n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={World:{configurable:!0}};return e.prototype.contains=function(t){var e=this.nw,i=this.se,n=Dl(t.lng,t[1]),r=Dl(t.lat,t[0]);return t&&n+180>=e.lng+180&&n+180<=i.lng+180&&r+90>=i.lat+90&&r+90<=e.lat+90},e.prototype.center=function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,n=t.lat+(e.lat-t.lat)/2;return new h_(n,i)},e.prototype.containsAny=function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},e.prototype.include=function(t){var e=this.nw,i=this.se,n=Dl(t.lng,t[1]),r=Dl(t.lat,t[0]);e.lng=cT(e.lng,n),e.lat=lT(e.lat,r),i.lng=lT(i.lng,n),i.lat=cT(i.lat,r)},e.prototype.includeAll=function(t){for(var e=0;e<t.length;e++)this.include(t[e])},e.prototype.edges=function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new h_(t.lat,e.lng),se:this.se,sw:new h_(e.lat,t.lng)}},e.prototype.toArray=function(){var t=this.nw,e=this.se;return[t,new h_(t.lat,e.lng),e,new h_(e.lat,t.lng)]},e.prototype.overlaps=function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())},e.create=function(t,i){return t instanceof e?t:t&&i?new e(t,i):t&&4===t.length&&!i?new e([t[0],t[1]],[t[2],t[3]]):void 0},i.World.get=function(){return new e([90,-180],[-90,180])},Object.defineProperties(e,i),e}(el),uT="centerChange",pT=function(t){function e(e,i){t.call(this),this.widgetService=e,this.options=Ko({},this.options,i),this.offset={x:0,y:0}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={anchor:{configurable:!0}};return e.prototype.show=function(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},e)),this.visible=!0)},e.prototype.hide=function(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){var e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}},e.prototype.destroy=function(){this.widgetService=null},Object.defineProperties(e.prototype,i),e}(el);Nl(pT,{border:{width:1},opacity:1});var dT=function(t){function e(e,i){t.call(this),this.support=N_(),this._initOptions(i),this.map=e;var n=document.createElement("div");Bo(n,"k-layer"),n.style.zIndex=this.options.zIndex,n.style.opacity=this.options.opacity,this.element=n,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._deactivate()},e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype.show=function(){this.reset(),this._activate(),this._applyExtent(!0)},e.prototype.hide=function(){this._deactivate(),this._setVisibility(!1)},e.prototype.reset=function(){this._beforeReset(),this._reset()},e.prototype._reset=function(){this._applyExtent()},e.prototype._beforeReset=function(){},e.prototype._resize=function(){},e.prototype._panEnd=function(){this._applyExtent()},e.prototype._applyExtent=function(){var t=this.options,e=this.map.zoom(),i=!xl(t.minZoom)||e>=t.minZoom,n=!xl(t.maxZoom)||e<=t.maxZoom,r=hT.create(t.extent),s=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&s)},e.prototype._setVisibility=function(t){this.element.style.display=t?"":"none"},e.prototype._activate=function(){var t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},e.prototype._deactivate=function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},e.prototype._updateAttribution=function(){var t=this.map.attribution;t&&t.add(this.options.attribution)},e.prototype._readData=function(){return this.options.data||[]},e.prototype._hasData=function(){return this._data&&this._data.length>0},e.prototype._layerIndex=function(){return(this.map.layers||[]).indexOf(this)},e}(el),fT=Math,gT=Sc;function mT(t){return Wo(t)?t:ra.compile(t)}function yT(t){return new gT(Il(t.x),Il(t.y))}function vT(t){var e=t;return"string"!=typeof t&&(e+="px"),e}var bT=function(t){function e(e,i){t.call(this,e,i),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this._view.destroy(),this._view=null},e.prototype._beforeReset=function(){var t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},e.prototype._reset=function(){t.prototype._reset.call(this),this._updateView(),this._view.reset()},e.prototype._viewType=function(){return wT},e.prototype._activate=function(){t.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=kb(this._render.bind(this),100)),this.map.bind("pan",this._pan))},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},e.prototype._updateView=function(){var t=this._view,e=this.map,i=e.extent(),n={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(n),t.zoom(e.zoom())},e.prototype._resize=function(){this._render()},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._render()},e.prototype._render=function(){this._updateView(),this._view.render()},e}(dT);Nl(bT,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var wT=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.pool=new ST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype.center=function(t){this._center=t},e.prototype.extent=function(t){this._extent=t},e.prototype.viewOrigin=function(t){this._viewOrigin=t},e.prototype.zoom=function(t){this._zoom=t},e.prototype.pointToTileIndex=function(t){return new gT(fT.floor(t.x/this.options.tileSize),fT.floor(t.y/this.options.tileSize))},e.prototype.tileCount=function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,n=this.indexToPoint(e).translate(-i.x,-i.y);return{x:fT.ceil((fT.abs(n.x)+t.width)/this.options.tileSize),y:fT.ceil((fT.abs(n.y)+t.height)/this.options.tileSize)}},e.prototype.size=function(){var t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}},e.prototype.indexToPoint=function(t){var e=t.x,i=t.y;return new gT(e*this.options.tileSize,i*this.options.tileSize)},e.prototype.subdomainText=function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},e.prototype.destroy=function(){M_(this.element),this.pool.empty()},e.prototype.reset=function(){this.pool.reset(),this.subdomainIndex=0,this.render()},e.prototype.render=function(){var t,e,i,n=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(e=0;e<n.x;e++)for(i=0;i<n.y;i++)(t=this.createTile({x:r.x+e,y:r.y+i})).visible||t.show()},e.prototype.createTile=function(t){var e=this.tileOptions(t),i=this.pool.get(this._center,e);return i.element.parentNode||this.element.append(i.element),i},e.prototype.tileOptions=function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),n=this._viewOrigin,r=i.clone().translate(-n.x,-n.y);return{index:e,currentIndex:t,point:i,offset:yT(r),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},e.prototype.wrapIndex=function(t){var e=fT.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:El(t.y,0,e-1)}},e.prototype.wrapValue=function(t,e){var i=fT.abs(t)%e;return t>=0?i:e-(0===i?e:i)},e}(el),xT=function(t){function e(e,i){t.call(this),this.id=e,this.visible=!0,this._initOptions(i),this.createElement(),this.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){var t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)},e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype.createElement=function(){var t=document.createElement("img"),e=this.options.size+"px";t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t},e.prototype.show=function(){var t=this.element;t.style.top=vT(this.options.offset.y),t.style.left=vT(this.options.offset.x);var e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},e.prototype.hide=function(){this.element.style.visibility="hidden",this.visible=!1},e.prototype.url=function(){return mT(this.options.urlTemplate)(this.urlOptions())},e.prototype.errorUrl=function(){return mT(this.options.errorUrlTemplate)(this.urlOptions())},e.prototype.urlOptions=function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},e}(el);Nl(xT,{urlTemplate:"",errorUrlTemplate:""});var ST=function(t){function e(){t.call(this),this._items=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)},e.prototype.empty=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].destroy();this._items=[]},e.prototype.reset=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].hide()},e.prototype._create=function(t){for(var e,i=this._items,n=Tl(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate),r=0;r<i.length;r++)if(i[r].id===n){e=i[r];break}return e?e.show():(e=new xT(n,t),this._items.push(e)),e},e.prototype._remove=function(t){for(var e=this._items,i=-1,n=-1,r=0;r<e.length;r++){var s=e[r].options.point.distanceTo(t);s>i&&!e[r].visible&&(n=r,i=s)}-1!==n&&(e[n].destroy(),e.splice(n,1))},e}(el);Nl(ST,{maxSize:100});var kT=Object.assign,CT="change",AT=function(t){function e(e,i){t.call(this);var n=this,r=e[0]||e;n.capture=!1;var s=L_(navigator.userAgent);r.addEventListener?(s.down.split(" ").forEach((function(t){r.addEventListener(t,B_(n._press,n),!0)})),s.up.split(" ").forEach((function(t){r.addEventListener(t,B_(n._release,n),!0)}))):(s.down.split(" ").forEach((function(t){r.attachEvent(t,B_(n._press,n))})),s.up.split(" ").forEach((function(t){r.attachEvent(t,B_(n._release,n))}))),n.bind(["press","release"],i||{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.captureNext=function(){this.capture=!0},e.prototype.cancelCapture=function(){this.capture=!1},e.prototype._press=function(t){this.trigger("press"),this.capture&&t.preventDefault()},e.prototype._release=function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())},e}(Q_),_T=function(t){function e(e){t.call(this);var i=this;i.forcedEnabled=!1,kT(i,e),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeVirtual=function(){kT(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},e.prototype.virtualSize=function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},e.prototype.outOfBounds=function(t){return t>this.max||t<this.min},e.prototype.forceEnabled=function(){this.forcedEnabled=!0},e.prototype.getSize=function(){return this.container[this.measure]},e.prototype.getTotal=function(){return this.element[this.scrollSize]},e.prototype.rescale=function(t){this.scale=t},e.prototype.update=function(t){var e=this,i=e.virtual?e._virtualMax:e.getTotal(),n=i*e.scale,r=e.getSize();(0!==i||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=r,e.total=n,e.min=Math.min(e.max,r-n),e.minScale=r/i,e.centerOffset=(n-r)/2,e.enabled=e.forcedEnabled||n>r,t||e.trigger(CT,e))},e}(Q_),TT=function(t){function e(e){t.call(this);var i=this;i.x=new _T(kT({horizontal:!0},e)),i.y=new _T(kT({horizontal:!1},e)),i.container=e.container,i.forcedMinScale=e.minScale,i.maxScale=e.maxScale||100,i.bind(CT,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rescale=function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},e.prototype.centerCoordinates=function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},e.prototype.refresh=function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(CT)},e}(Q_),OT=function(t){function e(e){t.call(this),kT(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.outOfBounds=function(){return this.dimension.outOfBounds(this.movable[this.axis])},e.prototype.dragMove=function(t){var e=this,i=e.dimension,n=e.axis,r=e.movable,s=r[n]+t;if(i.enabled){var o=t;(s<i.min&&t<0||s>i.max&&t>0)&&(o*=e.resistance),r.translateAxis(n,o),e.trigger(CT,e)}},e}(Q_),ET=function(t){function e(e){t.call(this);var i,n,r,s,o=this;kT(o,{elastic:!0},e),r=o.elastic?.5:0,s=o.movable,o.x=i=new OT({axis:"x",dimension:o.dimensions.x,resistance:r,movable:s}),o.y=n=new OT({axis:"y",dimension:o.dimensions.y,resistance:r,movable:s}),o.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(t){o.gesture=t,o.offset=kl(o.dimensions.container)},press:function(t){var e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(t){var e,r=o.gesture,a=r.center,l=t.center,c=t.distance/r.distance,h=o.dimensions.minScale,u=o.dimensions.maxScale;s.scale<=h&&c<1&&(c+=.8*(1-c)),s.scale*c>=u&&(c=u/s.scale);var p=s.x+o.offset.left,d=s.y+o.offset.top;e={x:(p-a.x)*c+l.x-p,y:(d-a.y)*c+l.y-d},s.scaleWith(c),i.dragMove(e.x),n.dragMove(e.y),o.dimensions.rescale(s.scale),o.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||n.dimension.enabled?(i.dragMove(t.x.delta),n.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(el),MT=function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"},PT=function(t){function e(e){t.call(this);var i=this;i.support=N_(),this.transformStyle=this.support.transitions.prefix+"Transform",i.element=e,i.element.style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1;var n=MT(i.x,i.y,i.scale);i.element.style[this.transformStyle]=n,i._saveCoordinates(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.translateAxis=function(t,e){this[t]+=e,this.refresh()},e.prototype.scaleTo=function(t){this.scale=t,this.refresh()},e.prototype.scaleWith=function(t){this.scale*=t,this.refresh()},e.prototype.translate=function(t){this.x+=t.x,this.y+=t.y,this.refresh()},e.prototype.moveAxis=function(t,e){this[t]=e,this.refresh()},e.prototype.moveTo=function(t){kT(this,t),this.refresh()},e.prototype.refresh=function(){var t,e=this,i=e.x,n=e.y;e.round&&(i=Math.round(i),n=Math.round(n)),(t=MT(i,n,e.scale))!==e.coordinates&&(e.element.style[this.transformStyle]=t,e._saveCoordinates(t),e.trigger(CT))},e.prototype._saveCoordinates=function(t){this.coordinates=t},e}(Q_),IT=lu,FT=function(t){function e(e,i){t.call(this,e,i),this._pan=B_(this._pan,this),this.surface=rw.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new PT(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.surface.destroy()},e.prototype._reset=function(){t.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},e.prototype._initRoot=function(){this._root=new IT,this.surface.draw(this._root)},e.prototype._beforeReset=function(){this.surface.clear(),this._initRoot()},e.prototype._resize=function(){this.surface.size(this.map.size())},e.prototype._readData=function(){var e=t.prototype._readData.call(this);return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e},e.prototype._load=function(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new DT(this.map,this.options.style,this));for(var e=new IT,i=0;i<t.length;i++){var n=this._loader.parse(t[i]);n&&e.append(n)}this._root.clear(),this._root.append(e)},e.prototype.shapeCreated=function(t){var e=!1;if(t instanceof su&&this.map.options.renderPointsAsMarkers&&(e=xl(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},e.prototype.featureCreated=function(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)},e.prototype._createMarker=function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},e.prototype._clearMarkers=function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},e.prototype._pan=function(){this._panning||(this._panning=!0,this.surface.suspendTracking())},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},e.prototype._translateSurface=function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))},e.prototype._eventArgs=function(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}},e.prototype._handler=function(t){var e=this;return function(i){i.element&&e.map.trigger(t,e._eventArgs(i))}},e.prototype._mouseenter=function(t){if(t.element){this.map.trigger("shapeMouseEnter",this._eventArgs(t));var e=t.element,i=this._tooltipAnchor(t);this.map._tooltip.show(i,this._tooltipContext(e))}},e.prototype._tooltipContext=function(t){return{type:"shape",layerIndex:this._layerIndex,className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}},e.prototype._tooltipAnchor=function(t){var e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}},e.prototype._activate=function(){t.prototype._activate.call(this),this._panHandler=B_(this._pan,this),this.map.bind("pan",this.panHandler)},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},e}(dT);Nl(FT,{autoBind:!0,zIndex:100});var DT=function(t){function e(e,i,n){t.call(this),this.observer=n,this.locator=e,this.style=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=new IT,i=!0;return"Feature"===t.type?(i=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),i&&e.children.length<2&&(e=e.children[0]),e},e.prototype._shapeCreated=function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},e.prototype._featureCreated=function(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},e.prototype._loadGeometryTo=function(t,e,i){var n,r,s=this,o=e.coordinates;switch(e.type){case"LineString":r=this._loadPolygon(t,[o],i),this._setLineFill(r);break;case"MultiLineString":for(n=0;n<o.length;n++)r=s._loadPolygon(t,[o[n]],i),s._setLineFill(r);break;case"Polygon":this._loadPolygon(t,o,i);break;case"MultiPolygon":for(n=0;n<o.length;n++)s._loadPolygon(t,o[n],i);break;case"Point":this._loadPoint(t,o,i);break;case"MultiPoint":for(n=0;n<o.length;n++)s._loadPoint(t,o[n],i)}},e.prototype._setLineFill=function(t){var e=t.segments;(e.length<4||!e[0].anchor().equals(Ol(e).anchor()))&&(t.options.fill=null)},e.prototype._loadShape=function(t,e){return this._shapeCreated(e)||t.append(e),e},e.prototype._loadPolygon=function(t,e,i){var n=this._buildPolygon(e);return n.dataItem=i,n.location=this.locator.viewToLocation(n.bbox().center()),this._loadShape(t,n)},e.prototype._buildPolygon=function(t){for(var e=new(t.length>1?Yh:Kh)(this.style),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var r=this.locator.locationToView(h_.fromLngLat(t[i][n]));0===n?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e},e.prototype._loadPoint=function(t,e,i){var n=h_.fromLngLat(e),r=this.locator.locationToView(n),s=new eu(r,10),o=new su(s,this.style);return o.dataItem=i,o.location=n,this._loadShape(t,o)},e}(el),RT=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){var e=this;if(this._data=t,this.surface.clear(),0!==t.length){var i=this.options,n=la(i.valueField),r=t.slice(0);r.sort((function(t,e){return n(e)-n(t)}));for(var s,o=this._scaleType(),a=la(this.options.locationField),l=0;l<r.length;l++){var c=r[l],h=a(c),u=n(c);if(xl(h)&&xl(u)){s||(s=new o([0,u],[i.minSize,i.maxSize])),h=h_.create(h);var p=e.map.locationToView(h),d=s.map(u),f=e._createSymbol({center:p,size:d,style:i.style,dataItem:c,location:h});f.dataItem=c,f.location=h,f.value=u,e._drawSymbol(f)}}}},e.prototype._scaleType=function(){var t=this.options.scale;return Wo(t)?t:NT[t]},e.prototype._createSymbol=function(t){var e=this.options.symbol;return Wo(e)||(e=BT[e]),e(t)},e.prototype._drawSymbol=function(t){var e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)},e.prototype._tooltipContext=function(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}},e.prototype._tooltipAnchor=function(t){var e=t.element.bbox().center();return{top:e.y,left:e.x}},e}(FT);Nl(RT,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var LT=function(t){function e(e,i){t.call(this),this._domain=e,this._range=i;var n=Math.sqrt(e[1])-Math.sqrt(e[0]),r=i[1]-i[0];this._ratio=r/n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e},e}(el),NT={sqrt:LT},BT={circle:function(t){var e=new eu(t.center,t.size/2);return new su(e,t.style)},square:function(t){var e=new Kh(t.style),i=t.size/2,n=t.center;return e.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close(),e}},jT="click",zT="mouseenter",UT="mouseleave",$T=Object.assign,HT=".k-marker",VT=function(t){function e(e,i){t.call(this,e,i),this._markerClickHandler=B_(this._markerClick,this),j_(this.element,jT,HT,this._markerClickHandler),this.items=[],this._load(this._readData())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),$_(this.element,jT,this._markerClickHandler),this.clear()},e.prototype.add=function(t){if(!No(t))return this._addOne(t);for(var e=0;e<t.length;e++)this._addOne(t[e])},e.prototype.remove=function(t){t.destroy();var e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)},e.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},e.prototype.update=function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var i={marker:t,layer:this};this.map.trigger("markerActivate",i)}},e.prototype._reset=function(){t.prototype._reset.call(this);for(var e=this.items,i=0;i<e.length;i++)this.update(e[i])},e.prototype.bind=function(t,e){var i=qT.create(t,this.options);i.dataItem=e;var n={marker:i,layer:this};if(!this.map.trigger("markerCreated",n))return this.add(i),i},e.prototype._addOne=function(t){var e=qT.create(t,this.options);return e.addTo(this),e},e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){this._data=t,this.clear();for(var e=la(this.options.locationField),i=la(this.options.titleField),n=0;n<t.length;n++){var r=t[n];this.bind({location:e(r),title:i(r)},r)}},e.prototype._markerClick=function(t){var e=t.target._kendoNode,i={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",i)},e.prototype._markerMouseEnter=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)},e.prototype._markerMouseLeave=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)},e.prototype._createMarkerEventArgs=function(t){var e=t.marker;return $T({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)},e}(dT);Nl(VT,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title"});var qT=function(t){function e(e){t.call(this),this.options=e||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.layer=null,this.unbindEvents(),this.hide()},e.prototype.addTo=function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},e.prototype.location=function(t){return t?(this.options.location=h_.create(t).toArray(),this.layer&&this.layer.update(this),this):h_.create(this.options.location)},e.prototype.showAt=function(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=F_(this._anchor.left),this.element.style.top=F_(this._anchor.top)},e.prototype.hide=function(){this.element&&(this.element.remove(),this.element=null)},e.prototype.bindEvents=function(){this.element&&(this._mouseEnterHandler=B_(this._mouseEnter,this),j_(this.element,zT,HT,this._mouseEnterHandler),this._mouseLeaveHandler=B_(this._mouseLeave,this),j_(this.element,UT,HT,this._mouseLeaveHandler))},e.prototype.unbindEvents=function(){this.element&&($_(this.element,zT,this._mouseEnterHandler),$_(this.element,UT,this._mouseLeaveHandler))},e.prototype.render=function(){if(!this.element){var t=this.options,e=this.layer,i=document.createElement("span");Bo(i,"k-marker k-icon k-i-marker-"+I_(t.shape||"pin")),t.title&&i.setAttribute("title",t.title);var n=t.attributes||{};Object.keys(n).forEach((function(t){i.setAttribute(t,n[t])})),i._kendoNode=this,i.style.zIndex=t.zIndex,this.element=i,e&&e.element.appendChild(this.element),this.bindEvents()}},e.prototype._mouseEnter=function(t){var e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())},e.prototype._tooltipContext=function(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}},e.prototype._mouseLeave=function(t){var e=this._createEventArgs(t);this.layer._markerMouseLeave(e)},e.prototype._createEventArgs=function(t){return{marker:this,originalEvent:t}},e.create=function(t,i){return t instanceof e?t:new e(Ko({},i,t))},e}(el),WT=Object.assign;function XT(t){window.requestAnimationFrame(t)}var GT=function(t){function e(){t.call(this);var e=this;e._tickProxy=B_(e._tick,e),e._started=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){},e.prototype.done=function(){},e.prototype.onEnd=function(){},e.prototype.onCancel=function(){},e.prototype.start=function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,XT(this._tickProxy)))},e.prototype.enabled=function(){return!0},e.prototype.cancel=function(){this._started=!1,this.onCancel()},e.prototype._tick=function(){var t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):XT(t._tickProxy))},e}(el),KT=function(t){function e(e){t.call(this),WT(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.done=function(){return this.timePassed()>=this.duration},e.prototype.timePassed=function(){return Math.min(this.duration,X_()-this.startDate)},e.prototype.moveTo=function(t){var e=this,i=e.movable;e.initial=i[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=X_(),e.start()},e.prototype._easeProxy=function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}},e.easeOutExpo=function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},e}(GT),YT=Object.assign,JT=function(t){t.preventDefault()},ZT=800,QT=0,tO="press",eO="hold",iO="select",nO="start",rO="move",sO="end",oO="cancel",aO="tap",lO="doubleTap",cO="release",hO="gesturechange",uO="gestureend",pO="gesturetap",dO={api:0,touch:0,mouse:9,pointer:9};function fO(t){var e,i,n,r=N_(),s=[],o=t.originalEvent||t,a=t.currentTarget,l=0;if(t.api)s.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"});else if(t.type.match(/touch/))for(e=(i=o?o.changedTouches:[]).length;l<e;l++)n=i[l],s.push({location:n,event:t,target:n.target,currentTarget:a,id:n.identifier,type:"touch"});else r.pointers||r.msPointers?s.push({location:o,event:t,target:t.target,currentTarget:a,id:o.pointerId,type:"pointer"}):s.push({id:1,event:t,target:t.target,currentTarget:a,location:t,type:"mouse"});return s}var gO=function(t){function e(e,i){t.call(this);var n=this;n.support=N_(),n.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,n.axis=e,n._updateLocationData(i),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=X_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(t){var e=this,i=t["page"+e.axis],n=X_(),r=n-e.timeStamp||1;!i&&this.invalidZeroEvents||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/r,e.timeStamp=n)},e.prototype._updateLocationData=function(t){var e=this,i=e.axis;e.location=t["page"+i],e.client=t["client"+i],e.screen=t["screen"+i]},e}(el),mO=function(t){function e(e,i,n){t.call(this),YT(this,{x:new gO("X",n.location),y:new gO("Y",n.location),type:n.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||dO[n.type],userEvents:e,target:i,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.press=function(){this._holdTimeout=setTimeout(B_(this._hold,this),this.userEvents.minHold),this._trigger(tO,this.pressEvent)},e.prototype._tap=function(t){var e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(aO,t):e._trigger(lO,t),e.userEvents._clicks=0}),300))},e.prototype._hold=function(){this._trigger(eO,this.pressEvent)},e.prototype.move=function(t){var e=this,i="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!i){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(vO.current&&vO.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(rO,t)}},e.prototype.end=function(t){this.endTime=X_(),this._finished||(this._finished=!0,this._trigger(cO,t),this._moved?this._trigger(sO,t):this.useClickAsTap||(this.supportDoubleTap?this._tap(t):this._trigger(aO,t)),clearTimeout(this._holdTimeout),this.dispose())},e.prototype.dispose=function(){var t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var e=t.indexOf(this);t.splice(e,1)},e.prototype.skip=function(){this.dispose()},e.prototype.cancel=function(){this.dispose()},e.prototype.isMoved=function(){return this._moved},e.prototype._start=function(t){clearTimeout(this._holdTimeout),this.startTime=X_(),this._moved=!0,this._trigger(nO,t)},e.prototype._trigger=function(t,e){var i=this,n=e.event,r={touch:i,x:i.x,y:i.y,target:i.target,event:n};i.userEvents.notify(t,r)&&n.preventDefault()},e.prototype._withinIgnoreThreshold=function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold},e}(el);function yO(t){for(var e=L_(navigator.userAgent).up.split(" "),i=0,n=e.length;i<n;i++)t(e[i])}var vO=function(t){function e(e,i){t.call(this);var n,r=this,s=N_();this.support=s,i=i||{},this.options=i,n=r.filter=i.filter,r.threshold=i.threshold||QT,r.minHold=i.minHold||ZT,r.touches=[],r._maxTouches=i.multiTouch?2:1,r.allowSelection=i.allowSelection,r.captureUpIfMoved=i.captureUpIfMoved,r.useClickAsTap=!i.fastTap&&!s.delayedClick(),r._clicks=0,r.supportDoubleTap=i.supportDoubleTap;var o=!s.touch||s.mouseAndTouchPresent;if(YT(r,{element:e,surface:i.global&&o?e.ownerDocument.documentElement:i.surface||e,stopPropagation:i.stopPropagation,pressed:!1}),this._surfaceMoveHandler=B_(this._move,this),j_(r.surface,q_("move"),this._surfaceMoveHandler),this._surfaceEndHandler=B_(this._end,this),j_(r.surface,q_("up cancel"),this._surfaceEndHandler),this._elementStartHandler=B_(this._start,this),j_(e,q_("down"),n,this._elementStartHandler),r.useClickAsTap&&(this._elementClickHandler=B_(this._click,this),j_(e,q_("click"),n,this._elementClickHandler)),s.pointers||s.msPointers)if(s.browser.version<11){var a="pinch-zoom double-tap-zoom";e.style["-ms-touch-action"]=i.touchAction&&"none"!==i.touchAction?a+" "+i.touchAction:a}else e.style["touch-action"]=i.touchAction||"none";if(i.preventDragEvent&&(this._elementDragStartHandler=JT,j_(e,q_("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=B_(this._select,this),j_(e,q_("mousedown"),n,this._elementSelectHandler),r.captureUpIfMoved&&s.eventCapture){var l=r.surface,c=B_(r.preventIfMoving,r);yO((function(t){l.addEventListener(t,c,!0)}))}r.bind([tO,eO,aO,lO,nO,rO,sO,cO,oO,"gesturestart",hO,uO,pO,iO],i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventIfMoving=function(t){this._isMoved()&&t.preventDefault()},e.prototype.destroy=function(){var t=this,e=this.options,i=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&this.support.eventCapture){var n=t.surface;yO((function(e){n.removeEventListener(e,t.preventIfMoving)}))}$_(t.surface,q_("move"),this._surfaceMoveHandler),$_(t.surface,q_("up cancel"),this._surfaceEndHandler),$_(i,q_("down"),this._elementStartHandler),t.useClickAsTap&&$_(i,q_("click"),this._elementClickHandler),e.preventDragEvent&&$_(i,q_("dragstart"),this._elementDragStartHandler),$_(i,q_("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},e.prototype.capture=function(){e.current=this},e.prototype.cancel=function(){this._disposeAll(),this.trigger(oO)},e.prototype.notify=function(t,e){var i,n,r,s,o,a,l,c,h=this.touches,u=t;if(this._isMultiTouch()){switch(u){case rO:u=hO;break;case sO:u=uO;break;case aO:u=pO}YT(e,{touches:h},(i=h[0],n=h[1],r=i.x.location,s=i.y.location,o=n.x.location,a=n.y.location,l=r-o,c=s-a,{center:{x:(r+o)/2,y:(s+a)/2},distance:Math.sqrt(l*l+c*c)}))}return this.trigger(u,YT(e,{type:u}))},e.prototype.press=function(t,e,i){this._apiCall("_start",t,e,i)},e.prototype.move=function(t,e){this._apiCall("_move",t,e)},e.prototype.end=function(t,e){this._apiCall("_end",t,e)},e.prototype._isMultiTouch=function(){return this.touches.length>1},e.prototype._maxTouchesReached=function(){return this.touches.length>=this._maxTouches},e.prototype._disposeAll=function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},e.prototype._isMoved=function(){return ca(this.touches,(function(t){return t.isMoved()})).length},e.prototype._select=function(t){this.allowSelection&&!this.trigger(iO,{event:t})||t.preventDefault()},e.prototype._start=function(t){var i,n,r=this,s=0,o=r.filter,a=fO(t),l=a.length,c=t.which;if(!(c&&c>1||r._maxTouchesReached()))for(e.current=null,r.currentTarget=t.currentTarget,r.stopPropagation&&t.stopPropagation();s<l&&!r._maxTouchesReached();s++)n=a[s],(i=o?n.currentTarget:r.element)&&0===i.length||(n=new mO(r,i,n),r.touches.push(n),n.press(),r._isMultiTouch()&&r.notify("gesturestart",{}))},e.prototype._move=function(t){this._eachTouch("move",t)},e.prototype._end=function(t){this._eachTouch("end",t)},e.prototype._click=function(t){var e={touch:{initialTouch:t.target,target:t.currentTarget,endTime:X_(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:t.currentTarget,event:t,type:"tap"};this.trigger("tap",e)&&t.preventDefault()},e.prototype._eachTouch=function(t,e){var i,n,r,s,o={},a=fO(e),l=this.touches;for(i=0;i<l.length;i++)o[(n=l[i]).id]=n;for(i=0;i<a.length;i++)(s=o[(r=a[i]).id])&&s[t](r)},e.prototype._apiCall=function(t,e,i,n){this[t]({api:!0,pageX:e,pageY:i,clientX:e,clientY:i,target:n||this.element,stopPropagation:G_,preventDefault:G_})},e.defaultThreshold=function(t){QT=t},e.minHold=function(t){ZT=t},e}(Q_),bO=Object.assign,wO=Math.abs,xO="change",SO="scroll",kO=function(t){function e(e){t.call(this,e);var i=this;bO(i,e),i.userEvents.bind("gestureend",i.start.bind(this)),i.tapCapture.bind("press",i.cancel.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enabled=function(){return this.movable.scale<this.dimensions.minScale},e.prototype.done=function(){return this.dimensions.minScale-this.movable.scale<.01},e.prototype.tick=function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},e.prototype.onEnd=function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)},e}(GT),CO=function(t){function e(e){t.call(this);var i=this;bO(i,e,{transition:new KT({axis:e.axis,movable:e.movable,onEnd:function(){i._end()}})}),i.tapCapture.bind("press",(function(){i.cancel()})),i.userEvents.bind("end",B_(i.start,i)),i.userEvents.bind("gestureend",B_(i.start,i)),i.userEvents.bind("tap",B_(i.onEnd,i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onCancel=function(){this.transition.cancel()},e.prototype.freeze=function(t){this.cancel(),this._moveTo(t)},e.prototype.onEnd=function(){var t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()},e.prototype.done=function(){return wO(this.velocity)<1},e.prototype.start=function(e){var i,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n.transition._started?(n.transition.cancel(),n.velocity=Math.min(e.touch[n.axis].velocity*n.velocityMultiplier,55),t.prototype.start.call(this)):n._snapBack():(i=2===e.touch.id?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(i*n.velocityMultiplier,55),-55),n.tapCapture.captureNext(),t.prototype.start.call(this)))},e.prototype.tick=function(){var t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,n=t.velocity*=i,r=t.movable[t.axis]+n;!t.elastic&&e.outOfBounds(r)&&(r=Math.max(Math.min(r,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,r)},e.prototype._end=function(){this.tapCapture.cancelCapture(),this.end()},e.prototype._snapBack=function(){var t=this,e=t.dimension,i=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(i)},e.prototype._moveTo=function(t){this.transition.moveTo({location:t,duration:500,ease:KT.easeOutExpo})},e}(GT),AO=function(t){function e(e){t.call(this,e);bO(this,e,{origin:{},destination:{},offset:{}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){this._updateCoordinates(),this.moveTo(this.origin)},e.prototype.done=function(){return wO(this.offset.y)<5&&wO(this.offset.x)<5},e.prototype.onEnd=function(){this.moveTo(this.destination),this.callback&&this.callback.call()},e.prototype.setCoordinates=function(t,e){this.offset={},this.origin=t,this.destination=e},e.prototype.setCallback=function(t){t&&Wo(t)?this.callback=t:t=void 0},e.prototype._updateCoordinates=function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},e}(GT),_O=function(t){function e(e){t.call(this);var i=this,n="x"===e.axis,r=E_('<div class="km-touch-scrollbar km-'+(n?"horizontal":"vertical")+'-scrollbar" />');bO(i,e,{element:r,elementSize:0,movable:new PT(r),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:n?"width":"height"}),i.scrollMovable.bind(xO,i.refresh.bind(i)),i.container.appendChild(r),e.alwaysVisible&&i.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.refresh=function(){var t=this,e=t.axis,i=t.dimension,n=i.size,r=t.scrollMovable,s=n/i.total,o=Math.round(-r[e]*s),a=Math.round(n*s);this.element.style.display=s>=1?"none":"",o+a>n?a=n-o:o<0&&(a+=o,o=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,o)},e.prototype.show=function(){this.element.style.opacity=.7,this.element.style.visibility="visible"},e.prototype.hide=function(){this.alwaysVisible||(this.element.style.opacity=0)},e}(el),TO=function(t){function e(e,i){t.call(this);var n=this;this.element=e,this._initOptions(i);var r=function(t){var e=D_(t);return e.ios||e.android}(navigator.userAgent);n._native=n.options.useNative&&r;var s=E_('<div class="km-scroll-header"/>');if(n._native)return Bo(e,"km-native-scroller"),P_(s,e),void bO(n,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",Bo(e,"km-scroll-wrapper"),function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(e,E_('<div class="km-scroll-container"/>')),P_(s,e);var o=e.children[1],a=new AT(e),l=new PT(o),c=new TT({element:o,container:e,forcedEnabled:n.options.zoom}),h=this.options.avoidScrolling,u=new vO(e,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:n.options.zoom,supportDoubleTap:n.options.supportDoubleTap,start:function(t){c.refresh();var e=wO(t.x.velocity),i=wO(t.y.velocity),r=2*e>=i,s=function(t,e){return t===e||function(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}(t,e)}(n.fixedContainer,t.event.target),o=2*i>=e;!s&&!h(t)&&n.enabled&&(c.x.enabled&&r||c.y.enabled&&o)?u.capture():u.cancel()}}),p=new ET({movable:l,dimensions:c,userEvents:u,elastic:n.options.elastic}),d=new kO({movable:l,dimensions:c,userEvents:u,tapCapture:a}),f=new AO({moveTo:function(t){n.scrollTo(t.x,t.y)}});l.bind(xO,(function(){n.scrollTop=-l.y,n.scrollLeft=-l.x,n.trigger(SO,{scrollTop:n.scrollTop,scrollLeft:n.scrollLeft})})),n.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),j_(e,"DOMMouseScroll mousewheel",this._wheelScrollHandler)),bO(n,{movable:l,dimensions:c,zoomSnapBack:d,animatedScroller:f,userEvents:u,pane:p,tapCapture:a,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),n._initAxis("x"),n._initAxis("y"),n._wheelEnd=function(){n._wheel=!1,n.userEvents.end(0,n._wheelY)},c.refresh(),n.options.pullToRefresh&&n._initPullToRefresh()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype._wheelScroll=function(t){if(!t.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=function(t){var e,i=t.originalEvent||t,n=i.wheelDeltaY;return i.wheelDelta?(void 0===n||n)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e}(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}},e.prototype.makeVirtual=function(){this.dimensions.y.makeVirtual()},e.prototype.virtualSize=function(t,e){this.dimensions.y.virtualSize(t,e)},e.prototype.height=function(){return this.dimensions.y.size},e.prototype.scrollHeight=function(){return this.scrollElement.scrollHeight},e.prototype.scrollWidth=function(){return this.scrollElement.scrollWidth},e.prototype._resize=function(){this._native||this.contentResized()},e.prototype.setOptions=function(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()},e.prototype.reset=function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},e.prototype.contentResized=function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},e.prototype.zoomOut=function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.scrollTo=function(t,e){this._native?(this.scrollElement.scrollLeft(wO(t)),this.scrollElement.scrollTop(wO(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},e.prototype.animatedScrollTo=function(t,e,i){var n,r;this._native?this.scrollTo(t,e):(n={x:this.movable.x,y:this.movable.y},r={x:t,y:e},this.animatedScroller.setCoordinates(n,r),this.animatedScroller.setCallback(i),this.animatedScroller.start())},e.prototype.pullHandled=function(){},e.prototype.destroy=function(){var t=this.element;$_(t,"DOMMouseScroll mousewheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},e.prototype._scale=function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},e.prototype._initPullToRefresh=function(){},e.prototype._dragEnd=function(){},e.prototype._paneChange=function(){},e.prototype._initAxis=function(t){var e=this,i=e.movable,n=e.dimensions[t],r=e.tapCapture,s=e.pane[t],o=new _O({axis:t,movable:i,dimension:n,container:e.element,alwaysVisible:e.options.visibleScrollHints});n.bind(xO,(function(){o.refresh()})),s.bind(xO,(function(){o.show()})),e[t+"inertia"]=new CO({axis:t,paneAxis:s,movable:i,tapCapture:r,userEvents:e.userEvents,dimension:n,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){o.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})},e}(Q_);Nl(TO,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),W_(TO,["pull",SO,"resize"]);var OO=function(t,e){void 0===e&&(e={}),this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)};OO.prototype.notify=function(t,e){this.widget&&this.widget.trigger(t,e)};const EO=OO;var MO=Math,PO=MO.min,IO=MO.pow,FO=Sc,DO="marker",RO="DOMMouseScroll mousewheel",LO={bubble:RT,shape:FT,tile:bT};function NO(t){var e=[];if(t)for(var i=I_(t).split("-"),n=0;n<i.length;n++)e.push("k-pos-"+i[n]);return e.join(" ")}LO.marker=VT;var BO=function(t){function e(e,i,n,r){void 0===i&&(i={}),void 0===n&&(n={}),void 0===r&&(r={}),t.call(this),this._init(e,i,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),No(this.markers)?this.markers.forEach((function(t){t.destroy()})):this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();$_(this.element,RO,this._mousewheelHandler),t.prototype.destroy.call(this)},e.prototype._init=function(t,e,i,n){void 0===e&&(e={}),void 0===i&&(i={}),void 0===n&&(n={}),this.support=N_(),this.context=n,this.initObserver(n),this.initServices(n),this._notifyObserver("init"),this._initOptions(e),this._setEvents(e),this.crs=new T_,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheelHandler=this._mousewheel.bind(this),j_(this.element,RO,this._mousewheelHandler)},e.prototype._initOptions=function(t){this.options=Ko({},this.options,t)},e.prototype._initElement=function(t){this.element=t,Bo(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),M_(t);var e=E_("<div />");this.element.appendChild(e)},e.prototype.initServices=function(t){void 0===t&&(t={}),this.widgetService=new EO(this,t)},e.prototype.initObserver=function(t){void 0===t&&(t={}),this.observers=[],this.addObserver(t.observer)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(e,i){void 0===i&&(i={}),i.sender=this;for(var n=this.observers,r=!1,s=0;s<n.length;s++)n[s].trigger(e,i)&&(r=!0);return r||t.prototype.trigger.call(this,e,i),r},e.prototype._notifyObserver=function(t,e){void 0===e&&(e={}),e.sender=this;for(var i=this.observers,n=!1,r=0;r<i.length;r++)i[r].trigger(t,e)&&(n=!0);return n},e.prototype.zoom=function(t){var e,i=this.options;if(xl(t)){var n=MO.round(El(t,i.minZoom,i.maxZoom));i.zoom!==n&&(i.zoom=n,this.widgetService.notify("zoomChange",{zoom:i.zoom}),this._reset()),e=this}else e=i.zoom;return e},e.prototype.center=function(t){var e;if(t){var i=h_.create(t),n=h_.create(this.options.center);i.equals(n)||(this.options.center=i.toArray(),this.widgetService.notify(uT,{center:this.options.center}),this._reset()),e=this}else e=h_.create(this.options.center);return e},e.prototype.extent=function(t){var e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e},e.prototype.setOptions=function(t){void 0===t&&(t={});var e=this.element;this.destroy(),M_(e),this._init(e,t,{},this.context),this._reset()},e.prototype.locationToLayer=function(t,e){var i=!this.options.wraparound,n=h_.create(t);return this.crs.toPoint(n,this._layerSize(e),i)},e.prototype.layerToLocation=function(t,e){var i=!this.options.wraparound,n=FO.create(t);return this.crs.toLocation(n,this._layerSize(e),i)},e.prototype.locationToView=function(t){var e=h_.create(t),i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(i.scale(-1))},e.prototype.viewToLocation=function(t,e){var i=this.locationToLayer(this._getOrigin(),e),n=FO.create(t).clone().translateWith(i);return this.layerToLocation(n,e)},e.prototype.eventOffset=function(t){var e,i,n=kl(this.element);if(t.x&&t.x.location||t.y&&t.y.location)e=t.x.location-n.left,i=t.y.location-n.top;else{var r=t.originalEvent||t;e=Dl(r.pageX,r.clientX)-n.left,i=Dl(r.pageY,r.clientY)-n.top}return new Sc(e,i)},e.prototype.eventToView=function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},e.prototype.eventToLayer=function(t){return this.locationToLayer(this.eventToLocation(t))},e.prototype.eventToLocation=function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},e.prototype.viewSize=function(){var t=this.element,e=this._layerSize(),i=t.clientWidth;return this.options.wraparound||(i=PO(e,i)),{width:i,height:PO(e,t.clientHeight)}},e.prototype.exportVisual=function(){return this._reset(),!1},e.prototype.hideTooltip=function(){this._tooltip&&this._tooltip.hide()},e.prototype._setOrigin=function(t,e){var i,n=this.viewSize(),r=this._origin=h_.create(t);return(i=this.locationToLayer(r,e)).x+=n.width/2,i.y+=n.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this.widgetService.notify(uT,{center:this.options.center}),this},e.prototype._getOrigin=function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},e.prototype._setExtent=function(t){var e=hT.create(t),i=e.se.clone();this.options.wraparound&&i.lng<0&&t.nw.lng>0&&(i.lng=180+(180+i.lng));var n=new hT(e.nw,i);this.center(n.center());var r,s=this.element.clientWidth,o=this.element.clientHeight;for(r=this.options.maxZoom;r>=this.options.minZoom;r--){var a=this.locationToLayer(n.nw,r),l=this.locationToLayer(n.se,r),c=MO.abs(l.x-a.x),h=MO.abs(l.y-a.y);if(c<=s&&h<=o)break}this.zoom(r)},e.prototype._getExtent=function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var n=this.layerToLocation(e);return new hT(t,n)},e.prototype._zoomAround=function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},e.prototype._initControls=function(){var t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))},e.prototype._createControlElement=function(t,e){var i=t.position||e,n="."+NO(i).replace(" ","."),r=this.element.querySelector(".k-map-controls"+n)||[];if(0===r.length){var s=document.createElement("div");Bo(s,"k-map-controls "+NO(i)),r=s,this.element.appendChild(r)}var o=document.createElement("div");return r.appendChild(o),o},e.prototype._createAttribution=function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new tT(e,t)},e.prototype._createNavigator=function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new nT(e,t);this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)},e.prototype._navigatorPan=function(t){var e=this.scroller,i=e.scrollLeft+t.x,n=e.scrollTop-t.y,r=this._virtualSize,s=this.element.clientWidth,o=this.element.clientHeight;i=El(i,r.x.min,r.x.max-s),n=El(n,r.y.min,r.y.max-o),this.scroller.one("scroll",B_(this._scrollEnd,this)),this.scroller.scrollTo(-i,-n)},e.prototype._navigatorCenter=function(){this.center(this.options.center)},e.prototype._createZoomControl=function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new oT(e,t);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)},e.prototype._zoomControlChange=function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},e.prototype._initScroller=function(){var t=this.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new TO(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",B_(this._scroll,this)),i.bind("scrollEnd",B_(this._scrollEnd,this)),i.userEvents.bind("gesturestart",B_(this._scaleStart,this)),i.userEvents.bind("gestureend",B_(this._scale,this)),i.userEvents.bind("doubleTap",B_(this._doubleTap,this)),i.userEvents.bind("tap",B_(this._tap,this)),this.scrollElement=i.scrollElement},e.prototype._initLayers=function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var n=t[i],r=this._createLayer(n);e.push(r)}},e.prototype._createLayer=function(t){var e=t.type||"shape",i=this.options.layerDefaults[e],n=Ko({},e===DO?this.options.markerDefaults:i,t),r=new(0,LO[e])(this,n);return e===DO&&(this.markers=r),r},e.prototype._createTooltip=function(){return new pT(this.widgetService,this.options.tooltip)},e.prototype._initMarkers=function(){(this.options.layers||[]).filter((function(t){return t&&t.type===DO})).length>0||(this.markers=new VT(this,this.options.markerDefaults),this.markers.add(this.options.markers))},e.prototype._scroll=function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,n=new Sc(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=n.x,e.y+=n.y,this._scrollOffset=n,this._tooltip.offset=n,this.hideTooltip(),this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},e.prototype._scrollEnd=function(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=X_(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))},e.prototype._panComplete=function(){return X_()-(this._panEndTimestamp||0)>50},e.prototype._scaleStart=function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},e.prototype._scale=function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),n=new Sc(t.center.x,t.center.y),r=this.viewToLocation(n,i),s=this.locationToLayer(r,i).translate(-n.x,-n.y);this._zoomAround(s,i),this.trigger("zoomEnd",{originalEvent:t})},e.prototype._scaleToZoom=function(t){var e=this._layerSize()*t/this.options.minSize,i=MO.log(e)/MO.log(2);return MO.round(i)},e.prototype._reset=function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")},e.prototype._resetScroller=function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,n=this._layerSize(),r=this.extent().nw,s=this.locationToLayer(r).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();var o=this.zoom();t.dimensions.forcedMinScale=IO(2,this.options.minZoom-o),t.dimensions.maxScale=IO(2,this.options.maxZoom-o);var a={min:-s.x,max:n-s.x},l={min:-s.y,max:n-s.y};if(this.options.wraparound&&(a.max=20*n,a.min=-a.max),!1===this.options.pannable){var c=this.viewSize();a.min=l.min=0,a.max=c.width,l.max=c.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(a.min,a.max),i.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}},e.prototype._renderLayers=function(){},e.prototype._layerSize=function(t){var e=Dl(t,this.options.zoom);return this.options.minSize*IO(2,e)},e.prototype._tap=function(t){if(this._panComplete()){var e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}},e.prototype._doubleTap=function(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+1,i=this.eventOffset(t),n=this.viewToLocation(i),r=this.locationToLayer(n,e).translate(-i.x,-i.y);this._zoomAround(r,e),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._mousewheel=function(t){t.preventDefault();var e=Ca(t)>0?-1:1,i=this.options,n=this.zoom(),r=El(n+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&r!==n&&!this.trigger("zoomStart",{originalEvent:t})){var s=this.eventOffset(t),o=this.viewToLocation(s),a=this.locationToLayer(o,r).translate(-s.x,-s.y);this._zoomAround(a,r),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._toDocumentCoordinates=function(t){var e=kl(this.element);return{left:Il(t.x+e.left),top:Il(t.y+e.top)}},e}(Q_);Nl(BO,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),W_(BO,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const jO=BO;var zO=1.5,UO=.4,$O="#000",HO="Arial, Helvetica, sans-serif",VO="12px "+HO,qO="16px "+HO,WO="transparent",XO="#fff",GO=function(){return{icon:{border:{width:1}},label:{font:VO,padding:3},line:{length:10,width:2},visible:!0}},KO=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:XO,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}},YO=function(){return{gap:zO,spacing:UO,target:{color:"#ff0000"}}},JO=function(){return{gap:.5,line:{color:$O,width:1},spacing:UO}},ZO=function(t){return{visible:!0,labels:{font:"11px Arial, Helvetica, sans-serif"},overlay:t.gradients?{}:{gradient:"none"},area:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},rangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalRangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},bar:{gap:zO,spacing:UO},boxPlot:KO(),bubble:{border:{width:0},labels:{background:WO},opacity:.6},bullet:YO(),candlestick:{border:{_brightness:.8,width:1},downColor:XO,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:$O,width:1},spacing:.3},column:{gap:zO,spacing:UO},heatmap:{labels:{color:"",background:WO,visible:!0},highlight:{border:{width:0}}},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},donut:{margin:1},funnel:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},horizontalWaterfall:JO(),line:{width:2},notes:GO(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3},radarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},radarLine:{markers:{visible:!1},width:2},polarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},polarLine:{markers:{visible:!1},width:2},rangeBar:{gap:zO,spacing:UO},rangeColumn:{gap:zO,spacing:UO},scatterLine:{width:1},verticalArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalBoxPlot:KO(),verticalBullet:YO(),verticalLine:{width:2},waterfall:JO()}},QO=function(t){return void 0===t&&(t={}),{axisDefaults:{labels:{font:VO},notes:GO(),title:{font:qO,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:ZO(t),title:{font:qO},subtitle:{font:VO},legend:{labels:{font:VO}}}};class tE{constructor(){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"store",{})}push(t){this.store=t}set(t,e){for(var i=this.store,n=t.split("."),r=n.shift();n.length>0;)i=i[r]=i[r]||{},r=n.shift();i[r]=e}}function eE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var iE=t=>"".concat(t.fontSize," ").concat(t.fontFamily);class nE extends tE{constructor(){super(...arguments),eE(this,"loaded",!1),eE(this,"element",null),eE(this,"currentAccentColor",void 0)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.readTheme()||this.readDefaultTheme(),this.loaded=!0}readTheme(){this.createElement();var t=this.queryColor("accent"),e=this.queryColor("accent-contrast");if(this.loaded&&this.currentAccentColor&&this.currentAccentColor===t)return!0;var i=t!==e;try{i&&(this.currentAccentColor=t,this.push(QO()),this.setColors(),this.setFonts(),this.setSeriesColors())}finally{this.destroyElement()}return i}readDefaultTheme(){this.push(Object.assign({},QO(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]}))}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--accent"></div>\n    <div class="k-var--accent-contrast"></div>\n    <div class="k-var--base"></div>\n    <div class="k-var--background"></div>\n\n    <div class="k-var--normal-background"></div>\n    <div class="k-var--normal-text-color"></div>\n    <div class="k-var--hover-background"></div>\n    <div class="k-var--hover-text-color"></div>\n    <div class="k-var--selected-background"></div>\n    <div class="k-var--selected-text-color"></div>\n    <div class="k-var--chart-error-bars-background"></div>\n    <div class="k-var--chart-notes-background"></div>\n    <div class="k-var--chart-notes-border"></div>\n    <div class="k-var--chart-notes-lines"></div>\n    <div class="k-var--chart-crosshair-background"></div>\n\n    <div class="k-var--chart-inactive"></div>\n    <div class="k-var--chart-major-lines"></div>\n    <div class="k-var--chart-minor-lines"></div>\n    <div class="k-var--chart-area-opacity"></div>\n\n    <div>\n        <div class="k-var--chart-font"></div>\n        <div class="k-var--chart-title-font"></div>\n        <div class="k-var--chart-label-font"></div>\n    </div>\n\n    <div class="k-var--series">\n      <div class="k-var--series-a"></div>\n      <div class="k-var--series-b"></div>\n      <div class="k-var--series-c"></div>\n      <div class="k-var--series-d"></div>\n      <div class="k-var--series-e"></div>\n      <div class="k-var--series-f"></div>\n    </div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}setStyle(t,e){this.set(t,e)}setColors(){this.mapColor("axisDefaults.crosshair.color","chart-crosshair-background"),this.mapColor("axisDefaults.labels.color","normal-text-color"),this.mapColor("axisDefaults.line.color","chart-major-lines"),this.mapColor("axisDefaults.majorGridLines.color","chart-major-lines"),this.mapColor("axisDefaults.minorGridLines.color","chart-minor-lines"),this.mapColor("axisDefaults.notes.icon.background","chart-notes-background"),this.mapColor("axisDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("axisDefaults.notes.line.color","chart-notes-lines"),this.mapColor("axisDefaults.title.color","normal-text-color"),this.mapColor("chartArea.background","background"),this.mapColor("legend.inactiveItems.labels.color","chart-inactive"),this.mapColor("legend.inactiveItems.markers.color","chart-inactive"),this.mapColor("legend.labels.color","normal-text-color"),this.mapColor("seriesDefaults.boxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.boxPlot.mean.color","base"),this.mapColor("seriesDefaults.boxPlot.median.color","base"),this.mapColor("seriesDefaults.boxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.bullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.candlestick.downColor","normal-text-color"),this.mapColor("seriesDefaults.candlestick.line.color","normal-text-color"),this.mapColor("seriesDefaults.errorBars.color","chart-error-bars-background"),this.mapColor("seriesDefaults.horizontalWaterfall.line.color","chart-major-lines"),this.mapColor("seriesDefaults.icon.border.color","chart-major-lines"),this.mapColor("seriesDefaults.labels.background","background"),this.mapColor("seriesDefaults.labels.color","normal-text-color"),this.mapColor("seriesDefaults.notes.icon.background","chart-notes-background"),this.mapColor("seriesDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("seriesDefaults.notes.line.color","chart-notes-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.mean.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.median.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.verticalBullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.waterfall.line.color","chart-major-lines"),this.mapColor("title.color","normal-text-color");var t=parseFloat(this.queryStyle("chart-area-opacity").opacity);isNaN(t)||(this.setStyle("seriesDefaults.area.opacity",t),this.setStyle("seriesDefaults.labels.opacity",t))}setFonts(){var t=iE(this.queryStyle("chart-font")),e=iE(this.queryStyle("chart-title-font")),i=iE(this.queryStyle("chart-label-font"));this.setStyle("axisDefaults.labels.font",i),this.setStyle("axisDefaults.notes.label.font",t),this.setStyle("axisDefaults.title.font",t),this.setStyle("legend.labels.font",t),this.setStyle("seriesDefaults.labels.font",i),this.setStyle("seriesDefaults.notes.label.font",t),this.setStyle("title.font",e)}setSeriesColors(){var t=this.element,e=[].slice.call(t.querySelectorAll(".k-var--series div")).reduce(((t,e)=>(t[(t=>t.match(/series-([a-z])$/)[1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0))(e.className)]=window.getComputedStyle(e).backgroundColor,t)),[]);this.setStyle("seriesColors",e)}mapColor(t,e){this.setStyle(t,this.queryColor(e))}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element;return window.getComputedStyle(e.querySelector(".k-var--".concat(t)))}}class rE extends H{constructor(t,e,i,n){super(t,e),this.extendOptions(e),this.themeService=i,this.intlService=n}destroy(){this.destroyWidget()}getThemeOptions(){return this.themeService?(this.themeService.loadTheme(),this.themeService.getThemeOptions()):{}}initWidget(t,e){this.widget=this.createWidget(t||this.element,e||this.options,this.getThemeOptions(),this.intlService,this.instanceObserver)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new(this.getWidgetConstructor())(t,e,i,{intlService:n,observer:r,sender:this})}getWidgetConstructor(){}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService&&this.themeService.reset(),this.setOptions(this.options)}areOptionsChanged(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreOptions:[]},i=Object.keys(t),n=0;n<i.length;n++){var r=i[n];if(t[r]!==this.options[r]&&!e.ignoreOptions.includes(r))return!0}return!1}}function sE(t){var{id:e="",widgetOptions:i="",componentOptions:n={},services:r={themeService:{},intlService:{}},componentConstructor:s}=t,o=G(e);if(o){var a=JSON.parse(i),l=ie(e),c=u(a,n);if(l)te(l,c);else r.intlService&&r.intlService.setLocale&&(c.locale=c.locale||{},c.locale.name=e,r.intlService.setLocale(c.locale)),re(e,new s(o,c,r.themeService,r.intlService))}}class oE extends rE{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return GC}}function aE(t,e,i){sE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new nE,intlService:eo},componentConstructor:oE})}class lE extends rE{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return t_}}function cE(t,e,i){sE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new nE,intlService:eo},componentConstructor:lE})}var hE=F("index");class uE extends H{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,mode:"",debounceDelay:1}),this.extendOptions(e),this.collapsibleItems=[],this.setCollapsibleItems(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedResize=Li((t=>{this.onResize(t)}),this.options.debounceDelay).bind(this),window.addEventListener("resize",this.debouncedResize)}unbindEvents(){window.removeEventListener("resize",this.debouncedResize),this.debouncedResize=null}getItems(){return Array.from(this.element.querySelector(".k-breadcrumb-container").children)}setCollapsibleItems(){var t=this.getItems(),e=t.slice(1,t.length-1).map((t=>{var e=N(hE,t);return{index:e,offsetWidth:this.getItemWidth(e),expanded:!0}}));this.collapsibleItems=e}setItemDisplay(t,e){var i=this.getItemByIndex(t.index),n="wrap"===this.options.mode?2:1;if(t.index===n)for(var r=i.children,s=1;s<r.length;s++)r[s].style.display=e;else i.style.display=e}getWidths(){var t=this.getItems().map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0),e=getComputedStyle(this.element);return{totalItemsWidth:t,elementInternalWidth:this.element.clientWidth-parseInt(e.paddingLeft)-parseInt(e.paddingRight)}}getItemWidth(t){return this.getItemByIndex(t).offsetWidth}getItemByIndex(t){return this.element.querySelector(R(hE,t))}collapseItem(t){this.setItemDisplay(t,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t,""),t.expanded=!0}onResize(t){if("auto"===this.options.mode&&this.collapsibleItems.length){var{totalItemsWidth:e,elementInternalWidth:i}=this.getWidths(),n=this.collapsibleItems.find((t=>t.expanded)),r=[...this.collapsibleItems].reverse().find((t=>!t.expanded));n&&e>=i&&!0!==t?(this.collapseItem(n),this.onResize(!1)):r&&e+r.offsetWidth<i&&!1!==t&&(this.expandItem(r),this.onResize(!0))}}handleChange(t){t&&(this.setCollapsibleItems(),this.collapsibleItems.forEach((t=>this.expandItem(t)))),this.onResize()}}function pE(t,e){Zt(uE,t,e)}class dE extends va{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{showTooltip:"onObserverShowTooltip",hideTooltip:"onObserverHideTooltip",seriesClick:"onObserverSeriesClick"})}}function fE(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function gE(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fE(Object(i),!0).forEach((function(e){mE(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fE(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function mE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yE="mouseleave";class vE extends H{constructor(t,e,i,n){super(t,e),mE(this,"options",{seriesTooltipPopupId:"",crosshairTooltips:{},jsinterop:{onObserverShowCrosshairTooltip:"",onObserverShowTooltip:"",onObserverSeriesClick:""}}),mE(this,"onMouseLeave",(t=>{this.hideElements(t)})),mE(this,"onObserverShowTooltip",(t=>{this.showTooltip(t)})),mE(this,"onObserverHideTooltip",(t=>{this.hideTooltip(t)})),mE(this,"onObserverSeriesClick",(t=>{var e=this.createSeriesClickEventArgs(t);this.invokeSeriesClickAsync(e)})),this.extendOptions(e),this.themeService=i,this.createInstanceObserver(),this.chartInstance=this.createChart(this.element,this.options,this.getThemeOptions(),n,this.chartInstanceObserver),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyInstanceObserver(),this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}bindEvents(){this.element.addEventListener(yE,this.onMouseLeave)}unbindEvents(){this.element.removeEventListener(yE,this.onMouseLeave)}getThemeOptions(){return this.themeService.loadTheme(),this.themeService.getThemeOptions()}createChart(t,e,i,n,r){return new(this.getChartConstructor())(t,e,i,{intlService:n,observer:r,sender:this})}getChartConstructor(){return wS}setOptions(t){this.chartInstance&&(this.options=t,this.chartInstance.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService.reset(),this.setOptions(this.options)}createInstanceObserver(){this.chartInstanceObserver=new dE(this)}destroyInstanceObserver(){this.chartInstanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeShowCrosshairTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowCrosshairTooltip,t)}invokeShowSeriesTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowTooltip,t)}invokeSeriesClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverSeriesClick,t)}showTooltip(t){t.crosshair?this.showCrosshairTooltip(t):this.showSeriesTooltip(t)}hideTooltip(t){t.crosshair?this.hideCrosshairTooltip(t):this.hideSeriesTooltip(t)}showCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);if(e){e.options.elementAlign={horizontal:"center",vertical:"center"},this.setTooltipPosition(t.anchor,e);var i=this.getCrosshairTooltipTemplateContext(t);this.invokeShowCrosshairTooltipAsync(i)}}hideCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);e&&e.close()}showSeriesTooltip(t){var e=this.getSeriesTooltipPopup();this.setTooltipPosition(t.anchor,e);var i=this.getSeriesTooltipTemplateContext(t);this.invokeShowSeriesTooltipAsync(i)}hideSeriesTooltip(){var t=this.getSeriesTooltipPopup();t&&t.close()}getTooltipAnchorRect(t){var e=this.getTooltipAnchorOffset(t);return{x:0,y:0,width:0,height:0,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}getTooltipAnchorOffset(t){return t?t.point:{top:0,left:0}}getCrosshairTooltipPopup(t){var e=this.getCrosshairAxisKey(t),i=this.getCrosshairTooltip(e);if(i)return ie(i.popupId)}getSeriesTooltipPopup(){return ie(this.options.seriesTooltipPopupId)}setTooltipPosition(t,e){if(e&&t){var i=this.getTooltipAnchorRect(t);e.options.anchorAlign=t.align,e.options.anchorRect=i,e.positionElement()}}getCrosshairTooltipTemplateContext(t){var e=((t.options||{}).tooltip||{}).format||t.format,i=t.point,n={formattedValue:e&&i&&i.formatValue?i.formatValue(e):String(t.value),axisKey:this.getCrosshairAxisKey(t)};return this.extendWithTooltipStyling(n,t)}getCrosshairAxisKey(t){var{axisName:e,axisIndex:i}=t;return"".concat(e).concat(i)}getCrosshairTooltip(t){var e=this.options.crosshairTooltips;return e?e[t]:{}}getSeriesTooltipTemplateContext(t){if(t.shared)return this.getSeriesTooltipSharedTemplateContext(t);var e=gE({},this.createSeriesTooltipTemplatePoint(t.point,t.format));return this.extendWithTooltipStyling(e,t)}getSeriesTooltipSharedTemplateContext(t){var e=t.points.filter((t=>x(t.series.name))).length>0,i=t.series.length>1,n=1;e&&n++,i&&n++;var r=this.createTooltipTemplatePoints(t),s={category:t.category,categoryText:t.categoryText,points:r,showSeriesColorMarker:i,showSeriesName:e,headerColumnColSpan:n};return this.extendWithTooltipStyling(s,t)}createTooltipTemplatePoints(t){var e=t.points?t.points.map((e=>this.createSeriesTooltipTemplatePoint(e,t.format))):[];return e}createSeriesTooltipTemplatePoint(t,e){var i=this.convertToSeriesPoint(t),n=((t.options||{}).tooltip||{}).format||e;return gE(gE({},i),{},{formattedValue:n&&t.formatValue?t.formatValue(n):String(t.value)})}hideElements(t){var e=t.relatedTarget,i=e&&Boolean(e.closest(".k-chart-tooltip")),n=V(this.element,e);e&&(i||n)||this.chartInstance.hideElements()}createSeriesClickEventArgs(t){return this.convertToSeriesPoint(t.point)}convertToSeriesPoint(t){var e,i=p(t.dataItem)?Object.getPrototypeOf(t.dataItem):null;return p(t.dataItem)&&i&&i!==Object.prototype&&(e=u({},i,t.dataItem)),{dataItem:e,category:t.category,categoryIndex:t.categoryIx,seriesIndex:t.series.index,seriesColor:t.series.color,seriesName:t.series.name||"",percentage:t.percentage,pointIndex:t.pointIx||t.index}}extendWithTooltipStyling(t,e){return u(t,{tooltipStyle:E(e.style),tooltipClass:e.className||""})}}var bE={autoBindElements:!0,liveDrag:!1,partialRedraw:!0,tooltip:{visible:!1},seriesDefaults:{tooltip:{visible:!1}}};class wE extends vE{getChartConstructor(){return BS}extendOptions(t){this.applyNavigatorDefaults(t),super.extendOptions(t)}setOptions(t){this.applyNavigatorDefaults(t);var e=this.getThemeOptions();this.chartInstance.applyOptions(t,e),super.setOptions(t)}applyNavigatorDefaults(t){g(t.navigator,bE)}}__webpack_require__(840);var xE=t=>({x:{location:t.pageX},y:{location:t.pageY}});function SE(t,e){for(var i=0;i<t.length;i++)if(e[t[i]])return!0;return!1}var kE=[{end:"panend",move:"panmove",start:"panstart"},{gesturechange:"pinchmove",gestureend:"pinchend",gesturestart:"pinchstart"},{press:"press"},{tap:"tap"}];class CE{constructor(t,e){this.hammerInstance=t,this.eventHandlers={},this.tap=this.tap.bind(this),this.press=this.press.bind(this),this.panstart=this.panstart.bind(this),this.panmove=this.panmove.bind(this),this.panend=this.panend.bind(this),this.pinchstart=this.pinchstart.bind(this),this.pinchmove=this.pinchmove.bind(this),this.pinchend=this.pinchend.bind(this),e&&this.bind(e)}tap(t){this.trigger("tap",t)}press(t){this.trigger("press",t)}panstart(t){delete this.previous,this.previous=this.trigger("start",t)}panmove(t){this.previous=this.trigger("move",t)}panend(t){this.trigger("end",t),delete this.previous}pinchstart(t){this.trigger("gesturestart",t)}pinchmove(t){this.trigger("gesturechange",t)}pinchend(t){this.trigger("gestureend",t)}trigger(t,e){var i=((t,e)=>{var i=t.pointers,n=i[0],r=n.pageX,s=n.pageY,o=0;if(i.length>1){var a=i[0],l=i[1];o=Math.sqrt(Math.pow(a.pageX-l.pageX,2)+Math.pow(a.pageY-l.pageY,2))}return{distance:o,event:t.srcEvent,preventDefault:function(){t.preventDefault()},target:t.target,touches:i.map(xE),type:t.type,x:{delta:e?r-e.x.location:0,initialDelta:t.deltaX,location:r,startLocation:r-t.deltaX},y:{delta:e?s-e.y.location:0,initialDelta:t.deltaY,location:s,startLocation:s-t.deltaY}}})(e,this.previous);return this.eventHandlers[t]&&this.eventHandlers[t](i),i}bind(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.unbind(),this.eventHandlers=t;for(var e=0;e<kE.length;e++){var i=kE[e],n=Object.keys(i);if(SE(n,t))for(var r=0;r<n.length;r++){var s=i[n[r]];this.hammerInstance.on(s,this[s])}}}unbind(){this.hammerInstance&&this.hammerInstance.off(),this.eventHandlers={}}destroy(){this.hammerInstance&&(this.hammerInstance.destroy(),delete this.hammerInstance),delete this.eventHandlers}toggleDrag(t){this.toggle("pan",t)}toggleZoom(t){this.toggle("pinch",t)}toggle(t,e){this.hammerInstance&&this.hammerInstance.get(t).set({enable:e})}}function AE(t,e,i){var n=G(t);if(n){var r=JSON.parse(e),s=ie(t),o=u(r,i);if(s)te(s,o);else{o.locale.name=t,eo.setLocale(o.locale);var a=function(t,e,i,n){return new("stockchart"===e._constructor?wE:vE)(t,e,i,n)}(n,o,new nE,eo);re(t,a)}}}function _E(t){Qt(t)}function TE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ra.register(lo),bp.register(class{static create(t,e){var i=window.Hammer,n=new i(t,{recognizers:[[i.Tap],[i.Pan],[i.Pinch],[i.Press,{time:0}]]});return new CE(n,e)}});var OE=[fe.ARROWDOWN,fe.ARROWRIGHT,fe.ARROWLEFT,fe.ARROWUP,fe.ENTER];class EE extends H{constructor(t,e){super(t,e),TE(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),TE(this,"onKeyDown",(t=>(this.invokeMethodAsync(this.options.jsinterop.keydown,t.name),t.name===fe.ENTER))),TE(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),this.extendOptions(e),this.initNavigationService(),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("blur",this.invokeBlur)}unbindEvents(){this.element.removeEventListener("blur",this.invokeBlur)}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(OE,this.onKeyDown)}focus(){setTimeout((()=>{this.element.focus()}),100)}}function ME(t,e){Zt(EE,t,e)}function PE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class IE extends H{constructor(t,e){super(t,e),PE(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),PE(this,"closePopup",(()=>(this.focus(),this.invokeMethodAsync(this.options.jsinterop.close),!1))),PE(this,"openPopup",(()=>(this.invokeMethodAsync(this.options.jsinterop.open),!1))),PE(this,"focus",(()=>{this.element.focus()})),this.popupElement=G(e.popupId),this.extendOptions(e),this.initNavigationService(),this.initPopupNavigationService()}destroy(){this.navigationService.destroy(),this.popupNavigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWUP),this.closePopup)}initPopupNavigationService(){this.popupNavigationService=new ve(this.popupElement),this.popupNavigationService.bind([fe.ESC,"".concat(ge.ALT," ").concat(fe.ARROWUP)],this.closePopup)}}function FE(t,e){Zt(IE,t,e)}function DE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RE=[fe.ARROWUP,fe.ARROWDOWN,fe.ARROWLEFT,fe.ARROWRIGHT];class LE extends H{constructor(t,e){super(t,e),DE(this,"onDrag",(t=>{this.moveDragHandleFromEvent(t),this.throttleChangeValue()})),DE(this,"onDragEnd",(()=>{this.changeValue(),this.dragHandle.focus()})),DE(this,"onNavigate",(t=>{var e=B("top",this.dragHandle),i=B("left",this.dragHandle);switch(t.name){case fe.ARROWDOWN:e+=4;break;case fe.ARROWUP:e-=4;break;case fe.ARROWRIGHT:i+=4;break;case fe.ARROWLEFT:i-=4}this.moveDragHandle(e,i),this.changeValue()})),DE(this,"onClick",(t=>{this.moveDragHandleFromEvent(t),this.dragHandle.focus(),this.changeValue()})),this.gradient=this.element.querySelector(".k-hsv-rectangle"),this.dragHandle=this.element.querySelector(".k-draghandle"),this.setOptions(e),this.initDraggable(),this.bindEvents(),this.throttleChangeValue=Ni(this.changeValue,150).bind(this)}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.gradient.addEventListener("click",this.onClick),this.initNavigationService()}unbindEvents(){this.gradient.removeEventListener("click",this.onClick)}setOptions(t){super.setOptions(t),this.hsva=this.options.hsva,this.initDragHandlePosition()}initNavigationService(){this.navigationService=new ve(this.dragHandle),this.navigationService.bind(RE,this.onNavigate)}initDraggable(){this.draggable=new yi(this.element,{filter:".k-hsv-gradient",offsetDropClue:!1,events:{drag:this.onDrag,dragEnd:this.onDragEnd}})}initDragHandlePosition(){var t=(1-this.hsva.v)*this.gradient.offsetHeight,e=this.hsva.s*this.gradient.offsetWidth;this.dragHandle.style.display="block",this.setDragHandlePosition(t,e)}setDragHandlePosition(t,e){this.dragHandle&&(this.dragHandle.style.top="".concat(t,"px"),this.dragHandle.style.left="".concat(e,"px"))}moveDragHandleFromEvent(t){var e=this.gradient.getBoundingClientRect();this.moveDragHandle(t.clientY-e.top,t.clientX-e.left)}moveDragHandle(t,e){var i=he(t,0,this.gradient.offsetHeight),n=he(e,0,this.gradient.offsetWidth);this.setDragHandlePosition(i,n),this.hsva.s=n/this.gradient.offsetWidth,this.hsva.v=1-i/this.gradient.offsetHeight}changeValue(){this.invokeMethodAsync(this.options.jsinterop.changeValue,this.hsva)}}function NE(t,e){Zt(LE,t,e)}function BE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class jE extends H{constructor(t,e){super(t,e),BE(this,"options",{dotNetInstance:null,jsinterop:{change:""}}),BE(this,"onKeyDown",((t,e)=>{this.isEnterKeyActionable(e.target)||this.invokeMethodAsync(this.options.jsinterop.change)})),BE(this,"onFocusOut",(t=>{V(this.element,t.relatedTarget)||this.invokeChange()})),BE(this,"invokeChange",(()=>{this.invokeMethodAsync(this.options.jsinterop.change)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut)}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind("".concat(fe.ENTER),this.onKeyDown)}isEnterKeyActionable(t){return!(!t.matches(".k-button")&&t.querySelector(".k-selected.k-focus"))}}function zE(t,e){Zt(jE,t,e)}function UE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $E="keydown";class HE extends H{constructor(t,e){super(t,e),UE(this,"options",{dotNetInstance:null,itemListDataId:"",jsinterop:{itemListKeyDown:""}}),UE(this,"onKeyDown",(t=>{var e=[fe.ARROWRIGHT,fe.ARROWLEFT,fe.ARROWUP,fe.ARROWDOWN].includes(t.key);if(t.key===fe.TAB){var i=t.target.closest(".k-columnmenu-item-wrapper"),n=i?i.querySelector(".k-columnmenu-item"):null,r="true"===(n?n.getAttribute("aria-expanded"):"");(!r||r&&t.target===n&&t.shiftKey)&&t.preventDefault()}else e&&Q("k-columnmenu-item",t.target)&&t.preventDefault()})),UE(this,"onItemListKeyDown",(t=>{var e=ct(t.target),i=t.target.closest(".k-filter-menu");if(!e||!i||t.key!==fe.ARROWUP&&t.key!==fe.ARROWDOWN||t.shiftKey){var n=P(t);this.invokeMethodAsync(this.options.jsinterop.itemListKeyDown,n)}})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=this.getItemListElement();t&&t.addEventListener($E,this.onItemListKeyDown),this.element.addEventListener($E,this.onKeyDown)}unbindEvents(){var t=this.getItemListElement();t&&t.removeEventListener($E,this.onItemListKeyDown),this.element.removeEventListener($E,this.onKeyDown)}getItemListElement(){return G(this.options.itemListDataId)}}function VE(t,e){Zt(HE,t,e)}function qE(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class WE extends H{constructor(t,e){super(t,e),qE(this,"options",{selector:"",popupId:""}),qE(this,"onContextMenu",(t=>{t.preventDefault(),this.activeElement=t.target,this.openPopup(t.pageX,t.pageY)})),qE(this,"onPopupKeyDown",(t=>{t.key===fe.ESC&&(this.closePopup(),this.activeElement.focus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.anchors=null}bindEvents(){this.anchors=document.querySelectorAll(this.options.selector),this.anchors.forEach((t=>{t.addEventListener("contextmenu",this.onContextMenu)})),G(this.options.popupId).addEventListener("keydown",this.onPopupKeyDown)}unbindEvents(){this.anchors.forEach((t=>{t.removeEventListener("contextmenu",this.onContextMenu)}))}openContextMenu(t){var e=t.clientX+window.scrollX,i=t.clientY+window.scrollY;this.openPopup(e,i)}focusFirstMenuItem(){var t=this.getPopup();if(t){var e=t.element.querySelector(".k-context-menu .k-item");e&&e.focus()}}openPopup(t,e){var i=this.getPopup();i.openAsync(null,t,e),this.activeElement&&i.setZIndex(this.activeElement)}closePopup(){this.getPopup().closeAsync()}getPopup(){return ie(this.options.popupId)}}function XE(t,e){ie(t)||re(t,new WE(null,e))}var GE,KE=function(t){return t?new Date(t.getTime()):null},YE=function(t,e){var i=KE(t);return 0===e&&23===i.getHours()&&i.setHours(i.getHours()+2),i},JE=function(t,e,i,n,r,s,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0);var a=new Date(t,e,i,n,r,s,o);return t>-1&&t<100&&a.setFullYear(a.getFullYear()-1900),YE(a,n)},ZE=function(t){return function(t,e){var i=KE(t);return i.setDate(i.getDate()+e),YE(i,t.getHours())}(JE(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),-1)},QE=function(t,e){var i=KE(t),n=(12+(i.getMonth()+e)%12)%12;return i.setMonth(i.getMonth()+e),function(t,e){return t.getMonth()!==e?ZE(QE(t,-1)):t}(YE(i,t.getHours()),n)};!function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"}(GE||(GE={}));var tM;!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(tM||(tM={}));var eM=function(t){return JE(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)};function iM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nM{constructor(){iM(this,"symbols",""),iM(this,"partMap",void 0)}}var rM=(t,e)=>(t[e.pattern[0]]=e.type,t);function sM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class oM{get value(){return this._value}constructor(t,e,i,n,r){sM(this,"year",!0),sM(this,"month",!0),sM(this,"date",!0),sM(this,"hours",!0),sM(this,"minutes",!0),sM(this,"seconds",!0),sM(this,"milliseconds",!0),sM(this,"formatPlaceholder",void 0),sM(this,"format",void 0),sM(this,"leadingZero",null),sM(this,"monthNames",[]),sM(this,"typedMonthPart",""),sM(this,"knownParts","adHhmMsEy"),sM(this,"symbols",{E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y"}),sM(this,"_value",eM(new Date)),this.intl=t,this.formatPlaceholder=e||"wide",this.format=i,this.localeId=n||"en",this.cycleTime=r,this.monthNames=this.allFormatedMonths(this.localeId)}setValue(t){var e,i;t?(e=t,i=this._value,!e&&!i||e&&i&&e.getTime()===i.getTime()||(this._value=KE(t),this.modifyExisting(!0))):(this._value=eM(new Date),this.modifyExisting(!1))}hasValue(){return this.intl.splitDateFormat(this.format,this.localeId).reduce(((t,e)=>t||"literal"!==e.type&&"dayperiod"!==e.type&&this.getExisting(e.pattern[0])),!1)}getDateObject(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return KE(this.value)}getFormattedDate(t){return this.intl.formatDate(this.getDateObject(),t,this.localeId)}getTextAndFormat(){var t=this.intl.formatDate(this.value,this.format,this.localeId),e=this.dateFormatString(this.value,this.format);return this.merge(t,e)}modifyExisting(t){for(var e=this.dateFormatString(this.value,this.format).symbols,i=0;i<e.length;i++)this.setExisting(e[i],t)}getExisting(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"m":return this.minutes;case"s":return this.seconds;default:return!0}}setExisting(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear((new Date).getFullYear());break;case"M":this.month=e,!1===e&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;default:return}}modifyPart(t,e){var i=KE(this.value),n=!1;switch(t){case"y":i.setFullYear(i.getFullYear()+e);break;case"M":i=QE(this.value,e);break;case"d":case"E":i.setDate(i.getDate()+e);break;case"h":case"H":i.setHours(i.getHours()+e),n=!0;break;case"m":i.setMinutes(i.getMinutes()+e),n=!0;break;case"s":i.setSeconds(i.getSeconds()+e),n=!0;break;case"a":i.setHours(i.getHours()+12*e),n=!0}n&&!this.cycleTime&&i.getDate()!==this._value.getDate()&&(i.setDate(this._value.getDate()),i.setMonth(this._value.getMonth()),i.setFullYear(this._value.getFullYear())),this.setExisting(t,!0),this._value=i}parsePart(t,e,i){if(!e)return this.resetLeadingZero(),this.setExisting(t,!1),{value:null,switchToNext:!1};for(var n=this.intl.formatDate(this.value,this.format,this.localeId),r=this.dateFormatString(this.value,this.format),s=r.symbols,o=!1,a="",l="",c="",h=0;h<n.length;h++)s[h]===t?(l+=this.getExisting(t)?n[h]:"0",o=!0):o?c+=n[h]:a+=n[h];var u=l.length-3,p=null,d=this.matchMonth(e),f=this.matchDayPeriod(e,t),g="0"===e,m=this.leadingZero||{};g?0!==parseInt(i?e:l+e,10)||this.isAbbrMonth(r.partMap,t)||this.incrementLeadingZero(t):this.resetLeadingZero();for(var y=Math.max(0,u);y<=l.length;y++){var v=i?e:l.substring(y)+e,b=parseInt(v,10);if(!(p=this.intl.parseDate(a+v+c,this.format,this.localeId))&&!isNaN(b)&&!isNaN(parseInt(e,10))){if("M"===t&&!d){var w=b-1;w>-1&&w<12&&((p=KE(this.value)).setMonth(w),p.getMonth()!==w&&(p=ZE(QE(p,-1))))}"y"===t&&(p=JE(parseInt(v,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),this.date&&p.getDate()!==this.value.getDate()&&(p=ZE(QE(p,-1))))}if(p){var x=this.partPattern(r.partMap,t).pattern,S=this.intl.parseDate("".concat(a).concat(this.peek(v,x)).concat(c),this.format,this.localeId);this._value=p,this.setExisting(t,!0);var k=null===S||m[t]&&x.length<=v.length;return{value:this.value,switchToNext:k}}}return d&&(p=this.intl.parseDate(a+d+c,this.format,this.localeId))?(this._value=p,this.setExisting(t,!0),{value:this.value,switchToNext:!1}):f&&(p=this.intl.parseDate(a+f+c,this.format))?(this._value=p,{value:this.value,switchToNext:!0}):(g&&this.setExisting(t,!1),{value:null,switchToNext:!1})}symbolMap(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(rM,{})[t]}resetLeadingZero(){var t=null!==this.leadingZero;return this.leadingZero=null,t}incrementLeadingZero(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e}isAbbrMonth(t,e){var i=this.partPattern(t,e);return"month"===i.type&&i.names}partPattern(t,e){return t.filter((t=>-1!==t.pattern.indexOf(e)))[0]}peek(t,e){var i,n=t.replace(/^0*/,"")+"0";return i=e.length-n.length,new Array(Math.max(i,0)).fill("0").join("")+n}matchMonth(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var i=parseInt(this.typedMonthPart,10);if(i>=1&&i<=12&&i.toString()===this.typedMonthPart)return this.monthNames[i-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""}matchDayPeriod(t,e){var i=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(i))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(i))return this.dayPeriods.pm}return""}allFormatedMonths(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.intl.splitDateFormat(this.format,this.localeId),i=0;i<e.length;i++)if("month"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return[]}dateFormatString(t,e){for(var i=this.intl.splitDateFormat(e,this.localeId),n=[],r=[],s=0;s<i.length;s++)for(var o=this.intl.formatDate(t,{pattern:i[s].pattern},this.localeId).length;o>0;)n.push(this.symbols[i[s].pattern[0]]||"_"),r.push(i[s]),o--;var a=new nM;return a.symbols=n.join(""),a.partMap=r,a}merge(t,e){for(var i="",n="",r=e.symbols,s=r.length-1;s>=0;s--)if(-1===this.knownParts.indexOf(r[s])||this.getExisting(r[s]))i=t[s]+i,n=r[s]+n;else{for(var o=r[s];s>=0&&o===r[s];)s--;for(s++,i=this.leadingZero&&this.leadingZero[o]?"0"+i:this.dateFieldName(e.partMap[s])+i;n.length<i.length;)n=r[s]+n}return{text:i,format:n}}dateFieldName(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))}}function aM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var lM="dragStart",cM="mouseup",hM="click",uM="input",pM="keydown",dM="focus",fM="blur";class gM extends H{constructor(e,i){var n=new Date(i.selectedDate);isNaN(n.getTime())&&(n=null),super(e,i),aM(this,"options",{dotNetInstance:null,format:"yyyy-MM-dd",selectedDate:null,allowNulls:!1,hasPlaceHolder:!1,cycleTime:!0,locale:null,steps:{second:"",minute:"",hour:"",day:"",month:"",year:""},formatPlaceholder:null,debounceDelay:null,jsinterop:{focus:"",blur:"",updateDate:"",enter:""}}),aM(this,"onElementDragStart",(t=>{t.preventDefault()})),aM(this,"onElementMouseUp",(t=>{t.preventDefault()})),aM(this,"onElementClick",(()=>{this.setSelection(this.selectionByIndex(this.selection.start))})),aM(this,"onElementInput",(()=>{if(this.element&&this.dateObject){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e;var i=((t,e,i,n)=>{var r=t[n+t.length-i.length],s=t.substring(0,n+t.length-i.length),o=i.substring(0,n),a=[];if(s===o&&n>0)return a.push([e[n-1],o[n-1]]),a;if(0===s.indexOf(o)&&(0===o.length||e[o.length-1]!==e[o.length])){var l="";1===o.length&&a.push([e[0],o[0]]);for(var c=o.length;c<s.length;c++)e[c]!==l&&"_"!==e[c]&&(l=e[c],a.push([l,""]));return a}if(0===o.indexOf(s)||"_"===e[n-1]){for(var h=e[0],u=Math.max(0,s.length-1);u<e.length;u++)if("_"!==e[u]){h=e[u];break}return[[h,o[n-1]]]}return" "===o[o.length-1]||o[o.length-1]===r?[[e[n-1],"_"]]:[[e[n-1],o[n-1]]]})(t,this.currentFormat,this.element.value,this.selection.start),n=1===i.length&&"_"===i[0][1],r=!1;if(!n)for(var s=0;s<i.length;s++)r=this.dateObject.parsePart(i[s][0],i[s][1],this.resetSegmentValue).switchToNext;this.resetSegmentValue=!1,this.forceUpdate(),i.length&&"_"!==i[0][0]&&this.setSelection(this.selectionBySymbol(i[0][0])),(r||n)&&this.switchDateSegment(1),this.debounceUpdateValue()}})),aM(this,"onElementFocus",(()=>{this.isActive=!0,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.focus)})),aM(this,"onElementBlur",(()=>{this.resetSegmentValue=!0,this.isActive=!1,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.blur)})),aM(this,"onElementKeyDown",(t=>{var e=this.options.jsinterop.enter,i=this.currentFormat[this.selection.start],n=this.getStepFromSymbol(i),r=!1;if(!t.altKey&&t.keyCode!==de.TAB){switch(t.keyCode){case de.ARROWLEFT:this.switchDateSegment(-1),r=!0;break;case de.ARROWUP:this.modifyDateSegmentValue(n,i,event),r=!0;break;case de.ARROWRIGHT:this.switchDateSegment(1),r=!0;break;case de.ARROWDOWN:this.modifyDateSegmentValue(-n,i,event),r=!0;break;case de.ENTER:this.invokeMethodAsync(e);break;case de.DELETE:case de.BACKSPACE:return this.options.allowNulls&&(this.dateObject.setValue(null),this.forceUpdate(),this.updateComponentValue()),void(r=!0);default:return}r&&t.preventDefault()}})),this.setOptions(i);var r=this.element.getAttribute("data-id");this.extendCulture(r);var s=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern";this.dateObject=new oM(t,s,i.format,r,i.cycleTime),this.dateObject.setValue(n),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0}extendCulture(t){var e=this.options;e.locale.name=t,Yn(g({},vn("en"),e.locale))}destroy(){this.unbindEvents(),super.destroy(),this.dateObject=null}bindEvents(){this.element.addEventListener(lM,this.onElementDragStart),this.element.addEventListener(hM,this.onElementClick),this.element.addEventListener(cM,this.onElementMouseUp),this.element.addEventListener(uM,this.onElementInput),this.element.addEventListener(pM,this.onElementKeyDown),this.element.addEventListener(dM,this.onElementFocus),this.element.addEventListener(fM,this.onElementBlur)}unbindEvents(){this.element.removeEventListener(lM,this.onElementDragStart),this.element.removeEventListener(cM,this.onElementMouseUp),this.element.removeEventListener(hM,this.onElementClick),this.element.removeEventListener(uM,this.onElementInput),this.element.removeEventListener(pM,this.onElementKeyDown),this.element.removeEventListener(dM,this.onElementFocus),this.element.removeEventListener(fM,this.onElementBlur)}setOptions(t){this.extendOptions(t),this.debounceUpdateValue=Li(this.updateComponentValue,this.options.debounceDelay)}focus(){this.element.focus()}get selection(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t}setSelection(t){this._lastSelectedSymbol=this.currentFormat[t.start],this.element&&document.activeElement===this.element&&this.element.setSelectionRange(t.start,t.end)}selectionBySymbol(t){for(var e=-1,i=0,n=0;n<this.currentFormat.length;n++)this.currentFormat[n]===t&&(i=n+1,-1===e&&(e=n));return e<0&&(e=0),{start:e,end:i}}selectionByIndex(t){for(var e={start:t,end:t},i=t,n=t-1;i<this.currentFormat.length||n>=0;i++,n--){if(i<this.currentFormat.length&&"_"!==this.currentFormat[i]){e=this.selectionBySymbol(this.currentFormat[i]);break}if(n>=0&&"_"!==this.currentFormat[n]){e=this.selectionBySymbol(this.currentFormat[n]);break}}return e}switchDateSegment(t){var{start:e,end:i}=this.selection;if(e<i&&this.currentFormat[e]!==this.currentFormat[i-1])return this.setSelection(this.selectionByIndex(t>0?e:i-1)),void(this.resetSegmentValue=!0);for(var n=this.currentFormat[e],r=e+t;r>0&&r<this.currentFormat.length&&(this.currentFormat[r]===n||"_"===this.currentFormat[r]);)r+=t;if("_"!==this.currentFormat[r]){for(var s=r;s>=0&&s<this.currentFormat.length&&this.currentFormat[s]===this.currentFormat[r];)s+=t;r>s&&(s+1!==e||r+1!==i)?(this.setSelection({start:s+1,end:r+1}),this.resetSegmentValue=!0):r<s&&(r!==e||s!==i)&&(this.setSelection({start:r,end:s}),this.resetSegmentValue=!0)}}modifyDateSegmentValue(t,e){if(this.dateObject){var i=1*t;this.dateObject.modifyPart(e,i),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e)),this.updateComponentValue()}}updateValue(t){var e=new Date(t);isNaN(e.getTime())&&(e=null),this.dateObject.setValue(e),this.forceUpdate(),this.togglePlaceholder()}updateComponentValue(){this.invokeMethodAsync(this.options.jsinterop.updateDate,{dateValue:this.dateObject.getFormattedDate("yyyy-MM-dd HH:mm:ss"),inputElementValue:this.element.value})}forceUpdate(){this.setTextAndFormat(),this.setElementValue(this.currentText)}setTextAndFormat(){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e,this.currentText=t}togglePlaceholder(){this.options.hasPlaceHolder&&!this.dateObject.hasValue()&&this.setElementValue(this.isActive?this.currentText:"")}setElementValue(t){this.element.value=t}getStepFromSymbol(t){switch(t){case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}}stopDebounceUpdateValue(){this.debounceUpdateValue&&this.debounceUpdateValue.pending&&(this.debounceUpdateValue.stop(),this.debounceUpdateValue.runCallback())}}function mM(t,e){Zt(gM,t,e)}function yM(t,e){var i=ie(t);i&&i.updateValue(e)}function vM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class bM extends H{constructor(t,e){super(t,e),vM(this,"options",{dotNetInstance:null,toggleElementSelector:"",pickerAnimationContainerId:"",jsinterop:{close:"",open:"",mousedown:"",blur:""}}),vM(this,"onToggleElementClick",(t=>{t.preventDefault()})),vM(this,"onToggleElementMouseDown",(()=>{this.inputComponent=ie(this.input.getAttribute("data-id")),this.inputComponent&&this.inputComponent.stopDebounceUpdateValue();var t=this.options.jsinterop.mousedown;this.invokeMethodAsync(t)})),vM(this,"onPopupKeyDown",(t=>{(t.keyCode===de.ESCAPE||t.keyCode===de.ARROWUP&&t.altKey)&&(this.invokeClose(),this.focus(),t.stopPropagation())})),vM(this,"closePopup",(()=>(this.invokeClose(),!1))),vM(this,"openPopup",(()=>(this.invokeOpen(),!1))),vM(this,"onInputFocus",(()=>{this.invokeClose()})),vM(this,"onInputFocusOut",(t=>{V(this.pickerElement,t.relatedTarget)||V(this.element,t.relatedTarget)||this.invokeMethodAsync(this.options.jsinterop.blur)})),this.setOptions(e),this.input=this.element.getElementsByClassName("k-input-inner")[0],this.toggleElement=this.element.querySelector(e.toggleElementSelector),this.bindEvents()}destroy(){this.destroyTabKeyTrap(),this.destroyNavigationService(),this.unbindEvents(),this.unbindPickerEvents(),super.destroy(),this.input=this.toggleElement=this.pickerElement=null}setOptions(t){super.setOptions(t),this.unbindPickerEvents(),this.pickerElement=G(t.pickerAnimationContainerId),this.bindPickerEvents(),this.destroyTabKeyTrap(),this.destroyNavigationService(),this.initTabKeyTrap(),this.initNavigationService()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWUP),this.closePopup)}destroyNavigationService(){this.navigationService&&this.navigationService.destroy()}initTabKeyTrap(){this.tabKeyTrap=new we(this.pickerElement)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}bindEvents(){this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("focusout",this.onInputFocusOut),this.toggleElement.addEventListener("click",this.onToggleElementClick),this.toggleElement.addEventListener("mousedown",this.onToggleElementMouseDown),this.tabKeyTrap.enableKeyTrap()}unbindEvents(){this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("focusout",this.onInputFocusOut),this.toggleElement.removeEventListener("click",this.onToggleElementClick),this.toggleElement.removeEventListener("mousedown",this.onToggleElementMouseDown)}bindPickerEvents(){this.pickerElement.addEventListener("keydown",this.onPopupKeyDown,!0)}unbindPickerEvents(){this.pickerElement&&this.pickerElement.removeEventListener("keydown",this.onPopupKeyDown,!0)}focus(){var t=this;setTimeout((()=>{t.input.focus()}),100)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(){this.invokeMethodAsync(this.options.jsinterop.open)}}class wM extends bM{constructor(t,e){super(t,e),this.extendOptions(e),this.bindEvents(),this.bindPickerEvents()}destroy(){this.unbindEvents(),super.destroy()}}function xM(t,e){Zt(wM,t,e)}function SM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class kM extends H{constructor(t,e){super(t,e),SM(this,"options",{dotNetInstance:null,focusOnInit:!1,jsinterop:{click:""}}),SM(this,"onKeyDown",(t=>{t.keyCode===de.ARROWUP?(this.onKeyArrowUp(),t.preventDefault()):t.keyCode===de.ARROWDOWN?(this.onKeyArrowDown(),t.preventDefault()):t.keyCode===de.ENTER&&this.invokeEnter()})),SM(this,"onScroll",(()=>{var t=this;t.element.scrollTop!==t.scrollTop&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t.snapToItem(!0)}),33))})),SM(this,"onMouseDown",(t=>{t.preventDefault()})),SM(this,"onClick",(t=>{var e=t.target.closest("li"),i=this.listElement.querySelectorAll(".k-item"),n=Array.from(i).indexOf(e);e&&(this.scrollTo(e.offsetTop),this.invokeSelect(n))})),SM(this,"onMouseEnter",(()=>{this.timeList.focus()})),SM(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.timeList=this.element.parentElement,this.listElement=this.element.querySelector("ul.k-reset"),this.timeout,this.setDimensions(),this.bindEvents(),this.options.focusOnInit&&this.focusTimeList()}setDimensions(){this.itemHeight=this.listElement.querySelector("li.k-item").offsetHeight,this.elementHeight=this.element.offsetHeight,this.scrollTop=this.element.scrollTop;var t=this.listElement.offsetHeight+(this.elementHeight-this.itemHeight);this.element.querySelector(".k-scrollable-placeholder").setAttribute("style","height: "+t+"px");var e=Math.floor((this.elementHeight-this.itemHeight)/2);this.listElement.setAttribute("style","transform: translateY("+e+"px);")}bindEvents(){this.element.addEventListener("scroll",this.onScroll),this.element.addEventListener("mousedown",this.onMouseDown),this.listElement.addEventListener("click",this.onClick),this.timeList.addEventListener("keydown",this.onKeyDown),this.timeList.addEventListener("mouseenter",this.onMouseEnter),this.timeList.addEventListener("focusout",this.onFocusOut)}destroy(){clearTimeout(this.timeout),this.unbindEvents(),super.destroy(),this.selectedIndex=this.listElement=null}unbindEvents(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("scroll",this.onScroll),this.listElement.removeEventListener("click",this.onClick),this.timeList.removeEventListener("keydown",this.onKeyDown),this.timeList.removeEventListener("mouseenter",this.onMouseEnter),this.timeList.removeEventListener("focusout",this.onFocusOut)}onKeyArrowUp(){var t=this.selectedIndex;this.setSelectedIndex(t-1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}onKeyArrowDown(){var t=this.selectedIndex;this.setSelectedIndex(t+1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}focusTimeList(){var t=this;setTimeout((()=>{t.timeList.focus({preventScroll:!0})}),100)}snapToItem(t){var e=this.element.scrollTop,i=e%this.itemHeight;this.scrollTop>e?e-=i:e+=this.itemHeight-i,this.selectItem(e,t)}selectItem(t,e){if(!Number.isNaN(t)&&(this.scrollTo(t),e)){var i=Math.floor(t/this.itemHeight);this.invokeSelect(i)}}invokeSelect(t){var e=this.options.jsinterop.click,i=Math.min(t,this.listElement.querySelectorAll(".k-item").length-1);this.invokeMethodAsync(e,i)}invokeEnter(){var t=this.options.jsinterop.enter;this.invokeMethodAsync(t)}invokeFocusOut(t){t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)}scrollTo(t){this.element.scrollTop=t,this.scrollTop=this.element.scrollTop}setSelectedIndex(t){this.setDimensions();var e=this.listElement.querySelectorAll(".k-item")[t];e&&(this.selectedIndex=t,this.scrollTo(e.offsetTop))}}class CM extends bM{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===de.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===de.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.pickerElement.querySelector(e);i&&i.focus()}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{var t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function AM(t,e){Zt(CM,t,e)}function _M(t){var e=ie(t);e&&e.focus()}function TM(t,e){Zt(kM,t,e)}function OM(t,e){var i=ie(t);i&&i.setSelectedIndex(e)}function EM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MM="keydown",PM="mousedown",IM="click",FM="focus",DM="focusout",RM=[de.ARROWUP,de.ARROWDOWN,de.ARROWLEFT,de.ARROWRIGHT,de.HOME,de.END,de.SPACE];class LM extends H{constructor(t,e){super(t,e),EM(this,"onKeyDown",(t=>{RM.concat(de.ENTER).includes(t.keyCode)?t.preventDefault():(t.shiftKey||t.ctrlKey)&&t.stopPropagation()})),EM(this,"onMouseDown",(t=>{t.preventDefault()})),EM(this,"onClick",(t=>{var e=t.currentTarget;e&&e.focus()})),EM(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),EM(this,"onFocusout",(t=>{t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.tables=this.element.querySelectorAll("table"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.tables=this.navigationService=null}bindEvents(){[...this.tables].forEach((t=>{t.addEventListener(PM,this.onMouseDown),t.addEventListener(IM,this.onClick),t.addEventListener(MM,this.onKeyDown,!0),t.addEventListener(FM,this.onFocus),t.addEventListener(DM,this.onFocusout)}))}unbindEvents(){[...this.tables].forEach((t=>{t.removeEventListener(PM,this.onMouseDown),t.removeEventListener(IM,this.onClick),t.removeEventListener(MM,this.onKeyDown,!0),t.removeEventListener(FM,this.onFocus),t.removeEventListener(DM,this.onFocusout)}))}focusTable(){var t=this.tables[0],e=this.isPickerAnimationInProgress();t&&(e?setTimeout((()=>{nt(t)}),300):nt(t))}isPickerAnimationInProgress(){var t=ne(this.element,".k-child-animation-container");return!(!t||!t.isAnimationInProgress)&&t.isAnimationInProgress()}}function NM(t,e){Zt(LM,t,e)}class BM extends bM{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===de.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===de.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.removeEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.pickerElement.querySelector(e);i&&i.focus()}focusTable(){var t=this;setTimeout((()=>{var e=t.pickerElement&&t.pickerElement.querySelector("table");e instanceof HTMLElement&&e.focus()}),100)}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{var t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function jM(t,e){Zt(BM,t,e)}function zM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var UM="blur",$M="click";class HM extends H{constructor(t,e){super(t,e),zM(this,"options",{dotNetInstance:null,startTarget:null,endTarget:null,pickerAnimationContainerId:"",jsinterop:{change:"",close:"",open:""}}),zM(this,"onStartEnterKeyDown",(()=>{this.triggerStartChanged(),this.focusEndInput()})),zM(this,"onEndEnterKeyDown",(()=>{this.triggerEndChanged(),this.invokeClose()})),zM(this,"onPickerShiftTab",((t,e)=>{var i=ht(this.pickerElement,!1);return e.target!==i||(this.focusEndInput(),!1)})),zM(this,"onPickerTab",((t,e)=>{var i=this.pickerElement.querySelector("table:last-child");return e.target===i&&this.triggerClose(),!0})),zM(this,"triggerStartOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.startTarget),!0))),zM(this,"triggerEndOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.endTarget),!0))),zM(this,"triggerStartChanged",(()=>{this.invokeChange(this.options.startTarget)})),zM(this,"triggerEndChanged",(()=>{this.invokeChange(this.options.endTarget)})),zM(this,"triggerClose",(()=>(this.invokeClose(),!0))),zM(this,"focusPickerCalendar",(()=>!!this.isClosed()||(this.pickerElement.querySelector("table").focus(),!1))),zM(this,"closePicker",(()=>!!this.isClosed()||(this.triggerClose(),this.focusStartInput(),!1)));var i=this.element.querySelectorAll(".k-input-inner");this.startInput=i[0],this.endInput=i[1],this.setOptions(e),this.bindEvents()}setOptions(t){super.setOptions(t),this.pickerElement=G(t.pickerAnimationContainerId),this.destroyNavigationServices(),this.initNavigationServices()}bindEvents(){this.startInput.addEventListener(UM,this.triggerStartChanged),this.endInput.addEventListener(UM,this.triggerEndChanged),this.startInput.addEventListener($M,this.triggerStartOpen,!0),this.endInput.addEventListener($M,this.triggerEndOpen,!0)}unbindEvents(){this.startInput.removeEventListener(UM,this.triggerStartChanged),this.endInput.removeEventListener(UM,this.triggerEndChanged),this.startInput.removeEventListener($M,this.triggerStartOpen,!0),this.endInput.removeEventListener($M,this.triggerEndOpen,!0)}destroy(){this.unbindEvents(),this.destroyNavigationServices(),super.destroy()}initNavigationServices(){this.navigationServices=[this.initStartInputNavigationService(),this.initEndInputNavigationService(),this.initPickerNavigationService()]}destroyNavigationServices(){this.navigationServices&&this.navigationServices.forEach((t=>t.destroy()))}initStartInputNavigationService(){var t=new ve(this.startInput);return t.bind([fe.ESC,"".concat(ge.ALT," ").concat(fe.ARROWUP)],this.closePicker),t.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.triggerStartOpen),t.bind(fe.ENTER,this.onStartEnterKeyDown),t.bind("".concat(ge.SHIFT," ").concat(fe.TAB),this.triggerClose),t}initEndInputNavigationService(){var t=new ve(this.endInput);return t.bind([fe.ESC,"".concat(ge.ALT," ").concat(fe.ARROWUP)],this.closePicker),t.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.triggerEndOpen),t.bind(fe.TAB,this.focusPickerCalendar),t.bind(fe.ENTER,this.onEndEnterKeyDown),t}initPickerNavigationService(){var t=new ve(this.pickerElement);return t.bind("".concat(ge.SHIFT," ").concat(fe.TAB),this.onPickerShiftTab),t.bind("".concat(fe.TAB),this.onPickerTab),t.bind([fe.ESC,"".concat(ge.ALT," ").concat(fe.ARROWUP)],this.closePicker),t}focusStartInput(){this.startInput.focus()}focusEndInput(){this.endInput.focus()}invokeChange(t){this.invokeMethodAsync(this.options.jsinterop.change,t)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t)}isClosed(){return!this.pickerElement||!this.pickerElement.children[0].children.length}}function VM(t,e){Zt(HM,t,e)}function qM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class WM extends H{constructor(t,e){super(t,e),qM(this,"options",{dotNetInstance:null,jsinterop:{keydown:""}}),qM(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==de.ESCAPE||this.invokeKeyDown(t)})),this.extendOptions(e),this.bindEvents(),this.elementDataId=this.element.dataset.id,this.enableTabKeyTrap(),this.focusElement()}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown)}onAfterShow(t){this.unbindEvents(),this.options=t[0],this.element=G(this.elementDataId),this.bindEvents(),this.keyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.restoreFocus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}enableTabKeyTrap(){this.keyTrap=new Ce(this.element),this.keyTrap.enableKeyTrap()}disableTabKeyTrap(){this.keyTrap&&this.keyTrap.disableTabKeyTrap()}focusElement(){if(this.elementToFocusOnClose=document.activeElement,this.options.focusedElementSelector){var t=this.element.querySelector(this.options.focusedElementSelector);t instanceof HTMLElement&&nt(t)}else pt(this.elementDataId)}restoreFocus(){this.elementToFocusOnClose&&(this.elementToFocusOnClose.focus(),this.elementToFocusOnClose=null)}}function XM(t,e){Zt(WM,t,e)}function GM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var KM=F("field"),YM=F("text"),JM="k-indicator-container";class ZM extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),GM(this,"options",{dotNetInstance:null,parentSelector:".k-grid",dropTargetSelector:".k-grouping-header",dropTarget:{group:null,itemSelector:ni(JM)},jsinterop:{addGroup:""}}),GM(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=e.getAttribute(KM),n=t.draggable.getElementUnderCursor(t).closest(this.dropTarget.options.itemSelector),r=e.getAttribute(YM),s=Nt(n);if(s<0){var o=He(this.dropTarget.element.querySelectorAll(this.dropTarget.options.itemSelector));s=Nt(o)}i&&s>=0&&this.invokeAddGroup({field:i,title:r,index:s})})),GM(this,"allowsDragFrom",(t=>!this.containsGroup(t.originalCurrentTarget)&&t.originalCurrentTarget.hasAttribute(KM))),GM(this,"allowsDropFrom",(t=>!this.containsGroup(t.originalCurrentTarget))),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.dropTargetSelector);t&&(this.dropTarget=new fi(t,g(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}})))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}containsGroup(t){var e=t.getAttribute(KM),i=Array.from(this.element.querySelectorAll(ni(JM))).map((t=>t.getAttribute(KM))).includes(e);return i}invokeAddGroup(t){this.invokeMethodAsync(this.options.jsinterop.addGroup,t)}}function QM(t,e){Zt(ZM,ae(t,"Groupable"),e)}function tP(t){Qt(ae(t,"Groupable"))}function eP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var iP=F("field"),nP=F("text"),rP="k-drag-status",sP="k-i-plus",oP="k-i-cancel",aP="k-grouping-dropclue",lP=t=>{var e=E({position:"absolute","z-index":2e4}),i=(t=>t instanceof HTMLElement&&(t.getAttribute(nP)||t.getAttribute(iP))||"")(t),n=t.getAttribute(iP)||"",r=t.getAttribute(nP)||"";return j('<div class="k-header k-drag-clue" style="'.concat(e,'" data-field="').concat(_(n),'" data-text="').concat(_(r),'">\n            <span class="k-icon k-drag-status k-i-cancel k-icon-with-modifier">\n                <span class="k-icon k-icon-modifier"></span>\n            </span>\n            ').concat(_(i),"\n        </div>"))},cP=t=>t&&t.hasAttribute("data-field");class hP extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),eP(this,"options",{parentSelector:".k-grid",draggableSourceSelector:".k-grid-header",draggable:{group:null,filter:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",ignore:".k-grid-header-menu, .k-checkbox, .k-column-resizer"}}),eP(this,"onDraggableDrag",(t=>{this.canDragToAnyDropTarget(t)||t.preventDefault()})),eP(this,"onDraggableDrop",(()=>{this.destroyDropClue()})),eP(this,"onDropTargetLeave",(()=>{this.showDisabledHint(),this.destroyDropClue()})),eP(this,"onDropTargetOver",(t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()})),eP(this,"ignoreElementUnderCursor",(t=>{var e=t&&t.closest(ni(aP));return Boolean(e)})),this.extendOptions(e),this.createDraggable()}destroy(){this.destroyDropClue(),this.destroyDraggable(),super.destroy()}extendOptions(t){this.options=g(this.options,t)}createDraggable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.draggableSourceSelector);t&&(this.draggable=new yi(t,g(this.options.draggable,{hint:lP,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{drag:this.onDraggableDrag,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}destroyDraggable(){this.draggable&&this.draggable.destroy()}canDragToAnyDropTarget(t){var e=!1;return this.draggable.forEachDropTarget((i=>{e=e||i.allowsDragFrom(this.draggable,t)})),e}canDrop(t){return t.dropTarget&&t.dropTarget.allowsDropFrom(this.draggable,t)}showEnabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(ni(rP));Z(oP,e),J(sP,e)}}showDisabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(ni(rP));J(oP,e),Z(sP,e)}}createDropClue(){this.dropClue||(this.dropClue=new vi,this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(t.dropTarget&&t.elementUnderCursor){var e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,i=t.draggable.originalCurrentTarget,n=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,r=Lt(e,i),s=r?Rt(e,i):n&&!cP(e),o=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:r});if(o){this.createDropClue();var a=this.dropClue.getOffsetState(o,s);if(!s){var{width:l}=this.dropClueSize;a.left-=l/2}this.showDropClue(a)}}}getDropClueOffsetElement(t){var{elementUnderCursor:e,dropTargeElement:i,dropTargetItemSelector:n,isDragInSiblings:r}=t,s=e.closest(n),o=this.getDropTargetIndicators(i,n),a=o.filter(cP),l=He(o),c=He(a)||l;return s&&(r||cP(s))&&(c=s),c}showDropClue(t){var{top:e,left:i,height:n}=t;this.dropClue||this.createDropClue(),this.dropClue.setState({top:e,left:i,height:n}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}}function uP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zt(hP,ae(t,"ColumnDraggable"),e)}function pP(t){Qt(ae(t,"ColumnDraggable"))}function dP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fP=F("reorderable"),gP=F("parent-col-initialization-index");class mP extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),dP(this,"options",{parentSelector:".k-grid",reorderableSourceSelector:".k-grid-header",dropTarget:{itemSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)"}}),dP(this,"allowsDragFrom",(t=>{var e=Boolean(t.originalCurrentTarget.getAttribute(fP)),i=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&i})),dP(this,"allowsDropFrom",((t,e)=>{var i=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),n=t.originalCurrentTarget;if(!i||!n)return!1;var r=Boolean(n.getAttribute(fP)),s=N(gP,i),o=N(gP,n);return r&&i!==n&&s===o})),dP(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector),n=Xe(e),r=Xe(i),s=n>=0?n:Nt(e,this.options.dropTarget.itemSelector),o=r>=0?r:Nt(i,this.options.dropTarget.itemSelector);document.activeElement&&document.activeElement.blur(),this.reorderColumn(s,o)})),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.reorderableSourceSelector);this.dropTarget=new fi(t,g(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderColumn(t,e){t>=0&&e>=0&&t!==e&&this.invokeMethodAsync(this.options.jsinterop.reorderColumn,{fromIndex:t,toIndex:e})}}function yP(t,e){Zt(mP,ae(t,"ColumnReorderable"),e)}function vP(t){Qt(ae(t,"ColumnReorderable"))}function bP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wP extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),bP(this,"options",{events:{resizeStart:null,resize:null,resizeEnd:null},draggable:{filter:""}}),bP(this,"onDraggableDragStart",(t=>{this.initialLocation={pageX:t.pageX,pageY:t.pageY},this.location={pageX:t.pageX,pageY:t.pageY},this.delta={x:0,y:0},this.initialDelta={x:0,y:0},this.trigger("resizeStart",t)})),bP(this,"onDraggableDrag",(t=>{this.setCursorStyle(t.sender.originalCurrentTarget.style.cursor),this.calculateInitialDelta(t),this.calculateDelta(t),this.setLocation(t),this.trigger("resize",t)})),bP(this,"onDraggableDragEnd",(t=>{this.resetCursorStyle(),this.trigger("resizeEnd",t)})),this.extendOptions(e),this.createDraggable(t)}destroy(){this.destroyDraggable(),super.destroy()}createDraggable(){this.draggable=new yi(this.element,g(this.options.draggable,{events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd}}))}destroyDraggable(){this.draggable&&this.draggable.destroy()}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{initialLocation:this.initialLocation,location:this.location,delta:this.delta,initialDelta:this.initialDelta}))}calculateDelta(t){this.delta={x:t.pageX-this.location.pageX,y:t.pageY-this.location.pageY}}calculateInitialDelta(t){this.initialDelta={x:t.pageX-this.initialLocation.pageX,y:t.pageY-this.initialLocation.pageY}}setLocation(t){var{pageX:e,pageY:i}=t;this.location={pageX:e,pageY:i}}setCursorStyle(t){t&&(document.body.style.cursor=t)}resetCursorStyle(){document.body.style.cursor=""}}function xP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var SP="dblclick",kP=Array.from,CP=t=>parseFloat(t)+"px",AP=(t,e)=>{t.style.width=CP(e)},_P=t=>t.getBoundingClientRect().width,TP=t=>Boolean(t.style.width),OP=(t,e,i)=>i?he(t,e,i):Math.max(t,e),EP="k-column-resizer";class MP extends H{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),xP(this,"options",{parentSelector:".k-grid",resizableSourceSelector:".k-grid-header",dataRowSelector:"tr:not(.k-grouping-row)",columnSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",contentTableSelector:".k-grid-table",contentRowSelector:"tr.k-master-row",contentCellSelector:"td:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",footerTableSelector:".k-grid-footer table",footerRowSelector:"tr.k-group-footer",columns:[],defaultMinResizableWidth:30,dragResizing:!0,resizable:{draggable:{filter:".k-column-resizer"}},jsinterop:{resizeColumns:""}}),xP(this,"onResizableResizeStart",(t=>{this.resetState(),this.setFixedWidths();var e=t.originalCurrentTarget.closest(this.options.columnSelector);this.setState({originColumn:{element:e,initialWidth:_P(e)}}),this.rescaleColumns()})),xP(this,"onResizableResize",(t=>{var e=this.state.originColumn.element,i=_P(e),n=this.getColumnIndex(e),{minWidth:r,maxWidth:s}=this.getResizingConstraints(n),o=this.state.originColumn.initialWidth+t.initialDelta.x,a=s&&s<i||r>i,l=t.delta.x>0&&o<=r,c=s&&t.delta.x<0&&o>=s;(a||!l&&!c)&&this.applyResizeDelta(e,t.delta.x)})),xP(this,"onResizableResizeEnd",(()=>{this.state.columns.length>0&&this.invokeResizeColumns({columns:this.state.columns,tableWidth:this.state.tableWidth})})),xP(this,"onDoubleClick",(t=>{if(Q(EP,t.target)){var e=t.target.closest(this.options.columnSelector);this.autoFitColumnElements([e])}})),this.extendOptions(e),this.bindEvents(),this.options.dragResizing&&this.createResizable(),this.resetState()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}createResizable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.resizableSourceSelector);this.resizable=new wP(t,g(this.options.resizable,{events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&this.resizable.destroy()}bindEvents(){this.element.addEventListener(SP,this.onDoubleClick)}unbindEvents(){this.element.removeEventListener(SP,this.onDoubleClick)}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({columns:[],tableWidth:null,originColumn:{element:{},initialWidth:null}})}setColumns(t){this.options.columns=t}autoFitAllColumns(){var t=this.getLeafHeaderCells();this.autoFitColumnElements(t)}autoFitColumns(t){var e=t.map((t=>this.element.querySelector($e(t))));this.autoFitColumnElements(e)}autoFitColumnElements(t){var e=[];this.setFixedWidths(),this.rescaleColumns(),t.forEach((t=>{if(t&&!We(t)){var i=this.getHeaderCellLeafIndex(t),n=this.getColumnIndex(t);if(this.isContentCellVisible(i)){var r=this.getColumnWidth(i,n);this.resizeColumn(t,r);var s=_P(t);e.push({index:n,width:CP(s)})}}})),e.length>0&&this.invokeResizeColumns({columns:e,tableWidth:CP(_P(this.getHeaderTable()))})}getColumnWidth(t,e){var i=this.getContentColumnWidth(t,e),n=this.getHeaderColumnWidth(t,e),r=this.getFooterColumnWidth(t,e);return Math.max(i,n,r)}getContentColumnWidth(t,e){var i=this.getContentCellVirtualIndex(t);return i<0?0:this.calculateColumnWidth({columnIndex:i,columnInitializationIndex:e,tableElement:this.getContentTable(),cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-content"})}getHeaderColumnWidth(t,e){return this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:this.getHeaderTable(),cellSelector:this.options.columnSelector,scrollContainerSelector:".k-grid-header-wrap"})}getFooterColumnWidth(t,e){var i=this.getFooterTable();return i?this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:i,cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-footer-wrap"}):0}calculateColumnWidth(t){var{columnIndex:e,columnInitializationIndex:i,tableElement:n,cellSelector:r,scrollContainerSelector:s}=t,o=this.getTableColumns(n)[e],a=s?n.closest(s):null,l=o.style.width,c=null!==a?a.scrollLeft:0;o.style.width="",J("k-autofitting",n);var h=n.querySelector($e(i))||n.querySelector(this.options.dataRowSelector).querySelectorAll(r)[e],u=_P(h);return Z("k-autofitting",n),o.style.width=l,a&&(a.scrollLeft=c),u}setFixedWidths(){var t=this.getHeaderColumns(),e=this.getHeaderTable(),i=this.getContentTable(),n=this.getFooterTable();if(!(t.every(TP)&&TP(e)&&TP(i))){AP(e,_P(e)),AP(i,_P(i)),n&&AP(n,_P(n));var r=this.hasMultiColumnHeaders()?this.getLeafHeaderCells():this.getHeaderCells(),s=this.getHeaderCells().sort(Qe);this.leafHeaderCellsFixedWidths=[],this.headerCellsFixedWidths=[];for(var o=0;o<r.length;o++){var a=_P(r[o]);this.leafHeaderCellsFixedWidths.push(a)}for(var l=0;l<s.length;l++){var c=_P(s[l]);this.headerCellsFixedWidths.push(c)}for(var h=0;h<r.length;h++)this.resizeHeaderColumn(h,this.leafHeaderCellsFixedWidths[h]),this.resizeContentColumn(h,this.leafHeaderCellsFixedWidths[h]),n&&this.resizeFooterColumn(h,this.leafHeaderCellsFixedWidths[h])}}applyResizeDelta(t,e){t&&this.resizeColumn(t,_P(t)+e,e)}resizeColumn(t,e){var i=this.getFooterTable(),n=[];if(t){var r,s=this.getColumnIndex(t),o=this.hasMultiColumnHeaders(),a=this.getHeaderCellLeafIndex(t),l=[];if(o)l=((t,e)=>{var i=Ye(t,e);return i.filter((t=>i.every((e=>!ti(t.element,e.element)))))})(t,this.getHeaderCells().sort(Ze));r=l.length>0?{minWidth:this.options.defaultMinResizableWidth,maxWidth:null}:this.getResizingConstraints(s);var c=OP(e,r.minWidth,r.maxWidth),h=c-_P(t);if(!(-.05<=h&&h<=.05)){if(n.push({index:s,width:CP(c)}),l.length){var u=[],p=0,d=h/l.length;l.forEach((t=>{var e=t.index,i=t.leafIndex,n=this.getHeaderColWidth(t.leafIndex),{minWidth:r,maxWidth:s}=this.getResizingConstraints(t.index),o=OP(n+d,r,s);u.push({index:e,leafIndex:i,newWidth:o})})),u.forEach((t=>{this.resizeHeaderColumn(t.leafIndex,t.newWidth),this.resizeContentColumn(t.leafIndex,t.newWidth),p+=t.newWidth,n.push({index:t.index,width:CP(t.newWidth)})})),n[0].width=CP(p);var f=p-_P(t);this.resizeHeaderTable(f),this.resizeContentTable(f),this.resizeLockedColumns(),i&&(this.resizeFooterTable(f),u.forEach((t=>{this.resizeFooterColumn(t.leafIndex,t.newWidth)})))}else this.resizeHeaderTable(h),this.resizeContentTable(h),this.resizeHeaderColumn(a,c),this.resizeContentColumn(a,c),this.resizeLockedColumns(),i&&(this.resizeFooterTable(h),this.resizeFooterColumn(a,c));this.setState({columns:n,tableWidth:CP(_P(this.getHeaderTable()))})}}}resizeHeaderColumn(t,e){var i=this.getHeaderColumnByIndex(t);AP(i,e)}resizeContentColumn(t,e){var i=this.getContentColumnByIndex(t);AP(i,e)}resizeFooterColumn(t,e){var i=this.getFooterColumnByIndex(t);AP(i,e)}resizeHeaderTable(t){this.resizeTable(this.getHeaderTable(),t)}resizeContentTable(t){this.resizeTable(this.getContentTable(),t)}resizeFooterTable(t){this.resizeTable(this.getFooterTable(),t)}resizeTable(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&AP(t,_P(t)+e)}resizeLockedColumns(){this.resizeLockedHeaderCells(),this.resizeLockedContentCells(),this.resizeLockedFooterCells()}resizeLockedHeaderCells(){var t=this.getHeaderCells().sort(Ze);this.setLockedCellsOffsets(t)}resizeLockedContentCells(){var t=this.getContentRows();this.resizeLockedCellsForRows(t)}resizeLockedFooterCells(){var t=this.getFooterRows();this.resizeLockedCellsForRows(t)}resizeLockedCellsForRows(t){for(var e=0;e<t.length;e++){var i=t[e].querySelectorAll(this.options.contentCellSelector);this.setLockedCellsOffsets(i)}}setLockedCellsOffsets(t){this.setLockedCellsOffsetLeft(t),this.setLockedCellsOffsetRight(t)}setLockedCellsOffsetLeft(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.left=CP(e)})(t,e)}))}setLockedCellsOffsetRight(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.right=CP(e)})(t,e)}),{iterateBackwards:!0})}setLockedCellOffset(t,e){for(var{iterateBackwards:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getMaxLevel(t),r=new Array(n).fill(0),s=0;s<t.length;s++){var o=t[i?t.length-1-s:s];if(Pe(o)){var a=_P(o),l=qe(o),c=Math.max(0,l-1);if(e(o,r[c]),We(o))r[c]+=a;else for(var h=c;h<r.length;h++)r[h]+=a}}}getMaxLevel(t){for(var e=1,i=0;i<t.length;i++){var n=qe(t[i]);e=Math.max(e,n)}return e}invokeResizeColumns(t){if(x(t.columns)&&x(t.tableWidth))return this.invokeMethodAsync(this.options.jsinterop.resizeColumns,{columns:t.columns,tableWidth:t.tableWidth})}rescaleColumns(){this.headerCellsFixedWidths&&(this.invokeRescaleColumns(this.headerCellsFixedWidths.map((t=>"".concat(t,"px")))),this.headerCellsFixedWidths=null)}invokeRescaleColumns(t){return this.invokeMethodAsync(this.options.jsinterop.rescaleColumns,t)}getHeaderTable(){return this.element.closest("table")}getContentTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.contentTableSelector)}getFooterTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.footerTableSelector)}getHeaderColumnByIndex(t){return this.getHeaderColumns()[t]}getHeaderColumns(){return this.getTableColumns(this.getHeaderTable())}getHeaderColWidth(t){var e,i,n=this.getHeaderColumnByIndex(t);return e=n,i=parseFloat(e.style.width),Number.isNaN(i)?_P(e):i}getHeaderCellByIndex(t){return this.getHeaderCells()[t]}getHeaderCells(){return kP(this.element.querySelectorAll(this.options.columnSelector))}getLeafHeaderCells(){var t=this.getHeaderCells();return Je(t).sort(Ze)}getHeaderCellLeafIndex(t){return this.getLeafHeaderCells().indexOf(t)}getContentColumnByIndex(t){return this.getContentColumns()[t]}getContentColumns(){return this.getTableColumns(this.getContentTable())}getTableColumns(t){var e=t.querySelector("colgroup").querySelectorAll("col:not(.k-group-col):not(.k-hierarchy-col):not(.k-drag-col)");return kP(e)}getContentRows(){return this.queryContentTable(this.options.contentRowSelector)}getFooterColumnByIndex(t){return this.getFooterColumns()[t]}getFooterColumns(){return this.getTableColumns(this.getFooterTable())}getFooterRows(){return this.queryContentTable(this.options.footerRowSelector)}getColumnIndex(t){var e=Xe(t);return e>=0?e:Nt(t,this.options.columnSelector)}queryContentTable(t){var e=this.getContentTable().querySelectorAll(t);return kP(e)}hasMultiColumnHeaders(){return this.element.querySelectorAll("tr").length>1}getFirstContentRow(){return this.getContentTable().querySelector(this.options.dataRowSelector)}getContentCellVirtualIndex(t){var e=this.getFirstContentRow();if(!e)return-1;var i=e.querySelector(this.options.contentCellSelector),n=t;return i&&i.colSpan>1&&(n-=i.colSpan-1),n}isContentCellVisible(t){var e=this.getContentCellVirtualIndex(t),i=this.getFirstContentRow();if(!i)return!1;var n=i.querySelectorAll(this.options.contentCellSelector);return!!n&&(e>=0&&e<n.length)}getResizingConstraints(t){var e=this.options.columns[t]||{};return{minWidth:Math.max(e.minResizableWidth,this.options.defaultMinResizableWidth),maxWidth:e.maxResizableWidth}}}function PP(t,e){Zt(MP,ae(t,"ColumnResizable"),e)}function IP(t){Qt(ae(t,"ColumnResizable"))}function FP(t,e){var i=ie(ae(t,"ColumnResizable"));i&&i.autoFitColumns(e)}function DP(t){var e=ie(ae(t,"ColumnResizable"));e&&e.autoFitAllColumns()}function RP(t,e){var i=ie(ae(t,"ColumnResizable"));i&&i.setColumns(e)}function LP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var NP=[fe.ENTER,fe.ARROWDOWN,fe.ARROWUP],BP=()=>C(20);class jP extends H{constructor(t,e){super(t,e),LP(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",focusout:"",collapse:""},mode:"",duration:0}),LP(this,"onMouseDown",(t=>{var e=t.target;"overlay"!==this.options.mode||et(e,[this.element])||this.invokeCollapse()})),LP(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),LP(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.bindEvents(),this.createNavigationService()}expandAsync(){return BP().then((()=>this.onTransitionEnd()))}collapseAsync(){return BP().then((()=>this.onTransitionEnd()))}destroy(){this.unbindEvents(),this.destroyNavigationService(),super.destroy()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("mousedown",this.onMouseDown,!0)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("mousedown",this.onMouseDown,!0)}focusItem(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e instanceof HTMLElement&&e.focus()}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}onTransitionEnd(){var t=this.options.duration;return this.timer=A(t),this.timer.promise}createNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(NP,this.onKeyDown)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocusOut(t){var e=t.target.closest(".k-drawer-item[role='menuitem'"),i=e?parseInt(e.getAttribute("data-index")):null;setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,i)}),1)}invokeCollapse(){this.invokeMethodAsync(this.options.jsinterop.collapse)}}function zP(t,e){Zt(jP,t,e)}function UP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $P=[fe.ENTER,fe.ESC],HP=[fe.HOME,fe.END];class VP extends H{constructor(t,e){super(t,e),UP(this,"options",{dotNetInstance:null,suggestionListId:null,jsinterop:{focus:null,blur:null,keydown:null}}),UP(this,"onKeyDown",(t=>(this.invokeKeyDown(t),this.isClosed()))),UP(this,"onSuggestionListKeys",(t=>!!this.isClosed()||(this.invokeKeyDown(t),!1))),UP(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),UP(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),UP(this,"invokeFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),this.setOptions(e),this.initNavigationService()}setOptions(t){super.setOptions(t),this.suggestionListElement=G(t.suggestionListId)}destroy(){this.destroyNavigationService(),this.suggestionListElement=null,super.destroy()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind($P,this.onKeyDown),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.onKeyDown),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWUP),this.onKeyDown),this.navigationService.bind(HP,this.onSuggestionListKeys)}destroyNavigationService(){this.navigationService.destroy()}isClosed(){return!this.suggestionListElement||!this.suggestionListElement.children[0].children.length}}function qP(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var WP="blur",XP="focus";class GP extends VP{constructor(t,e){super(t,e),qP(this,"options",{value:null}),qP(this,"onBlur",(t=>{var e=t.relatedTarget;V(this.suggestionListElement,e)||V(this.element,e)?e.closest(".k-actionsheet")||this.focus():this.invokeBlur()})),qP(this,"onFocus",(()=>{this.invokeFocus()})),this.extendOptions(e),this.input=this.element.querySelector("input"),this.setValue(e.value),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.input=null}bindEvents(){this.input.addEventListener(WP,this.onBlur),this.input.addEventListener(XP,this.onFocus)}unbindEvents(){this.input.removeEventListener(WP,this.onBlur),this.input.removeEventListener(XP,this.onFocus)}setValue(t){this.input&&(this.input.value=t)}focus(){this.input&&this.input.focus()}}var KP=[fe.ARROWDOWN,fe.ARROWUP];class YP extends GP{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(KP,this.onSuggestionListKeys)}}function JP(t,e){Zt(YP,t,e)}var ZP=[fe.ARROWDOWN,fe.ARROWUP];class QP extends GP{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(ZP,this.invokeKeyDown)}}function tI(t,e){Zt(QP,t,e)}function eI(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var iI="blur",nI="click",rI=[fe.ARROWDOWN,fe.ARROWUP];class sI extends VP{constructor(t,e){super(t,e),eI(this,"focus",(()=>{Q("k-disabled",this.element)||this.element.focus()})),eI(this,"onBlur",(t=>{var e=t.relatedTarget;V(this.suggestionListElement,e)?e.closest("".concat(".k-list-filter",",").concat(".k-actionsheet"))||this.element.focus():this.invokeBlur()})),eI(this,"onFocus",(()=>{this.invokeFocus()})),this.initLabel(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(iI,this.onBlur),this.element.addEventListener("focus",this.onFocus),this.bindLabelEvent(),this.navigationService.bind(rI,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.element.removeEventListener(iI,this.onBlur),this.unbindLabelEvent()}initLabel(){var t=this.element.getAttribute("id"),e=document.querySelector("[for='"+t+"']");if(e&&!this.element.getAttribute("aria-labelledby")){var i=e.getAttribute("id");i||(i=m(),e.setAttribute("id",i)),this.element.setAttribute("aria-labelledby",i)}this.label=e}bindLabelEvent(){this.label&&this.label.addEventListener(nI,this.focus)}unbindLabelEvent(){this.label&&this.label.removeEventListener(nI,this.focus)}}function oI(t,e){Zt(sI,t,e)}var aI="click";class lI extends GP{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onClick",(t=>{t.target instanceof HTMLElement&&!t.target.closest(".k-chip")&&!t.target.closest(".k-clear-value")&&(this.focus(),this.invokeClick())})),this.bindMultiSelectEvents()}destroy(){this.unbindMultiSelectEvents(),super.destroy()}bindMultiSelectEvents(){this.element.addEventListener(aI,this.onClick,!0),this.navigationService.bind([fe.ARROWDOWN,fe.ARROWUP],this.onSuggestionListKeys),this.navigationService.bind([fe.ARROWLEFT,fe.ARROWRIGHT],this.onTagFocus.bind(this)),this.navigationService.bind([fe.BACKSPACE,fe.DELETE],this.onTagDelete.bind(this))}unbindMultiSelectEvents(){this.element.removeEventListener(aI,this.onClick,!0)}onTagDelete(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}onTagFocus(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}invokeClick(){var t=this.options.jsinterop.click;this.invokeMethodAsync(t)}}function cI(t,e){Zt(lI,t,e)}var hI=[fe.ARROWDOWN,fe.ARROWUP];class uI extends GP{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,columnsTotalWidth:null}),this.extendOptions(e),this.adjustScrollbarPadding()}destroy(){this.destroyContentScrollSync(),super.destroy()}bindEvents(){super.bindEvents(),this.navigationService.bind(hI,this.invokeKeyDown)}adjustScrollbarPadding(){Bt()}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync(),this.tableScroller=this.suggestionListElement.querySelector(".k-table-scroller"),this.tableHeaderWrap=this.suggestionListElement.querySelector(".k-table-header-wrap"),this.contentScrollSync=new Me(this.tableScroller,{horizontal:!0,vertical:!1,syncFromConnections:!0,connections:[this.tableHeaderWrap]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null,this.tableScroller=null,this.tableHeaderWrap=null)}onOpen(){this.suggestionListElement&&this.createContentScrollSync()}onClose(){this.suggestionListElement&&this.destroyContentScrollSync()}}function pI(t,e){Zt(uI,t,e)}function dI(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fI="blur",gI=[fe.ARROWDOWN,fe.ARROWUP,fe.ENTER,fe.ESC,"".concat(ge.ALT," ").concat(fe.ARROWUP)];class mI extends H{constructor(t,e){super(t,e),dI(this,"options",{dotNetInstance:null,anchorDataId:"",jsinterop:{blur:null,keydown:null}}),dI(this,"onBlur",(t=>{var e=t.relatedTarget;e&&e.closest('[data-id="'.concat(this.options.anchorDataId,'"]'))||(V(this.element.closest(".k-popup"),e)?this.element.focus():this.invokeBlur())})),dI(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),dI(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),dI(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(fI,this.onBlur)}unbindEvents(){this.element.removeEventListener(fI,this.onBlur)}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(gI,this.onKeyDown)}destroyNavigationService(){this.navigationService.destroy()}}function yI(t,e){Zt(mI,t,e)}function vI(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class bI extends H{constructor(t,e){super(t,e),vI(this,"options",{dotNetInstance:null,parentSelector:null,containerSelector:null,jsinterop:{focus:null,blur:null,keydown:null}}),vI(this,"onScroll",(()=>{var t=It(this.scrollableContainer,"li");if(t){var e=N("data-group-index",t);this.currentGroupIndex!==e&&(this.currentGroupIndex=e,this.invokeMethodAsync(this.options.jsinterop.groupChanged,e))}})),this.extendOptions(e),this.scrollableContainer=t.closest(this.options.containerSelector).querySelector(this.options.parentSelector),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.scrollableContainer.addEventListener("scroll",this.onScroll)}unbindEvents(){this.scrollableContainer.removeEventListener("scroll",this.onScroll)}}function wI(t,e){Zt(bI,t,e)}function xI(t){this.content=t}xI.prototype={constructor:xI,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,i){var n=i&&i!=t?this.remove(i):this,r=n.find(t),s=n.content.slice();return-1==r?s.push(i||t,e):(s[r+1]=e,i&&(s[r]=i)),new xI(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var i=this.content.slice();return i.splice(e,2),new xI(i)},addToStart:function(t,e){return new xI([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var i=this.remove(t).content.slice();return i.push(t,e),new xI(i)},addBefore:function(t,e,i){var n=this.remove(e),r=n.content.slice(),s=n.find(t);return r.splice(-1==s?r.length:s,0,e,i),new xI(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=xI.from(t)).size?new xI(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=xI.from(t)).size?new xI(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=xI.from(t);for(var i=0;i<t.content.length;i+=2)e=e.remove(t.content[i]);return e},toObject:function(){var t={};return this.forEach((function(e,i){t[e]=i})),t},get size(){return this.content.length>>1}},xI.from=function(t){if(t instanceof xI)return t;var e=[];if(t)for(var i in t)e.push(i,t[i]);return new xI(e)};const SI=xI;function kI(t,e,i){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:i;let r=t.child(n),s=e.child(n);if(r!=s){if(!r.sameMarkup(s))return i;if(r.isText&&r.text!=s.text){for(let t=0;r.text[t]==s.text[t];t++)i++;return i}if(r.content.size||s.content.size){let t=kI(r.content,s.content,i+1);if(null!=t)return t}i+=r.nodeSize}else i+=r.nodeSize}}function CI(t,e,i,n){for(let r=t.childCount,s=e.childCount;;){if(0==r||0==s)return r==s?null:{a:i,b:n};let o=t.child(--r),a=e.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:i,b:n};if(o.isText&&o.text!=a.text){let t=0,e=Math.min(o.text.length,a.text.length);for(;t<e&&o.text[o.text.length-t-1]==a.text[a.text.length-t-1];)t++,i--,n--;return{a:i,b:n}}if(o.content.size||a.content.size){let t=CI(o.content,a.content,i-1,n-1);if(t)return t}i-=l,n-=l}else i-=l,n-=l}}class AI{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,i,n=0,r){for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;if(l>t&&!1!==i(a,n+o,r||null,s)&&a.content.size){let r=o+1;a.nodesBetween(Math.max(0,t-r),Math.min(a.content.size,e-r),i,n+r)}o=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,n){let r="",s=!0;return this.nodesBetween(t,e,((o,a)=>{o.isText?(r+=o.text.slice(Math.max(t,a)-a,e-a),s=!i):o.isLeaf?(n?r+="function"==typeof n?n(o):n:o.type.spec.leafText&&(r+=o.type.spec.leafText(o)),s=!i):!s&&o.isBlock&&(r+=i,s=!0)}),0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,n=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(i)&&(n[n.length-1]=e.withText(e.text+i.text),r=1);r<t.content.length;r++)n.push(t.content[r]);return new AI(n,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let i=[],n=0;if(e>t)for(let r=0,s=0;s<e;r++){let o=this.content[r],a=s+o.nodeSize;a>t&&((s<t||a>e)&&(o=o.isText?o.cut(Math.max(0,t-s),Math.min(o.text.length,e-s)):o.cut(Math.max(0,t-s-1),Math.min(o.content.size,e-s-1))),i.push(o),n+=o.nodeSize),s=a}return new AI(i,n)}cutByIndex(t,e){return t==e?AI.empty:0==t&&e==this.content.length?this:new AI(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let n=this.content.slice(),r=this.size+e.nodeSize-i.nodeSize;return n[t]=e,new AI(n,r)}addToStart(t){return new AI([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new AI(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let n=this.content[e];t(n,i,e),i+=n.nodeSize}}findDiffStart(t,e=0){return kI(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return CI(this,t,e,i)}findIndex(t,e=-1){if(0==t)return TI(0,t);if(t==this.size)return TI(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,n=0;;i++){let r=n+this.child(i).nodeSize;if(r>=t)return r==t||e>0?TI(i+1,r):TI(i,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return AI.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new AI(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return AI.empty;let e,i=0;for(let n=0;n<t.length;n++){let r=t[n];i+=r.nodeSize,n&&r.isText&&t[n-1].sameMarkup(r)?(e||(e=t.slice(0,n)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new AI(e||t,i)}static from(t){if(!t)return AI.empty;if(t instanceof AI)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new AI([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}AI.empty=new AI([],0);const _I={index:0,offset:0};function TI(t,e){return _I.index=t,_I.offset=e,_I}function OI(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let i=Array.isArray(t);if(Array.isArray(e)!=i)return!1;if(i){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!OI(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!OI(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}class EI{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let n=0;n<t.length;n++){let r=t[n];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,n));else{if(r.type.excludes(this.type))return t;!i&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,n)),e.push(this),i=!0),e&&e.push(r)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&OI(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);return i.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return EI.none;if(t instanceof EI)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}EI.none=[];class MI extends Error{}class PI{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=FI(this.content,t+this.openStart,e);return i&&new PI(i,this.openStart,this.openEnd)}removeBetween(t,e){return new PI(II(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return PI.empty;let i=e.openStart||0,n=e.openEnd||0;if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new PI(AI.fromJSON(t,e.content),i,n)}static maxOpen(t,e=!0){let i=0,n=0;for(let n=t.firstChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.firstChild)i++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)n++;return new PI(t,i,n)}}function II(t,e,i){let{index:n,offset:r}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(i);if(r==e||s.isText){if(a!=i&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(i))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(II(s.content,e-r-1,i-r-1)))}function FI(t,e,i,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r);if(s==e||o.isText)return n&&!n.canReplace(r,r,i)?null:t.cut(0,e).append(i).append(t.cut(e));let a=FI(o.content,e-s-1,i);return a&&t.replaceChild(r,o.copy(a))}function DI(t,e,i){if(i.openStart>t.depth)throw new MI("Inserted content deeper than insertion position");if(t.depth-i.openStart!=e.depth-i.openEnd)throw new MI("Inconsistent open depths");return RI(t,e,i,0)}function RI(t,e,i,n){let r=t.index(n),s=t.node(n);if(r==e.index(n)&&n<t.depth-i.openStart){let o=RI(t,e,i,n+1);return s.copy(s.content.replaceChild(r,o))}if(i.content.size){if(i.openStart||i.openEnd||t.depth!=n||e.depth!=n){let{start:r,end:o}=function(t,e){let i=e.depth-t.openStart,n=e.node(i).copy(t.content);for(let t=i-1;t>=0;t--)n=e.node(t).copy(AI.from(n));return{start:n.resolveNoCache(t.openStart+i),end:n.resolveNoCache(n.content.size-t.openEnd-i)}}(i,t);return zI(s,UI(t,r,o,e,n))}{let n=t.parent,r=n.content;return zI(n,r.cut(0,t.parentOffset).append(i.content).append(r.cut(e.parentOffset)))}}return zI(s,$I(t,e,n))}function LI(t,e){if(!e.type.compatibleContent(t.type))throw new MI("Cannot join "+e.type.name+" onto "+t.type.name)}function NI(t,e,i){let n=t.node(i);return LI(n,e.node(i)),n}function BI(t,e){let i=e.length-1;i>=0&&t.isText&&t.sameMarkup(e[i])?e[i]=t.withText(e[i].text+t.text):e.push(t)}function jI(t,e,i,n){let r=(e||t).node(i),s=0,o=e?e.index(i):r.childCount;t&&(s=t.index(i),t.depth>i?s++:t.textOffset&&(BI(t.nodeAfter,n),s++));for(let t=s;t<o;t++)BI(r.child(t),n);e&&e.depth==i&&e.textOffset&&BI(e.nodeBefore,n)}function zI(t,e){if(!t.type.validContent(e))throw new MI("Invalid content for node "+t.type.name);return t.copy(e)}function UI(t,e,i,n,r){let s=t.depth>r&&NI(t,e,r+1),o=n.depth>r&&NI(i,n,r+1),a=[];return jI(null,t,r,a),s&&o&&e.index(r)==i.index(r)?(LI(s,o),BI(zI(s,UI(t,e,i,n,r+1)),a)):(s&&BI(zI(s,$I(t,e,r+1)),a),jI(e,i,r,a),o&&BI(zI(o,$I(i,n,r+1)),a)),jI(n,null,r,a),new AI(a)}function $I(t,e,i){let n=[];if(jI(null,t,i,n),t.depth>i){BI(zI(NI(t,e,i+1),$I(t,e,i+1)),n)}return jI(e,null,i,n),new AI(n)}PI.empty=new PI(AI.empty,0,0);class HI{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],n=t.child(e);return i?t.child(e).cut(i):n}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[3*e],n=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)n+=i.child(e).nodeSize;return n}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return EI.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),n=t.maybeChild(e);if(!i){let t=i;i=n,n=t}let r=i.marks;for(var s=0;s<r.length;s++)!1!==r[s].type.spec.inclusive||n&&r[s].isInSet(n.marks)||(r=r[s--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,n=t.parent.maybeChild(t.index());for(var r=0;r<i.length;r++)!1!==i[r].type.spec.inclusive||n&&i[r].isInSet(n.marks)||(i=i[r--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new XI(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],n=0,r=e;for(let e=t;;){let{index:t,offset:s}=e.content.findIndex(r),o=r-s;if(i.push(e,t,n+s),!o)break;if(e=e.child(t),e.isText)break;r=o-1,n+=s+1}return new HI(e,i,r)}static resolveCached(t,e){for(let i=0;i<VI.length;i++){let n=VI[i];if(n.pos==e&&n.doc==t)return n}let i=VI[qI]=HI.resolve(t,e);return qI=(qI+1)%WI,i}}let VI=[],qI=0,WI=12;class XI{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const GI=Object.create(null);class KI{constructor(t,e,i,n=EI.none){this.type=t,this.attrs=e,this.marks=n,this.content=i||AI.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,n=0){this.content.nodesBetween(t,e,i,n,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,n){return this.content.textBetween(t,e,i,n)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&OI(this.attrs,e||t.defaultAttrs||GI)&&EI.sameSet(this.marks,i||EI.none)}copy(t=null){return t==this.content?this:new KI(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new KI(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return PI.empty;let n=this.resolve(t),r=this.resolve(e),s=i?0:n.sharedDepth(e),o=n.start(s),a=n.node(s).content.cut(n.pos-o,r.pos-o);return new PI(a,n.depth-s,r.depth-s)}replace(t,e,i){return DI(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:n}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(n==t||e.isText)return e;t-=n+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let n=this.content.child(e-1);return{node:n,index:e-1,offset:i-n.nodeSize}}resolve(t){return HI.resolveCached(this,t)}resolveNoCache(t){return HI.resolve(this,t)}rangeHasMark(t,e,i){let n=!1;return e>t&&this.nodesBetween(t,e,(t=>(i.isInSet(t.marks)&&(n=!0),!n))),n}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),JI(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=AI.empty,n=0,r=i.childCount){let s=this.contentMatchAt(t).matchFragment(i,n,r),o=s&&s.matchFragment(this.content,e);if(!o||!o.validEnd)return!1;for(let t=n;t<r;t++)if(!this.type.allowsMarks(i.child(t).marks))return!1;return!0}canReplaceWith(t,e,i,n){if(n&&!this.type.allowsMarks(n))return!1;let r=this.contentMatchAt(t).matchType(i),s=r&&r.matchFragment(this.content,e);return!!s&&s.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let t=EI.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!EI.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let n=AI.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,n,i)}}KI.prototype.text=void 0;class YI extends KI{constructor(t,e,i,n){if(super(t,e,null,n),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):JI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new YI(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new YI(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function JI(t,e){for(let i=t.length-1;i>=0;i--)e=t[i].type.name+"("+e+")";return e}class ZI{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new QI(t,e);if(null==i.next)return ZI.empty;let n=tF(i);i.next&&i.err("Unexpected trailing text");let r=function(t){let e=Object.create(null);return i(oF(t,0));function i(n){let r=[];n.forEach((e=>{t[e].forEach((({term:e,to:i})=>{if(!e)return;let n;for(let t=0;t<r.length;t++)r[t][0]==e&&(n=r[t][1]);oF(t,i).forEach((t=>{n||r.push([e,n=[]]),-1==n.indexOf(t)&&n.push(t)}))}))}));let s=e[n.join(",")]=new ZI(n.indexOf(t.length-1)>-1);for(let t=0;t<r.length;t++){let n=r[t][1].sort(sF);s.next.push({type:r[t][0],next:e[n.join(",")]||i(n)})}return s}}(function(t){let e=[[]];return r(s(t,0),i()),e;function i(){return e.push([])-1}function n(t,i,n){let r={term:n,to:i};return e[t].push(r),r}function r(t,e){t.forEach((t=>t.to=e))}function s(t,e){if("choice"==t.type)return t.exprs.reduce(((t,i)=>t.concat(s(i,e))),[]);if("seq"!=t.type){if("star"==t.type){let o=i();return n(e,o),r(s(t.expr,o),o),[n(o)]}if("plus"==t.type){let o=i();return r(s(t.expr,e),o),r(s(t.expr,o),o),[n(o)]}if("opt"==t.type)return[n(e)].concat(s(t.expr,e));if("range"==t.type){let o=e;for(let e=0;e<t.min;e++){let e=i();r(s(t.expr,o),e),o=e}if(-1==t.max)r(s(t.expr,o),o);else for(let e=t.min;e<t.max;e++){let e=i();n(o,e),r(s(t.expr,o),e),o=e}return[n(o)]}if("name"==t.type)return[n(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let n=0;;n++){let o=s(t.exprs[n],e);if(n==t.exprs.length-1)return o;r(o,e=i())}}}(n));return function(t,e){for(let i=0,n=[t];i<n.length;i++){let t=n[i],r=!t.validEnd,s=[];for(let e=0;e<t.next.length;e++){let{type:i,next:o}=t.next[e];s.push(i.name),!r||i.isText||i.hasRequiredAttrs()||(r=!1),-1==n.indexOf(o)&&n.push(o)}r&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,i),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let n=this;for(let r=e;n&&r<i;r++)n=n.matchType(t.child(r).type);return n}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let n=[this];return function r(s,o){let a=s.matchFragment(t,i);if(a&&(!e||a.validEnd))return AI.from(o.map((t=>t.createAndFill())));for(let t=0;t<s.next.length;t++){let{type:e,next:i}=s.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==n.indexOf(i)){n.push(i);let t=r(i,o.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let n=i.shift(),r=n.match;if(r.matchType(t)){let t=[];for(let e=n;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<r.next.length;t++){let{type:s,next:o}=r.next[t];s.isLeaf||s.hasRequiredAttrs()||s.name in e||n.type&&!o.validEnd||(i.push({match:s.contentMatch,type:s,via:n}),e[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(i){t.push(i);for(let n=0;n<i.next.length;n++)-1==t.indexOf(i.next[n].next)&&e(i.next[n].next)}(this),t.map(((e,i)=>{let n=i+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)n+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return n})).join("\n")}}ZI.empty=new ZI(!0);class QI{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function tF(t){let e=[];do{e.push(eF(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function eF(t){let e=[];do{e.push(iF(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function iF(t){let e=function(t){if(t.eat("(")){let e=tF(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let i=t.nodeTypes,n=i[e];if(n)return[n];let r=[];for(let t in i){let n=i[t];n.groups.indexOf(e)>-1&&r.push(n)}0==r.length&&t.err("No node type or group '"+e+"' found");return r}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=rF(t,e)}return e}function nF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function rF(t,e){let i=nF(t),n=i;return t.eat(",")&&(n="}"!=t.next?nF(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:i,max:n,expr:e}}function sF(t,e){return e-t}function oF(t,e){let i=[];return function e(n){let r=t[n];if(1==r.length&&!r[0].term)return e(r[0].to);i.push(n);for(let t=0;t<r.length;t++){let{term:n,to:s}=r[t];n||-1!=i.indexOf(s)||e(s)}}(e),i.sort(sF)}function aF(t){let e=Object.create(null);for(let i in t){let n=t[i];if(!n.hasDefault)return null;e[i]=n.default}return e}function lF(t,e){let i=Object.create(null);for(let n in t){let r=e&&e[n];if(void 0===r){let e=t[n];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+n);r=e.default}i[n]=r}return i}function cF(t){let e=Object.create(null);if(t)for(let i in t)e[i]=new uF(t[i]);return e}class hF{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=cF(i.attrs),this.defaultAttrs=aF(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ZI.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:lF(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new KI(this,this.computeAttrs(t),AI.from(e),EI.setFrom(i))}createChecked(t=null,e,i){if(e=AI.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new KI(this,this.computeAttrs(t),e,EI.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),(e=AI.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let n=this.contentMatch.matchFragment(e),r=n&&n.fillBefore(AI.empty,!0);return r?new KI(this,t,e.append(r),EI.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:EI.none:t}static compile(t,e){let i=Object.create(null);t.forEach(((t,n)=>i[t]=new hF(t,e,n)));let n=e.spec.topNode||"doc";if(!i[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let t in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class uF{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class pF{constructor(t,e,i,n){this.name=t,this.rank=e,this.schema=i,this.spec=n,this.attrs=cF(n.attrs),this.excluded=null;let r=aF(this.attrs);this.instance=r?new EI(this,r):null}create(t=null){return!t&&this.instance?this.instance:new EI(this,lF(this.attrs,t))}static compile(t,e){let i=Object.create(null),n=0;return t.forEach(((t,r)=>i[t]=new pF(t,n++,e,r))),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class dF{constructor(t){this.cached=Object.create(null),this.spec={nodes:SI.from(t.nodes),marks:SI.from(t.marks||{}),topNode:t.topNode},this.nodes=hF.compile(this.spec.nodes,this),this.marks=pF.compile(this.spec.marks,this);let e=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let i=this.nodes[t],n=i.spec.content||"",r=i.spec.marks;i.contentMatch=e[n]||(e[n]=ZI.parse(n,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==r?null:r?fF(this,r.split(" ")):""!=r&&i.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],i=e.spec.excludes;e.excluded=null==i?[e]:""==i?[]:fF(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,n){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof hF))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,n)}text(t,e){let i=this.nodes.text;return new YI(i,i.defaultAttrs,t,EI.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return KI.fromJSON(this,t)}markFromJSON(t){return EI.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function fF(t,e){let i=[];for(let n=0;n<e.length;n++){let r=e[n],s=t.marks[r],o=s;if(s)i.push(s);else for(let e in t.marks){let n=t.marks[e];("_"==r||n.spec.group&&n.spec.group.split(" ").indexOf(r)>-1)&&i.push(o=n)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return i}class gF{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let i=t.nodes[e.node];return i.contentMatch.matchType(i)}))}parse(t,e={}){let i=new xF(this,e,!1);return i.addAll(t,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new xF(this,e,!0);return i.addAll(t,e.from,e.to),PI.maxOpen(i.finish())}matchTag(t,e,i){for(let n=i?this.tags.indexOf(i)+1:0;n<this.tags.length;n++){let i=this.tags[n];if(SF(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}matchStyle(t,e,i,n){for(let r=n?this.styles.indexOf(n)+1:0;r<this.styles.length;r++){let n=this.styles[r],s=n.style;if(!(0!=s.indexOf(t)||n.context&&!i.matchesContext(n.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}static schemaRules(t){let e=[];function i(t){let i=null==t.priority?50:t.priority,n=0;for(;n<e.length;n++){let t=e[n];if((null==t.priority?50:t.priority)<i)break}e.splice(n,0,t)}for(let e in t.marks){let n=t.marks[e].spec.parseDOM;n&&n.forEach((t=>{i(t=kF(t)),t.mark=e}))}for(let e in t.nodes){let n=t.nodes[e].spec.parseDOM;n&&n.forEach((t=>{i(t=kF(t)),t.node=e}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new gF(t,gF.schemaRules(t)))}}const mF={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},yF={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vF={ol:!0,ul:!0};function bF(t,e,i){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&i}class wF{constructor(t,e,i,n,r,s,o){this.type=t,this.attrs=e,this.marks=i,this.pendingMarks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=EI.none,this.stashMarks=[],this.match=s||(4&o?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(AI.from(t));if(!e){let e,i=this.type.contentMatch;return(e=i.findWrapping(t.type))?(this.match=i,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let i=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-t[0].length))}}let e=AI.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(AI.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,i=this.pendingMarks;e<i.length;e++){let n=i[e];(this.type?this.type.allowsMarkType(n.type):CF(n.type,t))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!mF.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class xF{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0;let n,r=e.topNode,s=bF(null,e.preserveWhitespace,0)|(i?4:0);n=r?new wF(r.type,r.attrs,EI.none,EI.none,!0,e.topMatch||r.type.contentMatch,s):new wF(i?null:t.schema.topNodeType,null,EI.none,EI.none,!0,null,s),this.nodes=[n],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style"),i=e?this.readStyles(function(t){let e,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];for(;e=i.exec(t);)n.push(e[1],e[2].trim());return n}(e)):null,n=this.top;if(null!=i)for(let t=0;t<i.length;t++)this.addPendingMark(i[t]);if(this.addElement(t),null!=i)for(let t=0;t<i.length;t++)this.removePendingMark(i[t],n)}}addTextNode(t){let e=t.nodeValue,i=this.top;if(2&i.options||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&i.options)e=2&i.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let n=i.content[i.content.length-1],r=t.previousSibling;(!n||r&&"BR"==r.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let i,n=t.nodeName.toLowerCase();vF.hasOwnProperty(n)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,i=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&vF.hasOwnProperty(t)&&i?(i.appendChild(e),e=i):"li"==t?i=e:t&&(i=null)}}(t);let r=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,e));if(r?r.ignore:yF.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(t=r.skip);let e,i=this.top,s=this.needsBlock;if(mF.hasOwnProperty(n))e=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(i),this.needsBlock=s}else this.addElementByRule(t,r,!1===r.consuming?i:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=EI.none;t:for(let i=0;i<t.length;i+=2)for(let n;;){let r=this.parser.matchStyle(t[i],t[i+1],this,n);if(!r)continue t;if(r.ignore)return null;if(e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e),!1!==r.consuming)break;n=r}return e}addElementByRule(t,e,i){let n,r,s;if(e.node)r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs||null,e.preserveWhitespace);else{s=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(s)}let o=this.top;if(r&&r.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let i=t;"string"==typeof e.contentElement?i=t.querySelector(e.contentElement):"function"==typeof e.contentElement?i=e.contentElement(t):e.contentElement&&(i=e.contentElement),this.findAround(t,i,!0),this.addAll(i)}n&&this.sync(o)&&this.open--,s&&this.removePendingMark(s,o)}addAll(t,e,i){let n=e||0;for(let r=e?t.childNodes[e]:t.firstChild,s=null==i?null:t.childNodes[i];r!=s;r=r.nextSibling,++n)this.findAtPoint(t,n),this.addDOM(r);this.findAtPoint(t,n)}findPlace(t){let e,i;for(let n=this.open;n>=0;n--){let r=this.nodes[n],s=r.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,i=r,!s.length))break;if(r.solid)break}if(!e)return!1;this.sync(i);for(let t=0;t<e.length;t++)this.enterInner(e[t],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let i=e.activeMarks;for(let n=0;n<t.marks.length;n++)e.type&&!e.type.allowsMarkType(t.marks[n].type)||(i=t.marks[n].addToSet(i));return e.content.push(t.mark(i)),!0}return!1}enter(t,e,i){let n=this.findPlace(t.create(e));return n&&this.enterInner(t,e,!0,i),n}enterInner(t,e=null,i=!1,n){this.closeExtra();let r=this.top;r.applyPending(t),r.match=r.match&&r.match.matchType(t);let s=bF(t,n,r.options);4&r.options&&0==r.content.length&&(s|=4),this.nodes.push(new wF(t,e,r.activeMarks,r.pendingMarks,i,null,s)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let e=i.length-1;e>=0;e--)t+=i[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let n=0;n<this.find.length;n++)if(null==this.find[n].pos&&1==t.nodeType&&t.contains(this.find[n].node)){e.compareDocumentPosition(this.find[n].node)&(i?2:4)&&(this.find[n].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,n=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),r=-(i?i.depth+1:0)+(n?0:1),s=(t,o)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;o>=r;o--)if(s(t-1,o))return!0;return!1}{let t=o>0||0==o&&n?this.nodes[o].type:i&&o>=r?i.node(o-r).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;o--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(t){let e=function(t,e){for(let i=0;i<e.length;i++)if(t.eq(e[i]))return e[i]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let i=this.open;i>=0;i--){let n=this.nodes[i];if(n.pendingMarks.lastIndexOf(t)>-1)n.pendingMarks=t.removeFromSet(n.pendingMarks);else{n.activeMarks=t.removeFromSet(n.activeMarks);let e=n.popFromStashMark(t);e&&n.type&&n.type.allowsMarkType(e.type)&&(n.activeMarks=e.addToSet(n.activeMarks))}if(n==e)break}}}function SF(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function kF(t){let e={};for(let i in t)e[i]=t[i];return e}function CF(t,e){let i=e.schema.nodes;for(let n in i){let r=i[n];if(!r.allowsMarkType(t))continue;let s=[],o=t=>{s.push(t);for(let i=0;i<t.edgeCount;i++){let{type:n,next:r}=t.edge(i);if(n==e)return!0;if(s.indexOf(r)<0&&o(r))return!0}};if(o(r.contentMatch))return!0}}class AF{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=TF(e).createDocumentFragment());let n=i,r=[];return t.forEach((t=>{if(r.length||t.marks.length){let i=0,s=0;for(;i<r.length&&s<t.marks.length;){let e=t.marks[s];if(this.marks[e.type.name]){if(!e.eq(r[i][0])||!1===e.type.spec.spanning)break;i++,s++}else s++}for(;i<r.length;)n=r.pop()[1];for(;s<t.marks.length;){let i=t.marks[s++],o=this.serializeMark(i,t.isInline,e);o&&(r.push([i,n]),n.appendChild(o.dom),n=o.contentDOM||o.dom)}}n.appendChild(this.serializeNodeInner(t,e))})),i}serializeNodeInner(t,e){let{dom:i,contentDOM:n}=AF.renderSpec(TF(e),this.nodes[t.type.name](t));if(n){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,n)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let n=t.marks.length-1;n>=0;n--){let r=this.serializeMark(t.marks[n],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i}serializeMark(t,e,i={}){let n=this.marks[t.type.name];return n&&AF.renderSpec(TF(i),n(t,e))}static renderSpec(t,e,i=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let n,r=e[0],s=r.indexOf(" ");s>0&&(i=r.slice(0,s),r=r.slice(s+1));let o=i?t.createElementNS(i,r):t.createElement(r),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?o.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):o.setAttribute(t,a[t])}}for(let r=l;r<e.length;r++){let s=e[r];if(0===s){if(r<e.length-1||r>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}{let{dom:e,contentDOM:r}=AF.renderSpec(t,s,i);if(o.appendChild(e),r){if(n)throw new RangeError("Multiple content holes");n=r}}}return{dom:o,contentDOM:n}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new AF(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=_F(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return _F(t.marks)}}function _F(t){let e={};for(let i in t){let n=t[i].spec.toDOM;n&&(e[i]=n)}return e}function TF(t){return t.document||window.document}const OF=Math.pow(2,16);function EF(t,e){return t+e*OF}function MF(t){return 65535&t}class PF{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class IF{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&IF.empty)return IF.empty}recover(t){let e=0,i=MF(t);if(!this.inverted)for(let t=0;t<i;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*i]+e+function(t){return(t-(65535&t))/OF}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let n=0,r=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?n:0);if(a>t)break;let l=this.ranges[o+r],c=this.ranges[o+s],h=a+l;if(t<=h){let r=a+n+((l?t==a?-1:t==h?1:e:e)<0?0:c);if(i)return r;let s=t==(e<0?a:h)?null:EF(o/3,t-a),u=t==a?2:t==h?1:4;return(e<0?t!=a:t!=h)&&(u|=8),new PF(r,u,s)}n+=c-l}return i?t+n:new PF(t+n,0,null)}touches(t,e){let i=0,n=MF(e),r=this.inverted?2:1,s=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let o=this.ranges[e]-(this.inverted?i:0);if(o>t)break;let a=this.ranges[e+r];if(t<=o+a&&e==3*n)return!0;i+=this.ranges[e+s]-a}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let n=0,r=0;n<this.ranges.length;n+=3){let s=this.ranges[n],o=s-(this.inverted?r:0),a=s+(this.inverted?0:r),l=this.ranges[n+e],c=this.ranges[n+i];t(o,o+l,a,a+c),r+=c-l}}invert(){return new IF(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?IF.empty:new IF(t<0?[0,-t,0]:[0,0,t])}}IF.empty=new IF([]);class FF{constructor(t=[],e,i=0,n=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=n}slice(t=0,e=this.maps.length){return new FF(this.maps,this.mirror,t,e)}copy(){return new FF(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?i+n:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?i-n-1:void 0)}}invert(){let t=new FF;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let n=0;for(let i=this.from;i<this.to;i++){let r=this.maps[i].mapResult(t,e);if(null!=r.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(r.recover);continue}}n|=r.delInfo,t=r.pos}return i?t:new PF(t,n,null)}}const DF=Object.create(null);class RF{getMap(){return IF.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=DF[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in DF)throw new RangeError("Duplicate use of step JSON ID "+t);return DF[t]=e,e.prototype.jsonID=t,e}}class LF{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new LF(t,null)}static fail(t){return new LF(null,t)}static fromReplace(t,e,i,n){try{return LF.ok(t.replace(e,i,n))}catch(t){if(t instanceof MI)return LF.fail(t.message);throw t}}}function NF(t,e,i){let n=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy(NF(s.content,e,s))),s.isInline&&(s=e(s,i,r)),n.push(s)}return AI.fromArray(n)}class BF extends RF{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),n=i.node(i.sharedDepth(this.to)),r=new PI(NF(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),n),e.openStart,e.openEnd);return LF.fromReplace(t,this.from,this.to,r)}invert(){return new jF(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new BF(e.pos,i.pos,this.mark)}merge(t){return t instanceof BF&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new BF(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new BF(e.from,e.to,t.markFromJSON(e.mark))}}RF.jsonID("addMark",BF);class jF extends RF{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new PI(NF(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return LF.fromReplace(t,this.from,this.to,i)}invert(){return new BF(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new jF(e.pos,i.pos,this.mark)}merge(t){return t instanceof jF&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new jF(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new jF(e.from,e.to,t.markFromJSON(e.mark))}}RF.jsonID("removeMark",jF);class zF extends RF{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return LF.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return LF.fromReplace(t,this.pos,this.pos+1,new PI(AI.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(t))return new zF(this.pos,e.marks[i]);return new zF(this.pos,this.mark)}}return new UF(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new zF(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zF(e.pos,t.markFromJSON(e.mark))}}RF.jsonID("addNodeMark",zF);class UF extends RF{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return LF.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return LF.fromReplace(t,this.pos,this.pos+1,new PI(AI.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new zF(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new UF(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new UF(e.pos,t.markFromJSON(e.mark))}}RF.jsonID("removeNodeMark",UF);class $F extends RF{constructor(t,e,i,n=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=n}apply(t){return this.structure&&VF(t,this.from,this.to)?LF.fail("Structure replace would overwrite content"):LF.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new IF([this.from,this.to-this.from,this.slice.size])}invert(t){return new $F(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new $F(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof $F)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?PI.empty:new PI(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new $F(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?PI.empty:new PI(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new $F(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $F(e.from,e.to,PI.fromJSON(t,e.slice),!!e.structure)}}RF.jsonID("replace",$F);class HF extends RF{constructor(t,e,i,n,r,s,o=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=n,this.slice=r,this.insert=s,this.structure=o}apply(t){if(this.structure&&(VF(t,this.from,this.gapFrom)||VF(t,this.gapTo,this.to)))return LF.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return LF.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?LF.fromReplace(t,this.from,this.to,i):LF.fail("Content does not fit in gap")}getMap(){return new IF([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new HF(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),n=t.map(this.gapFrom,-1),r=t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||n<e.pos||r>i.pos?null:new HF(e.pos,i.pos,n,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new HF(e.from,e.to,e.gapFrom,e.gapTo,PI.fromJSON(t,e.slice),e.insert,!!e.structure)}}function VF(t,e,i){let n=t.resolve(e),r=i-e,s=n.depth;for(;r>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,r--;if(r>0){let t=n.node(s).maybeChild(n.indexAfter(s));for(;r>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,r--}}return!1}function qF(t,e,i){return(0==e||t.canReplace(e,t.childCount))&&(i==t.childCount||t.canReplace(0,i))}function WF(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let n=t.$from.node(i),r=t.$from.index(i),s=t.$to.indexAfter(i);if(i<t.depth&&n.canReplace(r,s,e))return i;if(0==i||n.type.spec.isolating||!qF(n,r,s))break}return null}function XF(t){return{type:t,attrs:null}}function GF(t,e,i=1,n){let r=t.resolve(e),s=r.depth-i,o=n&&n[n.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let t=r.depth-1,e=i-2;t>s;t--,e--){let i=r.node(t),s=r.index(t);if(i.type.spec.isolating)return!1;let o=i.content.cutByIndex(s,i.childCount),a=n&&n[e]||i;if(a!=i&&(o=o.replaceChild(0,a.type.create(a.attrs))),!i.canReplace(s+1,i.childCount)||!a.type.validContent(o))return!1}let a=r.indexAfter(s),l=n&&n[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function KF(t,e){let i=t.resolve(e),n=i.index();return YF(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(n,n+1)}function YF(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function JF(t,e,i=e,n=PI.empty){if(e==i&&!n.size)return null;let r=t.resolve(e),s=t.resolve(i);return ZF(r,s,n)?new $F(e,i,n):new QF(r,s,n).fit()}function ZF(t,e,i){return!i.openStart&&!i.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),i.content)}RF.jsonID("replaceAround",HF);class QF{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=AI.empty;for(let e=0;e<=t.depth;e++){let i=t.node(e);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=AI.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,n=this.close(t<0?this.$to:i.doc.resolve(t));if(!n)return null;let r=this.placed,s=i.depth,o=n.depth;for(;s&&o&&1==r.childCount;)r=r.firstChild.content,s--,o--;let a=new PI(r,s,o);return t>-1?new HF(i.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||i.pos!=this.$to.pos?new $F(i.pos,n.pos,a):null}findFittable(){for(let t=1;t<=2;t++)for(let e=this.unplaced.openStart;e>=0;e--){let i,n=null;e?(n=iD(this.unplaced.content,e-1).firstChild,i=n.content):i=this.unplaced.content;let r=i.firstChild;for(let i=this.depth;i>=0;i--){let s,{type:o,match:a}=this.frontier[i],l=null;if(1==t&&(r?a.matchType(r.type)||(l=a.fillBefore(AI.from(r),!1)):n&&o.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:l};if(2==t&&r&&(s=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:s};if(n&&a.matchType(n.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,n=iD(t,e);return!(!n.childCount||n.firstChild.isLeaf)&&(this.unplaced=new PI(t,e+1,Math.max(i,n.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,n=iD(t,e);if(n.childCount<=1&&e>0){let r=t.size-e<=e+n.size;this.unplaced=new PI(tD(t,e-1,1),e-1,r?e-1:i)}else this.unplaced=new PI(tD(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:n,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let t=0;t<r.length;t++)this.openFrontierNode(r[t]);let s=this.unplaced,o=i?i.content:s.content,a=s.openStart-t,l=0,c=[],{match:h,type:u}=this.frontier[e];if(n){for(let t=0;t<n.childCount;t++)c.push(n.child(t));h=h.matchFragment(n)}let p=o.size+t-(s.content.size-s.openEnd);for(;l<o.childCount;){let t=o.child(l),e=h.matchType(t.type);if(!e)break;l++,(l>1||0==a||t.content.size)&&(h=e,c.push(nD(t.mark(u.allowedMarks(t.marks)),1==l?a:0,l==o.childCount?p:-1)))}let d=l==o.childCount;d||(p=-1),this.placed=eD(this.placed,e,AI.from(c)),this.frontier[e].match=h,d&&p<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=o;t<p;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=d?0==t?PI.empty:new PI(tD(s.content,t-1,1),t-1,p<0?s.openEnd:t-1):new PI(tD(s.content,t,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!rD(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,n=this.$to.after(i);for(;i>1&&n==this.$to.end(--i);)++n;return n}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:n}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=rD(t,e,n,i,r);if(s){for(let i=e-1;i>=0;i--){let{match:e,type:n}=this.frontier[i],r=rD(t,i,n,e,!0);if(!r||r.childCount)continue t}return{depth:e,fit:s,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=eD(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let e=t.node(i),n=e.type.contentMatch.fillBefore(e.content,!0,t.index(i));this.openFrontierNode(e.type,e.attrs,n)}return t}openFrontierNode(t,e=null,i){let n=this.frontier[this.depth];n.match=n.match.matchType(t),this.placed=eD(this.placed,this.depth,AI.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(AI.empty,!0);t.childCount&&(this.placed=eD(this.placed,this.frontier.length,t))}}function tD(t,e,i){return 0==e?t.cutByIndex(i,t.childCount):t.replaceChild(0,t.firstChild.copy(tD(t.firstChild.content,e-1,i)))}function eD(t,e,i){return 0==e?t.append(i):t.replaceChild(t.childCount-1,t.lastChild.copy(eD(t.lastChild.content,e-1,i)))}function iD(t,e){for(let i=0;i<e;i++)t=t.firstChild.content;return t}function nD(t,e,i){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,nD(n.firstChild,e-1,1==n.childCount?i-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),i<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(AI.empty,!0)))),t.copy(n)}function rD(t,e,i,n,r){let s=t.node(e),o=r?t.indexAfter(e):t.index(e);if(o==s.childCount&&!i.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!function(t,e,i){for(let n=i;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(i,s.content,o)?a:null}function sD(t){return t.spec.defining||t.spec.definingForContent}function oD(t,e,i,n,r){if(e<i){let r=t.firstChild;t=t.replaceChild(0,r.copy(oD(r.content,e+1,i,n,r)))}if(e>n){let e=r.contentMatchAt(0),i=e.fillBefore(t).append(t);t=i.append(e.matchFragment(i).fillBefore(AI.empty,!0))}return t}function aD(t,e){let i=[];for(let n=Math.min(t.depth,e.depth);n>=0;n--){let r=t.start(n);if(r<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;(r==e.start(n)||n==t.depth&&n==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&n&&e.start(n-1)==r-1)&&i.push(n)}return i}class lD extends RF{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return LF.fail("No node at attribute step's position");let i=Object.create(null);for(let t in e.attrs)i[t]=e.attrs[t];i[this.attr]=this.value;let n=e.type.create(i,null,e.marks);return LF.fromReplace(t,this.pos,this.pos+1,new PI(AI.from(n),0,e.isLeaf?0:1))}getMap(){return IF.empty}invert(t){return new lD(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new lD(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new lD(e.pos,e.attr,e.value)}}RF.jsonID("attr",lD);let cD=class extends Error{};cD=function t(e){let i=Error.call(this,e);return i.__proto__=t.prototype,i},(cD.prototype=Object.create(Error.prototype)).constructor=cD,cD.prototype.name="TransformError";class hD{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new FF}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new cD(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=PI.empty){let n=JF(this.doc,t,e,i);return n&&this.step(n),this}replaceWith(t,e,i){return this.replace(t,e,new PI(AI.from(i),0,0))}delete(t,e){return this.replace(t,e,PI.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return function(t,e,i,n){if(!n.size)return t.deleteRange(e,i);let r=t.doc.resolve(e),s=t.doc.resolve(i);if(ZF(r,s,n))return t.step(new $F(e,i,n));let o=aD(r,t.doc.resolve(i));0==o[o.length-1]&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let t=r.depth,e=r.pos-1;t>0;t--,e--){let i=r.node(t).type.spec;if(i.defining||i.definingAsContext||i.isolating)break;o.indexOf(t)>-1?a=t:r.before(t)==e&&o.splice(1,0,-t)}let l=o.indexOf(a),c=[],h=n.openStart;for(let t=n.content,e=0;;e++){let i=t.firstChild;if(c.push(i),e==n.openStart)break;t=i.content}for(let t=h-1;t>=0;t--){let e=c[t].type,i=sD(e);if(i&&r.node(l).type!=e)h=t;else if(i||!e.isTextblock)break}for(let e=n.openStart;e>=0;e--){let a=(e+h+1)%(n.openStart+1),u=c[a];if(u)for(let e=0;e<o.length;e++){let c=o[(e+l)%o.length],h=!0;c<0&&(h=!1,c=-c);let p=r.node(c-1),d=r.index(c-1);if(p.canReplaceWith(d,d,u.type,u.marks))return t.replace(r.before(c),h?s.after(c):i,new PI(oD(n.content,0,n.openStart,a),a,n.openEnd))}}let u=t.steps.length;for(let a=o.length-1;a>=0&&(t.replace(e,i,n),!(t.steps.length>u));a--){let t=o[a];t<0||(e=r.before(t),i=s.after(t))}}(this,t,e,i),this}replaceRangeWith(t,e,i){return function(t,e,i,n){if(!n.isInline&&e==i&&t.doc.resolve(e).parent.content.size){let r=function(t,e,i){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),i))return e;if(0==n.parentOffset)for(let t=n.depth-1;t>=0;t--){let e=n.index(t);if(n.node(t).canReplaceWith(e,e,i))return n.before(t+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let t=n.depth-1;t>=0;t--){let e=n.indexAfter(t);if(n.node(t).canReplaceWith(e,e,i))return n.after(t+1);if(e<n.node(t).childCount)return null}return null}(t.doc,e,n.type);null!=r&&(e=i=r)}t.replaceRange(e,i,new PI(AI.from(n),0,0))}(this,t,e,i),this}deleteRange(t,e){return function(t,e,i){let n=t.doc.resolve(e),r=t.doc.resolve(i),s=aD(n,r);for(let e=0;e<s.length;e++){let i=s[e],o=e==s.length-1;if(o&&0==i||n.node(i).type.contentMatch.validEnd)return t.delete(n.start(i),r.end(i));if(i>0&&(o||n.node(i-1).canReplace(n.index(i-1),r.indexAfter(i-1))))return t.delete(n.before(i),r.after(i))}for(let s=1;s<=n.depth&&s<=r.depth;s++)if(e-n.start(s)==n.depth-s&&i>n.end(s)&&r.end(s)-i!=r.depth-s)return t.delete(n.before(s),i);t.delete(e,i)}(this,t,e),this}lift(t,e){return function(t,e,i){let{$from:n,$to:r,depth:s}=e,o=n.before(s+1),a=r.after(s+1),l=o,c=a,h=AI.empty,u=0;for(let t=s,e=!1;t>i;t--)e||n.index(t)>0?(e=!0,h=AI.from(n.node(t).copy(h)),u++):l--;let p=AI.empty,d=0;for(let t=s,e=!1;t>i;t--)e||r.after(t+1)<r.end(t)?(e=!0,p=AI.from(r.node(t).copy(p)),d++):c++;t.step(new HF(l,c,o,a,new PI(h.append(p),u,d),h.size-u,!0))}(this,t,e),this}join(t,e=1){return function(t,e,i){let n=new $F(e-i,e+i,PI.empty,!0);t.step(n)}(this,t,e),this}wrap(t,e){return function(t,e,i){let n=AI.empty;for(let t=i.length-1;t>=0;t--){if(n.size){let e=i[t].type.contentMatch.matchFragment(n);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=AI.from(i[t].type.create(i[t].attrs,n))}let r=e.start,s=e.end;t.step(new HF(r,s,r,s,new PI(n,0,0),i.length,!0))}(this,t,e),this}setBlockType(t,e=t,i,n=null){return function(t,e,i,n,r){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,i,((e,i)=>{if(e.isTextblock&&!e.hasMarkup(n,r)&&function(t,e,i){let n=t.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(t.doc,t.mapping.slice(s).map(i),n)){t.clearIncompatible(t.mapping.slice(s).map(i,1),n);let o=t.mapping.slice(s),a=o.map(i,1),l=o.map(i+e.nodeSize,1);return t.step(new HF(a,l,a+1,l-1,new PI(AI.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}}))}(this,t,e,i,n),this}setNodeMarkup(t,e,i=null,n=[]){return function(t,e,i,n,r){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");i||(i=s.type);let o=i.create(n,null,r||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!i.validContent(s.content))throw new RangeError("Invalid content for node type "+i.name);t.step(new HF(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new PI(AI.from(o),0,0),1,!0))}(this,t,e,i,n),this}setNodeAttribute(t,e,i){return this.step(new lD(t,e,i)),this}addNodeMark(t,e){return this.step(new zF(t,e)),this}removeNodeMark(t,e){if(!(e instanceof EI)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new UF(t,e)),this}split(t,e=1,i){return function(t,e,i=1,n){let r=t.doc.resolve(e),s=AI.empty,o=AI.empty;for(let t=r.depth,e=r.depth-i,a=i-1;t>e;t--,a--){s=AI.from(r.node(t).copy(s));let e=n&&n[a];o=AI.from(e?e.type.create(e.attrs,o):r.node(t).copy(o))}t.step(new $F(e,e,new PI(s.append(o),i,i),!0))}(this,t,e,i),this}addMark(t,e,i){return function(t,e,i,n){let r,s,o=[],a=[];t.doc.nodesBetween(e,i,((t,l,c)=>{if(!t.isInline)return;let h=t.marks;if(!n.isInSet(h)&&c.type.allowsMarkType(n.type)){let c=Math.max(l,e),u=Math.min(l+t.nodeSize,i),p=n.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(p)||(r&&r.to==c&&r.mark.eq(h[t])?r.to=u:o.push(r=new jF(c,u,h[t])));s&&s.to==c?s.to=u:a.push(s=new BF(c,u,n))}})),o.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,i),this}removeMark(t,e,i){return function(t,e,i,n){let r=[],s=0;t.doc.nodesBetween(e,i,((t,o)=>{if(!t.isInline)return;s++;let a=null;if(n instanceof pF){let e,i=t.marks;for(;e=n.isInSet(i);)(a||(a=[])).push(e),i=e.removeFromSet(i)}else n?n.isInSet(t.marks)&&(a=[n]):a=t.marks;if(a&&a.length){let n=Math.min(o+t.nodeSize,i);for(let t=0;t<a.length;t++){let i,l=a[t];for(let t=0;t<r.length;t++){let e=r[t];e.step==s-1&&l.eq(r[t].style)&&(i=e)}i?(i.to=n,i.step=s):r.push({style:l,from:Math.max(o,e),to:n,step:s})}}})),r.forEach((e=>t.step(new jF(e.from,e.to,e.style))))}(this,t,e,i),this}clearIncompatible(t,e,i){return function(t,e,i,n=i.contentMatch){let r=t.doc.nodeAt(e),s=[],o=e+1;for(let e=0;e<r.childCount;e++){let a=r.child(e),l=o+a.nodeSize,c=n.matchType(a.type);if(c){n=c;for(let e=0;e<a.marks.length;e++)i.allowsMarkType(a.marks[e].type)||t.step(new jF(o,l,a.marks[e]))}else s.push(new $F(o,l,PI.empty));o=l}if(!n.validEnd){let e=n.fillBefore(AI.empty,!0);t.replace(o,o,new PI(e,0,0))}for(let e=s.length-1;e>=0;e--)t.step(s[e])}(this,t,e,i),this}}const uD=Object.create(null);class pD{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new dD(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=PI.empty){let i=e.content.lastChild,n=null;for(let t=0;t<e.openEnd;t++)n=i,i=i.lastChild;let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=t.mapping.slice(r);t.replaceRange(c.map(a.pos),c.map(l.pos),o?PI.empty:e),0==o&&kD(t,r,(i?i.isInline:n&&n.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,n=this.ranges;for(let r=0;r<n.length;r++){let{$from:s,$to:o}=n[r],a=t.mapping.slice(i),l=a.map(s.pos),c=a.map(o.pos);r?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),kD(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let n=t.parent.inlineContent?new mD(t):SD(t.node(0),t.parent,t.pos,t.index(),e,i);if(n)return n;for(let n=t.depth-1;n>=0;n--){let r=e<0?SD(t.node(0),t.node(n),t.before(n+1),t.index(n),e,i):SD(t.node(0),t.node(n),t.after(n+1),t.index(n)+1,e,i);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new wD(t.node(0))}static atStart(t){return SD(t,t,0,0,1)||new wD(t)}static atEnd(t){return SD(t,t,t.content.size,t.childCount,-1)||new wD(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=uD[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in uD)throw new RangeError("Duplicate use of selection JSON ID "+t);return uD[t]=e,e.prototype.jsonID=t,e}getBookmark(){return mD.between(this.$anchor,this.$head).getBookmark()}}pD.prototype.visible=!0;class dD{constructor(t,e){this.$from=t,this.$to=e}}let fD=!1;function gD(t){fD||t.parent.inlineContent||(fD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class mD extends pD{constructor(t,e=t){gD(t),gD(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return pD.near(i);let n=t.resolve(e.map(this.anchor));return new mD(n.parent.inlineContent?n:i,i)}replace(t,e=PI.empty){if(super.replace(t,e),e==PI.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof mD&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new yD(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new mD(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let n=t.resolve(e);return new this(n,i==e?n:t.resolve(i))}static between(t,e,i){let n=t.pos-e.pos;if(i&&!n||(i=n>=0?1:-1),!e.parent.inlineContent){let t=pD.findFrom(e,i,!0)||pD.findFrom(e,-i,!0);if(!t)return pD.near(e,i);e=t.$head}return t.parent.inlineContent||(0==n||(t=(pD.findFrom(t,-i,!0)||pD.findFrom(t,i,!0)).$anchor).pos<e.pos!=n<0)&&(t=e),new mD(t,e)}}pD.jsonID("text",mD);class yD{constructor(t,e){this.anchor=t,this.head=e}map(t){return new yD(t.map(this.anchor),t.map(this.head))}resolve(t){return mD.between(t.resolve(this.anchor),t.resolve(this.head))}}class vD extends pD{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:n}=e.mapResult(this.anchor),r=t.resolve(n);return i?pD.near(r):new vD(r)}content(){return new PI(AI.from(this.node),0,0)}eq(t){return t instanceof vD&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new bD(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new vD(t.resolve(e.anchor))}static create(t,e){return new vD(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}vD.prototype.visible=!1,pD.jsonID("node",vD);class bD{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new yD(i,i):new bD(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&vD.isSelectable(i)?new vD(e):pD.near(e)}}class wD extends pD{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=PI.empty){if(e==PI.empty){t.delete(0,t.doc.content.size);let e=pD.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new wD(t)}map(t){return new wD(t)}eq(t){return t instanceof wD}getBookmark(){return xD}}pD.jsonID("all",wD);const xD={map(){return this},resolve:t=>new wD(t)};function SD(t,e,i,n,r,s=!1){if(e.inlineContent)return mD.create(t,i);for(let o=n-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let n=e.child(o);if(n.isAtom){if(!s&&vD.isSelectable(n))return vD.create(t,i-(r<0?n.nodeSize:0))}else{let e=SD(t,n,i+r,r<0?n.childCount:0,r,s);if(e)return e}i+=n.nodeSize*r}return null}function kD(t,e,i){let n=t.steps.length-1;if(n<e)return;let r,s=t.steps[n];(s instanceof $F||s instanceof HF)&&(t.mapping.maps[n].forEach(((t,e,i,n)=>{null==r&&(r=n)})),t.setSelection(pD.near(t.doc.resolve(r),i)))}class CD extends hD{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return EI.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||EI.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();{if(null==i&&(i=e),i=null==i?e:i,!t)return this.deleteRange(e,i);let r=this.storedMarks;if(!r){let t=this.doc.resolve(e);r=i==e?t.marks():t.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,n.text(t,r)),this.selection.empty||this.setSelection(pD.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function AD(t,e){return e&&t?t.bind(e):t}class _D{constructor(t,e,i){this.name=t,this.init=AD(e.init,i),this.apply=AD(e.apply,i)}}const TD=[new _D("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new _D("selection",{init:(t,e)=>t.selection||pD.atStart(e.doc),apply:t=>t.selection}),new _D("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,i,n)=>n.selection.$cursor?t.storedMarks:null}),new _D("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class OD{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=TD.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new _D(t.key,t.spec.state,t))}))}}class ED{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let e=this.config.plugins[i];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),n=null;for(;;){let r=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let a=n?n[s].n:0,l=n?n[s].state:this,c=a<e.length&&o.spec.appendTransaction.call(o,a?e.slice(a):e,l,i);if(c&&i.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!n){n=[];for(let t=0;t<this.config.plugins.length;t++)n.push(t<s?{state:i,n:e.length}:{state:this,n:0})}e.push(c),i=i.applyInner(c),r=!0}n&&(n[s]={state:i,n:e.length})}}if(!r)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new ED(this.config),i=this.config.fields;for(let n=0;n<i.length;n++){let r=i[n];e[r.name]=r.apply(t,this[r.name],this,e)}return e}get tr(){return new CD(this)}static create(t){let e=new OD(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new ED(e);for(let n=0;n<e.fields.length;n++)i[e.fields[n].name]=e.fields[n].init(t,i);return i}reconfigure(t){let e=new OD(this.schema,t.plugins),i=e.fields,n=new ED(e);for(let e=0;e<i.length;e++){let r=i[e].name;n[r]=this.hasOwnProperty(r)?this[r]:i[e].init(t,n)}return n}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let i in t){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let n=t[i],r=n.spec.state;r&&r.toJSON&&(e[i]=r.toJSON.call(n,this[n.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let n=new OD(t.schema,t.plugins),r=new ED(n);return n.fields.forEach((n=>{if("doc"==n.name)r.doc=KI.fromJSON(t.schema,e.doc);else if("selection"==n.name)r.selection=pD.fromJSON(r.doc,e.selection);else if("storedMarks"==n.name)e.storedMarks&&(r.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let s in i){let o=i[s],a=o.spec.state;if(o.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(r[n.name]=a.fromJSON.call(o,t,e[s],r))}r[n.name]=n.init(t,r)}})),r}}function MD(t,e,i){for(let n in t){let r=t[n];r instanceof Function?r=r.bind(e):"handleDOMEvents"==n&&(r=MD(r,e,{})),i[n]=r}return i}class PD{constructor(t){this.spec=t,this.props={},t.props&&MD(t.props,this,this.props),this.key=t.key?t.key.key:FD("plugin")}getState(t){return t[this.key]}}const ID=Object.create(null);function FD(t){return t in ID?t+"$"+ ++ID[t]:(ID[t]=0,t+"$")}class DD{constructor(t="key"){this.key=FD(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}var RD="k-parent-node",LD="k-colgroup-data",ND="k-resizable-node",BD="k-editor-resize-handle",jD="data-dir-table-resize",zD="data-dir-image-resize",UD=function(t,e){var i=(t.ownerDocument||document).createElement(e);Array.from(t.rows).filter((function(t){return t.getAttribute(RD)===e})).forEach((function(t){t.removeAttribute(RD),i.appendChild(t)})),i.children.length&&t.appendChild(i)},$D=function(t,e){var i=e.toUpperCase();t.filter((function(t){return t.nodeName===i})).forEach((function(t){Array.from(t.children).forEach((function(i){i.setAttribute(RD,e),t.parentNode&&t.parentNode.insertBefore(i,t)})),t.remove()}))},HD=function(t){var e,i=document.createElement("template");if("content"in i)i.innerHTML=t,e=i.content;else{var n=(new DOMParser).parseFromString(t,"text/html");e=document.createDocumentFragment();for(var r=n.body;r&&r.firstChild;)e.appendChild(r.firstChild)}return e},VD=function(t){var e=AF.fromSchema(t.type.schema).serializeFragment(t.content);return function(t){Array.from(t.querySelectorAll("table")).forEach((function(t){UD(t,"thead"),UD(t,"tbody"),UD(t,"tfoot");var e=Array.from(t.children).find((function(t){return 0===t.children.length}));e&&e.remove()}))}(e),e},qD=function(t,e,i){return gF.fromSchema(e).parse(t,i)},WD=function(t,e,i){var n,r=HD(t);return n=r,Array.from(n.querySelectorAll("table")).forEach((function(t){var e=Array.from(t.children);e.some((function(t){return"THEAD"===t.nodeName||"TFOOT"===t.nodeName}))&&($D(e,"thead"),$D(e,"tbody"),$D(e,"tfoot"));var i=e.find((function(t){return"COLGROUP"===t.nodeName}));i&&(t.setAttribute(LD,i.outerHTML),i.remove())})),qD(r,e,i)},XD=function(t,e,i){return void 0===e&&(e="setHTML"),void 0===i&&(i={preserveWhitespace:"full"}),function(n,r){return r(n.tr.setSelection(new wD(n.doc)).replaceSelectionWith(WD(t,n.schema,i)).setMeta("commandName",e))}};var GD=function(){return GD=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},GD.apply(this,arguments)};function KD(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}Object.create;Object.create;var YD=function(t,e){var i=e.style,n=e.value,r=e.newValue;if(!t)return{changed:!1,style:null};var s=t.split(/\s*;\s*/).filter((function(t){return Boolean(t)})),o=s.filter((function(t){var e=t.split(/\s*:\s*/);return!(e[0].toLowerCase()===i&&n.test(e[1]))}));return r&&o.push(i+": "+r),{style:o.join("; ")+(o.length?";":""),changed:Boolean(r)||o.length!==s.length}},JD=function(t){return t instanceof KI?t.type.name:t.name},ZD=function(t,e){return void 0===e&&(e=1),function(i){return function(t,e){return void 0===e&&(e=1),function(i){for(var n=i.$from,r=n.depth;r>0;r--){var s=n.node(r);if(t(s)&&0==(e-=1))return{depth:r,node:s}}}}((function(e){return JD(e)===JD(t)}),e)(i)}},QD=function(t,e){return function(i,n){var r=i.tr.replaceSelectionWith(t);e&&r.scrollIntoView(),n(r)}},tR={before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i},eR=function(t,e){return function(i,n,r){var s=function(t,e,i){if(!i.applyToWord||!t.selection.empty)return{state:t,dispatch:e};var n=!0===i.applyToWord?tR:i.applyToWord,r=null,s=t.tr,o=t.selection,a=o.$head.nodeBefore,l=o.$head.nodeAfter;if(a&&"text"===a.type.name&&a.text&&l&&"text"===l.type.name&&l.text){var c=[];o.$head.parent.descendants((function(t,e){return c.push({node:t,pos:e}),!1}));for(var h=o.$head.parentOffset,u=c.findIndex((function(t){var e=t.node,i=t.pos;return i<=h&&i+e.nodeSize>=h})),p=c[u].node.text,d=!1,f=u-1;f>=0;f--){var g=c[f];!d&&g&&"text"===g.node.type.name?p=g.node.text+p:(d=!0,h-=g.node.nodeSize)}for(f=u+1;f<c.length&&((g=c[f])&&"text"===g.node.type.name);f++)p+=g.node.text;var m=p.substring(0,h),y=p.substring(h),v=n.before.exec(m),b=n.after.exec(y);if(v&&b){var w=v[0].length,x=b[0].length,S=r=o.from;return s.setSelection(mD.create(t.doc,S-w,S+x)),{state:{tr:s,selection:s.selection,doc:s.doc,storedMarks:null,schema:s.doc.type.schema},dispatch:function(t){t.setSelection(mD.create(t.doc,r)),e(t)}}}}return{state:t,dispatch:e}}(i,n,e),o=s.state,a=s.dispatch;return t(e)(o,a)}},iR=function(t,e,i){for(var n=function(n){var r=e[n],s=r.$from,o=r.$to,a=0===s.depth&&t.type.allowsMarkType(i);if(t.nodesBetween(s.pos,o.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(i)})),a)return{v:!0}},r=0;r<e.length;r++){var s=n(r);if(s)return s.v}return!1},nR=function(t,e,i){return function(n,r){var s=n.selection,o=s.empty,a=s.$cursor,l=s.ranges;if(o&&!a||!iR(n.doc,l,t))return!1;if(r)if(a)t.isInSet(n.storedMarks||a.marks())?r(i.removeStoredMark(t)):r(i.addStoredMark(t.create(e)));else{for(var c=!1,h=0;!c&&h<l.length;h++){var u=l[h],p=u.$from,d=u.$to;c=n.doc.rangeHasMark(p.pos,d.pos,t)}for(h=0;h<l.length;h++){var f=l[h];p=f.$from,d=f.$to;c?i.removeMark(p.pos,d.pos,t):i.addMark(p.pos,d.pos,t.create(e))}r(i.scrollIntoView())}return!0}},rR=function(t,e,i,n){void 0===n&&(n=null);var r=[],s=0;return t.doc.nodesBetween(e,i,(function(t,o){if(t.isInline){s++;var a=null;if(n instanceof pF){var l=n.isInSet(t.marks);l&&(a=[l])}else n?n.isInSet(t.marks)&&(a=[n]):a=t.marks;if(a&&a.length)for(var c=Math.min(o+t.nodeSize,i),h=0;h<a.length;h++){for(var u=a[h],p=void 0,d=0;d<r.length;d++){var f=r[d];f.step===s-1&&u.eq(f.style)&&(p=f)}p?(p.to=c,p.step=s):r.push({style:u,from:Math.max(o,e),to:c,step:s})}}})),r.forEach((function(e){return t.step(new jF(e.from,e.to,e.style))})),t},sR=function(t,e){var i=e.except,n=t.doc,r=t.selection,s=n.type.schema,o=r.empty,a=r.ranges,l=(i||[]).map((function(t){return t.name}));if(!o){var c=Object.keys(s.marks).map((function(t){return s.marks[t]})).filter((function(t){return-1===l.indexOf(t.name)}));a.forEach((function(e){var i=e.$from,n=e.$to;c.forEach((function(e){return t.removeMark(i.pos,n.pos,e)}))}))}},oR=function(t,e){var i,n=t.schema.marks,r=(e.altMarks||[]).filter((function(t){return n[t]})),s=e.altStyle,o=t.selection,a=o.from,l=o.$from,c=o.to,h=o.empty,u=n[e.mark],p=t.doc,d=!1;return h?(i=t.storedMarks||l.marks(),d=u&&u.isInSet(i)||r.some((function(t){return n[t].isInSet(i)}))):d=u&&p.rangeHasMark(a,c,u)||r.some((function(t){return p.rangeHasMark(a,c,n[t])})),!d&&s&&n.style?lR(t,n.style).some((function(t){return null!==aR(t,s)})):Boolean(d)},aR=function(t,e){for(var i=(t&&t.attrs.style||"").split(/\s*;\s*/).filter((function(t){return Boolean(t)})),n=0;n<i.length;n++){var r=i[n].split(/\s*:\s*/);if(r[0].toLowerCase()===e.name&&e.value.test(r[1]))return r[1]}return null},lR=function(t,e){var i=t.selection,n=i.from,r=i.$from,s=i.to,o=i.empty,a=[];return o?a.push(e.isInSet(t.storedMarks||r.marks())):t.doc.nodesBetween(n,s,(function(t){t.isInline&&a.push(e.isInSet(t.marks))})),a},cR=function(t,e){var i=lR(t,e),n=i.filter((function(t){return Boolean(t)}));return{hasNodesWithoutMarks:i.length!==n.length,marks:n}},hR=function(t,e){var i=t.find((function(t){return"style"===t.type.name})),n=i&&i.attrs.style;return YD(n,e)},uR=function(t,e,i,n,r){var s=r.create({style:n.style}),o=[],a=[],l=null,c=null;return t.doc.nodesBetween(e,i,(function(t,h,u){if(t.isInline){var p=t.marks;if(!s.isInSet(p)&&u.type.allowsMarkType(s.type)){var d=Math.max(h,e),f=Math.min(h+t.nodeSize,i),g=hR(p,n);if(g.changed||n.newValue){for(var m=g.changed?{style:g.style||null}:{style:[n.style]+": "+n.newValue+";"},y=r.isInSet(p)?p.find((function(t){return"style"===t.type.name})):null,v=y?GD(GD({},y.attrs),m):m,b=r.create(v),w=b.addToSet(p),x=0;x<p.length;x++)p[x].isInSet(w)||(l&&l.to===d&&l.mark.eq(p[x])?l.to=f:(l=new jF(d,f,p[x]),o.push(l)));var S=c&&c.to===d,k=S&&b.attrs.style===c.mark.attrs.style;S&&k?c.to=f:Object.keys(v).some((function(t){return null!==v[t]}))&&(c=new BF(d,f,b),a.push(c))}}}})),o.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)})),o.length+a.length>0},pR=function(t,e){var i=t.schema.marks.style;return(i?lR(t,i):[]).map((function(t){return aR(t,e)})).filter((function(t){return null!==t}))},dR=function(t,e){return function(i,n,r){var s=i.selection,o=s.empty,a=s.$cursor,l=s.ranges;if(o&&!a||!iR(i.doc,l,t))return!1;var c,h,u,p,d=!1;if(n){var f=r||i.tr;if(a){var g=i.storedMarks||a.marks();if(t.isInSet(g)){var m=hR(g,e),y=g.find((function(t){return"style"===t.type.name})),v=GD(GD({},y?y.attrs:{}),{style:m.style||null});if(c=y.attrs,h=v,u=Object.keys(c),p=Object.keys(h),u.length===p.length&&u.every((function(t){return c[t]===h[t]})))return!1;n(f.removeStoredMark(t)),Object.keys(v).some((function(t){return null!==v[t]}))&&n(f.addStoredMark(t.create(v))),d=!0}}else{for(var b=0;b<l.length;b++){var w=l[b],x=w.$from,S=w.$to;d=uR(f,x.pos,S.pos,e,t)}d&&(f.scrollIntoView(),n(f))}}return d}},fR=function(t,e,i){return function(n,r){var s=n.schema.marks,o=t.altStyle,a=t.altMarks,l=void 0===a?[]:a,c=t.mark,h=e||n.tr,u=!1,p=!1,d=function(){return p=!0};o&&s.style&&(u=dR(s.style,{style:o.name,value:o.value})(n,d,h));var f=function(t,e,i){if(i||2===arguments.length)for(var n,r=0,s=e.length;r<s;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}([c],l).filter((function(t){return s[t]})),g=f.map((function(t){return oR(n,{mark:t})&&s[t]})).filter((function(t){return t}));return g.length?function(t,e,i,n){var r=e.selection,s=r.$cursor,o=r.ranges;if(n=n||e.tr,s)t.forEach((function(t){t.isInSet(e.storedMarks||s.marks())&&i(n.removeStoredMark(t))}));else{for(var a=function(e){var i=o[e],r=i.$from,s=i.$to;t.forEach((function(t){rR(n,r.pos,s.pos,t)}))},l=0;l<o.length;l++)a(l);i(n.scrollIntoView())}}(g,n,d,h):u||nR(s[c],i,h)(n,d),p&&r(h),p}},gR=function(t,e){return function(i,n){var r=i.schema.marks.style,s={style:t.style,value:/^.+$/,newValue:t.value},o=i.tr;e&&o.setMeta("commandName",e),o.setMeta("args",t);var a=i.selection,l=a.empty,c=a.$cursor,h=a.ranges;if(l&&!c||!r||!iR(i.doc,h,r))return!1;if(c){var u=i.storedMarks||c.marks(),p=r.isInSet(u)?u.find((function(t){return"style"===t.type.name})):null,d={style:null};if(p&&p.attrs.style){var f=YD(p.attrs.style,s);f.changed&&f.style&&(d.style=f.style)}else s.newValue&&(d.style=[s.style]+": "+s.newValue+";");var g=p?GD(GD({},p.attrs),d):d;return Object.keys(g).some((function(t){return null!==g[t]}))?n(o.addStoredMark(r.create(g))):n(o.removeStoredMark(r)),!0}return dR(r,s)(i,n,o)}},mR=function(t,e){return function(i,n){var r=i.selection.$cursor;if(r){var s=r.parent,o=r.index(),a=i.schema.marks[t.mark],l=s.child(o).marks.find((function(t){return t.type===a})),c=s.childCount,h=r.pos-r.textOffset,u=s.child(o).nodeSize,p=void 0,d=void 0;for(p=o-1;p>=0&&l.isInSet(s.child(p).marks);)u+=d=s.child(p).nodeSize,h-=d,p-=1;for(p=o+1;p<c&&l.isInSet(s.child(p).marks);)u+=s.child(p).nodeSize,p+=1;n(rR(e||i.tr,h,h+u,l))}else fR(t,e)(i,n)}},yR=function(t,e){var i=t.mark,n=t.attrs;return void 0===e&&(e="link"),function(t,r){var s=t.schema.marks,o=t.tr;e&&(o.setMeta("commandName",e),o.setMeta("args",n));var a=!1,l=function(){return a=!0};if(function(t,e){var i=lR(t,e);return 1===i.length&&i[0]?i[0]:null}(t,s[i]))!function(t,e){return function(i,n){var r=i.selection,s=r.$cursor,o=r.from,a=r.to,l=i.schema.marks[t.mark];if(s){var c=s.parent,h=s.index(),u=c.child(h).marks.find((function(t){return t.type===l})),p=c.childCount,d=s.pos-s.textOffset,f=c.child(h).nodeSize,g=void 0,m=void 0;for(g=h-1;g>=0&&u.isInSet(c.child(g).marks);)f+=m=c.child(g).nodeSize,d-=m,g-=1;for(g=h+1;g<p&&u.isInSet(c.child(g).marks);)f+=c.child(g).nodeSize,g+=1;e.removeMark(d,d+f,l),e.addMark(d,d+f,l.create(t.attrs)),n(e)}else e.doc.nodesBetween(o,a,(function(i,r){i.isInline&&l.isInSet(i.marks)&&(e.removeMark(r,r+i.nodeSize,l),e.addMark(r,r+i.nodeSize,l.create(t.attrs)),n(e))}))}}({mark:i,attrs:n},o)(t,l);else{var c=t;oR(t,{mark:i})&&(mR({mark:i,attrs:n},o)(t,l),c=ED.create({doc:o.doc,selection:o.selection})),a?nR(s[i],n,o)(c,l):fR({mark:i},o,n)(c,l)}return a&&r(o),a}},vR=function(t,e,i,n){if(!i.isTextblock)return!1;t.selection.ranges.forEach((function(r){var s=t.steps.length,o=r.$from.pos,a=r.$to.pos;t.doc.nodesBetween(o,a,(function(r,o){if(r.eq(e)&&r.isTextblock&&!r.hasMarkup(i,n)&&function(t,e,i){var n=t.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(t.doc,t.mapping.slice(s).map(o),i)){t.clearIncompatible(t.mapping.slice(s).map(o,1),i);var a=t.mapping.slice(s),l=a.map(o,1),c=a.map(o+r.nodeSize,1),h=new PI(AI.from(i.create(n,null,r.marks)),0,0);return t.step(new HF(l,c,l+1,c-1,h,1,!0)),!1}}))}))},bR=function(t,e){void 0===e&&(e={blocksInSelection:!1});var i=t.doc,n=t.selection,r=n.$from,s=n.ranges,o=e.blocksInSelection,a=[],l=n instanceof vD?n.node:void 0;return l?l.isBlock?(a.push(l),l.nodesBetween(0,l.content.size,(function(t){t.isBlock&&a.push(t)}))):!o&&r.parent&&r.parent.isBlock&&a.push(r.parent):s.forEach((function(t){var e=t.$from.pos,n=t.$to.pos;i.nodesBetween(e,n,(function(t,i,r,s){t.isBlock&&(!o||i>=e&&i+t.content.size+2<=n)&&a.push(t)}))})),a},wR=function(t,e){var i,n,r=t.attrs.style;r&&e.forEach((function(t){n={style:t.name,value:/^.+$/,newValue:t.value},i=YD(r,n),r=i.changed?i.style:r}));return r=r||e.reduce((function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""}),""),Object.assign({},t.attrs,{style:r||null})},xR=function(t,e){var i=t.selection,n=i.from,r=i.to,s=!1;return t.doc.nodesBetween(n,r,(function(t){return!(s=s||t.type===e)})),s},SR=function(t){var e=function(t){var e=bR(t),i=t.schema.nodes,n=[];return e.forEach((function(t){t.type===i.paragraph?n.push("p"):t.type===i.heading?n.push("h"+t.attrs.level):t.type===i.blockquote&&i.blockquote.isTextblock&&n.push("blockquote")})),n}(t);return 1===new Set(e).size?e[0]:null},kR=function(t,e){return function(i,n){var r=bR(i),s=i.tr;s.setMeta("commandName",e),r.forEach((function(e){if(e.type.isTextblock){var i={},n=t.find((function(t){return t.node===e.type.name}));n&&(i=wR(e,n.style)),vR(s,e,e.type,i)}}));var o=s.docChanged;return o&&n(s.scrollIntoView()),o}},CR=function(t,e){var i=bR(t),n=!1;return i.forEach((function(t){if(!n&&t.type.isTextblock&&t.attrs.style){var i=e.find((function(e){return e.node===t.type.name}));i&&(n=i.style.every((function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)})))}})),n};function AR(t,e=null){return function(i,n){let{$from:r,$to:s}=i.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(t)&&0==o.startIndex){if(0==r.index(o.depth-1))return!1;let t=i.doc.resolve(o.start-2);l=new XI(t,t,o.depth),o.endIndex<o.parent.childCount&&(o=new XI(r,i.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=function(t,e,i=null,n=t){let r=function(t,e){let{parent:i,startIndex:n,endIndex:r}=t,s=i.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return i.canReplaceWith(n,r,o)?s:null}(t,e),s=r&&function(t,e){let{parent:i,startIndex:n,endIndex:r}=t,s=i.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let t=n;a&&t<r;t++)a=a.matchType(i.child(t).type);return a&&a.validEnd?o:null}(n,e);return s?r.map(XF).concat({type:e,attrs:i}).concat(s.map(XF)):null}(l,t,e,o);return!!c&&(n&&n(function(t,e,i,n,r){let s=AI.empty;for(let t=i.length-1;t>=0;t--)s=AI.from(i[t].type.create(i[t].attrs,s));t.step(new HF(e.start-(n?2:0),e.end,e.start,e.end,new PI(s,0,0),i.length,!0));let o=0;for(let t=0;t<i.length;t++)i[t].type==r&&(o=t+1);let a=i.length-o,l=e.start+i.length-(n?2:0),c=e.parent;for(let i=e.startIndex,n=e.endIndex,r=!0;i<n;i++,r=!1)!r&&GF(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(i).nodeSize;return t}(i.tr,o,c,a,t).scrollIntoView()),!0)}}function _R(t){return function(e,i){let{$from:n,$to:r}=e.selection,s=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==t));return!!s&&(!i||(n.node(s.depth-1).type==t?function(t,e,i,n){let r=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(r.step(new HF(s-1,o,s,o,new PI(AI.from(i.create(null,n.parent.copy())),1,0),1,!0)),n=new XI(r.doc.resolve(n.$from.pos),r.doc.resolve(o),n.depth));const a=WF(n);if(null==a)return!1;r.lift(n,a);let l=r.mapping.map(s,-1)-1;KF(r.doc,l)&&r.join(l);return e(r.scrollIntoView()),!0}(e,i,t,s):function(t,e,i){let n=t.tr,r=i.parent;for(let t=i.end,e=i.endIndex-1,s=i.startIndex;e>s;e--)t-=r.child(e).nodeSize,n.delete(t-1,t+1);let s=n.doc.resolve(i.start),o=s.nodeAfter;if(n.mapping.map(i.end)!=i.start+s.nodeAfter.nodeSize)return!1;let a=0==i.startIndex,l=i.endIndex==r.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+(a?0:1),h+1,o.content.append(l?AI.empty:AI.from(r))))return!1;let u=s.pos,p=u+o.nodeSize;return n.step(new HF(u-(a?1:0),p+(l?1:0),u+1,p-1,new PI((a?AI.empty:AI.from(r.copy(AI.empty))).append(l?AI.empty:AI.from(r.copy(AI.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}(e,i,s)))}}function TR(t){return function(e,i){let{$from:n,$to:r}=e.selection,s=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==t));if(!s)return!1;let o=s.startIndex;if(0==o)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(i){let n=l.lastChild&&l.lastChild.type==a.type,r=AI.from(n?t.create():null),o=new PI(AI.from(t.create(null,AI.from(a.type.create(null,r)))),n?3:1,0),c=s.start,h=s.end;i(e.tr.step(new HF(c-(n?3:1),h,c,h,o,1,!0)).scrollIntoView())}return!0}}var OR={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},ER={listType:OR.orderedList,types:GD({},OR)},MR={listType:OR.bulletList,types:GD({},OR)},PR={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:GD({},OR)},IR={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:GD({},OR)},FR=function(t,e,i){return function(n,r){var s=bR(n),o=n.tr;o.setMeta("commandName",e),s.forEach((function(e){if(e.type.isTextblock){var n=void 0,r=t.find((function(t){return t.node===e.type.name}));if(r){var s="rtl"===i?r.rtlStyle:r.style,a={name:s,value:r.step>0?""+r.step+r.unit:""};if(e.attrs.style){var l=new RegExp(s+":\\s?(\\d+)"+r.unit,"i"),c=e.attrs.style.match(l);if(c){var h=parseFloat(c[1])+r.step;h=h<=0?"":h,a.value=""+h+(h?r.unit:"")}}n=wR(e,[a])}n&&vR(o,e,e.type,n)}}));var a=o.docChanged;return a&&r(o.scrollIntoView()),a}},DR=function(t,e,i){var n=bR(t),r=!1;return n.forEach((function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var n=e.find((function(e){return e.node===t.type.name}));if(n){var s="rtl"===i?n.rtlStyle:n.style,o=new RegExp(s+":\\s?\\d+"+n.unit,"i");r=o.test(t.attrs.style)}}})),r},RR=function(t,e){return TR(e)(t)},LR=function(t,e){var i=t.schema.nodes[e.listsTypes.listItem],n=t.schema.nodes[e.listsTypes.orderedList],r=t.schema.nodes[e.listsTypes.bulletList],s=!!ZD(n,2)(t.selection),o=!!ZD(r,2)(t.selection);return(s||o)&&_R(i)(t)},NR=function(t,e){var i=t.schema.nodes,n=i[PR.listsTypes.listItem];return(DR(t,e.nodes)||PR.nodes.some((function(e){return i[e.node]&&xR(t,i[e.node])})))&&!xR(t,n)},BR=function(t,e){var i=t.schema.nodes[PR.listsTypes.listItem],n=NR(t,PR);RR(t,i)?TR(i)(t,e):n&&FR(PR.nodes)(t,e)},jR=function(t,e){var i=t.schema.nodes,n=i[IR.listsTypes.listItem],r=NR(t,IR);xR(t,i.blockquote)?function(t,e){var i=t.selection,n=i.$from,r=i.$to,s=t.schema.nodes.blockquote,o=t.doc,a=-1,l=n.blockRange(r);l&&o.nodesBetween(l.start,l.end,(function(t,e,i,n){t.type===s&&(a=e)}));var c=-1!==a;e&&c&&e(t.tr.lift(l,o.resolve(a).depth))}(t,e):LR(t,IR)?_R(n)(t,e):r&&FR(IR.nodes)(t,e)};const zR=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0),UR=(t,e,i)=>{let{$cursor:n}=t.selection;if(!n||(i?!i.endOfTextblock("backward",t):n.parentOffset>0))return!1;let r=VR(n);if(!r){let i=n.blockRange(),r=i&&WF(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&QR(t,r,e))return!0;if(0==n.parent.content.size&&($R(s,"end")||vD.isSelectable(s))){let i=JF(t.doc,n.before(),n.after(),PI.empty);if(i&&i.slice.size<i.to-i.from){if(e){let n=t.tr.step(i);n.setSelection($R(s,"end")?pD.findFrom(n.doc.resolve(n.mapping.map(r.pos,-1)),-1):vD.create(n.doc,r.pos-s.nodeSize)),e(n.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=n.depth-1)&&(e&&e(t.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0)};function $R(t,e,i=!1){for(let n=t;n;n="start"==e?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(i&&1!=n.childCount)return!1}return!1}const HR=(t,e,i)=>{let{$head:n,empty:r}=t.selection,s=n;if(!r)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=VR(n)}let o=s&&s.nodeBefore;return!(!o||!vD.isSelectable(o))&&(e&&e(t.tr.setSelection(vD.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function VR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let i=t.node(e);if(t.index(e)+1<i.childCount)return t.doc.resolve(t.after(e+1));if(i.type.spec.isolating)break}return null}const WR=(t,e)=>{let{$head:i,$anchor:n}=t.selection;return!(!i.parent.type.spec.code||!i.sameParent(n))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function XR(t){for(let e=0;e<t.edgeCount;e++){let{type:i}=t.edge(e);if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}const GR=(t,e)=>{let{$head:i,$anchor:n}=t.selection;if(!i.parent.type.spec.code||!i.sameParent(n))return!1;let r=i.node(-1),s=i.indexAfter(-1),o=XR(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let n=i.after(),r=t.tr.replaceWith(n,n,o.createAndFill());r.setSelection(pD.near(r.doc.resolve(n),1)),e(r.scrollIntoView())}return!0},KR=(t,e)=>{let i=t.selection,{$from:n,$to:r}=i;if(i instanceof wD||n.parent.inlineContent||r.parent.inlineContent)return!1;let s=XR(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,o=t.tr.insert(i,s.createAndFill());o.setSelection(mD.create(o.doc,i+1)),e(o.scrollIntoView())}return!0},YR=(t,e)=>{let{$cursor:i}=t.selection;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){let n=i.before();if(GF(t.doc,n))return e&&e(t.tr.split(n).scrollIntoView()),!0}let n=i.blockRange(),r=n&&WF(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)},JR=(t,e)=>{let{$from:i,$to:n}=t.selection;if(t.selection instanceof vD&&t.selection.node.isBlock)return!(!i.parentOffset||!GF(t.doc,i.pos))&&(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(e){let r=n.parentOffset==n.parent.content.size,s=t.tr;(t.selection instanceof mD||t.selection instanceof wD)&&s.deleteSelection();let o=0==i.depth?null:XR(i.node(-1).contentMatchAt(i.indexAfter(-1))),a=r&&o?[{type:o}]:void 0,l=GF(s.doc,s.mapping.map(i.pos),1,a);if(a||l||!GF(s.doc,s.mapping.map(i.pos),1,o?[{type:o}]:void 0)||(o&&(a=[{type:o}]),l=!0),l&&(s.split(s.mapping.map(i.pos),1,a),!r&&!i.parentOffset&&i.parent.type!=o)){let t=s.mapping.map(i.before()),e=s.doc.resolve(t);o&&i.node(-1).canReplaceWith(e.index(),e.index()+1,o)&&s.setNodeMarkup(s.mapping.map(i.before()),o)}e(s.scrollIntoView())}return!0},ZR=(t,e)=>JR(t,e&&(i=>{let n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();n&&i.ensureMarks(n),e(i)}));function QR(t,e,i){let n,r,s=e.nodeBefore,o=e.nodeAfter;if(s.type.spec.isolating||o.type.spec.isolating)return!1;if(function(t,e,i){let n=e.nodeBefore,r=e.nodeAfter,s=e.index();return!(!(n&&r&&n.type.compatibleContent(r.type))||(!n.content.size&&e.parent.canReplace(s-1,s)?(i&&i(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!r.isTextblock&&!KF(t.doc,e.pos)||(i&&i(t.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,i))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(n=(r=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&r.matchType(n[0]||o.type).validEnd){if(i){let r=e.pos+o.nodeSize,a=AI.empty;for(let t=n.length-1;t>=0;t--)a=AI.from(n[t].create(null,a));a=AI.from(s.copy(a));let l=t.tr.step(new HF(e.pos-1,r,e.pos,r,new PI(a,1,0),n.length,!0)),c=r+2*n.length;KF(l.doc,c)&&l.join(c),i(l.scrollIntoView())}return!0}let l=pD.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),h=c&&WF(c);if(null!=h&&h>=e.depth)return i&&i(t.tr.lift(c,h).scrollIntoView()),!0;if(a&&$R(o,"start",!0)&&$R(s,"end")){let n=s,r=[];for(;r.push(n),!n.isTextblock;)n=n.lastChild;let a=o,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(n.canReplace(n.childCount,n.childCount,a.content)){if(i){let n=AI.empty;for(let t=r.length-1;t>=0;t--)n=AI.from(r[t].copy(n));i(t.tr.step(new HF(e.pos-r.length,e.pos+o.nodeSize,e.pos+l,e.pos+o.nodeSize-l,new PI(n,r.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function tL(t){return function(e,i){let n=e.selection,r=t<0?n.$from:n.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return!!r.node(s).isTextblock&&(i&&i(e.tr.setSelection(mD.create(e.doc,t<0?r.start(s):r.end(s)))),!0)}}const eL=tL(-1),iL=tL(1);function nL(t,e){let i=Array.isArray(e)?t=>e.indexOf(t.type.name)>-1:e;return(e,n,r)=>t(e,n&&function(t,e){return i=>{if(!i.isGeneric)return t(i);let n=[];for(let t=0;t<i.mapping.maps.length;t++){let e=i.mapping.maps[t];for(let t=0;t<n.length;t++)n[t]=e.map(n[t]);e.forEach(((t,e,i,r)=>n.push(i,r)))}let r=[];for(let t=0;t<n.length;t+=2){let s=n[t],o=n[t+1],a=i.doc.resolve(s),l=a.sharedDepth(o),c=a.node(l);for(let t=a.indexAfter(l),i=a.after(l+1);i<=o;++t){let n=c.maybeChild(t);if(!n)break;if(t&&-1==r.indexOf(i)){let s=c.child(t-1);s.type==n.type&&e(s,n)&&r.push(i)}i+=n.nodeSize}}r.sort(((t,e)=>t-e));for(let t=r.length-1;t>=0;t--)KF(i.doc,r[t])&&i.join(r[t]);t(i)}}(n,i),r)}function rL(...t){return function(e,i,n){for(let r=0;r<t.length;r++)if(t[r](e,i,n))return!0;return!1}}let sL=rL(zR,UR,HR),oL=rL(zR,((t,e,i)=>{let{$cursor:n}=t.selection;if(!n||(i?!i.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size))return!1;let r=qR(n);if(!r)return!1;let s=r.nodeAfter;if(QR(t,r,e))return!0;if(0==n.parent.content.size&&($R(s,"start")||vD.isSelectable(s))){let i=JF(t.doc,n.before(),n.after(),PI.empty);if(i&&i.slice.size<i.to-i.from){if(e){let n=t.tr.step(i);n.setSelection($R(s,"start")?pD.findFrom(n.doc.resolve(n.mapping.map(r.pos)),1):vD.create(n.doc,n.mapping.map(r.pos))),e(n.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=n.depth-1)&&(e&&e(t.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0)}),((t,e,i)=>{let{$head:n,empty:r}=t.selection,s=n;if(!r)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=qR(n)}let o=s&&s.nodeAfter;return!(!o||!vD.isSelectable(o))&&(e&&e(t.tr.setSelection(vD.create(t.doc,s.pos)).scrollIntoView()),!0)}));const aL={Enter:rL(WR,KR,YR,JR),"Mod-Enter":GR,Backspace:sL,"Mod-Backspace":sL,"Shift-Backspace":sL,Delete:oL,"Mod-Delete":oL,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new wD(t.doc))),!0)},lL={"Ctrl-h":aL.Backspace,"Alt-Backspace":aL["Mod-Backspace"],"Ctrl-d":aL.Delete,"Ctrl-Alt-Backspace":aL["Mod-Delete"],"Alt-Delete":aL["Mod-Delete"],"Alt-d":aL["Mod-Delete"],"Ctrl-a":eL,"Ctrl-e":iL};for(let t in aL)lL[t]=aL[t];const cL=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?lL:aL;var hL=function(t,e,i){for(var n=e.depth,r=t.nodes[i.bulletList],s=t.nodes[i.orderedList],o=t.nodes[i.listItem],a=e.depth;a>0;a--){var l=e.node(a);if(l.type!==r&&l.type!==s||(n=a),l.type!==r&&l.type!==s&&l.type!==o)break}return n-1};function uL(t){return function(e,i,n){if(!n)return!1;var r=(e=n.state).schema.nodes[t.listType],s=e.selection,o=s.$from,a=s.$to,l=o.node(-2),c=o.node(-3),h=function(t,e,i,n){return 0===function(t,e,i){var n=Array(),r=function(t,e){var i=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;var n=e.node(e.depth),r=e;for(;e.depth>=1;)(n=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==i.indexOf(n.type.name)&&(r=e);return r}(t,e).depth,s=t.resolve(e.start(r));for(;s.pos<=i.start(i.depth);){var o=Math.min(s.depth,r),a=s.node(o);if(a&&n.push(a),0===o)break;var l=t.resolve(s.after(o));if(l.start(o)>=t.nodeSize-2)break;l.depth!==s.depth&&(l=t.resolve(l.pos+2)),s=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return n}(t,e,i).filter((function(t){return t.type!==n})).length}(e.doc,o,a,r);return(l&&l.type===r||c&&c.type===r)&&h?dL(t)(e,i):(h||(dL(t)(e,i),e=n.state),function(t,e){void 0===e&&(e={});return nL(AR(t,e),(function(e,i){return e.type===i.type&&e.type===t}))}(r,t.listAttrs)(e,i))}}function pL(t,e,i,n){var r=n||t.schema.nodes.listItem,s=e.$from,o=e.$to,a=s.blockRange(o,(function(t){return t.childCount&&t.firstChild.type===r}));if(!a||a.depth<2||s.node(a.depth-1).type!==r)return i;var l=a.end,c=o.end(a.depth);return l<c&&(i.step(new HF(l-1,c,l,c,new PI(AI.from(r.create(void 0,a.parent.copy())),1,0),1,!0)),a=new XI(i.doc.resolve(s.pos),i.doc.resolve(c),a.depth)),i.lift(a,WF(a)).scrollIntoView()}function dL(t){return function(e,i){var n=e.tr,r=e.selection,s=r.$from,o=r.$to;return n.doc.nodesBetween(s.pos,o.pos,(function(i,r){if(i.isTextblock||"blockquote"===i.type.name||"div"===i.type.name){var s=new vD(n.doc.resolve(n.mapping.map(r))),o=s.$from.blockRange(s.$to);if(!o||s.$from.parent.type!==e.schema.nodes[t.listItem])return!1;var a=o&&WF(o);if(null==a)return!1;n.lift(o,a)}})),i&&i(n),!0}}var fL=/list\-style\-type:\s?([\w-]+)/,gL=function(t){var e=t.style||"",i=fL.exec(e);return i&&i[1]||""},mL=function(t,e,i,n,r){var s=n.listType,o=n.listAttrs,a=void 0===o?{style:null}:o,l=t.selection,c=l.$from.node(l.$from.depth-2),h=l.$to.node(l.$to.depth-2);if(c&&c.type.name===s&&gL(c.attrs)===gL(a)&&h&&h.type.name===s&&gL(h.attrs)===gL(a)){var u=i.state.schema.nodes,p={bulletList:u[n.bulletList],orderedList:u[n.orderedList],listItem:u[n.listItem]},d=function(t,e){for(var i,n=e.bulletList,r=e.orderedList,s=e.listItem,o=t.depth-1;o>0;o--){var a=t.node(o);if(a.type!==n&&a.type!==r||(i=o),a.type!==n&&a.type!==r&&a.type!==s)break}return i}(l.$to,p),f=function(t,e,i,n,r,s){s||(s=t.schema.nodes.listItem);var o=!1;return r.doc.nodesBetween(e,i,(function(i,a){if(!o&&i.type===s&&a>e){o=!0;for(var l=n+3;l>n+2;){var c=r.doc.resolve(r.mapping.map(a));l=c.depth;var h=r.doc.resolve(r.mapping.map(a+i.textContent.length)),u=new mD(c,h);r=pL(t,u,r,s)}}})),r}(t,l.$to.pos,l.$to.end(d),d,i.state.tr,p.listItem);return f=function(t,e,i){var n=t.selection,r=n.from,s=n.to,o=t.schema.nodes,a=o.paragraph,l=o.heading,c=[];e.doc.nodesBetween(r,s,(function(t,e){t.type!==a&&t.type!==l||c.push({node:t,pos:e})}));for(var h=c.length-1;h>=0;h--){var u=c[h],p=e.doc.resolve(e.mapping.map(u.pos));if(p.depth>0){var d=void 0;d=u.node.textContent&&u.node.textContent.length>0?e.doc.resolve(e.mapping.map(u.pos+u.node.textContent.length)):e.doc.resolve(e.mapping.map(u.pos+1));var f=p.blockRange(d);f&&e.lift(f,hL(t.schema,p,i))}}return e}(t,f,n),f.setMeta("commandName",r),e(f),!0}return uL(n)(t,e,i)};function yL(t,e,i){return mL(t,e,i,GD({listType:MR.listType},MR.types))}function vL(t,e,i){return mL(t,e,i,GD({listType:ER.listType},ER.types))}for(var bL=function(t){return function(e,i){return function(t){return function(e,i){let{$from:n,$to:r,node:s}=e.selection;if(s&&s.isBlock||n.depth<2||!n.sameParent(r))return!1;let o=n.node(-1);if(o.type!=t)return!1;if(0==n.parent.content.size&&n.node(-1).childCount==n.indexAfter(-1)){if(3==n.depth||n.node(-3).type!=t||n.index(-2)!=n.node(-2).childCount-1)return!1;if(i){let r=AI.empty,s=n.index(-1)?1:n.index(-2)?2:3;for(let t=n.depth-s;t>=n.depth-3;t--)r=AI.from(n.node(t).copy(r));let o=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;r=r.append(AI.from(t.createAndFill()));let a=n.before(n.depth-(s-1)),l=e.tr.replace(a,n.after(-o),new PI(r,4-s,0)),c=-1;l.doc.nodesBetween(a,l.doc.content.size,((t,e)=>{if(c>-1)return!1;t.isTextblock&&0==t.content.size&&(c=e+1)})),c>-1&&l.setSelection(pD.near(l.doc.resolve(c))),i(l.scrollIntoView())}return!0}let a=r.pos==n.end()?o.contentMatchAt(0).defaultType:null,l=e.tr.delete(n.pos,r.pos),c=a?[null,{type:a}]:void 0;return!!GF(l.doc,n.pos,2,c)&&(i&&i(l.split(n.pos,2,c).scrollIntoView()),!0)}}(t)(e,(function(t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();n&&t.ensureMarks(n),i(t)}))}},wL=function(t,e){return{name:t,value:e}},xL=[{node:"paragraph",style:[wL("text-align","left")]},{node:"heading",style:[wL("text-align","left")]}],SL=[{node:"paragraph",style:[wL("text-align","right")]},{node:"heading",style:[wL("text-align","right")]}],kL=[{node:"paragraph",style:[wL("text-align","center")]},{node:"heading",style:[wL("text-align","center")]}],CL=[{node:"paragraph",style:[wL("text-align","justify")]},{node:"heading",style:[wL("text-align","justify")]}],AL=[{node:"paragraph",style:[wL("text-align","")]},{node:"heading",style:[wL("text-align","")]}],_L={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},TL={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},OL="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),EL=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),ML="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),PL=EL||OL&&+OL[1]<57,IL=0;IL<10;IL++)_L[48+IL]=_L[96+IL]=String(IL);for(IL=1;IL<=24;IL++)_L[IL+111]="F"+IL;for(IL=65;IL<=90;IL++)_L[IL]=String.fromCharCode(IL+32),TL[IL]=String.fromCharCode(IL);for(var FL in _L)TL.hasOwnProperty(FL)||(TL[FL]=_L[FL]);const DL="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function RL(t){let e,i,n,r,s=t.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(let t=0;t<s.length-1;t++){let o=s[t];if(/^(cmd|meta|m)$/i.test(o))r=!0;else if(/^a(lt)?$/i.test(o))e=!0;else if(/^(c|ctrl|control)$/i.test(o))i=!0;else if(/^s(hift)?$/i.test(o))n=!0;else{if(!/^mod$/i.test(o))throw new Error("Unrecognized modifier name: "+o);DL?r=!0:i=!0}}return e&&(o="Alt-"+o),i&&(o="Ctrl-"+o),r&&(o="Meta-"+o),n&&(o="Shift-"+o),o}function LL(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==i&&e.shiftKey&&(t="Shift-"+t),t}function NL(t){return new PD({props:{handleKeyDown:BL(t)}})}function BL(t){let e=function(t){let e=Object.create(null);for(let i in t)e[RL(i)]=t[i];return e}(t);return function(t,i){let n,r=function(t){var e=!(PL&&(t.ctrlKey||t.altKey||t.metaKey)||ML&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?TL:_L)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(i),s=1==r.length&&" "!=r,o=e[LL(r,i,!s)];if(o&&o(t.state,t.dispatch,t))return!0;if(s&&(i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(n=_L[i.keyCode])&&n!=r){let r=e[LL(n,i,!0)];if(r&&r(t.state,t.dispatch,t))return!0}else if(s&&i.shiftKey){let n=e[LL(r,i,!0)];if(n&&n(t.state,t.dispatch,t))return!0}return!1}}const jL="undefined"!=typeof navigator?navigator:null,zL="undefined"!=typeof document?document:null,UL=jL&&jL.userAgent||"",$L=/Edge\/(\d+)/.exec(UL),HL=/MSIE \d/.exec(UL),VL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(UL),qL=!!(HL||VL||$L),WL=HL?document.documentMode:VL?+VL[1]:$L?+$L[1]:0,XL=!qL&&/gecko\/(\d+)/i.test(UL);XL&&(/Firefox\/(\d+)/.exec(UL)||[0,0])[1];const GL=!qL&&/Chrome\/(\d+)/.exec(UL),KL=!!GL,YL=GL?+GL[1]:0,JL=!qL&&!!jL&&/Apple Computer/.test(jL.vendor),ZL=JL&&(/Mobile\/\w+/.test(UL)||!!jL&&jL.maxTouchPoints>2),QL=ZL||!!jL&&/Mac/.test(jL.platform),tN=/Android \d/.test(UL),eN=!!zL&&"webkitFontSmoothing"in zL.documentElement.style,iN=eN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,nN=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},rN=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let sN=null;const oN=function(t,e,i){let n=sN||(sN=document.createRange());return n.setEnd(t,null==i?t.nodeValue.length:i),n.setStart(t,e||0),n},aN=function(t,e,i,n){return i&&(cN(t,e,i,n,-1)||cN(t,e,i,n,1))},lN=/^(img|br|input|textarea|hr)$/i;function cN(t,e,i,n,r){for(;;){if(t==i&&e==n)return!0;if(e==(r<0?0:hN(t))){let i=t.parentNode;if(!i||1!=i.nodeType||uN(t)||lN.test(t.nodeName)||"false"==t.contentEditable)return!1;e=nN(t)+(r<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(r<0?-1:0)]).contentEditable)return!1;e=r<0?hN(t):0}}}function hN(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function uN(t){let e;for(let i=t;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const pN=function(t){let e=t.isCollapsed;return e&&KL&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function dN(t,e){let i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=t,i.key=i.code=e,i}function fN(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function gN(t,e){return"number"==typeof t?t:t[e]}function mN(t){let e=t.getBoundingClientRect(),i=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*i,top:e.top,bottom:e.top+t.clientHeight*n}}function yN(t,e,i){let n=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=i||t.dom;o;o=rN(o)){if(1!=o.nodeType)continue;let t=o,i=t==s.body,a=i?fN(s):mN(t),l=0,c=0;if(e.top<a.top+gN(n,"top")?c=-(a.top-e.top+gN(r,"top")):e.bottom>a.bottom-gN(n,"bottom")&&(c=e.bottom-a.bottom+gN(r,"bottom")),e.left<a.left+gN(n,"left")?l=-(a.left-e.left+gN(r,"left")):e.right>a.right-gN(n,"right")&&(l=e.right-a.right+gN(r,"right")),l||c)if(i)s.defaultView.scrollBy(l,c);else{let i=t.scrollLeft,n=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let r=t.scrollLeft-i,s=t.scrollTop-n;e={left:e.left-r,top:e.top-s,right:e.right-r,bottom:e.bottom-s}}if(i)break}}function vN(t){let e=[],i=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=i);n=rN(n));return e}function bN(t,e){for(let i=0;i<t.length;i++){let{dom:n,top:r,left:s}=t[i];n.scrollTop!=r+e&&(n.scrollTop=r+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let wN=null;function xN(t,e){let i,n,r=2e8,s=0,o=e.top,a=e.top;for(let l=t.firstChild,c=0;l;l=l.nextSibling,c++){let t;if(1==l.nodeType)t=l.getClientRects();else{if(3!=l.nodeType)continue;t=oN(l).getClientRects()}for(let h=0;h<t.length;h++){let u=t[h];if(u.top<=o&&u.bottom>=a){o=Math.max(u.bottom,o),a=Math.min(u.top,a);let t=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(t<r){i=l,r=t,n=t&&3==i.nodeType?{left:u.right<e.left?u.right:u.left,top:e.top}:e,1==l.nodeType&&t&&(s=c+(e.left>=(u.left+u.right)/2?1:0));continue}}!i&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(s=c+1)}}return i&&3==i.nodeType?function(t,e){let i=t.nodeValue.length,n=document.createRange();for(let r=0;r<i;r++){n.setEnd(t,r+1),n.setStart(t,r);let i=AN(n,1);if(i.top!=i.bottom&&SN(e,i))return{node:t,offset:r+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(i,n):!i||r&&1==i.nodeType?{node:t,offset:s}:xN(i,n)}function SN(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function kN(t,e,i){let n=t.childNodes.length;if(n&&i.top<i.bottom)for(let r=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-i.top)/(i.bottom-i.top))-2)),s=r;;){let i=t.childNodes[s];if(1==i.nodeType){let t=i.getClientRects();for(let n=0;n<t.length;n++){let r=t[n];if(SN(e,r))return kN(i,e,r)}}if((s=(s+1)%n)==r)break}return t}function CN(t,e){let i,n=t.dom.ownerDocument,r=0;if(n.caretPositionFromPoint)try{let t=n.caretPositionFromPoint(e.left,e.top);t&&({offsetNode:i,offset:r}=t)}catch(t){}if(!i&&n.caretRangeFromPoint){let t=n.caretRangeFromPoint(e.left,e.top);t&&({startContainer:i,startOffset:r}=t)}let s,o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top);if(!o||!t.dom.contains(1!=o.nodeType?o.parentNode:o)){let i=t.dom.getBoundingClientRect();if(!SN(e,i))return null;if(o=kN(t.dom,e,i),!o)return null}if(JL)for(let t=o;i&&t;t=rN(t))t.draggable&&(i=void 0);if(o=function(t,e){let i=t.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<t.getBoundingClientRect().left?i:t}(o,e),i){if(XL&&1==i.nodeType&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let t,n=i.childNodes[r];"IMG"==n.nodeName&&(t=n.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&r++}i==t.dom&&r==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=r&&1==i.nodeType&&"BR"==i.childNodes[r-1].nodeName||(s=function(t,e,i,n){let r=-1;for(let i=e;i!=t.dom;){let e=t.docView.nearestDesc(i,!0);if(!e)return null;if(e.node.isBlock&&e.parent){let t=e.dom.getBoundingClientRect();if(t.left>n.left||t.top>n.top)r=e.posBefore;else{if(!(t.right<n.left||t.bottom<n.top))break;r=e.posAfter}}i=e.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,i,1)}(t,i,r,e))}null==s&&(s=function(t,e,i){let{node:n,offset:r}=xN(e,i),s=-1;if(1==n.nodeType&&!n.firstChild){let t=n.getBoundingClientRect();s=t.left!=t.right&&i.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(n,r,s)}(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function AN(t,e){let i=t.getClientRects();return i.length?i[e<0?0:i.length-1]:t.getBoundingClientRect()}const _N=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function TN(t,e,i){let{node:n,offset:r,atom:s}=t.docView.domFromPos(e,i<0?-1:1),o=eN||XL;if(3==n.nodeType){if(!o||!_N.test(n.nodeValue)&&(i<0?r:r!=n.nodeValue.length)){let t=r,e=r,s=i<0?1:-1;return i<0&&!r?(e++,s=-1):i>=0&&r==n.nodeValue.length?(t--,s=1):i<0?t--:e++,ON(AN(oN(n,t,e),1),s<0)}{let t=AN(oN(n,r,r),i);if(XL&&r&&/\s/.test(n.nodeValue[r-1])&&r<n.nodeValue.length){let e=AN(oN(n,r-1,r-1),-1);if(e.top==t.top){let i=AN(oN(n,r,r+1),-1);if(i.top!=t.top)return ON(i,i.left<e.left)}}return t}}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&r&&(i<0||r==hN(n))){let t=n.childNodes[r-1];if(1==t.nodeType)return EN(t.getBoundingClientRect(),!1)}if(null==s&&r<hN(n)){let t=n.childNodes[r];if(1==t.nodeType)return EN(t.getBoundingClientRect(),!0)}return EN(n.getBoundingClientRect(),i>=0)}if(null==s&&r&&(i<0||r==hN(n))){let t=n.childNodes[r-1],e=3==t.nodeType?oN(t,hN(t)-(o?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return ON(AN(e,1),!1)}if(null==s&&r<hN(n)){let t=n.childNodes[r];for(;t.pmViewDesc&&t.pmViewDesc.ignoreForCoords;)t=t.nextSibling;let e=t?3==t.nodeType?oN(t,0,o?0:1):1==t.nodeType?t:null:null;if(e)return ON(AN(e,-1),!0)}return ON(AN(3==n.nodeType?oN(n):n,-i),i>=0)}function ON(t,e){if(0==t.width)return t;let i=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:i,right:i}}function EN(t,e){if(0==t.height)return t;let i=e?t.top:t.bottom;return{top:i,bottom:i,left:t.left,right:t.right}}function MN(t,e,i){let n=t.state,r=t.root.activeElement;n!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return i()}finally{n!=e&&t.updateState(n),r!=t.dom&&r&&r.focus()}}const PN=/[\u0590-\u08ac]/;let IN=null,FN=null,DN=!1;function RN(t,e,i){return IN==e&&FN==i?DN:(IN=e,FN=i,DN="up"==i||"down"==i?function(t,e,i){let n=e.selection,r="up"==i?n.$from:n.$to;return MN(t,e,(()=>{let{node:e}=t.docView.domFromPos(r.pos,"up"==i?-1:1);for(;;){let i=t.docView.nearestDesc(e,!0);if(!i)break;if(i.node.isBlock){e=i.dom;break}e=i.dom.parentNode}let n=TN(t,r.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=oN(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let r=e[t];if(r.bottom>r.top+1&&("up"==i?n.top-r.top>2*(r.bottom-n.top):r.bottom-n.bottom>2*(n.bottom-r.top)))return!1}}return!0}))}(t,e,i):function(t,e,i){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let r=n.parentOffset,s=!r,o=r==n.parent.content.size,a=t.domSelection();return PN.test(n.parent.textContent)&&a.modify?MN(t,e,(()=>{let e=a.getRangeAt(0),r=a.focusNode,s=a.focusOffset,o=a.caretBidiLevel;a.modify("move",i,"character");let l=!(n.depth?t.docView.domAfterPos(n.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&s==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=o&&(a.caretBidiLevel=o),l})):"left"==i||"backward"==i?s:o}(t,e,i))}class LN{constructor(t,e,i,n){this.parent=t,this.children=e,this.dom=i,this.contentDOM=n,this.dirty=0,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let n=this.children[e];if(n==t)return i;i+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){let i,n;if(t==this.contentDOM)i=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&(!(n=i.pmViewDesc)||n.parent!=this);)i=i.previousSibling;return i?this.posBeforeChild(n)+n.size:this.posAtStart}{let i,n;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(n=i.pmViewDesc)||n.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(n):this.posAtEnd}}let n;if(t==this.dom&&this.contentDOM)n=e>nN(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){n=!1;break}if(e.previousSibling)break}if(null==n&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){n=!0;break}if(e.nextSibling)break}}return(null==n?i>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,n=t;n;n=n.parentNode){let r,s=this.getDesc(n);if(s&&(!e||s.node)){if(!i||!(r=s.nodeDOM)||(1==r.nodeType?r.contains(1==t.nodeType?t:t.parentNode):r==t))return s;i=!1}}}getDesc(t){let e=t.pmViewDesc;for(let t=e;t;t=t.parent)if(t==this)return e}posFromDOM(t,e,i){for(let n=t;n;n=n.parentNode){let r=this.getDesc(n);if(r)return r.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let n=this.children[e],r=i+n.size;if(i==t&&r!=i){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<r)return n.descAt(t-i-n.border);i=r}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i,n=0,r=0;for(let e=0;n<this.children.length;n++){let i=this.children[n],s=e+i.size;if(s>t||i instanceof HN){r=t-e;break}e=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,e);for(;n&&!(i=this.children[n-1]).size&&i instanceof NN&&i.side>=0;n--);if(e<=0){let t,i=!0;for(;t=n?this.children[n-1]:null,t&&t.dom.parentNode!=this.contentDOM;n--,i=!1);return t&&e&&i&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?nN(t.dom)+1:0}}{let t,i=!0;for(;t=n<this.children.length?this.children[n]:null,t&&t.dom.parentNode!=this.contentDOM;n++,i=!1);return t&&i&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?nN(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,r=-1;for(let s=i,o=0;;o++){let i=this.children[o],a=s+i.size;if(-1==n&&t<=a){let r=s+i.border;if(t>=r&&e<=a-i.border&&i.node&&i.contentDOM&&this.contentDOM.contains(i.contentDOM))return i.parseRange(t,e,r);t=s;for(let e=o;e>0;e--){let i=this.children[e-1];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(1)){n=nN(i.dom)+1;break}t-=i.size}-1==n&&(n=0)}if(n>-1&&(a>e||o==this.children.length-1)){e=a;for(let t=o+1;t<this.children.length;t++){let i=this.children[t];if(i.size&&i.dom.parentNode==this.contentDOM&&!i.emptyChildAt(-1)){r=nN(i.dom);break}e+=i.size}-1==r&&(r=this.contentDOM.childNodes.length);break}s=a}return{node:this.contentDOM,from:t,to:e,fromOffset:n,toOffset:r}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(1!=e.nodeType||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,n=!1){let r=Math.min(t,e),s=Math.max(t,e);for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.size;if(r>a&&s<c)return l.setSelection(t-a-l.border,e-a-l.border,i,n);a=c}let o=this.domFromPos(t,t?-1:1),a=e==t?o:this.domFromPos(e,e?-1:1),l=i.getSelection(),c=!1;if((XL||JL)&&t==e){let{node:t,offset:e}=o;if(3==t.nodeType){if(c=!(!e||"\n"!=t.nodeValue[e-1]),c&&e==t.nodeValue.length)for(let e,i=t;i;i=i.parentNode){if(e=i.nextSibling){"BR"==e.nodeName&&(o=a={node:e.parentNode,offset:nN(e)+1});break}let t=i.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let i=t.childNodes[e-1];c=i&&("BR"==i.nodeName||"false"==i.contentEditable)}}if(XL&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(n=!0)}if(!(n||c&&JL)&&aN(o.node,o.offset,l.anchorNode,l.anchorOffset)&&aN(a.node,a.offset,l.focusNode,l.focusOffset))return;let h=!1;if((l.extend||t==e)&&!c){l.collapse(o.node,o.offset);try{if(t!=e)try{l.extend(a.node,a.offset)}catch(t){}h=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!h){if(t>e){let t=o;o=a,a=t}let i=document.createRange();i.setEnd(a.node,a.offset),i.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(i)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,n=0;n<this.children.length;n++){let r=this.children[n],s=i+r.size;if(i==s?t<=s&&e>=i:t<s&&e>i){let n=i+r.border,o=s-r.border;if(t>=n&&e<=o)return this.dirty=t==i||e==s?2:1,void(t!=n||e!=o||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-n,e-n):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}i=s}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=1==t?2:1;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class NN extends LN{constructor(t,e,i,n){let r,s=e.type.toDOM;if("function"==typeof s&&(s=s(i,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:n))),!e.type.spec.raw){if(1!=s.nodeType){let t=document.createElement("span");t.appendChild(s),s=t}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=e,this.widget=e,r=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class BN extends LN{constructor(t,e,i,n){super(t,[],e,null),this.textDOM=i,this.text=n}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class jN extends LN{constructor(t,e,i,n){super(t,[],i,n),this.mark=e}static create(t,e,i,n){let r=n.nodeViews[e.type.name],s=r&&r(e,n,i);return s&&s.dom||(s=AF.renderSpec(document,e.type.spec.toDOM(e,i))),new jN(t,e,s.dom,s.contentDOM||s.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=0}}slice(t,e,i){let n=jN.create(this.parent,this.mark,!0,i),r=this.children,s=this.size;e<s&&(r=iB(r,e,s,i)),t>0&&(r=iB(r,0,t,i));for(let t=0;t<r.length;t++)r[t].parent=n;return n.children=r,n}}class zN extends LN{constructor(t,e,i,n,r,s,o,a,l){super(t,[],r,s),this.node=e,this.outerDeco=i,this.innerDeco=n,this.nodeDOM=o,s&&this.updateChildren(a,l)}static create(t,e,i,n,r,s){let o,a=r.nodeViews[e.type.name],l=a&&a(e,r,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:s),i,n),c=l&&l.dom,h=l&&l.contentDOM;if(e.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(e.text);else c||({dom:c,contentDOM:h}=AF.renderSpec(document,e.type.spec.toDOM(e)));h||e.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),e.type.spec.draggable&&(c.draggable=!0));let u=c;return c=JN(c,i,e),l?o=new VN(t,e,i,n,c,h||null,u,l,r,s+1):e.isText?new $N(t,e,i,n,c,u,r):new zN(t,e,i,n,c,h||null,u,r,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>AI.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,i){return 0==this.dirty&&t.eq(this.node)&&ZN(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,n=e,r=t.composing?this.localCompositionInfo(t,e):null,s=r&&r.pos>-1?r:null,o=r&&r.pos<0,a=new tB(this,s&&s.node,t);!function(t,e,i,n){let r=e.locals(t),s=0;if(0==r.length){for(let i=0;i<t.childCount;i++){let o=t.child(i);n(o,r,e.forChild(s,o),i),s+=o.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<r.length&&r[o].to==s){let t,e=r[o++];for(;o<r.length&&r[o].to==s;)(t||(t=[e])).push(r[o++]);if(t){t.sort(eB);for(let e=0;e<t.length;e++)i(t[e],c,!!l)}else i(e,c,!!l)}let h,u;if(l)u=-1,h=l,l=null;else{if(!(c<t.childCount))break;u=c,h=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=s&&a.splice(t--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let p=s+h.nodeSize;if(h.isText){let t=p;o<r.length&&r[o].from<t&&(t=r[o].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<p&&(l=h.cut(t-s),h=h.cut(0,t-s),p=t,u=-1)}n(h,h.isInline&&!h.isLeaf?a.filter((t=>!t.inline)):a.slice(),e.forChild(s,h),u),s=p}}(this.node,this.innerDeco,((e,r,s)=>{e.spec.marks?a.syncToMarks(e.spec.marks,i,t):e.type.side>=0&&!s&&a.syncToMarks(r==this.node.childCount?EI.none:this.node.child(r).marks,i,t),a.placeWidget(e,t,n)}),((e,s,l,c)=>{let h;a.syncToMarks(e.marks,i,t),a.findNodeMatch(e,s,l,c)||o&&t.state.selection.from>n&&t.state.selection.to<n+e.nodeSize&&(h=a.findIndexWithChild(r.node))>-1&&a.updateNodeAt(e,s,l,h,t)||a.updateNextNode(e,s,l,t,c)||a.addNode(e,s,l,t,n),n+=e.nodeSize})),a.syncToMarks([],i,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(t,s),qN(this.contentDOM,this.children,t),ZL&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}localCompositionInfo(t,e){let{from:i,to:n}=t.state.selection;if(!(t.state.selection instanceof mD)||i<e||n>e+this.node.content.size)return null;let r=t.domSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=hN(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(r.focusNode,r.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let t=s.nodeValue,r=function(t,e,i,n){for(let r=0,s=0;r<t.childCount&&s<=n;){let o=t.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<t.childCount;){let e=t.child(r++);if(s+=e.nodeSize,!e.isText)break;l+=e.text}if(s>=i){let t=a<n?l.lastIndexOf(e,n-a-1):-1;if(t>=0&&t+e.length+a>=i)return a+t;if(i==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}(this.node.content,t,i-e,n-e);return r<0?null:{node:s,pos:r,text:t}}return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:n}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let s=new BN(this,r,e,n);t.input.compositionNodes.push(s),this.children=iB(this.children,i,i+n.length,t,s)}update(t,e,i,n){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,i,n),!0)}updateInner(t,e,i,n){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(ZN(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=KN(this.dom,this.nodeDOM,GN(this.outerDeco,this.node,e),GN(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function UN(t,e,i,n,r){return JN(n,e,t),new zN(void 0,t,e,i,n,n,n,r,0)}class $N extends zN{constructor(t,e,i,n,r,s,o){super(t,e,i,n,r,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=t,this.dirty=0,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,i){let n=this.node.cut(t,e),r=document.createTextNode(n.text);return new $N(this.parent,n,this.outerDeco,this.innerDeco,r,r,i)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class HN extends LN{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class VN extends zN{constructor(t,e,i,n,r,s,o,a,l,c){super(t,e,i,n,r,s,o,l,c),this.spec=a}update(t,e,i,n){if(3==this.dirty)return!1;if(this.spec.update){let r=this.spec.update(t,e,i);return r&&this.updateInner(t,e,i,n),r}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,i,n)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,n){this.spec.setSelection?this.spec.setSelection(t,e,i):super.setSelection(t,e,i,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function qN(t,e,i){let n=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=QN(n),r=!0;n=n.nextSibling}else r=!0,t.insertBefore(a,n);if(o instanceof jN){let e=n?n.previousSibling:t.lastChild;qN(o.contentDOM,o.children,i),n=e?e.nextSibling:t.firstChild}}for(;n;)n=QN(n),r=!0;r&&i.trackWrites==t&&(i.trackWrites=null)}const WN=function(t){t&&(this.nodeName=t)};WN.prototype=Object.create(null);const XN=[new WN];function GN(t,e,i){if(0==t.length)return XN;let n=i?XN[0]:new WN,r=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&r.push(n=new WN(o.nodeName));for(let t in o){let s=o[t];null!=s&&(i&&1==r.length&&r.push(n=new WN(e.isInline?"span":"div")),"class"==t?n.class=(n.class?n.class+" ":"")+s:"style"==t?n.style=(n.style?n.style+";":"")+s:"nodeName"!=t&&(n[t]=s))}}}return r}function KN(t,e,i,n){if(i==XN&&n==XN)return e;let r=e;for(let e=0;e<n.length;e++){let s=n[e],o=i[e];if(e){let e;o&&o.nodeName==s.nodeName&&r!=t&&(e=r.parentNode)&&e.nodeName.toLowerCase()==s.nodeName||(e=document.createElement(s.nodeName),e.pmIsDeco=!0,e.appendChild(r),o=XN[0]),r=e}YN(r,o||XN[0],s)}return r}function YN(t,e,i){for(let n in e)"class"==n||"style"==n||"nodeName"==n||n in i||t.removeAttribute(n);for(let n in i)"class"!=n&&"style"!=n&&"nodeName"!=n&&i[n]!=e[n]&&t.setAttribute(n,i[n]);if(e.class!=i.class){let n=e.class?e.class.split(" ").filter(Boolean):[],r=i.class?i.class.split(" ").filter(Boolean):[];for(let e=0;e<n.length;e++)-1==r.indexOf(n[e])&&t.classList.remove(n[e]);for(let e=0;e<r.length;e++)-1==n.indexOf(r[e])&&t.classList.add(r[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=i.style){if(e.style){let i,n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}i.style&&(t.style.cssText+=i.style)}}function JN(t,e,i){return KN(t,t,XN,GN(e,i,1!=t.nodeType))}function ZN(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].type.eq(e[i].type))return!1;return!0}function QN(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class tB{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(t,e){let i=e,n=i.children.length,r=t.childCount,s=new Map,o=[];t:for(;r>0;){let a;for(;;)if(n){let t=i.children[n-1];if(!(t instanceof jN)){a=t,n--;break}i=t,n=t.children.length}else{if(i==e)break t;n=i.parent.children.indexOf(i),i=i.parent}let l=a.node;if(l){if(l!=t.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let n=0,r=this.stack.length>>1,s=Math.min(r,t.length);for(;n<s&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(t[n])&&!1!==t[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++)if(this.top.children[e].matchesMark(t[r])){n=e;break}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=jN.create(this.top,t[r],e,i);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,r++}}findNodeMatch(t,e,i,n){let r,s=-1;if(n>=this.preMatch.index&&(r=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&r.matchesNode(t,e,i))s=this.top.children.indexOf(r,this.index);else for(let n=this.index,r=Math.min(this.top.children.length,n+5);n<r;n++){let r=this.top.children[n];if(r.matchesNode(t,e,i)&&!this.preMatch.matched.has(r)){s=n;break}}return!(s<0)&&(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,n,r){let s=this.top.children[n];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(t,e,i,r)&&(this.destroyBetween(this.index,n),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,i,n,r){for(let s=this.index;s<this.top.children.length;s++){let o=this.top.children[s];if(o instanceof zN){let a=this.preMatch.matched.get(o);if(null!=a&&a!=r)return!1;let l=o.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==t.text&&3!=o.dirty&&ZN(e,o.outerDeco)))&&o.update(t,e,i,n))return this.destroyBetween(this.index,s),o.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,i,n,r){this.top.children.splice(this.index++,0,zN.create(this.top,t,e,i,n,r)),this.changed=!0}placeWidget(t,e,i){let n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(t)||t!=n.widget&&n.widget.type.toDOM.parentNode){let n=new NN(this.top,t,e,i);this.top.children.splice(this.index++,0,n),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof jN;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof $N)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((JL||KL)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);"IMG"==t&&(i.className="ProseMirror-separator",i.alt=""),"BR"==t&&(i.className="ProseMirror-trailingBreak");let n=new HN(this.top,[],i,null);e!=this.top?e.children.push(n):e.children.splice(this.index++,0,n),this.changed=!0}}}function eB(t,e){return t.type.side-e.type.side}function iB(t,e,i,n,r){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,h=a+=l.size;c>=i||h<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),r&&(s.push(r),r=void 0),h>i&&s.push(l.slice(i-c,l.size,n)))}return s}function nB(t,e=null){let i=t.domSelection(),n=t.state.doc;if(!i.focusNode)return null;let r=t.docView.nearestDesc(i.focusNode),s=r&&0==r.size,o=t.docView.posFromDOM(i.focusNode,i.focusOffset,1);if(o<0)return null;let a,l,c=n.resolve(o);if(pN(i)){for(a=c;r&&!r.node;)r=r.parent;let t=r.node;if(r&&t.isAtom&&vD.isSelectable(t)&&r.parent&&(!t.isInline||!function(t,e,i){for(let n=0==e,r=e==hN(t);n||r;){if(t==i)return!0;let e=nN(t);if(!(t=t.parentNode))return!1;n=n&&0==e,r=r&&e==hN(t)}}(i.focusNode,i.focusOffset,r.dom))){let t=r.posBefore;l=new vD(o==t?c:n.resolve(t))}}else{let e=t.docView.posFromDOM(i.anchorNode,i.anchorOffset,1);if(e<0)return null;a=n.resolve(e)}if(!l){l=pB(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!s?1:-1)}return l}function rB(t){return t.editable?t.hasFocus():fB(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function sB(t,e=!1){let i=t.state.selection;if(hB(t,i),rB(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&KL){let e=t.domSelection(),i=t.domObserver.currentSelection;if(e.anchorNode&&i.anchorNode&&aN(e.anchorNode,e.anchorOffset,i.anchorNode,i.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),i=document.createRange(),n=t.cursorWrapper.dom,r="IMG"==n.nodeName;r?i.setEnd(n.parentNode,nN(n)+1):i.setEnd(n,0);i.collapse(!1),e.removeAllRanges(),e.addRange(i),!r&&!t.state.selection.visible&&qL&&WL<=11&&(n.disabled=!0,n.disabled=!1)}(t);else{let n,r,{anchor:s,head:o}=i;!oB||i instanceof mD||(i.$from.parent.inlineContent||(n=aB(t,i.from)),i.empty||i.$from.parent.inlineContent||(r=aB(t,i.to))),t.docView.setSelection(s,o,t.root,e),oB&&(n&&cB(n),r&&cB(r)),i.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let i=t.domSelection(),n=i.anchorNode,r=i.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{i.anchorNode==n&&i.anchorOffset==r||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{rB(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const oB=JL||KL&&YL<63;function aB(t,e){let{node:i,offset:n}=t.docView.domFromPos(e,0),r=n<i.childNodes.length?i.childNodes[n]:null,s=n?i.childNodes[n-1]:null;if(JL&&r&&"false"==r.contentEditable)return lB(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return lB(r);if(s)return lB(s)}}function lB(t){return t.contentEditable="true",JL&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function cB(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function hB(t,e){if(e instanceof vD){let i=t.docView.descAt(e.from);i!=t.lastSelectedViewDesc&&(uB(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else uB(t)}function uB(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function pB(t,e,i,n){return t.someProp("createSelectionBetween",(n=>n(t,e,i)))||mD.between(e,i,n)}function dB(t){return!(t.editable&&!t.hasFocus())&&fB(t)}function fB(t){let e=t.domSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function gB(t,e){let{$anchor:i,$head:n}=t.selection,r=e>0?i.max(n):i.min(n),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&pD.findFrom(s,e)}function mB(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function yB(t,e,i){let n=t.state.selection;if(!(n instanceof mD)){if(n instanceof vD&&n.node.isInline)return mB(t,new mD(e>0?n.$to:n.$from));{let i=gB(t.state,e);return!!i&&mB(t,i)}}if(!n.empty||i.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let i=gB(t.state,e);return!!(i&&i instanceof vD)&&mB(t,i)}if(!(QL&&i.indexOf("m")>-1)){let i,r=n.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText)return!1;let o=e<0?r.pos-s.nodeSize:r.pos;return!!(s.isAtom||(i=t.docView.descAt(o))&&!i.contentDOM)&&(vD.isSelectable(s)?mB(t,new vD(e<0?t.state.doc.resolve(r.pos-s.nodeSize):r)):!!eN&&mB(t,new mD(t.state.doc.resolve(e<0?o:o+s.nodeSize))))}}function vB(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function bB(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function wB(t){let e=t.domSelection(),i=e.focusNode,n=e.focusOffset;if(!i)return;let r,s,o=!1;for(XL&&1==i.nodeType&&n<vB(i)&&bB(i.childNodes[n])&&(o=!0);;)if(n>0){if(1!=i.nodeType)break;{let t=i.childNodes[n-1];if(bB(t))r=i,s=--n;else{if(3!=t.nodeType)break;i=t,n=i.nodeValue.length}}}else{if(SB(i))break;{let e=i.previousSibling;for(;e&&bB(e);)r=i.parentNode,s=nN(e),e=e.previousSibling;if(e)i=e,n=vB(i);else{if(i=i.parentNode,i==t.dom)break;n=0}}}o?kB(t,e,i,n):r&&kB(t,e,r,s)}function xB(t){let e=t.domSelection(),i=e.focusNode,n=e.focusOffset;if(!i)return;let r,s,o=vB(i);for(;;)if(n<o){if(1!=i.nodeType)break;if(!bB(i.childNodes[n]))break;r=i,s=++n}else{if(SB(i))break;{let e=i.nextSibling;for(;e&&bB(e);)r=e.parentNode,s=nN(e)+1,e=e.nextSibling;if(e)i=e,n=0,o=vB(i);else{if(i=i.parentNode,i==t.dom)break;n=o=0}}}r&&kB(t,e,r,s)}function SB(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function kB(t,e,i,n){if(pN(e)){let t=document.createRange();t.setEnd(i,n),t.setStart(i,n),e.removeAllRanges(),e.addRange(t)}else e.extend&&e.extend(i,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout((()=>{t.state==r&&sB(t)}),50)}function CB(t,e,i){let n=t.state.selection;if(n instanceof mD&&!n.empty||i.indexOf("s")>-1)return!1;if(QL&&i.indexOf("m")>-1)return!1;let{$from:r,$to:s}=n;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=gB(t.state,e);if(i&&i instanceof vD)return mB(t,i)}if(!r.parent.inlineContent){let i=e<0?r:s,o=n instanceof wD?pD.near(i,e):pD.findFrom(i,e);return!!o&&mB(t,o)}return!1}function AB(t,e){if(!(t.state.selection instanceof mD))return!0;let{$head:i,$anchor:n,empty:r}=t.state.selection;if(!i.sameParent(n))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(s&&!s.isText){let n=t.state.tr;return e<0?n.delete(i.pos-s.nodeSize,i.pos):n.delete(i.pos,i.pos+s.nodeSize),t.dispatch(n),!0}return!1}function _B(t,e,i){t.domObserver.stop(),e.contentEditable=i,t.domObserver.start()}function TB(t,e){let i=e.keyCode,n=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==i||QL&&72==i&&"c"==n?AB(t,-1)||wB(t):46==i||QL&&68==i&&"c"==n?AB(t,1)||xB(t):13==i||27==i||(37==i||QL&&66==i&&"c"==n?yB(t,-1,n)||wB(t):39==i||QL&&70==i&&"c"==n?yB(t,1,n)||xB(t):38==i||QL&&80==i&&"c"==n?CB(t,-1,n)||wB(t):40==i||QL&&78==i&&"c"==n?function(t){if(!JL||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:i}=t.domSelection();if(e&&1==e.nodeType&&0==i&&e.firstChild&&"false"==e.firstChild.contentEditable){let i=e.firstChild;_B(t,i,"true"),setTimeout((()=>_B(t,i,"false")),20)}return!1}(t)||CB(t,1,n)||xB(t):n==(QL?"m":"c")&&(66==i||73==i||89==i||90==i))}function OB(t,e){t.someProp("transformCopied",(t=>{e=t(e)}));let i=[],{content:n,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&1==n.childCount&&1==n.firstChild.childCount;){r--,s--;let t=n.firstChild;i.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),n=t.content}let o=t.someProp("clipboardSerializer")||AF.fromSchema(t.state.schema),a=BB(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c,h=l.firstChild,u=0;for(;h&&1==h.nodeType&&(c=LB[h.nodeName.toLowerCase()]);){for(let t=c.length-1;t>=0;t--){let e=a.createElement(c[t]);for(;l.firstChild;)e.appendChild(l.firstChild);l.appendChild(e),u++}h=l.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${r} ${s}${u?` -${u}`:""} ${JSON.stringify(i)}`),{dom:l,text:t.someProp("clipboardTextSerializer",(t=>t(e)))||e.content.textBetween(0,e.content.size,"\n\n")}}function EB(t,e,i,n,r){let s,o,a=r.parent.type.spec.code;if(!i&&!e)return null;let l=e&&(n||a||!i);if(l){if(t.someProp("transformPastedText",(t=>{e=t(e,a||n)})),a)return e?new PI(AI.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):PI.empty;let i=t.someProp("clipboardTextParser",(t=>t(e,r,n)));if(i)o=i;else{let i=r.marks(),{schema:n}=t.state,o=AF.fromSchema(n);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(o.serializeNode(n.text(t,i)))}))}}else t.someProp("transformPastedHTML",(t=>{i=t(i)})),s=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let i,n=BB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t);(i=r&&LB[r[1].toLowerCase()])&&(t=i.map((t=>"<"+t+">")).join("")+t+i.map((t=>"</"+t+">")).reverse().join(""));if(n.innerHTML=t,i)for(let t=0;t<i.length;t++)n=n.querySelector(i[t])||n;return n}(i),eN&&function(t){let e=t.querySelectorAll(KL?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<e.length;i++){let n=e[i];1==n.childNodes.length&&" "==n.textContent&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}(s);let c=s&&s.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let t=+h[3];t>0&&s.firstChild;t--)s=s.firstChild;if(!o){let e=t.someProp("clipboardParser")||t.someProp("domParser")||gF.fromSchema(t.state.schema);o=e.parseSlice(s,{preserveWhitespace:!(!l&&!h),context:r,ruleFromNode:t=>"BR"!=t.nodeName||t.nextSibling||!t.parentNode||MB.test(t.parentNode.nodeName)?null:{ignore:!0}})}if(h)o=function(t,e){if(!t.size)return t;let i,n=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch(e){return t}let{content:r,openStart:s,openEnd:o}=t;for(let t=i.length-2;t>=0;t-=2){let e=n.nodes[i[t]];if(!e||e.hasRequiredAttrs())break;r=AI.from(e.create(i[t+1],r)),s++,o++}return new PI(r,s,o)}(RB(o,+h[1],+h[2]),h[4]);else if(o=PI.maxOpen(function(t,e){if(t.childCount<2)return t;for(let i=e.depth;i>=0;i--){let n,r=e.node(i).contentMatchAt(e.index(i)),s=[];if(t.forEach((t=>{if(!s)return;let e,i=r.findWrapping(t.type);if(!i)return s=null;if(e=s.length&&n.length&&IB(i,n,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=FB(s[s.length-1],n.length));let e=PB(t,i);s.push(e),r=r.matchType(e.type),n=i}})),s)return AI.from(s)}return t}(o.content,r),!0),o.openStart||o.openEnd){let t=0,e=0;for(let e=o.content.firstChild;t<o.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=o.content.lastChild;e<o.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);o=RB(o,t,e)}return t.someProp("transformPasted",(t=>{o=t(o)})),o}const MB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function PB(t,e,i=0){for(let n=e.length-1;n>=i;n--)t=e[n].create(null,AI.from(t));return t}function IB(t,e,i,n,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let s=IB(t,e,i,n.lastChild,r+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(r==t.length-1?i.type:t[r+1]))return n.copy(n.content.append(AI.from(PB(i,t,r+1))))}}function FB(t,e){if(0==e)return t;let i=t.content.replaceChild(t.childCount-1,FB(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(AI.empty,!0);return t.copy(i.append(n))}function DB(t,e,i,n,r,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return r<n-1&&(a=DB(a,e,i,n,r+1,s)),r>=i&&(a=e<0?o.contentMatchAt(0).fillBefore(a,t.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(AI.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function RB(t,e,i){return e<t.openStart&&(t=new PI(DB(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),i<t.openEnd&&(t=new PI(DB(t.content,1,i,t.openEnd,0,0),t.openStart,i)),t}const LB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let NB=null;function BB(){return NB||(NB=document.implementation.createHTMLDocument("title"))}const jB={},zB={},UB={touchstart:!0,touchmove:!0};class $B{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function HB(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function VB(t){t.someProp("handleDOMEvents",(e=>{for(let i in e)t.input.eventHandlers[i]||t.dom.addEventListener(i,t.input.eventHandlers[i]=e=>qB(t,e))}))}function qB(t,e){return t.someProp("handleDOMEvents",(i=>{let n=i[e.type];return!!n&&(n(t,e)||e.defaultPrevented)}))}function WB(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target;i!=t.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}function XB(t){return{left:t.clientX,top:t.clientY}}function GB(t,e,i,n,r){if(-1==n)return!1;let s=t.state.doc.resolve(n);for(let n=s.depth+1;n>0;n--)if(t.someProp(e,(e=>n>s.depth?e(t,i,s.nodeAfter,s.before(n),r,!0):e(t,i,s.node(n),s.before(n),r,!1))))return!0;return!1}function KB(t,e,i){t.focused||t.focus();let n=t.state.tr.setSelection(e);"pointer"==i&&n.setMeta("pointer",!0),t.dispatch(n)}function YB(t,e,i,n,r){return GB(t,"handleClickOn",e,i,n)||t.someProp("handleClick",(i=>i(t,e,n)))||(r?function(t,e){if(-1==e)return!1;let i,n,r=t.state.selection;r instanceof vD&&(i=r.node);let s=t.state.doc.resolve(e);for(let t=s.depth+1;t>0;t--){let e=t>s.depth?s.nodeAfter:s.node(t);if(vD.isSelectable(e)){n=i&&r.$from.depth>0&&t>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(t);break}}return null!=n&&(KB(t,vD.create(t.state.doc,n),"pointer"),!0)}(t,i):function(t,e){if(-1==e)return!1;let i=t.state.doc.resolve(e),n=i.nodeAfter;return!!(n&&n.isAtom&&vD.isSelectable(n))&&(KB(t,new vD(i),"pointer"),!0)}(t,i))}function JB(t,e,i,n){return GB(t,"handleDoubleClickOn",e,i,n)||t.someProp("handleDoubleClick",(i=>i(t,e,n)))}function ZB(t,e,i,n){return GB(t,"handleTripleClickOn",e,i,n)||t.someProp("handleTripleClick",(i=>i(t,e,n)))||function(t,e,i){if(0!=i.button)return!1;let n=t.state.doc;if(-1==e)return!!n.inlineContent&&(KB(t,mD.create(n,0,n.content.size),"pointer"),!0);let r=n.resolve(e);for(let e=r.depth+1;e>0;e--){let i=e>r.depth?r.nodeAfter:r.node(e),s=r.before(e);if(i.inlineContent)KB(t,mD.create(n,s+1,s+1+i.content.size),"pointer");else{if(!vD.isSelectable(i))continue;KB(t,vD.create(n,s),"pointer")}return!0}}(t,i,n)}function QB(t){return oj(t)}zB.keydown=(t,e)=>{let i=e;if(t.input.shiftKey=16==i.keyCode||i.shiftKey,!ij(t,i)&&(t.input.lastKeyCode=i.keyCode,t.input.lastKeyCodeTime=Date.now(),!tN||!KL||13!=i.keyCode))if(229!=i.keyCode&&t.domObserver.forceFlush(),!ZL||13!=i.keyCode||i.ctrlKey||i.altKey||i.metaKey)t.someProp("handleKeyDown",(e=>e(t,i)))||TB(t,i)?i.preventDefault():HB(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,dN(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},zB.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},zB.keypress=(t,e)=>{let i=e;if(ij(t,i)||!i.charCode||i.ctrlKey&&!i.altKey||QL&&i.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,i))))return void i.preventDefault();let n=t.state.selection;if(!(n instanceof mD&&n.$from.sameParent(n.$to))){let e=String.fromCharCode(i.charCode);t.someProp("handleTextInput",(i=>i(t,n.$from.pos,n.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),i.preventDefault()}};const tj=QL?"metaKey":"ctrlKey";jB.mousedown=(t,e)=>{let i=e;t.input.shiftKey=i.shiftKey;let n=QB(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&function(t,e){let i=e.x-t.clientX,n=e.y-t.clientY;return i*i+n*n<100}(i,t.input.lastClick)&&!i[tj]&&("singleClick"==t.input.lastClick.type?s="doubleClick":"doubleClick"==t.input.lastClick.type&&(s="tripleClick")),t.input.lastClick={time:r,x:i.clientX,y:i.clientY,type:s};let o=t.posAtCoords(XB(i));o&&("singleClick"==s?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ej(t,o,i,!!n)):("doubleClick"==s?JB:ZB)(t,o.pos,o.inside,i)?i.preventDefault():HB(t,"pointer"))};class ej{constructor(t,e,i,n){let r,s;if(this.view=t,this.pos=e,this.event=i,this.flushed=n,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[tj],this.allowDefault=i.shiftKey,e.inside>-1)r=t.state.doc.nodeAt(e.inside),s=e.inside;else{let i=t.state.doc.resolve(e.pos);r=i.parent,s=i.depth?i.before():0}const o=n?null:i.target,a=o?t.docView.nearestDesc(o,!0):null;this.target=a?a.dom:null;let{selection:l}=t.state;(0==i.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||l instanceof vD&&l.from<=s&&l.to>s)&&(this.mightDrag={node:r,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!XL||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),HB(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>sB(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(XB(t))),this.updateAllowDefault(t),this.allowDefault||!e?HB(this.view,"pointer"):YB(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||JL&&this.mightDrag&&!this.mightDrag.node.isAtom||KL&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(KB(this.view,pD.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):HB(this.view,"pointer")}move(t){this.updateAllowDefault(t),HB(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function ij(t,e){return!!t.composing||!!(JL&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}jB.touchstart=t=>{t.input.lastTouch=Date.now(),QB(t),HB(t,"pointer")},jB.touchmove=t=>{t.input.lastTouch=Date.now(),HB(t,"pointer")},jB.contextmenu=t=>QB(t);const nj=tN?5e3:-1;function rj(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>oj(t)),e))}function sj(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function oj(t,e=!1){if(!(tN&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),sj(t),e||t.docView&&t.docView.dirty){let e=nB(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}zB.compositionstart=zB.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||i.marks(),oj(t,!0),t.markCursor=null;else if(oj(t),XL&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length){let e=t.domSelection();for(let t=e.focusNode,i=e.focusOffset;t&&1==t.nodeType&&0!=i;){let n=i<0?t.lastChild:t.childNodes[i-1];if(!n)break;if(3==n.nodeType){e.collapse(n,n.nodeValue.length);break}t=n,i=-1}}t.input.composing=!0}rj(t,nj)},zB.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,rj(t,20))};const aj=qL&&WL<15||ZL&&iN<604;function lj(t,e,i,n){let r=EB(t,e,i,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,n,r||PI.empty))))return!0;if(!r)return!1;let s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(r),o=s?t.state.tr.replaceSelectionWith(s,t.input.shiftKey):t.state.tr.replaceSelection(r);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}jB.copy=zB.cut=(t,e)=>{let i=e,n=t.state.selection,r="cut"==i.type;if(n.empty)return;let s=aj?null:i.clipboardData,o=n.content(),{dom:a,text:l}=OB(t,o);s?(i.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):function(t,e){if(!t.dom.parentNode)return;let i=t.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout((()=>{i.parentNode&&i.parentNode.removeChild(i),t.focus()}),50)}(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},zB.paste=(t,e)=>{let i=e;if(t.composing&&!tN)return;let n=aj?null:i.clipboardData;n&&lj(t,n.getData("text/plain"),n.getData("text/html"),i)?i.preventDefault():function(t,e){if(!t.dom.parentNode)return;let i=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),i?lj(t,n.value,null,e):lj(t,n.textContent,n.innerHTML,e)}),50)}(t,i)};class cj{constructor(t,e){this.slice=t,this.move=e}}const hj=QL?"altKey":"ctrlKey";jB.dragstart=(t,e)=>{let i=e,n=t.input.mouseDown;if(n&&n.done(),!i.dataTransfer)return;let r=t.state.selection,s=r.empty?null:t.posAtCoords(XB(i));if(s&&s.pos>=r.from&&s.pos<=(r instanceof vD?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(vD.create(t.state.doc,n.mightDrag.pos)));else if(i.target&&1==i.target.nodeType){let e=t.docView.nearestDesc(i.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&t.dispatch(t.state.tr.setSelection(vD.create(t.state.doc,e.posBefore)))}let o=t.state.selection.content(),{dom:a,text:l}=OB(t,o);i.dataTransfer.clearData(),i.dataTransfer.setData(aj?"Text":"text/html",a.innerHTML),i.dataTransfer.effectAllowed="copyMove",aj||i.dataTransfer.setData("text/plain",l),t.dragging=new cj(o,!i[hj])},jB.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},zB.dragover=zB.dragenter=(t,e)=>e.preventDefault(),zB.drop=(t,e)=>{let i=e,n=t.dragging;if(t.dragging=null,!i.dataTransfer)return;let r=t.posAtCoords(XB(i));if(!r)return;let s=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",(t=>{o=t(o)})):o=EB(t,i.dataTransfer.getData(aj?"Text":"text/plain"),aj?null:i.dataTransfer.getData("text/html"),!1,s);let a=!(!n||i[hj]);if(t.someProp("handleDrop",(e=>e(t,i,o||PI.empty,a))))return void i.preventDefault();if(!o)return;i.preventDefault();let l=o?function(t,e,i){let n=t.resolve(e);if(!i.content.size)return e;let r=i.content;for(let t=0;t<i.openStart;t++)r=r.firstChild.content;for(let t=1;t<=(0==i.openStart&&i.size?2:1);t++)for(let e=n.depth;e>=0;e--){let i=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,s=n.index(e)+(i>0?1:0),o=n.node(e),a=!1;if(1==t)a=o.canReplace(s,s,r);else{let t=o.contentMatchAt(s).findWrapping(r.firstChild.type);a=t&&o.canReplaceWith(s,s,t[0])}if(a)return 0==i?n.pos:i<0?n.before(e+1):n.after(e+1)}return null}(t.state.doc,s.pos,o):s.pos;null==l&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let h=c.mapping.map(l),u=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,p=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(p))return;let d=c.doc.resolve(h);if(u&&vD.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new vD(d));else{let e=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((t,i,n,r)=>e=r)),c.setSelection(pB(t,d,c.doc.resolve(e)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))},jB.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelection())&&sB(t)}),20))},jB.blur=(t,e)=>{let i=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),i.relatedTarget&&t.dom.contains(i.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},jB.beforeinput=(t,e)=>{if(KL&&tN&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,dN(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}),50)}};for(let t in zB)jB[t]=zB[t];function uj(t,e){if(t==e)return!0;for(let i in t)if(t[i]!==e[i])return!1;for(let i in e)if(!(i in t))return!1;return!0}class pj{constructor(t,e){this.toDOM=t,this.spec=e||yj,this.side=this.spec.side||0}map(t,e,i,n){let{pos:r,deleted:s}=t.mapResult(e.from+n,this.side<0?-1:1);return s?null:new gj(r-i,r-i,this)}valid(){return!0}eq(t){return this==t||t instanceof pj&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&uj(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class dj{constructor(t,e){this.attrs=t,this.spec=e||yj}map(t,e,i,n){let r=t.map(e.from+n,this.spec.inclusiveStart?-1:1)-i,s=t.map(e.to+n,this.spec.inclusiveEnd?1:-1)-i;return r>=s?null:new gj(r,s,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof dj&&uj(this.attrs,t.attrs)&&uj(this.spec,t.spec)}static is(t){return t.type instanceof dj}destroy(){}}class fj{constructor(t,e){this.attrs=t,this.spec=e||yj}map(t,e,i,n){let r=t.mapResult(e.from+n,1);if(r.deleted)return null;let s=t.mapResult(e.to+n,-1);return s.deleted||s.pos<=r.pos?null:new gj(r.pos-i,s.pos-i,this)}valid(t,e){let i,{index:n,offset:r}=t.content.findIndex(e.from);return r==e.from&&!(i=t.child(n)).isText&&r+i.nodeSize==e.to}eq(t){return this==t||t instanceof fj&&uj(this.attrs,t.attrs)&&uj(this.spec,t.spec)}destroy(){}}class gj{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new gj(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new gj(t,t,new pj(e,i))}static inline(t,e,i,n){return new gj(t,e,new dj(i,n))}static node(t,e,i,n){return new gj(t,e,new fj(i,n))}get spec(){return this.type.spec}get inline(){return this.type instanceof dj}}const mj=[],yj={};class vj{constructor(t,e){this.local=t.length?t:mj,this.children=e.length?e:mj}static create(t,e){return e.length?Cj(e,t,0,yj):bj}find(t,e,i){let n=[];return this.findInner(null==t?0:t,null==e?1e9:e,n,0,i),n}findInner(t,e,i,n,r){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=e&&o.to>=t&&(!r||r(o.spec))&&i.push(o.copy(o.from+n,o.to+n))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,e-o,i,n+o,r)}}map(t,e,i){return this==bj||0==t.maps.length?this:this.mapInner(t,e,0,0,i||yj)}mapInner(t,e,i,n,r){let s;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(t,i,n);a&&a.type.valid(e,a)?(s||(s=[])).push(a):r.onRemove&&r.onRemove(this.local[o].spec)}return this.children.length?function(t,e,i,n,r,s,o){let a=t.slice();for(let t=0,e=s;t<i.maps.length;t++){let n=0;i.maps[t].forEach(((t,i,s,o)=>{let l=o-s-(i-t);for(let o=0;o<a.length;o+=3){let c=a[o+1];if(c<0||t>c+e-n)continue;let h=a[o]+e-n;i>=h?a[o+1]=t<=h?-2:-1:s>=r&&l&&(a[o]+=l,a[o+1]+=l)}n+=l})),e=i.maps[t].map(e,-1)}let l=!1;for(let e=0;e<a.length;e+=3)if(a[e+1]<0){if(-2==a[e+1]){l=!0,a[e+1]=-1;continue}let c=i.map(t[e]+s),h=c-r;if(h<0||h>=n.content.size){l=!0;continue}let u=i.map(t[e+1]+s,-1)-r,{index:p,offset:d}=n.content.findIndex(h),f=n.maybeChild(p);if(f&&d==h&&d+f.nodeSize==u){let n=a[e+2].mapInner(i,f,c+1,t[e]+s+1,o);n!=bj?(a[e]=h,a[e+1]=u,a[e+2]=n):(a[e+1]=-2,l=!0)}else l=!0}if(l){let l=function(t,e,i,n,r,s,o){function a(t,e){for(let s=0;s<t.local.length;s++){let a=t.local[s].map(n,r,e);a?i.push(a):o.onRemove&&o.onRemove(t.local[s].spec)}for(let i=0;i<t.children.length;i+=3)a(t.children[i+2],t.children[i]+e+1)}for(let i=0;i<t.length;i+=3)-1==t[i+1]&&a(t[i+2],e[i]+s+1);return i}(a,t,e,i,r,s,o),c=Cj(l,n,0,o);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let i=c.children[t];for(;e<a.length&&a[e]<i;)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new vj(e.sort(Aj),a)}(this.children,s||[],t,e,i,n,r):s?new vj(s.sort(Aj),mj):bj}add(t,e){return e.length?this==bj?vj.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let n,r=0;t.forEach(((t,s)=>{let o,a=s+i;if(o=Sj(e,t,a)){for(n||(n=this.children.slice());r<n.length&&n[r]<s;)r+=3;n[r]==s?n[r+2]=n[r+2].addInner(t,o,a+1):n.splice(r,0,s,s+t.nodeSize,Cj(o,t,a+1,yj)),r+=3}}));let s=xj(r?kj(e):e,-i);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||s.splice(e--,1);return new vj(s.length?this.local.concat(s).sort(Aj):this.local,n||this.children)}remove(t){return 0==t.length||this==bj?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,n=this.local;for(let n=0;n<i.length;n+=3){let r,s=i[n]+e,o=i[n+1]+e;for(let e,i=0;i<t.length;i++)(e=t[i])&&e.from>s&&e.to<o&&(t[i]=null,(r||(r=[])).push(e));if(!r)continue;i==this.children&&(i=this.children.slice());let a=i[n+2].removeInner(r,s+1);a!=bj?i[n+2]=a:(i.splice(n,3),n-=3)}if(n.length)for(let i,r=0;r<t.length;r++)if(i=t[r])for(let t=0;t<n.length;t++)n[t].eq(i,e)&&(n==this.local&&(n=this.local.slice()),n.splice(t--,1));return i==this.children&&n==this.local?this:n.length||i.length?new vj(n,i):bj}forChild(t,e){if(this==bj)return this;if(e.isLeaf)return vj.empty;let i,n;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(i=this.children[e+2]);break}let r=t+1,s=r+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<s&&e.to>r&&e.type instanceof dj){let t=Math.max(r,e.from)-r,i=Math.min(s,e.to)-r;t<i&&(n||(n=[])).push(e.copy(t,i))}}if(n){let t=new vj(n.sort(Aj),mj);return i?new wj([t,i]):t}return i||bj}eq(t){if(this==t)return!0;if(!(t instanceof vj)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return _j(this.localsInner(t))}localsInner(t){if(this==bj)return mj;if(t.inlineContent||!this.local.some(dj.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof dj||e.push(this.local[t]);return e}}vj.empty=new vj([],[]),vj.removeOverlap=_j;const bj=vj.empty;class wj{constructor(t){this.members=t}map(t,e){const i=this.members.map((i=>i.map(t,e,yj)));return wj.from(i)}forChild(t,e){if(e.isLeaf)return vj.empty;let i=[];for(let n=0;n<this.members.length;n++){let r=this.members[n].forChild(t,e);r!=bj&&(r instanceof wj?i=i.concat(r.members):i.push(r))}return wj.from(i)}eq(t){if(!(t instanceof wj)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let n=0;n<this.members.length;n++){let r=this.members[n].localsInner(t);if(r.length)if(e){i&&(e=e.slice(),i=!1);for(let t=0;t<r.length;t++)e.push(r[t])}else e=r}return e?_j(i?e:e.sort(Aj)):mj}static from(t){switch(t.length){case 0:return bj;case 1:return t[0];default:return new wj(t)}}}function xj(t,e){if(!e||!t.length)return t;let i=[];for(let n=0;n<t.length;n++){let r=t[n];i.push(new gj(r.from+e,r.to+e,r.type))}return i}function Sj(t,e,i){if(e.isLeaf)return null;let n=i+e.nodeSize,r=null;for(let e,s=0;s<t.length;s++)(e=t[s])&&e.from>i&&e.to<n&&((r||(r=[])).push(e),t[s]=null);return r}function kj(t){let e=[];for(let i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function Cj(t,e,i,n){let r=[],s=!1;e.forEach(((e,o)=>{let a=Sj(t,e,o+i);if(a){s=!0;let t=Cj(a,e,i+o+1,n);t!=bj&&r.push(o,o+e.nodeSize,t)}}));let o=xj(s?kj(t):t,-i).sort(Aj);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||(n.onRemove&&n.onRemove(o[t].spec),o.splice(t--,1));return o.length||r.length?new vj(o,r):bj}function Aj(t,e){return t.from-e.from||t.to-e.to}function _j(t){let e=t;for(let i=0;i<e.length-1;i++){let n=e[i];if(n.from!=n.to)for(let r=i+1;r<e.length;r++){let s=e[r];if(s.from!=n.from){s.from<n.to&&(e==t&&(e=t.slice()),e[i]=n.copy(n.from,s.from),Tj(e,r,n.copy(s.from,n.to)));break}s.to!=n.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,n.to),Tj(e,r+1,s.copy(n.to,s.to)))}}return e}function Tj(t,e,i){for(;e<t.length&&Aj(i,t[e])>0;)e++;t.splice(e,0,i)}function Oj(t){let e=[];return t.someProp("decorations",(i=>{let n=i(t.state);n&&n!=bj&&e.push(n)})),t.cursorWrapper&&e.push(vj.create(t.state.doc,[t.cursorWrapper.deco])),wj.from(e)}const Ej={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Mj=qL&&WL<=11;class Pj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Ij{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Pj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);qL&&WL<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Mj&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ej)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(dB(this.view)){if(this.suppressingSelectionUpdates)return sB(this.view);if(qL&&WL<=11&&!this.view.state.selection.empty){let t=this.view.domSelection();if(t.focusNode&&aN(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(t){if(0==t.rangeCount)return!0;let e=t.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let i=t.domSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&dB(t)&&!this.ignoreSelectionChange(i),r=-1,s=-1,o=!1,a=[];if(t.editable)for(let t=0;t<e.length;t++){let i=this.registerMutation(e[t],a);i&&(r=r<0?i.from:Math.min(i.from,r),s=s<0?i.to:Math.max(i.to,s),i.typeOver&&(o=!0))}if(XL&&a.length>1){let t=a.filter((t=>"BR"==t.nodeName));if(2==t.length){let e=t[0],i=t[1];e.parentNode&&e.parentNode.parentNode==i.parentNode?i.remove():e.remove()}}let l=null;r<0&&n&&t.input.lastFocus>Date.now()-200&&t.input.lastTouch<Date.now()-300&&pN(i)&&(l=nB(t))&&l.eq(pD.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,sB(t),this.currentSelection.set(i),t.scrollToSelection()):(r>-1||n)&&(r>-1&&(t.docView.markDirty(r,s),function(t){if(Fj.has(t))return;if(Fj.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=XL,Dj)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Dj=!0}}(t)),this.handleDOMChange(r,s,o,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||sB(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(t))return null;if("childList"==t.type){for(let i=0;i<t.addedNodes.length;i++)e.push(t.addedNodes[i]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let n=t.previousSibling,r=t.nextSibling;if(qL&&WL<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:i,nextSibling:s}=t.addedNodes[e];(!i||Array.prototype.indexOf.call(t.addedNodes,i)<0)&&(n=i),(!s||Array.prototype.indexOf.call(t.addedNodes,s)<0)&&(r=s)}let s=n&&n.parentNode==t.target?nN(n)+1:0,o=i.localPosFromDOM(t.target,s,-1),a=r&&r.parentNode==t.target?nN(r):t.target.childNodes.length;return{from:o,to:i.localPosFromDOM(t.target,a,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Fj=new WeakMap,Dj=!1;function Rj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(JL&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||JL&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}function Lj(t,e,i,n,r){if(e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,i=nB(t,e);if(i&&!t.state.selection.eq(i)){let n=t.state.tr.setSelection(i);"pointer"==e?n.setMeta("pointer",!0):"key"==e&&n.scrollIntoView(),t.dispatch(n)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(i);e=s.before(o+1),i=t.state.doc.resolve(i).after(o+1);let a,l,c=t.state.selection,h=function(t,e,i){let n,{node:r,fromOffset:s,toOffset:o,from:a,to:l}=t.docView.parseRange(e,i),c=t.domSelection(),h=c.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(n=[{node:h,offset:c.anchorOffset}],pN(c)||n.push({node:c.focusNode,offset:c.focusOffset})),KL&&8===t.input.lastKeyCode)for(let t=o;t>s;t--){let e=r.childNodes[t-1],i=e.pmViewDesc;if("BR"==e.nodeName&&!i){o=t;break}if(!i||i.size)break}let u=t.state.doc,p=t.someProp("domParser")||gF.fromSchema(t.state.schema),d=u.resolve(a),f=null,g=p.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:s,to:o,preserveWhitespace:"pre"!=d.parent.type.whitespace||"full",findPositions:n,ruleFromNode:Rj,context:d});if(n&&null!=n[0].pos){let t=n[0].pos,e=n[1]&&n[1].pos;null==e&&(e=t),f={anchor:t+a,head:e+a}}return{doc:g,sel:f,from:a,to:l}}(t,e,i),u=t.state.doc,p=u.slice(h.from,h.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(a=t.state.selection.to,l="end"):(a=t.state.selection.from,l="start"),t.input.lastKeyCode=null;let d=function(t,e,i,n,r){let s=t.findDiffStart(e,i);if(null==s)return null;let{a:o,b:a}=t.findDiffEnd(e,i+t.size,i+e.size);if("end"==r){n-=o+Math.max(0,s-Math.min(o,a))-s}if(o<s&&t.size<e.size){s-=n<=s&&n>=o?s-n:0,a=s+(a-o),o=s}else if(a<s){s-=n<=s&&n>=a?s-n:0,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}(p.content,h.doc.content,h.from,a,l);if((ZL&&t.input.lastIOSEnter>Date.now()-225||tN)&&r.some((t=>"DIV"==t.nodeName||"P"==t.nodeName))&&(!d||d.endA>=d.endB)&&t.someProp("handleKeyDown",(e=>e(t,dN(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!d){if(!(n&&c instanceof mD&&!c.empty&&c.$head.sameParent(c.$anchor))||t.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let e=Nj(t,t.state.doc,h.sel);e&&!e.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(e))}return}d={start:c.from,endA:c.to,endB:c.to}}if(KL&&t.cursorWrapper&&h.sel&&h.sel.anchor==t.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let t=d.endB-d.start;h.sel={anchor:h.sel.anchor+t,head:h.sel.anchor+t}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&d.start==d.endB&&t.state.selection instanceof mD&&(d.start>t.state.selection.from&&d.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?d.start=t.state.selection.from:d.endA<t.state.selection.to&&d.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(d.endB+=t.state.selection.to-d.endA,d.endA=t.state.selection.to)),qL&&WL<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>h.from&&"  "==h.doc.textBetween(d.start-h.from-1,d.start-h.from+1)&&(d.start--,d.endA--,d.endB--);let f,g=h.doc.resolveNoCache(d.start-h.from),m=h.doc.resolveNoCache(d.endB-h.from),y=u.resolve(d.start),v=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=d.endA;if((ZL&&t.input.lastIOSEnter>Date.now()-225&&(!v||r.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!v&&g.pos<h.doc.content.size&&(f=pD.findFrom(h.doc.resolve(g.pos+1),1,!0))&&f.head==m.pos)&&t.someProp("handleKeyDown",(e=>e(t,dN(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>d.start&&function(t,e,i,n,r){if(!n.parent.isTextblock||i-e<=r.pos-n.pos||Bj(n,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Bj(s,!0,!0));return!(!o.parent.isTextblock||o.pos>i||Bj(o,!0,!1)<i)&&n.parent.content.cut(n.parentOffset).eq(o.parent.content)}(u,d.start,d.endA,g,m)&&t.someProp("handleKeyDown",(e=>e(t,dN(8,"Backspace")))))return void(tN&&KL&&t.domObserver.suppressSelectionUpdates());KL&&tN&&d.endB==d.start&&(t.input.lastAndroidDelete=Date.now()),tN&&!v&&g.start()!=m.start()&&0==m.parentOffset&&g.depth==m.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==d.endA&&(d.endB-=2,m=h.doc.resolveNoCache(d.endB-h.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,dN(13,"Enter"))}))}),20));let b,w,x,S=d.start,k=d.endA;if(v)if(g.pos==m.pos)qL&&WL<=11&&0==g.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>sB(t)),20)),b=t.state.tr.delete(S,k),w=u.resolve(d.start).marksAcross(u.resolve(d.endA));else if(d.endA==d.endB&&(x=function(t,e){let i,n,r,s=t.firstChild.marks,o=e.firstChild.marks,a=s,l=o;for(let t=0;t<o.length;t++)a=o[t].removeFromSet(a);for(let t=0;t<s.length;t++)l=s[t].removeFromSet(l);if(1==a.length&&0==l.length)n=a[0],i="add",r=t=>t.mark(n.addToSet(t.marks));else{if(0!=a.length||1!=l.length)return null;n=l[0],i="remove",r=t=>t.mark(n.removeFromSet(t.marks))}let c=[];for(let t=0;t<e.childCount;t++)c.push(r(e.child(t)));if(AI.from(c).eq(t))return{mark:n,type:i}}(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,d.endA-y.start()))))b=t.state.tr,"add"==x.type?b.addMark(S,k,x.mark):b.removeMark(S,k,x.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let e=g.parent.textBetween(g.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",(i=>i(t,S,k,e))))return;b=t.state.tr.insertText(e,S,k)}if(b||(b=t.state.tr.replace(S,k,h.doc.slice(d.start-h.from,d.endB-h.from))),h.sel){let e=Nj(t,b.doc,h.sel);e&&!(KL&&tN&&t.composing&&e.empty&&(d.start!=d.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==S||e.head==b.mapping.map(k)-1)||qL&&e.empty&&e.head==S)&&b.setSelection(e)}w&&b.ensureMarks(w),t.dispatch(b.scrollIntoView())}function Nj(t,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:pB(t,e.resolve(i.anchor),e.resolve(i.head))}function Bj(t,e,i){let n=t.depth,r=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,r++,e=!1;if(i){let e=t.node(n).maybeChild(t.indexAfter(n));for(;e&&!e.isLeaf;)e=e.firstChild,r++}return r}class jj{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new $B,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Vj),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=$j(this),Uj(this),this.nodeViews=Hj(this),this.docView=UN(this.state.doc,zj(this),Oj(this),this.dom,this),this.domObserver=new Ij(this,((t,e,i,n)=>Lj(this,t,e,i,n))),this.domObserver.start(),function(t){for(let e in jB){let i=jB[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!WB(t,e)||qB(t,e)||!t.editable&&e.type in zB||i(t,e)},UB[e]?{passive:!0}:void 0)}JL&&t.dom.addEventListener("input",(()=>null)),VB(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&VB(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Vj),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let t in this._props)e[t]=this._props[t];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let i=this.state,n=!1,r=!1;t.storedMarks&&this.composing&&(sj(this),r=!0),this.state=t;let s=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(s||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=Hj(this);(function(t,e){let i=0,n=0;for(let n in t){if(t[n]!=e[n])return!0;i++}for(let t in e)n++;return i!=n})(t,this.nodeViews)&&(this.nodeViews=t,n=!0)}(s||e.handleDOMEvents!=this._props.handleDOMEvents)&&VB(this),this.editable=$j(this),Uj(this);let o=Oj(this),a=zj(this),l=i.plugins==t.plugins||i.doc.eq(t.doc)?t.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",c=n||!this.docView.matchesNode(t.doc,a,o);!c&&t.selection.eq(i.selection)||(r=!0);let h="preserve"==l&&r&&null==this.dom.style.overflowAnchor&&function(t){let e,i,n=t.dom.getBoundingClientRect(),r=Math.max(0,n.top);for(let s=(n.left+n.right)/2,o=r+1;o<Math.min(innerHeight,n.bottom);o+=5){let n=t.root.elementFromPoint(s,o);if(!n||n==t.dom||!t.dom.contains(n))continue;let a=n.getBoundingClientRect();if(a.top>=r-20){e=n,i=a.top;break}}return{refDOM:e,refTop:i,stack:vN(t.dom)}}(this);if(r){this.domObserver.stop();let e=c&&(qL||KL)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function(t,e){let i=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(i)!=e.$anchor.start(i)}(i.selection,t.selection);if(c){let i=KL?this.trackWrites=this.domSelection().focusNode:null;!n&&this.docView.update(t.doc,a,o,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=UN(t.doc,a,o,this.dom,this)),i&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),i=t.domSelection();return aN(e.node,e.offset,i.anchorNode,i.anchorOffset)}(this))?sB(this,e):(hB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():h&&function({refDOM:t,refTop:e,stack:i}){let n=t?t.getBoundingClientRect().top:0;bN(i,0==n?0:n-e)}(h)}scrollToSelection(){let t=this.domSelection().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof vD){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&yN(this,e.getBoundingClientRect(),t)}else yN(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}someProp(t,e){let i,n=this._props&&this._props[t];if(null!=n&&(i=e?e(n):n))return i;for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n].props[t];if(null!=r&&(i=e?e(r):r))return i}let r=this.state.plugins;if(r)for(let n=0;n<r.length;n++){let s=r[n].props[t];if(null!=s&&(i=e?e(s):s))return i}}hasFocus(){if(qL){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(wN)return t.focus(wN);let e=vN(t);t.focus(null==wN?{get preventScroll(){return wN={preventScroll:!0},!0}}:void 0),wN||(wN=!1,bN(e,0))}(this.dom),sB(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return t||document}posAtCoords(t){return CN(this,t)}coordsAtPos(t,e=1){return TN(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let n=this.docView.posFromDOM(t,e,i);if(null==n)throw new RangeError("DOM position not inside the editor");return n}endOfTextblock(t,e){return RN(this,e||this.state,t)}destroy(){this.docView&&(!function(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Oj(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(t,e){qB(t,e)||!jB[e.type]||!t.editable&&e.type in zB||jB[e.type](t,e)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelection(){return this.root.getSelection()}}function zj(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(i=>{if("function"==typeof i&&(i=i(t.state)),i)for(let t in i)"class"==t&&(e.class+=" "+i[t]),"style"==t?e.style=(e.style?e.style+";":"")+i[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(i[t]))})),[gj.node(0,t.state.doc.content.size,e)]}function Uj(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:gj.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function $j(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function Hj(t){let e=Object.create(null);function i(t){for(let i in t)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=t[i])}return t.someProp("nodeViews",i),t.someProp("markViews",i),e}function Vj(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}let qj,Wj;if("undefined"!=typeof WeakMap){let t=new WeakMap;qj=e=>t.get(e),Wj=(e,i)=>(t.set(e,i),i)}else{let t=[],e=10,i=0;qj=e=>{for(let i=0;i<t.length;i+=2)if(t[i]==e)return t[i+1]},Wj=(n,r)=>(i==e&&(i=0),t[i++]=n,t[i++]=r)}class Xj{constructor(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n}}class Gj{constructor(t,e,i,n){this.width=t,this.height=e,this.map=i,this.problems=n}findCell(t){for(let e=0;e<this.map.length;e++){let i=this.map[e];if(i!=t)continue;let n=e%this.width,r=e/this.width|0,s=n+1,o=r+1;for(let t=1;s<this.width&&this.map[e+t]==i;t++)s++;for(let t=1;o<this.height&&this.map[e+this.width*t]==i;t++)o++;return new Xj(n,r,s,o)}throw new RangeError("No cell with offset "+t+" found")}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")}nextCell(t,e,i){let{left:n,right:r,top:s,bottom:o}=this.findCell(t);return"horiz"==e?(i<0?0==n:r==this.width)?null:this.map[s*this.width+(i<0?n-1:r)]:(i<0?0==s:o==this.height)?null:this.map[n+this.width*(i<0?s-1:o)]}rectBetween(t,e){let{left:i,right:n,top:r,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return new Xj(Math.min(i,o),Math.min(r,l),Math.max(n,a),Math.max(s,c))}cellsInRect(t){let e=[],i={};for(let n=t.top;n<t.bottom;n++)for(let r=t.left;r<t.right;r++){let s=n*this.width+r,o=this.map[s];i[o]||(i[o]=!0,r==t.left&&r&&this.map[s-1]==o||n==t.top&&n&&this.map[s-this.width]==o||e.push(o))}return e}positionAt(t,e,i){for(let n=0,r=0;;n++){let s=r+i.child(n).nodeSize;if(n==t){let i=e+t*this.width,n=(t+1)*this.width;for(;i<n&&this.map[i]<r;)i++;return i==n?s-1:this.map[i]}r=s}}static get(t){return qj(t)||Wj(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);let e=function(t){let e=-1,i=!1;for(let n=0;n<t.childCount;n++){let r=t.child(n),s=0;if(i)for(let e=0;e<n;e++){let i=t.child(e);for(let t=0;t<i.childCount;t++){let r=i.child(t);e+r.attrs.rowspan>n&&(s+=r.attrs.colspan)}}for(let t=0;t<r.childCount;t++){let e=r.child(t);s+=e.attrs.colspan,e.attrs.rowspan>1&&(i=!0)}-1==e?e=s:e!=s&&(e=Math.max(e,s))}return e}(t),i=t.childCount,n=[],r=0,s=null,o=[];for(let t=0,r=e*i;t<r;t++)n[t]=0;for(let a=0,l=0;a<i;a++){let c=t.child(a);l++;for(let t=0;;t++){for(;r<n.length&&0!=n[r];)r++;if(t==c.childCount)break;let h=c.child(t),{colspan:u,rowspan:p,colwidth:d}=h.attrs;for(let t=0;t<p;t++){if(t+a>=i){(s||(s=[])).push({type:"overlong_rowspan",pos:l,n:p-t});break}let c=r+t*e;for(let t=0;t<u;t++){0==n[c+t]?n[c+t]=l:(s||(s=[])).push({type:"collision",row:a,pos:l,n:u-t});let i=d&&d[t];if(i){let n=(c+t)%e*2,r=o[n];null==r||r!=i&&1==o[n+1]?(o[n]=i,o[n+1]=1):r==i&&o[n+1]++}}}r+=u,l+=h.nodeSize}let h=(a+1)*e,u=0;for(;r<h;)0==n[r++]&&u++;u&&(s||(s=[])).push({type:"missing",row:a,n:u}),l++}let a=new Gj(e,i,n,s),l=!1;for(let t=0;!l&&t<o.length;t+=2)null!=o[t]&&o[t+1]<i&&(l=!0);l&&function(t,e,i){t.problems||(t.problems=[]);for(let n=0,r={};n<t.map.length;n++){let s=t.map[n];if(r[s])continue;r[s]=!0;let o=i.nodeAt(s),a=null;for(let i=0;i<o.attrs.colspan;i++){let r=e[2*((n+i)%t.width)];null==r||o.attrs.colwidth&&o.attrs.colwidth[i]==r||((a||(a=Kj(o.attrs)))[i]=r)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}(a,o,t);return a}(t))}}function Kj(t){if(t.colwidth)return t.colwidth.slice();let e=[];for(let i=0;i<t.colspan;i++)e.push(0);return e}function Yj(t,e){let i=t.getAttribute("data-colwidth"),n=i&&/^\d+(,\d+)*$/.test(i)?i.split(",").map((t=>Number(t))):null,r=Number(t.getAttribute("colspan")||1),s={colspan:r,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:n&&n.length==r?n:null};for(let i in e){let n=e[i].getFromDOM,r=n&&n(t);null!=r&&(s[i]=r)}return s}function Jj(t,e){let i={};1!=t.attrs.colspan&&(i.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(i.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(i["data-colwidth"]=t.attrs.colwidth.join(","));for(let n in e){let r=e[n].setDOMAttr;r&&r(t.attrs[n],i)}return i}function Zj(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(let i in t.nodes){let n=t.nodes[i],r=n.spec.tableRole;r&&(e[r]=n)}}return e}const Qj=new DD("selectingCells");function tz(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function ez(t){let e=t.selection.$head;for(let t=e.depth;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return!0;return!1}function iz(t){let e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:tz(e.$head)||function(t){for(let e=t.nodeAfter,i=t.pos;e;e=e.firstChild,i++){let n=e.type.spec.tableRole;if("cell"==n||"header_cell"==n)return t.doc.resolve(i)}for(let e=t.nodeBefore,i=t.pos;e;e=e.lastChild,i--){let n=e.type.spec.tableRole;if("cell"==n||"header_cell"==n)return t.doc.resolve(i-e.nodeSize)}}(e.$head)}function nz(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function rz(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function sz(t,e,i){let n=t.start(-1),r=Gj.get(t.node(-1)).nextCell(t.pos-n,e,i);return null==r?null:t.node(0).resolve(n+r)}function oz(t,e,i){let n={};for(let e in t)n[e]=t[e];return n[e]=i,n}function az(t,e,i=1){let n=oz(t,"colspan",t.colspan-i);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,i),n.colwidth.some((t=>t>0))||(n.colwidth=null)),n}function lz(t,e,i=1){let n=oz(t,"colspan",t.colspan+i);if(n.colwidth){n.colwidth=n.colwidth.slice();for(let t=0;t<i;t++)n.colwidth.splice(e,0,0)}return n}class cz extends pD{constructor(t,e=t){let i=t.node(-1),n=Gj.get(i),r=t.start(-1),s=n.rectBetween(t.pos-r,e.pos-r),o=t.node(0),a=n.cellsInRect(s).filter((t=>t!=e.pos-r));a.unshift(e.pos-r);let l=a.map((t=>{let e=i.nodeAt(t),n=t+r+1;return new dD(o.resolve(n),o.resolve(n+e.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(t,e){let i=t.resolve(e.map(this.$anchorCell.pos)),n=t.resolve(e.map(this.$headCell.pos));if(nz(i)&&nz(n)&&rz(i,n)){let t=this.$anchorCell.node(-1)!=i.node(-1);return t&&this.isRowSelection()?cz.rowSelection(i,n):t&&this.isColSelection()?cz.colSelection(i,n):new cz(i,n)}return mD.between(i,n)}content(){let t=this.$anchorCell.node(-1),e=Gj.get(t),i=this.$anchorCell.start(-1),n=e.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),r={},s=[];for(let i=n.top;i<n.bottom;i++){let o=[];for(let s=i*e.width+n.left,a=n.left;a<n.right;a++,s++){let i=e.map[s];if(!r[i]){r[i]=!0;let s=e.findCell(i),a=t.nodeAt(i),l=n.left-s.left,c=s.right-n.right;if(l>0||c>0){let t=a.attrs;l>0&&(t=az(t,0,l)),c>0&&(t=az(t,t.colspan-c,c)),a=s.left<n.left?a.type.createAndFill(t):a.type.create(t,a.content)}if(s.top<n.top||s.bottom>n.bottom){let t=oz(a.attrs,"rowspan",Math.min(s.bottom,n.bottom)-Math.max(s.top,n.top));a=s.top<n.top?a.type.createAndFill(t):a.type.create(t,a.content)}o.push(a)}}s.push(t.child(i).copy(AI.from(o)))}const o=this.isColSelection()&&this.isRowSelection()?t:s;return new PI(AI.from(o),1,1)}replace(t,e=PI.empty){let i=t.steps.length,n=this.ranges;for(let r=0;r<n.length;r++){let{$from:s,$to:o}=n[r],a=t.mapping.slice(i);t.replace(a.map(s.pos),a.map(o.pos),r?PI.empty:e)}let r=pD.findFrom(t.doc.resolve(t.mapping.slice(i).map(this.to)),-1);r&&t.setSelection(r)}replaceWith(t,e){this.replace(t,new PI(AI.from(e),0,0))}forEachCell(t){let e=this.$anchorCell.node(-1),i=Gj.get(e),n=this.$anchorCell.start(-1),r=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n));for(let i=0;i<r.length;i++)t(e.nodeAt(r[i]),n+r[i])}isColSelection(){let t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;let i=t+this.$anchorCell.nodeAfter.attrs.rowspan,n=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,n)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){let i=Gj.get(t.node(-1)),n=t.start(-1),r=i.findCell(t.pos-n),s=i.findCell(e.pos-n),o=t.node(0);return r.top<=s.top?(r.top>0&&(t=o.resolve(n+i.map[r.left])),s.bottom<i.height&&(e=o.resolve(n+i.map[i.width*(i.height-1)+s.right-1]))):(s.top>0&&(e=o.resolve(n+i.map[s.left])),r.bottom<i.height&&(t=o.resolve(n+i.map[i.width*(i.height-1)+r.right-1]))),new cz(t,e)}isRowSelection(){let t=Gj.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-e),n=t.colCount(this.$headCell.pos-e);if(Math.min(i,n)>0)return!1;let r=i+this.$anchorCell.nodeAfter.attrs.colspan,s=n+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,s)==t.width}eq(t){return t instanceof cz&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){let i=Gj.get(t.node(-1)),n=t.start(-1),r=i.findCell(t.pos-n),s=i.findCell(e.pos-n),o=t.node(0);return r.left<=s.left?(r.left>0&&(t=o.resolve(n+i.map[r.top*i.width])),s.right<i.width&&(e=o.resolve(n+i.map[i.width*(s.top+1)-1]))):(s.left>0&&(e=o.resolve(n+i.map[s.top*i.width])),r.right<i.width&&(t=o.resolve(n+i.map[i.width*(r.top+1)-1]))),new cz(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new cz(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){return new cz(t.resolve(e),t.resolve(i))}getBookmark(){return new hz(this.$anchorCell.pos,this.$headCell.pos)}}cz.prototype.visible=!1,pD.jsonID("cell",cz);class hz{constructor(t,e){this.anchor=t,this.head=e}map(t){return new hz(t.map(this.anchor),t.map(this.head))}resolve(t){let e=t.resolve(this.anchor),i=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==i.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&i.index()<i.parent.childCount&&rz(e,i)?new cz(e,i):pD.near(i,1)}}function uz(t){if(!(t.selection instanceof cz))return null;let e=[];return t.selection.forEachCell(((t,i)=>{e.push(gj.node(i,i+t.nodeSize,{class:"selectedCell"}))})),vj.create(t.doc,e)}function pz(t){if(!t.size)return null;let{content:e,openStart:i,openEnd:n}=t;for(;1==e.childCount&&(i>0&&n>0||"table"==e.firstChild.type.spec.tableRole);)i--,n--,e=e.firstChild.content;let r=e.firstChild,s=r.type.spec.tableRole,o=r.type.schema,a=[];if("row"==s)for(let t=0;t<e.childCount;t++){let r=e.child(t).content,s=t?0:Math.max(0,i-1),l=t<e.childCount-1?0:Math.max(0,n-1);(s||l)&&(r=dz(Zj(o).row,new PI(r,s,l)).content),a.push(r)}else{if("cell"!=s&&"header_cell"!=s)return null;a.push(i||n?dz(Zj(o).row,new PI(e,i,n)).content:e)}return function(t,e){let i=[];for(let t=0;t<e.length;t++){let n=e[t];for(let e=n.childCount-1;e>=0;e--){let{rowspan:r,colspan:s}=n.child(e).attrs;for(let e=t;e<t+r;e++)i[e]=(i[e]||0)+s}}let n=0;for(let t=0;t<i.length;t++)n=Math.max(n,i[t]);for(let r=0;r<i.length;r++)if(r>=e.length&&e.push(AI.empty),i[r]<n){let s=Zj(t).cell.createAndFill(),o=[];for(let t=i[r];t<n;t++)o.push(s);e[r]=e[r].append(AI.from(o))}return{height:e.length,width:n,rows:e}}(o,a)}function dz(t,e){let i=t.createAndFill();return new hD(i).replace(0,i.content.size,e).doc}function fz(t,e,i,n,r,s,o,a){if(0==o||o==e.height)return!1;let l=!1;for(let c=r;c<s;c++){let r=o*e.width+c,s=e.map[r];if(e.map[r-e.width]==s){l=!0;let r=i.nodeAt(s),{top:h,left:u}=e.findCell(s);t.setNodeMarkup(t.mapping.slice(a).map(s+n),null,oz(r.attrs,"rowspan",o-h)),t.insert(t.mapping.slice(a).map(e.positionAt(o,u,i)),r.type.createAndFill(oz(r.attrs,"rowspan",h+r.attrs.rowspan-o))),c+=r.attrs.colspan-1}}return l}function gz(t,e,i,n,r,s,o,a){if(0==o||o==e.width)return!1;let l=!1;for(let c=r;c<s;c++){let r=c*e.width+o,s=e.map[r];if(e.map[r-1]==s){l=!0;let r=i.nodeAt(s),h=e.colCount(s),u=t.mapping.slice(a).map(s+n);t.setNodeMarkup(u,null,az(r.attrs,o-h,r.attrs.colspan-(o-h))),t.insert(u+r.nodeSize,r.type.createAndFill(az(r.attrs,0,o-h))),c+=r.attrs.rowspan-1}}return l}function mz(t,e,i,n,r){let s=i?t.doc.nodeAt(i-1):t.doc,o=Gj.get(s),{top:a,left:l}=n,c=l+r.width,h=a+r.height,u=t.tr,p=0;function d(){s=i?u.doc.nodeAt(i-1):u.doc,o=Gj.get(s),p=u.mapping.maps.length}(function(t,e,i,n,r,s,o){let a,l,c=Zj(t.doc.type.schema);if(r>e.width)for(let s=0,h=0;s<e.height;s++){let u=i.child(s);h+=u.nodeSize;let p,d=[];p=null==u.lastChild||u.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(let t=e.width;t<r;t++)d.push(p);t.insert(t.mapping.slice(o).map(h-1+n),d)}if(s>e.height){let h=[];for(let t=0,n=(e.height-1)*e.width;t<Math.max(e.width,r);t++){let r=!(t>=e.width)&&i.nodeAt(e.map[n+t]).type==c.header_cell;h.push(r?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}let u=c.row.create(null,AI.from(h)),p=[];for(let t=e.height;t<s;t++)p.push(u);t.insert(t.mapping.slice(o).map(n+i.nodeSize-2),p)}return!(!a&&!l)})(u,o,s,i,c,h,p)&&d(),fz(u,o,s,i,l,c,a,p)&&d(),fz(u,o,s,i,l,c,h,p)&&d(),gz(u,o,s,i,a,h,l,p)&&d(),gz(u,o,s,i,a,h,c,p)&&d();for(let t=a;t<h;t++){let e=o.positionAt(t,l,s),n=o.positionAt(t,c,s);u.replace(u.mapping.slice(p).map(e+i),u.mapping.slice(p).map(n+i),new PI(r.rows[t-a],0,0))}d(),u.setSelection(new cz(u.doc.resolve(i+o.positionAt(a,l,s)),u.doc.resolve(i+o.positionAt(h-1,c-1,s)))),e(u)}const yz=BL({ArrowLeft:bz("horiz",-1),ArrowRight:bz("horiz",1),ArrowUp:bz("vert",-1),ArrowDown:bz("vert",1),"Shift-ArrowLeft":wz("horiz",-1),"Shift-ArrowRight":wz("horiz",1),"Shift-ArrowUp":wz("vert",-1),"Shift-ArrowDown":wz("vert",1),Backspace:xz,"Mod-Backspace":xz,Delete:xz,"Mod-Delete":xz});function vz(t,e,i){return!i.eq(t.selection)&&(e&&e(t.tr.setSelection(i).scrollIntoView()),!0)}function bz(t,e){return(i,n,r)=>{let s=i.selection;if(s instanceof cz)return vz(i,n,pD.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;let o=Az(r,t,e);if(null==o)return!1;if("horiz"==t)return vz(i,n,pD.near(i.doc.resolve(s.head+e),e));{let r,s=i.doc.resolve(o),a=sz(s,t,e);return r=a?pD.near(a,1):e<0?pD.near(i.doc.resolve(s.before(-1)),-1):pD.near(i.doc.resolve(s.after(-1)),1),vz(i,n,r)}}}function wz(t,e){return(i,n,r)=>{let s=i.selection;if(!(s instanceof cz)){let n=Az(r,t,e);if(null==n)return!1;s=new cz(i.doc.resolve(n))}let o=sz(s.$headCell,t,e);return!!o&&vz(i,n,new cz(s.$anchorCell,o))}}function xz(t,e){let i=t.selection;if(!(i instanceof cz))return!1;if(e){let n=t.tr,r=Zj(t.schema).cell.createAndFill().content;i.forEachCell(((t,e)=>{t.content.eq(r)||n.replace(n.mapping.map(e+1),n.mapping.map(e+t.nodeSize-1),new PI(r,0,0))})),n.docChanged&&e(n)}return!0}function Sz(t,e){let i=tz(t.state.doc.resolve(e));return!!i&&(t.dispatch(t.state.tr.setSelection(new cz(i))),!0)}function kz(t,e,i){if(!ez(t.state))return!1;let n=pz(i),r=t.state.selection;if(r instanceof cz){n||(n={width:1,height:1,rows:[AI.from(dz(Zj(t.state.schema).cell,i))]});let e=r.$anchorCell.node(-1),s=r.$anchorCell.start(-1),o=Gj.get(e).rectBetween(r.$anchorCell.pos-s,r.$headCell.pos-s);return n=function({width:t,height:e,rows:i},n,r){if(t!=n){let e=[],r=[];for(let t=0;t<i.length;t++){let s=i[t],o=[];for(let i=e[t]||0,r=0;i<n;r++){let a=s.child(r%s.childCount);i+a.attrs.colspan>n&&(a=a.type.create(az(a.attrs,a.attrs.colspan,i+a.attrs.colspan-n),a.content)),o.push(a),i+=a.attrs.colspan;for(let i=1;i<a.attrs.rowspan;i++)e[t+i]=(e[t+i]||0)+a.attrs.colspan}r.push(AI.from(o))}i=r,t=n}if(e!=r){let t=[];for(let n=0,s=0;n<r;n++,s++){let o=[],a=i[s%e];for(let t=0;t<a.childCount;t++){let e=a.child(t);n+e.attrs.rowspan>r&&(e=e.type.create(oz(e.attrs,"rowspan",Math.max(1,r-e.attrs.rowspan)),e.content)),o.push(e)}t.push(AI.from(o))}i=t,e=r}return{width:t,height:e,rows:i}}(n,o.right-o.left,o.bottom-o.top),mz(t.state,t.dispatch,s,o,n),!0}if(n){let e=iz(t.state),i=e.start(-1);return mz(t.state,t.dispatch,i,Gj.get(e.node(-1)).findCell(e.pos-i),n),!0}return!1}function Cz(t,e){if(e.ctrlKey||e.metaKey)return;let i,n=_z(t,e.target);if(e.shiftKey&&t.state.selection instanceof cz)r(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&null!=(i=tz(t.state.selection.$anchor))&&Tz(t,e).pos!=i.pos)r(i,e),e.preventDefault();else if(!n)return;function r(e,i){let n=Tz(t,i),r=null==Qj.getState(t.state);if(!n||!rz(e,n)){if(!r)return;n=e}let s=new cz(e,n);if(r||!t.state.selection.eq(s)){let i=t.state.tr.setSelection(s);r&&i.setMeta(Qj,e.pos),t.dispatch(i)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",o),null!=Qj.getState(t.state)&&t.dispatch(t.state.tr.setMeta(Qj,-1))}function o(i){let o,a=Qj.getState(t.state);if(null!=a)o=t.state.doc.resolve(a);else if(_z(t,i.target)!=n&&(o=Tz(t,e),!o))return s();o&&r(o,i)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",o)}function Az(t,e,i){if(!(t.state.selection instanceof mD))return null;let{$head:n}=t.state.selection;for(let r=n.depth-1;r>=0;r--){let s=n.node(r);if((i<0?n.index(r):n.indexAfter(r))!=(i<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){let s=n.before(r),o="vert"==e?i>0?"down":"up":i>0?"right":"left";return t.endOfTextblock(o)?s:null}}return null}function _z(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Tz(t,e){let i=t.posAtCoords({left:e.clientX,top:e.clientY});return i&&i?tz(t.state.doc.resolve(i.pos)):null}const Oz=new DD("fix-tables");function Ez(t,e,i,n){let r=t.childCount,s=e.childCount;t:for(let o=0,a=0;o<s;o++){let s=e.child(o);for(let e=a,n=Math.min(r,o+3);e<n;e++)if(t.child(e)==s){a=e+1,i+=s.nodeSize;continue t}n(s,i),a<r&&t.child(a).sameMarkup(s)?Ez(t.child(a),s,i+1,n):s.nodesBetween(0,s.content.size,n,i+1),i+=s.nodeSize}}function Mz(t,e){let i,n=(e,n)=>{"table"==e.type.spec.tableRole&&(i=function(t,e,i,n){let r=Gj.get(e);if(!r.problems)return n;n||(n=t.tr);let s,o,a=[];for(let t=0;t<r.height;t++)a.push(0);for(let t=0;t<r.problems.length;t++){let s=r.problems[t];if("collision"==s.type){let t=e.nodeAt(s.pos);for(let e=0;e<t.attrs.rowspan;e++)a[s.row+e]+=s.n;n.setNodeMarkup(n.mapping.map(i+1+s.pos),null,az(t.attrs,t.attrs.colspan-s.n,s.n))}else if("missing"==s.type)a[s.row]+=s.n;else if("overlong_rowspan"==s.type){let t=e.nodeAt(s.pos);n.setNodeMarkup(n.mapping.map(i+1+s.pos),null,oz(t.attrs,"rowspan",t.attrs.rowspan-s.n))}else if("colwidth mismatch"==s.type){let t=e.nodeAt(s.pos);n.setNodeMarkup(n.mapping.map(i+1+s.pos),null,oz(t.attrs,"colwidth",s.colwidth))}}for(let t=0;t<a.length;t++)a[t]&&(null==s&&(s=t),o=t);for(let l=0,c=i+1;l<r.height;l++){let i=e.child(l),r=c+i.nodeSize,h=a[l];if(h>0){let e="cell";i.firstChild&&(e=i.firstChild.type.spec.tableRole);let a=[];for(let i=0;i<h;i++)a.push(Zj(t.schema)[e].createAndFill());let u=0!=l&&s!=l-1||o!=l?r-1:c+1;n.insert(n.mapping.map(u),a)}c=r}return n.setMeta(Oz,{fixTables:!0})}(t,e,n,i))};return e?e.doc!=t.doc&&Ez(e.doc,t.doc,0,n):t.doc.descendants(n),i}function Pz(t){let e,i=t.selection,n=iz(t),r=n.node(-1),s=n.start(-1),o=Gj.get(r);return e=i instanceof cz?o.rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s):o.findCell(n.pos-s),e.tableStart=s,e.map=o,e.table=r,e}function Iz(t,{map:e,tableStart:i,table:n},r){let s=r>0?-1:0;(function(t,e,i){let n=Zj(e.type.schema).header_cell;for(let r=0;r<t.height;r++)if(e.nodeAt(t.map[i+r*t.width]).type!=n)return!1;return!0})(e,n,r+s)&&(s=0==r||r==e.width?null:0);for(let o=0;o<e.height;o++){let a=o*e.width+r;if(r>0&&r<e.width&&e.map[a-1]==e.map[a]){let s=e.map[a],l=n.nodeAt(s);t.setNodeMarkup(t.mapping.map(i+s),null,lz(l.attrs,r-e.colCount(s))),o+=l.attrs.rowspan-1}else{let l=null==s?Zj(n.type.schema).cell:n.nodeAt(e.map[a+s]).type,c=e.positionAt(o,r,n);t.insert(t.mapping.map(i+c),l.createAndFill())}}return t}function Fz(t,{map:e,table:i,tableStart:n},r){let s=t.mapping.maps.length;for(let o=0;o<e.height;){let a=o*e.width+r,l=e.map[a],c=i.nodeAt(l);if(r>0&&e.map[a-1]==l||r<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(n+l),null,az(c.attrs,r-e.colCount(l)));else{let e=t.mapping.slice(s).map(n+l);t.delete(e,e+c.nodeSize)}o+=c.attrs.rowspan}}function Dz(t,{map:e,tableStart:i,table:n},r){let s=i;for(let t=0;t<r;t++)s+=n.child(t).nodeSize;let o=[],a=r>0?-1:0;(function(t,e,i){let n=Zj(e.type.schema).header_cell;for(let r=0;r<t.width;r++)if(e.nodeAt(t.map[r+i*t.width]).type!=n)return!1;return!0})(e,n,r+a)&&(a=0==r||r==e.height?null:0);for(let s=0,l=e.width*r;s<e.width;s++,l++)if(r>0&&r<e.height&&e.map[l]==e.map[l-e.width]){let r=e.map[l],o=n.nodeAt(r).attrs;t.setNodeMarkup(i+r,null,oz(o,"rowspan",o.rowspan+1)),s+=o.colspan-1}else{let t=null==a?Zj(n.type.schema).cell:n.nodeAt(e.map[l+a*e.width]).type;o.push(t.createAndFill())}return t.insert(s,Zj(n.type.schema).row.create(null,o)),t}function Rz(t,{map:e,table:i,tableStart:n},r){let s=0;for(let t=0;t<r;t++)s+=i.child(t).nodeSize;let o=s+i.child(r).nodeSize,a=t.mapping.maps.length;t.delete(s+n,o+n);for(let s=0,o=r*e.width;s<e.width;s++,o++){let l=e.map[o];if(r>0&&l==e.map[o-e.width]){let e=i.nodeAt(l).attrs;t.setNodeMarkup(t.mapping.slice(a).map(l+n),null,oz(e,"rowspan",e.rowspan-1)),s+=e.colspan-1}else if(r<e.width&&l==e.map[o+e.width]){let o=i.nodeAt(l),c=o.type.create(oz(o.attrs,"rowspan",o.attrs.rowspan-1),o.content),h=e.positionAt(r+1,s,i);t.insert(t.mapping.slice(a).map(n+h),c),s+=o.attrs.colspan-1}}}function Lz(t,e){if(!ez(t))return!1;if(e){let i=Pz(t),n=t.tr;if(0==i.top&&i.bottom==i.map.height)return!1;for(let t=i.bottom-1;Rz(n,i,t),t!=i.top;t--)i.table=i.tableStart?n.doc.nodeAt(i.tableStart-1):n.doc,i.map=Gj.get(i.table);e(n)}return!0}function Nz(t){let e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Bz(t,e){let i=t.selection;if(!(i instanceof cz)||i.$anchorCell.pos==i.$headCell.pos)return!1;let n=Pz(t),{map:r}=n;if(function({width:t,height:e,map:i},n){let r=n.top*t+n.left,s=r,o=(n.bottom-1)*t+n.left,a=r+(n.right-n.left-1);for(let e=n.top;e<n.bottom;e++){if(n.left>0&&i[s]==i[s-1]||n.right<t&&i[a]==i[a+1])return!0;s+=t,a+=t}for(let s=n.left;s<n.right;s++){if(n.top>0&&i[r]==i[r-t]||n.bottom<e&&i[o]==i[o+t])return!0;r++,o++}return!1}(r,n))return!1;if(e){let i,s,o=t.tr,a={},l=AI.empty;for(let t=n.top;t<n.bottom;t++)for(let e=n.left;e<n.right;e++){let c=r.map[t*r.width+e],h=n.table.nodeAt(c);if(!a[c])if(a[c]=!0,null==i)i=c,s=h;else{Nz(h)||(l=l.append(h.content));let t=o.mapping.map(c+n.tableStart);o.delete(t,t+h.nodeSize)}}if(o.setNodeMarkup(i+n.tableStart,null,oz(lz(s.attrs,s.attrs.colspan,n.right-n.left-s.attrs.colspan),"rowspan",n.bottom-n.top)),l.size){let t=i+1+s.content.size,e=Nz(s)?i+1:t;o.replaceWith(e+n.tableStart,t+n.tableStart,l)}o.setSelection(new cz(o.doc.resolve(i+n.tableStart))),e(o)}return!0}function jz(t,e){const i=Zj(t.schema);return(n=({node:t})=>i[t.type.spec.tableRole],(t,e)=>{let i,r,s=t.selection;if(s instanceof cz){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;i=s.$anchorCell.nodeAfter,r=s.$anchorCell.pos}else{if(i=function(t){for(let e=t.depth;e>0;e--){const i=t.node(e).type.spec.tableRole;if("cell"===i||"header_cell"===i)return t.node(e)}return null}(s.$from),!i)return!1;r=tz(s.$from).pos}if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(e){let o=i.attrs,a=[],l=o.colwidth;o.rowspan>1&&(o=oz(o,"rowspan",1)),o.colspan>1&&(o=oz(o,"colspan",1));let c,h=Pz(t),u=t.tr;for(let t=0;t<h.right-h.left;t++)a.push(l?oz(o,"colwidth",l&&l[t]?[l[t]]:null):o);for(let t=h.top;t<h.bottom;t++){let e=h.map.positionAt(t,h.left,h.table);t==h.top&&(e+=i.nodeSize);for(let r=h.left,s=0;r<h.right;r++,s++)r==h.left&&t==h.top||u.insert(c=u.mapping.map(e+h.tableStart,1),n({node:i,row:t,col:r}).createAndFill(a[s]))}u.setNodeMarkup(r,n({node:i,row:h.top,col:h.left}),a[0]),s instanceof cz&&u.setSelection(new cz(u.doc.resolve(s.$anchorCell.pos),c&&u.doc.resolve(c))),e(u)}return!0})(t,e);var n}function zz(t,e,i){const n=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let t=0;t<n.length;t++){const r=e.table.nodeAt(n[t]);if(r&&r.type!==i.header_cell)return!1}return!0}function Uz(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,i){if(!ez(e))return!1;if(i){let n=Zj(e.schema),r=Pz(e),s=e.tr,o=r.map.cellsInRect("column"==t?new Xj(r.left,0,r.right,r.map.height):"row"==t?new Xj(0,r.top,r.map.width,r.bottom):r),a=o.map((t=>r.table.nodeAt(t)));for(let t=0;t<o.length;t++)a[t].type==n.header_cell&&s.setNodeMarkup(r.tableStart+o[t],n.cell,a[t].attrs);if(0==s.steps.length)for(let t=0;t<o.length;t++)s.setNodeMarkup(r.tableStart+o[t],n.header_cell,a[t].attrs);i(s)}return!0}}(t):function(e,i){if(!ez(e))return!1;if(i){let n=Zj(e.schema),r=Pz(e),s=e.tr,o=zz("row",r,n),a=zz("column",r,n),l=("column"===t?o:"row"===t&&a)?1:0,c="column"==t?new Xj(0,l,1,r.map.height):"row"==t?new Xj(l,0,r.map.width,1):r,h="column"==t?a?n.cell:n.header_cell:"row"==t?o?n.cell:n.header_cell:n.cell;r.map.cellsInRect(c).forEach((t=>{const e=t+r.tableStart,i=s.doc.nodeAt(e);i&&s.setNodeMarkup(e,h,i.attrs)})),i(s)}return!0}}Uz("row",{useDeprecatedLogic:!0}),Uz("column",{useDeprecatedLogic:!0}),Uz("cell",{useDeprecatedLogic:!0});function $z(t,e){let i=t.selection.$anchor;for(let n=i.depth;n>0;n--){if("table"==i.node(n).type.spec.tableRole)return e&&e(t.tr.delete(i.before(n),i.after(n)).scrollIntoView()),!0}return!1}new DD("tableColumnResizing");function Hz({allowTableNodeSelection:t=!1}={}){return new PD({key:Qj,state:{init:()=>null,apply(t,e){let i=t.getMeta(Qj);if(null!=i)return-1==i?null:i;if(null==e||!t.docChanged)return e;let{deleted:n,pos:r}=t.mapping.mapResult(e);return n?null:r}},props:{decorations:uz,handleDOMEvents:{mousedown:Cz},createSelectionBetween(t){if(null!=Qj.getState(t.state))return t.state.selection},handleTripleClick:Sz,handleKeyDown:yz,handlePaste:kz},appendTransaction:(e,i,n)=>function(t,e,i){let n,r,s=(e||t).selection,o=(e||t).doc;if(s instanceof vD&&(r=s.node.type.spec.tableRole)){if("cell"==r||"header_cell"==r)n=cz.create(o,s.from);else if("row"==r){let t=o.resolve(s.from+1);n=cz.rowSelection(t,t)}else if(!i){let t=Gj.get(s.node),e=s.from+1,i=e+t.map[t.width*t.height-1];n=cz.create(o,e+1,i)}}else s instanceof mD&&function({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let i=t.pos,n=e.pos,r=t.depth;for(;r>=0&&!(t.after(r+1)<t.end(r));r--,i++);for(let t=e.depth;t>=0&&!(e.before(t+1)>e.start(t));t--,n--);return i==n&&/row|table/.test(t.node(r).type.spec.tableRole)}(s)?n=mD.create(o,s.from):s instanceof mD&&function({$from:t,$to:e}){let i,n;for(let e=t.depth;e>0;e--){let n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){i=n;break}}for(let t=e.depth;t>0;t--){let i=e.node(t);if("cell"===i.type.spec.tableRole||"header_cell"===i.type.spec.tableRole){n=i;break}}return i!==n&&0===e.parentOffset}(s)&&(n=mD.create(o,s.$from.start(),s.$from.end()));return n&&(e||(e=t.tr)).setSelection(n),e}(n,Mz(n,i),t)})}var Vz=["blockquote",0],qz=["hr"],Wz=["pre",["code",0]],Xz=["ol",0],Gz=["ul",0],Kz=["li",0],Yz=function(t){for(var e,i={},n=t.attributes,r=0;r<n.length;r++)i[(e=n[r]).name]=e.value;return i},Jz=function(t){var e={};return t.forEach((function(t){e[t]={default:null}})),e},Zz=function(){return Jz(["style","class","id"])},Qz=function(t,e){for(var i in t)if(i&&null!==t[i]&&i!==e)return!0;return!1},tU=function(t,e){void 0===e&&(e=[]);var i={},n=function(n){n&&null!==t[n]&&!e.find((function(t){return t===n}))&&(i[n]=t[n])};for(var r in t)n(r);return i},eU=function(t){var e;return(e={})[t]={name:t,inclusive:!0,parseDOM:[{tag:t}],toDOM:function(){return[t,0]}},e},iU=GD(GD(GD(GD(GD(GD(GD(GD(GD(GD({link:{attrs:GD(GD({},Zz()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:Yz}],toDOM:function(t){return["a",tU(t.attrs),0]}}},eU("strong")),eU("b")),eU("em")),eU("i")),eU("u")),eU("del")),eU("sub")),eU("sup")),eU("code")),{style:{attrs:GD({},Zz()),parseDOM:[{tag:"span",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["span",tU(t.attrs),0]:["span",0]}}}),nU=function(t){var e;return(e={})[t]={default:null,getFromDOM:function(e){return e.getAttribute(t)},setDOMAttr:function(e,i){i[t]=e}},e},rU=GD(GD(GD(GD({},nU("style")),nU("class")),nU("id")),nU("headers")),sU={doc:{content:"colgroup*"},col:{attrs:Jz(["id","class","style","span"]),parseDOM:[{getAttrs:Yz,tag:"col"}],toDOM:function(t){return["col",t.attrs]}},colgroup:{attrs:Jz(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:Yz,tag:"colgroup"}],toDOM:function(t){return["colgroup",t.attrs,0]}},text:{inline:!0,group:"inline"}},oU=new dF({nodes:sU,marks:{}}),aU=function(t){var e=qD(HD(t),oU,{preserveWhitespace:!1});return VD(e).firstChild},lU=function(t){let e=t.cellAttributes||{},i={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(let t in e)i[t]={default:e[t].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:t.cellContent,attrs:i,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:t=>Yj(t,e)}],toDOM:t=>["td",Jj(t,e),0]},table_header:{content:t.cellContent,attrs:i,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:t=>Yj(t,e)}],toDOM:t=>["th",Jj(t,e),0]}}}({tableGroup:"block",cellContent:"block+",cellAttributes:rU});lU.table_row.attrs=GD(GD({},lU.table_row.attrs),Jz([RD,"style","class","id"])),lU.table_row.toDOM=function(t){return["tr",tU(t.attrs),0]},lU.table_row.parseDOM=[{tag:"tr",getAttrs:Yz}],lU.table.attrs=GD(GD({},lU.table.attrs),Jz(["style","class","id",LD,ND])),lU.table.toDOM=function(t){var e=Qz(t.attrs)?tU(t.attrs,[LD,ND]):{},i=null;if(t.attrs[LD]&&!function(t){for(var e=!1,i=t.child(0),n=0;n<i.childCount;n++)if(i.child(n).attrs.colwidth){e=!0;break}return e}(t)){var n=aU(t.attrs[LD]);if(n){var r=Array.from(n.children).map((function(t){return["col",Yz(t)]}));i=["colgroup",Yz(n)].concat(r)}}return i?["table",e,i,["tbody",0]]:["table",e,["tbody",0]]},lU.table.parseDOM=[{tag:"table",getAttrs:function(t){var e=Yz(t),i=Array.from(t.childNodes).find((function(t){return"COLGROUP"===t.nodeName}));return i&&(e[LD]=i.outerHTML),e}}];var cU=GD({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:GD({},Zz()),parseDOM:[{tag:"p",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["p",tU(t.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:GD({},Zz()),parseDOM:[{tag:"div",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["div",tU(t.attrs),0]:["div",0]}},blockquote:{attrs:GD({},Zz()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["blockquote",tU(t.attrs),0]:Vz}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return qz}},heading:{attrs:GD(GD({},Zz()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(t){return GD(GD({},Yz(t)),{level:1})}},{tag:"h2",getAttrs:function(t){return GD(GD({},Yz(t)),{level:2})}},{tag:"h3",getAttrs:function(t){return GD(GD({},Yz(t)),{level:3})}},{tag:"h4",getAttrs:function(t){return GD(GD({},Yz(t)),{level:4})}},{tag:"h5",getAttrs:function(t){return GD(GD({},Yz(t)),{level:5})}},{tag:"h6",getAttrs:function(t){return GD(GD({},Yz(t)),{level:6})}}],toDOM:function(t){return Qz(t.attrs,"level")?["h"+t.attrs.level,tU(t.attrs,["level"]),0]:["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return Wz}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:GD({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},Zz()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["img",tU(t.attrs)]:["img"]}},hard_break:{inline:!0,attrs:GD({},Zz()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["br",tU(t.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:GD(GD({},Zz()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(t){return GD(GD({},Yz(t)),{order:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"1",10):1})}}],toDOM:function(t){return 1===t.attrs.order?Qz(t.attrs,"order")?["ol",tU(t.attrs,["order"]),0]:Xz:["ol",GD(GD({},tU(t.attrs,["order"])),{start:t.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:GD({},Zz()),parseDOM:[{tag:"ul",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["ul",tU(t.attrs),0]:Gz}},list_item:{content:"(paragraph | heading) block*",attrs:GD({},Zz()),parseDOM:[{tag:"li",getAttrs:Yz}],toDOM:function(t){return Qz(t.attrs)?["li",tU(t.attrs),0]:Kz},defining:!0}},lU),hU=200,uU=function(){};uU.prototype.append=function(t){return t.length?(t=uU.from(t),!this.length&&t||t.length<hU&&this.leafAppend(t)||this.length<hU&&t.leafPrepend(this)||this.appendInner(t)):this},uU.prototype.prepend=function(t){return t.length?uU.from(t).append(this):this},uU.prototype.appendInner=function(t){return new dU(this,t)},uU.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?uU.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},uU.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},uU.prototype.forEach=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)},uU.prototype.map=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length);var n=[];return this.forEach((function(e,i){return n.push(t(e,i))}),e,i),n},uU.from=function(t){return t instanceof uU?t:t&&t.length?new pU(t):uU.empty};var pU=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,i){return 0==t&&i==this.length?this:new e(this.values.slice(t,i))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,i,n){for(var r=e;r<i;r++)if(!1===t(this.values[r],n+r))return!1},e.prototype.forEachInvertedInner=function(t,e,i,n){for(var r=e-1;r>=i;r--)if(!1===t(this.values[r],n+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=hU)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=hU)return new e(t.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(e.prototype,i),e}(uU);uU.empty=new pU([]);var dU=function(t){function e(e,i){t.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,i,n){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(i,r),n))&&(!(i>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,i)-r,n+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,i,n){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(i,r)-r,n+r))&&(!(i<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),i,n))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var i=this.left.length;return e<=i?this.left.slice(t,e):t>=i?this.right.slice(t-i,e-i):this.left.slice(t,i).append(this.right.slice(0,e-i))},e.prototype.leafAppend=function(t){var i=this.right.leafAppend(t);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(t){var i=this.left.leafPrepend(t);if(i)return new e(i,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(uU);const fU=uU;class gU{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let i,n,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(i=this.remapping(r,this.items.length),n=i.maps.length);let s,o,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return i||(i=this.remapping(r,e+1),n=i.maps.length),n--,void c.push(t);if(i){c.push(new mU(t.map));let e,r=t.step.map(i.slice(n));r&&a.maybeStep(r).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new mU(e,void 0,void 0,l.length+c.length))),n--,e&&i.appendMap(e,n)}else a.maybeStep(t.step);return t.selection?(s=i?t.selection.map(i.slice(n)):t.selection,o=new gU(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:o,transform:a,selection:s}}addTransform(t,e,i,n){let r=[],s=this.eventCount,o=this.items,a=!n&&o.length?o.get(o.length-1):null;for(let i=0;i<t.steps.length;i++){let l,c=t.steps[i].invert(t.docs[i]),h=new mU(t.mapping.maps[i],c,e);(l=a&&a.merge(h))&&(h=l,i?r.pop():o=o.slice(0,o.length-1)),r.push(h),e&&(s++,e=void 0),n||(a=h)}let l=s-i.depth;return l>vU&&(o=function(t,e){let i;return t.forEach(((t,n)=>{if(t.selection&&0==e--)return i=n,!1})),t.slice(i)}(o,l),s-=l),new gU(o.append(r),s)}remapping(t,e){let i=new FF;return this.items.forEach(((e,n)=>{let r=null!=e.mirrorOffset&&n-e.mirrorOffset>=t?i.maps.length-e.mirrorOffset:void 0;i.appendMap(e.map,r)}),t,e),i}addMaps(t){return 0==this.eventCount?this:new gU(this.items.append(t.map((t=>new mU(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],n=Math.max(0,this.items.length-e),r=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach((t=>{t.selection&&o--}),n);let a=e;this.items.forEach((e=>{let n=r.getMirror(--a);if(null==n)return;s=Math.min(s,n);let l=r.maps[n];if(e.step){let s=t.steps[n].invert(t.docs[n]),c=e.selection&&e.selection.map(r.slice(a+1,n));c&&o++,i.push(new mU(l,s,c))}else i.push(new mU(l))}),n);let l=[];for(let t=e;t<s;t++)l.push(new mU(r.maps[t]));let c=this.items.slice(0,n).append(l).append(i),h=new gU(c,o);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,n=[],r=0;return this.items.forEach(((s,o)=>{if(o>=t)n.push(s),s.selection&&r++;else if(s.step){let t=s.step.map(e.slice(i)),o=t&&t.getMap();if(i--,o&&e.appendMap(o,i),t){let a=s.selection&&s.selection.map(e.slice(i));a&&r++;let l,c=new mU(o.invert(),t,a),h=n.length-1;(l=n.length&&n[h].merge(c))?n[h]=l:n.push(c)}}else s.map&&i--}),this.items.length,0),new gU(fU.from(n.reverse()),r)}}gU.empty=new gU(fU.empty,0);class mU{constructor(t,e,i,n){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=n}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new mU(e.getMap().invert(),e,this.selection)}}}class yU{constructor(t,e,i,n){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=n}}const vU=20;function bU(t){let e=[];return t.forEach(((t,i,n,r)=>e.push(n,r))),e}function wU(t,e){if(!t)return null;let i=[];for(let n=0;n<t.length;n+=2){let r=e.map(t[n],1),s=e.map(t[n+1],-1);r<=s&&i.push(r,s)}return i}function xU(t,e,i,n){let r=CU(e),s=AU.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),c=new yU(n?l:o.remaining,n?o.remaining:l,null,0);i(o.transform.setSelection(a).setMeta(AU,{redo:n,historyState:c}).scrollIntoView())}let SU=!1,kU=null;function CU(t){let e=t.plugins;if(kU!=e){SU=!1,kU=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){SU=!0;break}}return SU}const AU=new DD("history"),_U=new DD("closeHistory");function TU(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new PD({key:AU,state:{init:()=>new yU(gU.empty,gU.empty,null,0),apply:(e,i,n)=>function(t,e,i,n){let r,s=i.getMeta(AU);if(s)return s.historyState;i.getMeta(_U)&&(t=new yU(t.done,t.undone,null,0));let o=i.getMeta("appendedTransaction");if(0==i.steps.length)return t;if(o&&o.getMeta(AU))return o.getMeta(AU).redo?new yU(t.done.addTransform(i,void 0,n,CU(e)),t.undone,bU(i.mapping.maps[i.steps.length-1]),t.prevTime):new yU(t.done,t.undone.addTransform(i,void 0,n,CU(e)),null,t.prevTime);if(!1===i.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(r=i.getMeta("rebased"))?new yU(t.done.rebased(i,r),t.undone.rebased(i,r),wU(t.prevRanges,i.mapping),t.prevTime):new yU(t.done.addMaps(i.mapping.maps),t.undone.addMaps(i.mapping.maps),wU(t.prevRanges,i.mapping),t.prevTime);{let r=0==t.prevTime||!o&&(t.prevTime<(i.time||0)-n.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let i=!1;return t.mapping.maps[0].forEach(((t,n)=>{for(let r=0;r<e.length;r+=2)t<=e[r+1]&&n>=e[r]&&(i=!0)})),i}(i,t.prevRanges)),s=o?wU(t.prevRanges,i.mapping):bU(i.mapping.maps[i.steps.length-1]);return new yU(t.done.addTransform(i,r?e.selection.getBookmark():void 0,n,CU(e)),gU.empty,s,i.time)}}(i,n,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,n="historyUndo"==i?OU:"historyRedo"==i?EU:null;return!!n&&(e.preventDefault(),n(t.state,t.dispatch))}}}})}const OU=(t,e)=>{let i=AU.getState(t);return!(!i||0==i.done.eventCount)&&(e&&xU(i,t,e,!1),!0)},EU=(t,e)=>{let i=AU.getState(t);return!(!i||0==i.undone.eventCount)&&(e&&xU(i,t,e,!0),!0)};class MU{constructor(t,e){var i;this.match=t,this.match=t,this.handler="string"==typeof e?(i=e,function(t,e,n,r){let s=i;if(e[1]){let t=e[0].lastIndexOf(e[1]);s+=e[0].slice(t+e[1].length),n+=t;let i=n-r;i>0&&(s=e[0].slice(t-i,t)+s,n=r)}return t.tr.insertText(s,n,r)}):e}}const PU=(t,e)=>{let i=t.plugins;for(let n=0;n<i.length;n++){let r,s=i[n];if(s.spec.isInputRules&&(r=s.getState(t))){if(e){let i=t.tr,n=r.transform;for(let t=n.steps.length-1;t>=0;t--)i.step(n.steps[t].invert(n.docs[t]));if(r.text){let e=i.doc.resolve(r.from).marks();i.replaceWith(r.from,r.to,t.schema.text(r.text,e))}else i.delete(r.from,r.to);e(i)}return!0}}return!1};new MU(/--$/,"—"),new MU(/\.\.\.$/,"…"),new MU(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new MU(/"$/,"”"),new MU(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new MU(/'$/,"’");var IU={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},FU={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},DU={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},RU={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},LU={mark:"sub"},NU={mark:"sup"},BU={mark:"link"},jU="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),zU=function(t,e){var i={},n=e&&e.applyToWord||!1;if(i["Mod-z"]=OU,i["Shift-Mod-z"]=EU,i.Backspace=rL(PU,zR,UR,HR),i.Enter=rL(WR,KR,YR,ZR),jU||(i["Mod-y"]=EU),t.marks.strong&&(i["Mod-b"]=eR(fR,GD(GD({},IU),{applyToWord:n}))),t.marks.em&&(i["Mod-i"]=eR(fR,GD(GD({},FU),{applyToWord:n}))),t.marks.u&&(i["Mod-u"]=eR(fR,GD(GD({},DU),{applyToWord:n}))),t.nodes.hard_break){var r=t.nodes.hard_break,s=rL(GR,(function(t,e){return e(t.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));i["Shift-Enter"]=s}return i},UU=function(t){var e={};return t.nodes.list_item&&(e.Enter=bL(t.nodes.list_item)),e},$U=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,HU=function(t){return/^MsoListParagraph/.test(t.className)},VU=function(t){var e=t.innerHTML;return e=(e=e.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},qU=function(t,e){var i=document.createElement(t);return i.style.listStyleType=e,i},WU=function(t){var e=null;return/^\d/.test(t)||(e=(/^[a-z]/.test(t)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(t)?"roman":"alpha")),e},XU=function(t,e){var i=[];Array.from(t).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n.getAttribute("datalist")?(i.push(t),e.add(i)):HU(n)&&i.length?i.push(t):(i=[],"DIV"===n.nodeName?XU(n.children,e):"TABLE"===n.nodeName&&Array.from(n.querySelectorAll("td,th")).forEach((function(t){XU(t.children,e)})))}}))},GU=function(t){var e,i=t.innerHTML,n=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return i=i.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(i)?{tag:"ul",style:(e=n(VU(t)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(i)?{tag:"ol",style:WU(n(VU(t)))}:void 0},KU=function(t){var e,i=t.nodeName.toLowerCase();t.firstChild&&t.firstChild.nodeType===Node.COMMENT_NODE&&t.removeChild(t.firstChild),1===t.childNodes.length?e=t.firstChild.nodeType===Node.TEXT_NODE?VU(t):t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(t.removeChild(t.firstChild),3===t.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(t.firstChild.nodeValue)&&t.removeChild(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&t.removeChild(t.firstChild),e="p"!==i?"<"+i+">"+t.innerHTML+"</"+i+">":t.innerHTML),t.parentNode.removeChild(t);var n=document.createElement("li");return n.innerHTML=e,n},YU=function(t){var e=document.createElement("div");e.innerHTML=function(t){return t.replace($U,(function(t,e,i){return'datalist="'+e+'" datalevel="'+i+'" '+t}))}(t);var i=new Set;return XU(e.children,i),i.forEach((function(t){return function(t){var e,i,n,r,s,o,a,l,c,h,u,p,d,f=-1,g={};for(l=0;l<t.length;l++){var m=(d={datalist:(c=t[l]).getAttribute("datalist"),datalevel:c.getAttribute("datalevel")}).datalist,y=GU(c);if(h=y&&y.tag){if(u=d.datalevel||parseFloat(c.style.marginLeft||0),d.datalevel||c.style.marginLeft){var v=h+m;g[u]||(g[u]={}),(!i||i<0)&&(i=u,n=m,r=(a=t.filter((function(t){return t.getAttribute("datalist")===String(n)})))[a.length-1],o=qU(h,y&&y.style),c.parentNode.insertBefore(o,c),f=u,g[u][v]=o),s=r===c,p=g[u][v],(u>f||!p)&&(p=qU(h,y&&y.style),g[u][v]=p,e.appendChild(p)),e=KU(c),p.appendChild(e),s?i=f=-1:f=u}}else!e||s&&!HU(c)||(c.style.marginLeft&&(c.style.marginLeft=""),c.style.marginLeft&&(c.style.margin=""),e.appendChild(c))}}(t)})),e.innerHTML},JU=function(t){t.ownerElement&&t.ownerElement.removeAttribute(t.name)},ZU=function(t){/^Mso/.test(t.value)&&JU(t)},QU=/\s*;\s*/,t$=/\s*:\s*/,e$=function(t){var e,i,n=t.value.split(QU).filter((function(t){return Boolean(t)})),r=t.ownerElement.style,s="";n.forEach((function(t){var n;n=t.split(t$),e=n[0],i=n[1],void 0!==r[e]&&(s+=e+": "+i+"; ")})),(s=s.trim())?t.value=s:JU(t)},i$=function(t,e){var i=t;if(e.convertMsLists&&(i=YU(i)),e.stripTags&&(i=function(t,e){return t.replace(new RegExp("<\\/?("+e+")(?:\\s[^>]*?)?>","gi"),"")}(i,e.stripTags)),e.attributes){var n=document.createElement("div");n.innerHTML=i,Array.from(n.querySelectorAll("*")).forEach((function(t){return function(t,e){if(t.nodeType===Node.ELEMENT_NODE){for(var i=t.attributes.length-1;i>=0;i--){var n=t.attributes[i];e[n.name]?e[n.name](n):e["*"]&&e["*"](n)}"SPAN"===t.nodeName&&0===t.attributes.length&&function(t){var e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}(t)}}(t,e.attributes)})),i=n.innerHTML}return i};var n$=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/;new RegExp("(?:("+n$.source+"))([\\da-fA-F\\s]+)\\}","g"),new DD("highlight");var r$={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},s$=Object.keys(r$),o$=new DD("image-resize"),a$=function(t,e,i){t.style[e]=i+"px"},l$=/[^\-]width:|[^\-]height:/,c$=/^.+$/,h$=function(){function t(t,e,i,n){this.activeHandle=t,this.dragging=e,this.rect=i,this.nodePosition=n}return t.prototype.apply=function(e){var i=e.getMeta(o$);return i?new t(i.activeHandle,i.setDragging,i.rect,i.nodePosition):this},t}(),u$=function(t,e,i){var n=e.target.getAttribute(zD);if(!n)return!1;var r=o$.getState(t.state);e.preventDefault();var s=t.state.tr;function o(e){!function(t,e,i){var n=o$.getState(t.state),r=n.rect,s=n.dragging,o=n.nodePosition,a=n.activeHandle;if(s&&r){var l=t.nodeDOM(o),c=r$[a],h=(e.clientX-s.startX)*c.x,u=(e.clientY-s.startY)*c.y,p=c.x?h+l.width:r.width,d=c.y?u+l.height:r.height;if(i.lockRatio&&c.x&&c.y){var f=Math.min(p/l.width,d/l.height),g=l.width*f,m=l.height*f;s.startX=e.clientX-(p-g)*c.x,s.startY=e.clientY-(d-m)*c.y,p=g,d=m}else s.startX=c.x?e.clientX:s.startX,s.startY=c.y?e.clientY:s.startY;a$(l,"width",p),a$(l,"height",d),r.top=l.offsetTop,r.left=l.offsetLeft,r.width=l.offsetWidth,r.height=l.offsetHeight;var y=l.nextElementSibling;y.style.width=r.width+"px",y.style.height=r.height+"px",y.style.top=r.top+"px",y.style.left=r.left+"px"}}(t,e,i)}return s.setMeta(o$,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:n,rect:r.rect,nodePosition:r.nodePosition}),s.setMeta("addToHistory",!1),t.dispatch(s),e.view.addEventListener("mouseup",(function e(i){i.view.removeEventListener("mouseup",e),i.view.removeEventListener("mousemove",o),function(t){var e=o$.getState(t.state),i=e.rect,n=e.dragging,r=e.nodePosition;if(n&&i){var s=t.state.selection;if(s instanceof vD){var o=s.node.attrs,a=i.width,l=i.height,c=void 0;if(l$.test(o.style||"")){var h=YD(o.style,{style:"width",value:c$,newValue:a+"px"}),u=YD(h.style||"",{style:"height",value:c$,newValue:l+"px"}).style;c=GD(GD({},o),{style:u})}else c=GD(GD({},o),{width:a,height:l});var p=s.node.type.createAndFill(c);if(p){var d=t.state.tr;d.replaceWith(r,r+1,p),d.setSelection(vD.create(d.doc,r)),d.setMeta("commandName","image-resize"),d.setMeta("args",c),d.setMeta(o$,{setDragging:null,activeHandle:null,rect:i,nodePosition:r}),t.dispatch(d)}}}}(t)})),e.view.addEventListener("mousemove",o),!0},p$=function(t){return void 0===t&&(t={node:"image",lockRatio:!0}),new PD({key:o$,view:function(e){return{resize:function(){o$.getState(e.state).rect&&e.dispatch(e.state.tr.setMeta("resize",!0))},get window(){return e.dom.ownerDocument&&e.dom.ownerDocument.defaultView},attachResize:function(){var t=this.window;t&&(t.removeEventListener("resize",this.resize),t.addEventListener("resize",this.resize))},removeResize:function(){var t=this.window;t&&t.removeEventListener("resize",this.resize)},update:function(e,i){var n=e.state,r=n.selection,s=n.schema.nodes[t.node],o=o$.getState(n),a=o.rect;if(r instanceof vD&&s===r.node.type){var l=e.nodeDOM(r.from),c={top:l.offsetTop,left:l.offsetLeft,width:l.offsetWidth,height:l.offsetHeight};if(!i.selection.eq(r)||a&&(a.width!==c.width||a.height!==c.height||a.top!==c.top||a.left!==c.left)){var h=n.tr;h.setMeta(o$,{rect:c,nodePosition:r.from}),e.dispatch(h),this.attachResize()}}else a&&(o.rect=null,o.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new h$("",null,null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(e,i){return u$(e,i,t)}},decorations:function(e){var i=e.selection,n=e.schema.nodes[t.node],r=o$.getState(e).rect;if(r&&i instanceof vD&&n===i.node.type){var s=document.createElement("div");s.className="k-editor-resize-handles-wrapper",s.style.width=r.width+"px",s.style.height=r.height+"px",s.style.top=r.top+"px",s.style.left=r.left+"px";for(var o=0;o<s$.length;o++){var a=document.createElement("div");a.className=BD+" "+s$[o],a.setAttribute(zD,s$[o]),s.appendChild(a)}return vj.create(e.doc,[gj.widget(e.selection.from+1,s)])}return vj.empty}}})};new DD("caret-color");var d$=function(){function t(t,e){this.node=t,this.view=e,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),t.attrs[LD]&&this.renderColgroup(t.attrs[LD]);var i=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,t.attrs),this.resizeHandles=s$.map((function(t){var e=document.createElement("span");return e.className=BD+" "+t,e.setAttribute(jD,t),e})),this.contentDOM=i}return t.prototype.update=function(t){var e=this;if(t.type!==this.node.type)return!1;var i=this.node;return this.node=t,t.attrs[ND]?this.resizeHandles.forEach((function(t){e.dom.appendChild(t)})):Array.from(this.dom.children).filter((function(t){return t.classList.contains(BD)})).forEach((function(t){return t.remove()})),this.setAttributes(this.table,t.attrs),i.attrs[LD]!==t.attrs[LD]&&this.renderColgroup(t.attrs[LD]),!0},t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&(t.target===this.table||t.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(t.target))},t.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},t.prototype.renderColgroup=function(t){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),t&&(this.colgroup=aU(t),this.table.insertBefore(this.colgroup,this.table.firstChild))},t.prototype.setAttributes=function(t,e){var i=[LD,ND];for(var n in e)if(n&&-1===i.indexOf(n)){var r=t.getAttribute(n),s=e[n];s&&s!==r?t.setAttribute(n,s):s||t.removeAttribute(n)}},t}(),f$=/^.+$/,g$=function(t){var e=(t||"").split(/\s*;\s*/).filter(Boolean).map((function(t){var e,i=t.split(/\s*:\s*/);return(e={})[i[0]]=i[1],e})).reduce((function(t,e){return GD(GD({},t),e)}),{});return e};function m$(t,e,i){var n;if(new RegExp("[^-]?"+e+":").test(t.style||"")){var r=YD(t.style||"",{style:e,value:f$,newValue:i}).style;n=GD(GD({},t),{style:r})}else n=t.style?GD(GD({},t),{style:t.style.replace(/;$/,"")+"; "+e+": "+i+";"}):GD(GD({},t),{style:e+": "+i+";"});return n}var y$=new DD("table-resize"),v$=new DD("table-column-resizing"),b$=new DD("table-row-resizing");function w$(t,e){var i=!1;return i=(i=(i=i||t!==y$&&Boolean(y$.get(e))&&y$.getState(e).dragging)||t!==v$&&Boolean(v$.get(e))&&v$.getState(e).dragging)||t!==b$&&Boolean(b$.get(e))&&b$.getState(e).dragging}function x$(t,e){var i=!1;return i=(i=i||t!==v$&&Boolean(v$.get(e))&&v$.getState(e).activeHandle>-1)||t!==b$&&Boolean(b$.get(e))&&b$.getState(e).activeHandle>-1}function S$(t){return t&&t.firstChild&&"TABLE"===t.firstChild.nodeName?t.firstChild:t}function k$(t){for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function C$(t){for(var e=function(t){var e=Array.from(t&&t.rows||[]),i=Array.from(e&&e[0]&&e[0].cells||[]).map((function(t){return t.colSpan})).reduce((function(t,e){return t+e}),0),n=e.map((function(){return new Array(i)}));return e.forEach((function(t,e){var i=0;Array.from(t.cells).forEach((function(t){for(var r=0;r<t.colSpan;r++){for(var s=0;s<t.rowSpan;s++){var o=n[e+s].findIndex((function(t,e){return e>=i&&!t}));n[e+s][o]=t}i++}}))})),n}(t.closest("table")),i=null,n=function(n){if(e[n].forEach((function(e,r){t===e&&(i={rowIndex:n,cellIndex:r})})),i)return"break"},r=0;r<e.length;r++){if("break"===n(r))break}return i||{rowIndex:-1,cellIndex:-1}}function A$(t,e){for(var i=t.depth;i>0;i--){var n=t.node(i);if(e(n))return{node:n,depth:i}}return null}function _$(t,e,i){var n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return-1;var r=t.state.doc.resolve(n.pos),s=A$(r,(function(t){return"table"===t.type.spec.tableRole}));if(null===s)return-1;var o=r.start(s.depth),a=s.node,l=Gj.get(a);return o+l.map[l.width*i.rowIndex+i.cellIndex]}function T$(){var t=d$,e=new PD({key:v$,state:{init:function(e,i){return this.spec.props.nodeViews[Zj(i.schema).table.name]=function(e,i){return new t(e,i)},new O$(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return x$(v$,t)?null:v$.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,e){return w$(v$,t.state)||function(t,e,i){var n=v$.getState(t.state);if(!n.dragging){var r=k$(e.target),s=-1;if(r){var o=C$(r),a=r.getBoundingClientRect(),l=a.left,c=a.right;Math.abs(e.clientX-l)<=i&&o.cellIndex>0?(o.cellIndex-=r.colSpan,s=_$(t,e,o)):c-e.clientX>0&&c-e.clientX<=i&&(s=_$(t,e,o))}s!==n.activeHandle&&M$(t,s)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=v$.getState(t.state);e.activeHandle>-1&&!e.dragging&&M$(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e,i){var n,r=v$.getState(t.state);if(-1===r.activeHandle||r.dragging)return!1;for(var s=t.state.doc.resolve(r.activeHandle),o=s.parent,a=s.index(),l=0,c=0;c<=a;c++)l+=o.child(c).attrs.colspan;var h,u,p=s.node(s.depth-1),d=t.domAtPos(r.activeHandle),f=d.node.childNodes[d.offset].closest("table");if(p.attrs[LD]){(h=(m=f.firstChild).children[l-1]).style.width||(h.style.width=h.offsetWidth+"px")}else{var g=0;for(c=0;c<o.childCount;c++)g+=o.child(c).attrs.colspan;var m=document.createElement("colgroup"),y=new Array(g);for(c=0;c<g;c++)y[c]=document.createElement("col"),m.appendChild(y[c]);f.insertBefore(m,f.firstChild),(h=y[a]).style.width=h.offsetWidth+"px",u=GD(GD({},p.attrs),((n={})[LD]="<colgroup>"+y.reduce((function(t,e){return t+e.outerHTML}),"")+"</colgroup>",n))}var v=parseFloat(h.style.width),b=t.state.tr.setMeta(v$,{setDragging:{startX:e.clientX,startWidth:v}});if(!f.style.width){var w=Array.from(h.parentNode.children).map((function(t){return t.style.width}));if(w.every(Boolean)){var x=w.reduce((function(t,e){return t+parseFloat(e)}),0);u=m$(u||p.attrs,"width",x+"px")}}if(u){var S=s.posAtIndex(0,s.depth-1)-1;b.setNodeMarkup(S,null,u)}function k(e){e.view.removeEventListener("mouseup",k),e.view.removeEventListener("mousemove",C);var n=v$.getState(t.state);if(n.dragging){var r=t.state.tr;!function(t,e,i,n){var r,s=t.state.doc.resolve(i),o=s.node(-1),a=s.start(-1),l=s.posAtIndex(0,s.depth-1)-1,c=t.nodeDOM(a).closest("table"),h=o.attrs;if(o&&h[LD]){var u=c.firstChild;h=GD(GD({},h),((r={})[LD]=u.outerHTML,r))}var p=c.style.width;c&&p&&g$(h.style).width!==p&&(h=m$(h,"width",p));e.setNodeMarkup(l,null,h)}(t,r,n.activeHandle,E$(n.dragging,e,i)),t.dispatch(r.setMeta(v$,{setDragging:null}))}}function C(e){if(!e.which)return k(e);var n=v$.getState(t.state),r=E$(n.dragging,e,i);!function(t,e,i,n){var r=t.state.doc.resolve(e),s=r.node(-1),o=r.start(-1),a=Gj.get(s).colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.domAtPos(r.start(-1)).node;"TABLE"!==l.nodeName&&(l=l.closest("table"));var c=l,h=c.firstChild,u=Array.from(h.children);if(u[a].style.width=i+"px",c.style.width){var p=u.map((function(t){return t.style.width}));if(p.every(Boolean)){var d=p.reduce((function(t,e){return t+parseFloat(e)}),0);c.style.width=d+"px"}}}(t,n.activeHandle,r)}return t.dispatch(b),e.view.addEventListener("mouseup",k),e.view.addEventListener("mousemove",C),e.preventDefault(),!0}(t,e,25)}},decorations:function(t){if(!w$(v$,t)){var e=v$.getState(t);if(e.activeHandle>-1)return function(t,e){for(var i=[],n=t.doc.resolve(e),r=n.node(-1),s=Gj.get(r),o=n.start(-1),a=[],l=e-o,c=-1,h=0;h<s.height;h++)a.push(s.map.slice(h*s.width,h*s.width+s.width)),-1===c&&(c=a[h].lastIndexOf(l));var u=[];return a.forEach((function(t){var e=t[c];t[c]!==t[c+1]&&u.push(e)})),u.forEach((function(t){var e=o+t+r.nodeAt(t).nodeSize-1,n=document.createElement("div");n.className="column-resize-handle",i.push(gj.widget(e,n))})),vj.create(t.doc,i)}(t,e.activeHandle)}return vj.empty},nodeViews:{}}});return e}var O$=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,n=this,r=e.getMeta(v$);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){var s=e.mapping.map(n.activeHandle,-1);i=e.doc.resolve(s),Boolean("row"===i.parent.type.spec.tableRole&&i.nodeAfter)||(s=-1),n=new t(s,n.dragging)}return n},t}();function E$(t,e,i){var n=e.clientX-t.startX;return Math.max(i,t.startWidth+n)}function M$(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(v$,{setHandle:e}),t.dispatch(i)}var P$={southeast:!0,southwest:!0,northwest:!0,northeast:!0},I$=GD({east:!0,west:!0},P$),F$=GD({south:!0,north:!0},P$),D$=function(){function t(t,e,i){this.activeHandle=t,this.dragging=e,this.nodePosition=i}return t.prototype.apply=function(e){var i=e.getMeta(y$);return i?new t(i.activeHandle,i.setDragging,i.nodePosition):this},t}(),R$=function(t){var e=Array.from(t.firstChild.children).map((function(t){return t.offsetWidth})),i=Array.from(t.rows).map((function(t){return t.offsetHeight})),n=e.reduce((function(t,e){return t+e}),0),r=i.reduce((function(t,e){return t+e}),0),s=t.offsetHeight;return{width:n,height:r,colsWidth:e,rowsHeight:i,offsetWidth:t.offsetWidth,offsetHeight:s}},L$=function(t){var e=y$.getState(t.state),i=e.dragging,n=e.nodePosition,r=e.activeHandle;if(i){var s=t.state.doc.nodeAt(n),o=S$(t.nodeDOM(n)),a=R$(o);if(s){var l=a.offsetWidth+"px",c=a.offsetHeight+"px",h=t.state.tr,u=s.attrs,p=g$(u.style);I$[r]&&o.style.width&&p.width!==l&&(u=m$(u,"width",l)),F$[r]&&o.style.height&&p.height!==c&&(u=m$(u,"height",c)),u=function(t,e,i,n){var r=t.state.doc.nodeAt(i),s=S$(t.nodeDOM(i)),o=(s.ownerDocument&&s.ownerDocument.defaultView||window).getComputedStyle,a=Array.from(s.rows);r.forEach((function(t,n,r){var s=g$(t.attrs.style).height;s&&!/px$/.test(s)&&e.setNodeMarkup(i+n+1,null,m$(t.attrs,"height",o(a[r]).height))}));var l=s.firstChild,c=Array.from(l&&l.children||[]),h=!1;c.forEach((function(t,e){t.style.width&&!/px$/.test(t.style.width)&&(t.style.width=o(c[e]).width,h=!0)}));var u=GD({},n);return h&&(u[LD]=l.outerHTML),u}(t,h,n,u),h.setNodeMarkup(n,null,u),h.setMeta("commandName","node-resize"),h.setMeta("args",u),h.setMeta(y$,{setDragging:null,activeHandle:null,nodePosition:n}),t.dispatch(h)}}},N$=function(t,e){var i=e.target.getAttribute(jD);if(!i)return!1;var n=y$.getState(t.state);e.preventDefault();var r=t.state.tr;r.setMeta(y$,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:i,nodePosition:n.nodePosition}),r.setMeta("addToHistory",!1),function(t,e,i){var n=t.state.doc.nodeAt(i),r=S$(t.nodeDOM(i)),s=R$(r),o=s.width,a=s.height,l=s.colsWidth,c=s.rowsHeight,h=s.offsetWidth,u=s.offsetHeight,p=r.firstChild,d=Array.from(p&&p.children||[]),f=!1;d.forEach((function(t,e){t.style.width&&!/%$/.test(t.style.width)&&(t.style.width=100*l[e]/o+"%",f=!0)}));var g=!1;n.forEach((function(t,n,r){var s=g$(t.attrs.style).height;s&&!/%$/.test(s)&&(e.setNodeMarkup(i+n+1,null,m$(t.attrs,"height",100*c[r]/a+"%")),g=!0)}));var m=n.attrs;g$(m.style).width!==h+"px"&&(m=m$(m,"width",h+"px")),f&&(m[LD]=p.outerHTML),g&&(m=m$(m,"height",u+"px")),(f||g)&&e.setNodeMarkup(i,null,m)}(t,r,n.nodePosition),t.dispatch(r);var s=e.view||window;function o(e){!function(t,e){var i=y$.getState(t.state),n=i.dragging,r=i.nodePosition,s=i.activeHandle;if(!(r<0)&&n){var o=S$(t.nodeDOM(r)),a=o.getBoundingClientRect(),l=r$[s],c=(e.clientX-n.startX)*l.x,h=(e.clientY-n.startY)*l.y,u=(o.ownerDocument&&o.ownerDocument.defaultView||window).getComputedStyle(o),p=/px/.test(u.width)?parseFloat(u.width):o.offsetWidth,d=/px/.test(u.height)?parseFloat(u.height):o.offsetHeight,f=l.x?c+p:a.width,g=l.y?h+d:a.height;n.startX=l.x?e.clientX:n.startX,n.startY=l.y?e.clientY:n.startY,I$[s]&&(o.style.width=f+"px"),F$[s]&&(o.style.height=g+"px")}}(t,e)}return s.addEventListener("mouseup",(function e(i){s.removeEventListener("mouseup",e),s.removeEventListener("mousemove",o),L$(t)})),s.addEventListener("mousemove",o),!0},B$=function(t){return void 0===t&&(t={node:"table"}),new PD({key:y$,view:function(e){return{selectedNode:function(t,e){var i=t.selection;if(i instanceof vD&&e===i.node.type&&i instanceof vD)return{node:i.node,pos:i.from};var n=A$(i.$from,(function(t){return t.type===e})),r=n&&n.node;return r?{node:r,pos:i.$from.start(n.depth)-1}:null},update:function(e,i){var n,r,s,o,a,l=e.state,c=l.schema.nodes[t.node],h=this.selectedNode(l,c),u=this.selectedNode(i,c);if((h||!u||i.doc.eq(e.state.doc))&&(h||u)){var p=l.tr;p.setMeta("addToHistory",!1),h&&u&&h.pos!==u.pos?(p.setMeta(y$,{nodePosition:h.pos}),p.setNodeMarkup(u.pos,c,GD(GD({},u.node.attrs),((n={})[ND]=!1,n))),p.setNodeMarkup(h.pos,c,GD(GD({},h.node.attrs),((r={})[ND]=!0,r))),e.dispatch(p)):h&&u&&h.pos===u.pos&&!h.node.attrs[ND]&&!l.selection.eq(i.selection)?(p.setMeta(y$,{nodePosition:h.pos}),e.dispatch(p.setNodeMarkup(h.pos,c,GD(GD({},h.node.attrs),((s={})[ND]=!0,s))))):h&&!u?(p.setMeta(y$,{nodePosition:h.pos}),e.dispatch(p.setNodeMarkup(h.pos,c,GD(GD({},h.node.attrs),((o={})[ND]=!0,o))))):!h&&u&&(p.setMeta(y$,{nodePosition:-1}),e.dispatch(p.setNodeMarkup(u.pos,c,GD(GD({},u.node.attrs),((a={})[ND]=!1,a)))))}}}},state:{init:function(){return new D$("",null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(t,e){return N$(t,e)}}}})},j$=function(){function t(){}return t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&"style"===t.attributeName&&"TR"===t.target.nodeName},t}();function z$(){var t=new PD({key:b$,state:{init:function(t,e){return this.spec.props.nodeViews[Zj(e.schema).row.name]=function(t,e){return new j$},new U$(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return x$(b$,t)?null:b$.getState(t).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(t,e){return w$(b$,t.state)||function(t,e,i){var n=b$.getState(t.state);if(!n.dragging){var r=k$(e.target),s=-1;if(r){var o=C$(r),a=r.getBoundingClientRect(),l=a.top,c=a.bottom;Math.abs(e.clientY-l)<=i&&o.rowIndex>0?(o.rowIndex-=r.rowSpan,s=_$(t,e,o)):c-e.clientY>0&&c-e.clientY<=i&&(s=_$(t,e,o))}s!==n.activeHandle&&$$(t,s)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=b$.getState(t.state);e.activeHandle>-1&&!e.dragging&&$$(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e){var i=b$.getState(t.state);if(-1===i.activeHandle||i.dragging)return!1;var n=t.state.doc.resolve(i.activeHandle),r=n.parent,s=n.node(-1),o=g$(r.attrs.style).height,a=g$(s.attrs.style).height,l=o?parseFloat(o):0;if(!o){l=t.nodeDOM(i.activeHandle).offsetHeight}function c(e){e.view.removeEventListener("mouseup",c),e.view.removeEventListener("mousemove",h);var i=b$.getState(t.state);if(i.dragging){var n=t.state.tr.setMeta(b$,{setDragging:null});!function(t,e,i){var n=t.state.doc,r=n.resolve(i),s=r.parent,o=r.posAtIndex(0)-1,a=t.nodeDOM(o),l=a.ownerDocument&&a.ownerDocument.defaultView||window;a.style.height=l.getComputedStyle(a).height,e.setNodeMarkup(o,null,m$(s.attrs,"height",a.style.height));var c=a&&a.closest("table"),h=c&&c.style.height;if(h){var u=n.resolve(o),p=u.start(u.depth)-1;e.setNodeMarkup(p,null,m$(u.parent.attrs,"height",h))}}(t,n,i.activeHandle),t.dispatch(n)}}function h(e){if(!e.which)return c(e);var i=b$.getState(t.state),n=function(t,e){var i=e.clientY-t.startY;return t.startHeight.rowHeight+i}(i.dragging,e),r=e.clientY-i.dragging.startY;!function(t,e,i,n,r){var s=t.nodeDOM(e),o=s&&s.parentNode;if(o){o.style.height=i+"px";var a=o.ownerDocument&&o.ownerDocument.defaultView||window;o.style.height=a.getComputedStyle(o).height;var l=o.closest("table"),c=parseFloat(r)+n+"px",h=l&&l.style.height;h&&h!==c&&(l.style.height=parseFloat(r)+n+"px",l.style.height=a.getComputedStyle(l).height)}}(t,i.activeHandle,n,r,a)}return t.dispatch(t.state.tr.setMeta(b$,{setDragging:{startY:e.clientY,startHeight:{rowHeight:l,tableHeight:a}}})),e.view.addEventListener("mouseup",c),e.view.addEventListener("mousemove",h),e.preventDefault(),!0}(t,e)}},decorations:function(t){if(w$(b$,t))return vj.empty;var e=b$.getState(t);return e.activeHandle>-1?function(t,e){var i=[];if("number"!=typeof e)return vj.empty;for(var n=t.doc.resolve(e),r=n.node(-1),s=Gj.get(r),o=n.start(-1),a=[],l=e-o,c=-1,h=0;h<s.height;h++)a.push(s.map.slice(h*s.width,h*s.width+s.width)),-1!==a[h].indexOf(l)&&(c=h);var u=[];return a[c].forEach((function(t,e){a[c+1]&&t===a[c+1][e]||u.push(t)})),u.forEach((function(t){var e=r.nodeAt(t),n=o+t+(e?e.nodeSize:0)-1,s=document.createElement("div");s.className="row-resize-handle",i.push(gj.widget(n,s))})),vj.create(t.doc,i)}(t,e.activeHandle):void 0},nodeViews:{}}});return t}var U$=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,n=this,r=e.getMeta(b$);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(n.activeHandle,r.setDragging);if(n.activeHandle>-1){var s=e.mapping.map(n.activeHandle,-1);"row"===(i=e.doc.resolve(s)).parent.type.spec.tableRole&&i.nodeAfter||(s=null),n=new t(s,n.dragging)}return n},t}();function $$(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(b$,{setHandle:e}),t.dispatch(i)}var H$=/^table$/,V$=/^table_row$/,q$=/^table_cell|table_header$/,W$=function(t,e){for(var i=t.$head,n=i.depth;n>0;n--){var r=i.node(n);if(e.test(r.type.name))return{pos:i.before(n),node:r}}return null},X$=function(t,e){var i=e&&function(t){var i,n=W$(t.selection,V$),r=W$(t.selection,H$);if(n&&r&&n.node.attrs[RD]){for(var s=0,o=0;o<r.node.nodeSize;o++)if(r.node.child(o).eq(n.node)){s=o;break}var a=r.node.child(s-1),l=n.pos-a.nodeSize;t.setNodeMarkup(l,void 0,((i={})[RD]=n.node.attrs[RD],i))}return e(t)};return function(t,e){if(!ez(t))return!1;if(e){let i=Pz(t);e(Dz(t.tr,i,i.top))}return!0}(t,i)},G$=function(t,e){var i=e&&function(t){var i,n=W$(t.selection,V$);if(n&&n.node.attrs[RD]){var r=n.pos+n.node.nodeSize;t.setNodeMarkup(r,void 0,((i={})[RD]=n.node.attrs[RD],i))}return e(t)};return function(t,e){if(!ez(t))return!1;if(e){let i=Pz(t);e(Dz(t.tr,i,i.bottom))}return!0}(t,i)},K$=function(t,e){if(!t)return-1;var i=Gj.get(t.node),n=W$(e,q$),r=i.map.indexOf(n.pos-t.pos-1),s=-1;return-1!==r&&(s=r%i.width),s},Y$=function(t,e,i){var n,r=K$(e,t.selection),s=aU(e.node.attrs[LD]);s.insertBefore(s.ownerDocument.createElement("col"),s.children[r+i]),t.setNodeMarkup(e.pos,null,GD(GD({},e.node.attrs),((n={})[LD]=s.outerHTML,n)))},J$=function(t,e){return function(t,e){if(!ez(t))return!1;if(e){let i=Pz(t);e(Iz(t.tr,i,i.left))}return!0}(t,e&&function(t){var i=W$(t.selection,H$);return i.node.attrs[LD]?(Y$(t,i,-1),e(t)):e(t)})},Z$=function(t,e){return function(t,e){if(!ez(t))return!1;if(e){let i=Pz(t);e(Iz(t.tr,i,i.right))}return!0}(t,e&&function(t){var i=W$(t.selection,H$);return i.node.attrs[LD]?(Y$(t,i,1),e(t)):e(t)})},Q$=function(t,e){var i=K$(W$(t.selection,H$),t.selection),n=e&&function(t){var n=W$(t.selection,H$);return n.node.attrs[LD]?(function(t,e,i){var n,r=aU(e.node.attrs[LD]);r.removeChild(r.children[i]),t.setNodeMarkup(e.pos,null,GD(GD({},e.node.attrs),((n={})[LD]=r.outerHTML,n)))}(t,n,i),e(t)):e(t)};return function(t,e){if(!ez(t))return!1;if(e){let i=Pz(t),n=t.tr;if(0==i.left&&i.right==i.map.width)return!1;for(let t=i.right-1;Fz(n,i,t),t!=i.left;t--)i.table=i.tableStart?n.doc.nodeAt(i.tableStart-1):n.doc,i.map=Gj.get(i.table);e(n)}return!0}(t,n)};function tH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function eH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tH(Object(i),!0).forEach((function(e){iH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function iH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var nH=t=>{for(var e,i={},n=t.attributes,r=0;r<n.length;r++)i[(e=n[r]).name]=e.value;return i},rH=(t,e)=>{var i={};for(var n in t)n&&null!==t[n]&&n!==e&&(i[n]=t[n]);return i},sH=()=>oH(["class","id","style"]),oH=t=>t.reduce(((t,e)=>eH(eH({},t),{},{[e]:{default:null}})),{});function aH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function lH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?aH(Object(i),!0).forEach((function(e){cH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):aH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function cH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cU.table.attrs.class={default:"k-table"};var hH=lH(lH({},cU),{},{video:{attrs:lH({src:{default:null},controls:{},poster:{default:null},width:{default:null},height:{default:null}},sH()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"video",getAttrs:nH}],toDOM:t=>["video",rH(t.attrs),0]},audio:{attrs:lH({controls:{},src:{default:null},width:{default:null},height:{default:null}},sH()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"audio",getAttrs:nH}],toDOM:t=>["audio",rH(t.attrs),0]},iframe:{attrs:lH({src:{},width:{default:null},height:{default:null}},sH()),group:"block",draggable:!0,parseDOM:[{tag:"iframe",getAttrs:nH}],toDOM:t=>["iframe",rH(t.attrs)]},source:{attrs:{src:{default:null},type:{default:null}},inline:!0,group:"inline",parseDOM:[{tag:"source",getAttrs:nH}],toDOM:t=>["source",t.attrs]}}),uH=new dF({nodes:hH,marks:iU});function pH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function dH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pH(Object(i),!0).forEach((function(e){fH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function fH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var gH=t=>(e,i)=>{CR(e,t)?kR(AL)(e,i):kR(t)(e,i)},mH={bold:()=>fR(IU),cleanFormatting:()=>function(t){var e=(void 0===t?{}:t).except,i=void 0===e?[]:e;return function(t,e){var n,r=t.tr;sR(r,{except:(n=i,n instanceof Array?n:[n])}),r.docChanged&&e(r)}}({except:uH.marks.link}),createLink:t=>yR({mark:"link",attrs:t}),fontFamily:t=>gR({style:"font-family",value:t.value}),fontSize:t=>gR({style:"font-size",value:t.value}),insertFile:t=>yR({mark:"link",attrs:t}),insertText:t=>{return e=t,function(t,i){i(t.tr.insertText(e.text,e.from,e.to))};var e},italic:()=>fR(FU),strikethrough:()=>fR(RU),subscript:()=>fR(LU),superscript:()=>fR(NU),underline:()=>fR(DU),unlink:()=>mR(BU),foreColor:t=>gR({style:"color",value:t.value}),backColor:t=>gR({style:"background-color",value:t.value})},yH={alignCenter:()=>gH(kL),alignJustify:()=>gH(CL),alignLeft:()=>gH(xL),alignRight:()=>gH(SL),format:t=>{return e=t.value,function(t,n){var r=bR(t),s=t.schema.nodes,o=t.tr;o.setMeta("commandName",i),o.setMeta("args",{value:e}),r.forEach((function(t){if(t.type.isTextblock)if("p"===e){var i=t.attrs,n=i.level,r=KD(i,["level"]);vR(o,t,s.paragraph,r)}else if(/^h[1-6]$/i.test(e))n=parseInt(e.substr(1),10),vR(o,t,s.heading,GD(GD({},t.attrs),{level:n}));else if("blockquote"===e){var a=t.attrs;n=a.level,r=KD(a,["level"]),vR(o,t,s.blockquote,r)}}));var a=o.docChanged;return a&&n(o.scrollIntoView()),a};var e,i},insertOrderedList:()=>vL,insertUnorderedList:()=>yL,outdent:()=>jR,indent:()=>BR,insertImage:t=>{return e=t,function(t,i){var n=t.schema.nodes.image.createAndFill(e);QD(n)(t,(function(t){return i(t.setMeta("commandName","insertImage").setMeta("args",e))}))};var e},redo:()=>EU,undo:()=>OU,setHtml:t=>XD(t.value,"setHTML",{preserveWhitespace:!1}),insertHtml:t=>(t=>(e,i)=>{var n=document.createElement("div");n.innerHTML=t.value;var r=gF.fromSchema(uH).parse(n,{topNode:t.inline?uH.nodes.paragraph.create():null});r&&r.firstChild&&i(e.tr.replaceSelectionWith(r.firstChild,!1))})(t)},vH={insertTable:t=>(t=>(e,i)=>{var n=function(t,e,i){for(var n,r=t.table,s=t.table_row,o=t.table_cell,a=[],l=0;l<e+1;l++){n=[];for(var c=0;c<i+1;c++)n.push(o.createAndFill());a.push(s.createAndFill(void 0,n))}return r.createAndFill(void 0,a)}(e.schema.nodes,t.rows,t.cols);n&&QD(n,!0)(e,i)})(t),addColumnBefore:()=>J$,addColumnAfter:()=>Z$,addRowBefore:()=>X$,addRowAfter:()=>G$,deleteRow:()=>Lz,deleteColumn:()=>Q$,mergeCells:()=>Bz,splitCell:()=>jz,deleteTable:()=>$z},bH=dH(dH(dH({},mH),yH),vH),wH=(t,e)=>{var i=t.enabled===e.enabled,n=!0;return n=t.hasOwnProperty("selectedValue")?t.selectedValue===e.selectedValue:t.selected===e.selected,i&&n},xH=(t,e)=>{var i=[...pR(t,{name:e,value:/^.+$/})];return 1===i.length?i[0]:null},SH=t=>t.selection instanceof cz?null:function(t){return{tag:SR(t)||""}}(t).tag,kH=t=>({alignCenter:{selected:CR(t,kL),enabled:!0},alignJustify:{selected:CR(t,CL),enabled:!0},alignLeft:{selected:CR(t,xL),enabled:!0},alignRight:{selected:CR(t,SL),enabled:!0},bold:{selected:oR(t,IU),enabled:!0},cleanFormatting:{selected:!1,enabled:!t.selection.empty},format:{selectedValue:SH(t),enabled:!0},indent:{enabled:RR(t,uH.nodes.list_item)||NR(t,PR)},insertOrderedList:{selected:xR(t,uH.nodes.ordered_list),enabled:!0},insertUnorderedList:{selected:xR(t,uH.nodes.bullet_list),enabled:!0},italic:{selected:oR(t,FU),enabled:!0},unlink:{enabled:oR(t,BU)},outdent:{enabled:LR(t,IR)||DR(t,IR.nodes)},redo:{enabled:EU(t)},strikethrough:{selected:oR(t,RU),enabled:!0},style:{selected:cR(t,uH.marks.style),enabled:!0},fontFamily:{selectedValue:xH(t,"font-family"),enabled:!0},fontSize:{selectedValue:xH(t,"font-size"),enabled:!0},foreColor:{selectedValue:xH(t,"color"),enabled:!0},backColor:{selectedValue:xH(t,"background-color"),enabled:!0},subscript:{selected:oR(t,LU),enabled:!0},superscript:{selected:oR(t,NU),enabled:!0},underline:{selected:oR(t,DU),enabled:!0},undo:{enabled:OU(t)},createLink:{enabled:!t.selection.empty||oR(t,BU)},insertFile:{enabled:!t.selection.empty},insertImage:{enabled:!0},viewSource:{enabled:!0},insertTable:{enabled:!0},addColumnBefore:{enabled:J$(t)},addColumnAfter:{enabled:Z$(t)},addRowBefore:{enabled:X$(t)},addRowAfter:{enabled:G$(t)},deleteRow:{enabled:Lz(t)},deleteColumn:{enabled:Q$(t)},mergeCells:{enabled:Bz(t)},splitCell:{enabled:jz(t)},deleteTable:{enabled:$z(t)}}),CH=t=>({createLink:()=>{var e=function(t,e){var i=lR(t,e),n=i.filter((function(t){return Boolean(t)}));return i.length===n.length?i[0]:void 0}(t.state,uH.marks.link);return{href:e?e.attrs.href:null,title:e?e.attrs.title:null,target:e?e.attrs.target:null}},insertImage:()=>{var e=function(t){if(t.selection instanceof vD)return t.selection.node}(t.state);return{src:e?e.attrs.src:null,alt:e?e.attrs.alt:null,width:e?e.attrs.width:null,height:e?e.attrs.height:null}},setHtml:()=>{return{value:(e=t.state,i=VD(e.doc),n=document.createElement("div"),n.appendChild(i),n.innerHTML)};var e,i,n}});function AH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _H(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?AH(Object(i),!0).forEach((function(e){TH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):AH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function TH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var OH="iframe",EH="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent);class MH extends H{constructor(t,e){super(t,e),TH(this,"options",{editMode:OH,debounceDelay:100}),TH(this,"initialize",(()=>{this.initContent(),this.initEditor()})),this.extendOptions(e),this.iframeEditMode=this.options.editMode===OH,this.iframe=this.element.querySelector(".k-iframe"),this.div=this.element.querySelector(".k-content"),this.toolbar=this.element.querySelector(".k-toolbar"),this.bindEvents(),EH&&!this.shouldInitialize()||this.initialize()}bindEvents(){EH&&this.iframeEditMode&&this.iframe.addEventListener("load",this.initialize,!0),this.toolbar.addEventListener("mousedown",this.onToolBarMouseDown)}unbindEvents(){EH&&this.iframeEditMode&&this.iframe.removeEventListener("load",this.initialize,!0),this.toolbar.removeEventListener("mousedown",this.onToolBarMouseDown)}shouldInitialize(){return!this.iframeEditMode||"complete"===(this.iframe.contentDocument||this.iframe.contentWindow.document).readyState}initEditor(){var t=this.options.debounceDelay,e=[new PD({view:()=>({update:()=>{this.updateToolBarState()}}),key:new DD("toolbar-tools-update-plugin")}),new PD({view:()=>({update:Li(this.valueChanged,t).bind(this)}),key:new DD("value-changed-plugin")}),TU(),NL(UU(uH)),NL(zU(uH)),NL(cL),B$(),T$(),z$(),Hz(),p$()];this.valueContainer=this.element.querySelector("textarea");var i=ED.create({schema:uH,plugins:e,doc:gF.fromSchema(uH).parse(this.valueContainer)});this.view=new jj({mount:this.content},{state:i,transformPastedHTML:t=>this.options.pasteSettings?this.executePasteCleanup(t):t}),this.value=this.view.dom.innerHTML}initContent(){this.content=this.iframeEditMode?this.setupIframe():this.setupDiv()}setupIframe(){var t=this.iframe.contentWindow.document,e=t.createElement("meta");e.setAttribute("charset","utf-8"),t.head.appendChild(e);var i=t.createElement("style");i.appendChild(t.createTextNode('\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\ndiv.ProseMirror {\n  position: relative;\n  min-height: 100%;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\ndiv.ProseMirror:focus {\n  outline: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror li {\n  position: relative;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px;\n  top: -2px;\n  bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.ProseMirror .tableWrapper {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n\n.ProseMirror table {\n  margin: 0;\n  border-collapse: collapse;\n  table-layout: fixed;\n  width: 100%;\n  overflow: hidden;\n}\n\n.ProseMirror td, .ProseMirror th {\n  min-width: 1em;\n  border: 1px solid #ddd;\n  padding: 3px 5px;\n  vertical-align: top;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.ProseMirror th {\n  font-weight: bold;\n  text-align: left;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n/* Give selected cells a blue overlay */\n.ProseMirror .selectedCell:after {\n  z-index: 2;\n  position: absolute;\n  content: "";\n  left: 0; right: 0; top: 0; bottom: 0;\n  background: rgba(200, 200, 255, 0.4);\n  pointer-events: none;\n}\n')),t.head.appendChild(i);var n=t.createElement("div");return t.body.appendChild(n),t.body.querySelector("div")}setupDiv(){return this.div}getDialogArgs(t){return CH(this.view)[t]()}exec(t){var e=t.commandName;bH[e](t)(this.view.state,this.view.dispatch,this.view),t.shouldFocusView&&this.view.focus()}focus(){this.view.focus()}setOptions(t){super.setOptions(t)}setValue(){XD(this.valueContainer.innerHTML)(this.view.state,this.view.dispatch),this.value=this.view.dom.innerHTML}updateToolBarState(){var{stateChanged:t,state:e}=((t,e)=>{var i=kH(t),n=Object.keys(e),r=!1;for(var s of n){var o=i[s],a=e[s];o&&a&&!wH(o,a)&&(r=!0,e[s]=o)}return{stateChanged:r,state:e}})(this.view.state,this.options.toolStates);t&&(this.options.toolStates=e,this.invokeToolBarUpdate(e))}onToolBarMouseDown(t){at(t.target,".k-button",!0)&&t.preventDefault()}executePasteCleanup(t){var e=this.options.pasteSettings,i=this.getPasteCleanupAttributes(),n=function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")}(t);return e.removeComments&&(n=function(t){return t.replace(/<!--[\s\S]+?-->/g,"")}(n)),i$(n,{convertMsLists:e.convertMsLists,stripTags:e.stripTags?e.stripTags.join("|"):[],attributes:i})}getPasteCleanupAttributes(){var t=this.options.pasteSettings,e={};return t.removeAllAttributes?{"*":JU}:(t.removeMsStyles&&(e.style=e$),t.removeMsClasses&&(e.class=ZU),t.removeAttributes.reduce(((t,e)=>_H(_H({},t),{},{[e]:JU})),e))}valueChanged(){(function(t,e,i,n){var r=AI.from(WD(t,i,n)),s=AI.from(WD(e,i,n));return r.eq(s)})(this.view.dom.innerHTML,this.value,uH)||(this.value=this.view.dom.innerHTML,this.invokeValueChanged())}invokeToolBarUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateToolBarState,t)}invokeValueChanged(){this.invokeMethodAsync(this.options.jsinterop.valueChanged,this.value)}destroy(){super.destroy(),this.unbindEvents(),this.view.destroy(),this.content=this.view=this.iframe=this.div=null}}function PH(t,e){Zt(MH,t,e)}class IH extends H{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,jsinterop:{}}),this.extendOptions(e)}focusEntryNameEditor(){it((()=>{var t=this.element.querySelector(".k-listview-item.k-edit-item"),e=this.element.querySelector(".k-grid-edit-row"),i=t||e;if(d(i)){var n=ut(i);if(!d(n))return;y(n.select)&&n.select(),y(n.focus)&&n.focus()}}))}saveFile(t){var{fileName:e,dataUrl:i}=t;e&&i&&O(e,i)}}function FH(t,e){Zt(IH,t,e)}function DH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RH="focus",LH="focusout";class NH extends H{constructor(t,e){super(t,e),DH(this,"options",{dotNetInstance:null}),DH(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),DH(this,"onFocus",(()=>{this.invokeFocus()})),DH(this,"onFocusOut",(()=>{this.invokeFocusOut()})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener(RH,this.onFocus),this.element.addEventListener(LH,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(RH,this.onFocus),this.element.removeEventListener(LH,this.onFocusOut)}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind("".concat(ge.ALT," ").concat(fe.ARROWDOWN),this.onKeyDown)}destroy(){this.disableTabKeyTrap(),this.navigationService.destroy(),super.destroy()}enableTabKeyTrap(t){if(this.options.navigable){var e=G(t);this.formKeyTrap=new Ce(e),this.formKeyTrap.enableKeyTrap()}}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}focusParentHeader(){var t=this.element.closest("th.k-header");t&&t.focus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}}function BH(t,e){Zt(NH,t,e)}function jH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zH="focusin",UH="focusout",$H=":not(th):not(td):not([disabled]):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button)",HH="input".concat($H,", button").concat($H,", [tabindex]").concat($H),VH=".k-filtercell";class qH extends H{constructor(t,e){super(t,e),jH(this,"options",{dotNetInstance:null,navigable:null}),jH(this,"onFocusIn",(t=>{t.target&&t.target.closest(VH)&&this.enableTabKeyTrap()})),jH(this,"onFocusOut",(t=>{t.target&&t.relatedTarget&&!t.relatedTarget.closest(VH)&&this.disableTabKeyTrap()})),this.extendOptions(e),this.options.navigable&&this.bindEvents()}setOptions(t){this.options.navigable!==t.navigable&&(t.navigable?this.bindEvents():this.unbindEvents()),this.extendOptions(t)}bindEvents(){this.element.addEventListener(zH,this.onFocusIn),this.element.addEventListener(UH,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(zH,this.onFocusIn),this.element.removeEventListener(UH,this.onFocusOut)}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),super.destroy()}setTabIndices(t){Array.from(this.element.querySelectorAll(HH)).forEach((e=>{e.setAttribute("tabindex",t)}))}enableTabKeyTrap(){this.tabKeyTrap=new we(this.element,HH),this.tabKeyTrap.enableKeyTrap(),this.setTabIndices(0)}disableTabKeyTrap(){this.tabKeyTrap&&(this.tabKeyTrap.disableTabKeyTrap(),this.setTabIndices(-1))}}function WH(t,e){Zt(qH,t,e)}function XH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class GH extends H{constructor(t,e){super(t,e),XH(this,"options",{dotNetInstance:null,jsinterop:{}}),XH(this,"onTimeLineScroll",(()=>{this.timelineHeader.scrollLeft=this.timelineContent.scrollLeft,this.treeListContent.scrollTop=this.timelineContent.scrollTop})),XH(this,"onTreeListWheelFF",(t=>{this.onTreeListScroll(t,-40*t.detail)})),XH(this,"onTreeListWheel",(t=>{this.onTreeListScroll(t,t.wheelDelta)})),XH(this,"onTreeListScroll",((t,e)=>{if(this.timelineContent){var i=this.timelineContent.scrollTop-e;this.timelineContent.scrollTop=i}else{var n=this.treeListContent.scrollTop-e;this.treeListContent.scrollTop=n}t.preventDefault()})),this.extendOptions(e),this.timelineContent=this.element.querySelector(".k-gantt-timeline .k-grid-content"),this.timelineHeader=this.element.querySelector(".k-gantt-timeline .k-grid-header-wrap"),this.treeListContent=this.element.querySelector(".k-gantt-treelist .k-grid-content"),this.unifyFilterRowHeight(),this.setTreeListHeight(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.timelineContent&&this.timelineContent.addEventListener("scroll",this.onTimeLineScroll),Ae.firefox?this.treeListContent.addEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.addEventListener("wheel",this.onTreeListWheel)}unbindEvents(){this.timelineContent&&this.timelineContent.removeEventListener("scroll",this.onTimeLineScroll),Ae.firefox?this.treeListContent.removeEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.removeEventListener("wheel",this.onTreeListWheel)}unifyFilterRowHeight(){var t=this.element.querySelector(".k-gantt-timeline .k-filter-row"),e=this.element.querySelector(".k-gantt-treelist .k-filter-row");e&&t&&(t.style.height="".concat(e.offsetHeight,"px"))}setTreeListHeight(){var t=this.element.querySelector(".k-gantt-treelist"),e=t.querySelector(".k-grid-header");this.treeListContent.style.height=t.offsetHeight-e.offsetHeight+"px"}}function KH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class YH extends H{constructor(t,e){super(t,e),KH(this,"options",{dotNetInstance:null,jsinterop:{moveTask:"",updatePercentComplete:"",getDragTaskTooltipDates:"",createDependency:""}}),KH(this,"renderMoveHints",(()=>{this.moveTarget&&(this.destroyHint(),this.destroyTooltip(),this.hint=this.createHint(),this.tooltip=this.createTooltip(),this.tooltipContent=this.tooltip.querySelector(".k-tooltip-content"),this.getContentElement().appendChild(this.hint),this.getContentElement().appendChild(this.tooltip))})),KH(this,"createHint",(()=>{var t=document.createElement("div");t.className="k-marquee k-gantt-marquee",t.style.top="0px",t.style.height=this.getTablesWrapperElement().getBoundingClientRect().height+"px",t.style.left=this.originalLeft+"px",t.style.width=this.originalWidth+"px";var e=document.createElement("div");return e.className="k-marquee-color",t.appendChild(e),t})),KH(this,"destroyHint",(()=>{this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)})),KH(this,"createTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip k-gantt-resize-hint",t.style.zIndex="100002",t.style.minWidth="160px";var e=document.createElement("div");return e.className="k-tooltip-content",t.appendChild(e),t})),KH(this,"destroyTooltip",(()=>{this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.tooltipContent=null)})),KH(this,"renderPercentDragTooltip",(()=>{this.destroyPercentDragTooltip(),this.percentDragTooltip=this.createPercentDragTooltip(),this.element.appendChild(this.percentDragTooltip)})),KH(this,"createPercentDragTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip",t.style.zIndex="100002";var e=document.createElement("div");e.className="k-tooltip-content",t.appendChild(e);var i=document.createElement("div");return i.className="k-callout k-callout-s",t.appendChild(i),t})),KH(this,"destroyPercentDragTooltip",(()=>{this.percentDragTooltip&&(this.percentDragTooltip.parentNode.removeChild(this.percentDragTooltip),this.percentDragTooltip=null)})),KH(this,"renderDependencyDragHint",(()=>{this.destroyDependencyDragHint(),this.dependencyDragHint=this.createDependencyDragHint(),this.element.querySelector(".k-gantt-dependencies-svg").appendChild(this.dependencyDragHint)})),KH(this,"createDependencyDragHint",(()=>{var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");return t.style.fill="none",t.style.stroke="black",t.style.strokeWidth="2",t})),KH(this,"destroyDependencyDragHint",(()=>{this.dependencyDragHint&&(this.dependencyDragHint.parentNode.removeChild(this.dependencyDragHint),this.dependencyDragHint=null)})),KH(this,"getContentElement",(()=>this.element.querySelector(".k-grid-content"))),KH(this,"getTablesWrapperElement",(()=>this.getContentElement().querySelector(".k-gantt-tables"))),KH(this,"getRowHeight",(()=>this.element.querySelector(".k-gantt-tables tr").getBoundingClientRect().height)),KH(this,"getMilestoneWidth",(()=>{var t=j('<div class="k-task-wrap k-milestone-wrap">\n                <div class="k-task k-task-milestone" >\n                </div>\n            </div>');this.getTablesWrapperElement().appendChild(t);var e=t.querySelector(".k-task").getBoundingClientRect().width;return t.parentNode.removeChild(t),e})),this.extendOptions(e),this.bindEvents(),this.createMovable()}destroy(){this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){}unbindEvents(){}createMovable(){this.destroyMovable(),this.movable=new ui({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;e&&(e.closest(".k-task")?this.onTaskDragStart(t):e.closest(".k-task-dot")?this.onDependencyDragStart(t):e.closest(".k-task-draghandle")&&this.onPercentDragStart(t))}onTaskDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task"),this.resizeTask=!0,this.resizeStart=Boolean(e.closest(".k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-e"));var i=this.moveTarget.getBoundingClientRect();this.originalLeft=this.currentLeft=i.left-this.getTablesWrapperElement().getBoundingClientRect().left,this.originalWidth=this.currentWidth=i.width,this.originalTaskMouseOffset=t.clientX-i.left}onDependencyDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-dot");var i=this.moveTarget.getBoundingClientRect(),n=this.getTablesWrapperElement().getBoundingClientRect(),r=n.x,s=n.y;this.dependencyDragOptions={predecessorIndex:this.getTaskIndex(e),fromStart:Q("k-task-start",this.moveTarget),startX:i.x+i.width/2-r,startY:i.y+i.height/2-s}}onPercentDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-draghandle");var i=this.moveTarget.parentElement.querySelector(".k-task");this.percentCompleteBarElement=i.querySelector(".k-task-complete");var n=i.getBoundingClientRect();this.maxPercentWidth=n.width,this.originalWidth=this.currentWidth=t.clientX-n.left,this.originalLeft=t.clientX}onMovableDrag(t){if(this.moveTarget)return this.dragStarted?void(this.resizeTask?this.onTaskDrag(t):this.dependencyDragOptions?this.onDependencyDrag(t):this.onPercentDrag(t)):(this.dragStarted=!0,void(this.resizeTask?this.renderMoveHints():this.dependencyDragOptions?this.renderDependencyDragHint():this.renderPercentDragTooltip()))}onTaskDrag(t){var e=t.clientX-this.getTablesWrapperElement().getBoundingClientRect().left;e<0&&(e=0),this.resizeStart?(this.currentLeft=e,this.currentLeft>this.originalLeft+this.originalWidth&&(this.currentLeft=this.originalLeft+this.originalWidth)):this.resizeEnd||(this.currentLeft=e-this.originalTaskMouseOffset),this.resizeStart?this.currentWidth=this.originalWidth+this.originalLeft-e:this.resizeEnd&&(this.currentWidth=e-this.originalLeft),this.currentWidth<0&&(this.currentWidth=0),this.invokeMethodAsync(this.options.jsinterop.getDragTaskTooltipDates,{start:this.currentLeft,end:this.currentLeft+this.currentWidth}).then((t=>{if(this.dragStarted){this.tooltipContent.innerHTML="<div>Start: "+t.start+"</div><div>End: "+t.end+"</div>";var e=this.currentLeft-this.tooltip.getBoundingClientRect().width/2;this.resizeEnd&&(e+=this.currentWidth),e<0&&(e=0),this.tooltip.style.left=e+"px";var i=this.moveTarget.getBoundingClientRect().top-this.getTablesWrapperElement().getBoundingClientRect().top,n=this.tooltip.getBoundingClientRect().height;i-n<0?i+=this.moveTarget.getBoundingClientRect().height:i-=n,this.tooltip.style.top=i+"px",this.hint.style.left=this.currentLeft+"px",this.hint.style.width=this.currentWidth+"px"}}))}onDependencyDrag(t){var e=this.getTablesWrapperElement().getBoundingClientRect(),i=e.x,n=e.y;if(!this.dependencyDragOptions.startX){var r=this.moveTarget.getBoundingClientRect();this.dependencyDragOptions.startX=r.x+r.width/2-i,this.dependencyDragOptions.startY=r.y+r.height/2-n}var s=t.clientX-i,o=t.clientY-n;this.dependencyDragHint.setAttribute("points","".concat(this.dependencyDragOptions.startX,",").concat(this.dependencyDragOptions.startY," ").concat(s,",").concat(o))}onPercentDrag(t){var e=this.element.getBoundingClientRect(),i=this.moveTarget.parentElement.querySelector(".k-task").getBoundingClientRect(),n=this.percentDragTooltip.getBoundingClientRect(),r=this.originalWidth+(t.clientX-this.originalLeft);if(!(r<0||r>this.maxPercentWidth)){this.currentWidth=r;var s=Math.round(this.currentWidth/this.maxPercentWidth*100);this.moveTarget.style.left=this.currentWidth+"px",this.percentCompleteBarElement.style.width=this.currentWidth+"px",this.percentDragTooltip.querySelector(".k-tooltip-content").textContent=s+"%",this.percentDragTooltip.style.left=t.clientX-e.left-n.width/2+"px",this.percentDragTooltip.style.top=i.top-e.top-n.height-6+"px"}}onMovableDrop(t){if(this.destroyHint(),this.destroyTooltip(),this.destroyPercentDragTooltip(),this.destroyDependencyDragHint(),this.dragStarted)if(this.resizeTask)this.invokeMethodAsync(this.options.jsinterop.moveTask,{resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,left:this.currentLeft,right:this.currentLeft+this.currentWidth});else if(this.dependencyDragOptions){var e=this.getElementUnderCursor(t);e.closest(".k-task-dot")&&this.invokeMethodAsync(this.options.jsinterop.createDependency,{predecessorIndex:this.dependencyDragOptions.predecessorIndex,fromStart:this.dependencyDragOptions.fromStart,successorIndex:this.getTaskIndex(e),toStart:Q("k-task-start",e.closest(".k-task-dot"))})}else{var i=Math.round(this.currentWidth/this.maxPercentWidth*100)/100;this.invokeMethodAsync(this.options.jsinterop.updatePercentComplete,i)}this.dragStarted=!1,this.moveTarget=null,this.resizeTask=this.resizeStart=this.resizeEnd=!1,this.dependencyDragOptions=null}getTaskIndex(t){return parseInt(t.closest(".k-task-wrap").getAttribute("data-index"))}getElementUnderCursor(t){return document.elementFromPoint(t.clientX,t.clientY)}}function JH(t,e){Zt(GH,t,e)}function ZH(t,e){Zt(YH,t,e)}var QH=t=>"".concat(parseFloat(t),"px");class tV extends rE{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return rC}setOptions(t){super.setOptions(t),this.showCenterLabel()}getCenterLabel(){return this.element.querySelector(".k-arcgauge-label")}showCenterLabel(){var t=this.getCenterLabel();if(t){var e=this.getCenterLabelPosition();t.style.top=QH(e.top),t.style.left=QH(e.left),t.style.display=""}}getCenterLabelPosition(){var t=this.getCenterLabel(),e={top:0,left:0};if(t){var i=t.style.display;t.style.visibility="hidden",t.style.display="block",e=this.getLabelPositionFromGauge(),t.style.display=i,t.style.visibility=""}return e}getLabelPositionFromGauge(){var t=this.getCenterLabel(),e=t?t.offsetWidth:0,i=t?t.offsetHeight:0,n=this.widget.centerLabelPosition(e,i);return{top:n.top,left:n.left}}}function eV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class iV extends tE{constructor(){super(...arguments),eV(this,"store",{}),eV(this,"loaded",!1),eV(this,"element",null)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.loaded||(this.readTheme(),this.loaded=!0)}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--gauge-pointer"></div>\n    <div class="k-var--gauge-track"></div>\n    <div class="k-var--normal-text-color"></div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}readTheme(){this.createElement();try{var t=this.queryColor("gauge-pointer"),e=this.queryColor("gauge-track"),i=this.queryColor("normal-text-color");this.store={pointer:{color:t},scale:{labels:{color:i},rangePlaceholderColor:e,minorTicks:{color:i},majorTicks:{color:i},line:{color:i}}}}finally{this.destroyElement()}}setStyle(t,e){this.set(t,e)}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element.querySelector(".k-var--".concat(t));return window.getComputedStyle(e)}}function nV(t){var{id:e="",widgetOptions:i={},componentOptions:n={},componentConstructor:r}=t;sE({id:e,widgetOptions:i,componentOptions:n,services:{themeService:new iV,intlService:eo},componentConstructor:r})}function rV(t,e,i){nV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:tV})}class sV extends tV{getWidgetConstructor(){return oC}getCenterLabel(){return this.element.querySelector(".k-circulargauge-label")}}function oV(t,e,i){nV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:sV})}class aV extends rE{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return Pk}}function lV(t,e,i){nV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:aV})}class cV extends rE{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return Yk}}function hV(t,e,i){nV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:cV})}class uV extends Ii{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!1,offsetDropClue:!1},componentSelector:".k-grid:not(.k-treelist)",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function pV(t,e){Zt(uV,t,e)}function dV(t){Qt(t)}function fV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var gV,mV="focusout";class yV extends H{constructor(t,e){super(t,e),fV(this,"options",{dotNetInstance:null,jsinterop:{focusout:""}}),fV(this,"onFocusOut",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(mV,this.onFocusOut)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener(mV,this.onFocusOut)}focus(){this.element.focus()}}function vV(t,e){Zt(yV,t,e)}!function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(gV||(gV={}));var bV=function(){function t(t,e,i){void 0===i&&(i=gV.Undefined),this.value=t,this.rest=e,this.type=i}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,i){return t.chain((function(t,i){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}(),wV=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}(),xV=function(t){return(t||"").split("")},SV=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof wV?this.parse(t):this.parse(new wV(xV(t),xV(e)))},t.prototype.map=function(e){var i=this;return new t((function(t){return i.parse(t).map(e)}))},t.prototype.chain=function(e){var i=this;return new t((function(t){return i.parse(t).chain((function(t,i){return e(t).run(i)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===gV.Literal},t}(),kV=function(t,e){return new SV((function(i){var n=i.next().char,r=t[n];return"\\"===n?(n=i.next().char,new bV(e.literal(n),i)):new bV(r?e.mask(r):e.literal(n),i)}))},CV=function(t){var e=t.prompt,i=t.promptPlaceholder;return new SV((function(t){var n=t.next().char;return new bV(n===e?i:n,t)}))},AV=function(t){return new SV((function(e){var i=e.next().char;return new bV(t?i:"",e)}))},_V=function(t){return t.reduce((function(t,e){return i=e,t.chain((function(t){return i.map((function(e){return t.concat([e])}))}));var i}),(e=[],new SV((function(t){return new bV(e,t)}))));var e},TV=function(t){return new SV((function(e){for(var i=new bV([],e);!e.eof();)i=i.concat(t.run(e));return i}))},OV=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,i=void 0===e?"":e,n=t.prompt,r=void 0===n?"":n,s=t.promptPlaceholder,o=void 0===s?" ":s,a=t.rules,l=void 0===a?{}:a,c=t.includeLiterals,h=void 0!==c&&c;this.mask=i,this.prompt=r,this.promptPlaceholder=o,this.rules=l,this.includeLiterals=h,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return _V(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(_V(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(_V(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,i){return t.length<e.length?this.maskRemoved(t,e,i):this.maskInserted(t,e,i)},t.prototype.maskInRange=function(t,e,i,n){var r="",s=n,o=e.split("").slice(0,i),a=e.split("").slice(n);return _V(this.maskTokens.slice(i,n)).run(t).fold((function(t){r=o.concat(t).concat(a).join("")})),{selection:s,value:r}},t.prototype.maskRemoved=function(t,e,i){var n=this,r="",s=i,o=t.split("").slice(i),a=t.split("").slice(0,i).join(""),l=this.maskTokens.length-(t.length-i);return _V(this.maskTokens.slice(0,l)).run(a,e).fold((function(t){s=n.adjustPosition(t,s),r=t.concat(o).join("")})),{selection:s,value:r}},t.prototype.adjustPosition=function(t,e){var i=t[e];return this.maskTokens[e].isLiteral(i)||i===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,i){var n=this,r="",s=i,o=t.slice(0,i);return _V(this.unmaskTokens).run(o,e).chain((function(t){s=t.join("").length;var i=e.slice(s);return _V(n.maskTokens).run(t.join("")+i,e)})).fold((function(t){r=t.join("")})),{selection:s,value:r}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return e=t,new SV((function(t){return t.peek().char===e?(t.eat(),new bV(e,t,gV.Literal)):new bV(e,t,gV.Literal)}));var e},mask:function(i){return function(t){var e=t.prompt,i=t.promptPlaceholder;return function(t){return new SV((function(n){for(;!n.eof();){var r=n.peek(),s=r.char,o=r.control;if(s===o&&o===e)return n.eat(),new bV(e,n,gV.Mask);if(t.test(s))return n.eat(),new bV(s,n,gV.Mask);if(s===i)return n.eat(),new bV(e,n,gV.Mask);n.eat_input()}return n.eat(),new bV(e,n,gV.Mask)}))}}({prompt:t,promptPlaceholder:e})(i)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return e=t,new SV((function(t){return t.eof()?new bV("",t):(t.peek().char===e&&t.eat(),new bV(e,t))}));var e},mask:function(e){return(i=t.prompt,function(t){return new SV((function(e){for(;!e.eof();){var n=e.peek(),r=n.char,s=n.control;if(r===i&&s===i)return e.eat(),new bV(r,e);if(t.test(r))return e.eat(),new bV(r,e);e.eat_input()}return e.eat(),new bV("",e)}))})(e);var i}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,i=t.promptPlaceholder,n=t.includeLiterals;return{literal:function(t){return AV(n)},mask:function(t){return CV({prompt:e,promptPlaceholder:i})}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return AV(!1)},mask:function(e){return CV({prompt:t,promptPlaceholder:""})}}},enumerable:!1,configurable:!0}),t.prototype.tokenize=function(){var t=this;TV(kV(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,i){t.maskTokens=e})),TV(kV(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,i){t.unmaskTokens=e})),TV(kV(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,i){t.rawTokens=e})),TV(kV(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,i){t.validationTokens=e}))},t}();var EV=e.elementOffset,MV=e.limitValue,PV=Sc,IV=_c,FV=jc,DV=function(){},RV="#000",LV="#fff",NV=function(){function t(t,e){void 0===e&&(e={}),this.element=t,this.lastMoveTime=0,this.resolveColors(e),this.options=Object.assign({scale:1,precision:1,samplingRate:200,smooth:!1!==e.smooth,color:RV,backgroundColor:LV,strokeWidth:1,onChange:DV,onDraw:DV,onDrawEnd:DV},e,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions={stroke:{color:this.options.color,width:this.options.strokeWidth,lineCap:"round",lineJoin:"round"}},this.initSurface(),this.attachEvents()}return t.prototype.destroy=function(){this.detachEvents()},t.prototype.clear=function(){this.rootGroup.clear(),this.path=null},t.prototype.readThemeColors=function(){var t,e;if("undefined"!=typeof document){var i=this.element.closest(".k-signature")||this.element,n=i.ownerDocument.defaultView.getComputedStyle(i);t=n.color,e=n.backgroundColor}this.themeColor=t||this.themeColor||RV,this.themeBackgroundColor=e||this.themeBackgroundColor||LV},t.prototype.resolveColors=function(t){this.readThemeColors(),this.color=t.color||(this.options||{}).color||this.themeColor,this.backgroundColor=t.backgroundColor||(this.options||{}).backgroundColor||this.themeBackgroundColor},Object.defineProperty(t.prototype,"isDrawing",{get:function(){return Boolean(this.points)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathData",{get:function(){var t;return null===(t=this.path)||void 0===t?void 0:t.toString(3)},set:function(t){this.clear(),this.path=Yh.parse(t,this.pathOptions),this.rootGroup.append(this.path)},enumerable:!1,configurable:!0}),t.prototype.loadImage=function(t,e){if(void 0===e&&(e=[]),t){var i=this.size,n=i[0],r=i[1],s=n/this.options.scale,o=r/this.options.scale,a=e[0]||6*s,l=e[1]||6*o,c=s/a,h=o/l,u=Math.min(c,h),p=new YC(t,new _c([0,0],[a,l]));p.transform(FV().scale(u,u)),this.clear(),this.rootGroup.append(p)}else this.clear()},t.prototype.exportImage=function(t){var e,i=this.size,n=i[0],r=i[1],s=n/this.options.scale,o=r/this.options.scale,a=(null==t?void 0:t.width)||6*s,l=(null==t?void 0:t.height)||6*o,c=a/s,h=l/o,u=Math.min(c,h),p=new IV([0,0],[a,l]),d=new lu({clip:Kh.fromRect(p)}),f=new lu({transform:FV().scale(u,u)}),g=Kh.fromRect(p,{fill:{color:this.options.backgroundColor}});return d.append(g),d.append(f),(e=f.children).push.apply(e,this.rootGroup.children),function(t,e){var i={width:"800px",height:"600px",cors:"Anonymous"},n=t,r=t.clippedBBox();if(r){var s=r.getOrigin();(n=new lu).transform(jc().translate(-s.x,-s.y)),n.children.push(t);var o=r.getSize();i.width=o.width+"px",i.height=o.height+"px"}var a=Object.assign(i,e),l=document.createElement("div"),c=l.style;c.display="none",c.width=a.width,c.height=a.height,document.body.appendChild(l);var h=new Jb(l,a);h.suspendTracking(),h.draw(n);var u=h.image(),p=function(){h.destroy(),document.body.removeChild(l)};return u.then(p,p),u}(d,Object.assign({width:a,height:l},t))},t.prototype.resize=function(){this.surface.resize(!0)},t.prototype.setOptions=function(t){this.resolveColors(t),Object.assign(this.options,t,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions.stroke.color=this.options.color,this.pathOptions.stroke.width=this.options.strokeWidth,this.path&&(this.path.options.set("stroke.color",this.options.color),this.path.options.set("stroke.width",this.options.strokeWidth)),this.background.options.set("fill.color",this.options.backgroundColor)},t.prototype.initSurface=function(){this.surface=rw.create(this.element,{type:"canvas"}),this.element.style.touchAction="none";var t=this.options.scale;this.rootGroup=new lu({transform:FV().scale(t,t)});var e=this.element.offsetWidth||750,i=this.element.offsetHeight||250;this.size=[e,i],this.background=Kh.fromRect(new IV([0,0],this.size),{fill:{color:this.options.backgroundColor}}),this.surface.draw(this.background),this.surface.draw(this.rootGroup)},t.prototype.attachEvents=function(){this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onDragStart=this.onDragStart.bind(this),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("dragstart",this.onDragStart)},t.prototype.detachEvents=function(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.detachPointerMove(),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("dragstart",this.onDragStart)},t.prototype.attachPointerMove=function(){this.element.addEventListener("pointermove",this.onPointerMove)},t.prototype.detachPointerMove=function(){this.element.removeEventListener("pointermove",this.onPointerMove)},t.prototype.touchPoint=function(t){var e=EV(this.element),i=t.pageX,n=t.pageY,r=1/this.options.scale;return new PV(i-e.left,n-e.top).scale(r,r)},t.prototype.onDragStart=function(t){t.preventDefault()},t.prototype.onPointerDown=function(t){if(!this.options.readonly&&t.isPrimary&&function(t){return"number"!=typeof t.button||0===t.button}(t)){this.detachPointerMove(),this.attachPointerMove(),this.path||(this.path=new Yh(this.pathOptions),this.rootGroup.append(this.path)),this.options.onDraw(),this.element.setPointerCapture(t.pointerId);var e=this.touchPoint(t);this.points=[e],this.path.moveTo(e)}},t.prototype.onPointerMove=function(t){if(this.points&&this.path&&t.isPrimary){var e=(new Date).getTime();if(!(e-this.lastMoveTime<1e3/MV(this.options.samplingRate,1,1e4))){this.lastMoveTime=e;var i=this.touchPoint(t),n=this.points[this.points.length-1],r=1/MV(this.options.precision,.01,100);i.distanceTo(n)<r||(this.points.push(i),this.path.lineTo(i))}}},t.prototype.onPointerUp=function(t){if(t.isPrimary&&this.path&&this.points&&!this.options.readonly){if(this.detachPointerMove(),this.options.smooth){var e=Kh.curveFromPoints(this.points);this.path.paths.splice(this.path.paths.length-1,1,e)}this.points=null,this.options.onDrawEnd(),this.options.onChange(this.pathData)}},t}();function BV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class jV extends H{constructor(t,e){super(t,e),BV(this,"defaultRules",{"#":/[\d\s\+\-]/,"&":/[\S]/,0:/[\d]/,9:/[\d\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,C:/./,L:/[a-zA-Z]/,a:/[a-zA-Z0-9\s]/}),BV(this,"options",{dotNetInstance:null,includeLiterals:!1,mask:"",prompt:"",promptPlaceholder:"",maskOnFocus:!1,rules:this.defaultRules,value:"",debounceDelay:150,jsinterop:{blur:"",updateValue:"",change:""}}),BV(this,"state",{selection:[0,0],isPasted:!1,shouldFocusOnClick:!1,service:null,isFocused:!1,maskedValue:"",value:""}),BV(this,"onFocus",(()=>{this.state.isFocused=!0,this.options.maskOnFocus&&this.isMaskEmpty()&&(this.updateInput(this.state.service.maskRaw(this.state.value)),this.setSelection(0,0)),this.invokeFocus()})),BV(this,"onPaste",(t=>{var{selectionStart:e,selectionEnd:i}=t.target;i!==e&&(this.state.isPasted=!0,this.state.selection=[e,i])})),BV(this,"onBlur",(()=>{this.state.isFocused=!1,this.state.shouldFocusOnClick=!1,this.options.maskOnFocus&&this.isMaskEmpty()&&this.updateInput(this.state.maskedValue),this.invokeBlur()})),BV(this,"onClick",(()=>{if(this.state.isFocused&&!this.state.shouldFocusOnClick){this.state.shouldFocusOnClick=!0;var{selectionStart:t,selectionEnd:e}=this.element;t===e&&this.setFocusSelection()}})),BV(this,"onInput",(t=>{var e,i=t.target.value,[n,r]=this.state.selection;if(!this.options.mask)return this.updateComponentValue(i),void(this.state.isPasted=!1);if(this.state.isPasted){this.state.isPasted=!1;var s=this.state.maskedValue.length-r,o=i.length-s;e=this.state.service.maskInRange(i.slice(n,o),this.state.maskedValue,n,r)}else e=this.state.service.maskInput(i,this.state.maskedValue,t.target.selectionStart);this.updateInput(e.value,e.selection),this.debounceUpdateComponentValue(e.value)})),this.extendOptions(e),this.bindEvents(),this.state.service=new OV,this.updateService(),this.setValue(this.options.value),this.setInputDebounceCallback()}bindEvents(){this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("input",this.onInput),this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("click",this.onClick),this.element.addEventListener("paste",this.onPaste)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur),this.element.removeEventListener("input",this.onInput),this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("paste",this.onPaste)}focus(){this.element.focus()}updateService(){this.state.service.update({includeLiterals:this.options.includeLiterals,mask:this.options.mask,prompt:this.options.prompt,promptPlaceholder:this.options.promptPlaceholder,rules:this.options.rules})}setOptions(t){var e=this.options.promptPlaceholder,i=this.options.includeLiterals;this.extendOptions(t),this.setInputDebounceCallback(),this.updateService(),this.setValue(this.options.value),e===this.options.promptPlaceholder&&i===this.options.includeLiterals||this.updateComponentValue(this.state.maskedValue)}updateComponentValue(t){this.options.mask&&!this.state.service.validationValue(t)?this.state.value="":this.state.value=this.state.service.rawValue(t),this.invokeUpdate(this.state.value)}setValue(t){if(this.state.value=t,this.options.mask){var e=this.state.service.maskRaw(this.state.value);this.updateInput(e)}else this.updateInput(this.state.value)}setFocusSelection(){var t=this.element.selectionStart,e=this.state.maskedValue?this.state.maskedValue.indexOf(this.options.prompt):0;e>=0&&e<t&&(this.state.selection=[e,e],this.setSelection())}updateInput(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.state.maskedValue=t;var i=this.shouldResetValue()?"":t;this.element.value=i,void 0!==e&&this.setSelection(e,e)}setSelection(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selection[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.selection[1];this.state.isFocused&&this.element.setSelectionRange(t,e)}isMaskEmpty(){return this.state.service.maskRaw()===this.state.maskedValue}shouldResetValue(){return this.options.maskOnFocus&&!this.state.isFocused&&this.isMaskEmpty()}invokeBlur(){this.invokeMethodAsync(this.options.jsinterop.blur)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateValue,t)}setInputDebounceCallback(){this.debounceUpdateComponentValue=Li(this.updateComponentValue,this.options.debounceDelay).bind(this)}}function zV(t,e){Zt(jV,t,e)}function UV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $V="k-spinner-increase",HV="k-spinner-decrease",VV=[de.ARROWDOWN,de.ARROWUP];class qV extends H{constructor(t,e){super(t,e),UV(this,"options",{dotNetInstance:null,decimals:0,separator:"\\.",min:null,max:null,value:"",jsinterop:{blur:""}}),UV(this,"onKeyDown",(t=>{VV.includes(t.keyCode)&&t.preventDefault()})),this.setOptions(e),this.upArrowElement=t.parentElement.getElementsByClassName($V)[0],this.downArrowElement=t.parentElement.getElementsByClassName(HV)[0],this.bindEvents()}setOptions(t){this.extendOptions(t),this.element.value=this.options.value}bindEvents(){this.onKeyPress=this.onKeyPress.bind(this),this.onPaste=this.onPaste.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onBlur=this.onBlur.bind(this),this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("keypress",this.onKeyPress),this.element.addEventListener("paste",this.onPaste),this.element.addEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.addEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.addEventListener("mousedown",this.onMouseDown)}destroy(){this.unbindEvents(),super.destroy(),this.upArrowElement=null,this.downArrowElement=null}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("keypress",this.onKeyPress),this.element.removeEventListener("paste",this.onPaste),this.element.removeEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.removeEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.removeEventListener("mousedown",this.onMouseDown)}focus(){this.element.focus()}onKeyPress(t){var e=String.fromCharCode(t.which);this.isValid(e)||t.keyCode===de.ENTER||t.preventDefault()}onPaste(t){this.isValid(t.clipboardData.getData("text/plain").trim())||t.preventDefault()}onMouseDown(t){t.preventDefault(),document.activeElement!==this.element&&this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}numericRegex(){var t=this.options.separator,e=this.options.decimals,i="{0,"+e+"}";return e?new RegExp("^(-)?(((\\d+(["+t+"]\\d"+i+")?)|(["+t+"]\\d"+i+")))?$"):/^(-)?(\d*)$/}caret(){return[this.element.selectionStart,this.element.selectionEnd]}isValid(t){var e=this.element.value,i=this.caret();return e=e.substring(0,i[0])+t+e.substring(i[1]),!!this.numericRegex().test(e)}}function WV(t,e){Zt(qV,t,e)}class XV extends H{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,jsinterop:{blur:""}}),this.extendOptions(e),this.bindEvents()}bindEvents(){this.onBlur=this.onBlur.bind(this),this.element.addEventListener("blur",this.onBlur)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur)}focus(){this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}}var GV="input",KV="keydown";class YV extends XV{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{autoSize:!1,debounceDelay:150,jsinterop:{updateValue:""}}),this.setOptions(e),this.resize()}destroy(){super.destroy()}bindEvents(){super.bindEvents(),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.element.addEventListener(GV,this.onInput),this.element.addEventListener(KV,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(GV,this.onInput),this.element.removeEventListener(KV,this.onKeyDown),super.unbindEvents()}setOptions(t){this.extendOptions(t),this.debounceChangeValue=Li(this.changeValue,this.options.debounceDelay).bind(this)}onInput(){this.resize(),this.debounceChangeValue()}onKeyDown(t){t.keyCode===de.ENTER&&t.stopPropagation()}setValue(t){this.element.value=t,this.resize()}resize(){if(this.options.autoSize){var t,e=this.element;e.style.height="",e.style.height=(t=e.scrollHeight,"".concat(t,"px"))}}changeValue(){this.element&&this.invokeMethodAsync(this.options.jsinterop.updateValue,this.element.value)}}function JV(t,e){Zt(YV,t,e)}function ZV(t,e){Zt(XV,t,e)}function QV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class tq extends H{constructor(t,e){super(t,e),QV(this,"options",{dotNetInstance:null,jsinterop:{onSpaceKeyDown:""}}),QV(this,"onSpaceKeyDown",(()=>(this.invokeMethodAsync(this.options.jsinterop.onSpaceKeyDown),!1))),this.extendOptions(e),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}focus(){this.element.focus()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(fe.SPACE,this.onSpaceKeyDown)}}function eq(t,e){Zt(tq,t,e)}class iq extends H{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"snapValue",(t=>{var e=ue(t-this.options.min,this.options.smallStep)+this.options.min;return he(e,this.options.min,this.options.max)})),this.extendOptions(e),this.sliderTrack=this.element.querySelector(".k-slider-track-wrap"),this.throttleChangeValue=Ni(this.invokeChangeValue,150).bind(this)}eventValue(t){var e=this.calculatePercentageValue(t),i=this.convertToValue(e);return this.snapValue(i)}calculatePercentageValue(t){var e=this.sliderTrack.getBoundingClientRect();return"vertical"===this.options.orientation?100-(t.clientY-e.top)/e.height*100:(t.clientX-e.left)/e.width*100}convertToValue(t){return this.options.min+t*(this.options.max-this.options.min)/100}convertToPercentage(t){return(t-this.options.min)/(this.options.max-this.options.min)*100}setSliderEnd(t){this.endValue=t,this.element&&this.element.style.setProperty("--kendo-slider-end",this.convertToPercentage(t))}setSliderStart(t){this.startValue=t,this.element&&this.element.style.setProperty("--kendo-slider-start",this.convertToPercentage(t))}invokeChangeValue(t){var{isChangeCommitted:e}=t,i=this.options.jsinterop.changeValue;if(this.dotNetInstance&&this.dotNetInstance.invokeMethodAsync&&i){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return this.dotNetInstance.invokeMethodAsync(i,...r,e)}}}function nq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var rq=[fe.ARROWUP,fe.ARROWDOWN,fe.ARROWLEFT,fe.ARROWRIGHT,fe.PAGE_UP,fe.PAGE_DOWN,fe.HOME,fe.END];class sq extends iq{constructor(t,e){super(t,e),nq(this,"onDragStart",(()=>{Z("k-slider-transitions",this.element)})),nq(this,"onDrag",(t=>{var e=this.eventValue(t);this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.endValue)})),nq(this,"onDragEnd",(()=>{this.changeValue(this.endValue),J("k-slider-transitions",this.element)})),nq(this,"onClick",(t=>{var e=this.eventValue(t);e!==this.endValue&&this.changeValue(e),this.dragHandle.focus()})),nq(this,"onNavigate",(t=>{this.invokeNavigate(t.name)})),this.extendOptions(e),this.dragHandle=this.element.querySelector(".k-draghandle"),this.endValue=this.options.value,this.bindEvents(),J("k-slider-transitions",this.element)}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){super.setOptions(t),Q("k-slider-transitions")||J("k-slider-transitions",this.element)}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.draggable.destroy(),this.navigationService.destroy(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.draggable=new yi(this.element,{filter:".k-draghandle",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}})}initNavigationService(){this.navigationService=new ve(this.dragHandle),this.navigationService.bind(rq,this.onNavigate)}changeValue(t){var e=null===t?this.options.min:t;this.setSliderEnd(Math.max(e,this.options.min)),this.invokeChangeValue({isChangeCommitted:!0},this.endValue)}invokeNavigate(t){this.invokeMethodAsync(this.options.jsinterop.navigate,t).then((t=>this.setSliderEnd(t)))}}function oq(t,e){Zt(sq,t,e)}function aq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var lq=[fe.ARROWUP,fe.ARROWDOWN,fe.ARROWLEFT,fe.ARROWRIGHT,fe.PAGE_UP,fe.PAGE_DOWN,fe.HOME,fe.END];class cq extends iq{constructor(t,e){super(t,e),aq(this,"onStartHandleDrag",(t=>{var e=this.eventValue(t);e>this.endValue&&this.setSliderEnd(e),this.setSliderStart(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),aq(this,"onEndHandleDrag",(t=>{var e=this.eventValue(t);e<this.startValue&&this.setSliderStart(e),this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),aq(this,"onDragEnd",(()=>{this.changeValue(this.startValue,this.endValue)})),aq(this,"onClick",(t=>{var e=this.eventValue(t);e<=this.startValue||e<(this.startValue+this.endValue)/2?(e!==this.startValue&&this.changeValue(e,this.endValue),this.startHandle.focus()):(e>=this.endValue||e>=(this.startValue+this.endValue)/2)&&(e!==this.endValue&&this.changeValue(this.startValue,e),this.endHandle.focus())})),aq(this,"onStartHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.startNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),aq(this,"onEndHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.endNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),this.startHandle=this.element.querySelector(".k-draghandle-start"),this.endHandle=this.element.querySelector(".k-draghandle-end"),this.startValue=this.options.startValue,this.endValue=this.options.endValue,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.startHandle=this.endHandle=null}setOptions(t){super.setOptions(t),this.startValue=this.options.startValue,this.endValue=this.options.endValue}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.destroyDraggable(),this.destroyNavigationService(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.startDraggable=new yi(this.element,{filter:".k-draghandle-start",events:{drag:this.onStartHandleDrag,dragEnd:this.onDragEnd}}),this.endDraggable=new yi(this.element,{filter:".k-draghandle-end",events:{drag:this.onEndHandleDrag,dragEnd:this.onDragEnd}})}destroyDraggable(){this.startDraggable.destroy(),this.endDraggable.destroy()}initNavigationService(){this.startNavigationService=new ve(this.startHandle),this.endNavigationService=new ve(this.endHandle),this.startNavigationService.bind(lq,this.onStartHandleNavigate),this.endNavigationService.bind(lq,this.onEndHandleNavigate)}destroyNavigationService(){this.startNavigationService.destroy(),this.endNavigationService.destroy()}changeValue(t,e){var i=null===t?this.options.min:t,n=null===e?this.options.min:e;this.setSliderStart(Math.max(i,this.options.min)),this.setSliderEnd(Math.max(n,this.options.min,i)),this.invokeChangeValue({isChangeCommitted:!0},this.startValue,this.endValue)}}function hq(t,e){Zt(cq,t,e)}function uq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pq=[fe.ENTER,fe.SPACE,fe.HOME,fe.END,fe.ARROWDOWN,fe.ARROWUP,fe.ARROWLEFT,fe.ARROWRIGHT],dq=".k-child-animation-container";class fq extends H{constructor(t,e){super(t,e),uq(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),uq(this,"onFocus",(()=>{this.invokeFocus()})),uq(this,"onFocusOut",(()=>{this.invokeFocusOut()})),uq(this,"onClick",(()=>{this.invokeClick()})),this.popup=G(e.popupId),this.options=e,this.bindEvents(),this.initNavigationService()}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(pq,this.onKeyDown)}bindEvents(){this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("focusout",this.onFocusOut),this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("focusout",this.onFocusOut),this.element.removeEventListener("click",this.onClick)}destroy(){this.unbindEvents(),super.destroy(),this.popup=null}hasParentPopupWithDisplayNone(t){if("none"===t.style.display)return!0;var e=t.closest(dq)!==t?t.closest(dq):null,i=e!==t?e:null;return i&&this.hasParentPopupWithDisplayNone(i)}focusNode(){this.element&&(this.hasParentPopupWithDisplayNone(this.element)?nt(this.element):document.activeElement!==this.element&&this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}invokeClick(){this.invokeMethodAsync(this.options.jsinterop.click)}}function gq(t,e){Zt(fq,t,e)}function mq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yq="keydown",vq=[de.ARROWLEFT,de.ARROWRIGHT,de.ARROWUP,de.ARROWDOWN,de.HOME,de.END,de.ENTER,de.SPACE];class bq extends H{constructor(t,e){super(t,e),mq(this,"options",{isPartOfWizard:!1}),mq(this,"onKeyDown",(t=>{var e=vq.includes(t.keyCode),i=t.shiftKey?this.isFirstStepFocused():this.isLastStepFocused(),n=t.keyCode===de.TAB&&!this.options.isPartOfWizard&&!i;(e||n)&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(yq,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(yq,this.onKeyDown)}focusStep(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e&&e.focus()}getFocusedStep(){var t=this.element.querySelector("a[tabindex='0']");if(t&&t.parentElement)return t.parentElement}isFirstStepFocused(){var t=this.getFocusedStep();return Q("k-step-first",t)}isLastStepFocused(){var t=this.getFocusedStep();return Q("k-step-last",t)}}function wq(t,e){Zt(bq,t,e)}function xq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Sq="keydown",kq="wheel",Cq="nearest",Aq="horizontal",_q="vertical",Tq=[de.ARROWUP,de.ARROWDOWN],Oq=[de.ARROWLEFT,de.ARROWRIGHT],Eq=[de.HOME,de.END];class Mq extends H{constructor(t,e){super(t,e),xq(this,"options",{dotNetInstance:null,orientation:Aq,scrollable:!1,jsinterop:{updateScrollButtons:null}}),xq(this,"onKeyDown",(t=>{(this.isVertical()?Tq:Oq).concat(Eq).includes(t.keyCode)&&t.preventDefault()})),xq(this,"onMouseWheel",(t=>{var e=t.deltaY>0?10:-10;t.preventDefault(),this.scrollTabs(e)})),xq(this,"onResize",(()=>{this.updateScrollButtons()})),this.extendOptions(e),this.tabList=this.element.querySelector(".k-tabstrip-items"),this.bindEvents(),this.options.scrollable&&this.initResizeService()}destroy(){this.unbindEvents(),this.destroyResizeService(),super.destroy()}setOptions(t){super.setOptions(t),this.tabList.removeEventListener(kq,this.onMouseWheel),t.scrollable?(this.initResizeService(),this.tabList.addEventListener(kq,this.onMouseWheel)):this.destroyResizeService()}bindEvents(){this.tabList.addEventListener(Sq,this.onKeyDown),this.options.scrollable&&this.tabList.addEventListener(kq,this.onMouseWheel)}unbindEvents(){this.tabList.removeEventListener(Sq,this.onKeyDown),this.options.scrollable&&this.tabList.removeEventListener(kq,this.onMouseWheel)}initResizeService(){this.resizeService||(this.resizeService=new Bi({element:this.tabList,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}focusTab(t){var e=this.tabList.querySelectorAll(".k-item")[t];e&&(this.scrollElementIntoView(e),e.focus())}isVertical(){return this.options.orientation===_q}scrollTabs(t){this.isVertical()?this.tabList.scrollTop+=t:this.tabList.scrollLeft+=t,this.updateScrollButtons()}scrollElementIntoView(t){t.scrollIntoView&&t.scrollIntoView({inline:Cq,block:Cq})}updateScrollButtons(){var t,e,i,n=this.tabList;this.isVertical()?(t=n.scrollTop,e=n.scrollHeight,i=n.offsetHeight):(t=n.scrollLeft,e=n.scrollWidth,i=n.offsetWidth),this.invokeMethodAsync(this.options.jsinterop.updateScrollButtons,{prevButtonEnabled:t>0,nextButtonEnabled:e-i>t,showButtons:e>i})}handleVisibleTabsChange(){this.updateScrollButtons()}}function Pq(t,e){Zt(Mq,t,e)}function Iq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Fq="keydown",Dq="mousedown",Rq=[de.ARROWLEFT,de.ARROWRIGHT,de.ARROWUP,de.ARROWDOWN,de.HOME,de.END,de.ENTER];class Lq extends H{constructor(t,e){super(t,e),Iq(this,"options",{componentSelector:".k-treeview",dropOptions:{dropClueTargetSelector:".k-treeview-mid,.k-treeview-top,.k-treeview-bot",dropClueEmptySelector:"",allowDropOver:!0,offsetDropClue:!0}}),Iq(this,"onKeyDown",(t=>{Rq.includes(t.keyCode)&&t.preventDefault()})),Iq(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),Iq(this,"createHint",(t=>{var e=t.textContent;return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),Iq(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.drop,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),treeviewDotNetInstance:this.getDestinationTree(t.destinationElement),destinationComponentId:t.destinationComponentId,destinationIndex:t.destinationIndex,dropPosition:t.dropPosition})})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),this.draggable&&this.draggable.destroy(),super.destroy()}bindEvents(){this.element.addEventListener(Fq,this.onKeyDown),this.element.addEventListener(Dq,this.onMouseDown),this.options.draggable&&this.createDraggable()}unbindEvents(){this.element.removeEventListener(Fq,this.onKeyDown),this.element.removeEventListener(Dq,this.onMouseDown)}setOptions(t){this.options.draggable!==t.draggable&&(t.draggable?this.createDraggable():this.draggable.destroy()),this.extendOptions(t)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}createDraggable(){this.element&&(this.draggable=new _i(this.element,{group:".k-treeview",filter:".k-treeview-leaf",itemSelector:".k-treeview-item",hint:this.createHint,events:{itemDrop:this.onItemDrop}}))}getDestinationTree(t){var e=ne(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropSettings(){return this.options.dropOptions}getDropItemIndex(t){return t?t.closest(".k-treeview-item").getAttribute("data-treeindex"):""}getId(){return this.element.id}}function Nq(t,e){Zt(Lq,t,e)}function Bq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var jq=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.HOME,fe.END],zq=[fe.ARROWDOWN,fe.ARROWUP,fe.HOME,fe.END,fe.ENTER,fe.ESC],Uq="".concat(ge.ALT," ").concat(fe.ARROWDOWN),$q=".k-overflow-anchor",Hq=":not([disabled]):not([data-focusable='false']):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button)",Vq="a[href], area[href], input".concat(Hq,", select").concat(Hq,", textarea").concat(Hq,", button").concat(Hq,", [tabindex]").concat(Hq);class qq extends H{constructor(t,e){super(t,e),Bq(this,"options",{adaptive:!1,popupId:null,skipedOverflowItemIndexes:[],navigable:!0,jsinterop:{populateCollapsedItems:""}}),Bq(this,"onOverflowAnchorKeyDown",(()=>{ie(this.options.popupId).openAsync()})),Bq(this,"onOverflowPopupKeyDown",(t=>{var e=document.activeElement;if(e&&t.name===fe.ENTER)return e.click(),void this.focusPopupAnchor();t.name===fe.ESC&&(ie(this.options.popupId).close(),this.focusPopupAnchor());var i=G(this.options.popupId).querySelectorAll(".k-item:not(.k-separator):not(.k-disabled)"),n=i.length-1,r=[...i].indexOf(e),s=-1;t.name===fe.ARROWDOWN&&r===n||t.name===fe.HOME?s=0:t.name===fe.ARROWUP&&0===r||t.name===fe.END?s=n:t.name===fe.ARROWDOWN?s=r+1:t.name===fe.ARROWUP&&(s=r-1),-1!==s&&(this.setTabIndices(i,s),i[s].focus())})),Bq(this,"onKeyDown",(t=>{var e=Array.from(this.element.querySelectorAll(Vq)).filter((t=>""===t.style.display&&""===t.parentElement.style.display)),i=this.element.querySelector(":focus"),n=e.length-1,r=[...e].indexOf(i),s=-1;t.name===fe.ARROWRIGHT&&r===n||t.name===fe.HOME?s=0:t.name===fe.ARROWLEFT&&0===r||t.name===fe.END?s=n:t.name===fe.ARROWRIGHT?s=r+1:t.name===fe.ARROWLEFT&&(s=r-1),-1!==s&&(this.setTabIndices(e,s),e[s].focus())})),Bq(this,"onResize",(()=>{this.positionOverflowingItems()})),this.extendOptions(e),this.options.navigable&&this.initNavigationServices(),this.options.adaptive&&(this.setCollapsibleItems(),this.initResizeService(),this.positionOverflowingItems())}setOptions(t){super.setOptions(t[0]),this.options.navigable?this.initNavigationServices():this.destroyNavigationServices(),this.options.adaptive?(this.setCollapsibleItems(),this.positionOverflowingItems(),this.initResizeService(),this.initOverflowNavigationServices()):(this.collapsibleItems&&this.collapsibleItems.forEach((t=>this.setItemDisplay(t.item,""))),this.destroyOverflowNavigationServices(),this.destroyResizeService())}destroy(){this.destroyOverflowNavigationServices(),this.destroyResizeService(),this.destroyNavigationServices(),super.destroy()}initResizeService(){this.resizeService=new Bi({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}destroyOverflowNavigationServices(){this.overflowAnchorNavigationService&&this.overflowAnchorNavigationService.destroy(),this.popupNavigationService&&this.popupNavigationService.destroy()}getItems(){return Array.from(this.element.children)}initNavigationServices(){this.setTabIndices(this.element.querySelectorAll(Vq),0),null==this.navigationService&&(this.navigationService=new ve(this.element),this.navigationService.bind(jq,this.onKeyDown))}destroyNavigationServices(){this.navigationService&&this.navigationService.destroy()}initOverflowNavigationServices(){var t=this.element.querySelector($q);this.overflowAnchorNavigationService=new ve(t),this.overflowAnchorNavigationService.bind(Uq,this.onOverflowAnchorKeyDown);var e=G(this.options.popupId);this.popupNavigationService=new ve(e),this.popupNavigationService.bind(zq,this.onOverflowPopupKeyDown)}setTabIndices(t,e){t.forEach(((t,i)=>{var n=e===i?0:-1;t.setAttribute("tabindex",n)}))}getWidths(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),n=t.filter((t=>!Array.from(t.classList).includes("k-spacer"))).map((t=>t.offsetWidth)),r=n.filter((t=>t)).reduce(((t,e)=>t+e+i),0),s=getComputedStyle(this.element);return{totalItemsWidth:r,elementInternalWidth:this.element.clientWidth-parseInt(s.paddingLeft)-parseInt(s.paddingRight)}}setCollapsibleItems(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),n=t.slice(0,t.length-1).map(((t,e)=>{var n=t.offsetWidth+i,r=this.options.skipedOverflowItemIndexes.includes(e),s=Array.from(t.classList).includes("k-spacer");return{item:t,offsetWidth:n,expanded:!0,collapsible:!r&&!s,index:e}}));this.collapsibleItems=n}collapseItem(t){this.setItemDisplay(t.item,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t.item,""),t.expanded=!0}setItemDisplay(t,e){t.style.display=e}focusFirstOverflowItem(){var t=G(this.options.popupId).querySelector(".k-item:not(.k-separator):not(.k-disabled)");t.setAttribute("tabindex",0),t.focus()}focusPopupAnchor(){var t=this.element.querySelector($q);t&&t.focus()}positionOverflowingItems(t){if(this.collapsibleItems&&this.collapsibleItems.length){var{totalItemsWidth:e,elementInternalWidth:i}=this.getWidths(),n=[...this.collapsibleItems].reverse().find((t=>t.expanded&&t.collapsible)),r=this.collapsibleItems.find((t=>!t.expanded));n&&e>i&&!0!==t?(this.collapseItem(n),this.positionOverflowingItems(!1)):r&&e+r.offsetWidth<i&&!1!==t&&(this.expandItem(r),this.positionOverflowingItems(!0));var s=this.collapsibleItems.filter((t=>!t.expanded)).map((t=>t.index));this.invokeMethodAsync(this.options.jsinterop.populateCollapsedItems,s||[])}}}function Wq(t,e){Zt(qq,t,e)}class Xq extends va{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{click:"onObserverMapClick",pan:"onObserverMapPan",panEnd:"onObserverMapPanEnd",markerMouseEnter:"onObserverMarkerMouseEnter",markerMouseLeave:"onObserverMarkerMouseLeave",markerClick:"onObserverMarkerClick",markerActivate:"onObserverMarkerActivate",shapeClick:"onObserverShapeClick"})}}function Gq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Kq extends rE{constructor(t,e){super(t,e),Gq(this,"options",{markerTooltipId:"",jsinterop:{onObserverMapClick:"",onObserverMapPan:"",onObserverMapPanEnd:"",onObserverMarkerClick:"",onObserverMarkerMouseEnter:"",onObserverMarkerMouseLeave:"",onObserverMarkerActivate:"",onObserverShapeClick:""}}),Gq(this,"onObserverMapClick",(t=>{var e=this.createMapClickEventArgs(t);this.invokeMapClickAsync(e)})),Gq(this,"onObserverMapPan",(t=>{this.hideMarkerTooltip(t)})),Gq(this,"onObserverMapPanEnd",(()=>{this.showMarkerTooltip(this._hoveredMarker)})),Gq(this,"onObserverMarkerActivate",(t=>{this.repositionMarkerTooltip(t.marker)})),Gq(this,"onObserverMarkerClick",(t=>{var e=this.createMarkerClickEventArgs(t);this.invokeMarkerClickAsync(e)})),Gq(this,"onObserverMarkerMouseEnter",(t=>{this._hoveredMarker=t.marker;var e=this.createMarkerEventArgs(t);this.invokeMarkerMouseEnterAsync(e)})),Gq(this,"onObserverMarkerMouseLeave",(()=>{this._hoveredMarker=null})),Gq(this,"onObserverShapeClick",(t=>{var e=this.createShapeClickEventArgs(t);this.invokeShapeClickAsync(e)})),this.extendOptions(e),this.createInstanceObserver(),this.initWidget()}destroy(){this.destroyInstanceObserver(),this._hoveredMarker=null,this.widget&&(this.widget.destroy(),this.widget=null)}getThemeOptions(){return{}}getWidgetConstructor(){return jO}createInstanceObserver(){this.instanceObserver=new Xq(this)}destroyInstanceObserver(){this.instanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeMapClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMapClick,t)}invokeMarkerClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerClick,t)}invokeMarkerMouseEnterAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerMouseEnter,t)}invokeShapeClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShapeClick,t)}createMapClickEventArgs(t){var e=t.location||{lat:null,lng:null},i={location:{latitude:e.lat,longitude:e.lng}};return this.extendWithOriginalMouseEvent(i,t)}createMarkerClickEventArgs(t){var e=this.createMarkerEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createShapeClickEventArgs(t){var e=this.createShapeEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createMarkerEventArgs(t){return{layerIndex:t.layerIndex,markerIndex:t.markerIndex}}createShapeEventArgs(t){var e=t.shape.dataItem,i=t.shape.location&&t.shape.value;return{layerIndex:t.layerIndex,shapeIndex:t.shapeIndex,geoJsonDataItem:i?null:e}}getOriginalEvent(t){var e=t.originalEvent;return(e||{}).event||e}extendWithOriginalMouseEvent(t,e){var i=this.getOriginalEvent(e);return u(t,{eventArgs:I(i)})}repositionMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor===t.element&&e.repositionPopup()}}showMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor&&i.anchor===t.element&&e.open(i.anchor)}}hideMarkerTooltip(){var t=this.getMarkerTooltip();if(t){var e=t.getPopupComponent();e&&e.anchor&&t.close(e.anchor)}}getMarkerTooltip(){return ie(this.options.markerTooltipId)}}function Yq(t,e,i){var n=G(t);if(n){var r=Jq(e),s=ie(t),o=u(r,i);if(s)te(s,o);else re(t,new Kq(n,o))}}ra.register(lo);var Jq=t=>{var e=Zq(t),i=Qq(e);return e.layers=i||[],e.layers.forEach((t=>{"shape"===t.type&&t.shapeSettings.style?t.style=t.shapeSettings.style:"bubble"===t.type&&t.bubbleSettings.style&&(t.style=t.bubbleSettings.style)})),e},Zq=t=>{var e=JSON.parse(t),i=Qq(e);return e.layers=i,e},Qq=t=>{var e=t.layers||[];return e.forEach((t=>{"string"==typeof t.data&&(t.data=JSON.parse(t.data))})),e};function tW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class eW extends H{constructor(t,e){super(t,e),tW(this,"options",{media:"",jsinterop:{change:""}}),tW(this,"onMediaChange",(t=>{this.invokeMethodAsync(this.options.jsinterop.change,t.matches)})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.mediaQueryList=window.matchMedia(this.options.media),this.mediaQueryList.addEventListener("change",this.onMediaChange)}unbindEvents(){this.mediaQueryList&&this.mediaQueryList.removeEventListener("change",this.onMediaChange)}getMatches(){return this.mediaQueryList.matches}}function iW(t,e){return Zt(eW,t,e),ie(t).getMatches()}function nW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var rW="keydown",sW="focusin",oW="focusout",aW=[de.ARROWLEFT,de.ARROWRIGHT,de.HOME,de.END,de.PAGE_UP,de.PAGE_DOWN,de.ENTER];class lW extends H{constructor(t,e){super(t,e),nW(this,"options",{dotNetInstance:null,adaptive:!0,navigable:!0,jsinterop:{disableInnerNavigation:"",enableInnerNavigation:""}}),nW(this,"onResize",(()=>{if(this.element){var t=Ut(this.element),e=this.element.offsetWidth;this.shrink(e,t),this.stretch(e,t)}})),nW(this,"onKeyDown",(t=>{aW.includes(t.keyCode)&&t.preventDefault()})),nW(this,"onFocusIn",(t=>{!this.innerNavigationEnabled&&t.target&&t.target!==this.element&&(this.enableTabKeyTrap(),this.enableInnerNavigation())})),nW(this,"onFocusOut",(t=>{this.innerNavigationEnabled&&t.target&&t.relatedTarget&&(!this.element.contains(t.relatedTarget)||this.element===t.relatedTarget)&&(this.disableTabKeyTrap(),this.disableInnerNavigation())})),this.extendOptions(e),e.navigable&&(this.bindEvents(),this.innerNavigationEnabled=!1),e.adaptive&&(this.setAdaptiveItems(),this.initResizeService())}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),this.destroyResizeService(),super.destroy()}bindEvents(){this.element.addEventListener(rW,this.onKeyDown),this.element.addEventListener(sW,this.onFocusIn),this.element.addEventListener(oW,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(rW,this.onKeyDown),this.element.removeEventListener(sW,this.onFocusIn),this.element.removeEventListener(oW,this.onFocusOut)}setOptions(t){super.setOptions(t),t.adaptive?(this.setAdaptiveItems(),this.initResizeService()):this.destroyResizeService()}initResizeService(){this.resizeService=new Bi({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}focusElement(t){if(t){this.adaptiveSelectItem&&this.adaptiveSelectItem.visible&&this.adaptiveSelectItem.element.focus();var{index:e}=t,i=this.element.querySelector((t=>"[data-index='".concat(t,"']"))(e));i&&i.focus()}else this.element.focus()}disableInnerNavigation(){this.innerNavigationEnabled=!1,this.invokeMethodAsync(this.options.jsinterop.disableInnerNavigation)}enableInnerNavigation(){this.innerNavigationEnabled=!0,this.invokeMethodAsync(this.options.jsinterop.enableInnerNavigation)}setAdaptiveItems(){var t=this.element.querySelectorAll("[data-adaptive=true]");this.adaptiveItems=[...t].map((t=>({element:t,width:t.offsetWidth,visible:!0}))),this.setAdaptiveSelect()}setAdaptiveSelect(){var t=this.element.querySelector(".k-pager-numbers-wrap .k-dropdownlist");t&&(K(t,"inline-flex"),this.adaptiveSelectItem={element:t,width:zt(t),visible:!1},Y(t))}shrink(t,e){var i=e,n=this.adaptiveItems.filter((t=>t.visible));if(t<i)for(var r=n.length-1;r>=0;r--){var s=n[r];if(t>i)break;if(s.width=s.element.offsetWidth,Q("k-pager-numbers",s.element)){if(s.width<=this.adaptiveSelectItem.width)continue;this.adaptiveSelectItem.visible=!0,K(this.adaptiveSelectItem.element,"inline-flex")}this.hideItem(s),i-=s.width}}stretch(t,e){var i=e,n=this.adaptiveItems.filter((t=>!t.visible));if(t>i)for(var r=0;r<n.length;r++){var s=n[r];if(Q("k-pager-numbers",s.element)){t>i-this.adaptiveSelectItem.width+s.width&&(this.showItem(s),i+=s.width,this.adaptiveSelectItem.visible=!1,Y(this.adaptiveSelectItem.element));break}if(t<i+s.width)break;this.showItem(s),i+=s.width}}showItem(t){K(t.element),t.visible=!0}hideItem(t){Y(t.element),t.visible=!1}enableTabKeyTrap(){this.tabKeyTrap=new we(this.element,'[tabindex]:not(.k-button):not(span[style*="display: none;"] > .k-dropdownlist):not([style*="display: none;"])'),this.tabKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap()}}function cW(t,e){Zt(lW,t,e)}var hW="keydown",uW=[de.ARROWLEFT,de.ARROWRIGHT,de.ARROWUP,de.ARROWDOWN,de.HOME,de.END,de.ENTER,de.SPACE];class pW extends H{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{uW.includes(t.keyCode)&&t.target.matches("li.k-panelbar-item")&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(hW,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(hW,this.onKeyDown)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}}function dW(t,e){Zt(pW,t,e)}class fW{constructor(t,e){this.options=t,this.viewer=e}createPromise(){}loadAsync(){}isLoaded(){}setState(){}resetState(){}renderAsync(){}renderTextLayer(){}resize(){}getSize(){}setSize(){}getViewport(){}getPrintContentAsync(){}getTextLayer(){}}var gW=()=>{var t,e,i=new Promise((function(i,n){t=i,e=n}));return i.resolve=t,i.reject=e,i},mW=t=>Promise.all(t),yW=(t,e)=>{var i,n=0;if(!e||e<=0)return t;var r=function(){var r=this,s=Number(new Date)-n,o=arguments;function a(){t.apply(r,o),n=Number(new Date)}if(!n)return a();i&&clearTimeout(i),s>e?a():i=setTimeout(a,e-s)};return r.cancel=()=>{clearTimeout(i)},r},vW=__webpack_require__(299);class bW extends fW{constructor(t,e){super(t,e),this.viewer=e,this.options=t,this.pageNumber=t.number,this.width=t.width,this.height=t.height,this.resetState(),this.initElement(),this.initDrawingElement()}initElement(){this.element=j('\n            <div class="k-page" data-page-number="'.concat(this.options.number,'" />\n        '))}initDrawingElement(){this.canvas=j('\n            <canvas style="width: 100%; height: 100%;" />\n        '),this.canvas.width=this.width,this.canvas.height=this.height,this.element.appendChild(this.canvas)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({loaded:!1,rendered:!1,zoomLevel:1.25})}createPromise(){return gW()}loadAsync(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.25,e=arguments.length>1?arguments[1]:void 0,i=this,n=this.createPromise();if(i._page&&i.state.zoomLevel===t&&!e)return n.resolve(i);if(i._page&&i.state.zoomLevel&&i.state.zoomLevel!==t&&!e)return i.state.zoomLevel=t,i.state.renderLoadPromise=i.renderAsync(t),i.state.renderLoadPromise.then((()=>{n.resolve(i)})),n;i.setState({zoomLevel:t});var r=Math.max(0,i.pageNumber-1);return i.viewer.state.pagePromises[r].then((e=>{i._page=e,i.state.renderLoadPromise=i.renderAsync(t),i.setState({loaded:!0}),i.state.renderLoadPromise.then((()=>{n.resolve(i)}))})),n}isLoaded(){return this.state.loaded}renderAsync(t){if(!this._page)return gW().resolve(this);var e=this,i=this.canvas.getContext("2d"),n=this._page.getViewport({scale:t});return this.state.zoomLevel=t,this.canvas.width=n.width,this.canvas.height=n.height,this.state.renderTask&&(this.state.renderTask.cancel(),this.state.renderTask=null),this.setSize({width:n.width,height:n.height}),this.state.renderTask=this._page.render({canvasContext:i,viewport:n}),this.renderTextLayer(n),this.state.renderTask.promise.then((function(){e.state.renderTask=null,e.setState({rendered:!0})})).catch((function(){}))}resize(t){var e=this.element.getBoundingClientRect();this.setSize({width:Math.min(e.width*t,this.width),height:Math.min(e.height*t,this.height)})}setSize(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};this.element.style.width=t.width+"px",this.element.style.height=t.height+"px"}getSize(){var t=this.element.getBoundingClientRect();return{width:t.width,height:t.height}}getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scale:1};return this._page?this._page.getViewport(t):{width:0,height:0}}renderTextLayer(t){var e=this,i=e._page;this.destroyTextLayer(),this.initTextLayer(),i.getTextContent({normalizeWhitespace:!0}).then((function(i){e.textLayer.style.width=t.width+"px",e.textLayer.style.height=t.width+"px",e.resetTextLayerContent(),(0,vW.renderTextLayer)({textContent:i,container:e.textLayer,viewport:t,textDivs:[],enhanceTextSelection:!0})}))}initTextLayer(){this.textLayer=j("\n            <div class='k-text-layer' />\n        "),this.element.appendChild(this.textLayer)}destroyTextLayer(){this.removeTextLayer()}removeTextLayer(){this.textLayer&&this.textLayer.parentNode&&this.textLayer.parentNode.removeChild(this.textLayer)}resetTextLayerContent(){this.textLayer.innerHTML=""}getPrintContentAsync(){var t=this.canvas,e=this.createPromise(),i=new Image;return i.src=t.toDataURL(),i.width=this.width,i.height=this.height,i.onload=()=>{e.resolve(i)},e}getTextLayer(){return this.textLayer}}class wW{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{}),this.extendOptions(t)}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}loadDocumentAsync(){}readAllPagesAsync(){}readPagesAsync(){}getAllPagesAsync(){}getPageAsync(){}fetchDocumentAsync(){}getDocumentAsync(){}}__webpack_require__(16);var xW=window.ArrayBuffer;class SW extends wW{constructor(t){super(t),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{}),this.extendOptions(t)}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}readAllPagesAsync(t){var e=this.getAllPagesAsync(t);return mW(e)}readPagesAsync(t){return mW(t)}getAllPagesAsync(t){for(var e=[],i=1;i<=t.numPages;i++){var n=this.getPageAsync(t,i);e.push(n)}return e}getPageAsync(t,e){return t.getPage(e)}fetchDocumentAsync(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:null,url:null},e={data:null,url:null};if(t instanceof xW)e.data=t;else if(v(t)||v(t.data)){var i=(t=>{var e=t.replace(/^(data:application\/pdf;base64,)/gi,"");try{return window.atob(e)}catch(t){return null}})(v(t.data)?t.data:t);i?e.data=i:e.url=t}else p(t)&&(e=t);return e.data||e.url?this.getDocumentAsync(e):gW()}getDocumentAsync(t){return t.verbosity=0,(0,vW.getDocument)(t).promise}}var kW="actualWidth",CW="fitToWidth",AW="fitToPage",_W=3;var TW=F("char-index"),OW=F("match-index");class EW{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{highlightClass:"k-search-highlight",highlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textContainers:[]}),this.options=t,this.extendOptions(t),this.resetState()}destroy(){this.clearSearch()}extendOptions(t){this.options=g(this.options,t)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({text:"",textNodes:[],charIndex:0,activeMatchIndex:0,matches:[]})}search(t){var e,{text:i,matchCase:n}=t,r=new RegExp(i,n?"g":"ig");if(this.shouldTransformText()&&this.transformTextForSearch(),this.state.matches=[],this.state.activeMatchIndex=0,this.removeIndicators(),""!==i){for(e=r.exec(this.state.text);e;)this.state.matches.push({startOffset:e.index,endOffset:e.index+e[0].length}),e=r.exec(this.state.text);return this.highlightAllMatches(),this.addActiveMatchMark(),this.state.matches}}clearSearch(){this.removeIndicators(),this.restoreOriginalText()}restoreOriginalText(){this.forEachTextContainer((t=>{w(t.querySelectorAll("span:not(."+this.options.charClass+")")).forEach((t=>{t.innerHTML=t.textContent}))}))}shouldTransformText(){return!this.state.text}transformTextForSearch(){this.state.textNodes=[],this.state.charIndex=0,this.state.text="",this.forEachTextContainer((t=>{this.extractTextNodes(t)})),this.transformTextNodesForSearch(this.state.textNodes)}extractTextNodes(t){if(t.nodeType===_W)this.state.textNodes.push(t);else for(var e=0;e<t.childNodes.length;e++)this.extractTextNodes(t.childNodes[e])}transformTextNodesForSearch(t){for(var e=0;e<t.length;e++)this.transformTextNodeForSearch(t[e])}transformTextNodeForSearch(t){var e=t.textContent;if(!(e.length<=0)){this.state.text=this.state.text+e;var i=j("<span></span>");Vt(t,i);var n=this.splitTextByChars(e);i.innerHTML=n,Xt(i.childNodes[0])}}splitTextByChars(t){for(var e="",i=0;i<t.length;i++)e+="<span class='"+this.options.charClass+"' "+TW+"="+this.state.charIndex+">"+t[i]+"</span>",this.state.charIndex++;return e}forEachTextContainer(t){for(var e=0;e<this.options.textContainers.length;e++){t(this.options.textContainers[e],e)}}highlightAllMatches(){this.state.matches.forEach(((t,e)=>{this.addMatchHighlight(t.startOffset,t.endOffset,e)}))}addMatchHighlight(t,e,i){for(var n=this,r=function(t){n.forEachTextContainer((e=>{w(e.querySelectorAll(L(n.options.charClass+"["+TW+"='"+t+"']"))).forEach((t=>{J(n.options.highlightClass,t),t.setAttribute(OW,i)}))}))},s=t;s<e;s++)r(s)}removeMatchHighlights(){this.forEachTextContainer((t=>{w(t.querySelectorAll(L(this.options.highlightClass))).forEach((t=>{Z(this.options.highlightClass,t),t.removeAttribute(OW)}))}))}addActiveMatchMark(){this.state.activeMatchIndex||0===this.state.activeMatchIndex?this.state.activeMatchIndex>this.state.matches.length?this.state.activeMatchIndex=this.state.matches.length:this.removeActiveMatchMark():this.state.activeMatchIndex=0;var t=this.getMarkHtml();this.forEachTextContainer((e=>{w(e.querySelectorAll(L(this.options.charClass+"["+OW+"='"+this.state.activeMatchIndex+"']"))).forEach((e=>{Wt(e,t)}))}))}removeActiveMatchMark(){this.forEachTextContainer((t=>{var e=w(t.querySelectorAll(L(this.options.highlightMarkClass))).flatMap((t=>w(t.childNodes)));Gt(e)}))}removeIndicators(){this.removeActiveMatchMark(),this.removeMatchHighlights()}markNextMatch(){this.markNextMatchIndex(),this.addActiveMatchMark()}markPreviousMatch(){this.markPreviousMatchIndex(),this.addActiveMatchMark()}markNextMatchIndex(){this.moveActiveMatchIndex(1)}markPreviousMatchIndex(){this.moveActiveMatchIndex(-1)}moveActiveMatchIndex(t){this.state.activeMatchIndex+=t,this.state.activeMatchIndex<0?this.state.activeMatchIndex=Math.max(this.state.matches.length-1,0):this.state.activeMatchIndex>this.state.matches.length-1&&(this.state.activeMatchIndex=0)}getActiveMatchElement(){var t;return this.forEachTextContainer((e=>{var i=e.querySelector(L(this.options.highlightMarkClass));i&&(t=i)})),t}getMarkHtml(){return"<span class='".concat(this.options.highlightMarkClass,"'></span>")}}function MW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var PW=1e3/60,IW="scroll";class FW extends H{constructor(t,e){super(t,e),MW(this,"options",{scrollDirectionModifier:-1,panScrollThrottleDelay:PW,scrollThrottleDelay:PW,filter:"",events:{[IW]:T}}),MW(this,"onElementScroll",(()=>{var t=this.element;this.state.trackNextElementScroll?this.scrollTo(t.scrollLeft,t.scrollTop):this.state.trackNextElementScroll=!0})),MW(this,"OnDragStart",(t=>{if(this.state.dragStarted=!1,this.shouldTrackPanEvents()){var e,i,n=t.target||(t.originalEvent||{}).target;if(!this.options.filter||(e=n,i=this.options.filter,e&&i&&e.closest(i)))(t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()})(t),this.setState({dragStarted:!0,location:{pageX:t.pageX,pageY:t.pageY},locationDelta:{x:0,y:0}})}})),MW(this,"onDrag",(t=>{if(this.shouldTrackPanEvents()&&this.state.dragStarted){this.calculateEventLocationDelta(t),this.setState({location:{pageX:t.pageX,pageY:t.pageY}});var e=this.options.scrollDirectionModifier,i=this.element.scrollLeft+e*this.state.locationDelta.x,n=this.element.scrollTop+e*this.state.locationDelta.y;this.scrollTo(i,n)}})),MW(this,"onDragEnd",(()=>{this.shouldTrackPanEvents()})),this.extendOptions(e),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents()}extendOptions(t){this.options=g(this.options,t)}initDraggable(){this.destroyDraggable(),this.options.panScrollThrottleDelay>0?this.throttledOnDrag=yW(this.onDrag,this.options.panScrollThrottleDelay):this.throttledOnDrag=this.onDrag,this.draggable=new ui({mouseOnly:!1,press:this.OnDragStart,drag:this.throttledOnDrag,release:this.onDragEnd}),this.draggable.bindTo(this.element)}destroyDraggable(){this.draggable&&this.draggable.destroy&&(this.draggable.destroy(),this.throttledOnDrag&&this.throttledOnDrag.cancel&&(this.throttledOnDrag.cancel(),this.throttledOnDrag=null))}bindEvents(){this.bindDraggableEvents(),this.bindElementScroll()}bindDraggableEvents(){this.initDraggable()}bindElementScroll(){this.options.scrollThrottleDelay>0?this.throttledOnElementScroll=yW(this.onElementScroll,this.options.scrollThrottleDelay):this.throttledOnElementScroll=this.onElementScroll,this.element.addEventListener(IW,this.throttledOnElementScroll)}unbindEvents(){this.unbindElementScroll(),this.unbindDraggableEvents()}unbindDraggableEvents(){this.destroyDraggable()}unbindElementScroll(){this.throttledOnElementScroll&&this.throttledOnElementScroll.cancel&&(this.throttledOnElementScroll.cancel(),this.throttledOnElementScroll=null),this.element.removeEventListener(IW,this.throttledOnElementScroll)}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({trackPanEvents:!1,trackNextElementScroll:!1,location:{pageX:0,pageY:0},locationDelta:{x:0,y:0}})}enablePanEventsTracking(){this.state.trackPanEvents=!0,this.bindDraggableEvents()}disablePanEventsTracking(){this.unbindDraggableEvents(),this.state.trackPanEvents=!1}shouldTrackPanEvents(){return this.state.trackPanEvents}calculateEventLocationDelta(t){this.state.locationDelta={x:t.pageX-this.state.location.pageX,y:t.pageY-this.state.location.pageY}}scrollTo(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{trackScrollEvent:!0};i.trackScrollEvent||(this.state.trackNextElementScroll=!1),this.element.scrollLeft=t,this.element.scrollTop=e,i.trackScrollEvent&&this.trigger(IW,{scrollTop:this.element.scrollTop,scrollLeft:this.element.scrollLeft})}}function DW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RW="pdfjs",LW="error",NW="pagesRead",BW="pagesLoad",jW="pagesWheel",zW="printEnd",UW="scroll",$W=window.getComputedStyle;class HW extends H{constructor(t,e){super(t,e),DW(this,"options",{pdfServiceType:RW,fileData:[],page:1,fileDescriptor:{data:null,url:null},downloadFileName:"Document",minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,zoomBeforePrint:!1,zoomLevelForPrint:3,searchMatchScrollLeftOffset:0,searchMatchScrollTopOffset:-64,pageChangeScrollThreshold:.85,pageWheelThrottleDelay:200,messages:{errorMessages:{parseError:"PDF file fails to process.",notFound:"File is not found.",popupBlocked:"Popup is blocked."}},elementSelectors:{pageSelector:"k-page:not(.k-blank-page)",pagesContainerClass:"k-pdf-viewer-pages",documentContainerClass:"k-pdf-viewer-canvas",searchHighlightClass:"k-search-highlight",searchHighlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textElementSelector:"span[role='presentation']",renderedPageSelector:"k-page[data-page-number]",enabledTextSelectionClass:"k-enable-text-select",enabledPanningClass:"k-enable-panning"},events:{[NW]:T,[BW]:T,[jW]:T,[zW]:T,[LW]:T,[UW]:T}}),DW(this,"onPageScrollerScroll",(t=>{var e=this.pages.length,i=this.getPageNumberByScrollOffset(t.scrollTop),n=!1;i!==this.state.activePageNumber&&i>=1&&i<=e&&(n=!0,this.state.activePageNumber=i),this.trigger(UW,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,pageNumber:this.state.activePageNumber,isPageChanged:n})})),DW(this,"printDocumentAsync",(()=>{this.initPrintContainer();var t=this.renderPagesForPrintAsync(this.printContainer),e=this.createPromise();return mW(t).then((()=>{setTimeout((()=>{this.openPrintDialog(),e.resolve()}),16.666666666666668)})),e})),DW(this,"onPagesWheel",(t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();var e=$(t),i=e<0?1:-1,n=this.state.zoomLevel+i*this.options.zoomRate;this.zoom({zoomLevel:n}),this.trigger(jW,{zoomLevel:n,mousewheelDelta:e})}})),this.extendOptions(e),this.wrapper=this.element,this.resetState(),this.bindEvents(),this.initPdfService(),this.loadFile()}destroy(){this.unbindEvents(),this.destroySearchService()}extendOptions(t){this.options=g(this.options,t)}setOptions(t){this.options=t}bindEvents(){this.bindPagesWheel()}bindPagesWheel(){var t=this.getDocumentContainer();t&&(this.options.pageWheelThrottleDelay>0?this.throttledPagesWheel=yW(this.onPagesWheel,this.options.pageWheelThrottleDelay):this.throttledPagesWheel=this.onPagesWheel,t.addEventListener("wheel",this.throttledPagesWheel))}unbindEvents(){this.unbindPagesWheel()}unbindPagesWheel(){var t=this.getDocumentContainer();t&&(this.throttledPagesWheel&&this.throttledPagesWheel.cancel&&this.throttledPagesWheel.cancel(),t.removeEventListener("wheel",this.throttledPagesWheel))}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({activePageNumber:1,visiblePagesCount:1,pagePromises:[],downloadFilePromise:null,pdfDocument:null,zoomLevel:this.options.zoomLevel,zoomLevelType:this.options.zoomLevelType,zoomLevelBeforePrint:null})}createPromise(){return gW()}initPdfService(){this.shouldUsePdfJsService()&&(this.pdfService=new SW(this.options))}loadFile(t){this.loadDocument(t||this.options.fileDescriptor||{data:this.options.fileData,page:this.options.page})}loadDocument(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:null,url:null,page:1},e=this;e.fetchDocumentAsync(t).then((i=>{var n=[];e.state.pdfDocument=i,e.state.downloadFilePromise=e.createPromise(),i.getData().then((t=>{var i=new Blob([t],{type:"application/pdf"});e.state.downloadFilePromise.resolve({file:i})})),e.state.pagePromises=e.getAllPagesAsync(i),e.readPagesAsync(e.state.pagePromises).then((r=>{e.options.page=t.page||e.options.page||1;var s=e.options.page;n=r.map((t=>{var e=t.getViewport({scale:1.25});return{width:e.width,height:e.height}})),e.state.pdfDocumentDescriptor={pagesCount:i.numPages,pages:n},e.trigger(NW,{pagesCount:i.numPages}),e.clearPages(),e.createPages(),e.state.pdfDocumentDescriptor&&(s=s>=1&&s<=e.state.pdfDocumentDescriptor.pagesCount?s:1,e.scrollPagesContainer(0,0),e.loadAllPagesAsync().then((()=>{e.trigger(BW,{pagesCount:i.numPages}),e.activatePage(s)})).catch((t=>{e.triggerError(t)})))})).catch((t=>{e.triggerError(t)}))})).catch((t=>{e.triggerError(t)}))}triggerError(t){this.trigger(LW,t)}triggerZoomStart(t){this.trigger("zoomStart",{zoomLevel:t.zoomLevel,zoomLevelType:t.zoomLevelType})}triggerZoomEnd(t){this.trigger("zoomEnd",{zoomLevel:t.zoomLevel,zoomLevelType:t.zoomLevelType})}readPagesAsync(t){return this.pdfService.readPagesAsync(t)}readAllPagesAsync(t){return this.pdfService.readAllPagesAsync(t)}getAllPagesAsync(t){return this.pdfService.getAllPagesAsync(t)}getPageAsync(t,e){return this.pdfService.getPageAsync(t,e)}fetchDocumentAsync(t){return this.pdfService.fetchDocumentAsync(t)}clearDocument(){this.clearPages(),this.state.pdfDocument=null}clearPages(){var t=this.getDocumentContainer(),e=this.getPagesContainer();t&&e&&this.hasDocument()&&this.getPagesElements().forEach((t=>{e.removeChild(t)}))}createPages(){var t,e=this,i=e.state.pdfDocumentDescriptor;if(e.pages=[],e._visiblePages=[],e.initDocumentContainer(),i&&i.pagesCount){t=i.pages;for(var n=1;n<=i.pagesCount;n++){var r={number:n};r&&t.length&&(r=u(r,t[n-1]));var s=this.createPage(r);this.addPage(s)}}else e.renderNoDataIndicator()}createPage(t){var e;return this.shouldUsePdfJsService()&&(e=new bW(t,this)),e}addPage(t){this.pages.push(t),this._visiblePages.push(t);var e=this.getPagesContainer();e&&e.appendChild(t.element)}shouldUsePdfJsService(){return this.options.pdfServiceType===RW}initDocumentContainer(){this.documentContainer||(this.documentContainer=this.getDocumentContainer(),this.initPageScroller(this.documentContainer))}initPageScroller(t){!this.scroller&&t&&(this.scroller=this.createPageScroller(t,{filter:L(this.options.elementSelectors.pageSelector),events:{[UW]:this.onPageScrollerScroll}}))}createPageScroller(t,e){return new FW(t,e)}destroyPageScroller(){this.scroller&&(this.scroller.destroy(),this.scroller=null)}renderNoDataIndicator(){}activatePage(t){this.getPageByNumber(t)&&this.state.activePageNumber!==t&&(this.state.activePageNumber=t,this.isPageLoaded(t)?this.scrollToPage(t):this.loadAllPagesAsync.then((function(){this.scrollToPage(t)})))}loadAllPagesAsync(){for(var t=(this.pages||[]).length,e=[],i=0;i<t;i++){var n=i+1;e.push(this.loadPageAsync(n))}return mW(e)}loadPageAsync(t){var e=this.getPageByNumber(t);if(e)return e.loadAsync(this.options.zoomLevel)}isPageLoaded(t){var e=this.getPageByNumber(t);return k(e)}areAllPagesLoaded(){var t=this.state.pdfDocumentDescriptor,e=this.pages||[];return!(!t||!e)&&e.length===t.pagesCount}scrollToPage(t){var e=this.getScrollOffsetByPageNumber(t);this.scrollPagesContainer(0,e)}scrollPagesContainer(t,e){this.scroller&&this.scroller.element&&this.scroller.scrollTo(t,e,{trackScrollEvent:!1})}downloadFile(t){this.state.downloadFilePromise&&this.state.downloadFilePromise.then((e=>{var i=v(t)?t:this.options.downloadFileName,r=new FileReader;r.readAsDataURL(e.file),r.onload=()=>{(t=>{n(t.dataURI,t.fileName,t)})({dataURI:r.result,fileName:i+".pdf"})}}))}hasDocument(){return k(this.state.pdfDocument)}zoom(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomIn:!1,zoomOut:!1,zoomLevel:null,zoomLevelType:""},e=this,i=this.options,n=t.zoomLevelType,r=this.pages||[];if(this.hasDocument()&&!(r.length<=0)){var s=this.calculateZoomLevel(t);if(!(s<i.minZoom||s>i.maxZoom||this.triggerZoomStart({zoomLevel:s}))){this.options.zoomLevel=s,this.setState({zoomLevelType:n,zoomLevel:s});var o=[];return r.forEach((t=>{if(-1!==this._visiblePages.indexOf(t)&&t.isLoaded()){var e=t.renderAsync(s);o.push(e)}else t.resize(s)})),mW(o).finally((function(){e.triggerZoomEnd({zoomLevelType:n,zoomLevel:s})}))}}}calculateZoomLevel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{zoomLevel:null,zoomLevelType:""},e=this.options,i=this.getDocumentContainer(),n=this._visiblePages&&this._visiblePages.length>0?this._visiblePages[0].getSize():{width:0,height:0},r=t.zoomLevelType,s=t.zoomLevel||e.zoomLevel;return r===kW?s=1:r===CW?s=i.offsetWidth/(n.width/this.state.zoomLevel):r===AW&&(s=i.offsetHeight/(n.height/this.state.zoomLevel)),s}print(){if(this.hasDocument()){var t=this;if(this.options.zoomBeforePrint)this.cacheZoomLevelBeforePrint(),t.loadDocumentForPrintAsync().then((()=>{t.printDocumentAsync().then((()=>{t.trigger(zW)}))})).catch(t.triggerError).finally((()=>{t.restoreZoomLevelBeforePrint()}));else try{t.printDocumentAsync().then((()=>{t.trigger(zW)}))}catch(e){t.triggerError(e)}}}loadDocumentForPrintAsync(){for(var t=this.pages,e=[],i=[],n=this.createPromise(),r=0;r<t.length;r++){var s=t[r].loadAsync(this.options.zoomLevelForPrint,!0).then((t=>{i.push(t)}));e.push(s)}return mW(e).then((()=>{n.resolve(i)})),n}renderPagesForPrintAsync(t){for(var e=this.pages,i=[],n=0;n<e.length;n++){var r=e[n].getPrintContentAsync();r.then((e=>{var i=j("<div></div>");i.appendChild(e),t.appendChild(i)})),i.push(r)}return i}initPrintContainer(){this.printContainer=j("<div></div>")}openPrintDialog(){var t=this.pages,e=t[0].width,i=t[0].height,n=window.open("","","innerWidth="+e+",innerHeight="+i+"location=no,titlebar=no,toolbar=no");n&&n.document?(n.document.write(this.printContainer.innerHTML),n.document.close(),n.focus(),n.print()):this.triggerError({message:this.options.messages.errorMessages.popupBlocked})}cacheZoomLevelBeforePrint(){this.setState({zoomLevelBeforePrint:this.state.zoomLevel})}restoreZoomLevelBeforePrint(){this.zoom(this.state.zoomLevelBeforePrint)}search(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",matchCase:!1},e=this;if(e.areAllPagesLoaded())return e.searchText(t);e.loadAllPagesAsync().then((function(){return e.searchText(t)}))}clearSearch(){this.destroySearchService()}searchText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",matchCase:!1};return this.initSearchService(),this.searchService.search(t)}initSearchService(){if(!this.searchService){var t=this.getPagesTextLayers();this.searchService=new EW({textContainers:t||[],highlightClass:this.options.elementSelectors.searchHighlightClass,highlightMarkClass:this.options.elementSelectors.searchHighlightMarkClass,charClass:this.options.elementSelectors.charClass})}}destroySearchService(){this.searchService&&(this.searchService.destroy(),this.searchService=null)}getPageByNumber(t){return this.pages&&this.pages[t-1]}getPageNumberByScrollOffset(t){var e=this.getPagesContainer();if(e){for(var i=e.offsetTop,n=this.state.activePageNumber,r=i,s=0;s<this.pages.length;s++){var o=this.pages[s],a=this.getPageScrollOffset(o);if(r+a*this.options.pageChangeScrollThreshold>t){n=s+1;break}r+=a}return n=he(n,1,this.pages.length)}}getScrollOffsetByPageNumber(t){if(this.getPageByNumber(t)){this.state.activePageNumber=t;var e=this.pages.slice(0,Math.max(0,t-1)).map((t=>this.getPageScrollOffset(t))).reduce(((t,e)=>t+e),0);return e+0}}getPageScrollOffset(t){var e=t.getSize().height,i=$W(t.element);return e+parseFloat(i.marginTop)}getPagesTextLayers(){return(this.pages||[]).map(this.getPageTextLayer)}getPageTextLayer(t){return t.getTextLayer()}getPagesContainer(){return this.element.querySelector(L(this.options.elementSelectors.pagesContainerClass))}getDocumentContainer(){return this.wrapper.querySelector(L(this.options.elementSelectors.documentContainerClass))}getPagesElements(){var t=this.getDocumentContainer();return t?w(t.querySelectorAll(L(this.options.elementSelectors.pageSelector))):[]}goToNextSearchMatch(){if(this.searchService){this.searchService.markNextMatch();var t=this.searchService.getActiveMatchElement();this.scrollToSearchMatch(t)}}goToPreviousSearchMatch(){if(this.searchService){this.searchService.markPreviousMatch();var t=this.searchService.getActiveMatchElement();this.scrollToSearchMatch(t)}}scrollToSearchMatch(t){if(t){var e=t.closest(L(this.options.elementSelectors.charClass)),i=e?e.closest(this.options.elementSelectors.textElementSelector):null;if(i){var n=i.closest(L(this.options.elementSelectors.renderedPageSelector));if(n){var r=n.offsetLeft+-1*this.scroller.element.offsetLeft+i.offsetLeft+this.options.searchMatchScrollLeftOffset,s=n.offsetTop+-1*this.scroller.element.offsetTop+i.offsetTop+this.options.searchMatchScrollTopOffset;this.scrollPagesContainer(r,s)}}}}enableTextSelection(){this.disableScrollerEventsTracking(),J(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),Z(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}disableTextSelection(){this.enableScrollerEventsTracking(),Z(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),J(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}enableScrollerEventsTracking(){this.scroller&&this.scroller.enablePanEventsTracking()}disableScrollerEventsTracking(){this.scroller&&this.scroller.disablePanEventsTracking()}}function VW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qW=window.ArrayBuffer,WW="click",XW=".k-i-folder-open";class GW extends H{constructor(t,e){super(t,e),VW(this,"options",{dotNetInstance:null,pdfServiceType:"pdfjs",fileData:[],minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,fileSelect:{dataId:""},jsinterop:{onPagesRead:"",onPagesLoad:"",onPrintEnd:"",onZoomStart:"",onZoomEnd:"",onError:"",onScroll:""}}),VW(this,"onFileSelectAdd",(t=>{var e=this.getFileSelect(t);if(e){var i=(e.state.files||[])[0];i&&e.readBlob(i).then((t=>{this.loadFileFromArrayBuffer(t)}))}})),VW(this,"onOpenFileClick",(t=>{var e=t.currentTarget.querySelector(".k-upload[data-id]"),i=e?e.getAttribute("data-id"):null;this.openSelectFileDialog(i)})),VW(this,"onPagesRead",(t=>{this.invokePagesRead(t)})),VW(this,"onPagesLoad",(t=>{this.invokePagesLoad(t)})),VW(this,"onPrintEnd",(()=>{this.invokePrintEnd()})),VW(this,"onZoomStart",(t=>{this.invokeZoomStart(t)})),VW(this,"onZoomEnd",(t=>{this.invokeZoomEnd(t)})),VW(this,"onError",(t=>{this.invokeError(t)})),VW(this,"onScroll",(t=>{t.isPageChanged&&this.invokeScroll(t)})),VW(this,"invokePagesRead",(t=>{this.invokeMethodAsync(this.options.jsinterop.onPagesRead,{pagesCount:t.pagesCount})})),VW(this,"invokePagesLoad",(t=>{this.invokeMethodAsync(this.options.jsinterop.onPagesLoad,{pagesCount:t.pagesCount})})),VW(this,"invokePrintEnd",(()=>{this.invokeMethodAsync(this.options.jsinterop.onPrintEnd)})),VW(this,"invokeZoomStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomStart,{zoomLevel:t.zoomLevel})})),VW(this,"invokeZoomEnd",(t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomEnd,{zoomLevel:t.zoomLevel})})),VW(this,"invokeError",(t=>{this.invokeMethodAsync(this.options.jsinterop.onError,{message:t.message})})),VW(this,"invokeScroll",(t=>{this.invokeMethodAsync(this.options.jsinterop.onScroll,{page:t.pageNumber})})),this.extendOptions(e),this.wrapper=this.element,this.options.fileData=e.fileData,this.initWidget(),this.bindEvents(),this.loadFile({fileData:this.options.fileData})}destroy(){this.unbindEvents(),this.destroyWidget()}initWidget(){"pdfjs"===this.options.pdfServiceType&&(this.widget=this.createWidget(this.element,u(this.options,{zoomBeforePrint:!1,events:{pagesRead:this.onPagesRead,pagesLoad:this.onPagesLoad,printEnd:this.onPrintEnd,zoomStart:this.onZoomStart,zoomEnd:this.onZoomEnd,error:this.onError,scroll:this.onScroll}})))}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){return new HW(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t))}bindEvents(){var t=this.wrapper.querySelector(XW);this.openFileButton=t?t.closest(".k-button"):null,this.openFileButton&&this.openFileButton.addEventListener(WW,this.onOpenFileClick)}unbindEvents(){this.openFileButton&&this.openFileButton.removeEventListener(WW,this.onOpenFileClick)}loadFile(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fileData:[],page:1},e=t.fileData||{},i=t.page||1;e&&e.buffer instanceof qW?this.loadFileFromArrayBuffer(e.buffer,i):v(e)&&this.widget.loadFile({data:e,page:i})}loadFileFromArrayBuffer(t,e){this.widget&&t instanceof qW&&this.widget.loadFile({data:t,page:e})}getFileSelect(t){return ie(t||this.options.fileSelect.dataId)}openSelectFileDialog(t){var e=this.getFileSelect(t);e&&e.openSelectFileDialog()}downloadFile(t){var{fileName:e}=t;this.widget.downloadFile(e)}activatePage(t){this.widget.activatePage(t)}zoom(t){this.widget.zoom(t)}print(){this.widget.print()}search(t){return this.widget.search(t).length}clearSearch(){return this.widget.clearSearch()}goToNextSearchMatch(){this.widget.goToNextSearchMatch()}goToPreviousSearchMatch(){this.widget.goToPreviousSearchMatch()}enableTextSelection(){this.widget.enableTextSelection()}disableTextSelection(){this.widget.disableTextSelection()}}function KW(t,e){Zt(GW,t,e)}const YW="bottom",JW="center",ZW="middle",QW="left",tX="right",eX="top";const iX=function(t){var e=t.anchorRect,i=t.anchorAlign,n=t.elementRect,r=t.elementAlign,s=t.margin;void 0===s&&(s={});var o=i.horizontal,a=i.vertical,l=r.horizontal,c=r.vertical,h=s.horizontal||0,u=s.vertical||0,p=e.top,d=e.left;return a===YW&&(p+=e.height),a!==JW&&a!==ZW||(p+=Math.round(e.height/2)),c===YW&&(p-=n.height,u*=-1),c!==JW&&c!==ZW||(p-=Math.round(n.height/2),u*=-1),o===tX&&(d+=e.width),o!==JW&&o!==ZW||(d+=Math.round(e.width/2)),l===tX&&(d-=n.width,h*=-1),l!==JW&&l!==ZW||(d-=Math.round(n.width/2),h*=-1),{top:p+u,left:d+h}};function nX(t){return t.ownerDocument||t.document||t}const rX=function(t){return nX(t).documentElement};const sX=function(t){return nX(t).defaultView};function oX(t){var e=rX(t),i=sX(t);return{x:i.pageXOffset||e.scrollLeft||0,y:i.pageYOffset||e.scrollTop||0}}function aX(t){return t===(t.ownerDocument||{}).body?oX(t):{x:t.scrollLeft,y:t.scrollTop}}const lX=function(t){for(var e=t.offsetParent;e&&"static"===e.style.position;)e=e.offsetParent;return e||rX(t)};function cX(t,e){return t?aX(t):function(t){var e=lX(t);return e?aX(e):{x:0,y:0}}(e)}const hX=function(t){var e=t.getBoundingClientRect(),i=e.left,n=e.top;return e.height||e.width||(e=function(t){var e=t.style,i=e.display,n=e.left,r=e.position;t.style.display="",t.style.left="-10000px",t.style.position="absolute";var s=t.getBoundingClientRect();return t.style.display=i,t.style.left=n,t.style.position=r,s}(t)),{top:n,left:i,height:e.height,width:e.width}};const uX=function(t,e){var i=sX(t),n=i.getComputedStyle(t),r=hX(t),s=e||lX(t),o=t.ownerDocument,a=s!==o.body&&s!==o.documentElement,l={top:0,left:0};if("fixed"!==n.position&&a){var c=i.getComputedStyle(s);(l=hX(s)).top+=parseInt(c.borderTopWidth,10),l.left+=parseInt(c.borderLeftWidth,10)}return{top:r.top-l.top,left:r.left-l.left,height:r.height,width:r.width}};function pX(t,e,i){void 0===i&&(i=1);var n=e?lX(e):null,r=uX(t,n),s=r.top,o=r.left,a=r.height,l=r.width,c=cX(n,t),h=c.x,u=c.y,p=t.ownerDocument,d=n===p.body||n===p.documentElement?1:i;return{top:s+u*d,left:o+h*d,height:a,width:l}}function dX(t,e){return{top:t.top-e.y,left:t.left-e.x,height:t.height,width:t.width}}const fX="fit",gX="flip";var mX=function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},yX=function(t){var e=t.offset,i=t.size,n=t.anchorSize,r=t.viewPortSize,s=t.anchorAlignPoint,o=t.elementAlignPoint,a=0,l=2*t.margin;if(o!==s&&!(o===JW||o===ZW)&&!(s===JW||s===ZW)){var c=s===eX||s===QW;e<0&&c?e+(a=i+n+l)+i>r&&(a=0):e>=0&&!c&&(e+i>r&&(a+=-(n+i+l)),e+a<0&&(a=0))}return a};const vX=function(t){var e=t.anchorRect,i=t.anchorAlign,n=t.elementRect,r=t.elementAlign,s=t.collisions,o=t.viewPort,a=t.margin;void 0===a&&(a={});var l=n.top,c=n.left,h=n.height,u=n.width,p=o.height,d=o.width,f=a.horizontal||0,g=a.vertical||0,m=0,y=0,v=s.vertical===fX,b=s.horizontal===fX,w=s.vertical===gX,x=s.horizontal===gX;v&&(y+=mX(l,h,p)),b&&(m+=mX(c,u,d)),w&&(y+=yX({margin:g,offset:l,size:h,anchorSize:e.height,viewPortSize:p,anchorAlignPoint:i.vertical,elementAlignPoint:r.vertical})),x&&(m+=yX({margin:f,offset:c,size:u,anchorSize:e.width,viewPortSize:d,anchorAlignPoint:i.horizontal,elementAlignPoint:r.horizontal}));var S=w&&0!==y,k=x&&0!==m,C=v&&0!==y,A=b&&0!==m;return{flipped:k||S,fitted:C||A,flip:{horizontal:k,vertical:S},fit:{horizontal:A,vertical:C},offset:{left:m,top:y}}};function bX(t,e){for(var i=[],n=t.parentNode;n&&(i.push(n),n!==e);)n=n.parentNode;return i}function wX(t){for(var e=[],i=t.parentNode.firstElementChild;i;)i!==t&&e.push(i),i=i.nextElementSibling;return e}function xX(t,e){for(var i,n,r=bX(t),s=e;s&&(i=wX(s),!(n=r.reduce((function(t,e){return t.concat(i.filter((function(t){return t===e})))}),[])[0]));)s=s.parentElement;return n}SX=function(t){if(!AX())return!1;var e=t?t.ownerDocument:document;if(!e||!e.body)return!1;var i=e.createElement("div");i.style.transform="matrix(10, 0, 0, 10, 0, 0)",i.innerHTML='<div style="position: fixed; top: 10px;">child</div>',e.body.appendChild(i);var n=10!==i.children[0].getBoundingClientRect().top;return e.body.removeChild(i),n},CX=!1;var SX,kX,CX,AX=function(){return Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)};var _X=0;function TX(){if(!_X&&"undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),_X=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)}return _X}function OX(t){var e=sX(t),i=rX(t),n={height:e.innerHeight,width:e.innerWidth};return i.scrollHeight-i.clientHeight>0&&(n.width-=TX()),n}function EX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MX={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},PX=Array.from,IX="mouseleave",FX="mouseover",DX="mousedown",RX="pointerdown",LX="scroll",NX="resize";class BX extends H{constructor(t,e){if(super(t,e),EX(this,"mouseHoverTimeout",null),EX(this,"options",{dotNetInstance:null,anchorSelector:"",dynamicAnchors:!1,anchorRect:MX,toggleElementSelector:"",width:"",inheritAnchorWidth:!0,anchorAlign:{horizontal:"left",vertical:"bottom"},elementAlign:{horizontal:"left",vertical:"top"},openOn:"click",closeOn:"click",closeParentPopupsUntilSelector:"",jsinterop:{close:"",closeAsync:"",openAsync:"",positionSet:""}}),EX(this,"toggle",(t=>{t.preventDefault(),this._visible?this.closeAsync():this.openAsync(t)})),EX(this,"onCloseEvent",(t=>{!(this.toggleElements&&[...this.toggleElements].includes(t.target))&&t.target!==this.anchor||this.isChild(t.relatedTarget)||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync()}),30))})),EX(this,"onElementMouseOver",(()=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout)})),EX(this,"onMouseDown",(t=>{this.isChild(t.target)||this.closeAsync()})),EX(this,"onElementMouseLeave",(t=>{var e=t.relatedTarget;if(!q(this.element,e)&&!q(this.anchor,e)){var i=e&&e.closest(".k-animation-container"),n=i&&(i.dataset.id===this.element.dataset.id||this.isChild(e));i&&n||t.target!==this.element||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync(),this.options.closeParentPopupsUntilSelector&&this.closeParentPopups()}),30))}})),EX(this,"onScroll",(t=>{this.isChild(t.target)||this.positionElement()})),EX(this,"onResize",(()=>{this.close()})),EX(this,"openAsync",((t,e,i)=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);var n=this.anchor;this.anchors.length>1&&this.anchors.forEach((e=>{q(e,t.target)&&(this.anchor=e)})),n!==this.anchor&&this.closeAsync(),this.options.anchorRect={top:i,left:e,width:0,height:0},this.invokeMethodAsync(this.options.jsinterop.openAsync)})),this.extendOptions(e),this.anchors=this.getAnchorsFromDocument(),this.anchor=this.anchors[0],this.anchors.length>1&&e.toggleElementSelector)throw new Error("Toggle element is not supported when you have more than one anchor");e.toggleElementSelector&&(this.toggleElements=PX(document.querySelectorAll(e.toggleElementSelector))),c()||this.createIntersectionObserver(),this.bindAnchorsEvents(),this.bindElementEvents(),this.initPosition()}destroy(){this.unbindElementEvents(),this.unbindEvents(),this.unbindAnchorsEvents(),this.destroyIntersectionObserver(),super.destroy(),this.toggleElements=null,this.anchor=null}getElementRect(t){var e=t?t.getBoundingClientRect():MX,i=document.body.getBoundingClientRect();return{top:e.top-i.top,left:e.left-i.left,width:e.width,height:e.height}}bindElementEvents(){this.options.closeOn===IX&&(this.element.addEventListener(IX,this.onElementMouseLeave),this.element.addEventListener(FX,this.onElementMouseOver))}unbindElementEvents(){this.element&&(this.element.removeEventListener(IX,this.onElementMouseLeave),this.element.removeEventListener(FX,this.onElementMouseOver))}bindAnchorsEvents(){this.toggleElements&&this.toggleElements.length?this.toggleElements.forEach((t=>{this.bindAnchorEvents(t)})):this.anchors.forEach((t=>{this.bindAnchorEvents(t)}))}unbindAnchorsEvents(){this.toggleElements&&this.toggleElements.forEach((t=>{this.unbindAnchorEvents(t)})),this.anchors.forEach((t=>{this.unbindAnchorEvents(t)}))}bindAnchorEvents(t){if(f(t)){var{openOn:e,closeOn:i}=this.options;e===i?t.addEventListener(e,this.toggle,!0):(t.addEventListener(e,this.openAsync,!0),t.addEventListener(i,this.onCloseEvent,!0))}}unbindAnchorEvents(t){if(f(t)){var{openOn:e,closeOn:i}=this.options;t.removeEventListener(e,this.toggle,!0),t.removeEventListener(e,this.openAsync,!0),t.removeEventListener(i,this.onCloseEvent,!0)}}bindEvents(){this.bound||(this.bound=!0,document.addEventListener(LX,this.onScroll,!0),c()||window.addEventListener(NX,this.onResize),window&&window.PointerEvent?document.addEventListener(RX,this.onMouseDown,!0):document.addEventListener(DX,this.onMouseDown,!0))}unbindEvents(){document.removeEventListener(LX,this.onScroll,!0),document.removeEventListener(DX,this.onMouseDown,!0),document.removeEventListener(RX,this.onMouseDown,!0),window.removeEventListener(NX,this.onResize,!0),this.bound=!1}closeParentPopups(){for(var t=this.element;t&&!t.querySelector(this.options.closeParentPopupsUntilSelector);){var e=ie(t.getAttribute("data-id")),i=e.anchor;e.close(),t=i&&i.closest(".k-animation-container")}}onOpen(){this._visible=!0,this.bindEvents(),!this.options.width&&this.options.inheritAnchorWidth&&(this.element.style.width=this.getAnchorWidth()),this.anchor&&this.setZIndex(this.anchor),this.positionElement()}getAutoSizePosition(){var t=this.element.children[0];if(t){var e=t.style.display;t.style.visibility="hidden",t.style.display="block";var i=this.getPosition();return t.style.display=e,t.style.visibility="",i}return this.getPosition()}onClose(){this._visible=!1,this.unbindEvents()}initPosition(){this.element&&(this.element.style.left="-10000px",this.element.style.top="0px")}getPosition(){var t=this.getAnchorRect(),e=this.element.style.left,i=this.element.style.top;this.element.style.left="",this.element.style.top="";var n=this.getElementRect(this.element);this.element.style.left=e,this.element.style.top=i;var r=iX({anchorRect:t,elementRect:n,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,margin:this.options.margin});n.top=r.top,n.left=r.left,n=dX(n,oX(this.element));var s=vX({anchorRect:t,elementRect:n,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,collisions:{horizontal:"fit",vertical:"flip"},viewPort:OX(this.element)});return this.flipped=s.flipped,{top:"".concat(r.top+s.offset.top,"px"),left:"".concat(r.left+s.offset.left,"px"),flipped:s.flipped}}positionElement(){var t=this.getElementPosition();return this.element.style.top=t.top,this.element.style.left=t.left,this.invokePositionSet(),t}getElementPosition(){return!0===this.options.autoSize?this.getAutoSizePosition():this.getPosition()}getAnchorWidth(){if(!this.anchor)return"";var t=this.getElementRect(this.anchor);return"".concat(t.width,"px")}getAnchorRect(){return this.anchor?this.getElementRect(this.anchor):this.options.anchorRect}setZIndex(t){var e;this.element&&(t&&(e=function(t,e){if(!t||!e)return null;var i=xX(t,e);if(!i)return null;var n=[t].concat(bX(t,i)).reduce((function(t,e){var i=e.style.zIndex||window.getComputedStyle(e).zIndex,n=parseInt(i,10);return n>t?n:t}),0);return n?n+1:null}(t,this.element)),this.element.style.zIndex=e||10002)}createIntersectionObserver(){this.destroyIntersectionObserver(),this.intersectionObserver=this.initIntersectionObserver(),this.anchors.forEach((t=>{this.observeIntersection(t)}))}initIntersectionObserver(){var t={threshold:this.getIntersectionThreshold()};return new window.IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=0&&t.intersectionRatio<1&&this.onAnchorHide(t.target)}))}),t)}observeIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.observe(t)}unobserveIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.unobserve(t)}canObserveIntersection(t){return this.intersectionObserver&&f(t)}destroyIntersectionObserver(){this.intersectionObserver&&(this.anchors.forEach((t=>{this.unobserveIntersection(t)})),this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect()),this.intersectionObserver=null}onAnchorHide(t){if(this.hasDynamicAnchors()&&this._ignoreFirstIntersectionCheck){if(q(this.anchor,t))return void(this._ignoreFirstIntersectionCheck=!1)}else this.close()}getIntersectionThreshold(){for(var t=[],e=0;e<=1;e+=.1)t.push(e);return t}isElementVisible(){return this.element&&this.element.getElementsByClassName("k-popup")[0]}isChild(t){var e=t;if(et(e,[this.element,this.anchor]))return!0;var i=e instanceof HTMLElement&&e.closest(".k-animation-container");if(i&&i!==this.element){var n=ie(i.getAttribute("data-id")||i.id);return!!(n&&n.isParent(this.element))||this.isChildOfPopup(e,this.element)}return!1}isChildOfPopup(t,e){var i=t&&t.closest(".k-animation-container");if(i&&i===e)return!0;if(i&&i!==e){var n=ie(i.getAttribute("data-id")||i.id);if(n)return this.isChildOfPopup(n.anchor,e)}return!1}isParent(t){return t&&V(t,this.anchor)}close(){this.invokeMethodAsync(this.options.jsinterop.close)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}invokePositionSet(){this.options.jsinterop.positionSet&&this.invokeMethodAsync(this.options.jsinterop.positionSet)}get anchors(){return this.hasDynamicAnchors()&&(this.anchors=this.getAnchorsFromDocument()),this._anchors}set anchors(t){var e=this.hasAnyAnchorChanged(t);this.hasDynamicAnchors()&&e&&((this._anchors||[]).forEach((t=>{this.unobserveIntersection(t),this.unbindAnchorEvents(t)})),t.forEach((t=>{this.bindAnchorEvents(t)}))),this._anchors=t}get anchor(){return this._anchor||(this._anchor=this._anchors[0]),this._anchor}set anchor(t){this.unobserveIntersection(this._anchor),this.unbindAnchorEvents(this._anchor),this._anchor=t,this.hasDynamicAnchors()&&(this._ignoreFirstIntersectionCheck=!0,this.observeIntersection(this._anchor),this.bindAnchorEvents(this._anchor))}getAnchorsFromDocument(){return PX(document.querySelectorAll(this.options.anchorSelector))}hasAnyAnchorChanged(t){if(!this.hasDynamicAnchors())return!1;var e=PX(this._anchors||[]);if(!e||e.length!==t.length)return!0;for(var i=0;i<t.length;i++)if(!e.includes(t[i]))return!0;return!1}hasDynamicAnchors(){return this.options.dynamicAnchors}}function jX(t,e){Zt(BX,t,e)}function zX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class UX extends H{constructor(t,e){super(t,e),zX(this,"options",{events:{removeFocus:null,keyDown:null},appointmentElementSelector:t=>".k-event[data-render-index='".concat(t,"']")}),zX(this,"onKeyDown",(t=>{[de.ARROWRIGHT,de.ARROWLEFT,de.ARROWUP,de.ARROWDOWN,de.PAGE_DOWN,de.PAGE_UP,de.HOME,de.END,de.SPACE].includes(t.keyCode)&&Q("k-selected",t.target)&&t.target.matches("div.k-event")&&t.preventDefault(),this.trigger("keyDown",{key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey})})),zX(this,"onFocusOut",(t=>{!t.relatedTarget||this.element.querySelector(".k-scheduler-layout").contains(t.relatedTarget)||t.relatedTarget.closest(".k-window")||this.trigger("removeFocus")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusAppointmentElement(t){var e=this.element.querySelector(this.options.appointmentElementSelector(t));e&&this.focusElement(e)}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}}function $X(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class HX extends H{constructor(t,e){super(t,e),$X(this,"options",{dotNetInstance:null,jsinterop:{removeFocus:"",keyDown:""}}),$X(this,"onKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keyDown,t)})),$X(this,"onRemoveFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.removeFocus)})),this.extendOptions(e),this.createNavigationService()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new UX(this.element,{events:{keyDown:this.onKeyDown,removeFocus:this.onRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusAppointmentElement(t){this.navigationService.focusAppointmentElement(t)}focusElement(){this.navigationService.focusElement(this.element)}}function VX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class qX extends H{constructor(t,e){super(t,e),VX(this,"options",{dotNetInstance:null,allowUpdate:!1,jsinterop:{resizeAppointments:""}}),VX(this,"onResize",(()=>{this.invokeResizeAppointments()})),VX(this,"renderMoveHints",(t=>{t&&t.length&&this.moveTarget&&(this.destroyHints(),t.forEach((t=>{var e=this.createHint(this.moveTarget);this.renderHintElement(e,t)})))})),VX(this,"renderHintElement",(()=>{throw new Error("You have to implement the method renderHintElement!")})),VX(this,"getSlotUnderCursor",(t=>{var e=Ve(t);if(!e)return null;var i=e.closest(".k-event");return i&&(Y(i),e=this.getSlotUnderCursor(t),K(i)),e.closest(".k-scheduler-cell.k-slot-cell")})),VX(this,"createHint",(t=>{var e=t.cloneNode();return e.className+=" k-event-drag-hint",e.style.zIndex="2",this.hints[this.hints.length]=e,e})),VX(this,"destroyHints",(()=>{this.hints.forEach((t=>{t.parentNode.removeChild(t)})),this.hints=[]})),this.extendOptions(e),this.options.allowUpdate&&(this.initResizeService(),this.createMovable()),this.hints=[],this.width=0}destroy(){this.bodyElement=null,this.destroyResizeService(),this.destroyMovable(),super.destroy()}setOptions(t){this.options.allowUpdate!==t.allowUpdate&&(t.allowUpdate?(this.initResizeService(),this.createMovable()):(this.destroyResizeService(),this.destroyMovable())),this.extendOptions(t)}initResizeService(){this.resizeService||(this.resizeService=new Bi({element:this.element,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}invokeResizeAppointments(){this.invokeMethodAsync(this.options.jsinterop.resizeAppointments,this.getSlotMetrics())}refresh(){this.invokeResizeAppointments()}getSlotMetrics(){var t=this.getFirstCell(),e=this.getContentWidth();return this.setHeadersWidths(),this.slotMetrics={width:e-t.offsetLeft,height:t.offsetHeight,left:t.offsetLeft},this.slotMetrics}createMovable(){this.destroyMovable(),this.movable=new ui({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;if(e&&e.closest(".k-event")){var i=this.getSlotUnderCursor(t);this.moveTarget=e.closest(".k-event"),this.resizeStart=Boolean(e.closest(".k-resize-n, .k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-s, .k-resize-e")),this.lastCellIndex=this.originalCellIndex=this.getCellIndex(i),this.lastRowIndex=this.originalRowIndex=this.getRowIndex(i),this.lastResourceIndex=this.originalResourceIndex=this.getResourceIndex(i)}}onMovableDrag(t){if(this.moveTarget)if(this.dragStarted){var e=this.getSlotUnderCursor(t);if(e){var i=Q("k-scheduler-alldays-slot",e),n=this.getCellIndex(e),r=this.getRowIndex(e),s=this.getResourceIndex(e),o=!1;n!==this.lastCellIndex&&(this.lastCellIndex=n,o=!0),r!==this.lastRowIndex&&(this.lastRowIndex=r,o=!0),s!==this.lastResourceIndex&&(this.resourceRowIndex=s,o=!0),o&&this.invokeMethodAsync(this.options.jsinterop.getMoveHint,{rowIndex:r,cellIndex:n,resourceIndex:s,originalCellIndex:this.originalCellIndex,originalRowIndex:this.originalRowIndex,originalResourceIndex:this.originalResourceIndex,resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,isAllDay:i}).then(this.renderMoveHints)}}else this.dragStarted=!0}onMovableDrop(){this.destroyHints(),this.dragStarted&&this.invokeMethodAsync(this.options.jsinterop.moveAppointment),this.moveTarget=null,this.lastCellIndex=this.lastRowIndex=this.lastResourceIndex=0,this.originalCellIndex=this.originalRowIndex=this.originalResourceIndex=0}getFirstCell(){return this.element.querySelector(".k-first-cell")}getContentWidth(){return this.getBodyElement().offsetWidth}setHeadersWidths(){var t=Array.from(this.element.querySelectorAll(".k-heading-cell.k-group-cell,.k-heading-cell.k-resource-cell")),e=z(t,(t=>t.getAttribute("data-depth-index"))),i=function(t){var i=0;e[t].forEach((t=>{t.style.minWidth="",i=Math.max(t.offsetWidth,i)})),e[t].forEach((t=>{t.style.minWidth=i+"px"}))};for(var n in e)i(n)}getBodyElement(){return this.bodyElement||(this.bodyElement=this.element.querySelector(".k-scheduler-body")),this.bodyElement}getCellIndex(t){return this.getCellDataIndex(t,"data-cell-index")}getRowIndex(t){return this.getCellDataIndex(t,"data-row-index")}getResourceIndex(t){return this.getCellDataIndex(t,"data-resource-index")}getCellDataIndex(t,e){return t?parseInt(t.getAttribute(e),10):-1}getDropSettings(){return this.options.dropOptions}getDropPosition(t){return this.getSlotUnderCursor(t)?"over":"forbidden"}getDropItemIndex(t,e){var i=this.getSlotUnderCursor(e);if(!i)return"";var n=this.getCellIndex(i),r=this.getRowIndex(i),s=this.getResourceIndex(i);return"".concat(r,":").concat(n,":").concat(s)}getId(){return this.element.closest(".k-scheduler").id}}function WX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class XX extends qX{constructor(t,e){super(t,e),WX(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),WX(this,"renderHintElement",((t,e)=>{var i=this.getAllDayRowElement();t.style.left=e.left+"px",t.style.width=e.width+"px",e.isAllDay&&i?(t.style.top="0px",t.style.height="100%",i.appendChild(t)):(t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t))})),this.extendOptions(e)}destroy(){this.allDayRowElement=null,super.destroy()}getAllDayRowElement(){return this.allDayRowElement||(this.allDayRowElement=this.element.querySelector(".k-scheduler-all-day-row")),this.allDayRowElement}}function GX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class KX extends qX{constructor(t,e){super(t,e),GX(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),GX(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function YX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class JX extends qX{constructor(t,e){super(t,e),YX(this,"options",{dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}}),YX(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function ZX(t,e){Zt(HX,t,e)}function QX(t,e){Zt(XX,t,e)}function tG(t,e){Zt(KX,t,e)}function eG(t,e){Zt(JX,t,e)}function iG(t){var e=ie(t);return e?e.getSlotMetrics():{width:0,height:0,left:0}}function nG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var rG="focus",sG="blur";class oG extends rE{constructor(t,e,i,n){super(t,e,i,n),nG(this,"options",{dotNetInstance:null,hasParent:!1,parentDataId:"",value:"",exportScale:2,popupScale:3,scale:1,debounceDelay:150,jsinterop:{onValueChanged:"",onFocus:"",onBlur:""}}),nG(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.onFocus)})),nG(this,"onBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.onBlur)})),nG(this,"onWidgetChange",(()=>{this.debouncedWidgetChange()})),nG(this,"onWidgetDrawStart",(()=>{})),nG(this,"onWidgetDrawEnd",(()=>{})),nG(this,"changeValue",(()=>{this.widget&&this.exportImageAsync().then((t=>{this.setValue(t),this.invokeValueChanged(t)}))})),nG(this,"invokeValueChanged",(t=>{this.invokeMethodAsync(this.options.jsinterop.onValueChanged,t)})),this.initDebouncedWidgetChange(),this.extendOptions(u(e,{onChange:this.onWidgetChange,onDraw:this.onWidgetDrawStart,onDrawEnd:this.onWidgetDrawEnd})),this.widgetElement=this.element.querySelector(".k-signature-canvas"),this.bindEvents(),this.resetState(),this.initWidget(this.widgetElement),this.reloadImage()}destroy(){this.unbindEvents(),super.destroy()}getWidgetConstructor(){return NV}initWidget(t){var e=g({},this.options);if(this.options.hasParent&&(!this.options.color||!this.options.backgroundColor)){var i=this.getParentSignature();i&&(e.color=this.options.color||i.widget.options.color,e.backgroundColor=this.options.backgroundColor||i.widget.options.backgroundColor)}super.initWidget(t,e)}refresh(){this.setWidgetOptions(this.options),this.reloadImage()}readThemeColors(){var t,e;if("undefined"!=typeof document){var i=this.element.ownerDocument.defaultView.getComputedStyle(this.element);t=i.color,e=i.backgroundColor}return{themeColor:t,themeBackgroundColor:e}}areThemeColorsChanged(t){return this.state.themeColor!==t.themeColor||this.state.themeBackgroundColor!==t.themeBackgroundColor}setOptions(t){var e=this.state.value!==t.value,i=this.areOptionsChanged(t,{ignoreOptions:["dotNetInstance","jsinterop","onChange","onDraw","onDrawEnd","value"]});if(!i&&!e){var{themeColor:n,themeBackgroundColor:r}=this.readThemeColors();if(!this.areThemeColorsChanged({themeColor:n,themeBackgroundColor:r}))return;this.state.themeColor=n,this.state.themeBackgroundColor=r}this.extendOptions(t),this.setWidgetOptions(this.options),this.initDebouncedWidgetChange(),(i||e)&&this.reloadImage()}setWidgetOptions(t){var e=g({},t);if(!(this.options.hasParent||this.options.value||t.color&&t.backgroundColor)){var{themeColor:i,themeBackgroundColor:n}=this.readThemeColors();t.color||(e.color=i),t.backgroundColor||(e.backgroundColor=n)}this.widget.setOptions(e)}extendOptions(t){super.extendOptions(t),this.options.hasParent&&(this.options.scale=this.options.popupScale)}bindEvents(){this.widgetElement&&(this.widgetElement.addEventListener(rG,this.onFocus),this.widgetElement.addEventListener(sG,this.onBlur))}unbindEvents(){this.widgetElement&&(this.widgetElement.removeEventListener(rG,this.onFocus),this.widgetElement.removeEventListener(sG,this.onBlur))}setState(t){this.state=g(this.state||{},t)}resetState(){this.setState({value:""})}initDebouncedWidgetChange(){this.debouncedWidgetChange&&this.debouncedWidgetChange.stop&&this.debouncedWidgetChange.stop(),this.debouncedWidgetChange=Li(this.changeValue,this.options.debounceDelay)}exportImageAsync(){var t=this.widgetElement.getBoundingClientRect(),e=this.options.hasParent?this.options.popupScale:1;return this.widget.exportImage({width:t.width*this.options.exportScale*e,height:t.height*this.options.exportScale*e})}reloadImage(){this.widget&&this.loadImage(this.options.value)}loadImage(t){this.widget&&x(t)&&(this.setValue(t),this.widget.loadImage(this.options.value))}setValue(t){this.state.value=t,this.options.value=t}getParentSignature(){return ie(this.options.parentDataId)}}function aG(t,e,i){sE({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new nE,intlService:eo},componentConstructor:oG})}function lG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var cG="blur",hG="focus",uG="click",pG=[fe.ARROWDOWN,fe.ARROWUP],dG=".k-button",fG=".k-split-button-arrow";class gG extends VP{constructor(t,e){super(t,e),lG(this,"onBlur",(t=>{var e=t.relatedTarget,i=e&&V(this.popupElement,e),n=e&&e.closest(fG);i||n||this.invokeBlur()})),lG(this,"onFocus",(()=>{this.invokeFocus()})),lG(this,"onArrowButtonClick",(()=>{nt(this.button)})),this.button=this.element.querySelector(dG),this.arrowButton=this.element.querySelector(fG),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.button.addEventListener(cG,this.onBlur),this.button.addEventListener(hG,this.onFocus),this.arrowButton.addEventListener(uG,this.onArrowButtonClick),this.navigationService.bind(pG,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.arrowButton.removeEventListener(uG,this.onArrowButtonClick),this.button.removeEventListener(cG,this.onBlur),this.button.removeEventListener(hG,this.onBlur)}}class mG extends gG{constructor(t,e){super(t,e),this.extendOptions(e)}}function yG(t,e){Zt(mG,t,e)}function vG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var bG=".k-splitbar",wG=".k-splitbar-draggable-horizontal",xG=".k-splitbar-draggable-vertical",SG="horizontal",kG=Number.MAX_SAFE_INTEGER,CG="k-pane-static",AG=".k-collapse-next",_G=".k-collapse-prev",TG=t=>/%$/.test(t),OG=(t,e)=>{var i=parseFloat(t);return TG(t)&&(i=e*i/100),i},EG=(t,e,i)=>t?e===SG?t["".concat(i,"Width")]:t["".concat(i,"Height")]:0;class MG extends H{constructor(t,e){super(t,e),vG(this,"options",{dotNetInstance:null,orientation:SG,resizable:!0,keyboardResizeDelta:10,panes:[],jsinterop:{resizePane:""}}),vG(this,"onResizableResizeStart",(t=>{t.originalEvent.stopPropagation();var e=Nt(t.originalCurrentTarget,bG);this.resetPaneState(),this.addResizeOverlays(e)})),vG(this,"onResizableResize",(t=>{var e=Nt(t.originalCurrentTarget,bG),i=this.isHorizontal()?t.delta.x:t.delta.y;this.dragSplitterBar(e,i)})),vG(this,"onResizableResizeEnd",(()=>{this.removeResizeOverlays(),this.invokeResizePane()})),vG(this,"onElementKeyDown",(t=>{t.target.closest(bG)&&this.onSplitterBarKeyDown(t)})),this.extendOptions(e),this.resetPaneState(),this.createResizable(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}setOptions(t){this.extendOptions(t);for(var e=0;e<this.options.panes.length;e++){if(this.options.panes[e].forceExpanded){var i=this.getPaneElement(e);Z(CG,i)}}}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onElementKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onElementKeyDown)}setState(t){this.state=u(this.state||{},t)}resetPaneState(){this.setState({resizedPanes:{}})}createResizable(){this.options.resizable&&(this.resizable=new wP(this.element,{draggable:{filter:[wG,xG].join(","),ignore:[_G,AG].join(",")},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}dragSplitterBar(t,e){var{leftPane:i,rightPane:n}=this.getAdjacentPanes(t),r=i.computedSize+e,s=r>i.min&&r<i.max,o=this.getPaneElements().filter((t=>!t.style["flex-basis"])),a=(i.size||n.size)&&o.length>1;i.size&&n.size||a?s&&(this.resizePane(i,e),this.resizePane(n,-e)):n.size?this.resizePane(n,-e):this.resizePane(i,e)}resizePane(t,e){var i=he(t.computedSize+e,t.min,t.max),n="";if(TG(t.size)){var r=this.getElementClientSize();n="".concat(100*i/r,"%")}else n=(t=>"".concat(t,"px"))(i);this.setPaneSize(t.index,n)}isHorizontal(){return this.options.orientation===SG}getPane(t){return(this.options.panes||[])[t]}getPaneElements(){return Array.from(this.element.children||[]).filter((t=>Q("k-pane",t)))}getPaneElement(t){return this.getPaneElements()[t]}getAdjacentPanes(t){var e=t,i=t+1,n=this.getPaneElement(e),r=this.getPaneElement(i),s=this.getPane(e),o=this.getPane(i),a=this.getPaneOffsetSize(e),l=this.getPaneOffsetSize(i),c=a+l,h=this.getElementClientSize(),u=t=>OG(t,h),{leftPaneMaxSize:p,rightPaneMaxSize:d}=this.getAdjacentPanesMaxSize(t);return{leftPane:{index:e,computedSize:a,min:u(s.min)||c-u(o.max)||0,max:p,size:n.style["flex-basis"],collapsible:s.collapsible},rightPane:{index:i,computedSize:l,min:u(o.min)||c-u(s.max)||0,max:d,size:r.style["flex-basis"],collapsible:o.collapsible}}}getAdjacentPanesMaxSize(t){var{size:e,min:i,max:n}=this.getPaneSizes(t),{size:r,min:s,max:o}=this.getPaneSizes(t+1),a=e+r;return{leftPaneMaxSize:Math.min(n,a-s),rightPaneMaxSize:Math.min(o,a-i)}}getPaneSizes(t){var e=this.getElementClientSize(),i=this.getPane(t);return{size:this.getPaneOffsetSize(t),min:i.min?OG(i.min,e):0,max:i.max?OG(i.max,e):kG}}getPaneOffsetSize(t){var e=((t,e)=>{if(!t)return 0;var i=t.getBoundingClientRect();return e===SG?i.width:i.height})(this.getPaneElement(t),this.options.orientation);return e}getElementClientSize(){var t=((t,e)=>EG(t,e,"client"))(this.element,this.options.orientation);return t}setPaneSize(t,e){var i=this.getPaneElement(t);i&&(this.state.resizedPanes[t]={index:t,size:e},(this.options.panes[t]||{}).forceExpanded||J(CG,i),i.style["flex-basis"]=e)}addResizeOverlays(t){this.addResizeOverlay(t),this.addResizeOverlay(t+1)}addResizeOverlay(t){var e=this.getPaneElement(t);if(e){var i=j('<div class="k-splitter-overlay k-overlay"></div>');e.appendChild(i)}}removeResizeOverlays(){Array.from(this.element.querySelectorAll(".k-splitter-overlay")).forEach((t=>{t.remove()}))}invokeResizePane(){Object.values(this.state.resizedPanes).forEach((t=>{this.invokeMethodAsync(this.options.jsinterop.resizePane,{index:t.index,size:t.size})}))}isSplitterBarDraggable(t){return Q(wG.replace(".",""),t)||Q(xG.replace(".",""),t)}getSplitterBarIndex(t){return Nt(t,bG)}onSplitterBarKeyDown(t){var e=t.target.closest(bG),i=t.key;if(this.isSplitterBarDraggable(e)){var n=Nt(e,bG),r=this.options.keyboardResizeDelta,s=this.isHorizontal(),o=i===fe.ARROWRIGHT&&s||i===fe.ARROWDOWN&&!s,a=i===fe.ARROWLEFT&&s||i===fe.ARROWUP&&!s,l=o?1:-1;(o||a)&&(t.preventDefault(),this.dragSplitterBar(n,l*r),this.invokeResizePane())}}}function PG(t,e){Zt(MG,t,e)}function IG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var FG=".k-tilelayout-item";class DG extends H{constructor(t,e){super(t,e),IG(this,"options",{dotNetInstance:null,resizable:!1,reorderable:!1,jsinterop:{resizeItem:"",reorderItem:""}}),IG(this,"onResizableResizeStart",(t=>{var e=t.originalCurrentTarget.closest(FG),i=parseInt(e.style.gridColumnEnd.substring(5)),n=parseInt(e.style.gridRowEnd.substring(5)),r=Array.from(this.element.querySelectorAll(FG)).find((t=>"1"===t.style.order)),s=r.offsetTop-this.element.offsetTop,o=r.offsetLeft-this.element.offsetLeft,a=(e.offsetWidth-(i-1)*o)/i,l=(e.offsetHeight-(n-1)*s)/n,c=t.originalCurrentTarget.className;this.resizeState={item:e,columnWidth:a,columnHeight:l,segmentWidth:a+o,segmentHeight:l+s,totalWidth:this.element.offsetWidth,originalWidth:e.offsetWidth,originalHeight:e.offsetHeight,originalColSpan:i,originalRowSpan:n,maxWidth:this.element.offsetWidth-(e.offsetLeft+o),colSpanDelta:0,rowSpanDelta:0,resizeSide:c.indexOf("ew")>-1||c.indexOf("nwse")>-1,resizeDown:c.indexOf("ns")>-1||c.indexOf("nwse")>-1}})),IG(this,"onResizableResize",(t=>{this.pinContainer(this.resizeState.item),this.createResizeHint(this.resizeState.item);var e=()=>{this.resizeState.item.style.top=this.hint.offsetTop+"px",this.resizeState.item.style.left=this.hint.offsetLeft+"px"};if(this.resizeState.resizeSide){var i=this.resizeState.originalWidth+t.initialDelta.x;i<=this.resizeState.maxWidth&&i>=this.resizeState.columnWidth&&(this.resizeState.item.style.width=i+"px",this.resizeState.colSpanDelta=Math.floor((t.initialDelta.x+this.resizeState.segmentWidth/2)/this.resizeState.segmentWidth),this.hint.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),this.resizeState.item.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),e(),this.resizeState.resizeDown||(this.resizeState.item.style.height=this.hint.offsetHeight+"px"))}if(this.resizeState.resizeDown){var n=this.resizeState.originalHeight+t.initialDelta.y;n>=this.resizeState.columnHeight&&(this.resizeState.item.style.height=n+"px",this.resizeState.rowSpanDelta=Math.floor((t.initialDelta.y+this.resizeState.segmentHeight/2)/this.resizeState.segmentHeight),this.hint.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),this.resizeState.item.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),e())}})),IG(this,"onResizableResizeEnd",(()=>{(this.resizeState.colSpanDelta||this.resizeState.rowSpanDelta)&&this.invokeMethodAsync(this.options.jsinterop.resizeItem,{order:parseInt(this.resizeState.item.style.order),colSpan:this.resizeState.originalColSpan+this.resizeState.colSpanDelta,rowSpan:this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta}),this.unpinContainer(this.resizeState.item),this.destroyResizeHint(),this.resizeState=null})),IG(this,"onReorderableDragStart",(t=>{var e=t.originalCurrentTarget.closest(FG),i=parseInt(e.style.order);this.reorderState={item:e,left:e.offsetLeft,top:e.offsetTop,order:i,originalOrder:i}})),IG(this,"onReorderableDrag",(t=>{this.pinContainer(this.reorderState.item),this.createResizeHint(this.reorderState.item),this.reorderState.item.style.left=this.reorderState.left+t.initialDelta.x+"px",this.reorderState.item.style.top=this.reorderState.top+t.initialDelta.y+"px";var e=this.getItemUnderCursor(t,this.reorderState.item);if(e){var i,n,r,s=e.getBoundingClientRect(),o=t.clientX<s.left+s.width/2,a=parseInt(e.style.order),l=a+(o?0:1);if(e===this.reorderState.lastItemUnderCursor&&o===this.reorderState.lastIsLeftOfMiddle)return;if(a>this.reorderState.order?(i=this.reorderState.order+1,n=l,r=-1,this.reorderState.order=l-1):a<this.reorderState.order&&(i=l,n=this.reorderState.order,r=1,this.reorderState.order=l),n>i){this.shiftItemsOrder(i,n,r),this.hint.style.order=this.reorderState.order,this.reorderState.item.style.order=this.reorderState.order;var c=this.getItemUnderCursor(t,this.reorderState.item);if(this.reorderState.lastItemUnderCursor=c,c){var h=c.getBoundingClientRect(),u=t.clientX<h.left+h.width/2;this.reorderState.lastIsLeftOfMiddle=u}}}})),IG(this,"onReorderableDragEnd",(()=>{this.reorderState.order!==this.reorderState.originalOrder&&this.invokeMethodAsync(this.options.jsinterop.reorderItem,{fromOrder:this.reorderState.originalOrder,toOrder:this.reorderState.order}),this.destroyResizeHint(),this.unpinContainer(this.reorderState.item),this.reorderState=null})),IG(this,"pinContainer",(t=>{if("absolute"!==t.style.position){var e=t.offsetLeft,i=t.offsetTop,n=t.offsetWidth,r=t.offsetHeight;t.style.position="absolute",t.style.left=e+"px",t.style.top=i+"px",t.style.width=n+"px",t.style.height=r+"px",t.style.zIndex=2}})),IG(this,"unpinContainer",(t=>{t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.style.zIndex=""})),IG(this,"createResizeHint",(t=>{this.hint||(this.hint=document.createElement("div"),this.hint.className="k-layout-item-hint k-layout-item-hint-resize",this.hint.style.order=t.style.order,this.hint.style.gridColumnEnd=t.style.gridColumnEnd,this.hint.style.gridRowEnd=t.style.gridRowEnd,this.element.appendChild(this.hint))})),IG(this,"destroyResizeHint",(()=>{this.hint&&(this.element.removeChild(this.hint),this.hint=null)})),IG(this,"getElementUnderCursor",((t,e)=>{var i=Ve(t);return e&&e.contains(i)&&(Y(e),i=Ve(t),K(e)),i})),IG(this,"getItemUnderCursor",((t,e)=>{var i=this.getElementUnderCursor(t,e);return i?i.closest(FG):null})),IG(this,"shiftItemsOrder",((t,e,i)=>{for(var n=this.element.querySelectorAll(FG),r=0;r<n.length;r++){var s=n[r],o=parseInt(s.style.order);o>=t&&o<e&&(s.style.order=o+i)}})),this.extendOptions(e),this.options.resizable&&this.createResizable(),this.options.reorderable&&this.createReorderable(),this.bindEvents()}destroy(){this.destroyResizable(),this.destroyReorderable(),this.unbindEvents(),super.destroy()}bindEvents(){}unbindEvents(){}setOptions(t){this.options.resizable!==t.resizable&&(t.resizable?this.createResizable():this.destroyResizable()),this.options.reorderable!==t.reorderable&&(t.reorderable?this.createReorderable():this.destroyReorderable()),this.extendOptions(t)}createResizable(){this.resizable=new wP(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null,this.destroyResizeHint())}createReorderable(){this.reorderable=new wP(this.element,{draggable:{filter:".k-tilelayout-item-header"},events:{resizeStart:this.onReorderableDragStart,resize:this.onReorderableDrag,resizeEnd:this.onReorderableDragEnd}})}destroyReorderable(){this.reorderable&&(this.reorderable.destroy(),this.reorderable=null)}}function RG(t,e){Zt(DG,t,e)}function LG(t){Qt(t)}function NG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var BG="k-active";class jG extends H{constructor(t,e){super(t,e),NG(this,"options",{dotNetInstance:null}),NG(this,"setActive",(()=>(this.element&&!this.element.classList.contains(BG)&&this.element.classList.add(BG),!0))),NG(this,"removeActive",(()=>(this.element&&this.element.classList.contains(BG)&&this.element.classList.remove(BG),!0))),this.extendOptions(e),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.initNavigationService(),this.element.addEventListener("mousedown",this.setActive),this.element.addEventListener("mouseleave",this.removeActive)}unbindEvents(){this.element.removeEventListener("mousedown",this.setActive),this.element.removeEventListener("mouseleave",this.removeActive)}initNavigationService(){this.navigationService=new ve(this.element),this.navigationService.bind(fe.SPACE,this.setActive)}}function zG(t,e){Zt(jG,t,e)}function UG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $G="k-callout-n",HG="k-callout-s",VG="hover",qG="bottom",WG="mouseenter",XG="mouseleave",GG="mousedown",KG="click",YG="data-telerik-tooltip-id";class JG extends H{constructor(t,e){super(t,e),UG(this,"options",{dotNetInstance:null,showOn:"",targetSelector:"",popupId:"",jsinterop:{open:"",close:""}}),UG(this,"onMouseDown",(t=>{var e=this.getPopupComponent();e.anchor&&!e.isChild(t.target)&&this.close(e.anchor)})),UG(this,"onClick",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.open(i)}})),UG(this,"onAnyTargetMouseEnter",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.removeTitle(i)}})),UG(this,"onMouseEnter",(t=>{this.onAnyTargetMouseEnter(t);var e=this.getClosestMatchingAnchor(t.target);this.open(e)})),UG(this,"onMouseLeave",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getPopupComponent(),n=t.relatedTarget;if(!q(i.anchor,n)){var r=this.getClosestMatchingAnchor(e);this.close(r)}}})),UG(this,"open",(t=>{if(f(t)&&!this.shouldSkipAnchor(t)){var e=this.getDataAttributes(t),i=this.getPopupComponent();i.anchors.forEach((e=>{q(e,t)&&(i.anchor=e)})),this.invokeMethodAsync(this.options.jsinterop.open,e)}})),UG(this,"close",(t=>{f(t)&&(this.restoreTitle(t),this.invokeMethodAsync(this.options.jsinterop.close))})),this.id=m(),this.options=e,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===VG?(t.addEventListener(WG,this.onMouseEnter,!0),t.addEventListener(XG,this.onMouseLeave,!0)):(t.addEventListener(WG,this.onAnyTargetMouseEnter,!0),t.addEventListener(KG,this.onClick,!0)),t.addEventListener(GG,this.onMouseDown,!0))}unbindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===VG?(t.removeEventListener(WG,this.onMouseEnter,!0),t.removeEventListener(XG,this.onMouseLeave,!0)):(t.removeEventListener(WG,this.onAnyTargetMouseEnter,!0),t.removeEventListener(KG,this.onClick,!0)),t.removeEventListener(GG,this.onMouseDown,!0))}getDataAttributes(t){var e=t.getAttribute("title")||t.getAttribute("data-title"),i=t.getAttribute("alt")||e;return i&&t.setAttribute("data-title",i),t.removeAttribute("title"),t.dataset}restoreTitle(t){if(f(t)){var e=t.getAttribute("data-title")||t.getAttribute("title");e&&t.setAttribute("title",e),t.removeAttribute("data-title"),this.untrackAnchor(t)}}removeTitle(t){if(f(t)){this.trackAnchor(t);var e=t.getAttribute("title")||t.getAttribute("data-title");e&&t.setAttribute("data-title",e),t.removeAttribute("title")}}flipCallout(t){var e=this.getPopupComponent();if(e.flipped){var i=e.element.querySelector(".k-callout");"top"===t?(Z(HG,i),J($G,i)):t===qG&&(Z($G,i),J(HG,i))}}correctCalloutPosition(){var t=this.getPopupComponent(),e=t.getElementRect(t.anchor),i=t.getElementRect(t.element),n=e.left-i.left+.5*e.width,r=t.element.querySelector(".k-callout");r&&(r.style.left=n+"px")}positionCallout(t){this.flipCallout(t),"top"!==t&&t!==qG||this.correctCalloutPosition()}getCalloutSize(){var t=document.createElement("div");t.className="k-callout ".concat($G),t.style.visibility="hidden",document.body.appendChild(t);var e=window.getComputedStyle(t),i=e.borderWidth||e.borderTopWidth,n=parseFloat(i);return document.body.removeChild(t),n}getPopupComponent(){return ie(this.options.popupId)}shouldSkipAnchor(t){var e=this.isAnchorTracked(t),i=this.ownsAnchorBySelector(t);return!e&&!i}trackAnchor(t){f(t)&&t.setAttribute(YG,this.id)}untrackAnchor(t){f(t)&&t.removeAttribute(YG)}isAnchorTracked(t){return f(t)&&t.getAttribute(YG)===this.id}ownsAnchorBySelector(t){return f(t)&&Boolean(t.closest(this.options.targetSelector))}getClosestMatchingAnchor(t){var e=this.getClosestTrackedAnchor(t);return e||this.getClosestAnchorBySelector(t)}getClosestTrackedAnchor(t){return f(t)?t.closest(R(YG,this.id)):null}getClosestAnchorBySelector(t){return f(t)?t.closest(this.options.targetSelector):null}repositionPopup(){var t=this.getPopupComponent();t&&t.positionElement()}}function ZG(t,e){ie(t)||re(t,new JG(null,e))}class QG extends Ii{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!0},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!0,offsetDropClue:!1},componentSelector:".k-treelist",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function tK(t,e){Zt(QG,t,e)}function eK(t){Qt(t)}var iK=Array.from,nK=t=>null!=t,rK=t=>{var e=t.match(/\.([^\.]+)$/);return e?e[0]:""};function sK(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function oK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aK="error",lK=()=>({}),cK=function(t){return y(t)?t:lK},hK=(t,e)=>{var i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?sK(Object(i),!0).forEach((function(e){oK(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):sK(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({request:uK(t)},e);return i},uK=t=>({status:t.status,statusText:t.statusText,responseText:t.responseText,responseType:t.responseType});class pK{static send(t){var{url:e,method:i,data:n,withCredentials:r=!1,headers:s={},success:o,error:a,progress:l}=t,c=new XMLHttpRequest,h=cK(o),u=cK(a),p=cK(l);return c.withCredentials=r,c.addEventListener("load",(()=>{c.status>=200&&c.status<300?h(hK(c)):u(hK(c))})),c.addEventListener(aK,(()=>{u(hK(c))})),c.upload.addEventListener(aK,(()=>{u(hK(c))})),c.upload.addEventListener("progress",(t=>{p(hK(c,{progress:Math.round(100*t.loaded/t.total)}))})),c.open(i,e,!0),Object.entries(s).forEach((t=>{var[e,i]=t;c.setRequestHeader(e,i)})),c.send(n),c}}var dK=0,fK=1;function gK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mK extends H{constructor(t){super(null,t),gK(this,"options",{saveUrl:"",saveMethod:"POST",saveField:"files",removeUrl:null,removeMethod:"POST",removeField:"files",withCredentials:!1,events:{uploadProgress:null,uploadSuccess:null,uploadError:null}}),gK(this,"onUploadProgress",(t=>{this.trigger("uploadProgress",t)})),gK(this,"onUploadSuccess",(t=>{this.trigger("uploadSuccess",t)})),gK(this,"onUploadError",(t=>{this.trigger("uploadError",t)})),gK(this,"onRemoveSuccess",(t=>{this.trigger("removeSuccess",t)})),gK(this,"onRemoveError",(t=>{this.trigger("removeError",t)})),this.extendOptions(t),this.resetState()}setOptions(t){this.extendOptions(t)}resetState(){this.setState({fileRequests:{}})}setState(t){this.state=u(this.state||{},t)}uploadFiles(t,e){iK(t).forEach((t=>{this.uploadFile(t,e)}))}uploadFile(t,e){this.sendUploadRequest(t,e)}cancelFile(t){var e=this.state.fileRequests[t];e&&(this.untrackUploadRequest(t),e.abort())}removeFile(t,e){this.sendRemoveRequest(t,e)}sendUploadRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.saveUrl){var i=t.id,n=this.getFileUploadFormData(t.rawFile,e.data),r=pK.send({url:this.options.saveUrl,method:this.options.saveMethod,withCredentials:this.options.withCredentials,data:n,headers:e.headers,success:t=>{this.onUploadSuccess({operation:dK,request:t.request,file:{id:i}})},error:t=>{this.onUploadError({operation:dK,request:t.request,file:{id:i}})},progress:t=>{this.onUploadProgress({file:{id:i,progress:t.progress}})}});this.trackUploadRequest(i,r)}}sendRemoveRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.removeUrl){var i=t.id,n=this.getFileRemoveFormData(t,e.data);pK.send({url:this.options.removeUrl,method:this.options.removeMethod,withCredentials:this.options.withCredentials,data:n,headers:e.headers,success:t=>{this.onRemoveSuccess({operation:fK,request:t.request,file:{id:i}})},error:t=>{this.onRemoveError({operation:fK,request:t.request,file:{id:i}})}})}}trackUploadRequest(t,e){this.state.fileRequests[t]=e}untrackUploadRequest(t){this.state.fileRequests[t]=null}getFileUploadFormData(t,e){return this.getFormData({field:this.options.saveField,data:t,additionalData:e})}getFileRemoveFormData(t,e){return this.getFormData({field:this.options.removeField,data:t.name,additionalData:e})}getFormData(t){var{data:e,field:i,additionalData:n={}}=t,r=new FormData;return Object.keys(n).forEach((t=>{r.append(t,n[t])})),r.append(i,e),r}}var yK=0,vK=1,bK=2,wK=3;class xK{validateFile(t,e){var{allowedExtensions:i,minFileSize:n,maxFileSize:r}=e;return{validExtension:this.isValidFileExtension(t.extension,i),validMinFileSize:this.isValidMinFileSize(t.size,n),validMaxFileSize:this.isValidMaxFileSize(t.size,r)}}isValidFileExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!nK(e)||e.map((t=>t.toLowerCase())).includes(t.toLowerCase())}isValidMinFileSize(t,e){return!nK(e)||t>e}isValidMaxFileSize(t,e){return!nK(e)||t<e}}class SK{constructor(t){this.id=m(),this.name=_(t.name),this.size=t.size,this.extension=t.extension,this.progress=t.progress||0,this.rawFile=t.rawFile,this.status=t.status||yK,this.invalidExtension=t.invalidExtension||!1,this.invalidMinFileSize=t.invalidMinSize||!1,this.invalidMaxFileSize=t.invalidMaxFileSize||!1}isValid(){return!this.invalidExtension&&!this.invalidMinFileSize&&!this.invalidMaxFileSize}}function kK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var CK="change",AK="keydown",_K="focusout",TK=[fe.ARROWLEFT,fe.ARROWRIGHT,fe.ARROWUP,fe.ARROWDOWN],OK=t=>t?parseInt(t.getAttribute("data-index"),10):null;class EK extends H{constructor(t,e){super(t,e),kK(this,"options",{dotNetInstance:null,allowedExtensions:[],minFileSize:null,maxFileSize:null,multiple:!1,jsinterop:{onSelect:null,focusout:null}}),kK(this,"onInputChange",(t=>{var e=this.getFilesInfo(t.target.files);navigator.userAgent.match(/webkit/i)&&(t.target.type="",t.target.type="file"),this.options.multiple||this.clearFiles(),this.addFiles(e),this.triggerFileSelect(e)})),kK(this,"onKeyDown",(t=>{TK.includes(t.key)&&t.preventDefault()})),kK(this,"onFocusOut",(t=>{var e=t.target.closest(".k-file"),i=OK(e),n=t.relatedTarget?t.relatedTarget.closest(".k-file"):null,r=OK(n);this.invokeFocusOut(i,r)})),this.extendOptions(e),this.inputElement=this.element.querySelector("input[type='file']"),this.initValidator(),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents(),this.inputElement=null,this.destroyValidator(),super.destroy()}bindEvents(){this.inputElement&&this.inputElement.addEventListener(CK,this.onInputChange),this.element.addEventListener(AK,this.onKeyDown),this.element.addEventListener(_K,this.onFocusOut)}unbindEvents(){this.inputElement&&this.inputElement.removeEventListener(CK,this.onInputChange),this.element.removeEventListener(AK,this.onKeyDown),this.element.removeEventListener(_K,this.onFocusOut)}resetState(){this.setState({files:[]})}setState(t){this.state=u(this.state||{},t)}initValidator(){this.validator=new xK}destroyValidator(){this.validator=null}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}addFiles(t){iK(t).forEach((t=>{this.addFile(t)}))}addFile(t){this.getFile(t.id)||(this.validateFile(t),this.state.files.push(t))}removeFileFromState(t){var e=this.state.files.filter((e=>e.id!==t));this.setState({files:e})}getFiles(){return this.state.files}getFile(t){return this.state.files.find((e=>e.id===t))}getFileInfo(t){var e=(t=>({name:t.name,size:t.size,extension:rK(t.name),rawFile:t}))(t);return new SK(e)}getFilesInfo(t){return iK(t).map(this.getFileInfo)}clearFiles(){this.setState({files:[]})}validateFile(t){if(this.validator){var e=this.validator.validateFile(t,{allowedExtensions:this.options.allowedExtensions,minFileSize:this.options.minFileSize,maxFileSize:this.options.maxFileSize});t.invalidExtension=!e.validExtension,t.invalidMinFileSize=!e.validMinFileSize,t.invalidMaxFileSize=!e.validMaxFileSize}}invokeFocusOut(t,e){var i;null!==(i=t)&&i>=0&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,{relatedTargetFileIndex:e})}),1)}focusFile(t){var e=Array.from(this.element.querySelectorAll(".k-file")||[])[t];this.focusElement(e)}focusInput(){this.focusElement(this.inputElement)}focusElement(t){t instanceof HTMLElement&&nt(t)}openSelectFileDialog(){this.inputElement&&this.inputElement.click&&this.inputElement.click()}}function MK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class PK extends EK{constructor(t,e){super(t,e),MK(this,"options",{saveUrl:null,saveField:"files",removeUrl:null,removeField:"files",withCredentials:!1,autoUpload:!1,jsinterop:{onProgress:null,onSuccess:null,onError:null}}),MK(this,"onProgress",(t=>{var e=this.getFile(t.file.id);nK(e)&&(e.progress=t.file.progress,this.invokeMethodAsync(this.options.jsinterop.onProgress,{files:[e],progress:t.file.progress}))})),MK(this,"onSuccess",(t=>{var e=[this.getFile(t.file.id)];t.operation===fK?this.removeFileFromState(t.file.id):this.setFileStatus(e,vK),this.invokeMethodAsync(this.options.jsinterop.onSuccess,{operation:t.operation,files:e,request:t.request})})),MK(this,"onError",(t=>{var e=[this.getFile(t.file.id)];t.operation===dK&&this.setFileStatus(e,wK),this.invokeMethodAsync(this.options.jsinterop.onError,{operation:t.operation,files:e,request:t.request})})),this.extendOptions(e),this.initOrUpdateUploadService(this.options)}destroy(){this.destroyUploadService(),super.destroy()}setOptions(t){this.extendOptions(t),this.initOrUpdateUploadService(this.options)}initOrUpdateUploadService(t){this.uploadService?this.uploadService.setOptions(t):this.uploadService=this.initUploadService(t)}initUploadService(t){return new mK({saveUrl:t.saveUrl,saveField:t.saveField,removeUrl:t.removeUrl,removeField:t.removeField,withCredentials:t.withCredentials,events:{uploadProgress:this.onProgress,uploadSuccess:this.onSuccess,uploadError:this.onError,removeSuccess:this.onSuccess,removeError:this.onError}})}destroyUploadService(){this.uploadService&&this.uploadService.destroy()}deleteFile(t){var{fileId:e,options:i}=t;this.removeFile(e,i)}removeFile(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getFile(t);i&&(i.status===vK?this.uploadService.removeFile(i,{headers:e.requestHeaders,data:e.requestData}):this.removeFileFromState(t))}uploadFiles(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.files||[]).length>0?t.files:this.getFiles(),i=this.getFilesForUpload(e);this.setFileStatus(i,bK),this.uploadService.uploadFiles(i,{headers:t.requestHeaders,data:t.requestData})}retryFile(t){var{fileId:e,options:i={}}=t,n=this.getFile(e);n&&n.status===wK&&this.uploadService.uploadFile(n,{headers:i.requestHeaders,data:i.requestData})}cancelFile(t){this.getFile(t)&&(this.uploadService.cancelFile(t),this.removeFile(t))}focusClearButton(){var t=this.element.querySelector(".k-clear-selected");this.focusElement(t)}focusUploadButton(){var t=this.element.querySelector(".k-upload-selected");this.focusElement(t)}getFilesForUpload(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{var i=this.getFile(e.id);this.isFileForUpload(i)&&t.push(i)})),t}isFileForUpload(t){return t.isValid()&&t.status===yK}setFileStatus(t,e){(Array.isArray(t)?t:[t]).forEach((t=>{nK(t)&&(t.status=e)}))}openFileSelect(){this.inputElement&&this.inputElement.click()}}class IK extends EK{constructor(t,e){super(t,e),this.extendOptions(e)}destroy(){super.destroy()}setOptions(t){this.extendOptions(t)}deleteFile(t){this.removeFileFromState(t)}readBlob(t){return function(t){return new Promise((function(e,i){var n=new FileReader;n.onerror=function(){n.abort(),i("Error reading file.")},n.onload=function(){e(n.result)},t&&n.readAsArrayBuffer(t.rawFile)}))}(t)}readBytes(t){var e=this.getFile(t[0].fileId);return this.readBlob(e).then((function(e){var i=new Uint8Array(e,t[0].start,Math.min(e.byteLength,t[0].count));return btoa(String.fromCharCode.apply(null,i))}))}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}}function FK(t,e){Zt(PK,t,e)}function DK(t,e){Zt(IK,t,e)}function RK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var LK=D("data-col-index"),NK=Array.from;class BK extends H{constructor(t,e){super(t,e),RK(this,"options",{dotNetInstance:null,tableSelector:".k-grid-table",debounceDelay:180,headerSelector:"k-grid-header",contentSelector:"k-grid-content",footerSelector:"k-grid-footer",jsinterop:{onScroll:""}}),RK(this,"detectScrollTopChanged",(t=>{this.state.scrollTopChanged=this.state.scrollTop!==t.target.scrollTop,this.state.scrollTop=t.target.scrollTop})),RK(this,"onScroll",(t=>{if(!this.state.scrollTopChanged){var e=document.activeElement?document.activeElement.closest(LK):null,i=e?e.closest(L("k-focused"))||e:null,n=i?i.closest([L(this.options.headerSelector),L(this.options.contentSelector),L(this.options.footerSelector)].join(",")):null,r=k(i),s=Mt(i,n),o=0;if(i){var a=i.getBoundingClientRect().width,l=i.closest("tr"),c=(l?NK(l.querySelectorAll(LK)):[]).filter(Pe);o=c.reduce(((t,e)=>t+e.getBoundingClientRect().width),0),c.length&&o+a>this.element.clientWidth&&(s=!0)}this.invokeScroll({scrollLeft:t.target.scrollLeft,containsActiveElement:r,isActiveCellInView:s})}})),this.extendOptions(e),this.bindEvents(),this.setState({scrollTop:0,scrollTopChanged:!1,scrollLeft:0})}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedScroll=Li((t=>{this.onScroll(t)}),this.options.debounceDelay).bind(this),this.element.addEventListener("scroll",this.detectScrollTopChanged),this.element.addEventListener("scroll",this.debouncedScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.detectScrollTopChanged),this.element.removeEventListener("scroll",this.debouncedScroll),this.debouncedScroll=null}setState(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=u(this.state||{},t)}invokeScroll(t){var{scrollLeft:e,containsActiveElement:i,isActiveCellInView:n}=t;this.invokeMethodAsync(this.options.jsinterop.onScroll,{scrollLeft:e,containsActiveElement:i,isActiveCellInView:n})}}function jK(t,e){Zt(BK,ae(t,"VirtualColumnScroller"),e)}function zK(t){Qt(ae(t,"VirtualColumnScroller"))}function UK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class $K extends H{constructor(t,e){super(t,e),UK(this,"options",{skip:0,itemHeight:0,loadingItems:!1,jsinterop:{scroll:""}}),UK(this,"onElementScroll",(()=>{var t=this.options,e=Math.floor(this.element.scrollTop);if(this.scrollTop===e||this.manualSet)this.manualSet=!1;else{clearTimeout(this.timeout),t.loadingItems&&this.scrollLoadingItems(),this.scrollTop=e;var i=Math.floor(e/t.itemHeight);this.timeout=setTimeout((()=>{this.invokeMethodAsync(t.jsinterop.scroll,i)}),66)}})),this.extendOptions(e),this.timeout,this.contentElement=this.element.querySelector(".k-virtual-scroller-content"),this.total=parseInt(this.contentElement.getAttribute("data-total")),this.setScrollbarSize(),this.setPosition(e.skip),this.bindEvents()}destroy(){clearTimeout(this.timeout),this.unbindEvents(),this.contentElement=null,super.destroy()}bindEvents(){this.element.addEventListener("scroll",this.onElementScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.onElementScroll)}setScrollbarSize(){Bt()}setPosition(t){this.manualSet=!0,this.scrollTop=Math.floor(this.options.itemHeight*t);var e=this.getDisplayNoneSelectors(),i=Kt(this.element,e);this.setDisplayStyle(i,""),this.element.scrollTop=this.scrollTop,this.setDisplayStyle(i,"none")}setPositionToIndex(t){this.manualSet=!0;var e=t*this.options.itemHeight,i=e+this.options.itemHeight,n=Math.floor(this.element.scrollTop),r=kt(this.element),s=n+(this.element.offsetHeight-r);i>s?(this.scrollTop+=i-s,this.element.scrollTop=this.scrollTop):i<n&&(this.scrollTop=e,this.element.scrollTop=this.scrollTop)}scrollLoadingItems(){var t=this.options,e=Math.floor(this.element.scrollTop),i=kt(this.element),n=this.element.offsetHeight-i,r=this.contentElement.children[0].offsetHeight,s=2*t.itemHeight,o=parseFloat(this.contentElement.getAttribute("data-translate")),a=o;e<o?a=e-e%s:r+o<n+e&&(a=Math.ceil((n+e-r)/s)*s),this.contentElement.style.setProperty("transform","translateY("+a+"px)")}setDisplayStyle(t,e){t.map((t=>{t.style.display=e}))}getDisplayNoneSelectors(){return['[style*="display: none;"]','[style*="display: none"]','[style*="display:none;"]','[style*="display:none"]']}}function HK(t,e){Zt($K,t,e)}function VK(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qK="width",WK="height",XK="k-resize-",GK="n",KK="w",YK=[GK,"e","s",KK,"ne","nw","se","sw"].map((t=>"".concat(XK).concat(t))),JK=[".k-grid",".k-gantt",".k-treelist",".k-scheduler"].join(",");class ZK extends H{constructor(t,e){super(t,e),VK(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",dragEnd:"",resizeEnd:"",focusin:""},navigable:!1,draggable:!0,resizable:!0,modal:!1}),VK(this,"onFocusIn",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusin)})),VK(this,"onKeyDown",(t=>{t.keyCode===de.ESCAPE&&t.target.closest(JK)||this.element!==t.target&&t.keyCode!==de.ESCAPE||this.invokeKeyDown(t)})),VK(this,"onDragStart",(t=>{this.resetDragState();var e=this.allowedDrag(t);e&&(this.setFixedPosition(),this.initWidth(),ei(t),this.setState({dragging:{dragStarted:e,initialTop:this.state.top,initialLeft:this.state.left,cursorOffset:{top:t.pageY-this.state.top,left:t.pageX-this.state.left}}}),this.element.focus())})),VK(this,"onDrag",(t=>{if(!this.state.dragging.dragStarted)return!0;var e=t.pageY-this.state.dragging.cursorOffset.top,i=t.pageX-this.state.dragging.cursorOffset.left;this.setPosition(e,i)})),VK(this,"onDragEnd",(()=>{this.state.dragging.dragStarted&&(this.state.dragging.initialTop===this.state.top&&this.state.dragging.initialLeft===this.state.left||this.invokeMethodAsync(this.options.jsinterop.dragEnd,{top:U(this.state.top),left:U(this.state.left)}))})),VK(this,"onResizeStart",(t=>{this.resetResizeState(),this.setFixedPosition();var e=Array.from(t.originalCurrentTarget.classList).find((t=>YK.includes(t))).replace(XK,""),{currentWidth:i,currentHeight:n}=this.getDimensions()||{};i&&n&&this.setState({resizing:{initialWidth:i,initialHeight:n,targetedWidth:i,targetedHeight:n,direction:e}})})),VK(this,"onResize",(t=>{var e=this.state.resizing.targetedWidth,i=this.state.resizing.targetedHeight,n=t.delta.y,r=t.delta.x;this.state.resizing.direction.includes(GK)&&(n=this.constrainDelta(GK,n),(this.state.top>=0||n>0)&&(i-=n,this.tryApplyNewDimension(WK,i)&&this.setPosition(Number(this.state.top)+n,this.state.left)));(this.state.resizing.direction.includes("e")&&(e+=r,this.tryApplyNewDimension(qK,e)),this.state.resizing.direction.includes("s")&&(i+=n,this.tryApplyNewDimension(WK,i)),this.state.resizing.direction.includes(KK))&&(r=this.constrainDelta(KK,r),(this.state.left>=0||r>0)&&(e-=r,this.tryApplyNewDimension(qK,e)&&this.setPosition(this.state.top,Number(this.state.left)+r)))})),VK(this,"onResizeEnd",(()=>{pe(this.state.resizing.initialWidth,this.state.resizing.targetedWidth,{decimals:2})&&pe(this.state.resizing.initialHeight,this.state.resizing.targetedHeight,{decimals:2})||this.invokeMethodAsync(this.options.jsinterop.resizeEnd,{width:U(this.state.resizing.targetedWidth),height:U(this.state.resizing.targetedHeight),top:U(this.state.top),left:U(this.state.left)})})),this.extendOptions(e),this.titleBar=this.element.querySelector(".k-window-titlebar"),this.bindEvents(),this.options.navigable&&this.enableTabKeyTrap(),this.resetState()}destroy(){this.unbindEvents(),this.options.navigable&&this.disableTabKeyTrap(),this.destroyDraggable(),this.destroyResizable(),super.destroy(),this.content=this.titleBar=null}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusin",this.onFocusIn)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusin",this.onFocusIn)}onAfterShow(t){t.length&&this.setOptions(t[0]),this.unbindEvents(),this.destroyDraggable(),this.destroyResizable();var e=this.element.getAttribute("data-id");this.element=G(e),this.element&&(this.titleBar=this.element.querySelector(".k-window-titlebar"),this.content=this.element.querySelector(".k-window-content"),this.bindEvents(),this.initDraggable(),this.initResizable(),this.formKeyTrap&&(this.formKeyTrap.destroy(),this.enableTabKeyTrap()),this.focusElement())}onAfterClose(){this.restoreFocus()}focusElement(){this.options.modal&&(this.state.elementToFocusOnClose=document.activeElement),this.options.navigable?pt(this.content.id):this.element.focus()}restoreFocus(){this.state.elementToFocusOnClose&&(this.state.elementToFocusOnClose.focus(),this.state.elementToFocusOnClose=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,{type:t.type,key:t.key,code:t.keyCode,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})}enableTabKeyTrap(){this.options.modal&&(this.formKeyTrap=new Ce(this.content),this.formKeyTrap.enableKeyTrap())}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}initDraggable(){this.options.draggable&&this.createDraggable()}createDraggable(){this.titleBar&&(this.draggable=new yi(this.titleBar,{filter:".k-window-titlebar",ignore:".k-window-actions",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}allowedDrag(){return!this.isMaximized()}initResizable(){this.options.resizable&&this.createResizable()}createResizable(){this.resizable=new wP(this.element,{draggable:{filter:".k-window > .k-resize-handle"},events:{resizeStart:this.onResizeStart,resize:this.onResize,resizeEnd:this.onResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}tryApplyNewDimension(t,e){this.setDimension(t,e);var{currentWidth:i,currentHeight:n}=this.getDimensions()||{};return t===qK&&i?pe(e,i,{decimals:2})?(this.state.resizing.targetedWidth=e,!0):(this.setDimension(t,this.state.resizing.targetedWidth),!1):t===WK&&n?pe(e,n,{decimals:2})?(this.state.resizing.targetedHeight=e,!0):(this.setDimension(t,this.state.resizing.targetedHeight),!1):void 0}constrainDelta(t,e){var i=e;if(t===GK){var n=Number(this.state.top)+e;n<0&&(i-=n)}else if(t===KK){var r=Number(this.state.left)+e;r<0&&(i-=r)}return i}setFixedPosition(){var t={top:0,left:0};if(this.options.modal){var e=this.element.getBoundingClientRect();t={top:e.top,left:e.left}}else t=pX(this.element,this.element.parentElement);Z("k-centered",this.element),this.setPosition(t.top,t.left)}setPosition(t,e){this.setState({top:(Math.round(10*t)/10).toFixed(1),left:(Math.round(10*e)/10).toFixed(1)}),this.element&&(this.element.style.top=U(t),this.element.style.left=U(e))}isMaximized(){if(this.element)return"100%"===this.element.style.width&&"100%"===this.element.style.height}getDimensions(){if(this.element){var{width:t,height:e}=this.element.getBoundingClientRect();return{currentWidth:t,currentHeight:e}}}setDimension(t,e){this.element&&(t===qK?this.element.style.width=U(e):t===WK&&(this.element.style.height=U(e)))}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({elementToFocusOnClose:null,top:"",left:"",resizing:{initialWidth:"",initialHeight:"",targetedWidth:"",targetedHeight:"",direction:""},dragging:{dragStarted:"",initialTop:"",initialLeft:"",cursorOffset:{top:"",left:""}}})}resetDragState(){this.setState({dragging:{}})}resetResizeState(){this.setState({resizing:{}})}initWidth(){if(this.element&&!Boolean(this.element.style.width)){var t=this.element.offsetWidth;this.setDimension(qK,t)}}}function QK(t,e){Zt(ZK,t,e)}})(),__webpack_exports__})()));